var Iz=Object.defineProperty,Oz=Object.defineProperties;var Fz=Object.getOwnPropertyDescriptors;var eb=Object.getOwnPropertySymbols;var HT=Object.prototype.hasOwnProperty,qT=Object.prototype.propertyIsEnumerable;var Rg=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),Lz=e=>{throw TypeError(e)},Dg=Math.pow,vw=(e,t,n)=>t in e?Iz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,te=(e,t)=>{for(var n in t||(t={}))HT.call(t,n)&&vw(e,n,t[n]);if(eb)for(var n of eb(t))qT.call(t,n)&&vw(e,n,t[n]);return e},Ee=(e,t)=>Oz(e,Fz(t));var Jt=(e,t)=>{var n={};for(var i in e)HT.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&eb)for(var i of eb(e))t.indexOf(i)<0&&qT.call(e,i)&&(n[i]=e[i]);return n};var Bz=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var wn=(e,t,n)=>vw(e,typeof t!="symbol"?t+"":t,n);var Gt=(e,t,n)=>new Promise((i,o)=>{var u=g=>{try{a(n.next(g))}catch(_){o(_)}},c=g=>{try{a(n.throw(g))}catch(_){o(_)}},a=g=>g.done?i(g.value):Promise.resolve(g.value).then(u,c);a((n=n.apply(e,t)).next())}),au=function(e,t){this[0]=e,this[1]=t},Ex=(e,t,n)=>{var i=(c,a,g,_)=>{try{var S=n[c](a),E=(a=S.value)instanceof au,A=S.done;Promise.resolve(E?a[0]:a).then(N=>E?i(c==="return"?c:"next",a[1]?{done:N.done,value:N.value}:N,g,_):g({value:N,done:A})).catch(N=>i("throw",N,g,_))}catch(N){_(N)}},o=c=>u[c]=a=>new Promise((g,_)=>i(c,a,g,_)),u={};return n=n.apply(e,t),u[Rg("asyncIterator")]=()=>u,o("next"),o("throw"),o("return"),u},Mx=e=>{var t=e[Rg("asyncIterator")],n=!1,i,o={};return t==null?(t=e[Rg("iterator")](),i=u=>o[u]=c=>t[u](c)):(t=t.call(e),i=u=>o[u]=c=>{if(n){if(n=!1,u==="throw")throw c;return c}return n=!0,{done:!1,value:new au(new Promise(a=>{var g=t[u](c);g instanceof Object||Lz("Object expected"),a(g)}),1)}}),o[Rg("iterator")]=()=>o,i("next"),"throw"in t?i("throw"):o.throw=u=>{throw u},"return"in t&&i("return"),o},ww=(e,t,n)=>(t=e[Rg("asyncIterator")])?t.call(e):(e=e[Rg("iterator")](),t={},n=(i,o)=>(o=e[i])&&(t[i]=u=>new Promise((c,a,g)=>(u=o.call(e,u),g=u.done,Promise.resolve(u.value).then(_=>c({value:_,done:g}),a)))),n("next"),n("return"),t);var _ae=Bz(gn=>{function Vz(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(e,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function G0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sw={exports:{}},Nx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function Uz(){if(GT)return Nx;GT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var a in o)a!=="key"&&(u[a]=o[a])}else u=o;return o=u.ref,{$$typeof:e,type:i,key:c,ref:o!==void 0?o:null,props:u}}return Nx.Fragment=t,Nx.jsx=n,Nx.jsxs=n,Nx}var WT;function $z(){return WT||(WT=1,Sw.exports=Uz()),Sw.exports}var l=$z(),jw={exports:{}},Ei={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function Hz(){if(ZT)return Ei;ZT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.iterator;function A(fe){return fe===null||typeof fe!="object"?null:(fe=E&&fe[E]||fe["@@iterator"],typeof fe=="function"?fe:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,B={};function $(fe,Xe,tt){this.props=fe,this.context=Xe,this.refs=B,this.updater=tt||N}$.prototype.isReactComponent={},$.prototype.setState=function(fe,Xe){if(typeof fe!="object"&&typeof fe!="function"&&fe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,fe,Xe,"setState")},$.prototype.forceUpdate=function(fe){this.updater.enqueueForceUpdate(this,fe,"forceUpdate")};function q(){}q.prototype=$.prototype;function W(fe,Xe,tt){this.props=fe,this.context=Xe,this.refs=B,this.updater=tt||N}var Q=W.prototype=new q;Q.constructor=W,z(Q,$.prototype),Q.isPureReactComponent=!0;var Z=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},le=Object.prototype.hasOwnProperty;function ge(fe,Xe,tt,Me,ot,ut){return tt=ut.ref,{$$typeof:e,type:fe,key:Xe,ref:tt!==void 0?tt:null,props:ut}}function he(fe,Xe){return ge(fe.type,Xe,void 0,void 0,void 0,fe.props)}function pe(fe){return typeof fe=="object"&&fe!==null&&fe.$$typeof===e}function Ie(fe){var Xe={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(tt){return Xe[tt]})}var He=/\/+/g;function Ye(fe,Xe){return typeof fe=="object"&&fe!==null&&fe.key!=null?Ie(""+fe.key):Xe.toString(36)}function rt(){}function Rt(fe){switch(fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason;default:switch(typeof fe.status=="string"?fe.then(rt,rt):(fe.status="pending",fe.then(function(Xe){fe.status==="pending"&&(fe.status="fulfilled",fe.value=Xe)},function(Xe){fe.status==="pending"&&(fe.status="rejected",fe.reason=Xe)})),fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason}}throw fe}function St(fe,Xe,tt,Me,ot){var ut=typeof fe;(ut==="undefined"||ut==="boolean")&&(fe=null);var dt=!1;if(fe===null)dt=!0;else switch(ut){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(fe.$$typeof){case e:case t:dt=!0;break;case S:return dt=fe._init,St(dt(fe._payload),Xe,tt,Me,ot)}}if(dt)return ot=ot(fe),dt=Me===""?"."+Ye(fe,0):Me,Z(ot)?(tt="",dt!=null&&(tt=dt.replace(He,"$&/")+"/"),St(ot,Xe,tt,"",function(Ge){return Ge})):ot!=null&&(pe(ot)&&(ot=he(ot,tt+(ot.key==null||fe&&fe.key===ot.key?"":(""+ot.key).replace(He,"$&/")+"/")+dt)),Xe.push(ot)),1;dt=0;var pt=Me===""?".":Me+":";if(Z(fe))for(var Ve=0;Ve<fe.length;Ve++)Me=fe[Ve],ut=pt+Ye(Me,Ve),dt+=St(Me,Xe,tt,ut,ot);else if(Ve=A(fe),typeof Ve=="function")for(fe=Ve.call(fe),Ve=0;!(Me=fe.next()).done;)Me=Me.value,ut=pt+Ye(Me,Ve++),dt+=St(Me,Xe,tt,ut,ot);else if(ut==="object"){if(typeof fe.then=="function")return St(Rt(fe),Xe,tt,Me,ot);throw Xe=String(fe),Error("Objects are not valid as a React child (found: "+(Xe==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":Xe)+"). If you meant to render a collection of children, use an array instead.")}return dt}function De(fe,Xe,tt){if(fe==null)return fe;var Me=[],ot=0;return St(fe,Me,"","",function(ut){return Xe.call(tt,ut,ot++)}),Me}function Qe(fe){if(fe._status===-1){var Xe=fe._result;Xe=Xe(),Xe.then(function(tt){(fe._status===0||fe._status===-1)&&(fe._status=1,fe._result=tt)},function(tt){(fe._status===0||fe._status===-1)&&(fe._status=2,fe._result=tt)}),fe._status===-1&&(fe._status=0,fe._result=Xe)}if(fe._status===1)return fe._result.default;throw fe._result}var et=typeof reportError=="function"?reportError:function(fe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof fe=="object"&&fe!==null&&typeof fe.message=="string"?String(fe.message):String(fe),error:fe});if(!window.dispatchEvent(Xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",fe);return}console.error(fe)};function Nt(){}return Ei.Children={map:De,forEach:function(fe,Xe,tt){De(fe,function(){Xe.apply(this,arguments)},tt)},count:function(fe){var Xe=0;return De(fe,function(){Xe++}),Xe},toArray:function(fe){return De(fe,function(Xe){return Xe})||[]},only:function(fe){if(!pe(fe))throw Error("React.Children.only expected to receive a single React element child.");return fe}},Ei.Component=$,Ei.Fragment=n,Ei.Profiler=o,Ei.PureComponent=W,Ei.StrictMode=i,Ei.Suspense=g,Ei.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Ei.__COMPILER_RUNTIME={__proto__:null,c:function(fe){return K.H.useMemoCache(fe)}},Ei.cache=function(fe){return function(){return fe.apply(null,arguments)}},Ei.cloneElement=function(fe,Xe,tt){if(fe==null)throw Error("The argument must be a React element, but you passed "+fe+".");var Me=z({},fe.props),ot=fe.key,ut=void 0;if(Xe!=null)for(dt in Xe.ref!==void 0&&(ut=void 0),Xe.key!==void 0&&(ot=""+Xe.key),Xe)!le.call(Xe,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&Xe.ref===void 0||(Me[dt]=Xe[dt]);var dt=arguments.length-2;if(dt===1)Me.children=tt;else if(1<dt){for(var pt=Array(dt),Ve=0;Ve<dt;Ve++)pt[Ve]=arguments[Ve+2];Me.children=pt}return ge(fe.type,ot,void 0,void 0,ut,Me)},Ei.createContext=function(fe){return fe={$$typeof:c,_currentValue:fe,_currentValue2:fe,_threadCount:0,Provider:null,Consumer:null},fe.Provider=fe,fe.Consumer={$$typeof:u,_context:fe},fe},Ei.createElement=function(fe,Xe,tt){var Me,ot={},ut=null;if(Xe!=null)for(Me in Xe.key!==void 0&&(ut=""+Xe.key),Xe)le.call(Xe,Me)&&Me!=="key"&&Me!=="__self"&&Me!=="__source"&&(ot[Me]=Xe[Me]);var dt=arguments.length-2;if(dt===1)ot.children=tt;else if(1<dt){for(var pt=Array(dt),Ve=0;Ve<dt;Ve++)pt[Ve]=arguments[Ve+2];ot.children=pt}if(fe&&fe.defaultProps)for(Me in dt=fe.defaultProps,dt)ot[Me]===void 0&&(ot[Me]=dt[Me]);return ge(fe,ut,void 0,void 0,null,ot)},Ei.createRef=function(){return{current:null}},Ei.forwardRef=function(fe){return{$$typeof:a,render:fe}},Ei.isValidElement=pe,Ei.lazy=function(fe){return{$$typeof:S,_payload:{_status:-1,_result:fe},_init:Qe}},Ei.memo=function(fe,Xe){return{$$typeof:_,type:fe,compare:Xe===void 0?null:Xe}},Ei.startTransition=function(fe){var Xe=K.T,tt={};K.T=tt;try{var Me=fe(),ot=K.S;ot!==null&&ot(tt,Me),typeof Me=="object"&&Me!==null&&typeof Me.then=="function"&&Me.then(Nt,et)}catch(ut){et(ut)}finally{K.T=Xe}},Ei.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Ei.use=function(fe){return K.H.use(fe)},Ei.useActionState=function(fe,Xe,tt){return K.H.useActionState(fe,Xe,tt)},Ei.useCallback=function(fe,Xe){return K.H.useCallback(fe,Xe)},Ei.useContext=function(fe){return K.H.useContext(fe)},Ei.useDebugValue=function(){},Ei.useDeferredValue=function(fe,Xe){return K.H.useDeferredValue(fe,Xe)},Ei.useEffect=function(fe,Xe,tt){var Me=K.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Me.useEffect(fe,Xe)},Ei.useId=function(){return K.H.useId()},Ei.useImperativeHandle=function(fe,Xe,tt){return K.H.useImperativeHandle(fe,Xe,tt)},Ei.useInsertionEffect=function(fe,Xe){return K.H.useInsertionEffect(fe,Xe)},Ei.useLayoutEffect=function(fe,Xe){return K.H.useLayoutEffect(fe,Xe)},Ei.useMemo=function(fe,Xe){return K.H.useMemo(fe,Xe)},Ei.useOptimistic=function(fe,Xe){return K.H.useOptimistic(fe,Xe)},Ei.useReducer=function(fe,Xe,tt){return K.H.useReducer(fe,Xe,tt)},Ei.useRef=function(fe){return K.H.useRef(fe)},Ei.useState=function(fe){return K.H.useState(fe)},Ei.useSyncExternalStore=function(fe,Xe,tt){return K.H.useSyncExternalStore(fe,Xe,tt)},Ei.useTransition=function(){return K.H.useTransition()},Ei.version="19.1.0",Ei}var YT;function h1(){return YT||(YT=1,jw.exports=Hz()),jw.exports}var L=h1();const Pt=G0(L),aA=Vz({__proto__:null,default:Pt},[L]);var Cw={exports:{}},Ax={},Tw={exports:{}},kw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function qz(){return XT||(XT=1,function(e){function t(De,Qe){var et=De.length;De.push(Qe);e:for(;0<et;){var Nt=et-1>>>1,fe=De[Nt];if(0<o(fe,Qe))De[Nt]=Qe,De[et]=fe,et=Nt;else break e}}function n(De){return De.length===0?null:De[0]}function i(De){if(De.length===0)return null;var Qe=De[0],et=De.pop();if(et!==Qe){De[0]=et;e:for(var Nt=0,fe=De.length,Xe=fe>>>1;Nt<Xe;){var tt=2*(Nt+1)-1,Me=De[tt],ot=tt+1,ut=De[ot];if(0>o(Me,et))ot<fe&&0>o(ut,Me)?(De[Nt]=ut,De[ot]=et,Nt=ot):(De[Nt]=Me,De[tt]=et,Nt=tt);else if(ot<fe&&0>o(ut,et))De[Nt]=ut,De[ot]=et,Nt=ot;else break e}}return Qe}function o(De,Qe){var et=De.sortIndex-Qe.sortIndex;return et!==0?et:De.id-Qe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var c=Date,a=c.now();e.unstable_now=function(){return c.now()-a}}var g=[],_=[],S=1,E=null,A=3,N=!1,z=!1,B=!1,$=!1,q=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate!="undefined"?setImmediate:null;function Z(De){for(var Qe=n(_);Qe!==null;){if(Qe.callback===null)i(_);else if(Qe.startTime<=De)i(_),Qe.sortIndex=Qe.expirationTime,t(g,Qe);else break;Qe=n(_)}}function K(De){if(B=!1,Z(De),!z)if(n(g)!==null)z=!0,le||(le=!0,Ye());else{var Qe=n(_);Qe!==null&&St(K,Qe.startTime-De)}}var le=!1,ge=-1,he=5,pe=-1;function Ie(){return $?!0:!(e.unstable_now()-pe<he)}function He(){if($=!1,le){var De=e.unstable_now();pe=De;var Qe=!0;try{e:{z=!1,B&&(B=!1,W(ge),ge=-1),N=!0;var et=A;try{t:{for(Z(De),E=n(g);E!==null&&!(E.expirationTime>De&&Ie());){var Nt=E.callback;if(typeof Nt=="function"){E.callback=null,A=E.priorityLevel;var fe=Nt(E.expirationTime<=De);if(De=e.unstable_now(),typeof fe=="function"){E.callback=fe,Z(De),Qe=!0;break t}E===n(g)&&i(g),Z(De)}else i(g);E=n(g)}if(E!==null)Qe=!0;else{var Xe=n(_);Xe!==null&&St(K,Xe.startTime-De),Qe=!1}}break e}finally{E=null,A=et,N=!1}Qe=void 0}}finally{Qe?Ye():le=!1}}}var Ye;if(typeof Q=="function")Ye=function(){Q(He)};else if(typeof MessageChannel!="undefined"){var rt=new MessageChannel,Rt=rt.port2;rt.port1.onmessage=He,Ye=function(){Rt.postMessage(null)}}else Ye=function(){q(He,0)};function St(De,Qe){ge=q(function(){De(e.unstable_now())},Qe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(De){De.callback=null},e.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<De?Math.floor(1e3/De):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_next=function(De){switch(A){case 1:case 2:case 3:var Qe=3;break;default:Qe=A}var et=A;A=Qe;try{return De()}finally{A=et}},e.unstable_requestPaint=function(){$=!0},e.unstable_runWithPriority=function(De,Qe){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var et=A;A=De;try{return Qe()}finally{A=et}},e.unstable_scheduleCallback=function(De,Qe,et){var Nt=e.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?Nt+et:Nt):et=Nt,De){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=et+fe,De={id:S++,callback:Qe,priorityLevel:De,startTime:et,expirationTime:fe,sortIndex:-1},et>Nt?(De.sortIndex=et,t(_,De),n(g)===null&&De===n(_)&&(B?(W(ge),ge=-1):B=!0,St(K,et-Nt))):(De.sortIndex=fe,t(g,De),z||N||(z=!0,le||(le=!0,Ye()))),De},e.unstable_shouldYield=Ie,e.unstable_wrapCallback=function(De){var Qe=A;return function(){var et=A;A=Qe;try{return De.apply(this,arguments)}finally{A=et}}}}(kw)),kw}var KT;function Gz(){return KT||(KT=1,Tw.exports=qz()),Tw.exports}var Ew={exports:{}},uo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function Wz(){if(QT)return uo;QT=1;var e=h1();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:_,implementation:S}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return uo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,uo.createPortal=function(g,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,S)},uo.flushSync=function(g){var _=c.T,S=i.p;try{if(c.T=null,i.p=2,g)return g()}finally{c.T=_,i.p=S,i.d.f()}},uo.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(g,_))},uo.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},uo.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var S=_.as,E=a(S,_.crossOrigin),A=typeof _.integrity=="string"?_.integrity:void 0,N=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?i.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:N}):S==="script"&&i.d.X(g,{crossOrigin:E,integrity:A,fetchPriority:N,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},uo.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=a(_.as,_.crossOrigin);i.d.M(g,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(g)},uo.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,E=a(S,_.crossOrigin);i.d.L(g,S,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},uo.preloadModule=function(g,_){if(typeof g=="string")if(_){var S=a(_.as,_.crossOrigin);i.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(g)},uo.requestFormReset=function(g){i.d.r(g)},uo.unstable_batchedUpdates=function(g,_){return g(_)},uo.useFormState=function(g,_,S){return c.H.useFormState(g,_,S)},uo.useFormStatus=function(){return c.H.useHostTransitionStatus()},uo.version="19.1.0",uo}var JT;function oA(){if(JT)return Ew.exports;JT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ew.exports=Wz(),Ew.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek;function Zz(){if(ek)return Ax;ek=1;var e=Gz(),t=h1(),n=oA();function i(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function u(h){var m=h,b=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(b=m.return),h=m.return;while(h)}return m.tag===3?b:null}function c(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function a(h){if(u(h)!==h)throw Error(i(188))}function g(h){var m=h.alternate;if(!m){if(m=u(h),m===null)throw Error(i(188));return m!==h?null:h}for(var b=h,k=m;;){var D=b.return;if(D===null)break;var U=D.alternate;if(U===null){if(k=D.return,k!==null){b=k;continue}break}if(D.child===U.child){for(U=D.child;U;){if(U===b)return a(D),h;if(U===k)return a(D),m;U=U.sibling}throw Error(i(188))}if(b.return!==k.return)b=D,k=U;else{for(var re=!1,be=D.child;be;){if(be===b){re=!0,b=D,k=U;break}if(be===k){re=!0,k=D,b=U;break}be=be.sibling}if(!re){for(be=U.child;be;){if(be===b){re=!0,b=U,k=D;break}if(be===k){re=!0,k=U,b=D;break}be=be.sibling}if(!re)throw Error(i(189))}}if(b.alternate!==k)throw Error(i(190))}if(b.tag!==3)throw Error(i(188));return b.stateNode.current===b?h:m}function _(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=_(h),m!==null)return m;h=h.sibling}return null}var S=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),pe=Symbol.for("react.activity"),Ie=Symbol.for("react.memo_cache_sentinel"),He=Symbol.iterator;function Ye(h){return h===null||typeof h!="object"?null:(h=He&&h[He]||h["@@iterator"],typeof h=="function"?h:null)}var rt=Symbol.for("react.client.reference");function Rt(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===rt?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case z:return"Fragment";case $:return"Profiler";case B:return"StrictMode";case K:return"Suspense";case le:return"SuspenseList";case pe:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case N:return"Portal";case Q:return(h.displayName||"Context")+".Provider";case W:return(h._context.displayName||"Context")+".Consumer";case Z:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case ge:return m=h.displayName||null,m!==null?m:Rt(h.type)||"Memo";case he:m=h._payload,h=h._init;try{return Rt(h(m))}catch(b){}}return null}var St=Array.isArray,De=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},Nt=[],fe=-1;function Xe(h){return{current:h}}function tt(h){0>fe||(h.current=Nt[fe],Nt[fe]=null,fe--)}function Me(h,m){fe++,Nt[fe]=h.current,h.current=m}var ot=Xe(null),ut=Xe(null),dt=Xe(null),pt=Xe(null);function Ve(h,m){switch(Me(dt,m),Me(ut,h),Me(ot,null),m.nodeType){case 9:case 11:h=(h=m.documentElement)&&(h=h.namespaceURI)?vx(h):0;break;default:if(h=m.tagName,m=m.namespaceURI)m=vx(m),h=vf(m,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}tt(ot),Me(ot,h)}function Ge(){tt(ot),tt(ut),tt(dt)}function Dt(h){h.memoizedState!==null&&Me(pt,h);var m=ot.current,b=vf(m,h.type);m!==b&&(Me(ut,h),Me(ot,b))}function Lt(h){ut.current===h&&(tt(ot),tt(ut)),pt.current===h&&(tt(pt),C._currentValue=et)}var It=Object.prototype.hasOwnProperty,Ot=e.unstable_scheduleCallback,en=e.unstable_cancelCallback,_n=e.unstable_shouldYield,Yn=e.unstable_requestPaint,Hn=e.unstable_now,hn=e.unstable_getCurrentPriorityLevel,on=e.unstable_ImmediatePriority,Ue=e.unstable_UserBlockingPriority,We=e.unstable_NormalPriority,Pe=e.unstable_LowPriority,Bt=e.unstable_IdlePriority,Et=e.log,nn=e.unstable_setDisableYieldValue,yn=null,ln=null;function At(h){if(typeof Et=="function"&&nn(h),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(yn,h)}catch(m){}}var ke=Math.clz32?Math.clz32:_e,ae=Math.log,ue=Math.LN2;function _e(h){return h>>>=0,h===0?32:31-(ae(h)/ue|0)|0}var Ce=256,Ae=4194304;function J(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function nt(h,m,b){var k=h.pendingLanes;if(k===0)return 0;var D=0,U=h.suspendedLanes,re=h.pingedLanes;h=h.warmLanes;var be=k&134217727;return be!==0?(k=be&~U,k!==0?D=J(k):(re&=be,re!==0?D=J(re):b||(b=be&~h,b!==0&&(D=J(b))))):(be=k&~U,be!==0?D=J(be):re!==0?D=J(re):b||(b=k&~h,b!==0&&(D=J(b)))),D===0?0:m!==0&&m!==D&&(m&U)===0&&(U=D&-D,b=m&-m,U>=b||U===32&&(b&4194048)!==0)?m:D}function Je(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function jt(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qt(){var h=Ce;return Ce<<=1,(Ce&4194048)===0&&(Ce=256),h}function Ft(){var h=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),h}function bn(h){for(var m=[],b=0;31>b;b++)m.push(h);return m}function Tn(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function ct(h,m,b,k,D,U){var re=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var be=h.entanglements,$e=h.expirationTimes,ft=h.hiddenUpdates;for(b=re&~b;0<b;){var Ht=31-ke(b),Qt=1<<Ht;be[Ht]=0,$e[Ht]=-1;var Tt=ft[Ht];if(Tt!==null)for(ft[Ht]=null,Ht=0;Ht<Tt.length;Ht++){var zt=Tt[Ht];zt!==null&&(zt.lane&=-536870913)}b&=~Qt}k!==0&&wt(h,k,0),U!==0&&D===0&&h.tag!==0&&(h.suspendedLanes|=U&~(re&~m))}function wt(h,m,b){h.pendingLanes|=m,h.suspendedLanes&=~m;var k=31-ke(m);h.entangledLanes|=m,h.entanglements[k]=h.entanglements[k]|1073741824|b&4194090}function Wt(h,m){var b=h.entangledLanes|=m;for(h=h.entanglements;b;){var k=31-ke(b),D=1<<k;D&m|h[k]&m&&(h[k]|=m),b&=~D}}function Ut(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function vn(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Gi(){var h=Qe.p;return h!==0?h:(h=window.event,h===void 0?32:Ze(h.type))}function Jn(h,m){var b=Qe.p;try{return Qe.p=h,m()}finally{Qe.p=b}}var ai=Math.random().toString(36).slice(2),qn="__reactFiber$"+ai,Bn="__reactProps$"+ai,yi="__reactContainer$"+ai,Xt="__reactEvents$"+ai,lt="__reactListeners$"+ai,Ri="__reactHandles$"+ai,li="__reactResources$"+ai,Wi="__reactMarker$"+ai;function ds(h){delete h[qn],delete h[Bn],delete h[Xt],delete h[lt],delete h[Ri]}function tn(h){var m=h[qn];if(m)return m;for(var b=h.parentNode;b;){if(m=b[yi]||b[qn]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(h=Sx(h);h!==null;){if(b=h[qn])return b;h=Sx(h)}return m}h=b,b=h.parentNode}return null}function ei(h){if(h=h[qn]||h[yi]){var m=h.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return h}return null}function On(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h.stateNode;throw Error(i(33))}function ws(h){var m=h[li];return m||(m=h[li]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function Ii(h){h[Wi]=!0}var Xr=new Set,Vn={};function Kr(h,m){Rr(h,m),Rr(h+"Capture",m)}function Rr(h,m){for(Vn[h]=m,h=0;h<m.length;h++)Xr.add(m[h])}var da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hs={},Qr={};function ka(h){return It.call(Qr,h)?!0:It.call(hs,h)?!1:da.test(h)?Qr[h]=!0:(hs[h]=!0,!1)}function Di(h,m,b){if(ka(m))if(b===null)h.removeAttribute(m);else{switch(typeof b){case"undefined":case"function":case"symbol":h.removeAttribute(m);return;case"boolean":var k=m.toLowerCase().slice(0,5);if(k!=="data-"&&k!=="aria-"){h.removeAttribute(m);return}}h.setAttribute(m,""+b)}}function ts(h,m,b){if(b===null)h.removeAttribute(m);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(m);return}h.setAttribute(m,""+b)}}function ti(h,m,b,k){if(k===null)h.removeAttribute(b);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(b);return}h.setAttributeNS(m,b,""+k)}}var ml,gl;function Ea(h){if(ml===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);ml=m&&m[1]||"",gl=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ml+h+gl}var Ha=!1;function ha(h,m){if(!h||Ha)return"";Ha=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var k={DetermineComponentFrameRoot:function(){try{if(m){var Qt=function(){throw Error()};if(Object.defineProperty(Qt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qt,[])}catch(zt){var Tt=zt}Reflect.construct(h,[],Qt)}else{try{Qt.call()}catch(zt){Tt=zt}h.call(Qt.prototype)}}else{try{throw Error()}catch(zt){Tt=zt}(Qt=h())&&typeof Qt.catch=="function"&&Qt.catch(function(){})}}catch(zt){if(zt&&Tt&&typeof zt.stack=="string")return[zt.stack,Tt.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=k.DetermineComponentFrameRoot(),re=U[0],be=U[1];if(re&&be){var $e=re.split(`
`),ft=be.split(`
`);for(D=k=0;k<$e.length&&!$e[k].includes("DetermineComponentFrameRoot");)k++;for(;D<ft.length&&!ft[D].includes("DetermineComponentFrameRoot");)D++;if(k===$e.length||D===ft.length)for(k=$e.length-1,D=ft.length-1;1<=k&&0<=D&&$e[k]!==ft[D];)D--;for(;1<=k&&0<=D;k--,D--)if($e[k]!==ft[D]){if(k!==1||D!==1)do if(k--,D--,0>D||$e[k]!==ft[D]){var Ht=`
`+$e[k].replace(" at new "," at ");return h.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",h.displayName)),Ht}while(1<=k&&0<=D);break}}}finally{Ha=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?Ea(b):""}function Ph(h){switch(h.tag){case 26:case 27:case 5:return Ea(h.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 15:return ha(h.type,!1);case 11:return ha(h.type.render,!1);case 1:return ha(h.type,!0);case 31:return Ea("Activity");default:return""}}function Cu(h){try{var m="";do m+=Ph(h),h=h.return;while(h);return m}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function Jr(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function yl(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function jd(h){var m=yl(h)?"checked":"value",b=Object.getOwnPropertyDescriptor(h.constructor.prototype,m),k=""+h[m];if(!h.hasOwnProperty(m)&&typeof b!="undefined"&&typeof b.get=="function"&&typeof b.set=="function"){var D=b.get,U=b.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return D.call(this)},set:function(re){k=""+re,U.call(this,re)}}),Object.defineProperty(h,m,{enumerable:b.enumerable}),{getValue:function(){return k},setValue:function(re){k=""+re},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function Sc(h){h._valueTracker||(h._valueTracker=jd(h))}function Bo(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var b=m.getValue(),k="";return h&&(k=yl(h)?h.checked?"true":"false":h.value),h=k,h!==b?(m.setValue(h),!0):!1}function jc(h){if(h=h||(typeof document!="undefined"?document:void 0),typeof h=="undefined")return null;try{return h.activeElement||h.body}catch(m){return h.body}}var Rh=/[\n"\\]/g;function Dr(h){return h.replace(Rh,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function vo(h,m,b,k,D,U,re,be){h.name="",re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?h.type=re:h.removeAttribute("type"),m!=null?re==="number"?(m===0&&h.value===""||h.value!=m)&&(h.value=""+Jr(m)):h.value!==""+Jr(m)&&(h.value=""+Jr(m)):re!=="submit"&&re!=="reset"||h.removeAttribute("value"),m!=null?ku(h,re,Jr(m)):b!=null?ku(h,re,Jr(b)):k!=null&&h.removeAttribute("value"),D==null&&U!=null&&(h.defaultChecked=!!U),D!=null&&(h.checked=D&&typeof D!="function"&&typeof D!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?h.name=""+Jr(be):h.removeAttribute("name")}function Tu(h,m,b,k,D,U,re,be){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(h.type=U),m!=null||b!=null){if(!(U!=="submit"&&U!=="reset"||m!=null))return;b=b!=null?""+Jr(b):"",m=m!=null?""+Jr(m):b,be||m===h.value||(h.value=m),h.defaultValue=m}k=k!=null?k:D,k=typeof k!="function"&&typeof k!="symbol"&&!!k,h.checked=be?h.checked:!!k,h.defaultChecked=!!k,re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"&&(h.name=re)}function ku(h,m,b){m==="number"&&jc(h.ownerDocument)===h||h.defaultValue===""+b||(h.defaultValue=""+b)}function ea(h,m,b,k){if(h=h.options,m){m={};for(var D=0;D<b.length;D++)m["$"+b[D]]=!0;for(b=0;b<h.length;b++)D=m.hasOwnProperty("$"+h[b].value),h[b].selected!==D&&(h[b].selected=D),D&&k&&(h[b].defaultSelected=!0)}else{for(b=""+Jr(b),m=null,D=0;D<h.length;D++){if(h[D].value===b){h[D].selected=!0,k&&(h[D].defaultSelected=!0);return}m!==null||h[D].disabled||(m=h[D])}m!==null&&(m.selected=!0)}}function xl(h,m,b){if(m!=null&&(m=""+Jr(m),m!==h.value&&(h.value=m),b==null)){h.defaultValue!==m&&(h.defaultValue=m);return}h.defaultValue=b!=null?""+Jr(b):""}function Cd(h,m,b,k){if(m==null){if(k!=null){if(b!=null)throw Error(i(92));if(St(k)){if(1<k.length)throw Error(i(93));k=k[0]}b=k}b==null&&(b=""),m=b}b=Jr(m),h.defaultValue=b,k=h.textContent,k===b&&k!==""&&k!==null&&(h.value=k)}function qa(h,m){if(m){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=m;return}}h.textContent=m}var Vl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eu(h,m,b){var k=m.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?k?h.setProperty(m,""):m==="float"?h.cssFloat="":h[m]="":k?h.setProperty(m,b):typeof b!="number"||b===0||Vl.has(m)?m==="float"?h.cssFloat=b:h[m]=(""+b).trim():h[m]=b+"px"}function or(h,m,b){if(m!=null&&typeof m!="object")throw Error(i(62));if(h=h.style,b!=null){for(var k in b)!b.hasOwnProperty(k)||m!=null&&m.hasOwnProperty(k)||(k.indexOf("--")===0?h.setProperty(k,""):k==="float"?h.cssFloat="":h[k]="");for(var D in m)k=m[D],m.hasOwnProperty(D)&&b[D]!==k&&Eu(h,D,k)}else for(var U in m)m.hasOwnProperty(U)&&Eu(h,U,m[U])}function ci(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ga(h){return Sr.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var ui=null;function So(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Ma=null,Na=null;function fr(h){var m=ei(h);if(m&&(h=m.stateNode)){var b=h[Bn]||null;e:switch(h=m.stateNode,m.type){case"input":if(vo(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),m=b.name,b.type==="radio"&&m!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Dr(""+m)+'"][type="radio"]'),m=0;m<b.length;m++){var k=b[m];if(k!==h&&k.form===h.form){var D=k[Bn]||null;if(!D)throw Error(i(90));vo(k,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(m=0;m<b.length;m++)k=b[m],k.form===h.form&&Bo(k)}break e;case"textarea":xl(h,b.value,b.defaultValue);break e;case"select":m=b.value,m!=null&&ea(h,!!b.multiple,m,!1)}}}var Ns=!1;function Fs(h,m,b){if(Ns)return h(m,b);Ns=!0;try{var k=h(m);return k}finally{if(Ns=!1,(Ma!==null||Na!==null)&&(og(),Ma&&(m=Ma,h=Na,Na=Ma=null,fr(m),h)))for(m=0;m<h.length;m++)fr(h[m])}}function Ss(h,m){var b=h.stateNode;if(b===null)return null;var k=b[Bn]||null;if(k===null)return null;b=k[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(h=h.type,k=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!k;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(i(231,m,typeof b));return b}var vi=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),jo=!1;if(vi)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){jo=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch(h){jo=!1}var ys=null,rs=null,Aa=null;function Mi(){if(Aa)return Aa;var h,m=rs,b=m.length,k,D="value"in ys?ys.value:ys.textContent,U=D.length;for(h=0;h<b&&m[h]===D[h];h++);var re=b-h;for(k=1;k<=re&&m[b-k]===D[U-k];k++);return Aa=D.slice(h,1<k?1-k:void 0)}function Zi(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function di(){return!0}function Kn(){return!1}function Ys(h){function m(b,k,D,U,re){this._reactName=b,this._targetInst=D,this.type=k,this.nativeEvent=U,this.target=re,this.currentTarget=null;for(var be in h)h.hasOwnProperty(be)&&(b=h[be],this[be]=b?b(U):U[be]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?di:Kn,this.isPropagationStopped=Kn,this}return S(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),m}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Ys(Xn),As=S({},Xn,{view:0,detail:0}),js=Ys(As),se,me,je,Ne=S({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==je&&(je&&h.type==="mousemove"?(se=h.screenX-je.screenX,me=h.screenY-je.screenY):me=se=0,je=h),se)},movementY:function(h){return"movementY"in h?h.movementY:me}}),ht=Ys(Ne),gt=S({},Ne,{dataTransfer:0}),Ct=Ys(gt),un=S({},As,{relatedTarget:0}),kn=Ys(un),mn=S({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Cn=Ys(mn),Un=S({},Xn,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),oi=Ys(Un),ri=S({},Xn,{data:0}),Gn=Ys(ri),Dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Si={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ns(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=Si[h])?!!m[h]:!1}function Ps(){return ns}var Vo=S({},As,{key:function(h){if(h.key){var m=Dn[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=Zi(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?pr[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(h){return h.type==="keypress"?Zi(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Zi(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Wa=Ys(Vo),Za=S({},Ne,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fa=Ys(Za),zr=S({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),Td=Ys(zr),Dh=S({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oy=Ys(Dh),tp=S({},Ne,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Fy=Ys(tp),zh=S({},Xn,{newState:0,oldState:0}),np=Ys(zh),Ih=[9,13,27,32],Ul=vi&&"CompositionEvent"in window,Cc=null;vi&&"documentMode"in document&&(Cc=document.documentMode);var Co=vi&&"TextEvent"in window&&!Cc,ip=vi&&(!Ul||Cc&&8<Cc&&11>=Cc),Oh=" ",Tc=!1;function Mu(h,m){switch(h){case"keyup":return Ih.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fm(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var bl=!1;function Ly(h,m){switch(h){case"compositionend":return Fm(m);case"keypress":return m.which!==32?null:(Tc=!0,Oh);case"textInput":return h=m.data,h===Oh&&Tc?null:h;default:return null}}function Nu(h,m){if(bl)return h==="compositionend"||!Ul&&Mu(h,m)?(h=Mi(),Aa=rs=ys=null,bl=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return ip&&m.locale!=="ko"?null:m.data;default:return null}}var Lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fh(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!Lm[h.type]:m==="textarea"}function sp(h,m,b,k){Ma?Na?Na.push(k):Na=[k]:Ma=k,m=eh(m,"onChange"),0<m.length&&(b=new _l("onChange","change",null,b,k),h.push({event:b,listeners:m}))}var Au=null,kc=null;function Bm(h){B_(h,0)}function kd(h){var m=On(h);if(Bo(m))return h}function Pu(h,m){if(h==="change")return m}var rp=!1;if(vi){var vl;if(vi){var Lh="oninput"in document;if(!Lh){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),Lh=typeof ap.oninput=="function"}vl=Lh}else vl=!1;rp=vl&&(!document.documentMode||9<document.documentMode)}function $l(){Au&&(Au.detachEvent("onpropertychange",op),kc=Au=null)}function op(h){if(h.propertyName==="value"&&kd(kc)){var m=[];sp(m,kc,h,So(h)),Fs(Bm,m)}}function Bh(h,m,b){h==="focusin"?($l(),Au=m,kc=b,Au.attachEvent("onpropertychange",op)):h==="focusout"&&$l()}function By(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return kd(kc)}function Vm(h,m){if(h==="click")return kd(m)}function lp(h,m){if(h==="input"||h==="change")return kd(m)}function Um(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var pa=typeof Object.is=="function"?Object.is:Um;function Ec(h,m){if(pa(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var b=Object.keys(h),k=Object.keys(m);if(b.length!==k.length)return!1;for(k=0;k<b.length;k++){var D=b[k];if(!It.call(m,D)||!pa(h[D],m[D]))return!1}return!0}function Vh(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Ed(h,m){var b=Vh(h);h=0;for(var k;b;){if(b.nodeType===3){if(k=h+b.textContent.length,h<=m&&k>=m)return{node:b,offset:m-h};h=k}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Vh(b)}}function Uo(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?Uo(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function Uh(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var m=jc(h.document);m instanceof h.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch(k){b=!1}if(b)h=m.contentWindow;else break;m=jc(h.document)}return m}function Md(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}var zi=vi&&"documentMode"in document&&11>=document.documentMode,Mc=null,Nd=null,To=null,Ad=!1;function $m(h,m,b){var k=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Ad||Mc==null||Mc!==jc(k)||(k=Mc,"selectionStart"in k&&Md(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),To&&Ec(To,k)||(To=k,k=eh(Nd,"onSelect"),0<k.length&&(m=new _l("onSelect","select",null,m,b),h.push({event:m,listeners:k}),m.target=Mc)))}function Nc(h,m){var b={};return b[h.toLowerCase()]=m.toLowerCase(),b["Webkit"+h]="webkit"+m,b["Moz"+h]="moz"+m,b}var Ru={animationend:Nc("Animation","AnimationEnd"),animationiteration:Nc("Animation","AnimationIteration"),animationstart:Nc("Animation","AnimationStart"),transitionrun:Nc("Transition","TransitionRun"),transitionstart:Nc("Transition","TransitionStart"),transitioncancel:Nc("Transition","TransitionCancel"),transitionend:Nc("Transition","TransitionEnd")},cp={},up={};vi&&(up=document.createElement("div").style,"AnimationEvent"in window||(delete Ru.animationend.animation,delete Ru.animationiteration.animation,delete Ru.animationstart.animation),"TransitionEvent"in window||delete Ru.transitionend.transition);function Ac(h){if(cp[h])return cp[h];if(!Ru[h])return h;var m=Ru[h],b;for(b in m)if(m.hasOwnProperty(b)&&b in up)return cp[h]=m[b];return h}var dp=Ac("animationend"),Pd=Ac("animationiteration"),Rd=Ac("animationstart"),$h=Ac("transitionrun"),hp=Ac("transitionstart"),Pc=Ac("transitioncancel"),Du=Ac("transitionend"),Rc=new Map,ma="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ma.push("scrollEnd");function Ya(h,m){Rc.set(h,m),Kr(m,[h])}var fp=new WeakMap;function ga(h,m){if(typeof h=="object"&&h!==null){var b=fp.get(h);return b!==void 0?b:(m={value:h,source:m,stack:Cu(m)},fp.set(h,m),m)}return{value:h,source:m,stack:Cu(m)}}var mr=[],wl=0,zu=0;function Hl(){for(var h=wl,m=zu=wl=0;m<h;){var b=mr[m];mr[m++]=null;var k=mr[m];mr[m++]=null;var D=mr[m];mr[m++]=null;var U=mr[m];if(mr[m++]=null,k!==null&&D!==null){var re=k.pending;re===null?D.next=D:(D.next=re.next,re.next=D),k.pending=D}U!==0&&zc(b,D,U)}}function Dc(h,m,b,k){mr[wl++]=h,mr[wl++]=m,mr[wl++]=b,mr[wl++]=k,zu|=k,h.lanes|=k,h=h.alternate,h!==null&&(h.lanes|=k)}function Hh(h,m,b,k){return Dc(h,m,b,k),Dd(h)}function ko(h,m){return Dc(h,null,null,m),Dd(h)}function zc(h,m,b){h.lanes|=b;var k=h.alternate;k!==null&&(k.lanes|=b);for(var D=!1,U=h.return;U!==null;)U.childLanes|=b,k=U.alternate,k!==null&&(k.childLanes|=b),U.tag===22&&(h=U.stateNode,h===null||h._visibility&1||(D=!0)),h=U,U=U.return;return h.tag===3?(U=h.stateNode,D&&m!==null&&(D=31-ke(b),h=U.hiddenUpdates,k=h[D],k===null?h[D]=[m]:k.push(m),m.lane=b|536870912),U):null}function Dd(h){if(50<mf)throw mf=0,ux=null,Error(i(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}var $o={};function _i(h,m,b,k){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(h,m,b,k){return new _i(h,m,b,k)}function pp(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Eo(h,m){var b=h.alternate;return b===null?(b=Ir(h.tag,m,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=m,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,m=h.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Iu(h,m){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,m=b.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function qh(h,m,b,k,D,U){var re=0;if(k=h,typeof h=="function")pp(h)&&(re=1);else if(typeof h=="string")re=qp(h,b,ot.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case pe:return h=Ir(31,b,m,D),h.elementType=pe,h.lanes=U,h;case z:return Ho(b.children,D,U,m);case B:re=8,D|=24;break;case $:return h=Ir(12,b,m,D|2),h.elementType=$,h.lanes=U,h;case K:return h=Ir(13,b,m,D),h.elementType=K,h.lanes=U,h;case le:return h=Ir(19,b,m,D),h.elementType=le,h.lanes=U,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case q:case Q:re=10;break e;case W:re=9;break e;case Z:re=11;break e;case ge:re=14;break e;case he:re=16,k=null;break e}re=29,b=Error(i(130,h===null?"null":typeof h,"")),k=null}return m=Ir(re,b,m,D),m.elementType=h,m.type=k,m.lanes=U,m}function Ho(h,m,b,k){return h=Ir(7,h,k,m),h.lanes=b,h}function zd(h,m,b){return h=Ir(6,h,null,m),h.lanes=b,h}function mp(h,m,b){return m=Ir(4,h.children!==null?h.children:[],h.key,m),m.lanes=b,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}var ql=[],Sl=0,Ic=null,Oc=0,ta=[],ya=0,qo=null,Xa=1,Pa="";function Ra(h,m){ql[Sl++]=Oc,ql[Sl++]=Ic,Ic=h,Oc=m}function Id(h,m,b){ta[ya++]=Xa,ta[ya++]=Pa,ta[ya++]=qo,qo=h;var k=Xa;h=Pa;var D=32-ke(k)-1;k&=~(1<<D),b+=1;var U=32-ke(m)+D;if(30<U){var re=D-D%5;U=(k&(1<<re)-1).toString(32),k>>=re,D-=re,Xa=1<<32-ke(m)+D|b<<D|k,Pa=U+h}else Xa=1<<U|b<<D|k,Pa=h}function gp(h){h.return!==null&&(Ra(h,1),Id(h,1,0))}function Fc(h){for(;h===Ic;)Ic=ql[--Sl],ql[Sl]=null,Oc=ql[--Sl],ql[Sl]=null;for(;h===qo;)qo=ta[--ya],ta[ya]=null,Pa=ta[--ya],ta[ya]=null,Xa=ta[--ya],ta[ya]=null}var na=null,Rs=null,Ni=!1,Go=null,Da=!1,Ou=Error(i(519));function Ka(h){var m=Error(i(418,""));throw Or(ga(m,h)),Ou}function Fu(h){var m=h.stateNode,b=h.type,k=h.memoizedProps;switch(m[qn]=h,m[Bn]=k,b){case"dialog":Ti("cancel",m),Ti("close",m);break;case"iframe":case"object":case"embed":Ti("load",m);break;case"video":case"audio":for(b=0;b<rd.length;b++)Ti(rd[b],m);break;case"source":Ti("error",m);break;case"img":case"image":case"link":Ti("error",m),Ti("load",m);break;case"details":Ti("toggle",m);break;case"input":Ti("invalid",m),Tu(m,k.value,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name,!0),Sc(m);break;case"select":Ti("invalid",m);break;case"textarea":Ti("invalid",m),Cd(m,k.value,k.defaultValue,k.children),Sc(m)}b=k.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||m.textContent===""+b||k.suppressHydrationWarning===!0||$_(m.textContent,b)?(k.popover!=null&&(Ti("beforetoggle",m),Ti("toggle",m)),k.onScroll!=null&&Ti("scroll",m),k.onScrollEnd!=null&&Ti("scrollend",m),k.onClick!=null&&(m.onclick=_f),m=!0):m=!1,m||Ka(h)}function Od(h){for(na=h.return;na;)switch(na.tag){case 5:case 13:Da=!1;return;case 27:case 3:Da=!0;return;default:na=na.return}}function Lu(h){if(h!==na)return!1;if(!Ni)return Od(h),Ni=!0,!1;var m=h.tag,b;if((b=m!==3&&m!==27)&&((b=m===5)&&(b=h.type,b=!(b!=="form"&&b!=="button")||jg(h.type,h.memoizedProps)),b=!b),b&&Rs&&Ka(h),Od(h),m===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));e:{for(h=h.nextSibling,m=0;h;){if(h.nodeType===8)if(b=h.data,b==="/$"){if(m===0){Rs=rl(h.nextSibling);break e}m--}else b!=="$"&&b!=="$!"&&b!=="$?"||m++;h=h.nextSibling}Rs=null}}else m===27?(m=Rs,tu(h.type)?(h=Tg,Tg=null,Rs=h):Rs=m):Rs=na?rl(h.stateNode.nextSibling):null;return!0}function fs(){Rs=na=null,Ni=!1}function Gl(){var h=Go;return h!==null&&(oo===null?oo=h:oo.push.apply(oo,h),Go=null),h}function Or(h){Go===null?Go=[h]:Go.push(h)}var Fd=Xe(null),Wo=null,Mo=null;function xa(h,m,b){Me(Fd,m._currentValue),m._currentValue=b}function _a(h){h._currentValue=Fd.current,tt(Fd)}function Lc(h,m,b){for(;h!==null;){var k=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,k!==null&&(k.childLanes|=m)):k!==null&&(k.childLanes&m)!==m&&(k.childLanes|=m),h===b)break;h=h.return}}function Bu(h,m,b,k){var D=h.child;for(D!==null&&(D.return=h);D!==null;){var U=D.dependencies;if(U!==null){var re=D.child;U=U.firstContext;e:for(;U!==null;){var be=U;U=D;for(var $e=0;$e<m.length;$e++)if(be.context===m[$e]){U.lanes|=b,be=U.alternate,be!==null&&(be.lanes|=b),Lc(U.return,b,h),k||(re=null);break e}U=be.next}}else if(D.tag===18){if(re=D.return,re===null)throw Error(i(341));re.lanes|=b,U=re.alternate,U!==null&&(U.lanes|=b),Lc(re,b,h),re=null}else re=D.child;if(re!==null)re.return=D;else for(re=D;re!==null;){if(re===h){re=null;break}if(D=re.sibling,D!==null){D.return=re.return,re=D;break}re=re.return}D=re}}function Bc(h,m,b,k){h=null;for(var D=m,U=!1;D!==null;){if(!U){if((D.flags&524288)!==0)U=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var re=D.alternate;if(re===null)throw Error(i(387));if(re=re.memoizedProps,re!==null){var be=D.type;pa(D.pendingProps.value,re.value)||(h!==null?h.push(be):h=[be])}}else if(D===pt.current){if(re=D.alternate,re===null)throw Error(i(387));re.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(h!==null?h.push(C):h=[C])}D=D.return}h!==null&&Bu(m,h,b,k),m.flags|=262144}function Ld(h){for(h=h.firstContext;h!==null;){if(!pa(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function jl(h){Wo=h,Mo=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function gr(h){return Wl(Wo,h)}function Cl(h,m){return Wo===null&&jl(h),Wl(h,m)}function Wl(h,m){var b=m._currentValue;if(m={context:m,memoizedValue:b,next:null},Mo===null){if(h===null)throw Error(i(308));Mo=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else Mo=Mo.next=m;return b}var Hm=typeof AbortController!="undefined"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(b,k){h.push(k)}};this.abort=function(){m.aborted=!0,h.forEach(function(b){return b()})}},qm=e.unstable_scheduleCallback,Gm=e.unstable_NormalPriority,Js={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gh(){return{controller:new Hm,data:new Map,refCount:0}}function Zo(h){h.refCount--,h.refCount===0&&qm(Gm,function(){h.controller.abort()})}var Yo=null,Fr=0,za=0,Zl=null;function Qa(h,m){if(Yo===null){var b=Yo=[];Fr=0,za=mx(),Zl={status:"pending",value:void 0,then:function(k){b.push(k)}}}return Fr++,m.then(Ja,Ja),m}function Ja(){if(--Fr===0&&Yo!==null){Zl!==null&&(Zl.status="fulfilled");var h=Yo;Yo=null,za=0,Zl=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function Vu(h,m){var b=[],k={status:"pending",value:null,reason:null,then:function(D){b.push(D)}};return h.then(function(){k.status="fulfilled",k.value=m;for(var D=0;D<b.length;D++)(0,b[D])(m)},function(D){for(k.status="rejected",k.reason=D,D=0;D<b.length;D++)(0,b[D])(void 0)}),k}var Ia=De.S;De.S=function(h,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Qa(h,m),Ia!==null&&Ia(h,m)};var ba=Xe(null);function yp(){var h=ba.current;return h!==null?h:Es.pooledCache}function Uu(h,m){m===null?Me(ba,ba.current):Me(ba,m.pool)}function Wm(){var h=yp();return h===null?null:{parent:Js._currentValue,pool:h}}var Tl=Error(i(460)),xp=Error(i(474)),Yl=Error(i(542)),No={then:function(){}};function xn(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Bd(){}function Wh(h,m,b){switch(b=h[b],b===void 0?h.push(m):b!==m&&(m.then(Bd,Bd),m=b),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Xl(h),h;default:if(typeof m.status=="string")m.then(Bd,Bd);else{if(h=Es,h!==null&&100<h.shellSuspendCounter)throw Error(i(482));h=m,h.status="pending",h.then(function(k){if(m.status==="pending"){var D=m;D.status="fulfilled",D.value=k}},function(k){if(m.status==="pending"){var D=m;D.status="rejected",D.reason=k}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Xl(h),h}throw kl=m,Tl}}var kl=null;function $u(){if(kl===null)throw Error(i(459));var h=kl;return kl=null,h}function Xl(h){if(h===Tl||h===Yl)throw Error(i(483))}var Oa=!1;function pi(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hu(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function El(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Ao(h,m,b){var k=h.updateQueue;if(k===null)return null;if(k=k.shared,(ls&2)!==0){var D=k.pending;return D===null?m.next=m:(m.next=D.next,D.next=m),k.pending=m,m=Dd(h),zc(h,null,b),m}return Dc(h,k,m,b),Dd(h)}function Vc(h,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194048)!==0)){var k=m.lanes;k&=h.pendingLanes,b|=k,m.lanes=b,Wt(h,b)}}function Zh(h,m){var b=h.updateQueue,k=h.alternate;if(k!==null&&(k=k.updateQueue,b===k)){var D=null,U=null;if(b=b.firstBaseUpdate,b!==null){do{var re={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};U===null?D=U=re:U=U.next=re,b=b.next}while(b!==null);U===null?D=U=m:U=U.next=m}else D=U=m;b={baseState:k.baseState,firstBaseUpdate:D,lastBaseUpdate:U,shared:k.shared,callbacks:k.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=m:h.next=m,b.lastBaseUpdate=m}var Yh=!1;function Kl(){if(Yh){var h=Zl;if(h!==null)throw h}}function qu(h,m,b,k){Yh=!1;var D=h.updateQueue;Oa=!1;var U=D.firstBaseUpdate,re=D.lastBaseUpdate,be=D.shared.pending;if(be!==null){D.shared.pending=null;var $e=be,ft=$e.next;$e.next=null,re===null?U=ft:re.next=ft,re=$e;var Ht=h.alternate;Ht!==null&&(Ht=Ht.updateQueue,be=Ht.lastBaseUpdate,be!==re&&(be===null?Ht.firstBaseUpdate=ft:be.next=ft,Ht.lastBaseUpdate=$e))}if(U!==null){var Qt=D.baseState;re=0,Ht=ft=$e=null,be=U;do{var Tt=be.lane&-536870913,zt=Tt!==be.lane;if(zt?(Ci&Tt)===Tt:(k&Tt)===Tt){Tt!==0&&Tt===za&&(Yh=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var ii=h,Zn=be;Tt=m;var $i=b;switch(Zn.tag){case 1:if(ii=Zn.payload,typeof ii=="function"){Qt=ii.call($i,Qt,Tt);break e}Qt=ii;break e;case 3:ii.flags=ii.flags&-65537|128;case 0:if(ii=Zn.payload,Tt=typeof ii=="function"?ii.call($i,Qt,Tt):ii,Tt==null)break e;Qt=S({},Qt,Tt);break e;case 2:Oa=!0}}Tt=be.callback,Tt!==null&&(h.flags|=64,zt&&(h.flags|=8192),zt=D.callbacks,zt===null?D.callbacks=[Tt]:zt.push(Tt))}else zt={lane:Tt,tag:be.tag,payload:be.payload,callback:be.callback,next:null},Ht===null?(ft=Ht=zt,$e=Qt):Ht=Ht.next=zt,re|=Tt;if(be=be.next,be===null){if(be=D.shared.pending,be===null)break;zt=be,be=zt.next,zt.next=null,D.lastBaseUpdate=zt,D.shared.pending=null}}while(!0);Ht===null&&($e=Qt),D.baseState=$e,D.firstBaseUpdate=ft,D.lastBaseUpdate=Ht,U===null&&(D.shared.lanes=0),nl|=re,h.lanes=re,h.memoizedState=Qt}}function _p(h,m){if(typeof h!="function")throw Error(i(191,h));h.call(m)}function bp(h,m){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)_p(b[h],m)}var Uc=Xe(null),Vd=Xe(0);function Ml(h,m){h=Xc,Me(Vd,h),Me(Uc,m),Xc=h|m.baseLanes}function Yi(){Me(Vd,Xc),Me(Uc,Uc.current)}function Xh(){Xc=Vd.current,tt(Uc),tt(Vd)}var eo=0,mi=null,Xi=null,Cs=null,Ud=!1,Ql=!1,Lr=!1,$c=0,En=0,zn=null,Gu=0;function Ls(){throw Error(i(321))}function Wu(h,m){if(m===null)return!1;for(var b=0;b<m.length&&b<h.length;b++)if(!pa(h[b],m[b]))return!1;return!0}function jr(h,m,b,k,D,U){return eo=U,mi=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,De.H=h===null||h.memoizedState===null?Al:so,Lr=!1,U=b(k,D),Lr=!1,Ql&&(U=to(m,b,k,D)),vp(h),U}function vp(h){De.H=yr;var m=Xi!==null&&Xi.next!==null;if(eo=0,Cs=Xi=mi=null,Ud=!1,En=0,zn=null,m)throw Error(i(300));h===null||Cr||(h=h.dependencies,h!==null&&Ld(h)&&(Cr=!0))}function to(h,m,b,k){mi=h;var D=0;do{if(Ql&&(zn=null),En=0,Ql=!1,25<=D)throw Error(i(301));if(D+=1,Cs=Xi=null,h.updateQueue!=null){var U=h.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}De.H=ic,U=m(b,k)}while(Ql);return U}function Hc(){var h=De.H,m=h.useState()[0];return m=typeof m.then=="function"?no(m):m,h=h.useState()[0],(Xi!==null?Xi.memoizedState:null)!==h&&(mi.flags|=1024),m}function wp(){var h=$c!==0;return $c=0,h}function Sp(h,m,b){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~b}function jp(h){if(Ud){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Ud=!1}eo=0,Cs=Xi=mi=null,Ql=!1,En=$c=0,zn=null}function lr(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cs===null?mi.memoizedState=Cs=h:Cs=Cs.next=h,Cs}function fi(){if(Xi===null){var h=mi.alternate;h=h!==null?h.memoizedState:null}else h=Xi.next;var m=Cs===null?mi.memoizedState:Cs.next;if(m!==null)Cs=m,Xi=h;else{if(h===null)throw mi.alternate===null?Error(i(467)):Error(i(310));Xi=h,h={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},Cs===null?mi.memoizedState=Cs=h:Cs=Cs.next=h}return Cs}function Ts(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function no(h){var m=En;return En+=1,zn===null&&(zn=[]),h=Wh(zn,h,m),m=mi,(Cs===null?m.memoizedState:Cs.next)===null&&(m=m.alternate,De.H=m===null||m.memoizedState===null?Al:so),h}function Nl(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return no(h);if(h.$$typeof===Q)return gr(h)}throw Error(i(438,String(h)))}function Jl(h){var m=null,b=mi.updateQueue;if(b!==null&&(m=b.memoCache),m==null){var k=mi.alternate;k!==null&&(k=k.updateQueue,k!==null&&(k=k.memoCache,k!=null&&(m={data:k.data.map(function(D){return D.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),b===null&&(b=Ts(),mi.updateQueue=b),b.memoCache=m,b=m.data[m.index],b===void 0)for(b=m.data[m.index]=Array(h),k=0;k<h;k++)b[k]=Ie;return m.index++,b}function io(h,m){return typeof m=="function"?m(h):m}function ec(h){var m=fi();return $d(m,Xi,h)}function $d(h,m,b){var k=h.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=b;var D=h.baseQueue,U=k.pending;if(U!==null){if(D!==null){var re=D.next;D.next=U.next,U.next=re}m.baseQueue=D=U,k.pending=null}if(U=h.baseState,D===null)h.memoizedState=U;else{m=D.next;var be=re=null,$e=null,ft=m,Ht=!1;do{var Qt=ft.lane&-536870913;if(Qt!==ft.lane?(Ci&Qt)===Qt:(eo&Qt)===Qt){var Tt=ft.revertLane;if(Tt===0)$e!==null&&($e=$e.next={lane:0,revertLane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),Qt===za&&(Ht=!0);else if((eo&Tt)===Tt){ft=ft.next,Tt===za&&(Ht=!0);continue}else Qt={lane:0,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},$e===null?(be=$e=Qt,re=U):$e=$e.next=Qt,mi.lanes|=Tt,nl|=Tt;Qt=ft.action,Lr&&b(U,Qt),U=ft.hasEagerState?ft.eagerState:b(U,Qt)}else Tt={lane:Qt,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},$e===null?(be=$e=Tt,re=U):$e=$e.next=Tt,mi.lanes|=Qt,nl|=Qt;ft=ft.next}while(ft!==null&&ft!==m);if($e===null?re=U:$e.next=be,!pa(U,h.memoizedState)&&(Cr=!0,Ht&&(b=Zl,b!==null)))throw b;h.memoizedState=U,h.baseState=re,h.baseQueue=$e,k.lastRenderedState=U}return D===null&&(k.lanes=0),[h.memoizedState,k.dispatch]}function Xo(h){var m=fi(),b=m.queue;if(b===null)throw Error(i(311));b.lastRenderedReducer=h;var k=b.dispatch,D=b.pending,U=m.memoizedState;if(D!==null){b.pending=null;var re=D=D.next;do U=h(U,re.action),re=re.next;while(re!==D);pa(U,m.memoizedState)||(Cr=!0),m.memoizedState=U,m.baseQueue===null&&(m.baseState=U),b.lastRenderedState=U}return[U,k]}function tc(h,m,b){var k=mi,D=fi(),U=Ni;if(U){if(b===void 0)throw Error(i(407));b=b()}else b=m();var re=!pa((Xi||D).memoizedState,b);re&&(D.memoizedState=b,Cr=!0),D=D.queue;var be=nc.bind(null,k,D,h);if(we(2048,8,be,[h]),D.getSnapshot!==m||re||Cs!==null&&Cs.memoizedState.tag&1){if(k.flags|=2048,ee(9,ce(),Hd.bind(null,k,D,b,m),null),Es===null)throw Error(i(349));U||(eo&124)!==0||Kh(k,m,b)}return b}function Kh(h,m,b){h.flags|=16384,h={getSnapshot:m,value:b},m=mi.updateQueue,m===null?(m=Ts(),mi.updateQueue=m,m.stores=[h]):(b=m.stores,b===null?m.stores=[h]:b.push(h))}function Hd(h,m,b,k){m.value=b,m.getSnapshot=k,Qh(m)&&Jh(h)}function nc(h,m,b){return b(function(){Qh(m)&&Jh(h)})}function Qh(h){var m=h.getSnapshot;h=h.value;try{var b=m();return!pa(h,b)}catch(k){return!0}}function Jh(h){var m=ko(h,2);m!==null&&lo(m,h,2)}function Zu(h){var m=lr();if(typeof h=="function"){var b=h;if(h=b(),Lr){At(!0);try{b()}finally{At(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:h},m}function ef(h,m,b,k){return h.baseState=b,$d(h,Xi,typeof k=="function"?k:io)}function j(h,m,b,k,D){if(er(h))throw Error(i(485));if(h=m.action,h!==null){var U={payload:D,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(re){U.listeners.push(re)}};De.T!==null?b(!0):U.isTransition=!1,k(U),b=m.pending,b===null?(U.next=m.pending=U,s(m,U)):(U.next=b.next,m.pending=b.next=U)}}function s(h,m){var b=m.action,k=m.payload,D=h.state;if(m.isTransition){var U=De.T,re={};De.T=re;try{var be=b(D,k),$e=De.S;$e!==null&&$e(re,be),p(h,m,be)}catch(ft){w(h,m,ft)}finally{De.T=U}}else try{U=b(D,k),p(h,m,U)}catch(ft){w(h,m,ft)}}function p(h,m,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(k){x(h,m,k)},function(k){return w(h,m,k)}):x(h,m,b)}function x(h,m,b){m.status="fulfilled",m.value=b,T(m),h.state=b,m=h.pending,m!==null&&(b=m.next,b===m?h.pending=null:(b=b.next,m.next=b,s(h,b)))}function w(h,m,b){var k=h.pending;if(h.pending=null,k!==null){k=k.next;do m.status="rejected",m.reason=b,T(m),m=m.next;while(m!==k)}h.action=null}function T(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function P(h,m){return m}function O(h,m){if(Ni){var b=Es.formState;if(b!==null){e:{var k=mi;if(Ni){if(Rs){t:{for(var D=Rs,U=Da;D.nodeType!==8;){if(!U){D=null;break t}if(D=rl(D.nextSibling),D===null){D=null;break t}}U=D.data,D=U==="F!"||U==="F"?D:null}if(D){Rs=rl(D.nextSibling),k=D.data==="F!";break e}}Ka(k)}k=!1}k&&(m=b[0])}}return b=lr(),b.memoizedState=b.baseState=m,k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P,lastRenderedState:m},b.queue=k,b=is.bind(null,mi,k),k.dispatch=b,k=Zu(!1),U=as.bind(null,mi,!1,k.queue),k=lr(),D={state:m,dispatch:null,action:h,pending:null},k.queue=D,b=j.bind(null,mi,D,U,b),D.dispatch=b,k.memoizedState=h,[m,b,!1]}function F(h){var m=fi();return G(m,Xi,h)}function G(h,m,b){if(m=$d(h,m,P)[0],h=ec(io)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var k=no(m)}catch(re){throw re===Tl?Yl:re}else k=m;m=fi();var D=m.queue,U=D.dispatch;return b!==m.memoizedState&&(mi.flags|=2048,ee(9,ce(),Y.bind(null,D,b),null)),[k,U,h]}function Y(h,m){h.action=m}function ne(h){var m=fi(),b=Xi;if(b!==null)return G(m,b,h);fi(),m=m.memoizedState,b=fi();var k=b.queue.dispatch;return b.memoizedState=h,[m,k,!1]}function ee(h,m,b,k){return h={tag:h,create:b,deps:k,inst:m,next:null},m=mi.updateQueue,m===null&&(m=Ts(),mi.updateQueue=m),b=m.lastEffect,b===null?m.lastEffect=h.next=h:(k=b.next,b.next=h,h.next=k,m.lastEffect=h),h}function ce(){return{destroy:void 0,resource:void 0}}function ye(){return fi().memoizedState}function Se(h,m,b,k){var D=lr();k=k===void 0?null:k,mi.flags|=h,D.memoizedState=ee(1|m,ce(),b,k)}function we(h,m,b,k){var D=fi();k=k===void 0?null:k;var U=D.memoizedState.inst;Xi!==null&&k!==null&&Wu(k,Xi.memoizedState.deps)?D.memoizedState=ee(m,U,b,k):(mi.flags|=h,D.memoizedState=ee(1|m,U,b,k))}function Te(h,m){Se(8390656,8,h,m)}function ze(h,m){we(2048,8,h,m)}function Le(h,m){return we(4,2,h,m)}function Oe(h,m){return we(4,4,h,m)}function qe(h,m){if(typeof m=="function"){h=h();var b=m(h);return function(){typeof b=="function"?b():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function Ke(h,m,b){b=b!=null?b.concat([h]):null,we(4,4,qe.bind(null,m,h),b)}function Fe(){}function it(h,m){var b=fi();m=m===void 0?null:m;var k=b.memoizedState;return m!==null&&Wu(m,k[1])?k[0]:(b.memoizedState=[h,m],h)}function kt(h,m){var b=fi();m=m===void 0?null:m;var k=b.memoizedState;if(m!==null&&Wu(m,k[1]))return k[0];if(k=h(),Lr){At(!0);try{h()}finally{At(!1)}}return b.memoizedState=[k,m],k}function yt(h,m,b){return b===void 0||(eo&1073741824)!==0?h.memoizedState=m:(h.memoizedState=b,h=C_(),mi.lanes|=h,nl|=h,b)}function _t(h,m,b,k){return pa(b,m)?b:Uc.current!==null?(h=yt(h,b,k),pa(h,m)||(Cr=!0),h):(eo&42)===0?(Cr=!0,h.memoizedState=b):(h=C_(),mi.lanes|=h,nl|=h,m)}function bt(h,m,b,k,D){var U=Qe.p;Qe.p=U!==0&&8>U?U:8;var re=De.T,be={};De.T=be,as(h,!1,m,b);try{var $e=D(),ft=De.S;if(ft!==null&&ft(be,$e),$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var Ht=Vu($e,k);gi(h,m,Ht,Ca(h))}else gi(h,m,k,Ca(h))}catch(Qt){gi(h,m,{then:function(){},status:"rejected",reason:Qt},Ca())}finally{Qe.p=U,De.T=re}}function sn(){}function rn(h,m,b,k){if(h.tag!==5)throw Error(i(476));var D=Yt(h).queue;bt(h,D,m,et,b===null?sn:function(){return Mn(h),b(k)})}function Yt(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:et},next:null};var b={};return m.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:b},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function Mn(h){var m=Yt(h).next.queue;gi(h,m,{},Ca())}function ni(){return gr(C)}function Li(){return fi().memoizedState}function Bi(){return fi().memoizedState}function Ji(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var b=Ca();h=El(b);var k=Ao(m,h,b);k!==null&&(lo(k,m,b),Vc(k,m,b)),m={cache:Gh()},h.payload=m;return}m=m.return}}function ks(h,m,b){var k=Ca();b={lane:k,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},er(h)?Bs(m,b):(b=Hh(h,m,b,k),b!==null&&(lo(b,h,k),Vs(b,m,k)))}function is(h,m,b){var k=Ca();gi(h,m,b,k)}function gi(h,m,b,k){var D={lane:k,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(er(h))Bs(m,D);else{var U=h.alternate;if(h.lanes===0&&(U===null||U.lanes===0)&&(U=m.lastRenderedReducer,U!==null))try{var re=m.lastRenderedState,be=U(re,b);if(D.hasEagerState=!0,D.eagerState=be,pa(be,re))return Dc(h,m,D,0),Es===null&&Hl(),!1}catch($e){}finally{}if(b=Hh(h,m,D,k),b!==null)return lo(b,h,k),Vs(b,m,k),!0}return!1}function as(h,m,b,k){if(k={lane:2,revertLane:mx(),action:k,hasEagerState:!1,eagerState:null,next:null},er(h)){if(m)throw Error(i(479))}else m=Hh(h,b,k,2),m!==null&&lo(m,h,2)}function er(h){var m=h.alternate;return h===mi||m!==null&&m===mi}function Bs(h,m){Ql=Ud=!0;var b=h.pending;b===null?m.next=m:(m.next=b.next,b.next=m),h.pending=m}function Vs(h,m,b){if((b&4194048)!==0){var k=m.lanes;k&=h.pendingLanes,b|=k,m.lanes=b,Wt(h,b)}}var yr={readContext:gr,use:Nl,useCallback:Ls,useContext:Ls,useEffect:Ls,useImperativeHandle:Ls,useLayoutEffect:Ls,useInsertionEffect:Ls,useMemo:Ls,useReducer:Ls,useRef:Ls,useState:Ls,useDebugValue:Ls,useDeferredValue:Ls,useTransition:Ls,useSyncExternalStore:Ls,useId:Ls,useHostTransitionStatus:Ls,useFormState:Ls,useActionState:Ls,useOptimistic:Ls,useMemoCache:Ls,useCacheRefresh:Ls},Al={readContext:gr,use:Nl,useCallback:function(h,m){return lr().memoizedState=[h,m===void 0?null:m],h},useContext:gr,useEffect:Te,useImperativeHandle:function(h,m,b){b=b!=null?b.concat([h]):null,Se(4194308,4,qe.bind(null,m,h),b)},useLayoutEffect:function(h,m){return Se(4194308,4,h,m)},useInsertionEffect:function(h,m){Se(4,2,h,m)},useMemo:function(h,m){var b=lr();m=m===void 0?null:m;var k=h();if(Lr){At(!0);try{h()}finally{At(!1)}}return b.memoizedState=[k,m],k},useReducer:function(h,m,b){var k=lr();if(b!==void 0){var D=b(m);if(Lr){At(!0);try{b(m)}finally{At(!1)}}}else D=m;return k.memoizedState=k.baseState=D,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:D},k.queue=h,h=h.dispatch=ks.bind(null,mi,h),[k.memoizedState,h]},useRef:function(h){var m=lr();return h={current:h},m.memoizedState=h},useState:function(h){h=Zu(h);var m=h.queue,b=is.bind(null,mi,m);return m.dispatch=b,[h.memoizedState,b]},useDebugValue:Fe,useDeferredValue:function(h,m){var b=lr();return yt(b,h,m)},useTransition:function(){var h=Zu(!1);return h=bt.bind(null,mi,h.queue,!0,!1),lr().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,b){var k=mi,D=lr();if(Ni){if(b===void 0)throw Error(i(407));b=b()}else{if(b=m(),Es===null)throw Error(i(349));(Ci&124)!==0||Kh(k,m,b)}D.memoizedState=b;var U={value:b,getSnapshot:m};return D.queue=U,Te(nc.bind(null,k,U,h),[h]),k.flags|=2048,ee(9,ce(),Hd.bind(null,k,U,b,m),null),b},useId:function(){var h=lr(),m=Es.identifierPrefix;if(Ni){var b=Pa,k=Xa;b=(k&~(1<<32-ke(k)-1)).toString(32)+b,m=""+m+"R"+b,b=$c++,0<b&&(m+="H"+b.toString(32)),m+=""}else b=Gu++,m=""+m+"r"+b.toString(32)+"";return h.memoizedState=m},useHostTransitionStatus:ni,useFormState:O,useActionState:O,useOptimistic:function(h){var m=lr();m.memoizedState=m.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=b,m=as.bind(null,mi,!0,b),b.dispatch=m,[h,m]},useMemoCache:Jl,useCacheRefresh:function(){return lr().memoizedState=Ji.bind(null,mi)}},so={readContext:gr,use:Nl,useCallback:it,useContext:gr,useEffect:ze,useImperativeHandle:Ke,useInsertionEffect:Le,useLayoutEffect:Oe,useMemo:kt,useReducer:ec,useRef:ye,useState:function(){return ec(io)},useDebugValue:Fe,useDeferredValue:function(h,m){var b=fi();return _t(b,Xi.memoizedState,h,m)},useTransition:function(){var h=ec(io)[0],m=fi().memoizedState;return[typeof h=="boolean"?h:no(h),m]},useSyncExternalStore:tc,useId:Li,useHostTransitionStatus:ni,useFormState:F,useActionState:F,useOptimistic:function(h,m){var b=fi();return ef(b,Xi,h,m)},useMemoCache:Jl,useCacheRefresh:Bi},ic={readContext:gr,use:Nl,useCallback:it,useContext:gr,useEffect:ze,useImperativeHandle:Ke,useInsertionEffect:Le,useLayoutEffect:Oe,useMemo:kt,useReducer:Xo,useRef:ye,useState:function(){return Xo(io)},useDebugValue:Fe,useDeferredValue:function(h,m){var b=fi();return Xi===null?yt(b,h,m):_t(b,Xi.memoizedState,h,m)},useTransition:function(){var h=Xo(io)[0],m=fi().memoizedState;return[typeof h=="boolean"?h:no(h),m]},useSyncExternalStore:tc,useId:Li,useHostTransitionStatus:ni,useFormState:ne,useActionState:ne,useOptimistic:function(h,m){var b=fi();return Xi!==null?ef(b,Xi,h,m):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:Jl,useCacheRefresh:Bi},ro=null,sc=0;function Pl(h){var m=sc;return sc+=1,ro===null&&(ro=[]),Wh(ro,h,m)}function Fa(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function Br(h,m){throw m.$$typeof===E?Error(i(525)):(h=Object.prototype.toString.call(m),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function Po(h){var m=h._init;return m(h._payload)}function Ro(h){function m(mt,st){if(h){var vt=mt.deletions;vt===null?(mt.deletions=[st],mt.flags|=16):vt.push(st)}}function b(mt,st){if(!h)return null;for(;st!==null;)m(mt,st),st=st.sibling;return null}function k(mt){for(var st=new Map;mt!==null;)mt.key!==null?st.set(mt.key,mt):st.set(mt.index,mt),mt=mt.sibling;return st}function D(mt,st){return mt=Eo(mt,st),mt.index=0,mt.sibling=null,mt}function U(mt,st,vt){return mt.index=vt,h?(vt=mt.alternate,vt!==null?(vt=vt.index,vt<st?(mt.flags|=67108866,st):vt):(mt.flags|=67108866,st)):(mt.flags|=1048576,st)}function re(mt){return h&&mt.alternate===null&&(mt.flags|=67108866),mt}function be(mt,st,vt,Kt){return st===null||st.tag!==6?(st=zd(vt,mt.mode,Kt),st.return=mt,st):(st=D(st,vt),st.return=mt,st)}function $e(mt,st,vt,Kt){var In=vt.type;return In===z?Ht(mt,st,vt.props.children,Kt,vt.key):st!==null&&(st.elementType===In||typeof In=="object"&&In!==null&&In.$$typeof===he&&Po(In)===st.type)?(st=D(st,vt.props),Fa(st,vt),st.return=mt,st):(st=qh(vt.type,vt.key,vt.props,null,mt.mode,Kt),Fa(st,vt),st.return=mt,st)}function ft(mt,st,vt,Kt){return st===null||st.tag!==4||st.stateNode.containerInfo!==vt.containerInfo||st.stateNode.implementation!==vt.implementation?(st=mp(vt,mt.mode,Kt),st.return=mt,st):(st=D(st,vt.children||[]),st.return=mt,st)}function Ht(mt,st,vt,Kt,In){return st===null||st.tag!==7?(st=Ho(vt,mt.mode,Kt,In),st.return=mt,st):(st=D(st,vt),st.return=mt,st)}function Qt(mt,st,vt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=zd(""+st,mt.mode,vt),st.return=mt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case A:return vt=qh(st.type,st.key,st.props,null,mt.mode,vt),Fa(vt,st),vt.return=mt,vt;case N:return st=mp(st,mt.mode,vt),st.return=mt,st;case he:var Kt=st._init;return st=Kt(st._payload),Qt(mt,st,vt)}if(St(st)||Ye(st))return st=Ho(st,mt.mode,vt,null),st.return=mt,st;if(typeof st.then=="function")return Qt(mt,Pl(st),vt);if(st.$$typeof===Q)return Qt(mt,Cl(mt,st),vt);Br(mt,st)}return null}function Tt(mt,st,vt,Kt){var In=st!==null?st.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return In!==null?null:be(mt,st,""+vt,Kt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case A:return vt.key===In?$e(mt,st,vt,Kt):null;case N:return vt.key===In?ft(mt,st,vt,Kt):null;case he:return In=vt._init,vt=In(vt._payload),Tt(mt,st,vt,Kt)}if(St(vt)||Ye(vt))return In!==null?null:Ht(mt,st,vt,Kt,null);if(typeof vt.then=="function")return Tt(mt,st,Pl(vt),Kt);if(vt.$$typeof===Q)return Tt(mt,st,Cl(mt,vt),Kt);Br(mt,vt)}return null}function zt(mt,st,vt,Kt,In){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number"||typeof Kt=="bigint")return mt=mt.get(vt)||null,be(st,mt,""+Kt,In);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case A:return mt=mt.get(Kt.key===null?vt:Kt.key)||null,$e(st,mt,Kt,In);case N:return mt=mt.get(Kt.key===null?vt:Kt.key)||null,ft(st,mt,Kt,In);case he:var ki=Kt._init;return Kt=ki(Kt._payload),zt(mt,st,vt,Kt,In)}if(St(Kt)||Ye(Kt))return mt=mt.get(vt)||null,Ht(st,mt,Kt,In,null);if(typeof Kt.then=="function")return zt(mt,st,vt,Pl(Kt),In);if(Kt.$$typeof===Q)return zt(mt,st,vt,Cl(st,Kt),In);Br(st,Kt)}return null}function ii(mt,st,vt,Kt){for(var In=null,ki=null,$n=st,si=st=0,Ms=null;$n!==null&&si<vt.length;si++){$n.index>si?(Ms=$n,$n=null):Ms=$n.sibling;var Hi=Tt(mt,$n,vt[si],Kt);if(Hi===null){$n===null&&($n=Ms);break}h&&$n&&Hi.alternate===null&&m(mt,$n),st=U(Hi,st,si),ki===null?In=Hi:ki.sibling=Hi,ki=Hi,$n=Ms}if(si===vt.length)return b(mt,$n),Ni&&Ra(mt,si),In;if($n===null){for(;si<vt.length;si++)$n=Qt(mt,vt[si],Kt),$n!==null&&(st=U($n,st,si),ki===null?In=$n:ki.sibling=$n,ki=$n);return Ni&&Ra(mt,si),In}for($n=k($n);si<vt.length;si++)Ms=zt($n,mt,si,vt[si],Kt),Ms!==null&&(h&&Ms.alternate!==null&&$n.delete(Ms.key===null?si:Ms.key),st=U(Ms,st,si),ki===null?In=Ms:ki.sibling=Ms,ki=Ms);return h&&$n.forEach(function(iu){return m(mt,iu)}),Ni&&Ra(mt,si),In}function Zn(mt,st,vt,Kt){if(vt==null)throw Error(i(151));for(var In=null,ki=null,$n=st,si=st=0,Ms=null,Hi=vt.next();$n!==null&&!Hi.done;si++,Hi=vt.next()){$n.index>si?(Ms=$n,$n=null):Ms=$n.sibling;var iu=Tt(mt,$n,Hi.value,Kt);if(iu===null){$n===null&&($n=Ms);break}h&&$n&&iu.alternate===null&&m(mt,$n),st=U(iu,st,si),ki===null?In=iu:ki.sibling=iu,ki=iu,$n=Ms}if(Hi.done)return b(mt,$n),Ni&&Ra(mt,si),In;if($n===null){for(;!Hi.done;si++,Hi=vt.next())Hi=Qt(mt,Hi.value,Kt),Hi!==null&&(st=U(Hi,st,si),ki===null?In=Hi:ki.sibling=Hi,ki=Hi);return Ni&&Ra(mt,si),In}for($n=k($n);!Hi.done;si++,Hi=vt.next())Hi=zt($n,mt,si,Hi.value,Kt),Hi!==null&&(h&&Hi.alternate!==null&&$n.delete(Hi.key===null?si:Hi.key),st=U(Hi,st,si),ki===null?In=Hi:ki.sibling=Hi,ki=Hi);return h&&$n.forEach(function(bw){return m(mt,bw)}),Ni&&Ra(mt,si),In}function $i(mt,st,vt,Kt){if(typeof vt=="object"&&vt!==null&&vt.type===z&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case A:e:{for(var In=vt.key;st!==null;){if(st.key===In){if(In=vt.type,In===z){if(st.tag===7){b(mt,st.sibling),Kt=D(st,vt.props.children),Kt.return=mt,mt=Kt;break e}}else if(st.elementType===In||typeof In=="object"&&In!==null&&In.$$typeof===he&&Po(In)===st.type){b(mt,st.sibling),Kt=D(st,vt.props),Fa(Kt,vt),Kt.return=mt,mt=Kt;break e}b(mt,st);break}else m(mt,st);st=st.sibling}vt.type===z?(Kt=Ho(vt.props.children,mt.mode,Kt,vt.key),Kt.return=mt,mt=Kt):(Kt=qh(vt.type,vt.key,vt.props,null,mt.mode,Kt),Fa(Kt,vt),Kt.return=mt,mt=Kt)}return re(mt);case N:e:{for(In=vt.key;st!==null;){if(st.key===In)if(st.tag===4&&st.stateNode.containerInfo===vt.containerInfo&&st.stateNode.implementation===vt.implementation){b(mt,st.sibling),Kt=D(st,vt.children||[]),Kt.return=mt,mt=Kt;break e}else{b(mt,st);break}else m(mt,st);st=st.sibling}Kt=mp(vt,mt.mode,Kt),Kt.return=mt,mt=Kt}return re(mt);case he:return In=vt._init,vt=In(vt._payload),$i(mt,st,vt,Kt)}if(St(vt))return ii(mt,st,vt,Kt);if(Ye(vt)){if(In=Ye(vt),typeof In!="function")throw Error(i(150));return vt=In.call(vt),Zn(mt,st,vt,Kt)}if(typeof vt.then=="function")return $i(mt,st,Pl(vt),Kt);if(vt.$$typeof===Q)return $i(mt,st,Cl(mt,vt),Kt);Br(mt,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint"?(vt=""+vt,st!==null&&st.tag===6?(b(mt,st.sibling),Kt=D(st,vt),Kt.return=mt,mt=Kt):(b(mt,st),Kt=zd(vt,mt.mode,Kt),Kt.return=mt,mt=Kt),re(mt)):b(mt,st)}return function(mt,st,vt,Kt){try{sc=0;var In=$i(mt,st,vt,Kt);return ro=null,In}catch($n){if($n===Tl||$n===Yl)throw $n;var ki=Ir(29,$n,null,mt.mode);return ki.lanes=Kt,ki.return=mt,ki}finally{}}}var xr=Ro(!0),Ds=Ro(!1),Ki=Xe(null),Us=null;function xs(h){var m=h.alternate;Me(os,os.current&1),Me(Ki,h),Us===null&&(m===null||Uc.current!==null||m.memoizedState!==null)&&(Us=h)}function tf(h){if(h.tag===22){if(Me(os,os.current),Me(Ki,h),Us===null){var m=h.alternate;m!==null&&m.memoizedState!==null&&(Us=h)}}else ao()}function ao(){Me(os,os.current),Me(Ki,Ki.current)}function ia(h){tt(Ki),Us===h&&(Us=null),tt(os)}var os=Xe(0);function va(h){for(var m=h;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||hc(b)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Ko(h,m,b,k){m=h.memoizedState,b=b(k,m),b=b==null?m:S({},m,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var Qo={enqueueSetState:function(h,m,b){h=h._reactInternals;var k=Ca(),D=El(k);D.payload=m,b!=null&&(D.callback=b),m=Ao(h,D,k),m!==null&&(lo(m,h,k),Vc(m,h,k))},enqueueReplaceState:function(h,m,b){h=h._reactInternals;var k=Ca(),D=El(k);D.tag=1,D.payload=m,b!=null&&(D.callback=b),m=Ao(h,D,k),m!==null&&(lo(m,h,k),Vc(m,h,k))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var b=Ca(),k=El(b);k.tag=2,m!=null&&(k.callback=m),m=Ao(h,k,b),m!==null&&(lo(m,h,b),Vc(m,h,b))}};function nf(h,m,b,k,D,U,re){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(k,U,re):m.prototype&&m.prototype.isPureReactComponent?!Ec(b,k)||!Ec(D,U):!0}function sf(h,m,b,k){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,k),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,k),m.state!==h&&Qo.enqueueReplaceState(m,m.state,null)}function wa(h,m){var b=m;if("ref"in m){b={};for(var k in m)k!=="ref"&&(b[k]=m[k])}if(h=h.defaultProps){b===m&&(b=S({},b));for(var D in h)b[D]===void 0&&(b[D]=h[D])}return b}var Yu=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function rf(h){Yu(h)}function Xu(h){console.error(h)}function Vy(h){Yu(h)}function rc(h,m){try{var b=h.onUncaughtError;b(m.value,{componentStack:m.stack})}catch(k){setTimeout(function(){throw k})}}function Ku(h,m,b){try{var k=h.onCaughtError;k(b.value,{componentStack:b.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function Zm(h,m,b){return b=El(b),b.tag=3,b.payload={element:null},b.callback=function(){rc(h,m)},b}function p_(h){return h=El(h),h.tag=3,h}function Ym(h,m,b,k){var D=b.type.getDerivedStateFromError;if(typeof D=="function"){var U=k.value;h.payload=function(){return D(U)},h.callback=function(){Ku(m,b,k)}}var re=b.stateNode;re!==null&&typeof re.componentDidCatch=="function"&&(h.callback=function(){Ku(m,b,k),typeof D!="function"&&(nd===null?nd=new Set([this]):nd.add(this));var be=k.stack;this.componentDidCatch(k.value,{componentStack:be!==null?be:""})})}function m_(h,m,b,k,D){if(b.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){if(m=b.alternate,m!==null&&Bc(m,b,D,!0),b=Ki.current,b!==null){switch(b.tag){case 13:return Us===null?cg():b.alternate===null&&qs===0&&(qs=3),b.flags&=-257,b.flags|=65536,b.lanes=D,k===No?b.flags|=16384:(m=b.updateQueue,m===null?b.updateQueue=new Set([k]):m.add(k),uc(h,k,D)),!1;case 22:return b.flags|=65536,k===No?b.flags|=16384:(m=b.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([k])},b.updateQueue=m):(b=m.retryQueue,b===null?m.retryQueue=new Set([k]):b.add(k)),uc(h,k,D)),!1}throw Error(i(435,b.tag))}return uc(h,k,D),cg(),!1}if(Ni)return m=Ki.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=D,k!==Ou&&(h=Error(i(422),{cause:k}),Or(ga(h,b)))):(k!==Ou&&(m=Error(i(423),{cause:k}),Or(ga(m,b))),h=h.current.alternate,h.flags|=65536,D&=-D,h.lanes|=D,k=ga(k,b),D=Zm(h.stateNode,k,D),Zh(h,D),qs!==4&&(qs=2)),!1;var U=Error(i(520),{cause:k});if(U=ga(U,b),ff===null?ff=[U]:ff.push(U),qs!==4&&(qs=2),m===null)return!0;k=ga(k,b),b=m;do{switch(b.tag){case 3:return b.flags|=65536,h=D&-D,b.lanes|=h,h=Zm(b.stateNode,k,h),Zh(b,h),!1;case 1:if(m=b.type,U=b.stateNode,(b.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(nd===null||!nd.has(U))))return b.flags|=65536,D&=-D,b.lanes|=D,D=p_(D),Ym(D,h,b,k),Zh(b,D),!1}b=b.return}while(b!==null);return!1}var Cp=Error(i(461)),Cr=!1;function sa(h,m,b,k){m.child=h===null?Ds(m,null,b,k):xr(m,h.child,b,k)}function Xm(h,m,b,k,D){b=b.render;var U=m.ref;if("ref"in k){var re={};for(var be in k)be!=="ref"&&(re[be]=k[be])}else re=k;return jl(m),k=jr(h,m,b,re,U,D),be=wp(),h!==null&&!Cr?(Sp(h,m,D),ac(h,m,D)):(Ni&&be&&gp(m),m.flags|=1,sa(h,m,k,D),m.child)}function g_(h,m,b,k,D){if(h===null){var U=b.type;return typeof U=="function"&&!pp(U)&&U.defaultProps===void 0&&b.compare===null?(m.tag=15,m.type=U,Km(h,m,U,k,D)):(h=qh(b.type,null,k,m,m.mode,D),h.ref=m.ref,h.return=m,m.child=h)}if(U=h.child,!eg(h,D)){var re=U.memoizedProps;if(b=b.compare,b=b!==null?b:Ec,b(re,k)&&h.ref===m.ref)return ac(h,m,D)}return m.flags|=1,h=Eo(U,k),h.ref=m.ref,h.return=m,m.child=h}function Km(h,m,b,k,D){if(h!==null){var U=h.memoizedProps;if(Ec(U,k)&&h.ref===m.ref)if(Cr=!1,m.pendingProps=k=U,eg(h,D))(h.flags&131072)!==0&&(Cr=!0);else return m.lanes=h.lanes,ac(h,m,D)}return Hy(h,m,b,k,D)}function Uy(h,m,b){var k=m.pendingProps,D=k.children,U=h!==null?h.memoizedState:null;if(k.mode==="hidden"){if((m.flags&128)!==0){if(k=U!==null?U.baseLanes|b:b,h!==null){for(D=m.child=h.child,U=0;D!==null;)U=U|D.lanes|D.childLanes,D=D.sibling;m.childLanes=U&~k}else m.childLanes=0,m.child=null;return $y(h,m,k,b)}if((b&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&Uu(m,U!==null?U.cachePool:null),U!==null?Ml(m,U):Yi(),tf(m);else return m.lanes=m.childLanes=536870912,$y(h,m,U!==null?U.baseLanes|b:b,b)}else U!==null?(Uu(m,U.cachePool),Ml(m,U),ao(),m.memoizedState=null):(h!==null&&Uu(m,null),Yi(),ao());return sa(h,m,D,b),m.child}function $y(h,m,b,k){var D=yp();return D=D===null?null:{parent:Js._currentValue,pool:D},m.memoizedState={baseLanes:b,cachePool:D},h!==null&&Uu(m,null),Yi(),tf(m),h!==null&&Bc(h,m,k,!0),null}function qc(h,m){var b=m.ref;if(b===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(i(284));(h===null||h.ref!==b)&&(m.flags|=4194816)}}function Hy(h,m,b,k,D){return jl(m),b=jr(h,m,b,k,void 0,D),k=wp(),h!==null&&!Cr?(Sp(h,m,D),ac(h,m,D)):(Ni&&k&&gp(m),m.flags|=1,sa(h,m,b,D),m.child)}function qd(h,m,b,k,D,U){return jl(m),m.updateQueue=null,b=to(m,k,b,D),vp(h),k=wp(),h!==null&&!Cr?(Sp(h,m,U),ac(h,m,U)):(Ni&&k&&gp(m),m.flags|=1,sa(h,m,b,U),m.child)}function Tp(h,m,b,k,D){if(jl(m),m.stateNode===null){var U=$o,re=b.contextType;typeof re=="object"&&re!==null&&(U=gr(re)),U=new b(k,U),m.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Qo,m.stateNode=U,U._reactInternals=m,U=m.stateNode,U.props=k,U.state=m.memoizedState,U.refs={},pi(m),re=b.contextType,U.context=typeof re=="object"&&re!==null?gr(re):$o,U.state=m.memoizedState,re=b.getDerivedStateFromProps,typeof re=="function"&&(Ko(m,b,re,k),U.state=m.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(re=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),re!==U.state&&Qo.enqueueReplaceState(U,U.state,null),qu(m,k,U,D),Kl(),U.state=m.memoizedState),typeof U.componentDidMount=="function"&&(m.flags|=4194308),k=!0}else if(h===null){U=m.stateNode;var be=m.memoizedProps,$e=wa(b,be);U.props=$e;var ft=U.context,Ht=b.contextType;re=$o,typeof Ht=="object"&&Ht!==null&&(re=gr(Ht));var Qt=b.getDerivedStateFromProps;Ht=typeof Qt=="function"||typeof U.getSnapshotBeforeUpdate=="function",be=m.pendingProps!==be,Ht||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(be||ft!==re)&&sf(m,U,k,re),Oa=!1;var Tt=m.memoizedState;U.state=Tt,qu(m,k,U,D),Kl(),ft=m.memoizedState,be||Tt!==ft||Oa?(typeof Qt=="function"&&(Ko(m,b,Qt,k),ft=m.memoizedState),($e=Oa||nf(m,b,$e,k,Tt,ft,re))?(Ht||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(m.flags|=4194308)):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=k,m.memoizedState=ft),U.props=k,U.state=ft,U.context=re,k=$e):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),k=!1)}else{U=m.stateNode,Hu(h,m),re=m.memoizedProps,Ht=wa(b,re),U.props=Ht,Qt=m.pendingProps,Tt=U.context,ft=b.contextType,$e=$o,typeof ft=="object"&&ft!==null&&($e=gr(ft)),be=b.getDerivedStateFromProps,(ft=typeof be=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(re!==Qt||Tt!==$e)&&sf(m,U,k,$e),Oa=!1,Tt=m.memoizedState,U.state=Tt,qu(m,k,U,D),Kl();var zt=m.memoizedState;re!==Qt||Tt!==zt||Oa||h!==null&&h.dependencies!==null&&Ld(h.dependencies)?(typeof be=="function"&&(Ko(m,b,be,k),zt=m.memoizedState),(Ht=Oa||nf(m,b,Ht,k,Tt,zt,$e)||h!==null&&h.dependencies!==null&&Ld(h.dependencies))?(ft||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(k,zt,$e),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(k,zt,$e)),typeof U.componentDidUpdate=="function"&&(m.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof U.componentDidUpdate!="function"||re===h.memoizedProps&&Tt===h.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||re===h.memoizedProps&&Tt===h.memoizedState||(m.flags|=1024),m.memoizedProps=k,m.memoizedState=zt),U.props=k,U.state=zt,U.context=$e,k=Ht):(typeof U.componentDidUpdate!="function"||re===h.memoizedProps&&Tt===h.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||re===h.memoizedProps&&Tt===h.memoizedState||(m.flags|=1024),k=!1)}return U=k,qc(h,m),k=(m.flags&128)!==0,U||k?(U=m.stateNode,b=k&&typeof b.getDerivedStateFromError!="function"?null:U.render(),m.flags|=1,h!==null&&k?(m.child=xr(m,h.child,null,D),m.child=xr(m,null,b,D)):sa(h,m,b,D),m.memoizedState=U.state,h=m.child):h=ac(h,m,D),h}function kp(h,m,b,k){return fs(),m.flags|=256,sa(h,m,b,k),m.child}var qy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gy(h){return{baseLanes:h,cachePool:Wm()}}function Wy(h,m,b){return h=h!==null?h.childLanes&~b:0,m&&(h|=il),h}function y_(h,m,b){var k=m.pendingProps,D=!1,U=(m.flags&128)!==0,re;if((re=U)||(re=h!==null&&h.memoizedState===null?!1:(os.current&2)!==0),re&&(D=!0,m.flags&=-129),re=(m.flags&32)!==0,m.flags&=-33,h===null){if(Ni){if(D?xs(m):ao(),Ni){var be=Rs,$e;if($e=be){e:{for($e=be,be=Da;$e.nodeType!==8;){if(!be){be=null;break e}if($e=rl($e.nextSibling),$e===null){be=null;break e}}be=$e}be!==null?(m.memoizedState={dehydrated:be,treeContext:qo!==null?{id:Xa,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},$e=Ir(18,null,null,0),$e.stateNode=be,$e.return=m,m.child=$e,na=m,Rs=null,$e=!0):$e=!1}$e||Ka(m)}if(be=m.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return hc(be)?m.lanes=32:m.lanes=536870912,null;ia(m)}return be=k.children,k=k.fallback,D?(ao(),D=m.mode,be=af({mode:"hidden",children:be},D),k=Ho(k,D,b,null),be.return=m,k.return=m,be.sibling=k,m.child=be,D=m.child,D.memoizedState=Gy(b),D.childLanes=Wy(h,re,b),m.memoizedState=qy,k):(xs(m),Qm(m,be))}if($e=h.memoizedState,$e!==null&&(be=$e.dehydrated,be!==null)){if(U)m.flags&256?(xs(m),m.flags&=-257,m=Jm(h,m,b)):m.memoizedState!==null?(ao(),m.child=h.child,m.flags|=128,m=null):(ao(),D=k.fallback,be=m.mode,k=af({mode:"visible",children:k.children},be),D=Ho(D,be,b,null),D.flags|=2,k.return=m,D.return=m,k.sibling=D,m.child=k,xr(m,h.child,null,b),k=m.child,k.memoizedState=Gy(b),k.childLanes=Wy(h,re,b),m.memoizedState=qy,m=D);else if(xs(m),hc(be)){if(re=be.nextSibling&&be.nextSibling.dataset,re)var ft=re.dgst;re=ft,k=Error(i(419)),k.stack="",k.digest=re,Or({value:k,source:null,stack:null}),m=Jm(h,m,b)}else if(Cr||Bc(h,m,b,!1),re=(b&h.childLanes)!==0,Cr||re){if(re=Es,re!==null&&(k=b&-b,k=(k&42)!==0?1:Ut(k),k=(k&(re.suspendedLanes|b))!==0?0:k,k!==0&&k!==$e.retryLane))throw $e.retryLane=k,ko(h,k),lo(re,h,k),Cp;be.data==="$?"||cg(),m=Jm(h,m,b)}else be.data==="$?"?(m.flags|=192,m.child=h.child,m=null):(h=$e.treeContext,Rs=rl(be.nextSibling),na=m,Ni=!0,Go=null,Da=!1,h!==null&&(ta[ya++]=Xa,ta[ya++]=Pa,ta[ya++]=qo,Xa=h.id,Pa=h.overflow,qo=m),m=Qm(m,k.children),m.flags|=4096);return m}return D?(ao(),D=k.fallback,be=m.mode,$e=h.child,ft=$e.sibling,k=Eo($e,{mode:"hidden",children:k.children}),k.subtreeFlags=$e.subtreeFlags&65011712,ft!==null?D=Eo(ft,D):(D=Ho(D,be,b,null),D.flags|=2),D.return=m,k.return=m,k.sibling=D,m.child=k,k=D,D=m.child,be=h.child.memoizedState,be===null?be=Gy(b):($e=be.cachePool,$e!==null?(ft=Js._currentValue,$e=$e.parent!==ft?{parent:ft,pool:ft}:$e):$e=Wm(),be={baseLanes:be.baseLanes|b,cachePool:$e}),D.memoizedState=be,D.childLanes=Wy(h,re,b),m.memoizedState=qy,k):(xs(m),b=h.child,h=b.sibling,b=Eo(b,{mode:"visible",children:k.children}),b.return=m,b.sibling=null,h!==null&&(re=m.deletions,re===null?(m.deletions=[h],m.flags|=16):re.push(h)),m.child=b,m.memoizedState=null,b)}function Qm(h,m){return m=af({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function af(h,m){return h=Ir(22,h,null,m),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function Jm(h,m,b){return xr(m,h.child,null,b),h=Qm(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function Zy(h,m,b){h.lanes|=m;var k=h.alternate;k!==null&&(k.lanes|=m),Lc(h.return,m,b)}function Yy(h,m,b,k,D){var U=h.memoizedState;U===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:k,tail:b,tailMode:D}:(U.isBackwards=m,U.rendering=null,U.renderingStartTime=0,U.last=k,U.tail=b,U.tailMode=D)}function x_(h,m,b){var k=m.pendingProps,D=k.revealOrder,U=k.tail;if(sa(h,m,k.children,b),k=os.current,(k&2)!==0)k=k&1|2,m.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Zy(h,b,m);else if(h.tag===19)Zy(h,b,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}k&=1}switch(Me(os,k),D){case"forwards":for(b=m.child,D=null;b!==null;)h=b.alternate,h!==null&&va(h)===null&&(D=b),b=b.sibling;b=D,b===null?(D=m.child,m.child=null):(D=b.sibling,b.sibling=null),Yy(m,!1,D,b,U);break;case"backwards":for(b=null,D=m.child,m.child=null;D!==null;){if(h=D.alternate,h!==null&&va(h)===null){m.child=D;break}h=D.sibling,D.sibling=b,b=D,D=h}Yy(m,!0,b,null,U);break;case"together":Yy(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function ac(h,m,b){if(h!==null&&(m.dependencies=h.dependencies),nl|=m.lanes,(b&m.childLanes)===0)if(h!==null){if(Bc(h,m,b,!1),(b&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(i(153));if(m.child!==null){for(h=m.child,b=Eo(h,h.pendingProps),m.child=b,b.return=m;h.sibling!==null;)h=h.sibling,b=b.sibling=Eo(h,h.pendingProps),b.return=m;b.sibling=null}return m.child}function eg(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&Ld(h)))}function tw(h,m,b){switch(m.tag){case 3:Ve(m,m.stateNode.containerInfo),xa(m,Js,h.memoizedState.cache),fs();break;case 27:case 5:Dt(m);break;case 4:Ve(m,m.stateNode.containerInfo);break;case 10:xa(m,m.type,m.memoizedProps.value);break;case 13:var k=m.memoizedState;if(k!==null)return k.dehydrated!==null?(xs(m),m.flags|=128,null):(b&m.child.childLanes)!==0?y_(h,m,b):(xs(m),h=ac(h,m,b),h!==null?h.sibling:null);xs(m);break;case 19:var D=(h.flags&128)!==0;if(k=(b&m.childLanes)!==0,k||(Bc(h,m,b,!1),k=(b&m.childLanes)!==0),D){if(k)return x_(h,m,b);m.flags|=128}if(D=m.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),Me(os,os.current),k)break;return null;case 22:case 23:return m.lanes=0,Uy(h,m,b);case 24:xa(m,Js,h.memoizedState.cache)}return ac(h,m,b)}function tg(h,m,b){if(h!==null)if(h.memoizedProps!==m.pendingProps)Cr=!0;else{if(!eg(h,b)&&(m.flags&128)===0)return Cr=!1,tw(h,m,b);Cr=(h.flags&131072)!==0}else Cr=!1,Ni&&(m.flags&1048576)!==0&&Id(m,Oc,m.index);switch(m.lanes=0,m.tag){case 16:e:{h=m.pendingProps;var k=m.elementType,D=k._init;if(k=D(k._payload),m.type=k,typeof k=="function")pp(k)?(h=wa(k,h),m.tag=1,m=Tp(null,m,k,h,b)):(m.tag=0,m=Hy(null,m,k,h,b));else{if(k!=null){if(D=k.$$typeof,D===Z){m.tag=11,m=Xm(null,m,k,h,b);break e}else if(D===ge){m.tag=14,m=g_(null,m,k,h,b);break e}}throw m=Rt(k)||k,Error(i(306,m,""))}}return m;case 0:return Hy(h,m,m.type,m.pendingProps,b);case 1:return k=m.type,D=wa(k,m.pendingProps),Tp(h,m,k,D,b);case 3:e:{if(Ve(m,m.stateNode.containerInfo),h===null)throw Error(i(387));k=m.pendingProps;var U=m.memoizedState;D=U.element,Hu(h,m),qu(m,k,null,b);var re=m.memoizedState;if(k=re.cache,xa(m,Js,k),k!==U.cache&&Bu(m,[Js],b,!0),Kl(),k=re.element,U.isDehydrated)if(U={element:k,isDehydrated:!1,cache:re.cache},m.updateQueue.baseState=U,m.memoizedState=U,m.flags&256){m=kp(h,m,k,b);break e}else if(k!==D){D=ga(Error(i(424)),m),Or(D),m=kp(h,m,k,b);break e}else{switch(h=m.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(Rs=rl(h.firstChild),na=m,Ni=!0,Go=null,Da=!0,b=Ds(m,null,k,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(fs(),k===D){m=ac(h,m,b);break e}sa(h,m,k,b)}m=m.child}return m;case 26:return qc(h,m),h===null?(b=Mg(m.type,null,m.pendingProps,null))?m.memoizedState=b:Ni||(b=m.type,h=m.pendingProps,k=bf(dt.current).createElement(b),k[qn]=m,k[Bn]=h,$r(k,b,h),Ii(k),m.stateNode=k):m.memoizedState=Mg(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:return Dt(m),h===null&&Ni&&(k=m.stateNode=Y_(m.type,m.pendingProps,dt.current),na=m,Da=!0,D=Rs,tu(m.type)?(Tg=D,Rs=rl(k.firstChild)):Rs=D),sa(h,m,m.pendingProps.children,b),qc(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&Ni&&((D=k=Rs)&&(k=mw(k,m.type,m.pendingProps,Da),k!==null?(m.stateNode=k,na=m,Rs=rl(k.firstChild),Da=!1,D=!0):D=!1),D||Ka(m)),Dt(m),D=m.type,U=m.pendingProps,re=h!==null?h.memoizedProps:null,k=U.children,jg(D,U)?k=null:re!==null&&jg(D,re)&&(m.flags|=32),m.memoizedState!==null&&(D=jr(h,m,Hc,null,null,b),C._currentValue=D),qc(h,m),sa(h,m,k,b),m.child;case 6:return h===null&&Ni&&((h=b=Rs)&&(b=W_(b,m.pendingProps,Da),b!==null?(m.stateNode=b,na=m,Rs=null,h=!0):h=!1),h||Ka(m)),null;case 13:return y_(h,m,b);case 4:return Ve(m,m.stateNode.containerInfo),k=m.pendingProps,h===null?m.child=xr(m,null,k,b):sa(h,m,k,b),m.child;case 11:return Xm(h,m,m.type,m.pendingProps,b);case 7:return sa(h,m,m.pendingProps,b),m.child;case 8:return sa(h,m,m.pendingProps.children,b),m.child;case 12:return sa(h,m,m.pendingProps.children,b),m.child;case 10:return k=m.pendingProps,xa(m,m.type,k.value),sa(h,m,k.children,b),m.child;case 9:return D=m.type._context,k=m.pendingProps.children,jl(m),D=gr(D),k=k(D),m.flags|=1,sa(h,m,k,b),m.child;case 14:return g_(h,m,m.type,m.pendingProps,b);case 15:return Km(h,m,m.type,m.pendingProps,b);case 19:return x_(h,m,b);case 31:return k=m.pendingProps,b=m.mode,k={mode:k.mode,children:k.children},h===null?(b=af(k,b),b.ref=m.ref,m.child=b,b.return=m,m=b):(b=Eo(h.child,k),b.ref=m.ref,m.child=b,b.return=m,m=b),m;case 22:return Uy(h,m,b);case 24:return jl(m),k=gr(Js),h===null?(D=yp(),D===null&&(D=Es,U=Gh(),D.pooledCache=U,U.refCount++,U!==null&&(D.pooledCacheLanes|=b),D=U),m.memoizedState={parent:k,cache:D},pi(m),xa(m,Js,D)):((h.lanes&b)!==0&&(Hu(h,m),qu(m,null,null,b),Kl()),D=h.memoizedState,U=m.memoizedState,D.parent!==k?(D={parent:k,cache:k},m.memoizedState=D,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=D),xa(m,Js,k)):(k=U.cache,xa(m,Js,k),k!==D.cache&&Bu(m,[Js],b,!0))),sa(h,m,m.pendingProps.children,b),m.child;case 29:throw m.pendingProps}throw Error(i(156,m.tag))}function oc(h){h.flags|=4}function ng(h,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!Pg(m)){if(m=Ki.current,m!==null&&((Ci&4194048)===Ci?Us!==null:(Ci&62914560)!==Ci&&(Ci&536870912)===0||m!==Us))throw kl=No,xp;h.flags|=8192}}function Qu(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?Ft():536870912,h.lanes|=m,Zd|=m)}function Tr(h,m){if(!Ni)switch(h.tailMode){case"hidden":m=h.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var k=null;b!==null;)b.alternate!==null&&(k=b),b=b.sibling;k===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:k.sibling=null}}function $s(h){var m=h.alternate!==null&&h.alternate.child===h.child,b=0,k=0;if(m)for(var D=h.child;D!==null;)b|=D.lanes|D.childLanes,k|=D.subtreeFlags&65011712,k|=D.flags&65011712,D.return=h,D=D.sibling;else for(D=h.child;D!==null;)b|=D.lanes|D.childLanes,k|=D.subtreeFlags,k|=D.flags,D.return=h,D=D.sibling;return h.subtreeFlags|=k,h.childLanes=b,m}function Xy(h,m,b){var k=m.pendingProps;switch(Fc(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $s(m),null;case 1:return $s(m),null;case 3:return b=m.stateNode,k=null,h!==null&&(k=h.memoizedState.cache),m.memoizedState.cache!==k&&(m.flags|=2048),_a(Js),Ge(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(Lu(m)?oc(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Gl())),$s(m),null;case 26:return b=m.memoizedState,h===null?(oc(m),b!==null?($s(m),ng(m,b)):($s(m),m.flags&=-16777217)):b?b!==h.memoizedState?(oc(m),$s(m),ng(m,b)):($s(m),m.flags&=-16777217):(h.memoizedProps!==k&&oc(m),$s(m),m.flags&=-16777217),null;case 27:Lt(m),b=dt.current;var D=m.type;if(h!==null&&m.stateNode!=null)h.memoizedProps!==k&&oc(m);else{if(!k){if(m.stateNode===null)throw Error(i(166));return $s(m),null}h=ot.current,Lu(m)?Fu(m):(h=Y_(D,k,b),m.stateNode=h,oc(m))}return $s(m),null;case 5:if(Lt(m),b=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==k&&oc(m);else{if(!k){if(m.stateNode===null)throw Error(i(166));return $s(m),null}if(h=ot.current,Lu(m))Fu(m);else{switch(D=bf(dt.current),h){case 1:h=D.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:h=D.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":h=D.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":h=D.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":h=D.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof k.is=="string"?D.createElement("select",{is:k.is}):D.createElement("select"),k.multiple?h.multiple=!0:k.size&&(h.size=k.size);break;default:h=typeof k.is=="string"?D.createElement(b,{is:k.is}):D.createElement(b)}}h[qn]=m,h[Bn]=k;e:for(D=m.child;D!==null;){if(D.tag===5||D.tag===6)h.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===m)break e;for(;D.sibling===null;){if(D.return===null||D.return===m)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}m.stateNode=h;e:switch($r(h,b,k),b){case"button":case"input":case"select":case"textarea":h=!!k.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&oc(m)}}return $s(m),m.flags&=-16777217,null;case 6:if(h&&m.stateNode!=null)h.memoizedProps!==k&&oc(m);else{if(typeof k!="string"&&m.stateNode===null)throw Error(i(166));if(h=dt.current,Lu(m)){if(h=m.stateNode,b=m.memoizedProps,k=null,D=na,D!==null)switch(D.tag){case 27:case 5:k=D.memoizedProps}h[qn]=m,h=!!(h.nodeValue===b||k!==null&&k.suppressHydrationWarning===!0||$_(h.nodeValue,b)),h||Ka(m)}else h=bf(h).createTextNode(k),h[qn]=m,m.stateNode=h}return $s(m),null;case 13:if(k=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(D=Lu(m),k!==null&&k.dehydrated!==null){if(h===null){if(!D)throw Error(i(318));if(D=m.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(i(317));D[qn]=m}else fs(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;$s(m),D=!1}else D=Gl(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=D),D=!0;if(!D)return m.flags&256?(ia(m),m):(ia(m),null)}if(ia(m),(m.flags&128)!==0)return m.lanes=b,m;if(b=k!==null,h=h!==null&&h.memoizedState!==null,b){k=m.child,D=null,k.alternate!==null&&k.alternate.memoizedState!==null&&k.alternate.memoizedState.cachePool!==null&&(D=k.alternate.memoizedState.cachePool.pool);var U=null;k.memoizedState!==null&&k.memoizedState.cachePool!==null&&(U=k.memoizedState.cachePool.pool),U!==D&&(k.flags|=2048)}return b!==h&&b&&(m.child.flags|=8192),Qu(m,m.updateQueue),$s(m),null;case 4:return Ge(),h===null&&bg(m.stateNode.containerInfo),$s(m),null;case 10:return _a(m.type),$s(m),null;case 19:if(tt(os),D=m.memoizedState,D===null)return $s(m),null;if(k=(m.flags&128)!==0,U=D.rendering,U===null)if(k)Tr(D,!1);else{if(qs!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(U=va(h),U!==null){for(m.flags|=128,Tr(D,!1),h=U.updateQueue,m.updateQueue=h,Qu(m,h),m.subtreeFlags=0,h=b,b=m.child;b!==null;)Iu(b,h),b=b.sibling;return Me(os,os.current&1|2),m.child}h=h.sibling}D.tail!==null&&Hn()>Rp&&(m.flags|=128,k=!0,Tr(D,!1),m.lanes=4194304)}else{if(!k)if(h=va(U),h!==null){if(m.flags|=128,k=!0,h=h.updateQueue,m.updateQueue=h,Qu(m,h),Tr(D,!0),D.tail===null&&D.tailMode==="hidden"&&!U.alternate&&!Ni)return $s(m),null}else 2*Hn()-D.renderingStartTime>Rp&&b!==536870912&&(m.flags|=128,k=!0,Tr(D,!1),m.lanes=4194304);D.isBackwards?(U.sibling=m.child,m.child=U):(h=D.last,h!==null?h.sibling=U:m.child=U,D.last=U)}return D.tail!==null?(m=D.tail,D.rendering=m,D.tail=m.sibling,D.renderingStartTime=Hn(),m.sibling=null,h=os.current,Me(os,k?h&1|2:h&1),m):($s(m),null);case 22:case 23:return ia(m),Xh(),k=m.memoizedState!==null,h!==null?h.memoizedState!==null!==k&&(m.flags|=8192):k&&(m.flags|=8192),k?(b&536870912)!==0&&(m.flags&128)===0&&($s(m),m.subtreeFlags&6&&(m.flags|=8192)):$s(m),b=m.updateQueue,b!==null&&Qu(m,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),k=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(k=m.memoizedState.cachePool.pool),k!==b&&(m.flags|=2048),h!==null&&tt(ba),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),m.memoizedState.cache!==b&&(m.flags|=2048),_a(Js),$s(m),null;case 25:return null;case 30:return null}throw Error(i(156,m.tag))}function nw(h,m){switch(Fc(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return _a(Js),Ge(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return Lt(m),null;case 13:if(ia(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(i(340));fs()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return tt(os),null;case 4:return Ge(),null;case 10:return _a(m.type),null;case 22:case 23:return ia(m),Xh(),h!==null&&tt(ba),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return _a(Js),null;case 25:return null;default:return null}}function Ky(h,m){switch(Fc(m),m.tag){case 3:_a(Js),Ge();break;case 26:case 27:case 5:Lt(m);break;case 4:Ge();break;case 13:ia(m);break;case 19:tt(os);break;case 10:_a(m.type);break;case 22:case 23:ia(m),Xh(),h!==null&&tt(ba);break;case 24:_a(Js)}}function Ep(h,m){try{var b=m.updateQueue,k=b!==null?b.lastEffect:null;if(k!==null){var D=k.next;b=D;do{if((b.tag&h)===h){k=void 0;var U=b.create,re=b.inst;k=U(),re.destroy=k}b=b.next}while(b!==D)}}catch(be){ps(m,m.return,be)}}function Ju(h,m,b){try{var k=m.updateQueue,D=k!==null?k.lastEffect:null;if(D!==null){var U=D.next;k=U;do{if((k.tag&h)===h){var re=k.inst,be=re.destroy;if(be!==void 0){re.destroy=void 0,D=m;var $e=b,ft=be;try{ft()}catch(Ht){ps(D,$e,Ht)}}}k=k.next}while(k!==U)}}catch(Ht){ps(m,m.return,Ht)}}function Qy(h){var m=h.updateQueue;if(m!==null){var b=h.stateNode;try{bp(m,b)}catch(k){ps(h,h.return,k)}}}function __(h,m,b){b.props=wa(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(k){ps(h,m,k)}}function Gd(h,m){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var k=h.stateNode;break;case 30:k=h.stateNode;break;default:k=h.stateNode}typeof b=="function"?h.refCleanup=b(k):b.current=k}}catch(D){ps(h,m,D)}}function Rl(h,m){var b=h.ref,k=h.refCleanup;if(b!==null)if(typeof k=="function")try{k()}catch(D){ps(h,m,D)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(D){ps(h,m,D)}else b.current=null}function Jy(h){var m=h.type,b=h.memoizedProps,k=h.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":b.autoFocus&&k.focus();break e;case"img":b.src?k.src=b.src:b.srcSet&&(k.srcset=b.srcSet)}}catch(D){ps(h,h.return,D)}}function ex(h,m,b){try{var k=h.stateNode;H_(k,h.type,b,m),k[Bn]=m}catch(D){ps(h,h.return,D)}}function b_(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&tu(h.type)||h.tag===4}function tx(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||b_(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&tu(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function of(h,m,b){var k=h.tag;if(k===5||k===6)h=h.stateNode,m?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(h,m):(m=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,m.appendChild(h),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=_f));else if(k!==4&&(k===27&&tu(h.type)&&(b=h.stateNode,m=null),h=h.child,h!==null))for(of(h,m,b),h=h.sibling;h!==null;)of(h,m,b),h=h.sibling}function lf(h,m,b){var k=h.tag;if(k===5||k===6)h=h.stateNode,m?b.insertBefore(h,m):b.appendChild(h);else if(k!==4&&(k===27&&tu(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(lf(h,m,b),h=h.sibling;h!==null;)lf(h,m,b),h=h.sibling}function nx(h){var m=h.stateNode,b=h.memoizedProps;try{for(var k=h.type,D=m.attributes;D.length;)m.removeAttributeNode(D[0]);$r(m,k,b),m[qn]=h,m[Bn]=b}catch(U){ps(h,h.return,U)}}var La=!1,zs=!1,ix=!1,v_=typeof WeakSet=="function"?WeakSet:Set,Vr=null;function iw(h,m){if(h=h.containerInfo,wg=oe,h=Uh(h),Md(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var k=b.getSelection&&b.getSelection();if(k&&k.rangeCount!==0){b=k.anchorNode;var D=k.anchorOffset,U=k.focusNode;k=k.focusOffset;try{b.nodeType,U.nodeType}catch(Zn){b=null;break e}var re=0,be=-1,$e=-1,ft=0,Ht=0,Qt=h,Tt=null;t:for(;;){for(var zt;Qt!==b||D!==0&&Qt.nodeType!==3||(be=re+D),Qt!==U||k!==0&&Qt.nodeType!==3||($e=re+k),Qt.nodeType===3&&(re+=Qt.nodeValue.length),(zt=Qt.firstChild)!==null;)Tt=Qt,Qt=zt;for(;;){if(Qt===h)break t;if(Tt===b&&++ft===D&&(be=re),Tt===U&&++Ht===k&&($e=re),(zt=Qt.nextSibling)!==null)break;Qt=Tt,Tt=Qt.parentNode}Qt=zt}b=be===-1||$e===-1?null:{start:be,end:$e}}else b=null}b=b||{start:0,end:0}}else b=null;for(Sg={focusedElem:h,selectionRange:b},oe=!1,Vr=m;Vr!==null;)if(m=Vr,h=m.child,(m.subtreeFlags&1024)!==0&&h!==null)h.return=m,Vr=h;else for(;Vr!==null;){switch(m=Vr,U=m.alternate,h=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&U!==null){h=void 0,b=m,D=U.memoizedProps,U=U.memoizedState,k=b.stateNode;try{var ii=wa(b.type,D,b.elementType===b.type);h=k.getSnapshotBeforeUpdate(ii,U),k.__reactInternalSnapshotBeforeUpdate=h}catch(Zn){ps(b,b.return,Zn)}}break;case 3:if((h&1024)!==0){if(h=m.stateNode.containerInfo,b=h.nodeType,b===9)Cg(h);else if(b===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":Cg(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(i(163))}if(h=m.sibling,h!==null){h.return=m.return,Vr=h;break}Vr=m.return}}function w_(h,m,b){var k=b.flags;switch(b.tag){case 0:case 11:case 15:Wc(h,b),k&4&&Ep(5,b);break;case 1:if(Wc(h,b),k&4)if(h=b.stateNode,m===null)try{h.componentDidMount()}catch(re){ps(b,b.return,re)}else{var D=wa(b.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(D,m,h.__reactInternalSnapshotBeforeUpdate)}catch(re){ps(b,b.return,re)}}k&64&&Qy(b),k&512&&Gd(b,b.return);break;case 3:if(Wc(h,b),k&64&&(h=b.updateQueue,h!==null)){if(m=null,b.child!==null)switch(b.child.tag){case 27:case 5:m=b.child.stateNode;break;case 1:m=b.child.stateNode}try{bp(h,m)}catch(re){ps(b,b.return,re)}}break;case 27:m===null&&k&4&&nx(b);case 26:case 5:Wc(h,b),m===null&&k&4&&Jy(b),k&512&&Gd(b,b.return);break;case 12:Wc(h,b);break;case 13:Wc(h,b),k&4&&cf(h,b),k&64&&(h=b.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(b=fg.bind(null,b),Z_(h,b))));break;case 22:if(k=b.memoizedState!==null||La,!k){m=m!==null&&m.memoizedState!==null||zs,D=La;var U=zs;La=k,(zs=m)&&!U?el(h,b,(b.subtreeFlags&8772)!==0):Wc(h,b),La=D,zs=U}break;case 30:break;default:Wc(h,b)}}function S_(h){var m=h.alternate;m!==null&&(h.alternate=null,S_(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&ds(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var Hs=null,Sa=!1;function Gc(h,m,b){for(b=b.child;b!==null;)sx(h,m,b),b=b.sibling}function sx(h,m,b){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(yn,b)}catch(U){}switch(b.tag){case 26:zs||Rl(b,m),Gc(h,m,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:zs||Rl(b,m);var k=Hs,D=Sa;tu(b.type)&&(Hs=b.stateNode,Sa=!1),Gc(h,m,b),Bp(b.stateNode),Hs=k,Sa=D;break;case 5:zs||Rl(b,m);case 6:if(k=Hs,D=Sa,Hs=null,Gc(h,m,b),Hs=k,Sa=D,Hs!==null)if(Sa)try{(Hs.nodeType===9?Hs.body:Hs.nodeName==="HTML"?Hs.ownerDocument.body:Hs).removeChild(b.stateNode)}catch(U){ps(b,m,U)}else try{Hs.removeChild(b.stateNode)}catch(U){ps(b,m,U)}break;case 18:Hs!==null&&(Sa?(h=Hs,wx(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,b.stateNode),aa(h)):wx(Hs,b.stateNode));break;case 4:k=Hs,D=Sa,Hs=b.stateNode.containerInfo,Sa=!0,Gc(h,m,b),Hs=k,Sa=D;break;case 0:case 11:case 14:case 15:zs||Ju(2,b,m),zs||Ju(4,b,m),Gc(h,m,b);break;case 1:zs||(Rl(b,m),k=b.stateNode,typeof k.componentWillUnmount=="function"&&__(b,m,k)),Gc(h,m,b);break;case 21:Gc(h,m,b);break;case 22:zs=(k=zs)||b.memoizedState!==null,Gc(h,m,b),zs=k;break;default:Gc(h,m,b)}}function cf(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{aa(h)}catch(b){ps(m,m.return,b)}}function sw(h){switch(h.tag){case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new v_),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new v_),m;default:throw Error(i(435,h.tag))}}function Is(h,m){var b=sw(h);m.forEach(function(k){var D=pg.bind(null,h,k);b.has(k)||(b.add(k),k.then(D,D))})}function Ur(h,m){var b=m.deletions;if(b!==null)for(var k=0;k<b.length;k++){var D=b[k],U=h,re=m,be=re;e:for(;be!==null;){switch(be.tag){case 27:if(tu(be.type)){Hs=be.stateNode,Sa=!1;break e}break;case 5:Hs=be.stateNode,Sa=!1;break e;case 3:case 4:Hs=be.stateNode.containerInfo,Sa=!0;break e}be=be.return}if(Hs===null)throw Error(i(160));sx(U,re,D),Hs=null,Sa=!1,U=D.alternate,U!==null&&(U.return=null),D.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)Mp(m,h),m=m.sibling}var Jo=null;function Mp(h,m){var b=h.alternate,k=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Ur(m,h),ja(h),k&4&&(Ju(3,h,h.return),Ep(3,h),Ju(5,h,h.return));break;case 1:Ur(m,h),ja(h),k&512&&(zs||b===null||Rl(b,b.return)),k&64&&La&&(h=h.updateQueue,h!==null&&(k=h.callbacks,k!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?k:b.concat(k))));break;case 26:var D=Jo;if(Ur(m,h),ja(h),k&512&&(zs||b===null||Rl(b,b.return)),k&4){var U=b!==null?b.memoizedState:null;if(k=h.memoizedState,b===null)if(k===null)if(h.stateNode===null){e:{k=h.type,b=h.memoizedProps,D=D.ownerDocument||D;t:switch(k){case"title":U=D.getElementsByTagName("title")[0],(!U||U[Wi]||U[qn]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=D.createElement(k),D.head.insertBefore(U,D.querySelector("head > title"))),$r(U,k,b),U[qn]=h,Ii(U),k=U;break e;case"link":var re=Ag("link","href",D).get(k+(b.href||""));if(re){for(var be=0;be<re.length;be++)if(U=re[be],U.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&U.getAttribute("rel")===(b.rel==null?null:b.rel)&&U.getAttribute("title")===(b.title==null?null:b.title)&&U.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){re.splice(be,1);break t}}U=D.createElement(k),$r(U,k,b),D.head.appendChild(U);break;case"meta":if(re=Ag("meta","content",D).get(k+(b.content||""))){for(be=0;be<re.length;be++)if(U=re[be],U.getAttribute("content")===(b.content==null?null:""+b.content)&&U.getAttribute("name")===(b.name==null?null:b.name)&&U.getAttribute("property")===(b.property==null?null:b.property)&&U.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&U.getAttribute("charset")===(b.charSet==null?null:b.charSet)){re.splice(be,1);break t}}U=D.createElement(k),$r(U,k,b),D.head.appendChild(U);break;default:throw Error(i(468,k))}U[qn]=h,Ii(U),k=U}h.stateNode=k}else Hp(D,h.type,h.stateNode);else h.stateNode=Ng(D,k,h.memoizedProps);else U!==k?(U===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):U.count--,k===null?Hp(D,h.type,h.stateNode):Ng(D,k,h.memoizedProps)):k===null&&h.stateNode!==null&&ex(h,h.memoizedProps,b.memoizedProps)}break;case 27:Ur(m,h),ja(h),k&512&&(zs||b===null||Rl(b,b.return)),b!==null&&k&4&&ex(h,h.memoizedProps,b.memoizedProps);break;case 5:if(Ur(m,h),ja(h),k&512&&(zs||b===null||Rl(b,b.return)),h.flags&32){D=h.stateNode;try{qa(D,"")}catch(zt){ps(h,h.return,zt)}}k&4&&h.stateNode!=null&&(D=h.memoizedProps,ex(h,D,b!==null?b.memoizedProps:D)),k&1024&&(ix=!0);break;case 6:if(Ur(m,h),ja(h),k&4){if(h.stateNode===null)throw Error(i(162));k=h.memoizedProps,b=h.stateNode;try{b.nodeValue=k}catch(zt){ps(h,h.return,zt)}}break;case 3:if($p=null,D=Jo,Jo=ih(m.containerInfo),Ur(m,h),Jo=D,ja(h),k&4&&b!==null&&b.memoizedState.isDehydrated)try{aa(m.containerInfo)}catch(zt){ps(h,h.return,zt)}ix&&(ix=!1,uf(h));break;case 4:k=Jo,Jo=ih(h.stateNode.containerInfo),Ur(m,h),ja(h),Jo=k;break;case 12:Ur(m,h),ja(h);break;case 13:Ur(m,h),ja(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Yd=Hn()),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,Is(h,k)));break;case 22:D=h.memoizedState!==null;var $e=b!==null&&b.memoizedState!==null,ft=La,Ht=zs;if(La=ft||D,zs=Ht||$e,Ur(m,h),zs=Ht,La=ft,ja(h),k&8192)e:for(m=h.stateNode,m._visibility=D?m._visibility&-2:m._visibility|1,D&&(b===null||$e||La||zs||ed(h)),b=null,m=h;;){if(m.tag===5||m.tag===26){if(b===null){$e=b=m;try{if(U=$e.stateNode,D)re=U.style,typeof re.setProperty=="function"?re.setProperty("display","none","important"):re.display="none";else{be=$e.stateNode;var Qt=$e.memoizedProps.style,Tt=Qt!=null&&Qt.hasOwnProperty("display")?Qt.display:null;be.style.display=Tt==null||typeof Tt=="boolean"?"":(""+Tt).trim()}}catch(zt){ps($e,$e.return,zt)}}}else if(m.tag===6){if(b===null){$e=m;try{$e.stateNode.nodeValue=D?"":$e.memoizedProps}catch(zt){ps($e,$e.return,zt)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;b===m&&(b=null),m=m.return}b===m&&(b=null),m.sibling.return=m.return,m=m.sibling}k&4&&(k=h.updateQueue,k!==null&&(b=k.retryQueue,b!==null&&(k.retryQueue=null,Is(h,b))));break;case 19:Ur(m,h),ja(h),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,Is(h,k)));break;case 30:break;case 21:break;default:Ur(m,h),ja(h)}}function ja(h){var m=h.flags;if(m&2){try{for(var b,k=h.return;k!==null;){if(b_(k)){b=k;break}k=k.return}if(b==null)throw Error(i(160));switch(b.tag){case 27:var D=b.stateNode,U=tx(h);lf(h,U,D);break;case 5:var re=b.stateNode;b.flags&32&&(qa(re,""),b.flags&=-33);var be=tx(h);lf(h,be,re);break;case 3:case 4:var $e=b.stateNode.containerInfo,ft=tx(h);of(h,ft,$e);break;default:throw Error(i(161))}}catch(Ht){ps(h,h.return,Ht)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function uf(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;uf(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),h=h.sibling}}function Wc(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)w_(h,m.alternate,m),m=m.sibling}function ed(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:Ju(4,m,m.return),ed(m);break;case 1:Rl(m,m.return);var b=m.stateNode;typeof b.componentWillUnmount=="function"&&__(m,m.return,b),ed(m);break;case 27:Bp(m.stateNode);case 26:case 5:Rl(m,m.return),ed(m);break;case 22:m.memoizedState===null&&ed(m);break;case 30:ed(m);break;default:ed(m)}h=h.sibling}}function el(h,m,b){for(b=b&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var k=m.alternate,D=h,U=m,re=U.flags;switch(U.tag){case 0:case 11:case 15:el(D,U,b),Ep(4,U);break;case 1:if(el(D,U,b),k=U,D=k.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(ft){ps(k,k.return,ft)}if(k=U,D=k.updateQueue,D!==null){var be=k.stateNode;try{var $e=D.shared.hiddenCallbacks;if($e!==null)for(D.shared.hiddenCallbacks=null,D=0;D<$e.length;D++)_p($e[D],be)}catch(ft){ps(k,k.return,ft)}}b&&re&64&&Qy(U),Gd(U,U.return);break;case 27:nx(U);case 26:case 5:el(D,U,b),b&&k===null&&re&4&&Jy(U),Gd(U,U.return);break;case 12:el(D,U,b);break;case 13:el(D,U,b),b&&re&4&&cf(D,U);break;case 22:U.memoizedState===null&&el(D,U,b),Gd(U,U.return);break;case 30:break;default:el(D,U,b)}m=m.sibling}}function Np(h,m){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&Zo(b))}function td(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Zo(h))}function Do(h,m,b,k){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Wd(h,m,b,k),m=m.sibling}function Wd(h,m,b,k){var D=m.flags;switch(m.tag){case 0:case 11:case 15:Do(h,m,b,k),D&2048&&Ep(9,m);break;case 1:Do(h,m,b,k);break;case 3:Do(h,m,b,k),D&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Zo(h)));break;case 12:if(D&2048){Do(h,m,b,k),h=m.stateNode;try{var U=m.memoizedProps,re=U.id,be=U.onPostCommit;typeof be=="function"&&be(re,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch($e){ps(m,m.return,$e)}}else Do(h,m,b,k);break;case 13:Do(h,m,b,k);break;case 23:break;case 22:U=m.stateNode,re=m.alternate,m.memoizedState!==null?U._visibility&2?Do(h,m,b,k):Ap(h,m):U._visibility&2?Do(h,m,b,k):(U._visibility|=2,lc(h,m,b,k,(m.subtreeFlags&10256)!==0)),D&2048&&Np(re,m);break;case 24:Do(h,m,b,k),D&2048&&td(m.alternate,m);break;default:Do(h,m,b,k)}}function lc(h,m,b,k,D){for(D=D&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var U=h,re=m,be=b,$e=k,ft=re.flags;switch(re.tag){case 0:case 11:case 15:lc(U,re,be,$e,D),Ep(8,re);break;case 23:break;case 22:var Ht=re.stateNode;re.memoizedState!==null?Ht._visibility&2?lc(U,re,be,$e,D):Ap(U,re):(Ht._visibility|=2,lc(U,re,be,$e,D)),D&&ft&2048&&Np(re.alternate,re);break;case 24:lc(U,re,be,$e,D),D&&ft&2048&&td(re.alternate,re);break;default:lc(U,re,be,$e,D)}m=m.sibling}}function Ap(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var b=h,k=m,D=k.flags;switch(k.tag){case 22:Ap(b,k),D&2048&&Np(k.alternate,k);break;case 24:Ap(b,k),D&2048&&td(k.alternate,k);break;default:Ap(b,k)}m=m.sibling}}var df=8192;function tl(h){if(h.subtreeFlags&df)for(h=h.child;h!==null;)j_(h),h=h.sibling}function j_(h){switch(h.tag){case 26:tl(h),h.flags&df&&h.memoizedState!==null&&_w(Jo,h.memoizedState,h.memoizedProps);break;case 5:tl(h);break;case 3:case 4:var m=Jo;Jo=ih(h.stateNode.containerInfo),tl(h),Jo=m;break;case 22:h.memoizedState===null&&(m=h.alternate,m!==null&&m.memoizedState!==null?(m=df,df=16777216,tl(h),df=m):tl(h));break;default:tl(h)}}function rx(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function Zc(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var b=0;b<m.length;b++){var k=m[b];Vr=k,ax(k,h)}rx(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)ig(h),h=h.sibling}function ig(h){switch(h.tag){case 0:case 11:case 15:Zc(h),h.flags&2048&&Ju(9,h,h.return);break;case 3:Zc(h);break;case 12:Zc(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,Pp(h)):Zc(h);break;default:Zc(h)}}function Pp(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var b=0;b<m.length;b++){var k=m[b];Vr=k,ax(k,h)}rx(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:Ju(8,m,m.return),Pp(m);break;case 22:b=m.stateNode,b._visibility&2&&(b._visibility&=-3,Pp(m));break;default:Pp(m)}h=h.sibling}}function ax(h,m){for(;Vr!==null;){var b=Vr;switch(b.tag){case 0:case 11:case 15:Ju(8,b,m);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var k=b.memoizedState.cachePool.pool;k!=null&&k.refCount++}break;case 24:Zo(b.memoizedState.cache)}if(k=b.child,k!==null)k.return=b,Vr=k;else e:for(b=h;Vr!==null;){k=Vr;var D=k.sibling,U=k.return;if(S_(k),k===b){Vr=null;break e}if(D!==null){D.return=U,Vr=D;break e}Vr=U}}}var rw={getCacheForType:function(h){var m=gr(Js),b=m.data.get(h);return b===void 0&&(b=h(),m.data.set(h,b)),b}},aw=typeof WeakMap=="function"?WeakMap:Map,ls=0,Es=null,Ai=null,Ci=0,cs=0,zo=null,Yc=!1,hf=!1,sg=!1,Xc=0,qs=0,nl=0,Kc=0,ox=0,il=0,Zd=0,ff=null,oo=null,lx=!1,Yd=0,Rp=1/0,rg=null,nd=null,ra=0,id=null,pf=null,Xd=0,Dp=0,ag=null,cx=null,mf=0,ux=null;function Ca(){if((ls&2)!==0&&Ci!==0)return Ci&-Ci;if(De.T!==null){var h=za;return h!==0?h:mx()}return Gi()}function C_(){il===0&&(il=(Ci&536870912)===0||Ni?qt():536870912);var h=Ki.current;return h!==null&&(h.flags|=32),il}function lo(h,m,b){(h===Es&&(cs===2||cs===9)||h.cancelPendingCommit!==null)&&(cc(h,0),Qc(h,Ci,il,!1)),Tn(h,b),((ls&2)===0||h!==Es)&&(h===Es&&((ls&2)===0&&(Kc|=b),qs===4&&Qc(h,Ci,il,!1)),sl(h))}function T_(h,m,b){if((ls&6)!==0)throw Error(i(327));var k=!b&&(m&124)===0&&(m&h.expiredLanes)===0||Je(h,m),D=k?E_(h,m):zp(h,m,!0),U=k;do{if(D===0){hf&&!k&&Qc(h,m,0,!1);break}else{if(b=h.current.alternate,U&&!ow(b)){D=zp(h,m,!1),U=!1;continue}if(D===2){if(U=m,h.errorRecoveryDisabledLanes&U)var re=0;else re=h.pendingLanes&-536870913,re=re!==0?re:re&536870912?536870912:0;if(re!==0){m=re;e:{var be=h;D=ff;var $e=be.current.memoizedState.isDehydrated;if($e&&(cc(be,re).flags|=256),re=zp(be,re,!1),re!==2){if(sg&&!$e){be.errorRecoveryDisabledLanes|=U,Kc|=U,D=4;break e}U=oo,oo=D,U!==null&&(oo===null?oo=U:oo.push.apply(oo,U))}D=re}if(U=!1,D!==2)continue}}if(D===1){cc(h,0),Qc(h,m,0,!0);break}e:{switch(k=h,U=D,U){case 0:case 1:throw Error(i(345));case 4:if((m&4194048)!==m)break;case 6:Qc(k,m,il,!Yc);break e;case 2:oo=null;break;case 3:case 5:break;default:throw Error(i(329))}if((m&62914560)===m&&(D=Yd+300-Hn(),10<D)){if(Qc(k,m,il,!Yc),nt(k,0,!0)!==0)break e;k.timeoutHandle=co(k_.bind(null,k,b,oo,rg,lx,m,il,Kc,Zd,Yc,U,2,-0,0),D);break e}k_(k,b,oo,rg,lx,m,il,Kc,Zd,Yc,U,0,-0,0)}}break}while(!0);sl(h)}function k_(h,m,b,k,D,U,re,be,$e,ft,Ht,Qt,Tt,zt){if(h.timeoutHandle=-1,Qt=m.subtreeFlags,(Qt&8192||(Qt&16785408)===16785408)&&(oh={stylesheets:null,count:0,unsuspend:kx},j_(m),Qt=f(),Qt!==null)){h.cancelPendingCommit=Qt(P_.bind(null,h,m,U,b,k,D,re,be,$e,Ht,1,Tt,zt)),Qc(h,U,re,!ft);return}P_(h,m,U,b,k,D,re,be,$e)}function ow(h){for(var m=h;;){var b=m.tag;if((b===0||b===11||b===15)&&m.flags&16384&&(b=m.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var k=0;k<b.length;k++){var D=b[k],U=D.getSnapshot;D=D.value;try{if(!pa(U(),D))return!1}catch(re){return!1}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Qc(h,m,b,k){m&=~ox,m&=~Kc,h.suspendedLanes|=m,h.pingedLanes&=~m,k&&(h.warmLanes|=m),k=h.expirationTimes;for(var D=m;0<D;){var U=31-ke(D),re=1<<U;k[U]=-1,D&=~re}b!==0&&wt(h,b,m)}function og(){return(ls&6)===0?(Jd(0),!1):!0}function dx(){if(Ai!==null){if(cs===0)var h=Ai.return;else h=Ai,Mo=Wo=null,jp(h),ro=null,sc=0,h=Ai;for(;h!==null;)Ky(h.alternate,h),h=h.return;Ai=null}}function cc(h,m){var b=h.timeoutHandle;b!==-1&&(h.timeoutHandle=-1,wf(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),dx(),Es=h,Ai=b=Eo(h.current,null),Ci=m,cs=0,zo=null,Yc=!1,hf=Je(h,m),sg=!1,Zd=il=ox=Kc=nl=qs=0,oo=ff=null,lx=!1,(m&8)!==0&&(m|=m&32);var k=h.entangledLanes;if(k!==0)for(h=h.entanglements,k&=m;0<k;){var D=31-ke(k),U=1<<D;m|=h[D],k&=~U}return Xc=m,Hl(),b}function cr(h,m){mi=null,De.H=yr,m===Tl||m===Yl?(m=$u(),cs=3):m===xp?(m=$u(),cs=4):cs=m===Cp?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,zo=m,Ai===null&&(qs=1,rc(h,ga(m,h.current)))}function lg(){var h=De.H;return De.H=yr,h===null?yr:h}function hx(){var h=De.A;return De.A=rw,h}function cg(){qs=4,Yc||(Ci&4194048)!==Ci&&Ki.current!==null||(hf=!0),(nl&134217727)===0&&(Kc&134217727)===0||Es===null||Qc(Es,Ci,il,!1)}function zp(h,m,b){var k=ls;ls|=2;var D=lg(),U=hx();(Es!==h||Ci!==m)&&(rg=null,cc(h,m)),m=!1;var re=qs;e:do try{if(cs!==0&&Ai!==null){var be=Ai,$e=zo;switch(cs){case 8:dx(),re=6;break e;case 3:case 2:case 9:case 6:Ki.current===null&&(m=!0);var ft=cs;if(cs=0,zo=null,yf(h,be,$e,ft),b&&hf){re=0;break e}break;default:ft=cs,cs=0,zo=null,yf(h,be,$e,ft)}}gf(),re=qs;break}catch(Ht){cr(h,Ht)}while(!0);return m&&h.shellSuspendCounter++,Mo=Wo=null,ls=k,De.H=D,De.A=U,Ai===null&&(Es=null,Ci=0,Hl()),re}function gf(){for(;Ai!==null;)M_(Ai)}function E_(h,m){var b=ls;ls|=2;var k=lg(),D=hx();Es!==h||Ci!==m?(rg=null,Rp=Hn()+500,cc(h,m)):hf=Je(h,m);e:do try{if(cs!==0&&Ai!==null){m=Ai;var U=zo;t:switch(cs){case 1:cs=0,zo=null,yf(h,m,U,1);break;case 2:case 9:if(xn(U)){cs=0,zo=null,N_(m);break}m=function(){cs!==2&&cs!==9||Es!==h||(cs=7),sl(h)},U.then(m,m);break e;case 3:cs=7;break e;case 4:cs=5;break e;case 7:xn(U)?(cs=0,zo=null,N_(m)):(cs=0,zo=null,yf(h,m,U,7));break;case 5:var re=null;switch(Ai.tag){case 26:re=Ai.memoizedState;case 5:case 27:var be=Ai;if(!re||Pg(re)){cs=0,zo=null;var $e=be.sibling;if($e!==null)Ai=$e;else{var ft=be.return;ft!==null?(Ai=ft,ug(ft)):Ai=null}break t}}cs=0,zo=null,yf(h,m,U,5);break;case 6:cs=0,zo=null,yf(h,m,U,6);break;case 8:dx(),qs=6;break e;default:throw Error(i(462))}}lw();break}catch(Ht){cr(h,Ht)}while(!0);return Mo=Wo=null,De.H=k,De.A=D,ls=b,Ai!==null?0:(Es=null,Ci=0,Hl(),qs)}function lw(){for(;Ai!==null&&!_n();)M_(Ai)}function M_(h){var m=tg(h.alternate,h,Xc);h.memoizedProps=h.pendingProps,m===null?ug(h):Ai=m}function N_(h){var m=h,b=m.alternate;switch(m.tag){case 15:case 0:m=qd(b,m,m.pendingProps,m.type,void 0,Ci);break;case 11:m=qd(b,m,m.pendingProps,m.type.render,m.ref,Ci);break;case 5:jp(m);default:Ky(b,m),m=Ai=Iu(m,Xc),m=tg(b,m,Xc)}h.memoizedProps=h.pendingProps,m===null?ug(h):Ai=m}function yf(h,m,b,k){Mo=Wo=null,jp(m),ro=null,sc=0;var D=m.return;try{if(m_(h,D,m,b,Ci)){qs=1,rc(h,ga(b,h.current)),Ai=null;return}}catch(U){if(D!==null)throw Ai=D,U;qs=1,rc(h,ga(b,h.current)),Ai=null;return}m.flags&32768?(Ni||k===1?h=!0:hf||(Ci&536870912)!==0?h=!1:(Yc=h=!0,(k===2||k===9||k===3||k===6)&&(k=Ki.current,k!==null&&k.tag===13&&(k.flags|=16384))),A_(m,h)):ug(m)}function ug(h){var m=h;do{if((m.flags&32768)!==0){A_(m,Yc);return}h=m.return;var b=Xy(m.alternate,m,Xc);if(b!==null){Ai=b;return}if(m=m.sibling,m!==null){Ai=m;return}Ai=m=h}while(m!==null);qs===0&&(qs=5)}function A_(h,m){do{var b=nw(h.alternate,h);if(b!==null){b.flags&=32767,Ai=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!m&&(h=h.sibling,h!==null)){Ai=h;return}Ai=h=b}while(h!==null);qs=6,Ai=null}function P_(h,m,b,k,D,U,re,be,$e){h.cancelPendingCommit=null;do dg();while(ra!==0);if((ls&6)!==0)throw Error(i(327));if(m!==null){if(m===h.current)throw Error(i(177));if(U=m.lanes|m.childLanes,U|=zu,ct(h,b,U,re,be,$e),h===Es&&(Ai=Es=null,Ci=0),pf=m,id=h,Xd=b,Dp=U,ag=D,cx=k,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,cw(We,function(){return fx(),null})):(h.callbackNode=null,h.callbackPriority=0),k=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||k){k=De.T,De.T=null,D=Qe.p,Qe.p=2,re=ls,ls|=4;try{iw(h,m,b)}finally{ls=re,Qe.p=D,De.T=k}}ra=1,R_(),D_(),z_()}}function R_(){if(ra===1){ra=0;var h=id,m=pf,b=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||b){b=De.T,De.T=null;var k=Qe.p;Qe.p=2;var D=ls;ls|=4;try{Mp(m,h);var U=Sg,re=Uh(h.containerInfo),be=U.focusedElem,$e=U.selectionRange;if(re!==be&&be&&be.ownerDocument&&Uo(be.ownerDocument.documentElement,be)){if($e!==null&&Md(be)){var ft=$e.start,Ht=$e.end;if(Ht===void 0&&(Ht=ft),"selectionStart"in be)be.selectionStart=ft,be.selectionEnd=Math.min(Ht,be.value.length);else{var Qt=be.ownerDocument||document,Tt=Qt&&Qt.defaultView||window;if(Tt.getSelection){var zt=Tt.getSelection(),ii=be.textContent.length,Zn=Math.min($e.start,ii),$i=$e.end===void 0?Zn:Math.min($e.end,ii);!zt.extend&&Zn>$i&&(re=$i,$i=Zn,Zn=re);var mt=Ed(be,Zn),st=Ed(be,$i);if(mt&&st&&(zt.rangeCount!==1||zt.anchorNode!==mt.node||zt.anchorOffset!==mt.offset||zt.focusNode!==st.node||zt.focusOffset!==st.offset)){var vt=Qt.createRange();vt.setStart(mt.node,mt.offset),zt.removeAllRanges(),Zn>$i?(zt.addRange(vt),zt.extend(st.node,st.offset)):(vt.setEnd(st.node,st.offset),zt.addRange(vt))}}}}for(Qt=[],zt=be;zt=zt.parentNode;)zt.nodeType===1&&Qt.push({element:zt,left:zt.scrollLeft,top:zt.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<Qt.length;be++){var Kt=Qt[be];Kt.element.scrollLeft=Kt.left,Kt.element.scrollTop=Kt.top}}oe=!!wg,Sg=wg=null}finally{ls=D,Qe.p=k,De.T=b}}h.current=m,ra=2}}function D_(){if(ra===2){ra=0;var h=id,m=pf,b=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||b){b=De.T,De.T=null;var k=Qe.p;Qe.p=2;var D=ls;ls|=4;try{w_(h,m.alternate,m)}finally{ls=D,Qe.p=k,De.T=b}}ra=3}}function z_(){if(ra===4||ra===3){ra=0,Yn();var h=id,m=pf,b=Xd,k=cx;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?ra=5:(ra=0,pf=id=null,I_(h,h.pendingLanes));var D=h.pendingLanes;if(D===0&&(nd=null),vn(b),m=m.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(yn,m,void 0,(m.current.flags&128)===128)}catch($e){}if(k!==null){m=De.T,D=Qe.p,Qe.p=2,De.T=null;try{for(var U=h.onRecoverableError,re=0;re<k.length;re++){var be=k[re];U(be.value,{componentStack:be.stack})}}finally{De.T=m,Qe.p=D}}(Xd&3)!==0&&dg(),sl(h),D=h.pendingLanes,(b&4194090)!==0&&(D&42)!==0?h===ux?mf++:(mf=0,ux=h):mf=0,Jd(0)}}function I_(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,Zo(m)))}function dg(h){return R_(),D_(),z_(),fx()}function fx(){if(ra!==5)return!1;var h=id,m=Dp;Dp=0;var b=vn(Xd),k=De.T,D=Qe.p;try{Qe.p=32>b?32:b,De.T=null,b=ag,ag=null;var U=id,re=Xd;if(ra=0,pf=id=null,Xd=0,(ls&6)!==0)throw Error(i(331));var be=ls;if(ls|=4,ig(U.current),Wd(U,U.current,re,b),ls=be,Jd(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(yn,U)}catch($e){}return!0}finally{Qe.p=D,De.T=k,I_(h,m)}}function hg(h,m,b){m=ga(b,m),m=Zm(h.stateNode,m,2),h=Ao(h,m,2),h!==null&&(Tn(h,2),sl(h))}function ps(h,m,b){if(h.tag===3)hg(h,h,b);else for(;m!==null;){if(m.tag===3){hg(m,h,b);break}else if(m.tag===1){var k=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(nd===null||!nd.has(k))){h=ga(b,h),b=p_(2),k=Ao(m,b,2),k!==null&&(Ym(b,k,m,h),Tn(k,2),sl(k));break}}m=m.return}}function uc(h,m,b){var k=h.pingCache;if(k===null){k=h.pingCache=new aw;var D=new Set;k.set(m,D)}else D=k.get(m),D===void 0&&(D=new Set,k.set(m,D));D.has(b)||(sg=!0,D.add(b),h=Ip.bind(null,h,m,b),m.then(h,h))}function Ip(h,m,b){var k=h.pingCache;k!==null&&k.delete(m),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,Es===h&&(Ci&b)===b&&(qs===4||qs===3&&(Ci&62914560)===Ci&&300>Hn()-Yd?(ls&2)===0&&cc(h,0):ox|=b,Zd===Ci&&(Zd=0)),sl(h)}function Kd(h,m){m===0&&(m=Ft()),h=ko(h,m),h!==null&&(Tn(h,m),sl(h))}function fg(h){var m=h.memoizedState,b=0;m!==null&&(b=m.retryLane),Kd(h,b)}function pg(h,m){var b=0;switch(h.tag){case 13:var k=h.stateNode,D=h.memoizedState;D!==null&&(b=D.retryLane);break;case 19:k=h.stateNode;break;case 22:k=h.stateNode._retryCache;break;default:throw Error(i(314))}k!==null&&k.delete(m),Kd(h,b)}function cw(h,m){return Ot(h,m)}var mg=null,Qd=null,gg=!1,yg=!1,xg=!1,sd=0;function sl(h){h!==Qd&&h.next===null&&(Qd===null?mg=Qd=h:Qd=Qd.next=h),yg=!0,gg||(gg=!0,dw())}function Jd(h,m){if(!xg&&yg){xg=!0;do for(var b=!1,k=mg;k!==null;){if(h!==0){var D=k.pendingLanes;if(D===0)var U=0;else{var re=k.suspendedLanes,be=k.pingedLanes;U=(1<<31-ke(42|h)+1)-1,U&=D&~(re&~be),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(b=!0,L_(k,U))}else U=Ci,U=nt(k,k===Es?U:0,k.cancelPendingCommit!==null||k.timeoutHandle!==-1),(U&3)===0||Je(k,U)||(b=!0,L_(k,U));k=k.next}while(b);xg=!1}}function uw(){px()}function px(){yg=gg=!1;var h=0;sd!==0&&(q_()&&(h=sd),sd=0);for(var m=Hn(),b=null,k=mg;k!==null;){var D=k.next,U=O_(k,m);U===0?(k.next=null,b===null?mg=D:b.next=D,D===null&&(Qd=b)):(b=k,(h!==0||(U&3)!==0)&&(yg=!0)),k=D}Jd(h)}function O_(h,m){for(var b=h.suspendedLanes,k=h.pingedLanes,D=h.expirationTimes,U=h.pendingLanes&-62914561;0<U;){var re=31-ke(U),be=1<<re,$e=D[re];$e===-1?((be&b)===0||(be&k)!==0)&&(D[re]=jt(be,m)):$e<=m&&(h.expiredLanes|=be),U&=~be}if(m=Es,b=Ci,b=nt(h,h===m?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),k=h.callbackNode,b===0||h===m&&(cs===2||cs===9)||h.cancelPendingCommit!==null)return k!==null&&k!==null&&en(k),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||Je(h,b)){if(m=b&-b,m===h.callbackPriority)return m;switch(k!==null&&en(k),vn(b)){case 2:case 8:b=Ue;break;case 32:b=We;break;case 268435456:b=Bt;break;default:b=We}return k=F_.bind(null,h),b=Ot(b,k),h.callbackPriority=m,h.callbackNode=b,m}return k!==null&&k!==null&&en(k),h.callbackPriority=2,h.callbackNode=null,2}function F_(h,m){if(ra!==0&&ra!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(dg()&&h.callbackNode!==b)return null;var k=Ci;return k=nt(h,h===Es?k:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),k===0?null:(T_(h,k,m),O_(h,Hn()),h.callbackNode!=null&&h.callbackNode===b?F_.bind(null,h):null)}function L_(h,m){if(dg())return null;T_(h,m,!0)}function dw(){nh(function(){(ls&6)!==0?Ot(on,uw):px()})}function mx(){return sd===0&&(sd=qt()),sd}function gx(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Ga(""+h)}function yx(h,m){var b=m.ownerDocument.createElement("input");return b.name=m.name,b.value=m.value,h.id&&b.setAttribute("form",h.id),m.parentNode.insertBefore(b,m),h=new FormData(h),b.parentNode.removeChild(b),h}function Jc(h,m,b,k,D){if(m==="submit"&&b&&b.stateNode===D){var U=gx((D[Bn]||null).action),re=k.submitter;re&&(m=(m=re[Bn]||null)?gx(m.formAction):re.getAttribute("formAction"),m!==null&&(U=m,re=null));var be=new _l("action","action",null,k,D);h.push({event:be,listeners:[{instance:null,listener:function(){if(k.defaultPrevented){if(sd!==0){var $e=re?yx(D,re):new FormData(D);rn(b,{pending:!0,data:$e,method:D.method,action:U},null,$e)}}else typeof U=="function"&&(be.preventDefault(),$e=re?yx(D,re):new FormData(D),rn(b,{pending:!0,data:$e,method:D.method,action:U},U,$e))},currentTarget:D}]})}}for(var dc=0;dc<ma.length;dc++){var _g=ma[dc],xx=_g.toLowerCase(),hw=_g[0].toUpperCase()+_g.slice(1);Ya(xx,"on"+hw)}Ya(dp,"onAnimationEnd"),Ya(Pd,"onAnimationIteration"),Ya(Rd,"onAnimationStart"),Ya("dblclick","onDoubleClick"),Ya("focusin","onFocus"),Ya("focusout","onBlur"),Ya($h,"onTransitionRun"),Ya(hp,"onTransitionStart"),Ya(Pc,"onTransitionCancel"),Ya(Du,"onTransitionEnd"),Rr("onMouseEnter",["mouseout","mouseover"]),Rr("onMouseLeave",["mouseout","mouseover"]),Rr("onPointerEnter",["pointerout","pointerover"]),Rr("onPointerLeave",["pointerout","pointerover"]),Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_x=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rd));function B_(h,m){m=(m&4)!==0;for(var b=0;b<h.length;b++){var k=h[b],D=k.event;k=k.listeners;e:{var U=void 0;if(m)for(var re=k.length-1;0<=re;re--){var be=k[re],$e=be.instance,ft=be.currentTarget;if(be=be.listener,$e!==U&&D.isPropagationStopped())break e;U=be,D.currentTarget=ft;try{U(D)}catch(Ht){Yu(Ht)}D.currentTarget=null,U=$e}else for(re=0;re<k.length;re++){if(be=k[re],$e=be.instance,ft=be.currentTarget,be=be.listener,$e!==U&&D.isPropagationStopped())break e;U=be,D.currentTarget=ft;try{U(D)}catch(Ht){Yu(Ht)}D.currentTarget=null,U=$e}}}}function Ti(h,m){var b=m[Xt];b===void 0&&(b=m[Xt]=new Set);var k=h+"__bubble";b.has(k)||(bx(m,h,2,!1),b.add(k))}function Op(h,m,b){var k=0;m&&(k|=4),bx(b,h,k,m)}var eu="_reactListening"+Math.random().toString(36).slice(2);function bg(h){if(!h[eu]){h[eu]=!0,Xr.forEach(function(b){b!=="selectionchange"&&(_x.has(b)||Op(b,!1,h),Op(b,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[eu]||(m[eu]=!0,Op("selectionchange",!1,m))}}function bx(h,m,b,k){switch(Ze(m)){case 2:var D=de;break;case 8:D=xe;break;default:D=ve}b=D.bind(null,m,b,h),D=void 0,!jo||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(D=!0),k?D!==void 0?h.addEventListener(m,b,{capture:!0,passive:D}):h.addEventListener(m,b,!0):D!==void 0?h.addEventListener(m,b,{passive:D}):h.addEventListener(m,b,!1)}function Fp(h,m,b,k,D){var U=k;if((m&1)===0&&(m&2)===0&&k!==null)e:for(;;){if(k===null)return;var re=k.tag;if(re===3||re===4){var be=k.stateNode.containerInfo;if(be===D)break;if(re===4)for(re=k.return;re!==null;){var $e=re.tag;if(($e===3||$e===4)&&re.stateNode.containerInfo===D)return;re=re.return}for(;be!==null;){if(re=tn(be),re===null)return;if($e=re.tag,$e===5||$e===6||$e===26||$e===27){k=U=re;continue e}be=be.parentNode}}k=k.return}Fs(function(){var ft=U,Ht=So(b),Qt=[];e:{var Tt=Rc.get(h);if(Tt!==void 0){var zt=_l,ii=h;switch(h){case"keypress":if(Zi(b)===0)break e;case"keydown":case"keyup":zt=Wa;break;case"focusin":ii="focus",zt=kn;break;case"focusout":ii="blur",zt=kn;break;case"beforeblur":case"afterblur":zt=kn;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":zt=ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":zt=Ct;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":zt=Td;break;case dp:case Pd:case Rd:zt=Cn;break;case Du:zt=Oy;break;case"scroll":case"scrollend":zt=js;break;case"wheel":zt=Fy;break;case"copy":case"cut":case"paste":zt=oi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":zt=fa;break;case"toggle":case"beforetoggle":zt=np}var Zn=(m&4)!==0,$i=!Zn&&(h==="scroll"||h==="scrollend"),mt=Zn?Tt!==null?Tt+"Capture":null:Tt;Zn=[];for(var st=ft,vt;st!==null;){var Kt=st;if(vt=Kt.stateNode,Kt=Kt.tag,Kt!==5&&Kt!==26&&Kt!==27||vt===null||mt===null||(Kt=Ss(st,mt),Kt!=null&&Zn.push(xf(st,Kt,vt))),$i)break;st=st.return}0<Zn.length&&(Tt=new zt(Tt,ii,null,b,Ht),Qt.push({event:Tt,listeners:Zn}))}}if((m&7)===0){e:{if(Tt=h==="mouseover"||h==="pointerover",zt=h==="mouseout"||h==="pointerout",Tt&&b!==ui&&(ii=b.relatedTarget||b.fromElement)&&(tn(ii)||ii[yi]))break e;if((zt||Tt)&&(Tt=Ht.window===Ht?Ht:(Tt=Ht.ownerDocument)?Tt.defaultView||Tt.parentWindow:window,zt?(ii=b.relatedTarget||b.toElement,zt=ft,ii=ii?tn(ii):null,ii!==null&&($i=u(ii),Zn=ii.tag,ii!==$i||Zn!==5&&Zn!==27&&Zn!==6)&&(ii=null)):(zt=null,ii=ft),zt!==ii)){if(Zn=ht,Kt="onMouseLeave",mt="onMouseEnter",st="mouse",(h==="pointerout"||h==="pointerover")&&(Zn=fa,Kt="onPointerLeave",mt="onPointerEnter",st="pointer"),$i=zt==null?Tt:On(zt),vt=ii==null?Tt:On(ii),Tt=new Zn(Kt,st+"leave",zt,b,Ht),Tt.target=$i,Tt.relatedTarget=vt,Kt=null,tn(Ht)===ft&&(Zn=new Zn(mt,st+"enter",ii,b,Ht),Zn.target=vt,Zn.relatedTarget=$i,Kt=Zn),$i=Kt,zt&&ii)t:{for(Zn=zt,mt=ii,st=0,vt=Zn;vt;vt=th(vt))st++;for(vt=0,Kt=mt;Kt;Kt=th(Kt))vt++;for(;0<st-vt;)Zn=th(Zn),st--;for(;0<vt-st;)mt=th(mt),vt--;for(;st--;){if(Zn===mt||mt!==null&&Zn===mt.alternate)break t;Zn=th(Zn),mt=th(mt)}Zn=null}else Zn=null;zt!==null&&V_(Qt,Tt,zt,Zn,!1),ii!==null&&$i!==null&&V_(Qt,$i,ii,Zn,!0)}}e:{if(Tt=ft?On(ft):window,zt=Tt.nodeName&&Tt.nodeName.toLowerCase(),zt==="select"||zt==="input"&&Tt.type==="file")var In=Pu;else if(Fh(Tt))if(rp)In=lp;else{In=By;var ki=Bh}else zt=Tt.nodeName,!zt||zt.toLowerCase()!=="input"||Tt.type!=="checkbox"&&Tt.type!=="radio"?ft&&ci(ft.elementType)&&(In=Pu):In=Vm;if(In&&(In=In(h,ft))){sp(Qt,In,b,Ht);break e}ki&&ki(h,Tt,ft),h==="focusout"&&ft&&Tt.type==="number"&&ft.memoizedProps.value!=null&&ku(Tt,"number",Tt.value)}switch(ki=ft?On(ft):window,h){case"focusin":(Fh(ki)||ki.contentEditable==="true")&&(Mc=ki,Nd=ft,To=null);break;case"focusout":To=Nd=Mc=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,$m(Qt,b,Ht);break;case"selectionchange":if(zi)break;case"keydown":case"keyup":$m(Qt,b,Ht)}var $n;if(Ul)e:{switch(h){case"compositionstart":var si="onCompositionStart";break e;case"compositionend":si="onCompositionEnd";break e;case"compositionupdate":si="onCompositionUpdate";break e}si=void 0}else bl?Mu(h,b)&&(si="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(si="onCompositionStart");si&&(ip&&b.locale!=="ko"&&(bl||si!=="onCompositionStart"?si==="onCompositionEnd"&&bl&&($n=Mi()):(ys=Ht,rs="value"in ys?ys.value:ys.textContent,bl=!0)),ki=eh(ft,si),0<ki.length&&(si=new Gn(si,h,null,b,Ht),Qt.push({event:si,listeners:ki}),$n?si.data=$n:($n=Fm(b),$n!==null&&(si.data=$n)))),($n=Co?Ly(h,b):Nu(h,b))&&(si=eh(ft,"onBeforeInput"),0<si.length&&(ki=new Gn("onBeforeInput","beforeinput",null,b,Ht),Qt.push({event:ki,listeners:si}),ki.data=$n)),Jc(Qt,h,ft,b,Ht)}B_(Qt,m)})}function xf(h,m,b){return{instance:h,listener:m,currentTarget:b}}function eh(h,m){for(var b=m+"Capture",k=[];h!==null;){var D=h,U=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||U===null||(D=Ss(h,b),D!=null&&k.unshift(xf(h,D,U)),D=Ss(h,m),D!=null&&k.push(xf(h,D,U))),h.tag===3)return k;h=h.return}return[]}function th(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function V_(h,m,b,k,D){for(var U=m._reactName,re=[];b!==null&&b!==k;){var be=b,$e=be.alternate,ft=be.stateNode;if(be=be.tag,$e!==null&&$e===k)break;be!==5&&be!==26&&be!==27||ft===null||($e=ft,D?(ft=Ss(b,U),ft!=null&&re.unshift(xf(b,ft,$e))):D||(ft=Ss(b,U),ft!=null&&re.push(xf(b,ft,$e)))),b=b.return}re.length!==0&&h.push({event:m,listeners:re})}var fw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function U_(h){return(typeof h=="string"?h:""+h).replace(fw,`
`).replace(pw,"")}function $_(h,m){return m=U_(m),U_(h)===m}function _f(){}function Oi(h,m,b,k,D,U){switch(b){case"children":typeof k=="string"?m==="body"||m==="textarea"&&k===""||qa(h,k):(typeof k=="number"||typeof k=="bigint")&&m!=="body"&&qa(h,""+k);break;case"className":ts(h,"class",k);break;case"tabIndex":ts(h,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":ts(h,b,k);break;case"style":or(h,k,U);break;case"data":if(m!=="object"){ts(h,"data",k);break}case"src":case"href":if(k===""&&(m!=="a"||b!=="href")){h.removeAttribute(b);break}if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(b);break}k=Ga(""+k),h.setAttribute(b,k);break;case"action":case"formAction":if(typeof k=="function"){h.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(b==="formAction"?(m!=="input"&&Oi(h,m,"name",D.name,D,null),Oi(h,m,"formEncType",D.formEncType,D,null),Oi(h,m,"formMethod",D.formMethod,D,null),Oi(h,m,"formTarget",D.formTarget,D,null)):(Oi(h,m,"encType",D.encType,D,null),Oi(h,m,"method",D.method,D,null),Oi(h,m,"target",D.target,D,null)));if(k==null||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(b);break}k=Ga(""+k),h.setAttribute(b,k);break;case"onClick":k!=null&&(h.onclick=_f);break;case"onScroll":k!=null&&Ti("scroll",h);break;case"onScrollEnd":k!=null&&Ti("scrollend",h);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(i(61));if(b=k.__html,b!=null){if(D.children!=null)throw Error(i(60));h.innerHTML=b}}break;case"multiple":h.multiple=k&&typeof k!="function"&&typeof k!="symbol";break;case"muted":h.muted=k&&typeof k!="function"&&typeof k!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(k==null||typeof k=="function"||typeof k=="boolean"||typeof k=="symbol"){h.removeAttribute("xlink:href");break}b=Ga(""+k),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(b,""+k):h.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(b,""):h.removeAttribute(b);break;case"capture":case"download":k===!0?h.setAttribute(b,""):k!==!1&&k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(b,k):h.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":k!=null&&typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k?h.setAttribute(b,k):h.removeAttribute(b);break;case"rowSpan":case"start":k==null||typeof k=="function"||typeof k=="symbol"||isNaN(k)?h.removeAttribute(b):h.setAttribute(b,k);break;case"popover":Ti("beforetoggle",h),Ti("toggle",h),Di(h,"popover",k);break;case"xlinkActuate":ti(h,"http://www.w3.org/1999/xlink","xlink:actuate",k);break;case"xlinkArcrole":ti(h,"http://www.w3.org/1999/xlink","xlink:arcrole",k);break;case"xlinkRole":ti(h,"http://www.w3.org/1999/xlink","xlink:role",k);break;case"xlinkShow":ti(h,"http://www.w3.org/1999/xlink","xlink:show",k);break;case"xlinkTitle":ti(h,"http://www.w3.org/1999/xlink","xlink:title",k);break;case"xlinkType":ti(h,"http://www.w3.org/1999/xlink","xlink:type",k);break;case"xmlBase":ti(h,"http://www.w3.org/XML/1998/namespace","xml:base",k);break;case"xmlLang":ti(h,"http://www.w3.org/XML/1998/namespace","xml:lang",k);break;case"xmlSpace":ti(h,"http://www.w3.org/XML/1998/namespace","xml:space",k);break;case"is":Di(h,"is",k);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=wo.get(b)||b,Di(h,b,k))}}function vg(h,m,b,k,D,U){switch(b){case"style":or(h,k,U);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(i(61));if(b=k.__html,b!=null){if(D.children!=null)throw Error(i(60));h.innerHTML=b}}break;case"children":typeof k=="string"?qa(h,k):(typeof k=="number"||typeof k=="bigint")&&qa(h,""+k);break;case"onScroll":k!=null&&Ti("scroll",h);break;case"onScrollEnd":k!=null&&Ti("scrollend",h);break;case"onClick":k!=null&&(h.onclick=_f);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vn.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(D=b.endsWith("Capture"),m=b.slice(2,D?b.length-7:void 0),U=h[Bn]||null,U=U!=null?U[b]:null,typeof U=="function"&&h.removeEventListener(m,U,D),typeof k=="function")){typeof U!="function"&&U!==null&&(b in h?h[b]=null:h.hasAttribute(b)&&h.removeAttribute(b)),h.addEventListener(m,k,D);break e}b in h?h[b]=k:k===!0?h.setAttribute(b,""):Di(h,b,k)}}}function $r(h,m,b){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ti("error",h),Ti("load",h);var k=!1,D=!1,U;for(U in b)if(b.hasOwnProperty(U)){var re=b[U];if(re!=null)switch(U){case"src":k=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Oi(h,m,U,re,b,null)}}D&&Oi(h,m,"srcSet",b.srcSet,b,null),k&&Oi(h,m,"src",b.src,b,null);return;case"input":Ti("invalid",h);var be=U=re=D=null,$e=null,ft=null;for(k in b)if(b.hasOwnProperty(k)){var Ht=b[k];if(Ht!=null)switch(k){case"name":D=Ht;break;case"type":re=Ht;break;case"checked":$e=Ht;break;case"defaultChecked":ft=Ht;break;case"value":U=Ht;break;case"defaultValue":be=Ht;break;case"children":case"dangerouslySetInnerHTML":if(Ht!=null)throw Error(i(137,m));break;default:Oi(h,m,k,Ht,b,null)}}Tu(h,U,be,$e,ft,re,D,!1),Sc(h);return;case"select":Ti("invalid",h),k=re=U=null;for(D in b)if(b.hasOwnProperty(D)&&(be=b[D],be!=null))switch(D){case"value":U=be;break;case"defaultValue":re=be;break;case"multiple":k=be;default:Oi(h,m,D,be,b,null)}m=U,b=re,h.multiple=!!k,m!=null?ea(h,!!k,m,!1):b!=null&&ea(h,!!k,b,!0);return;case"textarea":Ti("invalid",h),U=D=k=null;for(re in b)if(b.hasOwnProperty(re)&&(be=b[re],be!=null))switch(re){case"value":k=be;break;case"defaultValue":D=be;break;case"children":U=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(i(91));break;default:Oi(h,m,re,be,b,null)}Cd(h,k,D,U),Sc(h);return;case"option":for($e in b)if(b.hasOwnProperty($e)&&(k=b[$e],k!=null))switch($e){case"selected":h.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Oi(h,m,$e,k,b,null)}return;case"dialog":Ti("beforetoggle",h),Ti("toggle",h),Ti("cancel",h),Ti("close",h);break;case"iframe":case"object":Ti("load",h);break;case"video":case"audio":for(k=0;k<rd.length;k++)Ti(rd[k],h);break;case"image":Ti("error",h),Ti("load",h);break;case"details":Ti("toggle",h);break;case"embed":case"source":case"link":Ti("error",h),Ti("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ft in b)if(b.hasOwnProperty(ft)&&(k=b[ft],k!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Oi(h,m,ft,k,b,null)}return;default:if(ci(m)){for(Ht in b)b.hasOwnProperty(Ht)&&(k=b[Ht],k!==void 0&&vg(h,m,Ht,k,b,void 0));return}}for(be in b)b.hasOwnProperty(be)&&(k=b[be],k!=null&&Oi(h,m,be,k,b,null))}function H_(h,m,b,k){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,U=null,re=null,be=null,$e=null,ft=null,Ht=null;for(zt in b){var Qt=b[zt];if(b.hasOwnProperty(zt)&&Qt!=null)switch(zt){case"checked":break;case"value":break;case"defaultValue":$e=Qt;default:k.hasOwnProperty(zt)||Oi(h,m,zt,null,k,Qt)}}for(var Tt in k){var zt=k[Tt];if(Qt=b[Tt],k.hasOwnProperty(Tt)&&(zt!=null||Qt!=null))switch(Tt){case"type":U=zt;break;case"name":D=zt;break;case"checked":ft=zt;break;case"defaultChecked":Ht=zt;break;case"value":re=zt;break;case"defaultValue":be=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(i(137,m));break;default:zt!==Qt&&Oi(h,m,Tt,zt,k,Qt)}}vo(h,re,be,$e,ft,Ht,U,D);return;case"select":zt=re=be=Tt=null;for(U in b)if($e=b[U],b.hasOwnProperty(U)&&$e!=null)switch(U){case"value":break;case"multiple":zt=$e;default:k.hasOwnProperty(U)||Oi(h,m,U,null,k,$e)}for(D in k)if(U=k[D],$e=b[D],k.hasOwnProperty(D)&&(U!=null||$e!=null))switch(D){case"value":Tt=U;break;case"defaultValue":be=U;break;case"multiple":re=U;default:U!==$e&&Oi(h,m,D,U,k,$e)}m=be,b=re,k=zt,Tt!=null?ea(h,!!b,Tt,!1):!!k!=!!b&&(m!=null?ea(h,!!b,m,!0):ea(h,!!b,b?[]:"",!1));return;case"textarea":zt=Tt=null;for(be in b)if(D=b[be],b.hasOwnProperty(be)&&D!=null&&!k.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:Oi(h,m,be,null,k,D)}for(re in k)if(D=k[re],U=b[re],k.hasOwnProperty(re)&&(D!=null||U!=null))switch(re){case"value":Tt=D;break;case"defaultValue":zt=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:D!==U&&Oi(h,m,re,D,k,U)}xl(h,Tt,zt);return;case"option":for(var ii in b)if(Tt=b[ii],b.hasOwnProperty(ii)&&Tt!=null&&!k.hasOwnProperty(ii))switch(ii){case"selected":h.selected=!1;break;default:Oi(h,m,ii,null,k,Tt)}for($e in k)if(Tt=k[$e],zt=b[$e],k.hasOwnProperty($e)&&Tt!==zt&&(Tt!=null||zt!=null))switch($e){case"selected":h.selected=Tt&&typeof Tt!="function"&&typeof Tt!="symbol";break;default:Oi(h,m,$e,Tt,k,zt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zn in b)Tt=b[Zn],b.hasOwnProperty(Zn)&&Tt!=null&&!k.hasOwnProperty(Zn)&&Oi(h,m,Zn,null,k,Tt);for(ft in k)if(Tt=k[ft],zt=b[ft],k.hasOwnProperty(ft)&&Tt!==zt&&(Tt!=null||zt!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(i(137,m));break;default:Oi(h,m,ft,Tt,k,zt)}return;default:if(ci(m)){for(var $i in b)Tt=b[$i],b.hasOwnProperty($i)&&Tt!==void 0&&!k.hasOwnProperty($i)&&vg(h,m,$i,void 0,k,Tt);for(Ht in k)Tt=k[Ht],zt=b[Ht],!k.hasOwnProperty(Ht)||Tt===zt||Tt===void 0&&zt===void 0||vg(h,m,Ht,Tt,k,zt);return}}for(var mt in b)Tt=b[mt],b.hasOwnProperty(mt)&&Tt!=null&&!k.hasOwnProperty(mt)&&Oi(h,m,mt,null,k,Tt);for(Qt in k)Tt=k[Qt],zt=b[Qt],!k.hasOwnProperty(Qt)||Tt===zt||Tt==null&&zt==null||Oi(h,m,Qt,Tt,k,zt)}var wg=null,Sg=null;function bf(h){return h.nodeType===9?h:h.ownerDocument}function vx(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vf(h,m){if(h===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&m==="foreignObject"?0:h}function jg(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Lp=null;function q_(){var h=window.event;return h&&h.type==="popstate"?h===Lp?!1:(Lp=h,!0):(Lp=null,!1)}var co=typeof setTimeout=="function"?setTimeout:void 0,wf=typeof clearTimeout=="function"?clearTimeout:void 0,Sf=typeof Promise=="function"?Promise:void 0,nh=typeof queueMicrotask=="function"?queueMicrotask:typeof Sf!="undefined"?function(h){return Sf.resolve(null).then(h).catch(G_)}:co;function G_(h){setTimeout(function(){throw h})}function tu(h){return h==="head"}function wx(h,m){var b=m,k=0,D=0;do{var U=b.nextSibling;if(h.removeChild(b),U&&U.nodeType===8)if(b=U.data,b==="/$"){if(0<k&&8>k){b=k;var re=h.ownerDocument;if(b&1&&Bp(re.documentElement),b&2&&Bp(re.body),b&4)for(b=re.head,Bp(b),re=b.firstChild;re;){var be=re.nextSibling,$e=re.nodeName;re[Wi]||$e==="SCRIPT"||$e==="STYLE"||$e==="LINK"&&re.rel.toLowerCase()==="stylesheet"||b.removeChild(re),re=be}}if(D===0){h.removeChild(U),aa(m);return}D--}else b==="$"||b==="$?"||b==="$!"?D++:k=b.charCodeAt(0)-48;else k=0;b=U}while(b);aa(m)}function Cg(h){var m=h.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var b=m;switch(m=m.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":Cg(b),ds(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}h.removeChild(b)}}function mw(h,m,b,k){for(;h.nodeType===1;){var D=b;if(h.nodeName.toLowerCase()!==m.toLowerCase()){if(!k&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(k){if(!h[Wi])switch(m){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(U=h.getAttribute("rel"),U==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(U!==D.rel||h.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||h.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||h.getAttribute("title")!==(D.title==null?null:D.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(U=h.getAttribute("src"),(U!==(D.src==null?null:D.src)||h.getAttribute("type")!==(D.type==null?null:D.type)||h.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&U&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(m==="input"&&h.type==="hidden"){var U=D.name==null?null:""+D.name;if(D.type==="hidden"&&h.getAttribute("name")===U)return h}else return h;if(h=rl(h.nextSibling),h===null)break}return null}function W_(h,m,b){if(m==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!b||(h=rl(h.nextSibling),h===null))return null;return h}function hc(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function Z_(h,m){var b=h.ownerDocument;if(h.data!=="$?"||b.readyState==="complete")m();else{var k=function(){m(),b.removeEventListener("DOMContentLoaded",k)};b.addEventListener("DOMContentLoaded",k),h._reactRetry=k}}function rl(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return h}var Tg=null;function Sx(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"){if(m===0)return h;m--}else b==="/$"&&m++}h=h.previousSibling}return null}function Y_(h,m,b){switch(m=bf(b),h){case"html":if(h=m.documentElement,!h)throw Error(i(452));return h;case"head":if(h=m.head,!h)throw Error(i(453));return h;case"body":if(h=m.body,!h)throw Error(i(454));return h;default:throw Error(i(451))}}function Bp(h){for(var m=h.attributes;m.length;)h.removeAttributeNode(m[0]);ds(h)}var Io=new Map,jx=new Set;function ih(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var fc=Qe.d;Qe.d={f:kg,r:Eg,D:gw,C:yw,L:jf,m:Hr,X:K_,S:Cx,M:Q_};function kg(){var h=fc.f(),m=og();return h||m}function Eg(h){var m=ei(h);m!==null&&m.tag===5&&m.type==="form"?Mn(m):fc.r(h)}var nu=typeof document=="undefined"?null:document;function X_(h,m,b){var k=nu;if(k&&typeof m=="string"&&m){var D=Dr(m);D='link[rel="'+h+'"][href="'+D+'"]',typeof b=="string"&&(D+='[crossorigin="'+b+'"]'),jx.has(D)||(jx.add(D),h={rel:h,crossOrigin:b,href:m},k.querySelector(D)===null&&(m=k.createElement("link"),$r(m,"link",h),Ii(m),k.head.appendChild(m)))}}function gw(h){fc.D(h),X_("dns-prefetch",h,null)}function yw(h,m){fc.C(h,m),X_("preconnect",h,m)}function jf(h,m,b){fc.L(h,m,b);var k=nu;if(k&&h&&m){var D='link[rel="preload"][as="'+Dr(m)+'"]';m==="image"&&b&&b.imageSrcSet?(D+='[imagesrcset="'+Dr(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(D+='[imagesizes="'+Dr(b.imageSizes)+'"]')):D+='[href="'+Dr(h)+'"]';var U=D;switch(m){case"style":U=Cf(h);break;case"script":U=sh(h)}Io.has(U)||(h=S({rel:"preload",href:m==="image"&&b&&b.imageSrcSet?void 0:h,as:m},b),Io.set(U,h),k.querySelector(D)!==null||m==="style"&&k.querySelector(Tf(U))||m==="script"&&k.querySelector(rh(U))||(m=k.createElement("link"),$r(m,"link",h),Ii(m),k.head.appendChild(m)))}}function Hr(h,m){fc.m(h,m);var b=nu;if(b&&h){var k=m&&typeof m.as=="string"?m.as:"script",D='link[rel="modulepreload"][as="'+Dr(k)+'"][href="'+Dr(h)+'"]',U=D;switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=sh(h)}if(!Io.has(U)&&(h=S({rel:"modulepreload",href:h},m),Io.set(U,h),b.querySelector(D)===null)){switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(rh(U)))return}k=b.createElement("link"),$r(k,"link",h),Ii(k),b.head.appendChild(k)}}}function Cx(h,m,b){fc.S(h,m,b);var k=nu;if(k&&h){var D=ws(k).hoistableStyles,U=Cf(h);m=m||"default";var re=D.get(U);if(!re){var be={loading:0,preload:null};if(re=k.querySelector(Tf(U)))be.loading=5;else{h=S({rel:"stylesheet",href:h,"data-precedence":m},b),(b=Io.get(U))&&ah(h,b);var $e=re=k.createElement("link");Ii($e),$r($e,"link",h),$e._p=new Promise(function(ft,Ht){$e.onload=ft,$e.onerror=Ht}),$e.addEventListener("load",function(){be.loading|=1}),$e.addEventListener("error",function(){be.loading|=2}),be.loading|=4,Vp(re,m,k)}re={type:"stylesheet",instance:re,count:1,state:be},D.set(U,re)}}}function K_(h,m){fc.X(h,m);var b=nu;if(b&&h){var k=ws(b).hoistableScripts,D=sh(h),U=k.get(D);U||(U=b.querySelector(rh(D)),U||(h=S({src:h,async:!0},m),(m=Io.get(D))&&Up(h,m),U=b.createElement("script"),Ii(U),$r(U,"link",h),b.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},k.set(D,U))}}function Q_(h,m){fc.M(h,m);var b=nu;if(b&&h){var k=ws(b).hoistableScripts,D=sh(h),U=k.get(D);U||(U=b.querySelector(rh(D)),U||(h=S({src:h,async:!0,type:"module"},m),(m=Io.get(D))&&Up(h,m),U=b.createElement("script"),Ii(U),$r(U,"link",h),b.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},k.set(D,U))}}function Mg(h,m,b,k){var D=(D=dt.current)?ih(D):null;if(!D)throw Error(i(446));switch(h){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(m=Cf(b.href),b=ws(D).hoistableStyles,k=b.get(m),k||(k={type:"style",instance:null,count:0,state:null},b.set(m,k)),k):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){h=Cf(b.href);var U=ws(D).hoistableStyles,re=U.get(h);if(re||(D=D.ownerDocument||D,re={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(h,re),(U=D.querySelector(Tf(h)))&&!U._p&&(re.instance=U,re.state.loading=5),Io.has(h)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Io.set(h,b),U||xw(D,h,b,re.state))),m&&k===null)throw Error(i(528,""));return re}if(m&&k!==null)throw Error(i(529,""));return null;case"script":return m=b.async,b=b.src,typeof b=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=sh(b),b=ws(D).hoistableScripts,k=b.get(m),k||(k={type:"script",instance:null,count:0,state:null},b.set(m,k)),k):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,h))}}function Cf(h){return'href="'+Dr(h)+'"'}function Tf(h){return'link[rel="stylesheet"]['+h+"]"}function Tx(h){return S({},h,{"data-precedence":h.precedence,precedence:null})}function xw(h,m,b,k){h.querySelector('link[rel="preload"][as="style"]['+m+"]")?k.loading=1:(m=h.createElement("link"),k.preload=m,m.addEventListener("load",function(){return k.loading|=1}),m.addEventListener("error",function(){return k.loading|=2}),$r(m,"link",b),Ii(m),h.head.appendChild(m))}function sh(h){return'[src="'+Dr(h)+'"]'}function rh(h){return"script[async]"+h}function Ng(h,m,b){if(m.count++,m.instance===null)switch(m.type){case"style":var k=h.querySelector('style[data-href~="'+Dr(b.href)+'"]');if(k)return m.instance=k,Ii(k),k;var D=S({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return k=(h.ownerDocument||h).createElement("style"),Ii(k),$r(k,"style",D),Vp(k,b.precedence,h),m.instance=k;case"stylesheet":D=Cf(b.href);var U=h.querySelector(Tf(D));if(U)return m.state.loading|=4,m.instance=U,Ii(U),U;k=Tx(b),(D=Io.get(D))&&ah(k,D),U=(h.ownerDocument||h).createElement("link"),Ii(U);var re=U;return re._p=new Promise(function(be,$e){re.onload=be,re.onerror=$e}),$r(U,"link",k),m.state.loading|=4,Vp(U,b.precedence,h),m.instance=U;case"script":return U=sh(b.src),(D=h.querySelector(rh(U)))?(m.instance=D,Ii(D),D):(k=b,(D=Io.get(U))&&(k=S({},b),Up(k,D)),h=h.ownerDocument||h,D=h.createElement("script"),Ii(D),$r(D,"link",k),h.head.appendChild(D),m.instance=D);case"void":return null;default:throw Error(i(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(k=m.instance,m.state.loading|=4,Vp(k,b.precedence,h));return m.instance}function Vp(h,m,b){for(var k=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=k.length?k[k.length-1]:null,U=D,re=0;re<k.length;re++){var be=k[re];if(be.dataset.precedence===m)U=be;else if(U!==D)break}U?U.parentNode.insertBefore(h,U.nextSibling):(m=b.nodeType===9?b.head:b,m.insertBefore(h,m.firstChild))}function ah(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.title==null&&(h.title=m.title)}function Up(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.integrity==null&&(h.integrity=m.integrity)}var $p=null;function Ag(h,m,b){if($p===null){var k=new Map,D=$p=new Map;D.set(b,k)}else D=$p,k=D.get(b),k||(k=new Map,D.set(b,k));if(k.has(h))return k;for(k.set(h,null),b=b.getElementsByTagName(h),D=0;D<b.length;D++){var U=b[D];if(!(U[Wi]||U[qn]||h==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var re=U.getAttribute(m)||"";re=h+re;var be=k.get(re);be?be.push(U):k.set(re,[U])}}return k}function Hp(h,m,b){h=h.ownerDocument||h,h.head.insertBefore(b,m==="title"?h.querySelector("head > title"):null)}function qp(h,m,b){if(b===1||m.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return h=m.disabled,typeof m.precedence=="string"&&h==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function Pg(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var oh=null;function kx(){}function _w(h,m,b){if(oh===null)throw Error(i(475));var k=oh;if(m.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var D=Cf(b.href),U=h.querySelector(Tf(D));if(U){h=U._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(k.count++,k=r.bind(k),h.then(k,k)),m.state.loading|=4,m.instance=U,Ii(U);return}U=h.ownerDocument||h,b=Tx(b),(D=Io.get(D))&&ah(b,D),U=U.createElement("link"),Ii(U);var re=U;re._p=new Promise(function(be,$e){re.onload=be,re.onerror=$e}),$r(U,"link",b),m.instance=U}k.stylesheets===null&&(k.stylesheets=new Map),k.stylesheets.set(m,h),(h=m.state.preload)&&(m.state.loading&3)===0&&(k.count++,m=r.bind(k),h.addEventListener("load",m),h.addEventListener("error",m))}}function f(){if(oh===null)throw Error(i(475));var h=oh;return h.stylesheets&&h.count===0&&y(h,h.stylesheets),0<h.count?function(m){var b=setTimeout(function(){if(h.stylesheets&&y(h,h.stylesheets),h.unsuspend){var k=h.unsuspend;h.unsuspend=null,k()}},6e4);return h.unsuspend=m,function(){h.unsuspend=null,clearTimeout(b)}}:null}function r(){if(this.count--,this.count===0){if(this.stylesheets)y(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var d=null;function y(h,m){h.stylesheets=null,h.unsuspend!==null&&(h.count++,d=new Map,m.forEach(v,h),d=null,r.call(h))}function v(h,m){if(!(m.state.loading&4)){var b=d.get(h);if(b)var k=b.get(null);else{b=new Map,d.set(h,b);for(var D=h.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<D.length;U++){var re=D[U];(re.nodeName==="LINK"||re.getAttribute("media")!=="not all")&&(b.set(re.dataset.precedence,re),k=re)}k&&b.set(null,k)}D=m.instance,re=D.getAttribute("data-precedence"),U=b.get(re)||k,U===k&&b.set(null,D),b.set(re,D),this.count++,k=r.bind(this),D.addEventListener("load",k),D.addEventListener("error",k),U?U.parentNode.insertBefore(D,U.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(D,h.firstChild)),m.state.loading|=4}}var C={$$typeof:Q,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function M(h,m,b,k,D,U,re,be){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bn(0),this.hiddenUpdates=bn(null),this.identifierPrefix=k,this.onUncaughtError=D,this.onCaughtError=U,this.onRecoverableError=re,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function R(h,m,b,k,D,U,re,be,$e,ft,Ht,Qt){return h=new M(h,m,b,re,be,$e,ft,Qt),m=1,U===!0&&(m|=24),U=Ir(3,null,null,m),h.current=U,U.stateNode=h,m=Gh(),m.refCount++,h.pooledCache=m,m.refCount++,U.memoizedState={element:k,isDehydrated:b,cache:m},pi(U),h}function I(h){return h?(h=$o,h):$o}function V(h,m,b,k,D,U){D=I(D),k.context===null?k.context=D:k.pendingContext=D,k=El(m),k.payload={element:b},U=U===void 0?null:U,U!==null&&(k.callback=U),b=Ao(h,k,m),b!==null&&(lo(b,h,m),Vc(b,h,m))}function H(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<m?b:m}}function X(h,m){H(h,m),(h=h.alternate)&&H(h,m)}function ie(h){if(h.tag===13){var m=ko(h,67108864);m!==null&&lo(m,h,67108864),X(h,67108864)}}var oe=!0;function de(h,m,b,k){var D=De.T;De.T=null;var U=Qe.p;try{Qe.p=2,ve(h,m,b,k)}finally{Qe.p=U,De.T=D}}function xe(h,m,b,k){var D=De.T;De.T=null;var U=Qe.p;try{Qe.p=8,ve(h,m,b,k)}finally{Qe.p=U,De.T=D}}function ve(h,m,b,k){if(oe){var D=Re(k);if(D===null)Fp(h,m,k,at,b),pn(h,k);else if(Wn(D,h,m,b,k))k.stopPropagation();else if(pn(h,k),m&4&&-1<fn.indexOf(h)){for(;D!==null;){var U=ei(D);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var re=J(U.pendingLanes);if(re!==0){var be=U;for(be.pendingLanes|=2,be.entangledLanes|=2;re;){var $e=1<<31-ke(re);be.entanglements[1]|=$e,re&=~$e}sl(U),(ls&6)===0&&(Rp=Hn()+500,Jd(0))}}break;case 13:be=ko(U,2),be!==null&&lo(be,U,2),og(),X(U,2)}if(U=Re(k),U===null&&Fp(h,m,k,at,b),U===D)break;D=U}D!==null&&k.stopPropagation()}else Fp(h,m,k,null,b)}}function Re(h){return h=So(h),Be(h)}var at=null;function Be(h){if(at=null,h=tn(h),h!==null){var m=u(h);if(m===null)h=null;else{var b=m.tag;if(b===13){if(h=c(m),h!==null)return h;h=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null)}}return at=h,null}function Ze(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hn()){case on:return 2;case Ue:return 8;case We:case Pe:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var xt=!1,Mt=null,Zt=null,cn=null,an=new Map,dn=new Map,Nn=[],fn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pn(h,m){switch(h){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":an.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":dn.delete(m.pointerId)}}function $t(h,m,b,k,D,U){return h===null||h.nativeEvent!==U?(h={blockedOn:m,domEventName:b,eventSystemFlags:k,nativeEvent:U,targetContainers:[D]},m!==null&&(m=ei(m),m!==null&&ie(m)),h):(h.eventSystemFlags|=k,m=h.targetContainers,D!==null&&m.indexOf(D)===-1&&m.push(D),h)}function Wn(h,m,b,k,D){switch(m){case"focusin":return Mt=$t(Mt,h,m,b,k,D),!0;case"dragenter":return Zt=$t(Zt,h,m,b,k,D),!0;case"mouseover":return cn=$t(cn,h,m,b,k,D),!0;case"pointerover":var U=D.pointerId;return an.set(U,$t(an.get(U)||null,h,m,b,k,D)),!0;case"gotpointercapture":return U=D.pointerId,dn.set(U,$t(dn.get(U)||null,h,m,b,k,D)),!0}return!1}function Qn(h){var m=tn(h.target);if(m!==null){var b=u(m);if(b!==null){if(m=b.tag,m===13){if(m=c(b),m!==null){h.blockedOn=m,Jn(h.priority,function(){if(b.tag===13){var k=Ca();k=Ut(k);var D=ko(b,k);D!==null&&lo(D,b,k),X(b,k)}});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Rn(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var b=Re(h.nativeEvent);if(b===null){b=h.nativeEvent;var k=new b.constructor(b.type,b);ui=k,b.target.dispatchEvent(k),ui=null}else return m=ei(b),m!==null&&ie(m),h.blockedOn=b,!1;m.shift()}return!0}function An(h,m,b){Rn(h)&&b.delete(m)}function wi(){xt=!1,Mt!==null&&Rn(Mt)&&(Mt=null),Zt!==null&&Rn(Zt)&&(Zt=null),cn!==null&&Rn(cn)&&(cn=null),an.forEach(An),dn.forEach(An)}function ms(h,m){h.blockedOn===m&&(h.blockedOn=null,xt||(xt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wi)))}var Gs=null;function kr(h){Gs!==h&&(Gs=h,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Gs===h&&(Gs=null);for(var m=0;m<h.length;m+=3){var b=h[m],k=h[m+1],D=h[m+2];if(typeof k!="function"){if(Be(k||b)===null)continue;break}var U=ei(b);U!==null&&(h.splice(m,3),m-=3,rn(U,{pending:!0,data:D,method:b.method,action:k},k,D))}}))}function aa(h){function m($e){return ms($e,h)}Mt!==null&&ms(Mt,h),Zt!==null&&ms(Zt,h),cn!==null&&ms(cn,h),an.forEach(m),dn.forEach(m);for(var b=0;b<Nn.length;b++){var k=Nn[b];k.blockedOn===h&&(k.blockedOn=null)}for(;0<Nn.length&&(b=Nn[0],b.blockedOn===null);)Qn(b),b.blockedOn===null&&Nn.shift();if(b=(h.ownerDocument||h).$$reactFormReplay,b!=null)for(k=0;k<b.length;k+=3){var D=b[k],U=b[k+1],re=D[Bn]||null;if(typeof U=="function")re||kr(b);else if(re){var be=null;if(U&&U.hasAttribute("formAction")){if(D=U,re=U[Bn]||null)be=re.formAction;else if(Be(D)!==null)continue}else be=re.action;typeof be=="function"?b[k+1]=be:(b.splice(k,3),k-=3),kr(b)}}}function oa(h){this._internalRoot=h}tr.prototype.render=oa.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(i(409));var b=m.current,k=Ca();V(b,k,h,m,null,null)},tr.prototype.unmount=oa.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;V(h.current,2,null,h,null,null),og(),m[yi]=null}};function tr(h){this._internalRoot=h}tr.prototype.unstable_scheduleHydration=function(h){if(h){var m=Gi();h={blockedOn:null,target:h,priority:m};for(var b=0;b<Nn.length&&m!==0&&m<Nn[b].priority;b++);Nn.splice(b,0,h),b===0&&Qn(h)}};var _s=t.version;if(_s!=="19.1.0")throw Error(i(527,_s,"19.1.0"));Qe.findDOMNode=function(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=g(m),h=h!==null?_(h):null,h=h===null?null:h.stateNode,h};var _r={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:De,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var nr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nr.isDisabled&&nr.supportsFiber)try{yn=nr.inject(_r),ln=nr}catch(h){}}return Ax.createRoot=function(h,m){if(!o(h))throw Error(i(299));var b=!1,k="",D=rf,U=Xu,re=Vy,be=null;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onUncaughtError!==void 0&&(D=m.onUncaughtError),m.onCaughtError!==void 0&&(U=m.onCaughtError),m.onRecoverableError!==void 0&&(re=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(be=m.unstable_transitionCallbacks)),m=R(h,1,!1,null,null,b,k,D,U,re,be,null),h[yi]=m.current,bg(h),new oa(m)},Ax.hydrateRoot=function(h,m,b){if(!o(h))throw Error(i(299));var k=!1,D="",U=rf,re=Xu,be=Vy,$e=null,ft=null;return b!=null&&(b.unstable_strictMode===!0&&(k=!0),b.identifierPrefix!==void 0&&(D=b.identifierPrefix),b.onUncaughtError!==void 0&&(U=b.onUncaughtError),b.onCaughtError!==void 0&&(re=b.onCaughtError),b.onRecoverableError!==void 0&&(be=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&($e=b.unstable_transitionCallbacks),b.formState!==void 0&&(ft=b.formState)),m=R(h,1,!0,m,b!=null?b:null,k,D,U,re,be,$e,ft),m.context=I(null),b=m.current,k=Ca(),k=Ut(k),D=El(k),D.callback=null,Ao(b,D,k),b=k,m.current.lanes=b,Tn(m,b),sl(m),h[yi]=m.current,bg(h),new tr(m)},Ax.version="19.1.0",Ax}var tk;function Yz(){if(tk)return Cw.exports;tk=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Cw.exports=Zz(),Cw.exports}var Xz=Yz(),Kz=Object.defineProperty,Qz=(e,t,n)=>t in e?Kz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zp=(e,t,n)=>Qz(e,typeof t!="symbol"?t+"":t,n),Jz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zg={},Px={},ou={},nk;function lA(){if(nk)return ou;nk=1;var e=ou&&ou.__assign||function(){return e=Object.assign||function(o){for(var u,c=1,a=arguments.length;c<a;c++){u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(o[g]=u[g])}return o},e.apply(this,arguments)},t=ou&&ou.__awaiter||function(o,u,c,a){function g(_){return _ instanceof c?_:new c(function(S){S(_)})}return new(c||(c=Promise))(function(_,S){function E(z){try{N(a.next(z))}catch(B){S(B)}}function A(z){try{N(a.throw(z))}catch(B){S(B)}}function N(z){z.done?_(z.value):g(z.value).then(E,A)}N((a=a.apply(o,u||[])).next())})},n=ou&&ou.__generator||function(o,u){var c={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},a,g,_,S;return S={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function E(N){return function(z){return A([N,z])}}function A(N){if(a)throw new TypeError("Generator is already executing.");for(;S&&(S=0,N[0]&&(c=0)),c;)try{if(a=1,g&&(_=N[0]&2?g.return:N[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,N[1])).done)return _;switch(g=0,_&&(N=[N[0]&2,_.value]),N[0]){case 0:case 1:_=N;break;case 4:return c.label++,{value:N[1],done:!1};case 5:c.label++,g=N[1],N=[0];continue;case 7:N=c.ops.pop(),c.trys.pop();continue;default:if(_=c.trys,!(_=_.length>0&&_[_.length-1])&&(N[0]===6||N[0]===2)){c=0;continue}if(N[0]===3&&(!_||N[1]>_[0]&&N[1]<_[3])){c.label=N[1];break}if(N[0]===6&&c.label<_[1]){c.label=_[1],_=N;break}if(_&&c.label<_[2]){c.label=_[2],c.ops.push(N);break}_[2]&&c.ops.pop(),c.trys.pop();continue}N=u.call(o,c)}catch(z){N=[6,z],g=0}finally{a=_=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}};Object.defineProperty(ou,"__esModule",{value:!0}),ou.FrappeCall=void 0;var i=function(){function o(u,c,a,g,_){this.appURL=u,this.axios=c,this.useToken=a!=null?a:!1,this.token=g,this.tokenType=_}return o.prototype.get=function(u,c){return t(this,void 0,void 0,function(){var a;return n(this,function(g){return a=new URLSearchParams,c&&Object.entries(c).forEach(function(_){var S=_[0],E=_[1];if(E!=null){var A=typeof E=="object"?JSON.stringify(E):E;a.set(S,A)}}),[2,this.axios.get("/api/method/".concat(u),{params:a}).then(function(_){return _.data}).catch(function(_){var S,E;throw e(e({},_.response.data),{httpStatus:_.response.status,httpStatusText:_.response.statusText,message:(S=_.response.data.message)!==null&&S!==void 0?S:"There was an error.",exception:(E=_.response.data.exception)!==null&&E!==void 0?E:""})})]})})},o.prototype.post=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.post("/api/method/".concat(u),e({},c)).then(function(g){return g.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:(_=g.response.data.message)!==null&&_!==void 0?_:"There was an error.",exception:(S=g.response.data.exception)!==null&&S!==void 0?S:""})})]})})},o.prototype.put=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.put("/api/method/".concat(u),e({},c)).then(function(g){return g.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:(_=g.response.data.message)!==null&&_!==void 0?_:"There was an error.",exception:(S=g.response.data.exception)!==null&&S!==void 0?S:""})})]})})},o.prototype.delete=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.delete("/api/method/".concat(u),{params:c}).then(function(g){return g.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:(_=g.response.data.message)!==null&&_!==void 0?_:"There was an error.",exception:(S=g.response.data.exception)!==null&&S!==void 0?S:""})})]})})},o}();return ou.FrappeCall=i,ou}var lu={},ik;function cA(){if(ik)return lu;ik=1;var e=lu&&lu.__assign||function(){return e=Object.assign||function(o){for(var u,c=1,a=arguments.length;c<a;c++){u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(o[g]=u[g])}return o},e.apply(this,arguments)},t=lu&&lu.__awaiter||function(o,u,c,a){function g(_){return _ instanceof c?_:new c(function(S){S(_)})}return new(c||(c=Promise))(function(_,S){function E(z){try{N(a.next(z))}catch(B){S(B)}}function A(z){try{N(a.throw(z))}catch(B){S(B)}}function N(z){z.done?_(z.value):g(z.value).then(E,A)}N((a=a.apply(o,u||[])).next())})},n=lu&&lu.__generator||function(o,u){var c={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},a,g,_,S;return S={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function E(N){return function(z){return A([N,z])}}function A(N){if(a)throw new TypeError("Generator is already executing.");for(;S&&(S=0,N[0]&&(c=0)),c;)try{if(a=1,g&&(_=N[0]&2?g.return:N[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,N[1])).done)return _;switch(g=0,_&&(N=[N[0]&2,_.value]),N[0]){case 0:case 1:_=N;break;case 4:return c.label++,{value:N[1],done:!1};case 5:c.label++,g=N[1],N=[0];continue;case 7:N=c.ops.pop(),c.trys.pop();continue;default:if(_=c.trys,!(_=_.length>0&&_[_.length-1])&&(N[0]===6||N[0]===2)){c=0;continue}if(N[0]===3&&(!_||N[1]>_[0]&&N[1]<_[3])){c.label=N[1];break}if(N[0]===6&&c.label<_[1]){c.label=_[1],_=N;break}if(_&&c.label<_[2]){c.label=_[2],c.ops.push(N);break}_[2]&&c.ops.pop(),c.trys.pop();continue}N=u.call(o,c)}catch(z){N=[6,z],g=0}finally{a=_=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}};Object.defineProperty(lu,"__esModule",{value:!0}),lu.FrappeDB=void 0;var i=function(){function o(u,c,a,g,_){this.appURL=u,this.axios=c,this.useToken=a!=null?a:!1,this.token=g,this.tokenType=_}return o.prototype.getDoc=function(u,c){return c===void 0&&(c=""),t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.get("/api/resource/".concat(u,"/").concat(encodeURIComponent(c))).then(function(g){return g.data.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:"There was an error while fetching the document.",exception:(S=(_=g.response.data.exception)!==null&&_!==void 0?_:g.response.data.exc_type)!==null&&S!==void 0?S:""})})]})})},o.prototype.getDocList=function(u,c){var a;return t(this,void 0,void 0,function(){var g,_,S,E,A,N,z,B,$,q,W;return n(this,function(Q){return g={},c&&(_=c.fields,S=c.filters,E=c.orFilters,A=c.orderBy,N=c.limit,z=c.limit_start,B=c.groupBy,$=c.asDict,q=$===void 0?!0:$,W=A?"".concat(String(A==null?void 0:A.field)," ").concat((a=A==null?void 0:A.order)!==null&&a!==void 0?a:"asc"):"",g={fields:_?JSON.stringify(_):void 0,filters:S?JSON.stringify(S):void 0,or_filters:E?JSON.stringify(E):void 0,order_by:W,group_by:B,limit:N,limit_start:z,as_dict:q}),[2,this.axios.get("/api/resource/".concat(u),{params:g}).then(function(Z){return Z.data.data}).catch(function(Z){var K,le;throw e(e({},Z.response.data),{httpStatus:Z.response.status,httpStatusText:Z.response.statusText,message:"There was an error while fetching the documents.",exception:(le=(K=Z.response.data.exception)!==null&&K!==void 0?K:Z.response.data.exc_type)!==null&&le!==void 0?le:""})})]})})},o.prototype.createDoc=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.post("/api/resource/".concat(u),e({},c)).then(function(g){return g.data.data}).catch(function(g){var _,S,E;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:(_=g.response.data.message)!==null&&_!==void 0?_:"There was an error while creating the document.",exception:(E=(S=g.response.data.exception)!==null&&S!==void 0?S:g.response.data.exc_type)!==null&&E!==void 0?E:""})})]})})},o.prototype.updateDoc=function(u,c,a){return t(this,void 0,void 0,function(){return n(this,function(g){return[2,this.axios.put("/api/resource/".concat(u,"/").concat(c&&encodeURIComponent(c)),e({},a)).then(function(_){return _.data.data}).catch(function(_){var S,E,A;throw e(e({},_.response.data),{httpStatus:_.response.status,httpStatusText:_.response.statusText,message:(S=_.response.data.message)!==null&&S!==void 0?S:"There was an error while updating the document.",exception:(A=(E=_.response.data.exception)!==null&&E!==void 0?E:_.response.data.exc_type)!==null&&A!==void 0?A:""})})]})})},o.prototype.deleteDoc=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.delete("/api/resource/".concat(u,"/").concat(c&&encodeURIComponent(c))).then(function(g){return g.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:"There was an error while deleting the document.",exception:(S=(_=g.response.data.exception)!==null&&_!==void 0?_:g.response.data.exc_type)!==null&&S!==void 0?S:""})})]})})},o.prototype.getCount=function(u,c,a,g){return a===void 0&&(a=!1),g===void 0&&(g=!1),t(this,void 0,void 0,function(){var _;return n(this,function(S){return _={doctype:u,filters:[]},a&&(_.cache=a),g&&(_.debug=g),c&&(_.filters=c?JSON.stringify(c):void 0),[2,this.axios.get("/api/method/frappe.client.get_count",{params:_}).then(function(E){return E.data.message}).catch(function(E){var A,N;throw e(e({},E.response.data),{httpStatus:E.response.status,httpStatusText:E.response.statusText,message:"There was an error while getting the count.",exception:(N=(A=E.response.data.exception)!==null&&A!==void 0?A:E.response.data.exc_type)!==null&&N!==void 0?N:""})})]})})},o.prototype.getLastDoc=function(u,c){return t(this,void 0,void 0,function(){var a,g;return n(this,function(_){switch(_.label){case 0:return a={orderBy:{field:"creation",order:"desc"}},c&&(a=e(e({},a),c)),[4,this.getDocList(u,e(e({},a),{limit:1,fields:["name"]}))];case 1:return g=_.sent(),g.length>0?[2,this.getDoc(u,g[0].name)]:[2,{}]}})})},o}();return lu.FrappeDB=i,lu}var cu={},lh={};/*! Axios v1.8.2 Copyright (c) 2025 Matt Zabriskie and contributors */var Mw,sk;function eI(){if(sk)return Mw;sk=1;function e(se,me){return function(){return se.apply(me,arguments)}}const{toString:t}=Object.prototype,{getPrototypeOf:n}=Object,i=(se=>me=>{const je=t.call(me);return se[je]||(se[je]=je.slice(8,-1).toLowerCase())})(Object.create(null)),o=se=>(se=se.toLowerCase(),me=>i(me)===se),u=se=>me=>typeof me===se,{isArray:c}=Array,a=u("undefined");function g(se){return se!==null&&!a(se)&&se.constructor!==null&&!a(se.constructor)&&A(se.constructor.isBuffer)&&se.constructor.isBuffer(se)}const _=o("ArrayBuffer");function S(se){let me;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?me=ArrayBuffer.isView(se):me=se&&se.buffer&&_(se.buffer),me}const E=u("string"),A=u("function"),N=u("number"),z=se=>se!==null&&typeof se=="object",B=se=>se===!0||se===!1,$=se=>{if(i(se)!=="object")return!1;const me=n(se);return(me===null||me===Object.prototype||Object.getPrototypeOf(me)===null)&&!(Symbol.toStringTag in se)&&!(Symbol.iterator in se)},q=o("Date"),W=o("File"),Q=o("Blob"),Z=o("FileList"),K=se=>z(se)&&A(se.pipe),le=se=>{let me;return se&&(typeof FormData=="function"&&se instanceof FormData||A(se.append)&&((me=i(se))==="formdata"||me==="object"&&A(se.toString)&&se.toString()==="[object FormData]"))},ge=o("URLSearchParams"),[he,pe,Ie,He]=["ReadableStream","Request","Response","Headers"].map(o),Ye=se=>se.trim?se.trim():se.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rt(se,me,{allOwnKeys:je=!1}={}){if(se===null||typeof se>"u")return;let Ne,ht;if(typeof se!="object"&&(se=[se]),c(se))for(Ne=0,ht=se.length;Ne<ht;Ne++)me.call(null,se[Ne],Ne,se);else{const gt=je?Object.getOwnPropertyNames(se):Object.keys(se),Ct=gt.length;let un;for(Ne=0;Ne<Ct;Ne++)un=gt[Ne],me.call(null,se[un],un,se)}}function Rt(se,me){me=me.toLowerCase();const je=Object.keys(se);let Ne=je.length,ht;for(;Ne-- >0;)if(ht=je[Ne],me===ht.toLowerCase())return ht;return null}const St=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Jz,De=se=>!a(se)&&se!==St;function Qe(){const{caseless:se}=De(this)&&this||{},me={},je=(Ne,ht)=>{const gt=se&&Rt(me,ht)||ht;$(me[gt])&&$(Ne)?me[gt]=Qe(me[gt],Ne):$(Ne)?me[gt]=Qe({},Ne):c(Ne)?me[gt]=Ne.slice():me[gt]=Ne};for(let Ne=0,ht=arguments.length;Ne<ht;Ne++)arguments[Ne]&&rt(arguments[Ne],je);return me}const et=(se,me,je,{allOwnKeys:Ne}={})=>(rt(me,(ht,gt)=>{je&&A(ht)?se[gt]=e(ht,je):se[gt]=ht},{allOwnKeys:Ne}),se),Nt=se=>(se.charCodeAt(0)===65279&&(se=se.slice(1)),se),fe=(se,me,je,Ne)=>{se.prototype=Object.create(me.prototype,Ne),se.prototype.constructor=se,Object.defineProperty(se,"super",{value:me.prototype}),je&&Object.assign(se.prototype,je)},Xe=(se,me,je,Ne)=>{let ht,gt,Ct;const un={};if(me=me||{},se==null)return me;do{for(ht=Object.getOwnPropertyNames(se),gt=ht.length;gt-- >0;)Ct=ht[gt],(!Ne||Ne(Ct,se,me))&&!un[Ct]&&(me[Ct]=se[Ct],un[Ct]=!0);se=je!==!1&&n(se)}while(se&&(!je||je(se,me))&&se!==Object.prototype);return me},tt=(se,me,je)=>{se=String(se),(je===void 0||je>se.length)&&(je=se.length),je-=me.length;const Ne=se.indexOf(me,je);return Ne!==-1&&Ne===je},Me=se=>{if(!se)return null;if(c(se))return se;let me=se.length;if(!N(me))return null;const je=new Array(me);for(;me-- >0;)je[me]=se[me];return je},ot=(se=>me=>se&&me instanceof se)(typeof Uint8Array<"u"&&n(Uint8Array)),ut=(se,me)=>{const je=(se&&se[Symbol.iterator]).call(se);let Ne;for(;(Ne=je.next())&&!Ne.done;){const ht=Ne.value;me.call(se,ht[0],ht[1])}},dt=(se,me)=>{let je;const Ne=[];for(;(je=se.exec(me))!==null;)Ne.push(je);return Ne},pt=o("HTMLFormElement"),Ve=se=>se.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(me,je,Ne){return je.toUpperCase()+Ne}),Ge=(({hasOwnProperty:se})=>(me,je)=>se.call(me,je))(Object.prototype),Dt=o("RegExp"),Lt=(se,me)=>{const je=Object.getOwnPropertyDescriptors(se),Ne={};rt(je,(ht,gt)=>{let Ct;(Ct=me(ht,gt,se))!==!1&&(Ne[gt]=Ct||ht)}),Object.defineProperties(se,Ne)},It=se=>{Lt(se,(me,je)=>{if(A(se)&&["arguments","caller","callee"].indexOf(je)!==-1)return!1;const Ne=se[je];if(A(Ne)){if(me.enumerable=!1,"writable"in me){me.writable=!1;return}me.set||(me.set=()=>{throw Error("Can not rewrite read-only method '"+je+"'")})}})},Ot=(se,me)=>{const je={},Ne=ht=>{ht.forEach(gt=>{je[gt]=!0})};return c(se)?Ne(se):Ne(String(se).split(me)),je},en=()=>{},_n=(se,me)=>se!=null&&Number.isFinite(se=+se)?se:me;function Yn(se){return!!(se&&A(se.append)&&se[Symbol.toStringTag]==="FormData"&&se[Symbol.iterator])}const Hn=se=>{const me=new Array(10),je=(Ne,ht)=>{if(z(Ne)){if(me.indexOf(Ne)>=0)return;if(!("toJSON"in Ne)){me[ht]=Ne;const gt=c(Ne)?[]:{};return rt(Ne,(Ct,un)=>{const kn=je(Ct,ht+1);!a(kn)&&(gt[un]=kn)}),me[ht]=void 0,gt}}return Ne};return je(se,0)},hn=o("AsyncFunction"),on=se=>se&&(z(se)||A(se))&&A(se.then)&&A(se.catch),Ue=((se,me)=>se?setImmediate:me?((je,Ne)=>(St.addEventListener("message",({source:ht,data:gt})=>{ht===St&&gt===je&&Ne.length&&Ne.shift()()},!1),ht=>{Ne.push(ht),St.postMessage(je,"*")}))(`axios@${Math.random()}`,[]):je=>setTimeout(je))(typeof setImmediate=="function",A(St.postMessage)),We=typeof queueMicrotask<"u"?queueMicrotask.bind(St):typeof process<"u"&&process.nextTick||Ue;var Pe={isArray:c,isArrayBuffer:_,isBuffer:g,isFormData:le,isArrayBufferView:S,isString:E,isNumber:N,isBoolean:B,isObject:z,isPlainObject:$,isReadableStream:he,isRequest:pe,isResponse:Ie,isHeaders:He,isUndefined:a,isDate:q,isFile:W,isBlob:Q,isRegExp:Dt,isFunction:A,isStream:K,isURLSearchParams:ge,isTypedArray:ot,isFileList:Z,forEach:rt,merge:Qe,extend:et,trim:Ye,stripBOM:Nt,inherits:fe,toFlatObject:Xe,kindOf:i,kindOfTest:o,endsWith:tt,toArray:Me,forEachEntry:ut,matchAll:dt,isHTMLForm:pt,hasOwnProperty:Ge,hasOwnProp:Ge,reduceDescriptors:Lt,freezeMethods:It,toObjectSet:Ot,toCamelCase:Ve,noop:en,toFiniteNumber:_n,findKey:Rt,global:St,isContextDefined:De,isSpecCompliantForm:Yn,toJSONObject:Hn,isAsyncFn:hn,isThenable:on,setImmediate:Ue,asap:We};function Bt(se,me,je,Ne,ht){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=se,this.name="AxiosError",me&&(this.code=me),je&&(this.config=je),Ne&&(this.request=Ne),ht&&(this.response=ht,this.status=ht.status?ht.status:null)}Pe.inherits(Bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Pe.toJSONObject(this.config),code:this.code,status:this.status}}});const Et=Bt.prototype,nn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(se=>{nn[se]={value:se}}),Object.defineProperties(Bt,nn),Object.defineProperty(Et,"isAxiosError",{value:!0}),Bt.from=(se,me,je,Ne,ht,gt)=>{const Ct=Object.create(Et);return Pe.toFlatObject(se,Ct,function(un){return un!==Error.prototype},un=>un!=="isAxiosError"),Bt.call(Ct,se.message,me,je,Ne,ht),Ct.cause=se,Ct.name=se.name,gt&&Object.assign(Ct,gt),Ct};var yn=null;function ln(se){return Pe.isPlainObject(se)||Pe.isArray(se)}function At(se){return Pe.endsWith(se,"[]")?se.slice(0,-2):se}function ke(se,me,je){return se?se.concat(me).map(function(Ne,ht){return Ne=At(Ne),!je&&ht?"["+Ne+"]":Ne}).join(je?".":""):me}function ae(se){return Pe.isArray(se)&&!se.some(ln)}const ue=Pe.toFlatObject(Pe,{},null,function(se){return/^is[A-Z]/.test(se)});function _e(se,me,je){if(!Pe.isObject(se))throw new TypeError("target must be an object");me=me||new FormData,je=Pe.toFlatObject(je,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ri,Gn){return!Pe.isUndefined(Gn[ri])});const Ne=je.metaTokens,ht=je.visitor||mn,gt=je.dots,Ct=je.indexes,un=(je.Blob||typeof Blob<"u"&&Blob)&&Pe.isSpecCompliantForm(me);if(!Pe.isFunction(ht))throw new TypeError("visitor must be a function");function kn(ri){if(ri===null)return"";if(Pe.isDate(ri))return ri.toISOString();if(!un&&Pe.isBlob(ri))throw new Bt("Blob is not supported. Use a Buffer instead.");return Pe.isArrayBuffer(ri)||Pe.isTypedArray(ri)?un&&typeof Blob=="function"?new Blob([ri]):Buffer.from(ri):ri}function mn(ri,Gn,Dn){let pr=ri;if(ri&&!Dn&&typeof ri=="object"){if(Pe.endsWith(Gn,"{}"))Gn=Ne?Gn:Gn.slice(0,-2),ri=JSON.stringify(ri);else if(Pe.isArray(ri)&&ae(ri)||(Pe.isFileList(ri)||Pe.endsWith(Gn,"[]"))&&(pr=Pe.toArray(ri)))return Gn=At(Gn),pr.forEach(function(Si,ns){!(Pe.isUndefined(Si)||Si===null)&&me.append(Ct===!0?ke([Gn],ns,gt):Ct===null?Gn:Gn+"[]",kn(Si))}),!1}return ln(ri)?!0:(me.append(ke(Dn,Gn,gt),kn(ri)),!1)}const Cn=[],Un=Object.assign(ue,{defaultVisitor:mn,convertValue:kn,isVisitable:ln});function oi(ri,Gn){if(!Pe.isUndefined(ri)){if(Cn.indexOf(ri)!==-1)throw Error("Circular reference detected in "+Gn.join("."));Cn.push(ri),Pe.forEach(ri,function(Dn,pr){(!(Pe.isUndefined(Dn)||Dn===null)&&ht.call(me,Dn,Pe.isString(pr)?pr.trim():pr,Gn,Un))===!0&&oi(Dn,Gn?Gn.concat(pr):[pr])}),Cn.pop()}}if(!Pe.isObject(se))throw new TypeError("data must be an object");return oi(se),me}function Ce(se){const me={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(se).replace(/[!'()~]|%20|%00/g,function(je){return me[je]})}function Ae(se,me){this._pairs=[],se&&_e(se,this,me)}const J=Ae.prototype;J.append=function(se,me){this._pairs.push([se,me])},J.toString=function(se){const me=se?function(je){return se.call(this,je,Ce)}:Ce;return this._pairs.map(function(je){return me(je[0])+"="+me(je[1])},"").join("&")};function nt(se){return encodeURIComponent(se).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Je(se,me,je){if(!me)return se;const Ne=je&&je.encode||nt;Pe.isFunction(je)&&(je={serialize:je});const ht=je&&je.serialize;let gt;if(ht?gt=ht(me,je):gt=Pe.isURLSearchParams(me)?me.toString():new Ae(me,je).toString(Ne),gt){const Ct=se.indexOf("#");Ct!==-1&&(se=se.slice(0,Ct)),se+=(se.indexOf("?")===-1?"?":"&")+gt}return se}class jt{constructor(){this.handlers=[]}use(me,je,Ne){return this.handlers.push({fulfilled:me,rejected:je,synchronous:Ne?Ne.synchronous:!1,runWhen:Ne?Ne.runWhen:null}),this.handlers.length-1}eject(me){this.handlers[me]&&(this.handlers[me]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(me){Pe.forEach(this.handlers,function(je){je!==null&&me(je)})}}var qt=jt,Ft={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bn=typeof URLSearchParams<"u"?URLSearchParams:Ae,Tn=typeof FormData<"u"?FormData:null,ct=typeof Blob<"u"?Blob:null,wt={isBrowser:!0,classes:{URLSearchParams:bn,FormData:Tn,Blob:ct},protocols:["http","https","file","blob","url","data"]};const Wt=typeof window<"u"&&typeof document<"u",Ut=typeof navigator=="object"&&navigator||void 0,vn=Wt&&(!Ut||["ReactNative","NativeScript","NS"].indexOf(Ut.product)<0),Gi=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Jn=Wt&&window.location.href||"http://localhost";var ai=Object.freeze({__proto__:null,hasBrowserEnv:Wt,hasStandardBrowserWebWorkerEnv:Gi,hasStandardBrowserEnv:vn,navigator:Ut,origin:Jn}),qn=te(te({},ai),wt);function Bn(se,me){return _e(se,new qn.classes.URLSearchParams,Object.assign({visitor:function(je,Ne,ht,gt){return qn.isNode&&Pe.isBuffer(je)?(this.append(Ne,je.toString("base64")),!1):gt.defaultVisitor.apply(this,arguments)}},me))}function yi(se){return Pe.matchAll(/\w+|\[(\w*)]/g,se).map(me=>me[0]==="[]"?"":me[1]||me[0])}function Xt(se){const me={},je=Object.keys(se);let Ne;const ht=je.length;let gt;for(Ne=0;Ne<ht;Ne++)gt=je[Ne],me[gt]=se[gt];return me}function lt(se){function me(je,Ne,ht,gt){let Ct=je[gt++];if(Ct==="__proto__")return!0;const un=Number.isFinite(+Ct),kn=gt>=je.length;return Ct=!Ct&&Pe.isArray(ht)?ht.length:Ct,kn?(Pe.hasOwnProp(ht,Ct)?ht[Ct]=[ht[Ct],Ne]:ht[Ct]=Ne,!un):((!ht[Ct]||!Pe.isObject(ht[Ct]))&&(ht[Ct]=[]),me(je,Ne,ht[Ct],gt)&&Pe.isArray(ht[Ct])&&(ht[Ct]=Xt(ht[Ct])),!un)}if(Pe.isFormData(se)&&Pe.isFunction(se.entries)){const je={};return Pe.forEachEntry(se,(Ne,ht)=>{me(yi(Ne),ht,je,0)}),je}return null}function Ri(se,me,je){if(Pe.isString(se))try{return(me||JSON.parse)(se),Pe.trim(se)}catch(Ne){if(Ne.name!=="SyntaxError")throw Ne}return(je||JSON.stringify)(se)}const li={transitional:Ft,adapter:["xhr","http","fetch"],transformRequest:[function(se,me){const je=me.getContentType()||"",Ne=je.indexOf("application/json")>-1,ht=Pe.isObject(se);if(ht&&Pe.isHTMLForm(se)&&(se=new FormData(se)),Pe.isFormData(se))return Ne?JSON.stringify(lt(se)):se;if(Pe.isArrayBuffer(se)||Pe.isBuffer(se)||Pe.isStream(se)||Pe.isFile(se)||Pe.isBlob(se)||Pe.isReadableStream(se))return se;if(Pe.isArrayBufferView(se))return se.buffer;if(Pe.isURLSearchParams(se))return me.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),se.toString();let gt;if(ht){if(je.indexOf("application/x-www-form-urlencoded")>-1)return Bn(se,this.formSerializer).toString();if((gt=Pe.isFileList(se))||je.indexOf("multipart/form-data")>-1){const Ct=this.env&&this.env.FormData;return _e(gt?{"files[]":se}:se,Ct&&new Ct,this.formSerializer)}}return ht||Ne?(me.setContentType("application/json",!1),Ri(se)):se}],transformResponse:[function(se){const me=this.transitional||li.transitional,je=me&&me.forcedJSONParsing,Ne=this.responseType==="json";if(Pe.isResponse(se)||Pe.isReadableStream(se))return se;if(se&&Pe.isString(se)&&(je&&!this.responseType||Ne)){const ht=!(me&&me.silentJSONParsing)&&Ne;try{return JSON.parse(se)}catch(gt){if(ht)throw gt.name==="SyntaxError"?Bt.from(gt,Bt.ERR_BAD_RESPONSE,this,null,this.response):gt}}return se}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qn.classes.FormData,Blob:qn.classes.Blob},validateStatus:function(se){return se>=200&&se<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Pe.forEach(["delete","get","head","post","put","patch"],se=>{li.headers[se]={}});var Wi=li;const ds=Pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var tn=se=>{const me={};let je,Ne,ht;return se&&se.split(`
`).forEach(function(gt){ht=gt.indexOf(":"),je=gt.substring(0,ht).trim().toLowerCase(),Ne=gt.substring(ht+1).trim(),!(!je||me[je]&&ds[je])&&(je==="set-cookie"?me[je]?me[je].push(Ne):me[je]=[Ne]:me[je]=me[je]?me[je]+", "+Ne:Ne)}),me};const ei=Symbol("internals");function On(se){return se&&String(se).trim().toLowerCase()}function ws(se){return se===!1||se==null?se:Pe.isArray(se)?se.map(ws):String(se)}function Ii(se){const me=Object.create(null),je=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let Ne;for(;Ne=je.exec(se);)me[Ne[1]]=Ne[2];return me}const Xr=se=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(se.trim());function Vn(se,me,je,Ne,ht){if(Pe.isFunction(Ne))return Ne.call(this,me,je);if(ht&&(me=je),!!Pe.isString(me)){if(Pe.isString(Ne))return me.indexOf(Ne)!==-1;if(Pe.isRegExp(Ne))return Ne.test(me)}}function Kr(se){return se.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(me,je,Ne)=>je.toUpperCase()+Ne)}function Rr(se,me){const je=Pe.toCamelCase(" "+me);["get","set","has"].forEach(Ne=>{Object.defineProperty(se,Ne+je,{value:function(ht,gt,Ct){return this[Ne].call(this,me,ht,gt,Ct)},configurable:!0})})}class da{constructor(me){me&&this.set(me)}set(me,je,Ne){const ht=this;function gt(un,kn,mn){const Cn=On(kn);if(!Cn)throw new Error("header name must be a non-empty string");const Un=Pe.findKey(ht,Cn);(!Un||ht[Un]===void 0||mn===!0||mn===void 0&&ht[Un]!==!1)&&(ht[Un||kn]=ws(un))}const Ct=(un,kn)=>Pe.forEach(un,(mn,Cn)=>gt(mn,Cn,kn));if(Pe.isPlainObject(me)||me instanceof this.constructor)Ct(me,je);else if(Pe.isString(me)&&(me=me.trim())&&!Xr(me))Ct(tn(me),je);else if(Pe.isHeaders(me))for(const[un,kn]of me.entries())gt(kn,un,Ne);else me!=null&&gt(je,me,Ne);return this}get(me,je){if(me=On(me),me){const Ne=Pe.findKey(this,me);if(Ne){const ht=this[Ne];if(!je)return ht;if(je===!0)return Ii(ht);if(Pe.isFunction(je))return je.call(this,ht,Ne);if(Pe.isRegExp(je))return je.exec(ht);throw new TypeError("parser must be boolean|regexp|function")}}}has(me,je){if(me=On(me),me){const Ne=Pe.findKey(this,me);return!!(Ne&&this[Ne]!==void 0&&(!je||Vn(this,this[Ne],Ne,je)))}return!1}delete(me,je){const Ne=this;let ht=!1;function gt(Ct){if(Ct=On(Ct),Ct){const un=Pe.findKey(Ne,Ct);un&&(!je||Vn(Ne,Ne[un],un,je))&&(delete Ne[un],ht=!0)}}return Pe.isArray(me)?me.forEach(gt):gt(me),ht}clear(me){const je=Object.keys(this);let Ne=je.length,ht=!1;for(;Ne--;){const gt=je[Ne];(!me||Vn(this,this[gt],gt,me,!0))&&(delete this[gt],ht=!0)}return ht}normalize(me){const je=this,Ne={};return Pe.forEach(this,(ht,gt)=>{const Ct=Pe.findKey(Ne,gt);if(Ct){je[Ct]=ws(ht),delete je[gt];return}const un=me?Kr(gt):String(gt).trim();un!==gt&&delete je[gt],je[un]=ws(ht),Ne[un]=!0}),this}concat(...me){return this.constructor.concat(this,...me)}toJSON(me){const je=Object.create(null);return Pe.forEach(this,(Ne,ht)=>{Ne!=null&&Ne!==!1&&(je[ht]=me&&Pe.isArray(Ne)?Ne.join(", "):Ne)}),je}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([me,je])=>me+": "+je).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(me){return me instanceof this?me:new this(me)}static concat(me,...je){const Ne=new this(me);return je.forEach(ht=>Ne.set(ht)),Ne}static accessor(me){const je=(this[ei]=this[ei]={accessors:{}}).accessors,Ne=this.prototype;function ht(gt){const Ct=On(gt);je[Ct]||(Rr(Ne,gt),je[Ct]=!0)}return Pe.isArray(me)?me.forEach(ht):ht(me),this}}da.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Pe.reduceDescriptors(da.prototype,({value:se},me)=>{let je=me[0].toUpperCase()+me.slice(1);return{get:()=>se,set(Ne){this[je]=Ne}}}),Pe.freezeMethods(da);var hs=da;function Qr(se,me){const je=this||Wi,Ne=me||je,ht=hs.from(Ne.headers);let gt=Ne.data;return Pe.forEach(se,function(Ct){gt=Ct.call(je,gt,ht.normalize(),me?me.status:void 0)}),ht.normalize(),gt}function ka(se){return!!(se&&se.__CANCEL__)}function Di(se,me,je){Bt.call(this,se!=null?se:"canceled",Bt.ERR_CANCELED,me,je),this.name="CanceledError"}Pe.inherits(Di,Bt,{__CANCEL__:!0});function ts(se,me,je){const Ne=je.config.validateStatus;!je.status||!Ne||Ne(je.status)?se(je):me(new Bt("Request failed with status code "+je.status,[Bt.ERR_BAD_REQUEST,Bt.ERR_BAD_RESPONSE][Math.floor(je.status/100)-4],je.config,je.request,je))}function ti(se){const me=/^([-+\w]{1,25})(:?\/\/|:)/.exec(se);return me&&me[1]||""}function ml(se,me){se=se||10;const je=new Array(se),Ne=new Array(se);let ht=0,gt=0,Ct;return me=me!==void 0?me:1e3,function(un){const kn=Date.now(),mn=Ne[gt];Ct||(Ct=kn),je[ht]=un,Ne[ht]=kn;let Cn=gt,Un=0;for(;Cn!==ht;)Un+=je[Cn++],Cn=Cn%se;if(ht=(ht+1)%se,ht===gt&&(gt=(gt+1)%se),kn-Ct<me)return;const oi=mn&&kn-mn;return oi?Math.round(Un*1e3/oi):void 0}}function gl(se,me){let je=0,Ne=1e3/me,ht,gt;const Ct=(un,kn=Date.now())=>{je=kn,ht=null,gt&&(clearTimeout(gt),gt=null),se.apply(null,un)};return[(...un)=>{const kn=Date.now(),mn=kn-je;mn>=Ne?Ct(un,kn):(ht=un,gt||(gt=setTimeout(()=>{gt=null,Ct(ht)},Ne-mn)))},()=>ht&&Ct(ht)]}const Ea=(se,me,je=3)=>{let Ne=0;const ht=ml(50,250);return gl(gt=>{const Ct=gt.loaded,un=gt.lengthComputable?gt.total:void 0,kn=Ct-Ne,mn=ht(kn),Cn=Ct<=un;Ne=Ct;const Un={loaded:Ct,total:un,progress:un?Ct/un:void 0,bytes:kn,rate:mn||void 0,estimated:mn&&un&&Cn?(un-Ct)/mn:void 0,event:gt,lengthComputable:un!=null,[me?"download":"upload"]:!0};se(Un)},je)},Ha=(se,me)=>{const je=se!=null;return[Ne=>me[0]({lengthComputable:je,total:se,loaded:Ne}),me[1]]},ha=se=>(...me)=>Pe.asap(()=>se(...me));var Ph=qn.hasStandardBrowserEnv?((se,me)=>je=>(je=new URL(je,qn.origin),se.protocol===je.protocol&&se.host===je.host&&(me||se.port===je.port)))(new URL(qn.origin),qn.navigator&&/(msie|trident)/i.test(qn.navigator.userAgent)):()=>!0,Cu=qn.hasStandardBrowserEnv?{write(se,me,je,Ne,ht,gt){const Ct=[se+"="+encodeURIComponent(me)];Pe.isNumber(je)&&Ct.push("expires="+new Date(je).toGMTString()),Pe.isString(Ne)&&Ct.push("path="+Ne),Pe.isString(ht)&&Ct.push("domain="+ht),gt===!0&&Ct.push("secure"),document.cookie=Ct.join("; ")},read(se){const me=document.cookie.match(new RegExp("(^|;\\s*)("+se+")=([^;]*)"));return me?decodeURIComponent(me[3]):null},remove(se){this.write(se,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Jr(se){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(se)}function yl(se,me){return me?se.replace(/\/?\/$/,"")+"/"+me.replace(/^\/+/,""):se}function jd(se,me,je){let Ne=!Jr(me);return se&&Ne||je==!1?yl(se,me):me}const Sc=se=>se instanceof hs?te({},se):se;function Bo(se,me){me=me||{};const je={};function Ne(mn,Cn,Un,oi){return Pe.isPlainObject(mn)&&Pe.isPlainObject(Cn)?Pe.merge.call({caseless:oi},mn,Cn):Pe.isPlainObject(Cn)?Pe.merge({},Cn):Pe.isArray(Cn)?Cn.slice():Cn}function ht(mn,Cn,Un,oi){if(Pe.isUndefined(Cn)){if(!Pe.isUndefined(mn))return Ne(void 0,mn,Un,oi)}else return Ne(mn,Cn,Un,oi)}function gt(mn,Cn){if(!Pe.isUndefined(Cn))return Ne(void 0,Cn)}function Ct(mn,Cn){if(Pe.isUndefined(Cn)){if(!Pe.isUndefined(mn))return Ne(void 0,mn)}else return Ne(void 0,Cn)}function un(mn,Cn,Un){if(Un in me)return Ne(mn,Cn);if(Un in se)return Ne(void 0,mn)}const kn={url:gt,method:gt,data:gt,baseURL:Ct,transformRequest:Ct,transformResponse:Ct,paramsSerializer:Ct,timeout:Ct,timeoutMessage:Ct,withCredentials:Ct,withXSRFToken:Ct,adapter:Ct,responseType:Ct,xsrfCookieName:Ct,xsrfHeaderName:Ct,onUploadProgress:Ct,onDownloadProgress:Ct,decompress:Ct,maxContentLength:Ct,maxBodyLength:Ct,beforeRedirect:Ct,transport:Ct,httpAgent:Ct,httpsAgent:Ct,cancelToken:Ct,socketPath:Ct,responseEncoding:Ct,validateStatus:un,headers:(mn,Cn,Un)=>ht(Sc(mn),Sc(Cn),Un,!0)};return Pe.forEach(Object.keys(Object.assign({},se,me)),function(mn){const Cn=kn[mn]||ht,Un=Cn(se[mn],me[mn],mn);Pe.isUndefined(Un)&&Cn!==un||(je[mn]=Un)}),je}var jc=se=>{const me=Bo({},se);let{data:je,withXSRFToken:Ne,xsrfHeaderName:ht,xsrfCookieName:gt,headers:Ct,auth:un}=me;me.headers=Ct=hs.from(Ct),me.url=Je(jd(me.baseURL,me.url),se.params,se.paramsSerializer),un&&Ct.set("Authorization","Basic "+btoa((un.username||"")+":"+(un.password?unescape(encodeURIComponent(un.password)):"")));let kn;if(Pe.isFormData(je)){if(qn.hasStandardBrowserEnv||qn.hasStandardBrowserWebWorkerEnv)Ct.setContentType(void 0);else if((kn=Ct.getContentType())!==!1){const[mn,...Cn]=kn?kn.split(";").map(Un=>Un.trim()).filter(Boolean):[];Ct.setContentType([mn||"multipart/form-data",...Cn].join("; "))}}if(qn.hasStandardBrowserEnv&&(Ne&&Pe.isFunction(Ne)&&(Ne=Ne(me)),Ne||Ne!==!1&&Ph(me.url))){const mn=ht&&gt&&Cu.read(gt);mn&&Ct.set(ht,mn)}return me},Rh=typeof XMLHttpRequest<"u"&&function(se){return new Promise(function(me,je){const Ne=jc(se);let ht=Ne.data;const gt=hs.from(Ne.headers).normalize();let{responseType:Ct,onUploadProgress:un,onDownloadProgress:kn}=Ne,mn,Cn,Un,oi,ri;function Gn(){oi&&oi(),ri&&ri(),Ne.cancelToken&&Ne.cancelToken.unsubscribe(mn),Ne.signal&&Ne.signal.removeEventListener("abort",mn)}let Dn=new XMLHttpRequest;Dn.open(Ne.method.toUpperCase(),Ne.url,!0),Dn.timeout=Ne.timeout;function pr(){if(!Dn)return;const ns=hs.from("getAllResponseHeaders"in Dn&&Dn.getAllResponseHeaders()),Ps={data:!Ct||Ct==="text"||Ct==="json"?Dn.responseText:Dn.response,status:Dn.status,statusText:Dn.statusText,headers:ns,config:se,request:Dn};ts(function(Vo){me(Vo),Gn()},function(Vo){je(Vo),Gn()},Ps),Dn=null}"onloadend"in Dn?Dn.onloadend=pr:Dn.onreadystatechange=function(){!Dn||Dn.readyState!==4||Dn.status===0&&!(Dn.responseURL&&Dn.responseURL.indexOf("file:")===0)||setTimeout(pr)},Dn.onabort=function(){Dn&&(je(new Bt("Request aborted",Bt.ECONNABORTED,se,Dn)),Dn=null)},Dn.onerror=function(){je(new Bt("Network Error",Bt.ERR_NETWORK,se,Dn)),Dn=null},Dn.ontimeout=function(){let ns=Ne.timeout?"timeout of "+Ne.timeout+"ms exceeded":"timeout exceeded";const Ps=Ne.transitional||Ft;Ne.timeoutErrorMessage&&(ns=Ne.timeoutErrorMessage),je(new Bt(ns,Ps.clarifyTimeoutError?Bt.ETIMEDOUT:Bt.ECONNABORTED,se,Dn)),Dn=null},ht===void 0&&gt.setContentType(null),"setRequestHeader"in Dn&&Pe.forEach(gt.toJSON(),function(ns,Ps){Dn.setRequestHeader(Ps,ns)}),Pe.isUndefined(Ne.withCredentials)||(Dn.withCredentials=!!Ne.withCredentials),Ct&&Ct!=="json"&&(Dn.responseType=Ne.responseType),kn&&([Un,ri]=Ea(kn,!0),Dn.addEventListener("progress",Un)),un&&Dn.upload&&([Cn,oi]=Ea(un),Dn.upload.addEventListener("progress",Cn),Dn.upload.addEventListener("loadend",oi)),(Ne.cancelToken||Ne.signal)&&(mn=ns=>{Dn&&(je(!ns||ns.type?new Di(null,se,Dn):ns),Dn.abort(),Dn=null)},Ne.cancelToken&&Ne.cancelToken.subscribe(mn),Ne.signal&&(Ne.signal.aborted?mn():Ne.signal.addEventListener("abort",mn)));const Si=ti(Ne.url);if(Si&&qn.protocols.indexOf(Si)===-1){je(new Bt("Unsupported protocol "+Si+":",Bt.ERR_BAD_REQUEST,se));return}Dn.send(ht||null)})},Dr=(se,me)=>{const{length:je}=se=se?se.filter(Boolean):[];if(me||je){let Ne=new AbortController,ht;const gt=function(mn){if(!ht){ht=!0,un();const Cn=mn instanceof Error?mn:this.reason;Ne.abort(Cn instanceof Bt?Cn:new Di(Cn instanceof Error?Cn.message:Cn))}};let Ct=me&&setTimeout(()=>{Ct=null,gt(new Bt(`timeout ${me} of ms exceeded`,Bt.ETIMEDOUT))},me);const un=()=>{se&&(Ct&&clearTimeout(Ct),Ct=null,se.forEach(mn=>{mn.unsubscribe?mn.unsubscribe(gt):mn.removeEventListener("abort",gt)}),se=null)};se.forEach(mn=>mn.addEventListener("abort",gt));const{signal:kn}=Ne;return kn.unsubscribe=()=>Pe.asap(un),kn}};const vo=function*(se,me){let je=se.byteLength;if(je<me){yield se;return}let Ne=0,ht;for(;Ne<je;)ht=Ne+me,yield se.slice(Ne,ht),Ne=ht},Tu=function(se,me){return Ex(this,null,function*(){try{for(var je=ww(ku(se)),Ne,ht,gt;Ne=!(ht=yield new au(je.next())).done;Ne=!1){const Ct=ht.value;yield*Mx(vo(Ct,me))}}catch(ht){gt=[ht]}finally{try{Ne&&(ht=je.return)&&(yield new au(ht.call(je)))}finally{if(gt)throw gt[0]}}})},ku=function(se){return Ex(this,null,function*(){if(se[Symbol.asyncIterator]){yield*Mx(se);return}const me=se.getReader();try{for(;;){const{done:je,value:Ne}=yield new au(me.read());if(je)break;yield Ne}}finally{yield new au(me.cancel())}})},ea=(se,me,je,Ne)=>{const ht=Tu(se,me);let gt=0,Ct,un=mn=>{Ct||(Ct=!0,Ne&&Ne(mn))};return new ReadableStream({pull(mn){return Gt(this,null,function*(){try{const{done:Cn,value:Un}=yield ht.next();if(Cn){un(),mn.close();return}let oi=Un.byteLength;if(je){let ri=gt+=oi;je(ri)}mn.enqueue(new Uint8Array(Un))}catch(Cn){throw un(Cn),Cn}})},cancel(mn){return un(mn),ht.return()}},{highWaterMark:2})},xl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Cd=xl&&typeof ReadableStream=="function",qa=xl&&(typeof TextEncoder=="function"?(se=>me=>se.encode(me))(new TextEncoder):se=>Gt(null,null,function*(){return new Uint8Array(yield new Response(se).arrayBuffer())})),Vl=(se,...me)=>{try{return!!se(...me)}catch(je){return!1}},Eu=Cd&&Vl(()=>{let se=!1;const me=new Request(qn.origin,{body:new ReadableStream,method:"POST",get duplex(){return se=!0,"half"}}).headers.has("Content-Type");return se&&!me}),or=64*1024,ci=Cd&&Vl(()=>Pe.isReadableStream(new Response("").body)),wo={stream:ci&&(se=>se.body)};xl&&(se=>{["text","arrayBuffer","blob","formData","stream"].forEach(me=>{!wo[me]&&(wo[me]=Pe.isFunction(se[me])?je=>je[me]():(je,Ne)=>{throw new Bt(`Response type '${me}' is not supported`,Bt.ERR_NOT_SUPPORT,Ne)})})})(new Response);const Sr=se=>Gt(null,null,function*(){if(se==null)return 0;if(Pe.isBlob(se))return se.size;if(Pe.isSpecCompliantForm(se))return(yield new Request(qn.origin,{method:"POST",body:se}).arrayBuffer()).byteLength;if(Pe.isArrayBufferView(se)||Pe.isArrayBuffer(se))return se.byteLength;if(Pe.isURLSearchParams(se)&&(se=se+""),Pe.isString(se))return(yield qa(se)).byteLength}),Ga=(se,me)=>Gt(null,null,function*(){const je=Pe.toFiniteNumber(se.getContentLength());return je!=null?je:Sr(me)});var ui=xl&&(se=>Gt(null,null,function*(){let{url:me,method:je,data:Ne,signal:ht,cancelToken:gt,timeout:Ct,onDownloadProgress:un,onUploadProgress:kn,responseType:mn,headers:Cn,withCredentials:Un="same-origin",fetchOptions:oi}=jc(se);mn=mn?(mn+"").toLowerCase():"text";let ri=Dr([ht,gt&&gt.toAbortSignal()],Ct),Gn;const Dn=ri&&ri.unsubscribe&&(()=>{ri.unsubscribe()});let pr;try{if(kn&&Eu&&je!=="get"&&je!=="head"&&(pr=yield Ga(Cn,Ne))!==0){let Wa=new Request(me,{method:"POST",body:Ne,duplex:"half"}),Za;if(Pe.isFormData(Ne)&&(Za=Wa.headers.get("content-type"))&&Cn.setContentType(Za),Wa.body){const[fa,zr]=Ha(pr,Ea(ha(kn)));Ne=ea(Wa.body,or,fa,zr)}}Pe.isString(Un)||(Un=Un?"include":"omit");const Si="credentials"in Request.prototype;Gn=new Request(me,Ee(te({},oi),{signal:ri,method:je.toUpperCase(),headers:Cn.normalize().toJSON(),body:Ne,duplex:"half",credentials:Si?Un:void 0}));let ns=yield fetch(Gn);const Ps=ci&&(mn==="stream"||mn==="response");if(ci&&(un||Ps&&Dn)){const Wa={};["status","statusText","headers"].forEach(Td=>{Wa[Td]=ns[Td]});const Za=Pe.toFiniteNumber(ns.headers.get("content-length")),[fa,zr]=un&&Ha(Za,Ea(ha(un),!0))||[];ns=new Response(ea(ns.body,or,fa,()=>{zr&&zr(),Dn&&Dn()}),Wa)}mn=mn||"text";let Vo=yield wo[Pe.findKey(wo,mn)||"text"](ns,se);return!Ps&&Dn&&Dn(),yield new Promise((Wa,Za)=>{ts(Wa,Za,{data:Vo,headers:hs.from(ns.headers),status:ns.status,statusText:ns.statusText,config:se,request:Gn})})}catch(Si){throw Dn&&Dn(),Si&&Si.name==="TypeError"&&/fetch/i.test(Si.message)?Object.assign(new Bt("Network Error",Bt.ERR_NETWORK,se,Gn),{cause:Si.cause||Si}):Bt.from(Si,Si&&Si.code,se,Gn)}}));const So={http:yn,xhr:Rh,fetch:ui};Pe.forEach(So,(se,me)=>{if(se){try{Object.defineProperty(se,"name",{value:me})}catch(je){}Object.defineProperty(se,"adapterName",{value:me})}});const Ma=se=>`- ${se}`,Na=se=>Pe.isFunction(se)||se===null||se===!1;var fr={getAdapter:se=>{se=Pe.isArray(se)?se:[se];const{length:me}=se;let je,Ne;const ht={};for(let gt=0;gt<me;gt++){je=se[gt];let Ct;if(Ne=je,!Na(je)&&(Ne=So[(Ct=String(je)).toLowerCase()],Ne===void 0))throw new Bt(`Unknown adapter '${Ct}'`);if(Ne)break;ht[Ct||"#"+gt]=Ne}if(!Ne){const gt=Object.entries(ht).map(([un,kn])=>`adapter ${un} `+(kn===!1?"is not supported by the environment":"is not available in the build"));let Ct=me?gt.length>1?`since :
`+gt.map(Ma).join(`
`):" "+Ma(gt[0]):"as no adapter specified";throw new Bt("There is no suitable adapter to dispatch the request "+Ct,"ERR_NOT_SUPPORT")}return Ne},adapters:So};function Ns(se){if(se.cancelToken&&se.cancelToken.throwIfRequested(),se.signal&&se.signal.aborted)throw new Di(null,se)}function Fs(se){return Ns(se),se.headers=hs.from(se.headers),se.data=Qr.call(se,se.transformRequest),["post","put","patch"].indexOf(se.method)!==-1&&se.headers.setContentType("application/x-www-form-urlencoded",!1),fr.getAdapter(se.adapter||Wi.adapter)(se).then(function(me){return Ns(se),me.data=Qr.call(se,se.transformResponse,me),me.headers=hs.from(me.headers),me},function(me){return ka(me)||(Ns(se),me&&me.response&&(me.response.data=Qr.call(se,se.transformResponse,me.response),me.response.headers=hs.from(me.response.headers))),Promise.reject(me)})}const Ss="1.8.2",vi={};["object","boolean","number","function","string","symbol"].forEach((se,me)=>{vi[se]=function(je){return typeof je===se||"a"+(me<1?"n ":" ")+se}});const jo={};vi.transitional=function(se,me,je){function Ne(ht,gt){return"[Axios v"+Ss+"] Transitional option '"+ht+"'"+gt+(je?". "+je:"")}return(ht,gt,Ct)=>{if(se===!1)throw new Bt(Ne(gt," has been removed"+(me?" in "+me:"")),Bt.ERR_DEPRECATED);return me&&!jo[gt]&&(jo[gt]=!0,console.warn(Ne(gt," has been deprecated since v"+me+" and will be removed in the near future"))),se?se(ht,gt,Ct):!0}},vi.spelling=function(se){return(me,je)=>(console.warn(`${je} is likely a misspelling of ${se}`),!0)};function Zs(se,me,je){if(typeof se!="object")throw new Bt("options must be an object",Bt.ERR_BAD_OPTION_VALUE);const Ne=Object.keys(se);let ht=Ne.length;for(;ht-- >0;){const gt=Ne[ht],Ct=me[gt];if(Ct){const un=se[gt],kn=un===void 0||Ct(un,gt,se);if(kn!==!0)throw new Bt("option "+gt+" must be "+kn,Bt.ERR_BAD_OPTION_VALUE);continue}if(je!==!0)throw new Bt("Unknown option "+gt,Bt.ERR_BAD_OPTION)}}var ys={assertOptions:Zs,validators:vi};const rs=ys.validators;class Aa{constructor(me){this.defaults=me,this.interceptors={request:new qt,response:new qt}}request(me,je){return Gt(this,null,function*(){try{return yield this._request(me,je)}catch(Ne){if(Ne instanceof Error){let ht={};Error.captureStackTrace?Error.captureStackTrace(ht):ht=new Error;const gt=ht.stack?ht.stack.replace(/^.+\n/,""):"";try{Ne.stack?gt&&!String(Ne.stack).endsWith(gt.replace(/^.+\n.+\n/,""))&&(Ne.stack+=`
`+gt):Ne.stack=gt}catch(Ct){}}throw Ne}})}_request(me,je){typeof me=="string"?(je=je||{},je.url=me):je=me||{},je=Bo(this.defaults,je);const{transitional:Ne,paramsSerializer:ht,headers:gt}=je;Ne!==void 0&&ys.assertOptions(Ne,{silentJSONParsing:rs.transitional(rs.boolean),forcedJSONParsing:rs.transitional(rs.boolean),clarifyTimeoutError:rs.transitional(rs.boolean)},!1),ht!=null&&(Pe.isFunction(ht)?je.paramsSerializer={serialize:ht}:ys.assertOptions(ht,{encode:rs.function,serialize:rs.function},!0)),je.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?je.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:je.allowAbsoluteUrls=!0),ys.assertOptions(je,{baseUrl:rs.spelling("baseURL"),withXsrfToken:rs.spelling("withXSRFToken")},!0),je.method=(je.method||this.defaults.method||"get").toLowerCase();let Ct=gt&&Pe.merge(gt.common,gt[je.method]);gt&&Pe.forEach(["delete","get","head","post","put","patch","common"],Gn=>{delete gt[Gn]}),je.headers=hs.concat(Ct,gt);const un=[];let kn=!0;this.interceptors.request.forEach(function(Gn){typeof Gn.runWhen=="function"&&Gn.runWhen(je)===!1||(kn=kn&&Gn.synchronous,un.unshift(Gn.fulfilled,Gn.rejected))});const mn=[];this.interceptors.response.forEach(function(Gn){mn.push(Gn.fulfilled,Gn.rejected)});let Cn,Un=0,oi;if(!kn){const Gn=[Fs.bind(this),void 0];for(Gn.unshift.apply(Gn,un),Gn.push.apply(Gn,mn),oi=Gn.length,Cn=Promise.resolve(je);Un<oi;)Cn=Cn.then(Gn[Un++],Gn[Un++]);return Cn}oi=un.length;let ri=je;for(Un=0;Un<oi;){const Gn=un[Un++],Dn=un[Un++];try{ri=Gn(ri)}catch(pr){Dn.call(this,pr);break}}try{Cn=Fs.call(this,ri)}catch(Gn){return Promise.reject(Gn)}for(Un=0,oi=mn.length;Un<oi;)Cn=Cn.then(mn[Un++],mn[Un++]);return Cn}getUri(me){me=Bo(this.defaults,me);const je=jd(me.baseURL,me.url,me.allowAbsoluteUrls);return Je(je,me.params,me.paramsSerializer)}}Pe.forEach(["delete","get","head","options"],function(se){Aa.prototype[se]=function(me,je){return this.request(Bo(je||{},{method:se,url:me,data:(je||{}).data}))}}),Pe.forEach(["post","put","patch"],function(se){function me(je){return function(Ne,ht,gt){return this.request(Bo(gt||{},{method:se,headers:je?{"Content-Type":"multipart/form-data"}:{},url:Ne,data:ht}))}}Aa.prototype[se]=me(),Aa.prototype[se+"Form"]=me(!0)});var Mi=Aa;class Zi{constructor(me){if(typeof me!="function")throw new TypeError("executor must be a function.");let je;this.promise=new Promise(function(ht){je=ht});const Ne=this;this.promise.then(ht=>{if(!Ne._listeners)return;let gt=Ne._listeners.length;for(;gt-- >0;)Ne._listeners[gt](ht);Ne._listeners=null}),this.promise.then=ht=>{let gt;const Ct=new Promise(un=>{Ne.subscribe(un),gt=un}).then(ht);return Ct.cancel=function(){Ne.unsubscribe(gt)},Ct},me(function(ht,gt,Ct){Ne.reason||(Ne.reason=new Di(ht,gt,Ct),je(Ne.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(me){if(this.reason){me(this.reason);return}this._listeners?this._listeners.push(me):this._listeners=[me]}unsubscribe(me){if(!this._listeners)return;const je=this._listeners.indexOf(me);je!==-1&&this._listeners.splice(je,1)}toAbortSignal(){const me=new AbortController,je=Ne=>{me.abort(Ne)};return this.subscribe(je),me.signal.unsubscribe=()=>this.unsubscribe(je),me.signal}static source(){let me;return{token:new Zi(function(je){me=je}),cancel:me}}}var di=Zi;function Kn(se){return function(me){return se.apply(null,me)}}function Ys(se){return Pe.isObject(se)&&se.isAxiosError===!0}const Xn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xn).forEach(([se,me])=>{Xn[me]=se});var _l=Xn;function As(se){const me=new Mi(se),je=e(Mi.prototype.request,me);return Pe.extend(je,Mi.prototype,me,{allOwnKeys:!0}),Pe.extend(je,me,null,{allOwnKeys:!0}),je.create=function(Ne){return As(Bo(se,Ne))},je}const js=As(Wi);return js.Axios=Mi,js.CanceledError=Di,js.CancelToken=di,js.isCancel=ka,js.VERSION=Ss,js.toFormData=_e,js.AxiosError=Bt,js.Cancel=js.CanceledError,js.all=function(se){return Promise.all(se)},js.spread=Kn,js.isAxiosError=Ys,js.mergeConfig=Bo,js.AxiosHeaders=hs,js.formToJSON=se=>lt(Pe.isHTMLForm(se)?new FormData(se):se),js.getAdapter=fr.getAdapter,js.HttpStatusCode=_l,js.default=js,Mw=js,Mw}var rk;function uA(){if(rk)return lh;rk=1;var e=lh&&lh.__assign||function(){return e=Object.assign||function(o){for(var u,c=1,a=arguments.length;c<a;c++){u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(o[g]=u[g])}return o},e.apply(this,arguments)};Object.defineProperty(lh,"__esModule",{value:!0}),lh.getRequestHeaders=lh.getAxiosClient=void 0;var t=eI();function n(o,u,c,a,g){return t.default.create({baseURL:o,headers:i(u,a,c,o,g),withCredentials:!0})}lh.getAxiosClient=n;function i(o,u,c,a,g){o===void 0&&(o=!1);var _={Accept:"application/json","Content-Type":"application/json; charset=utf-8"};return o&&u&&c&&(_.Authorization="".concat(u," ").concat(c())),typeof window<"u"&&typeof document<"u"&&(window.location&&(a&&a!==window.location.origin||(_["X-Frappe-Site-Name"]=window.location.hostname)),window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(_["X-Frappe-CSRF-Token"]=window.csrf_token)),e(e({},_),g!=null?g:{})}return lh.getRequestHeaders=i,lh}var ak;function dA(){if(ak)return cu;ak=1;var e=cu&&cu.__assign||function(){return e=Object.assign||function(u){for(var c,a=1,g=arguments.length;a<g;a++){c=arguments[a];for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(u[_]=c[_])}return u},e.apply(this,arguments)},t=cu&&cu.__awaiter||function(u,c,a,g){function _(S){return S instanceof a?S:new a(function(E){E(S)})}return new(a||(a=Promise))(function(S,E){function A(B){try{z(g.next(B))}catch($){E($)}}function N(B){try{z(g.throw(B))}catch($){E($)}}function z(B){B.done?S(B.value):_(B.value).then(A,N)}z((g=g.apply(u,c||[])).next())})},n=cu&&cu.__generator||function(u,c){var a={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},g,_,S,E;return E={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function A(z){return function(B){return N([z,B])}}function N(z){if(g)throw new TypeError("Generator is already executing.");for(;E&&(E=0,z[0]&&(a=0)),a;)try{if(g=1,_&&(S=z[0]&2?_.return:z[0]?_.throw||((S=_.return)&&S.call(_),0):_.next)&&!(S=S.call(_,z[1])).done)return S;switch(_=0,S&&(z=[z[0]&2,S.value]),z[0]){case 0:case 1:S=z;break;case 4:return a.label++,{value:z[1],done:!1};case 5:a.label++,_=z[1],z=[0];continue;case 7:z=a.ops.pop(),a.trys.pop();continue;default:if(S=a.trys,!(S=S.length>0&&S[S.length-1])&&(z[0]===6||z[0]===2)){a=0;continue}if(z[0]===3&&(!S||z[1]>S[0]&&z[1]<S[3])){a.label=z[1];break}if(z[0]===6&&a.label<S[1]){a.label=S[1],S=z;break}if(S&&a.label<S[2]){a.label=S[2],a.ops.push(z);break}S[2]&&a.ops.pop(),a.trys.pop();continue}z=c.call(u,a)}catch(B){z=[6,B],_=0}finally{g=S=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}};Object.defineProperty(cu,"__esModule",{value:!0}),cu.FrappeFileUpload=void 0;var i=uA(),o=function(){function u(c,a,g,_,S,E){this.appURL=c,this.axios=a,this.useToken=g!=null?g:!1,this.token=_,this.tokenType=S,this.customHeaders=E}return u.prototype.uploadFile=function(c,a,g,_){return _===void 0&&(_="upload_file"),t(this,void 0,void 0,function(){var S,E,A,N,z,B,$,q;return n(this,function(W){return S=new FormData,c&&S.append("file",c,c.name),E=a.isPrivate,A=a.folder,N=a.file_url,z=a.doctype,B=a.docname,$=a.fieldname,q=a.otherData,E&&S.append("is_private","1"),A&&S.append("folder",A),N&&S.append("file_url",N),z&&B&&(S.append("doctype",z),S.append("docname",B),$&&S.append("fieldname",$)),q&&Object.keys(q).forEach(function(Q){var Z=q[Q];S.append(Q,Z)}),[2,this.axios.post("/api/method/".concat(_),S,{onUploadProgress:function(Q){g&&g(Q.loaded,Q.total,Q)},headers:e(e({},(0,i.getRequestHeaders)(this.useToken,this.tokenType,this.token,this.appURL,this.customHeaders)),{"Content-Type":"multipart/form-data"})}).catch(function(Q){var Z,K;throw e(e({},Q.response.data),{httpStatus:Q.response.status,httpStatusText:Q.response.statusText,message:(Z=Q.response.data.message)!==null&&Z!==void 0?Z:"There was an error while uploading the file.",exception:(K=Q.response.data.exception)!==null&&K!==void 0?K:""})})]})})},u}();return cu.FrappeFileUpload=o,cu}var ok;function tI(){if(ok)return Px;ok=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.FrappeApp=void 0;var e=hA(),t=lA(),n=cA(),i=dA(),o=uA(),u=function(){function c(a,g,_,S){var E,A;this.url=a,this.name=_!=null?_:"FrappeApp",this.useToken=(E=g==null?void 0:g.useToken)!==null&&E!==void 0?E:!1,this.token=g==null?void 0:g.token,this.tokenType=(A=g==null?void 0:g.type)!==null&&A!==void 0?A:"Bearer",this.customHeaders=S,this.axios=(0,o.getAxiosClient)(this.url,this.useToken,this.token,this.tokenType,this.customHeaders)}return c.prototype.auth=function(){return new e.FrappeAuth(this.url,this.axios,this.useToken,this.token,this.tokenType)},c.prototype.db=function(){return new n.FrappeDB(this.url,this.axios,this.useToken,this.token,this.tokenType)},c.prototype.file=function(){return new i.FrappeFileUpload(this.url,this.axios,this.useToken,this.token,this.tokenType,this.customHeaders)},c.prototype.call=function(){return new t.FrappeCall(this.url,this.axios,this.useToken,this.token,this.tokenType)},c}();return Px.FrappeApp=u,Px}var uu={},lk;function nI(){if(lk)return uu;lk=1;var e=uu&&uu.__assign||function(){return e=Object.assign||function(o){for(var u,c=1,a=arguments.length;c<a;c++){u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(o[g]=u[g])}return o},e.apply(this,arguments)},t=uu&&uu.__awaiter||function(o,u,c,a){function g(_){return _ instanceof c?_:new c(function(S){S(_)})}return new(c||(c=Promise))(function(_,S){function E(z){try{N(a.next(z))}catch(B){S(B)}}function A(z){try{N(a.throw(z))}catch(B){S(B)}}function N(z){z.done?_(z.value):g(z.value).then(E,A)}N((a=a.apply(o,u||[])).next())})},n=uu&&uu.__generator||function(o,u){var c={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},a,g,_,S;return S={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function E(N){return function(z){return A([N,z])}}function A(N){if(a)throw new TypeError("Generator is already executing.");for(;S&&(S=0,N[0]&&(c=0)),c;)try{if(a=1,g&&(_=N[0]&2?g.return:N[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,N[1])).done)return _;switch(g=0,_&&(N=[N[0]&2,_.value]),N[0]){case 0:case 1:_=N;break;case 4:return c.label++,{value:N[1],done:!1};case 5:c.label++,g=N[1],N=[0];continue;case 7:N=c.ops.pop(),c.trys.pop();continue;default:if(_=c.trys,!(_=_.length>0&&_[_.length-1])&&(N[0]===6||N[0]===2)){c=0;continue}if(N[0]===3&&(!_||N[1]>_[0]&&N[1]<_[3])){c.label=N[1];break}if(N[0]===6&&c.label<_[1]){c.label=_[1],_=N;break}if(_&&c.label<_[2]){c.label=_[2],c.ops.push(N);break}_[2]&&c.ops.pop(),c.trys.pop();continue}N=u.call(o,c)}catch(z){N=[6,z],g=0}finally{a=_=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}};Object.defineProperty(uu,"__esModule",{value:!0}),uu.FrappeAuth=void 0;var i=function(){function o(u,c,a,g,_){this.appURL=u,this.axios=c,this.useToken=a!=null?a:!1,this.token=g,this.tokenType=_}return o.prototype.loginWithUsernamePassword=function(u){return t(this,void 0,void 0,function(){return n(this,function(c){return[2,this.axios.post("/api/method/login",{usr:u.username,pwd:u.password,otp:u.otp,tmp_id:u.tmp_id,device:u.device}).then(function(a){return a.data}).catch(function(a){var g,_;throw e(e({},a.response.data),{httpStatus:a.response.status,httpStatusText:a.response.statusText,message:(g=a.response.data.message)!==null&&g!==void 0?g:"There was an error while logging in",exception:(_=a.response.data.exception)!==null&&_!==void 0?_:""})})]})})},o.prototype.getLoggedInUser=function(){return t(this,void 0,void 0,function(){return n(this,function(u){return[2,this.axios.get("/api/method/frappe.auth.get_logged_user").then(function(c){return c.data.message}).catch(function(c){var a;throw e(e({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:"There was an error while fetching the logged in user",exception:(a=c.response.data.exception)!==null&&a!==void 0?a:""})})]})})},o.prototype.logout=function(){return t(this,void 0,void 0,function(){return n(this,function(u){return[2,this.axios.post("/api/method/logout",{}).then(function(){}).catch(function(c){var a,g;throw e(e({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:(a=c.response.data.message)!==null&&a!==void 0?a:"There was an error while logging out",exception:(g=c.response.data.exception)!==null&&g!==void 0?g:""})})]})})},o.prototype.forgetPassword=function(u){return t(this,void 0,void 0,function(){return n(this,function(c){return[2,this.axios.post("/",{cmd:"frappe.core.doctype.user.user.reset_password",user:u}).then(function(){}).catch(function(a){var g,_;throw e(e({},a.response.data),{httpStatus:a.response.status,httpStatusText:a.response.statusText,message:(g=a.response.data.message)!==null&&g!==void 0?g:"There was an error sending password reset email.",exception:(_=a.response.data.exception)!==null&&_!==void 0?_:""})})]})})},o}();return uu.FrappeAuth=i,uu}var ck;function hA(){return ck||(ck=1,function(e){var t=zg&&zg.__createBinding||(Object.create?function(i,o,u,c){c===void 0&&(c=u);var a=Object.getOwnPropertyDescriptor(o,u);(!a||("get"in a?!o.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(i,c,a)}:function(i,o,u,c){c===void 0&&(c=u),i[c]=o[u]}),n=zg&&zg.__exportStar||function(i,o){for(var u in i)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&t(o,i,u)};Object.defineProperty(e,"__esModule",{value:!0}),n(tI(),e),n(nI(),e),n(cA(),e),n(dA(),e),n(lA(),e)}(zg)),zg}var iI=hA(),uk={exports:{}},Nw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dk;function sI(){if(dk)return Nw;dk=1;var e=Pt;function t(E,A){return E===A&&(E!==0||1/E===1/A)||E!==E&&A!==A}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,o=e.useEffect,u=e.useLayoutEffect,c=e.useDebugValue;function a(E,A){var N=A(),z=i({inst:{value:N,getSnapshot:A}}),B=z[0].inst,$=z[1];return u(function(){B.value=N,B.getSnapshot=A,g(B)&&$({inst:B})},[E,N,A]),o(function(){return g(B)&&$({inst:B}),E(function(){g(B)&&$({inst:B})})},[E]),c(N),N}function g(E){var A=E.getSnapshot;E=E.value;try{var N=A();return!n(E,N)}catch(z){return!0}}function _(E,A){return A()}var S=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_:a;return Nw.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:S,Nw}var hk;function rI(){return hk||(hk=1,uk.exports=sI()),uk.exports}var aI=rI();const fA=0,pA=1,mA=2,fk=3;var pk=Object.prototype.hasOwnProperty;function Q2(e,t){var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&Q2(e[i],t[i]););return i===-1}if(!n||typeof e=="object"){i=0;for(n in e)if(pk.call(e,n)&&++i&&!pk.call(t,n)||!(n in t)||!Q2(e[n],t[n]))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}const gh=new WeakMap,Df=()=>{},mo=Df(),Cv=Object,es=e=>e===mo,pu=e=>typeof e=="function",Sh=(e,t)=>te(te({},e),t),gA=e=>pu(e.then),Aw={},tb={},Uj="undefined",W0=typeof window!=Uj,J2=typeof document!=Uj,oI=W0&&"Deno"in window,lI=()=>W0&&typeof window.requestAnimationFrame!=Uj,yA=(e,t)=>{const n=gh.get(e);return[()=>!es(t)&&e.get(t)||Aw,i=>{if(!es(t)){const o=e.get(t);t in tb||(tb[t]=o),n[5](t,Sh(o,i),o||Aw)}},n[6],()=>!es(t)&&t in tb?tb[t]:!es(t)&&e.get(t)||Aw]};let eS=!0;const cI=()=>eS,[tS,nS]=W0&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Df,Df],uI=()=>{const e=J2&&document.visibilityState;return es(e)||e!=="hidden"},dI=e=>(J2&&document.addEventListener("visibilitychange",e),tS("focus",e),()=>{J2&&document.removeEventListener("visibilitychange",e),nS("focus",e)}),hI=e=>{const t=()=>{eS=!0,e()},n=()=>{eS=!1};return tS("online",t),tS("offline",n),()=>{nS("online",t),nS("offline",n)}},fI={isOnline:cI,isVisible:uI},pI={initFocus:dI,initReconnect:hI},mk=!Pt.useId,S0=!W0||oI,mI=e=>lI()?window.requestAnimationFrame(e):setTimeout(e,1),$b=S0?L.useEffect:L.useLayoutEffect,Pw=typeof navigator<"u"&&navigator.connection,gk=!S0&&Pw&&(["slow-2g","2g"].includes(Pw.effectiveType)||Pw.saveData),nb=new WeakMap,Rw=(e,t)=>Cv.prototype.toString.call(e)===`[object ${t}]`;let gI=0;const iS=e=>{const t=typeof e,n=Rw(e,"Date"),i=Rw(e,"RegExp"),o=Rw(e,"Object");let u,c;if(Cv(e)===e&&!n&&!i){if(u=nb.get(e),u)return u;if(u=++gI+"~",nb.set(e,u),Array.isArray(e)){for(u="@",c=0;c<e.length;c++)u+=iS(e[c])+",";nb.set(e,u)}if(o){u="#";const a=Cv.keys(e).sort();for(;!es(c=a.pop());)es(e[c])||(u+=c+":"+iS(e[c])+",");nb.set(e,u)}}else u=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return u},$j=e=>{if(pu(e))try{e=e()}catch(n){e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?iS(e):"",[e,t]};let yI=0;const sS=()=>++yI;function xA(...e){return Gt(this,null,function*(){const[t,n,i,o]=e,u=Sh({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let c=u.populateCache;const a=u.rollbackOnError;let g=u.optimisticData;const _=A=>typeof a=="function"?a(A):a!==!1,S=u.throwOnError;if(pu(n)){const A=n,N=[],z=t.keys();for(const B of z)!/^\$(inf|sub)\$/.test(B)&&A(t.get(B)._k)&&N.push(B);return Promise.all(N.map(E))}return E(n);function E(A){return Gt(this,null,function*(){const[N]=$j(A);if(!N)return;const[z,B]=yA(t,N),[$,q,W,Q]=gh.get(t),Z=()=>{const rt=$[N];return(pu(u.revalidate)?u.revalidate(z().data,A):u.revalidate!==!1)&&(delete W[N],delete Q[N],rt&&rt[0])?rt[0](mA).then(()=>z().data):z().data};if(e.length<3)return Z();let K=i,le;const ge=sS();q[N]=[ge,0];const he=!es(g),pe=z(),Ie=pe.data,He=pe._c,Ye=es(He)?Ie:He;if(he&&(g=pu(g)?g(Ye,Ie):g,B({data:g,_c:Ye})),pu(K))try{K=K(Ye)}catch(rt){le=rt}if(K&&gA(K))if(K=yield K.catch(rt=>{le=rt}),ge!==q[N][0]){if(le)throw le;return K}else le&&he&&_(le)&&(c=!0,B({data:Ye,_c:mo}));if(c&&!le)if(pu(c)){const rt=c(K,Ye);B({data:rt,error:mo,_c:mo})}else B({data:K,error:mo,_c:mo});if(q[N][1]=sS(),Promise.resolve(Z()).then(()=>{B({_c:mo})}),le){if(S)throw le;return}return K})}})}const yk=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},_A=(e,t)=>{if(!gh.has(e)){const n=Sh(pI,t),i=Object.create(null),o=xA.bind(mo,e);let u=Df;const c=Object.create(null),a=(S,E)=>{const A=c[S]||[];return c[S]=A,A.push(E),()=>A.splice(A.indexOf(E),1)},g=(S,E,A)=>{e.set(S,E);const N=c[S];if(N)for(const z of N)z(E,A)},_=()=>{if(!gh.has(e)&&(gh.set(e,[i,Object.create(null),Object.create(null),Object.create(null),o,g,a]),!S0)){const S=n.initFocus(setTimeout.bind(mo,yk.bind(mo,i,fA))),E=n.initReconnect(setTimeout.bind(mo,yk.bind(mo,i,pA)));u=()=>{S&&S(),E&&E(),gh.delete(e)}}};return _(),[e,o,_,u]}return[e,gh.get(e)[4]]},xI=(e,t,n,i,o)=>{const u=n.errorRetryCount,c=o.retryCount,a=~~((Math.random()+.5)*(1<<(c<8?c:8)))*n.errorRetryInterval;!es(u)&&c>u||setTimeout(i,a,o)},_I=Q2,[Hj,bI]=_A(new Map),bA=Sh({onLoadingSlow:Df,onSuccess:Df,onError:Df,onErrorRetry:xI,onDiscarded:Df,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:gk?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:gk?5e3:3e3,compare:_I,isPaused:()=>!1,cache:Hj,mutate:bI,fallback:{}},fI),vA=(e,t)=>{const n=Sh(e,t);if(t){const{use:i,fallback:o}=e,{use:u,fallback:c}=t;i&&u&&(n.use=i.concat(u)),o&&c&&(n.fallback=Sh(o,c))}return n},rS=L.createContext({}),vI=e=>{const{value:t}=e,n=L.useContext(rS),i=pu(t),o=L.useMemo(()=>i?t(n):t,[i,n,t]),u=L.useMemo(()=>i?o:vA(n,o),[i,n,o]),c=o&&o.provider,a=L.useRef(mo);c&&!a.current&&(a.current=_A(c(u.cache||Hj),o));const g=a.current;return g&&(u.cache=g[0],u.mutate=g[1]),$b(()=>{if(g)return g[2]&&g[2](),g[3]},[]),L.createElement(rS.Provider,Sh(e,{value:u}))},wI="$inf$",wA=W0&&window.__SWR_DEVTOOLS_USE__,SI=wA?window.__SWR_DEVTOOLS_USE__:[],jI=()=>{wA&&(window.__SWR_DEVTOOLS_REACT__=Pt)},CI=e=>pu(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],SA=()=>Sh(bA,L.useContext(rS)),TI=e=>(t,n,i)=>e(t,n&&((...o)=>{const[u]=$j(t),[,,,c]=gh.get(Hj);if(u.startsWith(wI))return n(...o);const a=c[u];return es(a)?n(...o):(delete c[u],a)}),i),kI=SI.concat(TI),EI=e=>function(...t){const n=SA(),[i,o,u]=CI(t),c=vA(n,u);let a=e;const{use:g}=c,_=(g||[]).concat(kI);for(let S=_.length;S--;)a=_[S](a);return a(i,o||c.fetcher||null,c)},MI=(e,t,n)=>{const i=t[e]||(t[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o>=0&&(i[o]=i[i.length-1],i.pop())}};jI();const Dw=Pt.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),zw={dedupe:!0},NI=(e,t,n)=>{const{cache:i,compare:o,suspense:u,fallbackData:c,revalidateOnMount:a,revalidateIfStale:g,refreshInterval:_,refreshWhenHidden:S,refreshWhenOffline:E,keepPreviousData:A}=n,[N,z,B,$]=gh.get(i),[q,W]=$j(e),Q=L.useRef(!1),Z=L.useRef(!1),K=L.useRef(q),le=L.useRef(t),ge=L.useRef(n),he=()=>ge.current,pe=()=>he().isVisible()&&he().isOnline(),[Ie,He,Ye,rt]=yA(i,q),Rt=L.useRef({}).current,St=es(c)?es(n.fallback)?mo:n.fallback[q]:c,De=(It,Ot)=>{for(const en in Rt){const _n=en;if(_n==="data"){if(!o(It[_n],Ot[_n])&&(!es(It[_n])||!o(ut,Ot[_n])))return!1}else if(Ot[_n]!==It[_n])return!1}return!0},Qe=L.useMemo(()=>{const It=!q||!t?!1:es(a)?he().isPaused()||u?!1:g!==!1:a,Ot=on=>{const Ue=Sh(on);return delete Ue._k,It?te({isValidating:!0,isLoading:!0},Ue):Ue},en=Ie(),_n=rt(),Yn=Ot(en),Hn=en===_n?Yn:Ot(_n);let hn=Yn;return[()=>{const on=Ot(Ie());return De(on,hn)?(hn.data=on.data,hn.isLoading=on.isLoading,hn.isValidating=on.isValidating,hn.error=on.error,hn):(hn=on,on)},()=>Hn]},[i,q]),et=aI.useSyncExternalStore(L.useCallback(It=>Ye(q,(Ot,en)=>{De(en,Ot)||It()}),[i,q]),Qe[0],Qe[1]),Nt=!Q.current,fe=N[q]&&N[q].length>0,Xe=et.data,tt=es(Xe)?St&&gA(St)?Dw(St):St:Xe,Me=et.error,ot=L.useRef(tt),ut=A?es(Xe)?es(ot.current)?tt:ot.current:Xe:tt,dt=fe&&!es(Me)?!1:Nt&&!es(a)?a:he().isPaused()?!1:u?es(tt)?!1:g:es(tt)||g,pt=!!(q&&t&&Nt&&dt),Ve=es(et.isValidating)?pt:et.isValidating,Ge=es(et.isLoading)?pt:et.isLoading,Dt=L.useCallback(It=>Gt(null,null,function*(){const Ot=le.current;if(!q||!Ot||Z.current||he().isPaused())return!1;let en,_n,Yn=!0;const Hn=It||{},hn=!B[q]||!Hn.dedupe,on=()=>mk?!Z.current&&q===K.current&&Q.current:q===K.current,Ue={isValidating:!1,isLoading:!1},We=()=>{He(Ue)},Pe=()=>{const Et=B[q];Et&&Et[1]===_n&&delete B[q]},Bt={isValidating:!0};es(Ie().data)&&(Bt.isLoading=!0);try{if(hn&&(He(Bt),n.loadingTimeout&&es(Ie().data)&&setTimeout(()=>{Yn&&on()&&he().onLoadingSlow(q,n)},n.loadingTimeout),B[q]=[Ot(W),sS()]),[en,_n]=B[q],en=yield en,hn&&setTimeout(Pe,n.dedupingInterval),!B[q]||B[q][1]!==_n)return hn&&on()&&he().onDiscarded(q),!1;Ue.error=mo;const Et=z[q];if(!es(Et)&&(_n<=Et[0]||_n<=Et[1]||Et[1]===0))return We(),hn&&on()&&he().onDiscarded(q),!1;const nn=Ie().data;Ue.data=o(nn,en)?nn:en,hn&&on()&&he().onSuccess(en,q,n)}catch(Et){Pe();const nn=he(),{shouldRetryOnError:yn}=nn;nn.isPaused()||(Ue.error=Et,hn&&on()&&(nn.onError(Et,q,nn),(yn===!0||pu(yn)&&yn(Et))&&(!he().revalidateOnFocus||!he().revalidateOnReconnect||pe())&&nn.onErrorRetry(Et,q,nn,ln=>{const At=N[q];At&&At[0]&&At[0](fk,ln)},{retryCount:(Hn.retryCount||0)+1,dedupe:!0})))}return Yn=!1,We(),!0}),[q,i]),Lt=L.useCallback((...It)=>xA(i,K.current,...It),[]);if($b(()=>{le.current=t,ge.current=n,es(Xe)||(ot.current=Xe)}),$b(()=>{if(!q)return;const It=Dt.bind(mo,zw);let Ot=0;he().revalidateOnFocus&&(Ot=Date.now()+he().focusThrottleInterval);const en=MI(q,N,(_n,Yn={})=>{if(_n==fA){const Hn=Date.now();he().revalidateOnFocus&&Hn>Ot&&pe()&&(Ot=Hn+he().focusThrottleInterval,It())}else if(_n==pA)he().revalidateOnReconnect&&pe()&&It();else{if(_n==mA)return Dt();if(_n==fk)return Dt(Yn)}});return Z.current=!1,K.current=q,Q.current=!0,He({_k:W}),dt&&(es(tt)||S0?It():mI(It)),()=>{Z.current=!0,en()}},[q]),$b(()=>{let It;function Ot(){const _n=pu(_)?_(Ie().data):_;_n&&It!==-1&&(It=setTimeout(en,_n))}function en(){!Ie().error&&(S||he().isVisible())&&(E||he().isOnline())?Dt(zw).then(Ot):Ot()}return Ot(),()=>{It&&(clearTimeout(It),It=-1)}},[_,S,E,q]),L.useDebugValue(ut),u&&es(tt)&&q){if(!mk&&S0)throw new Error("Fallback data is required when using Suspense in SSR.");le.current=t,ge.current=n,Z.current=!1;const It=$[q];if(!es(It)){const Ot=Lt(It);Dw(Ot)}if(es(Me)){const Ot=Dt(zw);es(ut)||(Ot.status="fulfilled",Ot.value=!0),Dw(Ot)}else throw Me}return{mutate:Lt,get data(){return Rt.data=!0,ut},get error(){return Rt.error=!0,Me},get isValidating(){return Rt.isValidating=!0,Ve},get isLoading(){return Rt.isLoading=!0,Ge}}},AI=Cv.defineProperty(vI,"defaultValue",{value:bA}),f1=EI(NI);Promise.resolve();const vd=Object.create(null);vd.open="0";vd.close="1";vd.ping="2";vd.pong="3";vd.message="4";vd.upgrade="5";vd.noop="6";const Hb=Object.create(null);Object.keys(vd).forEach(e=>{Hb[vd[e]]=e});const aS={type:"error",data:"parser error"},jA=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",CA=typeof ArrayBuffer=="function",TA=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,qj=({type:e,data:t},n,i)=>jA&&t instanceof Blob?n?i(t):xk(t,i):CA&&(t instanceof ArrayBuffer||TA(t))?n?i(t):xk(new Blob([t]),i):i(vd[e]+(t||"")),xk=(e,t)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];t("b"+(i||""))},n.readAsDataURL(e)};function _k(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Iw;function PI(e,t){if(jA&&e.data instanceof Blob)return e.data.arrayBuffer().then(_k).then(t);if(CA&&(e.data instanceof ArrayBuffer||TA(e.data)))return t(_k(e.data));qj(e,!1,n=>{Iw||(Iw=new TextEncoder),t(Iw.encode(n))})}const bk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<bk.length;e++)Qx[bk.charCodeAt(e)]=e;const RI=e=>{let t=e.length*.75,n=e.length,i,o=0,u,c,a,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const _=new ArrayBuffer(t),S=new Uint8Array(_);for(i=0;i<n;i+=4)u=Qx[e.charCodeAt(i)],c=Qx[e.charCodeAt(i+1)],a=Qx[e.charCodeAt(i+2)],g=Qx[e.charCodeAt(i+3)],S[o++]=u<<2|c>>4,S[o++]=(c&15)<<4|a>>2,S[o++]=(a&3)<<6|g&63;return _},DI=typeof ArrayBuffer=="function",Gj=(e,t)=>{if(typeof e!="string")return{type:"message",data:kA(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:zI(e.substring(1),t)}:Hb[n]?e.length>1?{type:Hb[n],data:e.substring(1)}:{type:Hb[n]}:aS},zI=(e,t)=>{if(DI){const n=RI(e);return kA(n,t)}else return{base64:!0,data:e}},kA=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},EA="",II=(e,t)=>{const n=e.length,i=new Array(n);let o=0;e.forEach((u,c)=>{qj(u,!1,a=>{i[c]=a,++o===n&&t(i.join(EA))})})},OI=(e,t)=>{const n=e.split(EA),i=[];for(let o=0;o<n.length;o++){const u=Gj(n[o],t);if(i.push(u),u.type==="error")break}return i};function FI(){return new TransformStream({transform(e,t){PI(e,n=>{const i=n.length;let o;if(i<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,i);else if(i<65536){o=new Uint8Array(3);const u=new DataView(o.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{o=new Uint8Array(9);const u=new DataView(o.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(o[0]|=128),t.enqueue(o),t.enqueue(n)})}})}let Ow;function ib(e){return e.reduce((t,n)=>t+n.length,0)}function sb(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let o=0;o<t;o++)n[o]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function LI(e,t){Ow||(Ow=new TextDecoder);const n=[];let i=0,o=-1,u=!1;return new TransformStream({transform(c,a){for(n.push(c);;){if(i===0){if(ib(n)<1)break;const g=sb(n,1);u=(g[0]&128)===128,o=g[0]&127,o<126?i=3:o===126?i=1:i=2}else if(i===1){if(ib(n)<2)break;const g=sb(n,2);o=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),i=3}else if(i===2){if(ib(n)<8)break;const g=sb(n,8),_=new DataView(g.buffer,g.byteOffset,g.length),S=_.getUint32(0);if(S>Math.pow(2,21)-1){a.enqueue(aS);break}o=S*Math.pow(2,32)+_.getUint32(4),i=3}else{if(ib(n)<o)break;const g=sb(n,o);a.enqueue(Gj(u?g:Ow.decode(g),t)),i=0}if(o===0||o>e){a.enqueue(aS);break}}}})}const MA=4;function Yr(e){if(e)return BI(e)}function BI(e){for(var t in Yr.prototype)e[t]=Yr.prototype[t];return e}Yr.prototype.on=Yr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Yr.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Yr.prototype.off=Yr.prototype.removeListener=Yr.prototype.removeAllListeners=Yr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,o=0;o<n.length;o++)if(i=n[o],i===t||i.fn===t){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Yr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,o=n.length;i<o;++i)n[i].apply(this,t)}return this};Yr.prototype.emitReserved=Yr.prototype.emit;Yr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Yr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const yc=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function NA(e,...t){return t.reduce((n,i)=>(e.hasOwnProperty(i)&&(n[i]=e[i]),n),{})}const VI=yc.setTimeout,UI=yc.clearTimeout;function p1(e,t){t.useNativeTimers?(e.setTimeoutFn=VI.bind(yc),e.clearTimeoutFn=UI.bind(yc)):(e.setTimeoutFn=yc.setTimeout.bind(yc),e.clearTimeoutFn=yc.clearTimeout.bind(yc))}const $I=1.33;function HI(e){return typeof e=="string"?qI(e):Math.ceil((e.byteLength||e.size)*$I)}function qI(e){let t=0,n=0;for(let i=0,o=e.length;i<o;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}function GI(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function WI(e){let t={},n=e.split("&");for(let i=0,o=n.length;i<o;i++){let u=n[i].split("=");t[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return t}class ZI extends Error{constructor(t,n,i){super(t),this.description=n,this.context=i,this.type="TransportError"}}class Wj extends Yr{constructor(t){super(),this.writable=!1,p1(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,n,i){return super.emitReserved("error",new ZI(t,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Gj(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=GI(t);return n.length?"?"+n:""}}const AA="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),oS=64,YI={};let vk=0,rb=0,wk;function Sk(e){let t="";do t=AA[e%oS]+t,e=Math.floor(e/oS);while(e>0);return t}function PA(){const e=Sk(+new Date);return e!==wk?(vk=0,wk=e):e+"."+Sk(vk++)}for(;rb<oS;rb++)YI[AA[rb]]=rb;let RA=!1;try{RA=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch(e){}const XI=RA;function DA(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||XI))return new XMLHttpRequest}catch(n){}if(!t)try{return new yc[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(n){}}function KI(){}const QI=function(){return new DA({xdomain:!1}).responseType!=null}();class JI extends Wj{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let o=location.port;o||(o=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||o!==t.port}const n=t&&t.forceBase64;this.supportsBinary=QI&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};OI(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,II(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=PA()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new ey(this.uri(),t)}doWrite(t,n){const i=this.request({method:"POST",data:t});i.on("success",n),i.on("error",(o,u)=>{this.onError("xhr post error",o,u)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=t}}let ey=class qb extends Yr{constructor(t,n){super(),p1(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.data=n.data!==void 0?n.data:null,this.create()}create(){var t;const n=NA(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new DA(n);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this.opts.extraHeaders[o])}}catch(o){}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{i.setRequestHeader("Accept","*/*")}catch(o){}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this.opts.cookieJar)===null||o===void 0||o.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(o){this.setTimeoutFn(()=>{this.onError(o)},0);return}typeof document<"u"&&(this.index=qb.requestsCount++,qb.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=KI,t)try{this.xhr.abort()}catch(n){}typeof document<"u"&&delete qb.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};ey.requestsCount=0;ey.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",jk);else if(typeof addEventListener=="function"){const e="onpagehide"in yc?"pagehide":"unload";addEventListener(e,jk,!1)}}function jk(){for(let e in ey.requests)ey.requests.hasOwnProperty(e)&&ey.requests[e].abort()}const Zj=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ab=yc.WebSocket||yc.MozWebSocket,Ck=!0,eO="arraybuffer",Tk=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class tO extends Wj{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,i=Tk?{}:NA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Ck&&!Tk?n?new ab(t,n):new ab(t):new ab(t,n,i)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const i=t[n],o=n===t.length-1;qj(i,this.supportsBinary,u=>{try{Ck&&this.ws.send(u)}catch(c){}o&&Zj(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=PA()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}check(){return!!ab}}class nO extends Wj{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const n=LI(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(n).getReader(),o=FI();o.readable.pipeTo(t.writable),this.writer=o.writable.getWriter();const u=()=>{i.read().then(({done:a,value:g})=>{a||(this.onPacket(g),u())}).catch(a=>{})};u();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this.writer.write(c).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const i=t[n],o=n===t.length-1;this.writer.write(i).then(()=>{o&&Zj(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const iO={websocket:tO,webtransport:nO,polling:JI},sO=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,rO=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lS(e){if(e.length>2e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");n!=-1&&i!=-1&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let o=sO.exec(e||""),u={},c=14;for(;c--;)u[rO[c]]=o[c]||"";return n!=-1&&i!=-1&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=aO(u,u.path),u.queryKey=oO(u,u.query),u}function aO(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function oO(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,o,u){o&&(n[o]=u)}),n}let zA=class qg extends Yr{constructor(t,n={}){super(),this.binaryType=eO,this.writeBuffer=[],t&&typeof t=="object"&&(n=t,t=null),t?(t=lS(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=lS(n.host).host),p1(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=WI(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=MA,n.transport=t,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new iO[t](i)}open(){let t;if(this.opts.rememberUpgrade&&qg.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch(n){this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),i=!1;qg.priorWebsocketSuccess=!1;const o=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",E=>{if(!i)if(E.type==="pong"&&E.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;qg.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(S(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const A=new Error("probe error");A.transport=n.name,this.emitReserved("upgradeError",A)}}))};function u(){i||(i=!0,S(),n.close(),n=null)}const c=E=>{const A=new Error("probe error: "+E);A.transport=n.name,u(),this.emitReserved("upgradeError",A)};function a(){c("transport closed")}function g(){c("socket closed")}function _(E){n&&E.name!==n.name&&u()}const S=()=>{n.removeListener("open",o),n.removeListener("error",c),n.removeListener("close",a),this.off("close",g),this.off("upgrading",_)};n.once("open",o),n.once("error",c),n.once("close",a),this.once("close",g),this.once("upgrading",_),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(this.readyState="open",qg.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(t+=HI(i)),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}write(t,n,i){return this.sendPacket("message",t,n,i),this}send(t,n,i){return this.sendPacket("message",t,n,i),this}sendPacket(t,n,i,o){if(typeof n=="function"&&(o=n,n=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:t,data:n,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),o&&this.once("flush",o),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){qg.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let i=0;const o=t.length;for(;i<o;i++)~this.transports.indexOf(t[i])&&n.push(t[i]);return n}};zA.protocol=MA;function lO(e,t="",n){let i=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),i=lS(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}const cO=typeof ArrayBuffer=="function",uO=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,IA=Object.prototype.toString,dO=typeof Blob=="function"||typeof Blob<"u"&&IA.call(Blob)==="[object BlobConstructor]",hO=typeof File=="function"||typeof File<"u"&&IA.call(File)==="[object FileConstructor]";function Yj(e){return cO&&(e instanceof ArrayBuffer||uO(e))||dO&&e instanceof Blob||hO&&e instanceof File}function Gb(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,i=e.length;n<i;n++)if(Gb(e[n]))return!0;return!1}if(Yj(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Gb(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Gb(e[n]))return!0;return!1}function fO(e){const t=[],n=e.data,i=e;return i.data=cS(n,t),i.attachments=t.length,{packet:i,buffers:t}}function cS(e,t){if(!e)return e;if(Yj(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=cS(e[i],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=cS(e[i],t));return n}return e}function pO(e,t){return e.data=uS(e.data,t),delete e.attachments,e}function uS(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=uS(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=uS(e[n],t));return e}const mO=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],gO=5;var qi;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(qi||(qi={}));class yO{constructor(t){this.replacer=t}encode(t){return(t.type===qi.EVENT||t.type===qi.ACK)&&Gb(t)?this.encodeAsBinary({type:t.type===qi.EVENT?qi.BINARY_EVENT:qi.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===qi.BINARY_EVENT||t.type===qi.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=fO(t),i=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(i),o}}function kk(e){return Object.prototype.toString.call(e)==="[object Object]"}class Xj extends Yr{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const i=n.type===qi.BINARY_EVENT;i||n.type===qi.BINARY_ACK?(n.type=i?qi.EVENT:qi.ACK,this.reconstructor=new xO(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Yj(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const i={type:Number(t.charAt(0))};if(qi[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===qi.BINARY_EVENT||i.type===qi.BINARY_ACK){const u=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const c=t.substring(u,n);if(c!=Number(c)||t.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(c)}if(t.charAt(n+1)==="/"){const u=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););i.nsp=t.substring(u,n)}else i.nsp="/";const o=t.charAt(n+1);if(o!==""&&Number(o)==o){const u=n+1;for(;++n;){const c=t.charAt(n);if(c==null||Number(c)!=c){--n;break}if(n===t.length)break}i.id=Number(t.substring(u,n+1))}if(t.charAt(++n)){const u=this.tryParse(t.substr(n));if(Xj.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(n){return!1}}static isPayloadValid(t,n){switch(t){case qi.CONNECT:return kk(n);case qi.DISCONNECT:return n===void 0;case qi.CONNECT_ERROR:return typeof n=="string"||kk(n);case qi.EVENT:case qi.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&mO.indexOf(n[0])===-1);case qi.ACK:case qi.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class xO{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=pO(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const _O=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Xj,Encoder:yO,get PacketType(){return qi},protocol:gO},Symbol.toStringTag,{value:"Module"}));function fu(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const bO=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class OA extends Yr{constructor(t,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[fu(t,"open",this.onopen.bind(this)),fu(t,"packet",this.onpacket.bind(this)),fu(t,"error",this.onerror.bind(this)),fu(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(bO.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:qi.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,c=n.pop();this._registerAckCallback(u,c),i.id=u}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,n){var i;const o=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(o===void 0){this.acks[t]=n;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},o);this.acks[t]=(...c)=>{this.io.clearTimeoutFn(u),n.apply(this,[null,...c])}}emitWithAck(t,...n){const i=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((o,u)=>{n.push((c,a)=>i?c?u(c):o(a):o(c)),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((o,...u)=>i!==this._queue[0]?void 0:(o!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:qi.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case qi.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qi.EVENT:case qi.BINARY_EVENT:this.onevent(t);break;case qi.ACK:case qi.BINARY_ACK:this.onack(t);break;case qi.DISCONNECT:this.ondisconnect();break;case qi.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let i=!1;return function(...o){i||(i=!0,n.packet({type:qi.ACK,id:t,data:o}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(n.apply(this,t.data),delete this.acks[t.id])}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qi.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(t===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(t===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,t.data)}}}function xy(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}xy.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};xy.prototype.reset=function(){this.attempts=0};xy.prototype.setMin=function(e){this.ms=e};xy.prototype.setMax=function(e){this.max=e};xy.prototype.setJitter=function(e){this.jitter=e};class dS extends Yr{constructor(t,n){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,p1(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new xy({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const o=n.parser||_O;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new zA(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const o=fu(n,"open",function(){i.onopen(),t&&t()}),u=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},c=fu(n,"error",u);if(this._timeout!==!1){const a=this._timeout,g=this.setTimeoutFn(()=>{o(),u(new Error("timeout")),n.close()},a);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(o),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(fu(t,"ping",this.onping.bind(this)),fu(t,"data",this.ondata.bind(this)),fu(t,"error",this.onerror.bind(this)),fu(t,"close",this.onclose.bind(this)),fu(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Zj(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new OA(this,t,n),this.nsps[t]=i),i}_destroy(t){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let i=0;i<n.length;i++)this.engine.write(n[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(o=>{o?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",o)):t.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Rx={};function Wb(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=lO(e,t.path||"/socket.io"),i=n.source,o=n.id,u=n.path,c=Rx[o]&&u in Rx[o].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let g;return a?g=new dS(i,t):(Rx[o]||(Rx[o]=new dS(i,t)),g=Rx[o]),n.query&&!t.query&&(t.query=n.queryKey),g.socket(n.path,t)}Object.assign(Wb,{Manager:dS,Socket:OA,io:Wb,connect:Wb});class vO{constructor(t,n,i,o){Zp(this,"socket_port"),Zp(this,"host"),Zp(this,"port"),Zp(this,"protocol"),Zp(this,"url"),Zp(this,"site_name"),Zp(this,"socket");var u,c,a,g;if(this.socket_port=i!=null?i:"9000",this.host=(u=window.location)==null?void 0:u.hostname,this.port=(c=window.location)!=null&&c.port?`:${this.socket_port}`:"",this.protocol=((a=window.location)==null?void 0:a.protocol)==="https:"?"https":"http",t){let _=new URL(t);_.port="",i?(_.port=i,this.url=_.toString()):this.url=_.toString()}else this.url=`${this.protocol}://${this.host}${this.port}/`;n&&(this.url=`${this.url}${n}`),this.site_name=n,this.socket=Wb(`${this.url}`,{withCredentials:!0,secure:this.protocol==="https",extraHeaders:o&&o.useToken===!0?{Authorization:`${o.type} ${(g=o.token)==null?void 0:g.call(o)}`}:{}})}}const wc=L.createContext(null),wO=({url:e="",tokenParams:t,socketPort:n,swrConfig:i,siteName:o,enableSocket:u=!0,children:c,customHeaders:a})=>{const g=L.useMemo(()=>{const _=new iI.FrappeApp(e,t,void 0,a);return{url:e,tokenParams:t,app:_,auth:_.auth(),db:_.db(),call:_.call(),file:_.file(),socket:u?new vO(e,o,n,t).socket:void 0,enableSocket:u,socketPort:n}},[e,t,n,u,a]);return l.jsx(wc.Provider,{value:g,children:l.jsx(AI,{value:i,children:c})})},Dm=e=>{const{url:t,auth:n,tokenParams:i}=L.useContext(wc),[o,u]=L.useState(),c=L.useCallback(()=>{const z=document.cookie.split(";").find(B=>B.trim().startsWith("user_id="));if(z){const B=z.split("=")[1];u(B&&B!=="Guest"?B:null)}else u(null)},[]);L.useEffect(()=>{i&&i.useToken?u(null):c()},[]);const{data:a,error:g,isLoading:_,isValidating:S,mutate:E}=f1(()=>i&&i.useToken||o?`${t}/api/method/frappe.auth.get_logged_user`:null,()=>n.getLoggedInUser(),te({onError:()=>{u(null)},shouldRetryOnError:!1,revalidateOnFocus:!1},e)),A=L.useCallback(z=>Gt(null,null,function*(){return n.loginWithUsernamePassword(z).then(B=>(c(),B))}),[]),N=L.useCallback(()=>Gt(null,null,function*(){return n.logout().then(()=>E(null)).then(()=>u(null))}),[]);return{isLoading:o===void 0||_,currentUser:a,isValidating:S,error:g,login:A,logout:N,updateCurrentUser:E,getUserCookie:c}},FA=(e,t,n)=>{let i=`${t}/api/resource/`;return n?i+=`${e}/${n}`:i+=`${e}`,i},jh=(e,t,n,i)=>{const{url:o,db:u}=L.useContext(wc);return f1(n===void 0?FA(e,o,t):n,()=>u.getDoc(e,t),i)},SO=e=>{var o;var t,n;let i="";if(e!=null&&e.fields&&(i+="fields="+JSON.stringify(e==null?void 0:e.fields)+"&"),e!=null&&e.filters&&(i+="filters="+JSON.stringify(e==null?void 0:e.filters)+"&"),e!=null&&e.orFilters&&(i+="or_filters="+JSON.stringify(e==null?void 0:e.orFilters)+"&"),e!=null&&e.limit_start&&(i+="limit_start="+JSON.stringify(e==null?void 0:e.limit_start)+"&"),e!=null&&e.limit&&(i+="limit="+JSON.stringify(e==null?void 0:e.limit)+"&"),e!=null&&e.groupBy&&(i+="group_by="+String(e.groupBy)+"&"),e!=null&&e.orderBy){const u=`${String((t=e.orderBy)==null?void 0:t.field)} ${(o=(n=e.orderBy)==null?void 0:n.order)!=null?o:"asc"}`;i+="order_by="+u+"&"}return e!=null&&e.asDict&&(i+="as_dict="+e.asDict),i},Tv=(e,t,n,i)=>{const{url:o,db:u}=L.useContext(wc);return f1(`${FA(e,o)}?${SO(t)}`,()=>u.getDocList(e,t),i)},_y=()=>{const{db:e}=L.useContext(wc),[t,n]=L.useState(!1),[i,o]=L.useState(null),[u,c]=L.useState(!1),a=L.useCallback(()=>{n(!1),o(null),c(!1)},[]);return{createDoc:L.useCallback((g,_)=>Gt(null,null,function*(){return o(null),c(!1),n(!0),e.createDoc(g,_).then(S=>(n(!1),c(!0),S)).catch(S=>{throw n(!1),c(!1),o(S),S})}),[]),loading:t,error:i,isCompleted:u,reset:a}},LA=()=>{const{db:e}=L.useContext(wc),[t,n]=L.useState(!1),[i,o]=L.useState(null),[u,c]=L.useState(!1),a=L.useCallback(()=>{n(!1),o(null),c(!1)},[]);return{updateDoc:L.useCallback((g,_,S)=>Gt(null,null,function*(){return o(null),c(!1),n(!0),e.updateDoc(g,_,S).then(E=>(n(!1),c(!0),E)).catch(E=>{throw n(!1),c(!1),o(E),E})}),[]),loading:t,error:i,reset:a,isCompleted:u}},jO=()=>{const{db:e}=L.useContext(wc),[t,n]=L.useState(!1),[i,o]=L.useState(null),[u,c]=L.useState(!1),a=L.useCallback(()=>{n(!1),o(null),c(!1)},[]);return{deleteDoc:L.useCallback((g,_)=>Gt(null,null,function*(){return o(null),c(!1),n(!0),e.deleteDoc(g,_).then(S=>(n(!1),c(!0),S)).catch(S=>{throw n(!1),c(!1),o(S),S})}),[]),loading:t,error:i,reset:a,isCompleted:u}};function CO(e){const t=[];for(let n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}const md=(e,t,n,i,o="GET")=>{const{call:u}=L.useContext(wc),c=CO(t!=null?t:{}),a=`${e}?${c}`;return te({},f1(n===void 0?a:n,o==="GET"?()=>u.get(e,t):()=>u.post(e,t),i))},kv=e=>{const{call:t}=L.useContext(wc),[n,i]=L.useState(null),[o,u]=L.useState(!1),[c,a]=L.useState(null),[g,_]=L.useState(!1),S=L.useCallback(()=>{i(null),u(!1),a(null),_(!1)},[]);return{call:L.useCallback(E=>Gt(null,null,function*(){return a(null),_(!1),u(!0),i(null),t.post(e,E).then(A=>(i(A),u(!1),_(!0),A)).catch(A=>{throw u(!1),_(!1),a(A),A})}),[]),result:n,loading:o,error:c,reset:S,isCompleted:g}},Kj=()=>{const{file:e}=L.useContext(wc),[t,n]=L.useState(0),[i,o]=L.useState(!1),[u,c]=L.useState(null),[a,g]=L.useState(!1),_=L.useCallback((E,A,N)=>Gt(null,null,function*(){return S(),o(!0),e.uploadFile(E,A,(z,B)=>{B&&n(Math.round(z/B*100))},N).then(z=>(g(!0),n(100),o(!1),z.data.message)).catch(z=>{throw console.error(z),c(z),o(!1),z})}),[]),S=L.useCallback(()=>{n(0),o(!1),c(null),g(!1)},[]);return{upload:_,progress:t,loading:i,isCompleted:a,error:u,reset:S}},TO=(e,t,n=[],i=20,o=250)=>{const u=kO(t,o);return md("frappe.desk.search.search_link",{doctype:e,page_length:i,txt:u,filters:JSON.stringify(n!=null?n:[])})},kO=(e,t)=>{const[n,i]=L.useState(e);return L.useEffect(()=>{const o=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(o)}},[e,t]),n},Ek=(e,t)=>{const{socket:n}=L.useContext(wc);L.useEffect(()=>{n===void 0&&console.warn("Socket is not enabled. Please enable socket in FrappeProvider.");let i=n==null?void 0:n.on(e,t);return()=>{i==null||i.off(e)}},[e,t])};var Dx={},Mk;function EO(){if(Mk)return Dx;Mk=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.parse=c,Dx.serialize=_;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function c(A,N){const z=new u,B=A.length;if(B<2)return z;const $=(N==null?void 0:N.decode)||S;let q=0;do{const W=A.indexOf("=",q);if(W===-1)break;const Q=A.indexOf(";",q),Z=Q===-1?B:Q;if(W>Z){q=A.lastIndexOf(";",W-1)+1;continue}const K=a(A,q,W),le=g(A,W,K),ge=A.slice(K,le);if(z[ge]===void 0){let he=a(A,W+1,Z),pe=g(A,Z,he);const Ie=$(A.slice(he,pe));z[ge]=Ie}q=Z+1}while(q<B);return z}function a(A,N,z){do{const B=A.charCodeAt(N);if(B!==32&&B!==9)return N}while(++N<z);return z}function g(A,N,z){for(;N>z;){const B=A.charCodeAt(--N);if(B!==32&&B!==9)return N+1}return z}function _(A,N,z){const B=(z==null?void 0:z.encode)||encodeURIComponent;if(!e.test(A))throw new TypeError(`argument name is invalid: ${A}`);const $=B(N);if(!t.test($))throw new TypeError(`argument val is invalid: ${N}`);let q=A+"="+$;if(!z)return q;if(z.maxAge!==void 0){if(!Number.isInteger(z.maxAge))throw new TypeError(`option maxAge is invalid: ${z.maxAge}`);q+="; Max-Age="+z.maxAge}if(z.domain){if(!n.test(z.domain))throw new TypeError(`option domain is invalid: ${z.domain}`);q+="; Domain="+z.domain}if(z.path){if(!i.test(z.path))throw new TypeError(`option path is invalid: ${z.path}`);q+="; Path="+z.path}if(z.expires){if(!E(z.expires)||!Number.isFinite(z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${z.expires}`);q+="; Expires="+z.expires.toUTCString()}if(z.httpOnly&&(q+="; HttpOnly"),z.secure&&(q+="; Secure"),z.partitioned&&(q+="; Partitioned"),z.priority)switch(typeof z.priority=="string"?z.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${z.priority}`)}if(z.sameSite)switch(typeof z.sameSite=="string"?z.sameSite.toLowerCase():z.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${z.sameSite}`)}return q}function S(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch(N){return A}}function E(A){return o.call(A)==="[object Date]"}return Dx}EO();var Nk="popstate";function MO(e={}){function t(i,o){let{pathname:u,search:c,hash:a}=i.location;return hS("",{pathname:u,search:c,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:j0(o)}return AO(t,n,null,e)}function ar(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function vc(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function NO(){return Math.random().toString(36).substring(2,10)}function Ak(e,t){return{usr:e.state,key:e.key,idx:t}}function hS(e,t,n=null,i){return Ee(te({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?by(t):t),{state:n,key:t&&t.key||i||NO()})}function j0({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function by(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function AO(e,t,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,c=o.history,a="POP",g=null,_=S();_==null&&(_=0,c.replaceState(Ee(te({},c.state),{idx:_}),""));function S(){return(c.state||{idx:null}).idx}function E(){a="POP";let $=S(),q=$==null?null:$-_;_=$,g&&g({action:a,location:B.location,delta:q})}function A($,q){a="PUSH";let W=hS(B.location,$,q);_=S()+1;let Q=Ak(W,_),Z=B.createHref(W);try{c.pushState(Q,"",Z)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(Z)}u&&g&&g({action:a,location:B.location,delta:1})}function N($,q){a="REPLACE";let W=hS(B.location,$,q);_=S();let Q=Ak(W,_),Z=B.createHref(W);c.replaceState(Q,"",Z),u&&g&&g({action:a,location:B.location,delta:0})}function z($){return PO($)}let B={get action(){return a},get location(){return e(o,c)},listen($){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Nk,E),g=$,()=>{o.removeEventListener(Nk,E),g=null}},createHref($){return t(o,$)},createURL:z,encodeLocation($){let q=z($);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:A,replace:N,go($){return c.go($)}};return B}function PO(e,t=!1){let n="http://localhost";typeof window!="undefined"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ar(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:j0(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function BA(e,t,n="/"){return RO(e,t,n,!1)}function RO(e,t,n,i){let o=typeof t=="string"?by(t):t,u=Ch(o.pathname||"/",n);if(u==null)return null;let c=VA(e);DO(c);let a=null;for(let g=0;a==null&&g<c.length;++g){let _=qO(u);a=$O(c[g],_,i)}return a}function VA(e,t=[],n=[],i=""){let o=(u,c,a)=>{let g={relativePath:a===void 0?u.path||"":a,caseSensitive:u.caseSensitive===!0,childrenIndex:c,route:u};g.relativePath.startsWith("/")&&(ar(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length));let _=bh([i,g.relativePath]),S=n.concat(g);u.children&&u.children.length>0&&(ar(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),VA(u.children,t,S,_)),!(u.path==null&&!u.index)&&t.push({path:_,score:VO(_,u.index),routesMeta:S})};return e.forEach((u,c)=>{var a;if(u.path===""||!((a=u.path)!=null&&a.includes("?")))o(u,c);else for(let g of UA(u.path))o(u,c,g)}),t}function UA(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let c=UA(i.join("/")),a=[];return a.push(...c.map(g=>g===""?u:[u,g].join("/"))),o&&a.push(...c),a.map(g=>e.startsWith("/")&&g===""?"/":g)}function DO(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:UO(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var zO=/^:[\w-]+$/,IO=3,OO=2,FO=1,LO=10,BO=-2,Pk=e=>e==="*";function VO(e,t){let n=e.split("/"),i=n.length;return n.some(Pk)&&(i+=BO),t&&(i+=OO),n.filter(o=>!Pk(o)).reduce((o,u)=>o+(zO.test(u)?IO:u===""?FO:LO),i)}function UO(e,t){return e.length===t.length&&e.slice(0,-1).every((i,o)=>i===t[o])?e[e.length-1]-t[t.length-1]:0}function $O(e,t,n=!1){let{routesMeta:i}=e,o={},u="/",c=[];for(let a=0;a<i.length;++a){let g=i[a],_=a===i.length-1,S=u==="/"?t:t.slice(u.length)||"/",E=Ev({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},S),A=g.route;if(!E&&_&&n&&!i[i.length-1].route.index&&(E=Ev({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},S)),!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:bh([u,E.pathname]),pathnameBase:YO(bh([u,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(u=bh([u,E.pathnameBase]))}return c}function Ev(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=HO(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let u=o[0],c=u.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:i.reduce((_,{paramName:S,isOptional:E},A)=>{if(S==="*"){let z=a[A]||"";c=u.slice(0,u.length-z.length).replace(/(.)\/+$/,"$1")}const N=a[A];return E&&!N?_[S]=void 0:_[S]=(N||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:c,pattern:e}}function HO(e,t=!1,n=!0){vc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,a,g)=>(i.push({paramName:a,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function qO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ch(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function GO(e,t="/"){let{pathname:n,search:i="",hash:o=""}=typeof e=="string"?by(e):e;return{pathname:n?n.startsWith("/")?n:WO(n,t):t,search:XO(i),hash:KO(o)}}function WO(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Fw(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZO(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Qj(e){let t=ZO(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function Jj(e,t,n,i=!1){let o;typeof e=="string"?o=by(e):(o=te({},e),ar(!o.pathname||!o.pathname.includes("?"),Fw("?","pathname","search",o)),ar(!o.pathname||!o.pathname.includes("#"),Fw("#","pathname","hash",o)),ar(!o.search||!o.search.includes("#"),Fw("#","search","hash",o)));let u=e===""||o.pathname==="",c=u?"/":o.pathname,a;if(c==null)a=n;else{let E=t.length-1;if(!i&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),E-=1;o.pathname=A.join("/")}a=E>=0?t[E]:"/"}let g=GO(o,a),_=c&&c!=="/"&&c.endsWith("/"),S=(u||c===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(_||S)&&(g.pathname+="/"),g}var bh=e=>e.join("/").replace(/\/\/+/g,"/"),YO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,KO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var $A=["POST","PUT","PATCH","DELETE"];new Set($A);var JO=["GET",...$A];new Set(JO);var vy=L.createContext(null);vy.displayName="DataRouter";var m1=L.createContext(null);m1.displayName="DataRouterState";var HA=L.createContext({isTransitioning:!1});HA.displayName="ViewTransition";var eF=L.createContext(new Map);eF.displayName="Fetchers";var tF=L.createContext(null);tF.displayName="Await";var vu=L.createContext(null);vu.displayName="Navigation";var Z0=L.createContext(null);Z0.displayName="Location";var wu=L.createContext({outlet:null,matches:[],isDataRoute:!1});wu.displayName="Route";var eC=L.createContext(null);eC.displayName="RouteError";function nF(e,{relative:t}={}){ar(wy(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=L.useContext(vu),{hash:o,pathname:u,search:c}=Y0(e,{relative:t}),a=u;return n!=="/"&&(a=u==="/"?n:bh([n,u])),i.createHref({pathname:a,search:c,hash:o})}function wy(){return L.useContext(Z0)!=null}function pl(){return ar(wy(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Z0).location}var qA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function GA(e){L.useContext(vu).static||L.useLayoutEffect(e)}function Pr(){let{isDataRoute:e}=L.useContext(wu);return e?mF():iF()}function iF(){ar(wy(),"useNavigate() may be used only in the context of a <Router> component.");let e=L.useContext(vy),{basename:t,navigator:n}=L.useContext(vu),{matches:i}=L.useContext(wu),{pathname:o}=pl(),u=JSON.stringify(Qj(i)),c=L.useRef(!1);return GA(()=>{c.current=!0}),L.useCallback((g,_={})=>{if(vc(c.current,qA),!c.current)return;if(typeof g=="number"){n.go(g);return}let S=Jj(g,JSON.parse(u),o,_.relative==="path");e==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:bh([t,S.pathname])),(_.replace?n.replace:n.push)(S,_.state,_)},[t,n,u,o,e])}L.createContext(null);function tC(){let{matches:e}=L.useContext(wu),t=e[e.length-1];return t?t.params:{}}function Y0(e,{relative:t}={}){let{matches:n}=L.useContext(wu),{pathname:i}=pl(),o=JSON.stringify(Qj(n));return L.useMemo(()=>Jj(e,JSON.parse(o),i,t==="path"),[e,o,i,t])}function sF(e,t){return WA(e,t)}function WA(e,t,n,i){var q;ar(wy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=L.useContext(vu),{matches:u}=L.useContext(wu),c=u[u.length-1],a=c?c.params:{},g=c?c.pathname:"/",_=c?c.pathnameBase:"/",S=c&&c.route;{let W=S&&S.path||"";ZA(g,!S||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let E=pl(),A;if(t){let W=typeof t=="string"?by(t):t;ar(_==="/"||((q=W.pathname)==null?void 0:q.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${W.pathname}" was given in the \`location\` prop.`),A=W}else A=E;let N=A.pathname||"/",z=N;if(_!=="/"){let W=_.replace(/^\//,"").split("/");z="/"+N.replace(/^\//,"").split("/").slice(W.length).join("/")}let B=BA(e,{pathname:z});vc(S||B!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),vc(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=cF(B&&B.map(W=>Object.assign({},W,{params:Object.assign({},a,W.params),pathname:bh([_,o.encodeLocation?o.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?_:bh([_,o.encodeLocation?o.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),u,n,i);return t&&$?L.createElement(Z0.Provider,{value:{location:te({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:"POP"}},$):$}function rF(){let e=pF(),t=QO(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:u},"ErrorBoundary")," or"," ",L.createElement("code",{style:u},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),n?L.createElement("pre",{style:o},n):null,c)}var aF=L.createElement(rF,null),oF=class extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?L.createElement(wu.Provider,{value:this.props.routeContext},L.createElement(eC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lF({routeContext:e,match:t,children:n}){let i=L.useContext(vy);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(wu.Provider,{value:e},n)}function cF(e,t=[],n=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,u=n==null?void 0:n.errors;if(u!=null){let g=o.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);ar(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let c=!1,a=-1;if(n)for(let g=0;g<o.length;g++){let _=o[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(a=g),_.route.id){let{loaderData:S,errors:E}=n,A=_.route.loader&&!S.hasOwnProperty(_.route.id)&&(!E||E[_.route.id]===void 0);if(_.route.lazy||A){c=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((g,_,S)=>{let E,A=!1,N=null,z=null;n&&(E=u&&_.route.id?u[_.route.id]:void 0,N=_.route.errorElement||aF,c&&(a<0&&S===0?(ZA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,z=null):a===S&&(A=!0,z=_.route.hydrateFallbackElement||null)));let B=t.concat(o.slice(0,S+1)),$=()=>{let q;return E?q=N:A?q=z:_.route.Component?q=L.createElement(_.route.Component,null):_.route.element?q=_.route.element:q=g,L.createElement(lF,{match:_,routeContext:{outlet:g,matches:B,isDataRoute:n!=null},children:q})};return n&&(_.route.ErrorBoundary||_.route.errorElement||S===0)?L.createElement(oF,{location:n.location,revalidation:n.revalidation,component:N,error:E,children:$(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):$()},null)}function nC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uF(e){let t=L.useContext(vy);return ar(t,nC(e)),t}function dF(e){let t=L.useContext(m1);return ar(t,nC(e)),t}function hF(e){let t=L.useContext(wu);return ar(t,nC(e)),t}function iC(e){let t=hF(e),n=t.matches[t.matches.length-1];return ar(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function fF(){return iC("useRouteId")}function pF(){var i;let e=L.useContext(eC),t=dF("useRouteError"),n=iC("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function mF(){let{router:e}=uF("useNavigate"),t=iC("useNavigate"),n=L.useRef(!1);return GA(()=>{n.current=!0}),L.useCallback((c,...a)=>Gt(null,[c,...a],function*(o,u={}){vc(n.current,qA),n.current&&(typeof o=="number"?e.navigate(o):yield e.navigate(o,te({fromRouteId:t},u)))}),[e,t])}var Rk={};function ZA(e,t,n){!t&&!Rk[e]&&(Rk[e]=!0,vc(!1,n))}L.memo(gF);function gF({routes:e,future:t,state:n}){return WA(e,void 0,n,t)}function yF({to:e,replace:t,state:n,relative:i}){ar(wy(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=L.useContext(vu);vc(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=L.useContext(wu),{pathname:c}=pl(),a=Pr(),g=Jj(e,Qj(u),c,i==="path"),_=JSON.stringify(g);return L.useEffect(()=>{a(JSON.parse(_),{replace:t,state:n,relative:i})},[a,_,i,t,n]),null}function us(e){ar(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xF({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:o,static:u=!1}){ar(!wy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),a=L.useMemo(()=>({basename:c,navigator:o,static:u,future:{}}),[c,o,u]);typeof n=="string"&&(n=by(n));let{pathname:g="/",search:_="",hash:S="",state:E=null,key:A="default"}=n,N=L.useMemo(()=>{let z=Ch(g,c);return z==null?null:{location:{pathname:z,search:_,hash:S,state:E,key:A},navigationType:i}},[c,g,_,S,E,A,i]);return vc(N!=null,`<Router basename="${c}"> is not able to match the URL "${g}${_}${S}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:L.createElement(vu.Provider,{value:a},L.createElement(Z0.Provider,{children:t,value:N}))}function YA({children:e,location:t}){return sF(fS(e),t)}function fS(e,t=[]){let n=[];return L.Children.forEach(e,(i,o)=>{if(!L.isValidElement(i))return;let u=[...t,o];if(i.type===L.Fragment){n.push.apply(n,fS(i.props.children,u));return}ar(i.type===us,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ar(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=fS(i.props.children,u)),n.push(c)}),n}var Zb="get",Yb="application/x-www-form-urlencoded";function g1(e){return e!=null&&typeof e.tagName=="string"}function _F(e){return g1(e)&&e.tagName.toLowerCase()==="button"}function bF(e){return g1(e)&&e.tagName.toLowerCase()==="form"}function vF(e){return g1(e)&&e.tagName.toLowerCase()==="input"}function wF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function SF(e,t){return e.button===0&&(!t||t==="_self")&&!wF(e)}function pS(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function jF(e,t){let n=pS(e);return t&&t.forEach((i,o)=>{n.has(o)||t.getAll(o).forEach(u=>{n.append(o,u)})}),n}var ob=null;function CF(){if(ob===null)try{new FormData(document.createElement("form"),0),ob=!1}catch(e){ob=!0}return ob}var TF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lw(e){return e!=null&&!TF.has(e)?(vc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yb}"`),null):e}function kF(e,t){let n,i,o,u,c;if(bF(e)){let a=e.getAttribute("action");i=a?Ch(a,t):null,n=e.getAttribute("method")||Zb,o=Lw(e.getAttribute("enctype"))||Yb,u=new FormData(e)}else if(_F(e)||vF(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||a.getAttribute("action");if(i=g?Ch(g,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Zb,o=Lw(e.getAttribute("formenctype"))||Lw(a.getAttribute("enctype"))||Yb,u=new FormData(a,e),!CF()){let{name:_,type:S,value:E}=e;if(S==="image"){let A=_?`${_}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else _&&u.append(_,E)}}else{if(g1(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Zb,i=null,o=Yb,c=e}return u&&o==="text/plain"&&(c=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:c}}function sC(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function EF(e,t){return Gt(this,null,function*(){if(e.id in t)return t[e.id];try{let n=yield import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}function MF(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}function NF(e,t,n){return Gt(this,null,function*(){let i=yield Promise.all(e.map(o=>Gt(null,null,function*(){let u=t.routes[o.route.id];if(u){let c=yield EF(u,n);return c.links?c.links():[]}return[]})));return DF(i.flat(1).filter(MF).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?Ee(te({},o),{rel:"prefetch",as:"style"}):Ee(te({},o),{rel:"prefetch"})))})}function Dk(e,t,n,i,o,u){let c=(g,_)=>n[_]?g.route.id!==n[_].route.id:!0,a=(g,_)=>{var S;return n[_].pathname!==g.pathname||((S=n[_].route.path)==null?void 0:S.endsWith("*"))&&n[_].params["*"]!==g.params["*"]};return u==="assets"?t.filter((g,_)=>c(g,_)||a(g,_)):u==="data"?t.filter((g,_)=>{var E;let S=i.routes[g.route.id];if(!S||!S.hasLoader)return!1;if(c(g,_)||a(g,_))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function AF(e,t,{includeHydrateFallback:n}={}){return PF(e.map(i=>{let o=t.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function PF(e){return[...new Set(e)]}function RF(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function DF(e,t){let n=new Set;return new Set(t),e.reduce((i,o)=>{let u=JSON.stringify(RF(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zF=new Set([100,101,204,205]);function IF(e,t){let n=typeof e=="string"?new URL(e,typeof window=="undefined"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Ch(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function XA(){let e=L.useContext(vy);return sC(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function OF(){let e=L.useContext(m1);return sC(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rC=L.createContext(void 0);rC.displayName="FrameworkContext";function KA(){let e=L.useContext(rC);return sC(e,"You must render this element inside a <HydratedRouter> element"),e}function FF(e,t){let n=L.useContext(rC),[i,o]=L.useState(!1),[u,c]=L.useState(!1),{onFocus:a,onBlur:g,onMouseEnter:_,onMouseLeave:S,onTouchStart:E}=t,A=L.useRef(null);L.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let B=q=>{q.forEach(W=>{c(W.isIntersecting)})},$=new IntersectionObserver(B,{threshold:.5});return A.current&&$.observe(A.current),()=>{$.disconnect()}}},[e]),L.useEffect(()=>{if(i){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[i]);let N=()=>{o(!0)},z=()=>{o(!1),c(!1)};return n?e!=="intent"?[u,A,{}]:[u,A,{onFocus:zx(a,N),onBlur:zx(g,z),onMouseEnter:zx(_,N),onMouseLeave:zx(S,z),onTouchStart:zx(E,N)}]:[!1,A,{}]}function zx(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function LF(n){var i=n,{page:e}=i,t=Jt(i,["page"]);let{router:o}=XA(),u=L.useMemo(()=>BA(o.routes,e,o.basename),[o.routes,e,o.basename]);return u?L.createElement(VF,te({page:e,matches:u},t)):null}function BF(e){let{manifest:t,routeModules:n}=KA(),[i,o]=L.useState([]);return L.useEffect(()=>{let u=!1;return NF(e,t,n).then(c=>{u||o(c)}),()=>{u=!0}},[e,t,n]),i}function VF(i){var o=i,{page:e,matches:t}=o,n=Jt(o,["page","matches"]);let u=pl(),{manifest:c,routeModules:a}=KA(),{basename:g}=XA(),{loaderData:_,matches:S}=OF(),E=L.useMemo(()=>Dk(e,t,S,c,u,"data"),[e,t,S,c,u]),A=L.useMemo(()=>Dk(e,t,S,c,u,"assets"),[e,t,S,c,u]),N=L.useMemo(()=>{if(e===u.pathname+u.search+u.hash)return[];let $=new Set,q=!1;if(t.forEach(Q=>{var K;let Z=c.routes[Q.route.id];!Z||!Z.hasLoader||(!E.some(le=>le.route.id===Q.route.id)&&Q.route.id in _&&((K=a[Q.route.id])!=null&&K.shouldRevalidate)||Z.hasClientLoader?q=!0:$.add(Q.route.id))}),$.size===0)return[];let W=IF(e,g);return q&&$.size>0&&W.searchParams.set("_routes",t.filter(Q=>$.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[W.pathname+W.search]},[g,_,u,c,E,t,e,a]),z=L.useMemo(()=>AF(A,c),[A,c]),B=BF(A);return L.createElement(L.Fragment,null,N.map($=>L.createElement("link",te({key:$,rel:"prefetch",as:"fetch",href:$},n))),z.map($=>L.createElement("link",te({key:$,rel:"modulepreload",href:$},n))),B.map(({key:$,link:q})=>L.createElement("link",te({key:$},q))))}function UF(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var QA=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{QA&&(window.__reactRouterVersion="7.6.1")}catch(e){}function $F({basename:e,children:t,window:n}){let i=L.useRef();i.current==null&&(i.current=MO({window:n,v5Compat:!0}));let o=i.current,[u,c]=L.useState({action:o.action,location:o.location}),a=L.useCallback(g=>{L.startTransition(()=>c(g))},[c]);return L.useLayoutEffect(()=>o.listen(a),[o,a]),L.createElement(xF,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:o})}var JA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mr=L.forwardRef(function(z,N){var B=z,{onClick:t,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:c,state:a,target:g,to:_,preventScrollReset:S,viewTransition:E}=B,A=Jt(B,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let{basename:$}=L.useContext(vu),q=typeof _=="string"&&JA.test(_),W,Q=!1;if(typeof _=="string"&&q&&(W=_,QA))try{let He=new URL(window.location.href),Ye=_.startsWith("//")?new URL(He.protocol+_):new URL(_),rt=Ch(Ye.pathname,$);Ye.origin===He.origin&&rt!=null?_=rt+Ye.search+Ye.hash:Q=!0}catch(He){vc(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=nF(_,{relative:o}),[K,le,ge]=FF(i,A),he=WF(_,{replace:c,state:a,target:g,preventScrollReset:S,relative:o,viewTransition:E});function pe(He){t&&t(He),He.defaultPrevented||he(He)}let Ie=L.createElement("a",Ee(te(te({},A),ge),{href:W||Z,onClick:Q||u?t:pe,ref:UF(N,le),target:g,"data-discover":!q&&n==="render"?"true":void 0}));return K&&!q?L.createElement(L.Fragment,null,Ie,L.createElement(LF,{page:Z})):Ie});Mr.displayName="Link";var HF=L.forwardRef(function(E,S){var A=E,{"aria-current":t="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:c,viewTransition:a,children:g}=A,_=Jt(A,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let N=Y0(c,{relative:_.relative}),z=pl(),B=L.useContext(m1),{navigator:$,basename:q}=L.useContext(vu),W=B!=null&&JF(N)&&a===!0,Q=$.encodeLocation?$.encodeLocation(N).pathname:N.pathname,Z=z.pathname,K=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;n||(Z=Z.toLowerCase(),K=K?K.toLowerCase():null,Q=Q.toLowerCase()),K&&q&&(K=Ch(K,q)||K);const le=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let ge=Z===Q||!o&&Z.startsWith(Q)&&Z.charAt(le)==="/",he=K!=null&&(K===Q||!o&&K.startsWith(Q)&&K.charAt(Q.length)==="/"),pe={isActive:ge,isPending:he,isTransitioning:W},Ie=ge?t:void 0,He;typeof i=="function"?He=i(pe):He=[i,ge?"active":null,he?"pending":null,W?"transitioning":null].filter(Boolean).join(" ");let Ye=typeof u=="function"?u(pe):u;return L.createElement(Mr,Ee(te({},_),{"aria-current":Ie,className:He,ref:S,style:Ye,to:c,viewTransition:a}),typeof g=="function"?g(pe):g)});HF.displayName="NavLink";var qF=L.forwardRef((z,N)=>{var B=z,{discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:o,state:u,method:c=Zb,action:a,onSubmit:g,relative:_,preventScrollReset:S,viewTransition:E}=B,A=Jt(B,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let $=KF(),q=QF(a,{relative:_}),W=c.toLowerCase()==="get"?"get":"post",Q=typeof a=="string"&&JA.test(a),Z=K=>{if(g&&g(K),K.defaultPrevented)return;K.preventDefault();let le=K.nativeEvent.submitter,ge=(le==null?void 0:le.getAttribute("formmethod"))||c;$(le||K.currentTarget,{fetcherKey:t,method:ge,navigate:n,replace:o,state:u,relative:_,preventScrollReset:S,viewTransition:E})};return L.createElement("form",Ee(te({ref:N,method:W,action:q,onSubmit:i?g:Z},A),{"data-discover":!Q&&e==="render"?"true":void 0}))});qF.displayName="Form";function GF(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eP(e){let t=L.useContext(vy);return ar(t,GF(e)),t}function WF(e,{target:t,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:c}={}){let a=Pr(),g=pl(),_=Y0(e,{relative:u});return L.useCallback(S=>{if(SF(S,t)){S.preventDefault();let E=n!==void 0?n:j0(g)===j0(_);a(e,{replace:E,state:i,preventScrollReset:o,relative:u,viewTransition:c})}},[g,a,_,n,i,t,e,o,u,c])}function ZF(e){vc(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=L.useRef(pS(e)),n=L.useRef(!1),i=pl(),o=L.useMemo(()=>jF(i.search,n.current?null:t.current),[i.search]),u=Pr(),c=L.useCallback((a,g)=>{const _=pS(typeof a=="function"?a(o):a);n.current=!0,u("?"+_,g)},[u,o]);return[o,c]}var YF=0,XF=()=>`__${String(++YF)}__`;function KF(){let{router:e}=eP("useSubmit"),{basename:t}=L.useContext(vu),n=fF();return L.useCallback((u,...c)=>Gt(null,[u,...c],function*(i,o={}){let{action:a,method:g,encType:_,formData:S,body:E}=kF(i,t);if(o.navigate===!1){let A=o.fetcherKey||XF();yield e.fetch(A,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:S,body:E,formMethod:o.method||g,formEncType:o.encType||_,flushSync:o.flushSync})}else yield e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:S,body:E,formMethod:o.method||g,formEncType:o.encType||_,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})}),[e,t,n])}function QF(e,{relative:t}={}){let{basename:n}=L.useContext(vu),i=L.useContext(wu);ar(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u=te({},Y0(e||".",{relative:t})),c=pl();if(e==null){u.search=c.search;let a=new URLSearchParams(u.search),g=a.getAll("index");if(g.some(S=>S==="")){a.delete("index"),g.filter(E=>E).forEach(E=>a.append("index",E));let S=a.toString();u.search=S?`?${S}`:""}}return(!e||e===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:bh([n,u.pathname])),j0(u)}function JF(e,t={}){let n=L.useContext(HA);ar(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=eP("useViewTransitionState"),o=Y0(e,{relative:t.relative});if(!n.isTransitioning)return!1;let u=Ch(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=Ch(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Ev(o.pathname,c)!=null||Ev(o.pathname,u)!=null}[...zF];var X0=oA();const tP=G0(X0);function zk(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function bm(...e){return t=>{let n=!1;const i=e.map(o=>{const u=zk(o,t);return!n&&typeof u=="function"&&(n=!0),u});if(n)return()=>{for(let o=0;o<i.length;o++){const u=i[o];typeof u=="function"?u():zk(e[o],null)}}}}function hr(...e){return L.useCallback(bm(...e),e)}function vm(e){const t=e8(e),n=L.forwardRef((i,o)=>{const _=i,{children:u}=_,c=Jt(_,["children"]),a=L.Children.toArray(u),g=a.find(n8);if(g){const S=g.props.children,E=a.map(A=>A===g?L.Children.count(S)>1?L.Children.only(null):L.isValidElement(S)?S.props.children:null:A);return l.jsx(t,Ee(te({},c),{ref:o,children:L.isValidElement(S)?L.cloneElement(S,void 0,E):null}))}return l.jsx(t,Ee(te({},c),{ref:o,children:u}))});return n.displayName=`${e}.Slot`,n}var aC=vm("Slot");function e8(e){const t=L.forwardRef((n,i)=>{const c=n,{children:o}=c,u=Jt(c,["children"]);if(L.isValidElement(o)){const a=s8(o),g=i8(u,o.props);return o.type!==L.Fragment&&(g.ref=i?bm(i,a):a),L.cloneElement(o,g)}return L.Children.count(o)>1?L.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var t8=Symbol("radix.slottable");function n8(e){return L.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===t8}function i8(e,t){const n=te({},t);for(const i in t){const o=e[i],u=t[i];/^on[A-Z]/.test(i)?o&&u?n[i]=(...a)=>{const g=u(...a);return o(...a),g}:o&&(n[i]=o):i==="style"?n[i]=te(te({},o),u):i==="className"&&(n[i]=[o,u].filter(Boolean).join(" "))}return te(te({},e),n)}function s8(e){var i,o;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function nP(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=nP(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function y1(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=nP(e))&&(i&&(i+=" "),i+=t);return i}const Ik=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Ok=y1,r8=(e,t)=>n=>{var i;if((t==null?void 0:t.variants)==null)return Ok(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:u}=t,c=Object.keys(o).map(_=>{const S=n==null?void 0:n[_],E=u==null?void 0:u[_];if(S===null)return null;const A=Ik(S)||Ik(E);return o[_][A]}),a=n&&Object.entries(n).reduce((_,S)=>{let[E,A]=S;return A===void 0||(_[E]=A),_},{}),g=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((_,S)=>{let z=S,{class:E,className:A}=z,N=Jt(z,["class","className"]);return Object.entries(N).every(B=>{let[$,q]=B;return Array.isArray(q)?q.includes(te(te({},u),a)[$]):te(te({},u),a)[$]===q})?[..._,E,A]:_},[]);return Ok(e,c,g,n==null?void 0:n.class,n==null?void 0:n.className)},oC="-",a8=e=>{const t=l8(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:c=>{const a=c.split(oC);return a[0]===""&&a.length!==1&&a.shift(),iP(a,t)||o8(c)},getConflictingClassGroupIds:(c,a)=>{const g=n[c]||[];return a&&i[c]?[...g,...i[c]]:g}}},iP=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const n=e[0],i=t.nextPart.get(n),o=i?iP(e.slice(1),i):void 0;if(o)return o;if(t.validators.length===0)return;const u=e.join(oC);return(c=t.validators.find(({validator:a})=>a(u)))==null?void 0:c.classGroupId},Fk=/^\[(.+)\]$/,o8=e=>{if(Fk.test(e)){const t=Fk.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},l8=e=>{const{theme:t,classGroups:n}=e,i={nextPart:new Map,validators:[]};for(const o in n)mS(n[o],i,o,t);return i},mS=(e,t,n,i)=>{e.forEach(o=>{if(typeof o=="string"){const u=o===""?t:Lk(t,o);u.classGroupId=n;return}if(typeof o=="function"){if(c8(o)){mS(o(i),t,n,i);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([u,c])=>{mS(c,Lk(t,u),n,i)})})},Lk=(e,t)=>{let n=e;return t.split(oC).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},c8=e=>e.isThemeGetter,u8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,i=new Map;const o=(u,c)=>{n.set(u,c),t++,t>e&&(t=0,i=n,n=new Map)};return{get(u){let c=n.get(u);if(c!==void 0)return c;if((c=i.get(u))!==void 0)return o(u,c),c},set(u,c){n.has(u)?n.set(u,c):o(u,c)}}},gS="!",yS=":",d8=yS.length,h8=e=>{const{prefix:t,experimentalParseClassName:n}=e;let i=o=>{const u=[];let c=0,a=0,g=0,_;for(let z=0;z<o.length;z++){let B=o[z];if(c===0&&a===0){if(B===yS){u.push(o.slice(g,z)),g=z+d8;continue}if(B==="/"){_=z;continue}}B==="["?c++:B==="]"?c--:B==="("?a++:B===")"&&a--}const S=u.length===0?o:o.substring(g),E=f8(S),A=E!==S,N=_&&_>g?_-g:void 0;return{modifiers:u,hasImportantModifier:A,baseClassName:E,maybePostfixModifierPosition:N}};if(t){const o=t+yS,u=i;i=c=>c.startsWith(o)?u(c.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(n){const o=i;i=u=>n({className:u,parseClassName:o})}return i},f8=e=>e.endsWith(gS)?e.substring(0,e.length-1):e.startsWith(gS)?e.substring(1):e,p8=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const o=[];let u=[];return i.forEach(c=>{c[0]==="["||t[c]?(o.push(...u.sort(),c),u=[]):u.push(c)}),o.push(...u.sort()),o}},m8=e=>te({cache:u8(e.cacheSize),parseClassName:h8(e),sortModifiers:p8(e)},a8(e)),g8=/\s+/,y8=(e,t)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:u}=t,c=[],a=e.trim().split(g8);let g="";for(let _=a.length-1;_>=0;_-=1){const S=a[_],{isExternal:E,modifiers:A,hasImportantModifier:N,baseClassName:z,maybePostfixModifierPosition:B}=n(S);if(E){g=S+(g.length>0?" "+g:g);continue}let $=!!B,q=i($?z.substring(0,B):z);if(!q){if(!$){g=S+(g.length>0?" "+g:g);continue}if(q=i(z),!q){g=S+(g.length>0?" "+g:g);continue}$=!1}const W=u(A).join(":"),Q=N?W+gS:W,Z=Q+q;if(c.includes(Z))continue;c.push(Z);const K=o(q,$);for(let le=0;le<K.length;++le){const ge=K[le];c.push(Q+ge)}g=S+(g.length>0?" "+g:g)}return g};function x8(){let e=0,t,n,i="";for(;e<arguments.length;)(t=arguments[e++])&&(n=sP(t))&&(i&&(i+=" "),i+=n);return i}const sP=e=>{if(typeof e=="string")return e;let t,n="";for(let i=0;i<e.length;i++)e[i]&&(t=sP(e[i]))&&(n&&(n+=" "),n+=t);return n};function _8(e,...t){let n,i,o,u=c;function c(g){const _=t.reduce((S,E)=>E(S),e());return n=m8(_),i=n.cache.get,o=n.cache.set,u=a,a(g)}function a(g){const _=i(g);if(_)return _;const S=y8(g,n);return o(g,S),S}return function(){return u(x8.apply(null,arguments))}}const la=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},rP=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,aP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,b8=/^\d+\/\d+$/,v8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,w8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,j8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,C8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ig=e=>b8.test(e),Pi=e=>!!e&&!Number.isNaN(Number(e)),kf=e=>!!e&&Number.isInteger(Number(e)),Bw=e=>e.endsWith("%")&&Pi(e.slice(0,-1)),ch=e=>v8.test(e),T8=()=>!0,k8=e=>w8.test(e)&&!S8.test(e),oP=()=>!1,E8=e=>j8.test(e),M8=e=>C8.test(e),N8=e=>!Fn(e)&&!Ln(e),A8=e=>Sy(e,uP,oP),Fn=e=>rP.test(e),Yp=e=>Sy(e,dP,k8),Vw=e=>Sy(e,I8,Pi),Bk=e=>Sy(e,lP,oP),P8=e=>Sy(e,cP,M8),lb=e=>Sy(e,hP,E8),Ln=e=>aP.test(e),Ix=e=>jy(e,dP),R8=e=>jy(e,O8),Vk=e=>jy(e,lP),D8=e=>jy(e,uP),z8=e=>jy(e,cP),cb=e=>jy(e,hP,!0),Sy=(e,t,n)=>{const i=rP.exec(e);return i?i[1]?t(i[1]):n(i[2]):!1},jy=(e,t,n=!1)=>{const i=aP.exec(e);return i?i[1]?t(i[1]):n:!1},lP=e=>e==="position"||e==="percentage",cP=e=>e==="image"||e==="url",uP=e=>e==="length"||e==="size"||e==="bg-size",dP=e=>e==="length",I8=e=>e==="number",O8=e=>e==="family-name",hP=e=>e==="shadow",F8=()=>{const e=la("color"),t=la("font"),n=la("text"),i=la("font-weight"),o=la("tracking"),u=la("leading"),c=la("breakpoint"),a=la("container"),g=la("spacing"),_=la("radius"),S=la("shadow"),E=la("inset-shadow"),A=la("text-shadow"),N=la("drop-shadow"),z=la("blur"),B=la("perspective"),$=la("aspect"),q=la("ease"),W=la("animate"),Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],K=()=>[...Z(),Ln,Fn],le=()=>["auto","hidden","clip","visible","scroll"],ge=()=>["auto","contain","none"],he=()=>[Ln,Fn,g],pe=()=>[Ig,"full","auto",...he()],Ie=()=>[kf,"none","subgrid",Ln,Fn],He=()=>["auto",{span:["full",kf,Ln,Fn]},kf,Ln,Fn],Ye=()=>[kf,"auto",Ln,Fn],rt=()=>["auto","min","max","fr",Ln,Fn],Rt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],St=()=>["start","end","center","stretch","center-safe","end-safe"],De=()=>["auto",...he()],Qe=()=>[Ig,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...he()],et=()=>[e,Ln,Fn],Nt=()=>[...Z(),Vk,Bk,{position:[Ln,Fn]}],fe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Xe=()=>["auto","cover","contain",D8,A8,{size:[Ln,Fn]}],tt=()=>[Bw,Ix,Yp],Me=()=>["","none","full",_,Ln,Fn],ot=()=>["",Pi,Ix,Yp],ut=()=>["solid","dashed","dotted","double"],dt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pt=()=>[Pi,Bw,Vk,Bk],Ve=()=>["","none",z,Ln,Fn],Ge=()=>["none",Pi,Ln,Fn],Dt=()=>["none",Pi,Ln,Fn],Lt=()=>[Pi,Ln,Fn],It=()=>[Ig,"full",...he()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ch],breakpoint:[ch],color:[T8],container:[ch],"drop-shadow":[ch],ease:["in","out","in-out"],font:[N8],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ch],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ch],shadow:[ch],spacing:["px",Pi],text:[ch],"text-shadow":[ch],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ig,Fn,Ln,$]}],container:["container"],columns:[{columns:[Pi,Fn,Ln,a]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:K()}],overflow:[{overflow:le()}],"overflow-x":[{"overflow-x":le()}],"overflow-y":[{"overflow-y":le()}],overscroll:[{overscroll:ge()}],"overscroll-x":[{"overscroll-x":ge()}],"overscroll-y":[{"overscroll-y":ge()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:pe()}],"inset-x":[{"inset-x":pe()}],"inset-y":[{"inset-y":pe()}],start:[{start:pe()}],end:[{end:pe()}],top:[{top:pe()}],right:[{right:pe()}],bottom:[{bottom:pe()}],left:[{left:pe()}],visibility:["visible","invisible","collapse"],z:[{z:[kf,"auto",Ln,Fn]}],basis:[{basis:[Ig,"full","auto",a,...he()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Pi,Ig,"auto","initial","none",Fn]}],grow:[{grow:["",Pi,Ln,Fn]}],shrink:[{shrink:["",Pi,Ln,Fn]}],order:[{order:[kf,"first","last","none",Ln,Fn]}],"grid-cols":[{"grid-cols":Ie()}],"col-start-end":[{col:He()}],"col-start":[{"col-start":Ye()}],"col-end":[{"col-end":Ye()}],"grid-rows":[{"grid-rows":Ie()}],"row-start-end":[{row:He()}],"row-start":[{"row-start":Ye()}],"row-end":[{"row-end":Ye()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":rt()}],"auto-rows":[{"auto-rows":rt()}],gap:[{gap:he()}],"gap-x":[{"gap-x":he()}],"gap-y":[{"gap-y":he()}],"justify-content":[{justify:[...Rt(),"normal"]}],"justify-items":[{"justify-items":[...St(),"normal"]}],"justify-self":[{"justify-self":["auto",...St()]}],"align-content":[{content:["normal",...Rt()]}],"align-items":[{items:[...St(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...St(),{baseline:["","last"]}]}],"place-content":[{"place-content":Rt()}],"place-items":[{"place-items":[...St(),"baseline"]}],"place-self":[{"place-self":["auto",...St()]}],p:[{p:he()}],px:[{px:he()}],py:[{py:he()}],ps:[{ps:he()}],pe:[{pe:he()}],pt:[{pt:he()}],pr:[{pr:he()}],pb:[{pb:he()}],pl:[{pl:he()}],m:[{m:De()}],mx:[{mx:De()}],my:[{my:De()}],ms:[{ms:De()}],me:[{me:De()}],mt:[{mt:De()}],mr:[{mr:De()}],mb:[{mb:De()}],ml:[{ml:De()}],"space-x":[{"space-x":he()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":he()}],"space-y-reverse":["space-y-reverse"],size:[{size:Qe()}],w:[{w:[a,"screen",...Qe()]}],"min-w":[{"min-w":[a,"screen","none",...Qe()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[c]},...Qe()]}],h:[{h:["screen","lh",...Qe()]}],"min-h":[{"min-h":["screen","lh","none",...Qe()]}],"max-h":[{"max-h":["screen","lh",...Qe()]}],"font-size":[{text:["base",n,Ix,Yp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Ln,Vw]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Bw,Fn]}],"font-family":[{font:[R8,Fn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,Ln,Fn]}],"line-clamp":[{"line-clamp":[Pi,"none",Ln,Vw]}],leading:[{leading:[u,...he()]}],"list-image":[{"list-image":["none",Ln,Fn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ln,Fn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:et()}],"text-color":[{text:et()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ut(),"wavy"]}],"text-decoration-thickness":[{decoration:[Pi,"from-font","auto",Ln,Yp]}],"text-decoration-color":[{decoration:et()}],"underline-offset":[{"underline-offset":[Pi,"auto",Ln,Fn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:he()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ln,Fn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ln,Fn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Nt()}],"bg-repeat":[{bg:fe()}],"bg-size":[{bg:Xe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},kf,Ln,Fn],radial:["",Ln,Fn],conic:[kf,Ln,Fn]},z8,P8]}],"bg-color":[{bg:et()}],"gradient-from-pos":[{from:tt()}],"gradient-via-pos":[{via:tt()}],"gradient-to-pos":[{to:tt()}],"gradient-from":[{from:et()}],"gradient-via":[{via:et()}],"gradient-to":[{to:et()}],rounded:[{rounded:Me()}],"rounded-s":[{"rounded-s":Me()}],"rounded-e":[{"rounded-e":Me()}],"rounded-t":[{"rounded-t":Me()}],"rounded-r":[{"rounded-r":Me()}],"rounded-b":[{"rounded-b":Me()}],"rounded-l":[{"rounded-l":Me()}],"rounded-ss":[{"rounded-ss":Me()}],"rounded-se":[{"rounded-se":Me()}],"rounded-ee":[{"rounded-ee":Me()}],"rounded-es":[{"rounded-es":Me()}],"rounded-tl":[{"rounded-tl":Me()}],"rounded-tr":[{"rounded-tr":Me()}],"rounded-br":[{"rounded-br":Me()}],"rounded-bl":[{"rounded-bl":Me()}],"border-w":[{border:ot()}],"border-w-x":[{"border-x":ot()}],"border-w-y":[{"border-y":ot()}],"border-w-s":[{"border-s":ot()}],"border-w-e":[{"border-e":ot()}],"border-w-t":[{"border-t":ot()}],"border-w-r":[{"border-r":ot()}],"border-w-b":[{"border-b":ot()}],"border-w-l":[{"border-l":ot()}],"divide-x":[{"divide-x":ot()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ot()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ut(),"hidden","none"]}],"divide-style":[{divide:[...ut(),"hidden","none"]}],"border-color":[{border:et()}],"border-color-x":[{"border-x":et()}],"border-color-y":[{"border-y":et()}],"border-color-s":[{"border-s":et()}],"border-color-e":[{"border-e":et()}],"border-color-t":[{"border-t":et()}],"border-color-r":[{"border-r":et()}],"border-color-b":[{"border-b":et()}],"border-color-l":[{"border-l":et()}],"divide-color":[{divide:et()}],"outline-style":[{outline:[...ut(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Pi,Ln,Fn]}],"outline-w":[{outline:["",Pi,Ix,Yp]}],"outline-color":[{outline:et()}],shadow:[{shadow:["","none",S,cb,lb]}],"shadow-color":[{shadow:et()}],"inset-shadow":[{"inset-shadow":["none",E,cb,lb]}],"inset-shadow-color":[{"inset-shadow":et()}],"ring-w":[{ring:ot()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:et()}],"ring-offset-w":[{"ring-offset":[Pi,Yp]}],"ring-offset-color":[{"ring-offset":et()}],"inset-ring-w":[{"inset-ring":ot()}],"inset-ring-color":[{"inset-ring":et()}],"text-shadow":[{"text-shadow":["none",A,cb,lb]}],"text-shadow-color":[{"text-shadow":et()}],opacity:[{opacity:[Pi,Ln,Fn]}],"mix-blend":[{"mix-blend":[...dt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":dt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Pi]}],"mask-image-linear-from-pos":[{"mask-linear-from":pt()}],"mask-image-linear-to-pos":[{"mask-linear-to":pt()}],"mask-image-linear-from-color":[{"mask-linear-from":et()}],"mask-image-linear-to-color":[{"mask-linear-to":et()}],"mask-image-t-from-pos":[{"mask-t-from":pt()}],"mask-image-t-to-pos":[{"mask-t-to":pt()}],"mask-image-t-from-color":[{"mask-t-from":et()}],"mask-image-t-to-color":[{"mask-t-to":et()}],"mask-image-r-from-pos":[{"mask-r-from":pt()}],"mask-image-r-to-pos":[{"mask-r-to":pt()}],"mask-image-r-from-color":[{"mask-r-from":et()}],"mask-image-r-to-color":[{"mask-r-to":et()}],"mask-image-b-from-pos":[{"mask-b-from":pt()}],"mask-image-b-to-pos":[{"mask-b-to":pt()}],"mask-image-b-from-color":[{"mask-b-from":et()}],"mask-image-b-to-color":[{"mask-b-to":et()}],"mask-image-l-from-pos":[{"mask-l-from":pt()}],"mask-image-l-to-pos":[{"mask-l-to":pt()}],"mask-image-l-from-color":[{"mask-l-from":et()}],"mask-image-l-to-color":[{"mask-l-to":et()}],"mask-image-x-from-pos":[{"mask-x-from":pt()}],"mask-image-x-to-pos":[{"mask-x-to":pt()}],"mask-image-x-from-color":[{"mask-x-from":et()}],"mask-image-x-to-color":[{"mask-x-to":et()}],"mask-image-y-from-pos":[{"mask-y-from":pt()}],"mask-image-y-to-pos":[{"mask-y-to":pt()}],"mask-image-y-from-color":[{"mask-y-from":et()}],"mask-image-y-to-color":[{"mask-y-to":et()}],"mask-image-radial":[{"mask-radial":[Ln,Fn]}],"mask-image-radial-from-pos":[{"mask-radial-from":pt()}],"mask-image-radial-to-pos":[{"mask-radial-to":pt()}],"mask-image-radial-from-color":[{"mask-radial-from":et()}],"mask-image-radial-to-color":[{"mask-radial-to":et()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Z()}],"mask-image-conic-pos":[{"mask-conic":[Pi]}],"mask-image-conic-from-pos":[{"mask-conic-from":pt()}],"mask-image-conic-to-pos":[{"mask-conic-to":pt()}],"mask-image-conic-from-color":[{"mask-conic-from":et()}],"mask-image-conic-to-color":[{"mask-conic-to":et()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Nt()}],"mask-repeat":[{mask:fe()}],"mask-size":[{mask:Xe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ln,Fn]}],filter:[{filter:["","none",Ln,Fn]}],blur:[{blur:Ve()}],brightness:[{brightness:[Pi,Ln,Fn]}],contrast:[{contrast:[Pi,Ln,Fn]}],"drop-shadow":[{"drop-shadow":["","none",N,cb,lb]}],"drop-shadow-color":[{"drop-shadow":et()}],grayscale:[{grayscale:["",Pi,Ln,Fn]}],"hue-rotate":[{"hue-rotate":[Pi,Ln,Fn]}],invert:[{invert:["",Pi,Ln,Fn]}],saturate:[{saturate:[Pi,Ln,Fn]}],sepia:[{sepia:["",Pi,Ln,Fn]}],"backdrop-filter":[{"backdrop-filter":["","none",Ln,Fn]}],"backdrop-blur":[{"backdrop-blur":Ve()}],"backdrop-brightness":[{"backdrop-brightness":[Pi,Ln,Fn]}],"backdrop-contrast":[{"backdrop-contrast":[Pi,Ln,Fn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Pi,Ln,Fn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Pi,Ln,Fn]}],"backdrop-invert":[{"backdrop-invert":["",Pi,Ln,Fn]}],"backdrop-opacity":[{"backdrop-opacity":[Pi,Ln,Fn]}],"backdrop-saturate":[{"backdrop-saturate":[Pi,Ln,Fn]}],"backdrop-sepia":[{"backdrop-sepia":["",Pi,Ln,Fn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":he()}],"border-spacing-x":[{"border-spacing-x":he()}],"border-spacing-y":[{"border-spacing-y":he()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ln,Fn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Pi,"initial",Ln,Fn]}],ease:[{ease:["linear","initial",q,Ln,Fn]}],delay:[{delay:[Pi,Ln,Fn]}],animate:[{animate:["none",W,Ln,Fn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[B,Ln,Fn]}],"perspective-origin":[{"perspective-origin":K()}],rotate:[{rotate:Ge()}],"rotate-x":[{"rotate-x":Ge()}],"rotate-y":[{"rotate-y":Ge()}],"rotate-z":[{"rotate-z":Ge()}],scale:[{scale:Dt()}],"scale-x":[{"scale-x":Dt()}],"scale-y":[{"scale-y":Dt()}],"scale-z":[{"scale-z":Dt()}],"scale-3d":["scale-3d"],skew:[{skew:Lt()}],"skew-x":[{"skew-x":Lt()}],"skew-y":[{"skew-y":Lt()}],transform:[{transform:[Ln,Fn,"","none","gpu","cpu"]}],"transform-origin":[{origin:K()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:It()}],"translate-x":[{"translate-x":It()}],"translate-y":[{"translate-y":It()}],"translate-z":[{"translate-z":It()}],"translate-none":["translate-none"],accent:[{accent:et()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:et()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ln,Fn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":he()}],"scroll-mx":[{"scroll-mx":he()}],"scroll-my":[{"scroll-my":he()}],"scroll-ms":[{"scroll-ms":he()}],"scroll-me":[{"scroll-me":he()}],"scroll-mt":[{"scroll-mt":he()}],"scroll-mr":[{"scroll-mr":he()}],"scroll-mb":[{"scroll-mb":he()}],"scroll-ml":[{"scroll-ml":he()}],"scroll-p":[{"scroll-p":he()}],"scroll-px":[{"scroll-px":he()}],"scroll-py":[{"scroll-py":he()}],"scroll-ps":[{"scroll-ps":he()}],"scroll-pe":[{"scroll-pe":he()}],"scroll-pt":[{"scroll-pt":he()}],"scroll-pr":[{"scroll-pr":he()}],"scroll-pb":[{"scroll-pb":he()}],"scroll-pl":[{"scroll-pl":he()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ln,Fn]}],fill:[{fill:["none",...et()]}],"stroke-w":[{stroke:[Pi,Ix,Yp,Vw]}],stroke:[{stroke:["none",...et()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},L8=_8(F8);function wr(...e){return L8(y1(e))}const B8=r8("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function V8(u){var c=u,{className:e,variant:t,size:n,asChild:i=!1}=c,o=Jt(c,["className","variant","size","asChild"]);const a=i?aC:"button";return l.jsx(a,te({"data-slot":"button",className:wr(B8({variant:t,size:n,className:e}))},o))}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),Uk=e=>{const t=$8(e);return t.charAt(0).toUpperCase()+t.slice(1)},fP=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),H8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=L.forwardRef((_,g)=>{var S=_,{color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:c}=S,a=Jt(S,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return L.createElement("svg",te(te(Ee(te({ref:g},q8),{width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:fP("lucide",o)}),!u&&!H8(a)&&{"aria-hidden":"true"}),a),[...c.map(([E,A])=>L.createElement(E,A)),...Array.isArray(u)?u:[u]])});/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=(e,t)=>{const n=L.forwardRef((c,u)=>{var a=c,{className:i}=a,o=Jt(a,["className"]);return L.createElement(G8,te({ref:u,iconNode:t,className:fP(`lucide-${U8(Uk(e))}`,`lucide-${e}`,i)},o))});return n.displayName=Uk(e),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],x1=jn("activity",W8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],pP=jn("arrow-left",Z8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],X8=jn("arrow-right",Y8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Q8=jn("arrow-up-right",K8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],xS=jn("bell",J8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],mP=jn("book-open-text",eL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],nL=jn("brain",tL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],gP=jn("building",iL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],_S=jn("calendar-check",sL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xc=jn("calendar",rL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],oL=jn("camera",aL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yP=jn("check",lL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Mv=jn("chevron-down",cL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dL=jn("chevron-left",uL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xP=jn("chevron-right",hL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],pL=jn("chevron-up",fL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],gL=jn("chevrons-up-down",mL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nv=jn("circle-alert",yL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_L=jn("circle-check-big",xL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$k=jn("circle-check",bL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wL=jn("circle-help",vL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Hk=jn("circle-x",SL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],CL=jn("clipboard-list",jL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],kL=jn("clipboard",TL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],cy=jn("clock",EL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],NL=jn("coffee",ML);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],qk=jn("coins",AL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lC=jn("credit-card",PL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Av=jn("download",RL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],zL=jn("droplet",DL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],OL=jn("ellipsis",IL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ty=jn("eye-off",FL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hm=jn("eye",LL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],C0=jn("file-text",BL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Gk=jn("gift",VL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],_P=jn("graduation-cap",UL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],HL=jn("grid-3x3",$L);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],cC=jn("heart",qL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],WL=jn("history",GL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]],bP=jn("hospital",ZL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],XL=jn("house",YL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],QL=jn("info",KL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],eB=jn("lock",JL);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],bS=jn("log-out",tB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],vP=jn("mail",nB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],fm=jn("map-pin",iB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],rB=jn("menu",sB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Wk=jn("message-circle",aB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],wP=jn("message-square",oB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],cB=jn("move-right",lB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],dB=jn("navigation",uB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],uC=jn("phone",hB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Xb=jn("pill",fB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],SP=jn("plus",pB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Zk=jn("reply",mB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],jP=jn("school",gB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],l0=jn("search",yB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Yk=jn("send",xB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bB=jn("settings",_B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],wB=jn("share-2",vB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],jB=jn("shield-alert",SB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vS=jn("shield",CB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],kB=jn("smile",TB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],MB=jn("sparkles",EB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],dC=jn("stethoscope",NB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]],wS=jn("syringe",AB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],CP=jn("test-tube",PB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],DB=jn("thermometer",RB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Og=jn("trash-2",zB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],hC=jn("trending-up",IB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],FB=jn("triangle-alert",OB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Xk=jn("upload",LB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],TP=jn("user-check",BB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zm=jn("user",VB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$B=jn("users",UB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],kP=jn("video",HB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],GB=jn("wind",qB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],T0=jn("x",WB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],YB=jn("zap",ZB),XB="/assets/custom/mycard/assets/Health-Dcw6-KnG.jpg",KB=()=>{const e=Pr();return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-blue-200 rounded-full opacity-20 blur-3xl animate-pulse"}),l.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-indigo-200 rounded-full opacity-20 blur-3xl animate-pulse delay-1000"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-purple-200 rounded-full opacity-10 blur-3xl animate-pulse delay-500"})]}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center px-6 py-12",children:l.jsxs("div",{className:"max-w-7xl w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-100 border border-amber-300 rounded-full",children:[l.jsx(Nv,{className:"w-4 h-4 text-amber-600"}),l.jsx("span",{className:"text-sm font-medium text-amber-700",children:"Profile Status"})]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-800 leading-tight mb-4",children:["Medical Profile",l.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:[" ","Not Found"]})]}),l.jsx("p",{className:"text-lg text-gray-600 leading-relaxed mb-6",children:"We couldn't locate your medical profile in our system. You'll need to register as a patient to access all Health Blo Me features."}),l.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl mb-6",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(dC,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),l.jsx("p",{className:"text-sm text-blue-800",children:"Please contact your healthcare provider or system administrator to get your patient profile created."})]})})]}),l.jsx("div",{children:l.jsxs("button",{onClick:()=>e("/"),className:"group bg-white hover:bg-gray-50 text-gray-700 py-3 px-6 rounded-xl font-medium transition-all duration-300 flex items-center gap-3 border border-gray-200 shadow-sm hover:shadow-md",children:[l.jsx(pP,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),"Back to Dashboard"]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(MB,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h3",{className:"font-semibold text-gray-800 text-lg",children:"Available with Patient Profile"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsx("div",{className:"group p-4 bg-white/80 backdrop-blur rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-blue-200 transition-all duration-300",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-50 rounded-lg group-hover:bg-blue-100 transition-colors",children:l.jsx(xc,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 text-sm",children:"Appointments"}),l.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Schedule & manage visits"})]})]})}),l.jsx("div",{className:"group p-4 bg-white/80 backdrop-blur rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-indigo-200 transition-all duration-300",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg group-hover:bg-indigo-100 transition-colors",children:l.jsx(C0,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 text-sm",children:"Health Records"}),l.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Secure digital history"})]})]})}),l.jsx("div",{className:"group p-4 bg-white/80 backdrop-blur rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-purple-200 transition-all duration-300",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 bg-purple-50 rounded-lg group-hover:bg-purple-100 transition-colors",children:l.jsx(vS,{className:"w-5 h-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 text-sm",children:"Prescriptions"}),l.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Track medications"})]})]})}),l.jsx("div",{className:"group p-4 bg-white/80 backdrop-blur rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-pink-200 transition-all duration-300",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 bg-pink-50 rounded-lg group-hover:bg-pink-100 transition-colors",children:l.jsx(x1,{className:"w-5 h-5 text-pink-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 text-sm",children:"Lab Results"}),l.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Monitor health data"})]})]})})]})]})]}),l.jsx("div",{className:"flex justify-center lg:justify-end",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-4 bg-white/30 backdrop-blur-xl rounded-3xl"}),l.jsx("img",{src:XB,alt:"Health Regulation Illustration",className:"relative w-full max-w-lg h-auto object-cover rounded-3xl shadow-2xl border-4 border-white/50"}),l.jsx("div",{className:"absolute -top-6 -right-6 w-20 h-20 bg-gradient-to-br from-red-400 via-pink-400 to-purple-400 rounded-2xl flex items-center justify-center shadow-xl animate-float",children:l.jsx(cC,{className:"w-10 h-10 text-white"})}),l.jsx("div",{className:"absolute -bottom-6 -left-6 w-16 h-16 bg-gradient-to-br from-blue-400 via-indigo-400 to-purple-400 rounded-2xl flex items-center justify-center shadow-xl animate-float-delayed",children:l.jsx(vS,{className:"w-8 h-8 text-white"})}),l.jsxs("div",{className:"absolute top-1/2 -left-12 space-y-3",children:[l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full animate-pulse"}),l.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full animate-pulse delay-200"}),l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full animate-pulse delay-500"})]}),l.jsxs("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 space-x-2 flex",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce delay-100"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full animate-bounce delay-200"})]})]})})]})}),l.jsx("style",{jsx:!0,children:`
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) rotate(0deg);
          }
          50% {
            transform: translateY(-10px) rotate(5deg);
          }
        }
        
        @keyframes float-delayed {
          0%, 100% {
            transform: translateY(0px) rotate(0deg);
          }
          50% {
            transform: translateY(-8px) rotate(-5deg);
          }
        }
        
        .animate-float {
          animation: float 4s ease-in-out infinite;
        }
        
        .animate-float-delayed {
          animation: float-delayed 4s ease-in-out infinite;
          animation-delay: 1s;
        }
      `})]})};/*! js-cookie v3.0.5 | MIT */function ub(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var QB={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function SS(e,t){function n(o,u,c){if(typeof document!="undefined"){c=ub({},t,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var g in c)c[g]&&(a+="; "+g,c[g]!==!0&&(a+="="+c[g].split(";")[0]));return document.cookie=o+"="+e.write(u,o)+a}}function i(o){if(!(typeof document=="undefined"||arguments.length&&!o)){for(var u=document.cookie?document.cookie.split("; "):[],c={},a=0;a<u.length;a++){var g=u[a].split("="),_=g.slice(1).join("=");try{var S=decodeURIComponent(g[0]);if(c[S]=e.read(_,S),o===S)break}catch(E){}}return o?c[o]:c}}return Object.create({set:n,get:i,remove:function(o,u){n(o,"",ub({},u,{expires:-1}))},withAttributes:function(o){return SS(this.converter,ub({},this.attributes,o))},withConverter:function(o){return SS(ub({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Qi=SS(QB,{path:"/"}),Uw={exports:{}},$w={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kk;function JB(){if(Kk)return $w;Kk=1;var e=h1();function t(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,o=e.useRef,u=e.useEffect,c=e.useMemo,a=e.useDebugValue;return $w.useSyncExternalStoreWithSelector=function(g,_,S,E,A){var N=o(null);if(N.current===null){var z={hasValue:!1,value:null};N.current=z}else z=N.current;N=c(function(){function $(K){if(!q){if(q=!0,W=K,K=E(K),A!==void 0&&z.hasValue){var le=z.value;if(A(le,K))return Q=le}return Q=K}if(le=Q,n(W,K))return le;var ge=E(K);return A!==void 0&&A(le,ge)?(W=K,le):(W=K,Q=ge)}var q=!1,W,Q,Z=S===void 0?null:S;return[function(){return $(_())},Z===null?void 0:function(){return $(Z())}]},[_,S,E,A]);var B=i(g,N[0],N[1]);return u(function(){z.hasValue=!0,z.value=B},[B]),a(B),B},$w}var Qk;function e7(){return Qk||(Qk=1,Uw.exports=JB()),Uw.exports}var t7=e7();function n7(e){e()}function i7(){let e=null,t=null;return{clear(){e=null,t=null},notify(){n7(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var Jk={notify(){},get:()=>[]};function s7(e,t){let n,i=Jk,o=0,u=!1;function c(B){S();const $=i.subscribe(B);let q=!1;return()=>{q||(q=!0,$(),E())}}function a(){i.notify()}function g(){z.onStateChange&&z.onStateChange()}function _(){return u}function S(){o++,n||(n=e.subscribe(g),i=i7())}function E(){o--,n&&o===0&&(n(),n=void 0,i.clear(),i=Jk)}function A(){u||(u=!0,S())}function N(){u&&(u=!1,E())}const z={addNestedSub:c,notifyNestedSubs:a,handleChangeWrapper:g,isSubscribed:_,trySubscribe:A,tryUnsubscribe:N,getListeners:()=>i};return z}var r7=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",a7=r7(),o7=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",l7=o7(),c7=()=>a7||l7?L.useLayoutEffect:L.useEffect,u7=c7(),Hw=Symbol.for("react-redux-context"),qw=typeof globalThis!="undefined"?globalThis:{};function d7(){var n;if(!L.createContext)return{};const e=(n=qw[Hw])!=null?n:qw[Hw]=new Map;let t=e.get(L.createContext);return t||(t=L.createContext(null),e.set(L.createContext,t)),t}var Vf=d7();function h7(e){const{children:t,context:n,serverState:i,store:o}=e,u=L.useMemo(()=>{const g=s7(o);return{store:o,subscription:g,getServerState:i?()=>i:void 0}},[o,i]),c=L.useMemo(()=>o.getState(),[o]);u7(()=>{const{subscription:g}=u;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),c!==o.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[u,c]);const a=n||Vf;return L.createElement(a.Provider,{value:u},t)}var f7=h7;function fC(e=Vf){return function(){return L.useContext(e)}}var EP=fC();function MP(e=Vf){const t=e===Vf?EP:fC(e),n=()=>{const{store:i}=t();return i};return Object.assign(n,{withTypes:()=>n}),n}var p7=MP();function m7(e=Vf){const t=e===Vf?p7:MP(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Im=m7(),g7=(e,t)=>e===t;function y7(e=Vf){const t=e===Vf?EP:fC(e),n=(i,o={})=>{const{equalityFn:u=g7}=typeof o=="function"?{equalityFn:o}:o,c=t(),{store:a,subscription:g,getServerState:_}=c;L.useRef(!0);const S=L.useCallback({[i.name](A){return i(A)}}[i.name],[i]),E=t7.useSyncExternalStoreWithSelector(g.addNestedSub,a.getState,_||a.getState,S,u);return L.useDebugValue(E),E};return Object.assign(n,{withTypes:()=>n}),n}var hd=y7();function Va(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var x7=typeof Symbol=="function"&&Symbol.observable||"@@observable",eE=x7,Gw=()=>Math.random().toString(36).substring(7).split("").join("."),_7={INIT:`@@redux/INIT${Gw()}`,REPLACE:`@@redux/REPLACE${Gw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Gw()}`},Pv=_7;function pC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function mC(e,t,n){if(typeof e!="function")throw new Error(Va(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Va(0));if(typeof t=="function"&&typeof n=="undefined"&&(n=t,t=void 0),typeof n!="undefined"){if(typeof n!="function")throw new Error(Va(1));return n(mC)(e,t)}let i=e,o=t,u=new Map,c=u,a=0,g=!1;function _(){c===u&&(c=new Map,u.forEach(($,q)=>{c.set(q,$)}))}function S(){if(g)throw new Error(Va(3));return o}function E($){if(typeof $!="function")throw new Error(Va(4));if(g)throw new Error(Va(5));let q=!0;_();const W=a++;return c.set(W,$),function(){if(q){if(g)throw new Error(Va(6));q=!1,_(),c.delete(W),u=null}}}function A($){if(!pC($))throw new Error(Va(7));if(typeof $.type=="undefined")throw new Error(Va(8));if(typeof $.type!="string")throw new Error(Va(17));if(g)throw new Error(Va(9));try{g=!0,o=i(o,$)}finally{g=!1}return(u=c).forEach(W=>{W()}),$}function N($){if(typeof $!="function")throw new Error(Va(10));i=$,A({type:Pv.REPLACE})}function z(){const $=E;return{subscribe(q){if(typeof q!="object"||q===null)throw new Error(Va(11));function W(){const Z=q;Z.next&&Z.next(S())}return W(),{unsubscribe:$(W)}},[eE](){return this}}}return A({type:Pv.INIT}),{dispatch:A,subscribe:E,getState:S,replaceReducer:N,[eE]:z}}function b7(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Pv.INIT})=="undefined")throw new Error(Va(12));if(typeof n(void 0,{type:Pv.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Va(13))})}function NP(e){const t=Object.keys(e),n={};for(let u=0;u<t.length;u++){const c=t[u];typeof e[c]=="function"&&(n[c]=e[c])}const i=Object.keys(n);let o;try{b7(n)}catch(u){o=u}return function(c={},a){if(o)throw o;let g=!1;const _={};for(let S=0;S<i.length;S++){const E=i[S],A=n[E],N=c[E],z=A(N,a);if(typeof z=="undefined")throw a&&a.type,new Error(Va(14));_[E]=z,g=g||z!==N}return g=g||i.length!==Object.keys(c).length,g?_:c}}function Rv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function v7(...e){return t=>(n,i)=>{const o=t(n,i);let u=()=>{throw new Error(Va(15))};const c={getState:o.getState,dispatch:(g,..._)=>u(g,..._)},a=e.map(g=>g(c));return u=Rv(...a)(o.dispatch),Ee(te({},o),{dispatch:u})}}function w7(e){return pC(e)&&"type"in e&&typeof e.type=="string"}var AP=Symbol.for("immer-nothing"),tE=Symbol.for("immer-draftable"),Bl=Symbol.for("immer-state");function mu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var uy=Object.getPrototypeOf;function wm(e){return!!e&&!!e[Bl]}function Th(e){var t;return e?PP(e)||Array.isArray(e)||!!e[tE]||!!((t=e.constructor)!=null&&t[tE])||K0(e)||b1(e):!1}var S7=Object.prototype.constructor.toString();function PP(e){if(!e||typeof e!="object")return!1;const t=uy(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===S7}function Dv(e,t){_1(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function _1(e){const t=e[Bl];return t?t.type_:Array.isArray(e)?1:K0(e)?2:b1(e)?3:0}function jS(e,t){return _1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function RP(e,t,n){const i=_1(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function j7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function K0(e){return e instanceof Map}function b1(e){return e instanceof Set}function nm(e){return e.copy_||e.base_}function CS(e,t){if(K0(e))return new Map(e);if(b1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=PP(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[Bl];let o=Reflect.ownKeys(i);for(let u=0;u<o.length;u++){const c=o[u],a=i[c];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(i[c]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[c]})}return Object.create(uy(e),i)}else{const i=uy(e);if(i!==null&&n)return te({},e);const o=Object.create(i);return Object.assign(o,e)}}function gC(e,t=!1){return v1(e)||wm(e)||!Th(e)||(_1(e)>1&&Object.defineProperties(e,{set:{value:db},add:{value:db},clear:{value:db},delete:{value:db}}),Object.freeze(e),t&&Object.values(e).forEach(n=>gC(n,!0))),e}function db(){mu(2)}function v1(e){return Object.isFrozen(e)}var C7={};function Sm(e){const t=C7[e];return t||mu(0,e),t}var k0;function DP(){return k0}function T7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nE(e,t){t&&(Sm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function TS(e){kS(e),e.drafts_.forEach(k7),e.drafts_=null}function kS(e){e===k0&&(k0=e.parent_)}function iE(e){return k0=T7(k0,e)}function k7(e){const t=e[Bl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function sE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Bl].modified_&&(TS(t),mu(4)),Th(e)&&(e=zv(t,e),t.parent_||Iv(t,e)),t.patches_&&Sm("Patches").generateReplacementPatches_(n[Bl].base_,e,t.patches_,t.inversePatches_)):e=zv(t,n,[]),TS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==AP?e:void 0}function zv(e,t,n){if(v1(t))return t;const i=t[Bl];if(!i)return Dv(t,(o,u)=>rE(e,i,t,o,u,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return Iv(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let u=o,c=!1;i.type_===3&&(u=new Set(o),o.clear(),c=!0),Dv(u,(a,g)=>rE(e,i,o,a,g,n,c)),Iv(e,o,!1),n&&e.patches_&&Sm("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function rE(e,t,n,i,o,u,c){if(wm(o)){const a=u&&t&&t.type_!==3&&!jS(t.assigned_,i)?u.concat(i):void 0,g=zv(e,o,a);if(RP(n,i,g),wm(g))e.canAutoFreeze_=!1;else return}else c&&n.add(o);if(Th(o)&&!v1(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;zv(e,o),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&(K0(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&Iv(e,o)}}function Iv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&gC(t,n)}function E7(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:DP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=i,u=yC;n&&(o=[i],u=E0);const{revoke:c,proxy:a}=Proxy.revocable(o,u);return i.draft_=a,i.revoke_=c,a}var yC={get(e,t){if(t===Bl)return e;const n=nm(e);if(!jS(n,t))return M7(e,n,t);const i=n[t];return e.finalized_||!Th(i)?i:i===Ww(e.base_,t)?(Zw(e),e.copy_[t]=MS(i,e)):i},has(e,t){return t in nm(e)},ownKeys(e){return Reflect.ownKeys(nm(e))},set(e,t,n){const i=zP(nm(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const o=Ww(nm(e),t),u=o==null?void 0:o[Bl];if(u&&u.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(j7(n,o)&&(n!==void 0||jS(e.base_,t)))return!0;Zw(e),ES(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ww(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Zw(e),ES(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=nm(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){mu(11)},getPrototypeOf(e){return uy(e.base_)},setPrototypeOf(){mu(12)}},E0={};Dv(yC,(e,t)=>{E0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});E0.deleteProperty=function(e,t){return E0.set.call(this,e,t,void 0)};E0.set=function(e,t,n){return yC.set.call(this,e[0],t,n,e[0])};function Ww(e,t){const n=e[Bl];return(n?nm(n):e)[t]}function M7(e,t,n){var o;const i=zP(t,n);return i?"value"in i?i.value:(o=i.get)==null?void 0:o.call(e.draft_):void 0}function zP(e,t){if(!(t in e))return;let n=uy(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=uy(n)}}function ES(e){e.modified_||(e.modified_=!0,e.parent_&&ES(e.parent_))}function Zw(e){e.copy_||(e.copy_=CS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var N7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const u=n;n=t;const c=this;return function(g=u,..._){return c.produce(g,S=>n.call(this,S,..._))}}typeof n!="function"&&mu(6),i!==void 0&&typeof i!="function"&&mu(7);let o;if(Th(t)){const u=iE(this),c=MS(t,void 0);let a=!0;try{o=n(c),a=!1}finally{a?TS(u):kS(u)}return nE(u,i),sE(o,u)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===AP&&(o=void 0),this.autoFreeze_&&gC(o,!0),i){const u=[],c=[];Sm("Patches").generateReplacementPatches_(t,o,u,c),i(u,c)}return o}else mu(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...a)=>this.produceWithPatches(c,g=>t(g,...a));let i,o;return[this.produce(t,n,(c,a)=>{i=c,o=a}),i,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Th(e)||mu(8),wm(e)&&(e=A7(e));const t=iE(this),n=MS(e,void 0);return n[Bl].isManual_=!0,kS(t),n}finishDraft(e,t){const n=e&&e[Bl];(!n||!n.isManual_)&&mu(9);const{scope_:i}=n;return nE(i,t),sE(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const i=Sm("Patches").applyPatches_;return wm(e)?i(e,t):this.produce(e,o=>i(o,t))}};function MS(e,t){const n=K0(e)?Sm("MapSet").proxyMap_(e,t):b1(e)?Sm("MapSet").proxySet_(e,t):E7(e,t);return(t?t.scope_:DP()).drafts_.push(n),n}function A7(e){return wm(e)||mu(10,e),IP(e)}function IP(e){if(!Th(e)||v1(e))return e;const t=e[Bl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=CS(e,t.scope_.immer_.useStrictShallowCopy_)}else n=CS(e,!0);return Dv(n,(i,o)=>{RP(n,i,IP(o))}),t&&(t.finalized_=!1),n}var P7=new N7,OP=P7.produce;function FP(e){return({dispatch:n,getState:i})=>o=>u=>typeof u=="function"?u(n,i,e):o(u)}var R7=FP(),D7=FP,z7=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Rv:Rv.apply(null,arguments)},I7=e=>e&&typeof e.match=="function";function c0(e,t){function n(...i){if(t){let o=t(...i);if(!o)throw new Error(vh(0));return te(te({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:i[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=i=>w7(i)&&i.type===e,n}var LP=class Jx extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Jx.prototype)}static get[Symbol.species](){return Jx}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Jx(...t[0].concat(this)):new Jx(...t.concat(this))}};function aE(e){return Th(e)?OP(e,()=>{}):e}function hb(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function O7(e){return typeof e=="boolean"}var F7=()=>function(t){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:o=!0,actionCreatorCheck:u=!0}=t!=null?t:{};let c=new LP;return n&&(O7(n)?c.push(R7):c.push(D7(n.extraArgument))),c},L7="RTK_autoBatch",oE=e=>t=>{setTimeout(t,e)},B7=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let o=!0,u=!1,c=!1;const a=new Set,g=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:oE(10):e.type==="callback"?e.queueNotification:oE(e.timeout),_=()=>{c=!1,u&&(u=!1,a.forEach(S=>S()))};return Object.assign({},i,{subscribe(S){const E=()=>o&&S(),A=i.subscribe(E);return a.add(S),()=>{A(),a.delete(S)}},dispatch(S){var E;try{return o=!((E=S==null?void 0:S.meta)!=null&&E[L7]),u=!o,u&&(c||(c=!0,g(_))),i.dispatch(S)}finally{o=!0}}})},V7=e=>function(n){const{autoBatch:i=!0}=n!=null?n:{};let o=new LP(e);return i&&o.push(B7(typeof i=="object"?i:void 0)),o};function U7(e){const t=F7(),{reducer:n=void 0,middleware:i,devTools:o=!0,preloadedState:u=void 0,enhancers:c=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(pC(n))a=NP(n);else throw new Error(vh(1));let g;typeof i=="function"?g=i(t):g=t();let _=Rv;o&&(_=z7(te({trace:!1},typeof o=="object"&&o)));const S=v7(...g),E=V7(S);let A=typeof c=="function"?c(E):E();const N=_(...A);return mC(a,u,N)}function BP(e){const t={},n=[];let i;const o={addCase(u,c){const a=typeof u=="string"?u:u.type;if(!a)throw new Error(vh(28));if(a in t)throw new Error(vh(29));return t[a]=c,o},addAsyncThunk(u,c){return c.pending&&(t[u.pending.type]=c.pending),c.rejected&&(t[u.rejected.type]=c.rejected),c.fulfilled&&(t[u.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:u.settled,reducer:c.settled}),o},addMatcher(u,c){return n.push({matcher:u,reducer:c}),o},addDefaultCase(u){return i=u,o}};return e(o),[t,n,i]}function $7(e){return typeof e=="function"}function H7(e,t){let[n,i,o]=BP(t),u;if($7(e))u=()=>aE(e());else{const a=aE(e);u=()=>a}function c(a=u(),g){let _=[n[g.type],...i.filter(({matcher:S})=>S(g)).map(({reducer:S})=>S)];return _.filter(S=>!!S).length===0&&(_=[o]),_.reduce((S,E)=>{if(E)if(wm(S)){const N=E(S,g);return N===void 0?S:N}else{if(Th(S))return OP(S,A=>E(A,g));{const A=E(S,g);if(A===void 0){if(S===null)return S;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return S},a)}return c.getInitialState=u,c}var q7=(e,t)=>I7(e)?e.match(t):e(t);function G7(...e){return t=>e.some(n=>q7(n,t))}var W7="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Z7=(e=21)=>{let t="",n=e;for(;n--;)t+=W7[Math.random()*64|0];return t},Y7=["name","message","stack","code"],Yw=class{constructor(e,t){wn(this,"_type");this.payload=e,this.meta=t}},lE=class{constructor(e,t){wn(this,"_type");this.payload=e,this.meta=t}},X7=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of Y7)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},cE="External signal was aborted",Cy=(()=>{function e(t,n,i){const o=c0(t+"/fulfilled",(g,_,S,E)=>({payload:g,meta:Ee(te({},E||{}),{arg:S,requestId:_,requestStatus:"fulfilled"})})),u=c0(t+"/pending",(g,_,S)=>({payload:void 0,meta:Ee(te({},S||{}),{arg:_,requestId:g,requestStatus:"pending"})})),c=c0(t+"/rejected",(g,_,S,E,A)=>({payload:E,error:(i&&i.serializeError||X7)(g||"Rejected"),meta:Ee(te({},A||{}),{arg:S,requestId:_,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(g==null?void 0:g.name)==="AbortError",condition:(g==null?void 0:g.name)==="ConditionError"})}));function a(g,{signal:_}={}){return(S,E,A)=>{const N=i!=null&&i.idGenerator?i.idGenerator(g):Z7(),z=new AbortController;let B,$;function q(Q){$=Q,z.abort()}_&&(_.aborted?q(cE):_.addEventListener("abort",()=>q(cE),{once:!0}));const W=function(){return Gt(this,null,function*(){var K,le;let Q;try{let ge=(K=i==null?void 0:i.condition)==null?void 0:K.call(i,g,{getState:E,extra:A});if(Q7(ge)&&(ge=yield ge),ge===!1||z.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const he=new Promise((pe,Ie)=>{B=()=>{Ie({name:"AbortError",message:$||"Aborted"})},z.signal.addEventListener("abort",B)});S(u(N,g,(le=i==null?void 0:i.getPendingMeta)==null?void 0:le.call(i,{requestId:N,arg:g},{getState:E,extra:A}))),Q=yield Promise.race([he,Promise.resolve(n(g,{dispatch:S,getState:E,extra:A,requestId:N,signal:z.signal,abort:q,rejectWithValue:(pe,Ie)=>new Yw(pe,Ie),fulfillWithValue:(pe,Ie)=>new lE(pe,Ie)})).then(pe=>{if(pe instanceof Yw)throw pe;return pe instanceof lE?o(pe.payload,N,g,pe.meta):o(pe,N,g)})])}catch(ge){Q=ge instanceof Yw?c(null,N,g,ge.payload,ge.meta):c(ge,N,g)}finally{B&&z.signal.removeEventListener("abort",B)}return i&&!i.dispatchConditionRejection&&c.match(Q)&&Q.meta.condition||S(Q),Q})}();return Object.assign(W,{abort:q,requestId:N,arg:g,unwrap(){return W.then(K7)}})}}return Object.assign(a,{pending:u,rejected:c,fulfilled:o,settled:G7(c,o),typePrefix:t})}return e.withTypes=()=>e,e})();function K7(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Q7(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var J7=Symbol.for("rtk-slice-createasyncthunk");function e9(e,t){return`${e}/${t}`}function t9({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[J7];return function(o){const{name:u,reducerPath:c=u}=o;if(!u)throw new Error(vh(11));const a=(typeof o.reducers=="function"?o.reducers(i9()):o.reducers)||{},g=Object.keys(a),_={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},S={addCase(Z,K){const le=typeof Z=="string"?Z:Z.type;if(!le)throw new Error(vh(12));if(le in _.sliceCaseReducersByType)throw new Error(vh(13));return _.sliceCaseReducersByType[le]=K,S},addMatcher(Z,K){return _.sliceMatchers.push({matcher:Z,reducer:K}),S},exposeAction(Z,K){return _.actionCreators[Z]=K,S},exposeCaseReducer(Z,K){return _.sliceCaseReducersByName[Z]=K,S}};g.forEach(Z=>{const K=a[Z],le={reducerName:Z,type:e9(u,Z),createNotation:typeof o.reducers=="function"};r9(K)?o9(le,K,S,t):s9(le,K,S)});function E(){const[Z={},K=[],le=void 0]=typeof o.extraReducers=="function"?BP(o.extraReducers):[o.extraReducers],ge=te(te({},Z),_.sliceCaseReducersByType);return H7(o.initialState,he=>{for(let pe in ge)he.addCase(pe,ge[pe]);for(let pe of _.sliceMatchers)he.addMatcher(pe.matcher,pe.reducer);for(let pe of K)he.addMatcher(pe.matcher,pe.reducer);le&&he.addDefaultCase(le)})}const A=Z=>Z,N=new Map,z=new WeakMap;let B;function $(Z,K){return B||(B=E()),B(Z,K)}function q(){return B||(B=E()),B.getInitialState()}function W(Z,K=!1){function le(he){let pe=he[Z];return typeof pe=="undefined"&&K&&(pe=hb(z,le,q)),pe}function ge(he=A){const pe=hb(N,K,()=>new WeakMap);return hb(pe,he,()=>{var He;const Ie={};for(const[Ye,rt]of Object.entries((He=o.selectors)!=null?He:{}))Ie[Ye]=n9(rt,he,()=>hb(z,he,q),K);return Ie})}return{reducerPath:Z,getSelectors:ge,get selectors(){return ge(le)},selectSlice:le}}const Q=Ee(te({name:u,reducer:$,actions:_.actionCreators,caseReducers:_.sliceCaseReducersByName,getInitialState:q},W(c)),{injectInto(Z,ge={}){var he=ge,{reducerPath:K}=he,le=Jt(he,["reducerPath"]);const pe=K!=null?K:c;return Z.inject({reducerPath:pe,reducer:$},le),te(te({},Q),W(pe,!0))}});return Q}}function n9(e,t,n,i){function o(u,...c){let a=t(u);return typeof a=="undefined"&&i&&(a=n()),e(a,...c)}return o.unwrapped=e,o}var Ty=t9();function i9(){function e(t,n){return te({_reducerDefinitionType:"asyncThunk",payloadCreator:t},n)}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function s9({type:e,reducerName:t,createNotation:n},i,o){let u,c;if("reducer"in i){if(n&&!a9(i))throw new Error(vh(17));u=i.reducer,c=i.prepare}else u=i;o.addCase(e,u).exposeCaseReducer(t,u).exposeAction(t,c?c0(e,c):c0(e))}function r9(e){return e._reducerDefinitionType==="asyncThunk"}function a9(e){return e._reducerDefinitionType==="reducerWithPrepare"}function o9({type:e,reducerName:t},n,i,o){if(!o)throw new Error(vh(18));const{payloadCreator:u,fulfilled:c,pending:a,rejected:g,settled:_,options:S}=n,E=o(e,u,S);i.exposeAction(t,E),c&&i.addCase(E.fulfilled,c),a&&i.addCase(E.pending,a),g&&i.addCase(E.rejected,g),_&&i.addMatcher(E.settled,_),i.exposeCaseReducer(t,{fulfilled:c||fb,pending:a||fb,rejected:g||fb,settled:_||fb})}function fb(){}function vh(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function VP(e,t){return function(){return e.apply(t,arguments)}}const{toString:l9}=Object.prototype,{getPrototypeOf:xC}=Object,{iterator:w1,toStringTag:UP}=Symbol,S1=(e=>t=>{const n=l9.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Su=e=>(e=e.toLowerCase(),t=>S1(t)===e),j1=e=>t=>typeof t===e,{isArray:ky}=Array,M0=j1("undefined");function Q0(e){return e!==null&&!M0(e)&&e.constructor!==null&&!M0(e.constructor)&&hl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const $P=Su("ArrayBuffer");function c9(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&$P(e.buffer),t}const u9=j1("string"),hl=j1("function"),HP=j1("number"),J0=e=>e!==null&&typeof e=="object",d9=e=>e===!0||e===!1,Kb=e=>{if(S1(e)!=="object")return!1;const t=xC(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(UP in e)&&!(w1 in e)},h9=e=>{if(!J0(e)||Q0(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},f9=Su("Date"),p9=Su("File"),m9=Su("Blob"),g9=Su("FileList"),y9=e=>J0(e)&&hl(e.pipe),x9=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||hl(e.append)&&((t=S1(e))==="formdata"||t==="object"&&hl(e.toString)&&e.toString()==="[object FormData]"))},_9=Su("URLSearchParams"),[b9,v9,w9,S9]=["ReadableStream","Request","Response","Headers"].map(Su),j9=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function e_(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e=="undefined")return;let i,o;if(typeof e!="object"&&(e=[e]),ky(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{if(Q0(e))return;const u=n?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;let a;for(i=0;i<c;i++)a=u[i],t.call(null,e[a],a,e)}}function qP(e,t){if(Q0(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const om=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,GP=e=>!M0(e)&&e!==om;function NS(){const{caseless:e}=GP(this)&&this||{},t={},n=(i,o)=>{const u=e&&qP(t,o)||o;Kb(t[u])&&Kb(i)?t[u]=NS(t[u],i):Kb(i)?t[u]=NS({},i):ky(i)?t[u]=i.slice():t[u]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&e_(arguments[i],n);return t}const C9=(e,t,n,{allOwnKeys:i}={})=>(e_(t,(o,u)=>{n&&hl(o)?e[u]=VP(o,n):e[u]=o},{allOwnKeys:i}),e),T9=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),k9=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},E9=(e,t,n,i)=>{let o,u,c;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),u=o.length;u-- >0;)c=o[u],(!i||i(c,e,t))&&!a[c]&&(t[c]=e[c],a[c]=!0);e=n!==!1&&xC(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},M9=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},N9=e=>{if(!e)return null;if(ky(e))return e;let t=e.length;if(!HP(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},A9=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&xC(Uint8Array)),P9=(e,t)=>{const i=(e&&e[w1]).call(e);let o;for(;(o=i.next())&&!o.done;){const u=o.value;t.call(e,u[0],u[1])}},R9=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},D9=Su("HTMLFormElement"),z9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),uE=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),I9=Su("RegExp"),WP=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};e_(n,(o,u)=>{let c;(c=t(o,u,e))!==!1&&(i[u]=c||o)}),Object.defineProperties(e,i)},O9=e=>{WP(e,(t,n)=>{if(hl(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(hl(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},F9=(e,t)=>{const n={},i=o=>{o.forEach(u=>{n[u]=!0})};return ky(e)?i(e):i(String(e).split(t)),n},L9=()=>{},B9=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function V9(e){return!!(e&&hl(e.append)&&e[UP]==="FormData"&&e[w1])}const U9=e=>{const t=new Array(10),n=(i,o)=>{if(J0(i)){if(t.indexOf(i)>=0)return;if(Q0(i))return i;if(!("toJSON"in i)){t[o]=i;const u=ky(i)?[]:{};return e_(i,(c,a)=>{const g=n(c,o+1);!M0(g)&&(u[a]=g)}),t[o]=void 0,u}}return i};return n(e,0)},$9=Su("AsyncFunction"),H9=e=>e&&(J0(e)||hl(e))&&hl(e.then)&&hl(e.catch),ZP=((e,t)=>e?setImmediate:t?((n,i)=>(om.addEventListener("message",({source:o,data:u})=>{o===om&&u===n&&i.length&&i.shift()()},!1),o=>{i.push(o),om.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",hl(om.postMessage)),q9=typeof queueMicrotask!="undefined"?queueMicrotask.bind(om):typeof process!="undefined"&&process.nextTick||ZP,G9=e=>e!=null&&hl(e[w1]),Vt={isArray:ky,isArrayBuffer:$P,isBuffer:Q0,isFormData:x9,isArrayBufferView:c9,isString:u9,isNumber:HP,isBoolean:d9,isObject:J0,isPlainObject:Kb,isEmptyObject:h9,isReadableStream:b9,isRequest:v9,isResponse:w9,isHeaders:S9,isUndefined:M0,isDate:f9,isFile:p9,isBlob:m9,isRegExp:I9,isFunction:hl,isStream:y9,isURLSearchParams:_9,isTypedArray:A9,isFileList:g9,forEach:e_,merge:NS,extend:C9,trim:j9,stripBOM:T9,inherits:k9,toFlatObject:E9,kindOf:S1,kindOfTest:Su,endsWith:M9,toArray:N9,forEachEntry:P9,matchAll:R9,isHTMLForm:D9,hasOwnProperty:uE,hasOwnProp:uE,reduceDescriptors:WP,freezeMethods:O9,toObjectSet:F9,toCamelCase:z9,noop:L9,toFiniteNumber:B9,findKey:qP,global:om,isContextDefined:GP,isSpecCompliantForm:V9,toJSONObject:U9,isAsyncFn:$9,isThenable:H9,setImmediate:ZP,asap:q9,isIterable:G9};function ji(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}Vt.inherits(ji,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Vt.toJSONObject(this.config),code:this.code,status:this.status}}});const YP=ji.prototype,XP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{XP[e]={value:e}});Object.defineProperties(ji,XP);Object.defineProperty(YP,"isAxiosError",{value:!0});ji.from=(e,t,n,i,o,u)=>{const c=Object.create(YP);return Vt.toFlatObject(e,c,function(g){return g!==Error.prototype},a=>a!=="isAxiosError"),ji.call(c,e.message,t,n,i,o),c.cause=e,c.name=e.name,u&&Object.assign(c,u),c};const W9=null;function AS(e){return Vt.isPlainObject(e)||Vt.isArray(e)}function KP(e){return Vt.endsWith(e,"[]")?e.slice(0,-2):e}function dE(e,t,n){return e?e.concat(t).map(function(o,u){return o=KP(o),!n&&u?"["+o+"]":o}).join(n?".":""):t}function Z9(e){return Vt.isArray(e)&&!e.some(AS)}const Y9=Vt.toFlatObject(Vt,{},null,function(t){return/^is[A-Z]/.test(t)});function C1(e,t,n){if(!Vt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Vt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,$){return!Vt.isUndefined($[B])});const i=n.metaTokens,o=n.visitor||S,u=n.dots,c=n.indexes,g=(n.Blob||typeof Blob!="undefined"&&Blob)&&Vt.isSpecCompliantForm(t);if(!Vt.isFunction(o))throw new TypeError("visitor must be a function");function _(z){if(z===null)return"";if(Vt.isDate(z))return z.toISOString();if(Vt.isBoolean(z))return z.toString();if(!g&&Vt.isBlob(z))throw new ji("Blob is not supported. Use a Buffer instead.");return Vt.isArrayBuffer(z)||Vt.isTypedArray(z)?g&&typeof Blob=="function"?new Blob([z]):Buffer.from(z):z}function S(z,B,$){let q=z;if(z&&!$&&typeof z=="object"){if(Vt.endsWith(B,"{}"))B=i?B:B.slice(0,-2),z=JSON.stringify(z);else if(Vt.isArray(z)&&Z9(z)||(Vt.isFileList(z)||Vt.endsWith(B,"[]"))&&(q=Vt.toArray(z)))return B=KP(B),q.forEach(function(Q,Z){!(Vt.isUndefined(Q)||Q===null)&&t.append(c===!0?dE([B],Z,u):c===null?B:B+"[]",_(Q))}),!1}return AS(z)?!0:(t.append(dE($,B,u),_(z)),!1)}const E=[],A=Object.assign(Y9,{defaultVisitor:S,convertValue:_,isVisitable:AS});function N(z,B){if(!Vt.isUndefined(z)){if(E.indexOf(z)!==-1)throw Error("Circular reference detected in "+B.join("."));E.push(z),Vt.forEach(z,function(q,W){(!(Vt.isUndefined(q)||q===null)&&o.call(t,q,Vt.isString(W)?W.trim():W,B,A))===!0&&N(q,B?B.concat(W):[W])}),E.pop()}}if(!Vt.isObject(e))throw new TypeError("data must be an object");return N(e),t}function hE(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function _C(e,t){this._pairs=[],e&&C1(e,this,t)}const QP=_C.prototype;QP.append=function(t,n){this._pairs.push([t,n])};QP.toString=function(t){const n=t?function(i){return t.call(this,i,hE)}:hE;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function X9(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function JP(e,t,n){if(!t)return e;const i=n&&n.encode||X9;Vt.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let u;if(o?u=o(t,n):u=Vt.isURLSearchParams(t)?t.toString():new _C(t,n).toString(i),u){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class fE{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Vt.forEach(this.handlers,function(i){i!==null&&t(i)})}}const e5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},K9=typeof URLSearchParams!="undefined"?URLSearchParams:_C,Q9=typeof FormData!="undefined"?FormData:null,J9=typeof Blob!="undefined"?Blob:null,eV={isBrowser:!0,classes:{URLSearchParams:K9,FormData:Q9,Blob:J9},protocols:["http","https","file","blob","url","data"]},bC=typeof window!="undefined"&&typeof document!="undefined",PS=typeof navigator=="object"&&navigator||void 0,tV=bC&&(!PS||["ReactNative","NativeScript","NS"].indexOf(PS.product)<0),nV=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iV=bC&&window.location.href||"http://localhost",sV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bC,hasStandardBrowserEnv:tV,hasStandardBrowserWebWorkerEnv:nV,navigator:PS,origin:iV},Symbol.toStringTag,{value:"Module"})),go=te(te({},sV),eV);function rV(e,t){return C1(e,new go.classes.URLSearchParams,te({visitor:function(n,i,o,u){return go.isNode&&Vt.isBuffer(n)?(this.append(i,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function aV(e){return Vt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function oV(e){const t={},n=Object.keys(e);let i;const o=n.length;let u;for(i=0;i<o;i++)u=n[i],t[u]=e[u];return t}function t5(e){function t(n,i,o,u){let c=n[u++];if(c==="__proto__")return!0;const a=Number.isFinite(+c),g=u>=n.length;return c=!c&&Vt.isArray(o)?o.length:c,g?(Vt.hasOwnProp(o,c)?o[c]=[o[c],i]:o[c]=i,!a):((!o[c]||!Vt.isObject(o[c]))&&(o[c]=[]),t(n,i,o[c],u)&&Vt.isArray(o[c])&&(o[c]=oV(o[c])),!a)}if(Vt.isFormData(e)&&Vt.isFunction(e.entries)){const n={};return Vt.forEachEntry(e,(i,o)=>{t(aV(i),o,n,0)}),n}return null}function lV(e,t,n){if(Vt.isString(e))try{return(t||JSON.parse)(e),Vt.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const t_={transitional:e5,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,u=Vt.isObject(t);if(u&&Vt.isHTMLForm(t)&&(t=new FormData(t)),Vt.isFormData(t))return o?JSON.stringify(t5(t)):t;if(Vt.isArrayBuffer(t)||Vt.isBuffer(t)||Vt.isStream(t)||Vt.isFile(t)||Vt.isBlob(t)||Vt.isReadableStream(t))return t;if(Vt.isArrayBufferView(t))return t.buffer;if(Vt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(u){if(i.indexOf("application/x-www-form-urlencoded")>-1)return rV(t,this.formSerializer).toString();if((a=Vt.isFileList(t))||i.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return C1(a?{"files[]":t}:t,g&&new g,this.formSerializer)}}return u||o?(n.setContentType("application/json",!1),lV(t)):t}],transformResponse:[function(t){const n=this.transitional||t_.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Vt.isResponse(t)||Vt.isReadableStream(t))return t;if(t&&Vt.isString(t)&&(i&&!this.responseType||o)){const c=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(c)throw a.name==="SyntaxError"?ji.from(a,ji.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:go.classes.FormData,Blob:go.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Vt.forEach(["delete","get","head","post","put","patch"],e=>{t_.headers[e]={}});const cV=Vt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uV=e=>{const t={};let n,i,o;return e&&e.split(`
`).forEach(function(c){o=c.indexOf(":"),n=c.substring(0,o).trim().toLowerCase(),i=c.substring(o+1).trim(),!(!n||t[n]&&cV[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},pE=Symbol("internals");function Ox(e){return e&&String(e).trim().toLowerCase()}function Qb(e){return e===!1||e==null?e:Vt.isArray(e)?e.map(Qb):String(e)}function dV(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const hV=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Xw(e,t,n,i,o){if(Vt.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!Vt.isString(t)){if(Vt.isString(i))return t.indexOf(i)!==-1;if(Vt.isRegExp(i))return i.test(t)}}function fV(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function pV(e,t){const n=Vt.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,u,c){return this[i].call(this,t,o,u,c)},configurable:!0})})}let fl=class{constructor(t){t&&this.set(t)}set(t,n,i){const o=this;function u(a,g,_){const S=Ox(g);if(!S)throw new Error("header name must be a non-empty string");const E=Vt.findKey(o,S);(!E||o[E]===void 0||_===!0||_===void 0&&o[E]!==!1)&&(o[E||g]=Qb(a))}const c=(a,g)=>Vt.forEach(a,(_,S)=>u(_,S,g));if(Vt.isPlainObject(t)||t instanceof this.constructor)c(t,n);else if(Vt.isString(t)&&(t=t.trim())&&!hV(t))c(uV(t),n);else if(Vt.isObject(t)&&Vt.isIterable(t)){let a={},g,_;for(const S of t){if(!Vt.isArray(S))throw TypeError("Object iterator must return a key-value pair");a[_=S[0]]=(g=a[_])?Vt.isArray(g)?[...g,S[1]]:[g,S[1]]:S[1]}c(a,n)}else t!=null&&u(n,t,i);return this}get(t,n){if(t=Ox(t),t){const i=Vt.findKey(this,t);if(i){const o=this[i];if(!n)return o;if(n===!0)return dV(o);if(Vt.isFunction(n))return n.call(this,o,i);if(Vt.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ox(t),t){const i=Vt.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Xw(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let o=!1;function u(c){if(c=Ox(c),c){const a=Vt.findKey(i,c);a&&(!n||Xw(i,i[a],a,n))&&(delete i[a],o=!0)}}return Vt.isArray(t)?t.forEach(u):u(t),o}clear(t){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const u=n[i];(!t||Xw(this,this[u],u,t,!0))&&(delete this[u],o=!0)}return o}normalize(t){const n=this,i={};return Vt.forEach(this,(o,u)=>{const c=Vt.findKey(i,u);if(c){n[c]=Qb(o),delete n[u];return}const a=t?fV(u):String(u).trim();a!==u&&delete n[u],n[a]=Qb(o),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Vt.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&Vt.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[pE]=this[pE]={accessors:{}}).accessors,o=this.prototype;function u(c){const a=Ox(c);i[a]||(pV(o,c),i[a]=!0)}return Vt.isArray(t)?t.forEach(u):u(t),this}};fl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Vt.reduceDescriptors(fl.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});Vt.freezeMethods(fl);function Kw(e,t){const n=this||t_,i=t||n,o=fl.from(i.headers);let u=i.data;return Vt.forEach(e,function(a){u=a.call(n,u,o.normalize(),t?t.status:void 0)}),o.normalize(),u}function n5(e){return!!(e&&e.__CANCEL__)}function Ey(e,t,n){ji.call(this,e==null?"canceled":e,ji.ERR_CANCELED,t,n),this.name="CanceledError"}Vt.inherits(Ey,ji,{__CANCEL__:!0});function i5(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new ji("Request failed with status code "+n.status,[ji.ERR_BAD_REQUEST,ji.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function mV(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function gV(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o=0,u=0,c;return t=t!==void 0?t:1e3,function(g){const _=Date.now(),S=i[u];c||(c=_),n[o]=g,i[o]=_;let E=u,A=0;for(;E!==o;)A+=n[E++],E=E%e;if(o=(o+1)%e,o===u&&(u=(u+1)%e),_-c<t)return;const N=S&&_-S;return N?Math.round(A*1e3/N):void 0}}function yV(e,t){let n=0,i=1e3/t,o,u;const c=(_,S=Date.now())=>{n=S,o=null,u&&(clearTimeout(u),u=null),e(..._)};return[(..._)=>{const S=Date.now(),E=S-n;E>=i?c(_,S):(o=_,u||(u=setTimeout(()=>{u=null,c(o)},i-E)))},()=>o&&c(o)]}const Ov=(e,t,n=3)=>{let i=0;const o=gV(50,250);return yV(u=>{const c=u.loaded,a=u.lengthComputable?u.total:void 0,g=c-i,_=o(g),S=c<=a;i=c;const E={loaded:c,total:a,progress:a?c/a:void 0,bytes:g,rate:_||void 0,estimated:_&&a&&S?(a-c)/_:void 0,event:u,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(E)},n)},mE=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},gE=e=>(...t)=>Vt.asap(()=>e(...t)),xV=go.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,go.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(go.origin),go.navigator&&/(msie|trident)/i.test(go.navigator.userAgent)):()=>!0,_V=go.hasStandardBrowserEnv?{write(e,t,n,i,o,u){const c=[e+"="+encodeURIComponent(t)];Vt.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),Vt.isString(i)&&c.push("path="+i),Vt.isString(o)&&c.push("domain="+o),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bV(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vV(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function s5(e,t,n){let i=!bV(t);return e&&(i||n==!1)?vV(e,t):t}const yE=e=>e instanceof fl?te({},e):e;function jm(e,t){t=t||{};const n={};function i(_,S,E,A){return Vt.isPlainObject(_)&&Vt.isPlainObject(S)?Vt.merge.call({caseless:A},_,S):Vt.isPlainObject(S)?Vt.merge({},S):Vt.isArray(S)?S.slice():S}function o(_,S,E,A){if(Vt.isUndefined(S)){if(!Vt.isUndefined(_))return i(void 0,_,E,A)}else return i(_,S,E,A)}function u(_,S){if(!Vt.isUndefined(S))return i(void 0,S)}function c(_,S){if(Vt.isUndefined(S)){if(!Vt.isUndefined(_))return i(void 0,_)}else return i(void 0,S)}function a(_,S,E){if(E in t)return i(_,S);if(E in e)return i(void 0,_)}const g={url:u,method:u,data:u,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:a,headers:(_,S,E)=>o(yE(_),yE(S),E,!0)};return Vt.forEach(Object.keys(te(te({},e),t)),function(S){const E=g[S]||o,A=E(e[S],t[S],S);Vt.isUndefined(A)&&E!==a||(n[S]=A)}),n}const r5=e=>{const t=jm({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:u,headers:c,auth:a}=t;t.headers=c=fl.from(c),t.url=JP(s5(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&c.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let g;if(Vt.isFormData(n)){if(go.hasStandardBrowserEnv||go.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((g=c.getContentType())!==!1){const[_,...S]=g?g.split(";").map(E=>E.trim()).filter(Boolean):[];c.setContentType([_||"multipart/form-data",...S].join("; "))}}if(go.hasStandardBrowserEnv&&(i&&Vt.isFunction(i)&&(i=i(t)),i||i!==!1&&xV(t.url))){const _=o&&u&&_V.read(u);_&&c.set(o,_)}return t},wV=typeof XMLHttpRequest!="undefined",SV=wV&&function(e){return new Promise(function(n,i){const o=r5(e);let u=o.data;const c=fl.from(o.headers).normalize();let{responseType:a,onUploadProgress:g,onDownloadProgress:_}=o,S,E,A,N,z;function B(){N&&N(),z&&z(),o.cancelToken&&o.cancelToken.unsubscribe(S),o.signal&&o.signal.removeEventListener("abort",S)}let $=new XMLHttpRequest;$.open(o.method.toUpperCase(),o.url,!0),$.timeout=o.timeout;function q(){if(!$)return;const Q=fl.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),K={data:!a||a==="text"||a==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:Q,config:e,request:$};i5(function(ge){n(ge),B()},function(ge){i(ge),B()},K),$=null}"onloadend"in $?$.onloadend=q:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(q)},$.onabort=function(){$&&(i(new ji("Request aborted",ji.ECONNABORTED,e,$)),$=null)},$.onerror=function(){i(new ji("Network Error",ji.ERR_NETWORK,e,$)),$=null},$.ontimeout=function(){let Z=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const K=o.transitional||e5;o.timeoutErrorMessage&&(Z=o.timeoutErrorMessage),i(new ji(Z,K.clarifyTimeoutError?ji.ETIMEDOUT:ji.ECONNABORTED,e,$)),$=null},u===void 0&&c.setContentType(null),"setRequestHeader"in $&&Vt.forEach(c.toJSON(),function(Z,K){$.setRequestHeader(K,Z)}),Vt.isUndefined(o.withCredentials)||($.withCredentials=!!o.withCredentials),a&&a!=="json"&&($.responseType=o.responseType),_&&([A,z]=Ov(_,!0),$.addEventListener("progress",A)),g&&$.upload&&([E,N]=Ov(g),$.upload.addEventListener("progress",E),$.upload.addEventListener("loadend",N)),(o.cancelToken||o.signal)&&(S=Q=>{$&&(i(!Q||Q.type?new Ey(null,e,$):Q),$.abort(),$=null)},o.cancelToken&&o.cancelToken.subscribe(S),o.signal&&(o.signal.aborted?S():o.signal.addEventListener("abort",S)));const W=mV(o.url);if(W&&go.protocols.indexOf(W)===-1){i(new ji("Unsupported protocol "+W+":",ji.ERR_BAD_REQUEST,e));return}$.send(u||null)})},jV=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,o;const u=function(_){if(!o){o=!0,a();const S=_ instanceof Error?_:this.reason;i.abort(S instanceof ji?S:new Ey(S instanceof Error?S.message:S))}};let c=t&&setTimeout(()=>{c=null,u(new ji(`timeout ${t} of ms exceeded`,ji.ETIMEDOUT))},t);const a=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(u):_.removeEventListener("abort",u)}),e=null)};e.forEach(_=>_.addEventListener("abort",u));const{signal:g}=i;return g.unsubscribe=()=>Vt.asap(a),g}},CV=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,o;for(;i<n;)o=i+t,yield e.slice(i,o),i=o},TV=function(e,t){return Ex(this,null,function*(){try{for(var n=ww(kV(e)),i,o,u;i=!(o=yield new au(n.next())).done;i=!1){const c=o.value;yield*Mx(CV(c,t))}}catch(o){u=[o]}finally{try{i&&(o=n.return)&&(yield new au(o.call(n)))}finally{if(u)throw u[0]}}})},kV=function(e){return Ex(this,null,function*(){if(e[Symbol.asyncIterator]){yield*Mx(e);return}const t=e.getReader();try{for(;;){const{done:n,value:i}=yield new au(t.read());if(n)break;yield i}}finally{yield new au(t.cancel())}})},xE=(e,t,n,i)=>{const o=TV(e,t);let u=0,c,a=_=>{c||(c=!0,i&&i(_))};return new ReadableStream({pull(_){return Gt(this,null,function*(){try{const{done:S,value:E}=yield o.next();if(S){a(),_.close();return}let A=E.byteLength;if(n){let N=u+=A;n(N)}_.enqueue(new Uint8Array(E))}catch(S){throw a(S),S}})},cancel(_){return a(_),o.return()}},{highWaterMark:2})},T1=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",a5=T1&&typeof ReadableStream=="function",EV=T1&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):e=>Gt(null,null,function*(){return new Uint8Array(yield new Response(e).arrayBuffer())})),o5=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},MV=a5&&o5(()=>{let e=!1;const t=new Request(go.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),_E=64*1024,RS=a5&&o5(()=>Vt.isReadableStream(new Response("").body)),Fv={stream:RS&&(e=>e.body)};T1&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Fv[t]&&(Fv[t]=Vt.isFunction(e[t])?n=>n[t]():(n,i)=>{throw new ji(`Response type '${t}' is not supported`,ji.ERR_NOT_SUPPORT,i)})})})(new Response);const NV=e=>Gt(null,null,function*(){if(e==null)return 0;if(Vt.isBlob(e))return e.size;if(Vt.isSpecCompliantForm(e))return(yield new Request(go.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Vt.isArrayBufferView(e)||Vt.isArrayBuffer(e))return e.byteLength;if(Vt.isURLSearchParams(e)&&(e=e+""),Vt.isString(e))return(yield EV(e)).byteLength}),AV=(e,t)=>Gt(null,null,function*(){const n=Vt.toFiniteNumber(e.getContentLength());return n==null?NV(t):n}),PV=T1&&(e=>Gt(null,null,function*(){let{url:t,method:n,data:i,signal:o,cancelToken:u,timeout:c,onDownloadProgress:a,onUploadProgress:g,responseType:_,headers:S,withCredentials:E="same-origin",fetchOptions:A}=r5(e);_=_?(_+"").toLowerCase():"text";let N=jV([o,u&&u.toAbortSignal()],c),z;const B=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let $;try{if(g&&MV&&n!=="get"&&n!=="head"&&($=yield AV(S,i))!==0){let K=new Request(t,{method:"POST",body:i,duplex:"half"}),le;if(Vt.isFormData(i)&&(le=K.headers.get("content-type"))&&S.setContentType(le),K.body){const[ge,he]=mE($,Ov(gE(g)));i=xE(K.body,_E,ge,he)}}Vt.isString(E)||(E=E?"include":"omit");const q="credentials"in Request.prototype;z=new Request(t,Ee(te({},A),{signal:N,method:n.toUpperCase(),headers:S.normalize().toJSON(),body:i,duplex:"half",credentials:q?E:void 0}));let W=yield fetch(z,A);const Q=RS&&(_==="stream"||_==="response");if(RS&&(a||Q&&B)){const K={};["status","statusText","headers"].forEach(pe=>{K[pe]=W[pe]});const le=Vt.toFiniteNumber(W.headers.get("content-length")),[ge,he]=a&&mE(le,Ov(gE(a),!0))||[];W=new Response(xE(W.body,_E,ge,()=>{he&&he(),B&&B()}),K)}_=_||"text";let Z=yield Fv[Vt.findKey(Fv,_)||"text"](W,e);return!Q&&B&&B(),yield new Promise((K,le)=>{i5(K,le,{data:Z,headers:fl.from(W.headers),status:W.status,statusText:W.statusText,config:e,request:z})})}catch(q){throw B&&B(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new ji("Network Error",ji.ERR_NETWORK,e,z),{cause:q.cause||q}):ji.from(q,q&&q.code,e,z)}})),DS={http:W9,xhr:SV,fetch:PV};Vt.forEach(DS,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const bE=e=>`- ${e}`,RV=e=>Vt.isFunction(e)||e===null||e===!1,l5={getAdapter:e=>{e=Vt.isArray(e)?e:[e];const{length:t}=e;let n,i;const o={};for(let u=0;u<t;u++){n=e[u];let c;if(i=n,!RV(n)&&(i=DS[(c=String(n)).toLowerCase()],i===void 0))throw new ji(`Unknown adapter '${c}'`);if(i)break;o[c||"#"+u]=i}if(!i){const u=Object.entries(o).map(([a,g])=>`adapter ${a} `+(g===!1?"is not supported by the environment":"is not available in the build"));let c=t?u.length>1?`since :
`+u.map(bE).join(`
`):" "+bE(u[0]):"as no adapter specified";throw new ji("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:DS};function Qw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ey(null,e)}function vE(e){return Qw(e),e.headers=fl.from(e.headers),e.data=Kw.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),l5.getAdapter(e.adapter||t_.adapter)(e).then(function(i){return Qw(e),i.data=Kw.call(e,e.transformResponse,i),i.headers=fl.from(i.headers),i},function(i){return n5(i)||(Qw(e),i&&i.response&&(i.response.data=Kw.call(e,e.transformResponse,i.response),i.response.headers=fl.from(i.response.headers))),Promise.reject(i)})}const c5="1.11.0",k1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{k1[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const wE={};k1.transitional=function(t,n,i){function o(u,c){return"[Axios v"+c5+"] Transitional option '"+u+"'"+c+(i?". "+i:"")}return(u,c,a)=>{if(t===!1)throw new ji(o(c," has been removed"+(n?" in "+n:"")),ji.ERR_DEPRECATED);return n&&!wE[c]&&(wE[c]=!0,console.warn(o(c," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(u,c,a):!0}};k1.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function DV(e,t,n){if(typeof e!="object")throw new ji("options must be an object",ji.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const u=i[o],c=t[u];if(c){const a=e[u],g=a===void 0||c(a,u,e);if(g!==!0)throw new ji("option "+u+" must be "+g,ji.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ji("Unknown option "+u,ji.ERR_BAD_OPTION)}}const Jb={assertOptions:DV,validators:k1},od=Jb.validators;let pm=class{constructor(t){this.defaults=t||{},this.interceptors={request:new fE,response:new fE}}request(t,n){return Gt(this,null,function*(){try{return yield this._request(t,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const u=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?u&&!String(i.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+u):i.stack=u}catch(c){}}throw i}})}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=jm(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:u}=n;i!==void 0&&Jb.assertOptions(i,{silentJSONParsing:od.transitional(od.boolean),forcedJSONParsing:od.transitional(od.boolean),clarifyTimeoutError:od.transitional(od.boolean)},!1),o!=null&&(Vt.isFunction(o)?n.paramsSerializer={serialize:o}:Jb.assertOptions(o,{encode:od.function,serialize:od.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Jb.assertOptions(n,{baseUrl:od.spelling("baseURL"),withXsrfToken:od.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=u&&Vt.merge(u.common,u[n.method]);u&&Vt.forEach(["delete","get","head","post","put","patch","common"],z=>{delete u[z]}),n.headers=fl.concat(c,u);const a=[];let g=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(n)===!1||(g=g&&B.synchronous,a.unshift(B.fulfilled,B.rejected))});const _=[];this.interceptors.response.forEach(function(B){_.push(B.fulfilled,B.rejected)});let S,E=0,A;if(!g){const z=[vE.bind(this),void 0];for(z.unshift(...a),z.push(..._),A=z.length,S=Promise.resolve(n);E<A;)S=S.then(z[E++],z[E++]);return S}A=a.length;let N=n;for(E=0;E<A;){const z=a[E++],B=a[E++];try{N=z(N)}catch($){B.call(this,$);break}}try{S=vE.call(this,N)}catch(z){return Promise.reject(z)}for(E=0,A=_.length;E<A;)S=S.then(_[E++],_[E++]);return S}getUri(t){t=jm(this.defaults,t);const n=s5(t.baseURL,t.url,t.allowAbsoluteUrls);return JP(n,t.params,t.paramsSerializer)}};Vt.forEach(["delete","get","head","options"],function(t){pm.prototype[t]=function(n,i){return this.request(jm(i||{},{method:t,url:n,data:(i||{}).data}))}});Vt.forEach(["post","put","patch"],function(t){function n(i){return function(u,c,a){return this.request(jm(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:u,data:c}))}}pm.prototype[t]=n(),pm.prototype[t+"Form"]=n(!0)});let zV=class u5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(u){n=u});const i=this;this.promise.then(o=>{if(!i._listeners)return;let u=i._listeners.length;for(;u-- >0;)i._listeners[u](o);i._listeners=null}),this.promise.then=o=>{let u;const c=new Promise(a=>{i.subscribe(a),u=a}).then(o);return c.cancel=function(){i.unsubscribe(u)},c},t(function(u,c,a){i.reason||(i.reason=new Ey(u,c,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new u5(function(o){t=o}),cancel:t}}};function IV(e){return function(n){return e.apply(null,n)}}function OV(e){return Vt.isObject(e)&&e.isAxiosError===!0}const zS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zS).forEach(([e,t])=>{zS[t]=e});function d5(e){const t=new pm(e),n=VP(pm.prototype.request,t);return Vt.extend(n,pm.prototype,t,{allOwnKeys:!0}),Vt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return d5(jm(e,o))},n}const Os=d5(t_);Os.Axios=pm;Os.CanceledError=Ey;Os.CancelToken=zV;Os.isCancel=n5;Os.VERSION=c5;Os.toFormData=C1;Os.AxiosError=ji;Os.Cancel=Os.CanceledError;Os.all=function(t){return Promise.all(t)};Os.spread=IV;Os.isAxiosError=OV;Os.mergeConfig=jm;Os.AxiosHeaders=fl;Os.formToJSON=e=>t5(Vt.isHTMLForm(e)?new FormData(e):e);Os.getAdapter=l5.getAdapter;Os.HttpStatusCode=zS;Os.default=Os;const{Axios:Sae,AxiosError:jae,CanceledError:Cae,isCancel:Tae,CancelToken:kae,VERSION:Eae,all:Mae,Cancel:Nae,isAxiosError:Aae,spread:Pae,toFormData:Rae,AxiosHeaders:Dae,HttpStatusCode:zae,formToJSON:Iae,getAdapter:Oae,mergeConfig:Fae}=Os,FV="/api/resource",u0=Cy("cardBloMePage1/fetch",(n,i)=>Gt(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{const u=yield Os.get(`${FV}/Card Blo Me Page1/${e}`,{withCredentials:!0});return console.log("data...... in slice",e,u),u.data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),h5=Ty({name:"cardBloMePage1",initialState:{data:null,loading:!1,error:null},reducers:{resetCardBloMePage1:e=>{e.data=null,e.loading=!1,e.error=null},updateCardBloMePage1:(e,t)=>{e.data=t.payload}},extraReducers:e=>{e.addCase(u0.pending,t=>{t.loading=!0,t.error=null,t.data=null}).addCase(u0.fulfilled,(t,n)=>{t.loading=!1,t.data=n.payload}).addCase(u0.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||"Failed to fetch doc"})}}),{resetCardBloMePage1:LV,updateCardBloMePage1:Lae}=h5.actions,BV=h5.reducer,VV="/api/resource",ev=Cy("cardBloMePage2/fetch",(n,i)=>Gt(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{return(yield Os.get(`${VV}/Card Blo Me Page2/${e}`,{withCredentials:!0})).data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),f5=Ty({name:"cardBloMePage2",initialState:{data:null,loading:!1,error:null},reducers:{resetCardBloMePage2:e=>{e.data=null,e.loading=!1,e.error=null},updateCardBloMePage2:(e,t)=>{e.data=t.payload}},extraReducers:e=>{e.addCase(ev.pending,t=>{t.loading=!0,t.error=null,t.data=null}).addCase(ev.fulfilled,(t,n)=>{t.loading=!1,t.data=n.payload}).addCase(ev.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||"Failed to fetch doc"})}}),{resetCardBloMePage2:UV,updateCardBloMePage2:Bae}=f5.actions,$V=f5.reducer,HV="/api/resource",tv=Cy("cardBloMePage3/fetch",(n,i)=>Gt(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{return(yield Os.get(`${HV}/Card Blo Me Page3/${e}`,{withCredentials:!0})).data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),p5=Ty({name:"cardBloMePage3",initialState:{data:null,loading:!1,error:null},reducers:{resetCardBloMePage3:e=>{e.data=null,e.loading=!1,e.error=null},updateCardBloMePage3:(e,t)=>{e.data=t.payload}},extraReducers:e=>{e.addCase(tv.pending,t=>{t.loading=!0,t.error=null,t.data=null}).addCase(tv.fulfilled,(t,n)=>{t.loading=!1,t.data=n.payload}).addCase(tv.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||"Failed to fetch doc"})}}),{resetCardBloMePage3:qV,updateCardBloMePage3:Vae}=p5.actions,GV=p5.reducer,WV="/api/resource",nv=Cy("cardBloMePage4/fetch",(n,i)=>Gt(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{return(yield Os.get(`${WV}/Card Blo Me Page 4/${e}`,{withCredentials:!0})).data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),m5=Ty({name:"cardBloMePage4",initialState:{data:null,loading:!1,error:null},reducers:{resetCardBloMePage4:e=>{e.data=null,e.loading=!1,e.error=null},updateCardBloMePage4:(e,t)=>{e.data=t.payload}},extraReducers:e=>{e.addCase(nv.pending,t=>{t.loading=!0,t.error=null,t.data=null}).addCase(nv.fulfilled,(t,n)=>{t.loading=!1,t.data=n.payload}).addCase(nv.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||"Failed to fetch doc"})}}),{resetCardBloMePage4:ZV,updateCardBloMePage4:Uae}=m5.actions,YV=m5.reducer,XV=()=>{const e=Qi.get("user_image")||"",t=Qi.get("full_name"),n=Qi.get("user_id"),{logout:i}=Dm(),[o,u]=L.useState(!1),[c,a]=L.useState(!1),[g,_]=L.useState(!1),[S,E]=L.useState(!1),[A,N]=L.useState(!1),z=L.useRef(null),B=L.useRef(null),$=L.useRef(null),q=Im(),W=Pr();L.useEffect(()=>{const Ie=He=>{z.current&&!z.current.contains(He.target)&&u(!1),B.current&&!B.current.contains(He.target)&&a(!1)};return document.addEventListener("mousedown",Ie),()=>document.removeEventListener("mousedown",Ie)},[]);const Q=()=>{u(!o),a(!1)},Z=()=>{a(!c),u(!1)},K=()=>{_(!g)},le=()=>{E(!S)},ge=()=>{console.log("Logging out..."),localStorage.clear(),q(LV()),q(UV()),q(qV()),q(ZV()),i(),window.location.href="/mycard/login"},he=()=>t?t.split(" ").map(Ie=>Ie[0]).join("").toUpperCase():"U",pe=[{icon:lC,label:"Social Blo Me",path:"/social_media"},{icon:zm,label:"Kad Blo Me",path:"/"},{icon:bP,label:"Health Blo Me",path:"/health"},{icon:gP,label:"Bank Blo Me",path:"/bank"},{icon:hC,label:"Trade Blo Me",path:"/trade"},{icon:jP,label:"Academy Blo Me",path:"/academy"},{icon:mP,label:"Legal Blo Me",path:"/legal"},{icon:_P,label:"Career Me",path:"/career"}];return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"relative",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("nav",{className:"backdrop-blur-xl bg-white/80 dark:bg-gray-900/80 border border-white/20 dark:border-gray-700/30 shadow-2xl shadow-black/5 rounded-2xl relative z-40",children:[l.jsxs("div",{className:"hidden lg:flex items-center justify-between px-6 py-4",children:[l.jsx("div",{className:"flex items-center space-x-8",children:l.jsx("div",{className:"relative group",children:l.jsxs("div",{className:`flex items-center transition-all duration-300 ${A?"bg-white dark:bg-gray-800 shadow-lg shadow-blue-500/20 border-blue-500/50":"bg-gray-50/80 dark:bg-gray-800/50 border-gray-200/50 dark:border-gray-700/50 hover:bg-white hover:shadow-md"} border rounded-xl`,children:[l.jsx(l0,{className:`w-5 h-5 ml-4 transition-colors duration-200 ${A?"text-blue-500":"text-gray-400"}`}),l.jsx("input",{type:"text",placeholder:"Search anything...",className:"w-80 px-4 py-3 bg-transparent border-none outline-none text-gray-700 dark:text-gray-200 placeholder-gray-500",onFocus:()=>N(!0),onBlur:()=>N(!1)}),l.jsx("div",{className:"mr-4 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-md",children:l.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"K"})})]})})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsxs("a",{href:"/mycard",className:"group relative p-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-all duration-200",children:[l.jsx(XL,{size:20,className:"text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"}),l.jsx("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 px-2 py-1 rounded-md whitespace-nowrap z-50",children:"Home"})]}),l.jsxs("button",{className:"group relative p-3 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-xl transition-all duration-200",children:[l.jsx(xS,{size:20,className:"text-gray-600 dark:text-gray-400 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors"}),l.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xs font-medium shadow-lg",children:"3"}),l.jsx("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 px-2 py-1 rounded-md whitespace-nowrap z-50",children:"Notifications"})]}),l.jsxs("button",{onClick:()=>W("/chat"),className:"group relative p-3 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-all duration-200",children:[l.jsx(wP,{size:20,className:"text-gray-600 dark:text-gray-400 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors"}),l.jsx("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 px-2 py-1 rounded-md whitespace-nowrap z-50",children:"Messages"})]})]}),l.jsx("div",{className:"w-px h-8 bg-gray-200 dark:bg-gray-700 mx-2"}),l.jsxs("div",{className:"relative",ref:B,children:[l.jsxs("button",{onClick:Z,className:`group relative p-3 rounded-xl transition-all duration-200 ${c?"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400":"hover:bg-purple-50 dark:hover:bg-purple-900/20 text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400"}`,children:[l.jsx(HL,{size:20,className:"transition-colors"}),l.jsx(Mv,{size:12,className:`absolute -bottom-1 -right-1 transition-transform ${c?"rotate-180":""}`})]}),c&&l.jsxs("div",{className:"absolute top-full right-0 mt-3 w-72 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/30 py-3 animate-in slide-in-from-top-2 duration-200 z-[60]",children:[l.jsx("div",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-800",children:l.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"Applications"})}),l.jsxs("a",{href:"/app",target:"_blank",className:"flex items-center px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors group",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center mr-3 group-hover:scale-105 transition-transform",children:l.jsx("span",{className:"text-white font-bold text-sm",children:"F"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Frappe"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Framework"})]})]}),l.jsxs("a",{href:"/raven",target:"_blank",className:"flex items-center px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors group",children:[l.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center mr-3 group-hover:scale-105 transition-transform",children:l.jsx("span",{className:"text-white font-bold text-sm",children:"R"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Raven"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Chat App"})]})]})]})]}),l.jsxs("div",{className:"relative",ref:z,children:[l.jsxs("button",{className:`flex items-center space-x-3 p-2 pr-3 rounded-xl transition-all duration-200 ${o?"bg-blue-50 dark:bg-blue-900/20 shadow-lg":"hover:bg-gray-50 dark:hover:bg-gray-800/50"}`,onClick:Q,children:[e?l.jsx("div",{className:"w-9 h-9 overflow-hidden rounded-xl border-2 border-white shadow-lg",children:l.jsx("img",{src:e||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face",alt:"Profile",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-bold shadow-lg",children:he()}),l.jsxs("div",{className:"hidden xl:block text-left",children:[l.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 leading-tight",children:t}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-tight",children:"Online"})]}),l.jsx(Mv,{size:16,className:`text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&l.jsxs("div",{className:"absolute top-full right-0 mt-3 w-80 bg-white dark:bg-gray-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/30 py-3 animate-in slide-in-from-top-2 duration-200 z-[60]",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-800",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[e?l.jsx("div",{className:"w-14 h-14 overflow-hidden rounded-2xl border-3 border-white shadow-xl",children:l.jsx("img",{src:e,alt:"Profile",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold shadow-xl",children:he()}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:t}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n}),l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 mt-1",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Online"]})]})]})}),l.jsx("div",{className:"py-2",children:l.jsxs("button",{onClick:ge,className:"flex items-center w-full text-left px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors group",children:[l.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center mr-3 group-hover:scale-105 transition-transform",children:l.jsx(bS,{size:18,className:"text-red-600 dark:text-red-400"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Sign out"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sign out of your account"})]})]})})]})]})]})]}),l.jsxs("div",{className:"flex lg:hidden items-center justify-between px-4 py-3",children:[l.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",onClick:K,children:l.jsx(rB,{size:24,className:"text-gray-700 dark:text-gray-300"})}),l.jsx("div",{className:"flex items-center space-x-2"}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",onClick:le,children:l.jsx(l0,{size:20,className:"text-gray-700 dark:text-gray-300"})}),l.jsxs("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors relative",children:[l.jsx(xS,{size:20,className:"text-gray-700 dark:text-gray-300"}),l.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-white text-xs",children:"3"})]}),l.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",onClick:Q,children:l.jsx("div",{className:"w-8 h-8 overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700",children:l.jsx("img",{src:e,alt:"Profile",className:"w-full h-full object-cover"})})})]})]}),S&&l.jsx("div",{className:"lg:hidden px-4 pb-4 animate-in slide-in-from-top-2 duration-200",children:l.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[l.jsx(l0,{size:18,className:"text-blue-500 ml-4"}),l.jsx("input",{type:"text",placeholder:"Search anything...",className:"flex-1 px-4 py-3 bg-transparent border-none outline-none text-gray-700 dark:text-gray-200 placeholder-gray-500"}),l.jsx("button",{onClick:le,className:"p-2 mr-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:l.jsx(T0,{size:18,className:"text-gray-500"})})]})})]})})}),g&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden",onClick:K}),l.jsxs("div",{ref:$,className:"fixed top-0 left-0 h-full w-80 max-w-[85vw] bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl shadow-2xl z-50 transition-transform animate-in slide-in-from-left animate-out slide-out-from-left duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-gray-800",children:[l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx("img",{className:"h-16",src:"/assets/erpnext/images/mycard-logo.png",alt:"MyCard Logo"})}),l.jsx("button",{onClick:K,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl",children:l.jsx(T0,{size:24,className:"text-gray-700 dark:text-gray-300"})})]}),l.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-16 overflow-hidden rounded-2xl border-3 border-white shadow-xl",children:l.jsx("img",{src:e,alt:"Profile",className:"w-full h-full object-cover"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:t}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n}),l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 mt-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Online"]})]})]})}),l.jsxs("div",{className:"py-4",children:[pe.map((Ie,He)=>{const Ye=location.pathname==="/mycard"+Ie.path;return console.log("active status",location.pathname,Ie.path),l.jsxs(Mr,{to:Ie.path,onClick:()=>_(!1),className:`flex items-center w-full px-6 py-4 text-gray-700 dark:text-gray-300 hover:bg-gray-50 
                  ${Ye?"text-blue-600 bg-blue-50 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}
                 `,children:[l.jsx(Ie.icon,{size:20,className:"mr-4"}),l.jsx("span",{children:Ie.label})]},He)}),l.jsxs("button",{onClick:ge,className:"flex items-center w-full px-6 py-4 text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20",children:[l.jsx(bS,{size:20,className:"mr-4 text-red-500"}),l.jsx("span",{children:"Sign out"})]})]})]})]})]})},KV=({doctype:e,docname:t,children:n})=>{const{data:i,error:o,isLoading:u,mutate:c}=jh(e,t,{fields:["*"]});return n({data:i,error:o,isLoading:u,mutate:c})};function QV(e){if(typeof document=="undefined")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const JV=e=>{switch(e){case"success":return nU;case"info":return sU;case"warning":return iU;case"error":return rU;default:return null}},eU=Array(12).fill(0),tU=({visible:e,className:t})=>Pt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Pt.createElement("div",{className:"sonner-spinner"},eU.map((n,i)=>Pt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),nU=Pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),iU=Pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Pt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),sU=Pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rU=Pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),aU=Pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Pt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Pt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),oU=()=>{const[e,t]=Pt.useState(document.hidden);return Pt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let IS=1;class lU{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const g=t,{message:i}=g,o=Jt(g,["message"]),u=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:IS++,c=this.toasts.find(_=>_.id===u),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),c?this.toasts=this.toasts.map(_=>_.id===u?(this.publish(Ee(te(te({},_),t),{id:u,title:i})),Ee(te(te({},_),t),{id:u,dismissible:a,title:i})):_):this.addToast(Ee(te({title:i},o),{dismissible:a,id:u})),u},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create(Ee(te({},n),{message:t})),this.error=(t,n)=>this.create(Ee(te({},n),{message:t,type:"error"})),this.success=(t,n)=>this.create(Ee(te({},n),{type:"success",message:t})),this.info=(t,n)=>this.create(Ee(te({},n),{type:"info",message:t})),this.warning=(t,n)=>this.create(Ee(te({},n),{type:"warning",message:t})),this.loading=(t,n)=>this.create(Ee(te({},n),{type:"loading",message:t})),this.promise=(t,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create(Ee(te({},n),{promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0})));const o=Promise.resolve(t instanceof Function?t():t);let u=i!==void 0,c;const a=o.then(_=>Gt(this,null,function*(){if(c=["resolve",_],Pt.isValidElement(_))u=!1,this.create({id:i,type:"default",message:_});else if(uU(_)&&!_.ok){u=!1;const E=typeof n.error=="function"?yield n.error(`HTTP error! status: ${_.status}`):n.error,A=typeof n.description=="function"?yield n.description(`HTTP error! status: ${_.status}`):n.description,z=typeof E=="object"&&!Pt.isValidElement(E)?E:{message:E};this.create(te({id:i,type:"error",description:A},z))}else if(_ instanceof Error){u=!1;const E=typeof n.error=="function"?yield n.error(_):n.error,A=typeof n.description=="function"?yield n.description(_):n.description,z=typeof E=="object"&&!Pt.isValidElement(E)?E:{message:E};this.create(te({id:i,type:"error",description:A},z))}else if(n.success!==void 0){u=!1;const E=typeof n.success=="function"?yield n.success(_):n.success,A=typeof n.description=="function"?yield n.description(_):n.description,z=typeof E=="object"&&!Pt.isValidElement(E)?E:{message:E};this.create(te({id:i,type:"success",description:A},z))}})).catch(_=>Gt(this,null,function*(){if(c=["reject",_],n.error!==void 0){u=!1;const S=typeof n.error=="function"?yield n.error(_):n.error,E=typeof n.description=="function"?yield n.description(_):n.description,N=typeof S=="object"&&!Pt.isValidElement(S)?S:{message:S};this.create(te({id:i,type:"error",description:E},N))}})).finally(()=>{u&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),g=()=>new Promise((_,S)=>a.then(()=>c[0]==="reject"?S(c[1]):_(c[1])).catch(S));return typeof i!="string"&&typeof i!="number"?{unwrap:g}:Object.assign(i,{unwrap:g})},this.custom=(t,n)=>{const i=(n==null?void 0:n.id)||IS++;return this.create(te({jsx:t(i),id:i},n)),i},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ol=new lU,cU=(e,t)=>{const n=(t==null?void 0:t.id)||IS++;return ol.addToast(Ee(te({title:e},t),{id:n})),n},uU=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",dU=cU,hU=()=>ol.toasts,fU=()=>ol.getActiveToasts(),$a=Object.assign(dU,{success:ol.success,info:ol.info,warning:ol.warning,error:ol.error,custom:ol.custom,message:ol.message,promise:ol.promise,dismiss:ol.dismiss,loading:ol.loading},{getHistory:hU,getToasts:fU});QV("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function pb(e){return e.label!==void 0}const pU=3,mU="24px",gU="16px",SE=4e3,yU=356,xU=14,_U=45,bU=200;function ld(...e){return e.filter(Boolean).join(" ")}function vU(e){const[t,n]=e.split("-"),i=[];return t&&i.push(t),n&&i.push(n),i}const wU=e=>{var t,n,i,o,u,c,a,g,_;const{invert:S,toast:E,unstyled:A,interacting:N,setHeights:z,visibleToasts:B,heights:$,index:q,toasts:W,expanded:Q,removeToast:Z,defaultRichColors:K,closeButton:le,style:ge,cancelButtonStyle:he,actionButtonStyle:pe,className:Ie="",descriptionClassName:He="",duration:Ye,position:rt,gap:Rt,expandByDefault:St,classNames:De,icons:Qe,closeButtonAriaLabel:et="Close toast"}=e,[Nt,fe]=Pt.useState(null),[Xe,tt]=Pt.useState(null),[Me,ot]=Pt.useState(!1),[ut,dt]=Pt.useState(!1),[pt,Ve]=Pt.useState(!1),[Ge,Dt]=Pt.useState(!1),[Lt,It]=Pt.useState(!1),[Ot,en]=Pt.useState(0),[_n,Yn]=Pt.useState(0),Hn=Pt.useRef(E.duration||Ye||SE),hn=Pt.useRef(null),on=Pt.useRef(null),Ue=q===0,We=q+1<=B,Pe=E.type,Bt=E.dismissible!==!1,Et=E.className||"",nn=E.descriptionClassName||"",yn=Pt.useMemo(()=>$.findIndex(wt=>wt.toastId===E.id)||0,[$,E.id]),ln=Pt.useMemo(()=>{var wt;return(wt=E.closeButton)!=null?wt:le},[E.closeButton,le]),At=Pt.useMemo(()=>E.duration||Ye||SE,[E.duration,Ye]),ke=Pt.useRef(0),ae=Pt.useRef(0),ue=Pt.useRef(0),_e=Pt.useRef(null),[Ce,Ae]=rt.split("-"),J=Pt.useMemo(()=>$.reduce((wt,Wt,Ut)=>Ut>=yn?wt:wt+Wt.height,0),[$,yn]),nt=oU(),Je=E.invert||S,jt=Pe==="loading";ae.current=Pt.useMemo(()=>yn*Rt+J,[yn,J]),Pt.useEffect(()=>{Hn.current=At},[At]),Pt.useEffect(()=>{ot(!0)},[]),Pt.useEffect(()=>{const wt=on.current;if(wt){const Wt=wt.getBoundingClientRect().height;return Yn(Wt),z(Ut=>[{toastId:E.id,height:Wt,position:E.position},...Ut]),()=>z(Ut=>Ut.filter(vn=>vn.toastId!==E.id))}},[z,E.id]),Pt.useLayoutEffect(()=>{if(!Me)return;const wt=on.current,Wt=wt.style.height;wt.style.height="auto";const Ut=wt.getBoundingClientRect().height;wt.style.height=Wt,Yn(Ut),z(vn=>vn.find(Jn=>Jn.toastId===E.id)?vn.map(Jn=>Jn.toastId===E.id?Ee(te({},Jn),{height:Ut}):Jn):[{toastId:E.id,height:Ut,position:E.position},...vn])},[Me,E.title,E.description,z,E.id,E.jsx,E.action,E.cancel]);const qt=Pt.useCallback(()=>{dt(!0),en(ae.current),z(wt=>wt.filter(Wt=>Wt.toastId!==E.id)),setTimeout(()=>{Z(E)},bU)},[E,Z,z,ae]);Pt.useEffect(()=>{if(E.promise&&Pe==="loading"||E.duration===1/0||E.type==="loading")return;let wt;return Q||N||nt?(()=>{if(ue.current<ke.current){const vn=new Date().getTime()-ke.current;Hn.current=Hn.current-vn}ue.current=new Date().getTime()})():(()=>{Hn.current!==1/0&&(ke.current=new Date().getTime(),wt=setTimeout(()=>{E.onAutoClose==null||E.onAutoClose.call(E,E),qt()},Hn.current))})(),()=>clearTimeout(wt)},[Q,N,E,Pe,nt,qt]),Pt.useEffect(()=>{E.delete&&(qt(),E.onDismiss==null||E.onDismiss.call(E,E))},[qt,E.delete]);function Ft(){var wt;if(Qe!=null&&Qe.loading){var Wt;return Pt.createElement("div",{className:ld(De==null?void 0:De.loader,E==null||(Wt=E.classNames)==null?void 0:Wt.loader,"sonner-loader"),"data-visible":Pe==="loading"},Qe.loading)}return Pt.createElement(tU,{className:ld(De==null?void 0:De.loader,E==null||(wt=E.classNames)==null?void 0:wt.loader),visible:Pe==="loading"})}const bn=E.icon||(Qe==null?void 0:Qe[Pe])||JV(Pe);var Tn,ct;return Pt.createElement("li",{tabIndex:0,ref:on,className:ld(Ie,Et,De==null?void 0:De.toast,E==null||(t=E.classNames)==null?void 0:t.toast,De==null?void 0:De.default,De==null?void 0:De[Pe],E==null||(n=E.classNames)==null?void 0:n[Pe]),"data-sonner-toast":"","data-rich-colors":(Tn=E.richColors)!=null?Tn:K,"data-styled":!(E.jsx||E.unstyled||A),"data-mounted":Me,"data-promise":!!E.promise,"data-swiped":Lt,"data-removed":ut,"data-visible":We,"data-y-position":Ce,"data-x-position":Ae,"data-index":q,"data-front":Ue,"data-swiping":pt,"data-dismissible":Bt,"data-type":Pe,"data-invert":Je,"data-swipe-out":Ge,"data-swipe-direction":Xe,"data-expanded":!!(Q||St&&Me),"data-testid":E.testId,style:te(te({"--index":q,"--toasts-before":q,"--z-index":W.length-q,"--offset":`${ut?Ot:ae.current}px`,"--initial-height":St?"auto":`${_n}px`},ge),E.style),onDragEnd:()=>{Ve(!1),fe(null),_e.current=null},onPointerDown:wt=>{wt.button!==2&&(jt||!Bt||(hn.current=new Date,en(ae.current),wt.target.setPointerCapture(wt.pointerId),wt.target.tagName!=="BUTTON"&&(Ve(!0),_e.current={x:wt.clientX,y:wt.clientY})))},onPointerUp:()=>{var wt,Wt,Ut;if(Ge||!Bt)return;_e.current=null;const vn=Number(((wt=on.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Gi=Number(((Wt=on.current)==null?void 0:Wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Jn=new Date().getTime()-((Ut=hn.current)==null?void 0:Ut.getTime()),ai=Nt==="x"?vn:Gi,qn=Math.abs(ai)/Jn;if(Math.abs(ai)>=_U||qn>.11){en(ae.current),E.onDismiss==null||E.onDismiss.call(E,E),tt(Nt==="x"?vn>0?"right":"left":Gi>0?"down":"up"),qt(),Dt(!0);return}else{var Bn,yi;(Bn=on.current)==null||Bn.style.setProperty("--swipe-amount-x","0px"),(yi=on.current)==null||yi.style.setProperty("--swipe-amount-y","0px")}It(!1),Ve(!1),fe(null)},onPointerMove:wt=>{var Wt,Ut,vn;if(!_e.current||!Bt||((Wt=window.getSelection())==null?void 0:Wt.toString().length)>0)return;const Jn=wt.clientY-_e.current.y,ai=wt.clientX-_e.current.x;var qn;const Bn=(qn=e.swipeDirections)!=null?qn:vU(rt);!Nt&&(Math.abs(ai)>1||Math.abs(Jn)>1)&&fe(Math.abs(ai)>Math.abs(Jn)?"x":"y");let yi={x:0,y:0};const Xt=lt=>1/(1.5+Math.abs(lt)/20);if(Nt==="y"){if(Bn.includes("top")||Bn.includes("bottom"))if(Bn.includes("top")&&Jn<0||Bn.includes("bottom")&&Jn>0)yi.y=Jn;else{const lt=Jn*Xt(Jn);yi.y=Math.abs(lt)<Math.abs(Jn)?lt:Jn}}else if(Nt==="x"&&(Bn.includes("left")||Bn.includes("right")))if(Bn.includes("left")&&ai<0||Bn.includes("right")&&ai>0)yi.x=ai;else{const lt=ai*Xt(ai);yi.x=Math.abs(lt)<Math.abs(ai)?lt:ai}(Math.abs(yi.x)>0||Math.abs(yi.y)>0)&&It(!0),(Ut=on.current)==null||Ut.style.setProperty("--swipe-amount-x",`${yi.x}px`),(vn=on.current)==null||vn.style.setProperty("--swipe-amount-y",`${yi.y}px`)}},ln&&!E.jsx&&Pe!=="loading"?Pt.createElement("button",{"aria-label":et,"data-disabled":jt,"data-close-button":!0,onClick:jt||!Bt?()=>{}:()=>{qt(),E.onDismiss==null||E.onDismiss.call(E,E)},className:ld(De==null?void 0:De.closeButton,E==null||(i=E.classNames)==null?void 0:i.closeButton)},(ct=Qe==null?void 0:Qe.close)!=null?ct:aU):null,(Pe||E.icon||E.promise)&&E.icon!==null&&((Qe==null?void 0:Qe[Pe])!==null||E.icon)?Pt.createElement("div",{"data-icon":"",className:ld(De==null?void 0:De.icon,E==null||(o=E.classNames)==null?void 0:o.icon)},E.promise||E.type==="loading"&&!E.icon?E.icon||Ft():null,E.type!=="loading"?bn:null):null,Pt.createElement("div",{"data-content":"",className:ld(De==null?void 0:De.content,E==null||(u=E.classNames)==null?void 0:u.content)},Pt.createElement("div",{"data-title":"",className:ld(De==null?void 0:De.title,E==null||(c=E.classNames)==null?void 0:c.title)},E.jsx?E.jsx:typeof E.title=="function"?E.title():E.title),E.description?Pt.createElement("div",{"data-description":"",className:ld(He,nn,De==null?void 0:De.description,E==null||(a=E.classNames)==null?void 0:a.description)},typeof E.description=="function"?E.description():E.description):null),Pt.isValidElement(E.cancel)?E.cancel:E.cancel&&pb(E.cancel)?Pt.createElement("button",{"data-button":!0,"data-cancel":!0,style:E.cancelButtonStyle||he,onClick:wt=>{pb(E.cancel)&&Bt&&(E.cancel.onClick==null||E.cancel.onClick.call(E.cancel,wt),qt())},className:ld(De==null?void 0:De.cancelButton,E==null||(g=E.classNames)==null?void 0:g.cancelButton)},E.cancel.label):null,Pt.isValidElement(E.action)?E.action:E.action&&pb(E.action)?Pt.createElement("button",{"data-button":!0,"data-action":!0,style:E.actionButtonStyle||pe,onClick:wt=>{pb(E.action)&&(E.action.onClick==null||E.action.onClick.call(E.action,wt),!wt.defaultPrevented&&qt())},className:ld(De==null?void 0:De.actionButton,E==null||(_=E.classNames)==null?void 0:_.actionButton)},E.action.label):null)};function jE(){if(typeof window=="undefined"||typeof document=="undefined")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function SU(e,t){const n={};return[e,t].forEach((i,o)=>{const u=o===1,c=u?"--mobile-offset":"--offset",a=u?gU:mU;function g(_){["top","right","bottom","left"].forEach(S=>{n[`${c}-${S}`]=typeof _=="number"?`${_}px`:_})}typeof i=="number"||typeof i=="string"?g(i):typeof i=="object"?["top","right","bottom","left"].forEach(_=>{i[_]===void 0?n[`${c}-${_}`]=a:n[`${c}-${_}`]=typeof i[_]=="number"?`${i[_]}px`:i[_]}):g(a)}),n}const CE=Pt.forwardRef(function(t,n){const{id:i,invert:o,position:u="bottom-right",hotkey:c=["altKey","KeyT"],expand:a,closeButton:g,className:_,offset:S,mobileOffset:E,theme:A="light",richColors:N,duration:z,style:B,visibleToasts:$=pU,toastOptions:q,dir:W=jE(),gap:Q=xU,icons:Z,containerAriaLabel:K="Notifications"}=t,[le,ge]=Pt.useState([]),he=Pt.useMemo(()=>i?le.filter(Me=>Me.toasterId===i):le.filter(Me=>!Me.toasterId),[le,i]),pe=Pt.useMemo(()=>Array.from(new Set([u].concat(he.filter(Me=>Me.position).map(Me=>Me.position)))),[he,u]),[Ie,He]=Pt.useState([]),[Ye,rt]=Pt.useState(!1),[Rt,St]=Pt.useState(!1),[De,Qe]=Pt.useState(A!=="system"?A:typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),et=Pt.useRef(null),Nt=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),fe=Pt.useRef(null),Xe=Pt.useRef(!1),tt=Pt.useCallback(Me=>{ge(ot=>{var ut;return(ut=ot.find(dt=>dt.id===Me.id))!=null&&ut.delete||ol.dismiss(Me.id),ot.filter(({id:dt})=>dt!==Me.id)})},[]);return Pt.useEffect(()=>ol.subscribe(Me=>{if(Me.dismiss){requestAnimationFrame(()=>{ge(ot=>ot.map(ut=>ut.id===Me.id?Ee(te({},ut),{delete:!0}):ut))});return}setTimeout(()=>{tP.flushSync(()=>{ge(ot=>{const ut=ot.findIndex(dt=>dt.id===Me.id);return ut!==-1?[...ot.slice(0,ut),te(te({},ot[ut]),Me),...ot.slice(ut+1)]:[Me,...ot]})})})}),[le]),Pt.useEffect(()=>{if(A!=="system"){Qe(A);return}if(A==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Qe("dark"):Qe("light")),typeof window=="undefined")return;const Me=window.matchMedia("(prefers-color-scheme: dark)");try{Me.addEventListener("change",({matches:ot})=>{Qe(ot?"dark":"light")})}catch(ot){Me.addListener(({matches:ut})=>{try{Qe(ut?"dark":"light")}catch(dt){console.error(dt)}})}},[A]),Pt.useEffect(()=>{le.length<=1&&rt(!1)},[le]),Pt.useEffect(()=>{const Me=ot=>{var ut;if(c.every(Ve=>ot[Ve]||ot.code===Ve)){var pt;rt(!0),(pt=et.current)==null||pt.focus()}ot.code==="Escape"&&(document.activeElement===et.current||(ut=et.current)!=null&&ut.contains(document.activeElement))&&rt(!1)};return document.addEventListener("keydown",Me),()=>document.removeEventListener("keydown",Me)},[c]),Pt.useEffect(()=>{if(et.current)return()=>{fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null,Xe.current=!1)}},[et.current]),Pt.createElement("section",{ref:n,"aria-label":`${K} ${Nt}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},pe.map((Me,ot)=>{var ut;const[dt,pt]=Me.split("-");return he.length?Pt.createElement("ol",{key:Me,dir:W==="auto"?jE():W,tabIndex:-1,ref:et,className:_,"data-sonner-toaster":!0,"data-sonner-theme":De,"data-y-position":dt,"data-x-position":pt,style:te(te({"--front-toast-height":`${((ut=Ie[0])==null?void 0:ut.height)||0}px`,"--width":`${yU}px`,"--gap":`${Q}px`},B),SU(S,E)),onBlur:Ve=>{Xe.current&&!Ve.currentTarget.contains(Ve.relatedTarget)&&(Xe.current=!1,fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null))},onFocus:Ve=>{Ve.target instanceof HTMLElement&&Ve.target.dataset.dismissible==="false"||Xe.current||(Xe.current=!0,fe.current=Ve.relatedTarget)},onMouseEnter:()=>rt(!0),onMouseMove:()=>rt(!0),onMouseLeave:()=>{Rt||rt(!1)},onDragEnd:()=>rt(!1),onPointerDown:Ve=>{Ve.target instanceof HTMLElement&&Ve.target.dataset.dismissible==="false"||St(!0)},onPointerUp:()=>St(!1)},he.filter(Ve=>!Ve.position&&ot===0||Ve.position===Me).map((Ve,Ge)=>{var Dt,Lt;return Pt.createElement(wU,{key:Ve.id,icons:Z,index:Ge,toast:Ve,defaultRichColors:N,duration:(Dt=q==null?void 0:q.duration)!=null?Dt:z,className:q==null?void 0:q.className,descriptionClassName:q==null?void 0:q.descriptionClassName,invert:o,visibleToasts:$,closeButton:(Lt=q==null?void 0:q.closeButton)!=null?Lt:g,interacting:Rt,position:Me,style:q==null?void 0:q.style,unstyled:q==null?void 0:q.unstyled,classNames:q==null?void 0:q.classNames,cancelButtonStyle:q==null?void 0:q.cancelButtonStyle,actionButtonStyle:q==null?void 0:q.actionButtonStyle,closeButtonAriaLabel:q==null?void 0:q.closeButtonAriaLabel,removeToast:tt,toasts:he.filter(It=>It.position==Ve.position),heights:Ie.filter(It=>It.position==Ve.position),setHeights:He,expandByDefault:a,gap:Q,expanded:Ye,swipeDirections:t.swipeDirections})})):null}))}),jU=({announcementName:e,mutateAnnouncements:t})=>{const{currentUser:n}=Dm(),{createDoc:i}=_y(),{deleteDoc:o}=jO(),[u,c]=L.useState(!1),[a,g]=L.useState(null),{data:_,mutate:S}=md("custom.mycard.doctype.announcements.fetch_likes.get_likes",{announcement_name:e});L.useEffect(()=>{if(_!=null&&_.message){const z=_.message.find(B=>B.user_name===n);c(!!z),g((z==null?void 0:z.name)||null)}else c(!1),g(null)},[_,n]);const E=L.useCallback(()=>Gt(null,null,function*(){try{const z=yield i("Announcement Likes",{parent:e,parentfield:"likes",parenttype:"Announcements",user_name:n});z!=null&&z.name&&(g(z.name),c(!0),$a.success("You liked this post!")),t(),S()}catch(z){console.error("Error liking post:",z)}}),[e,i,n,t,S]),A=L.useCallback(()=>Gt(null,null,function*(){if(a)try{const z=yield o("Announcement Likes",a);(z==null?void 0:z.data)==="ok"&&(c(!1),g(null),$a.success("You unliked this post!"),t(),S())}catch(z){console.error("Error unliking post:",z),(z.httpStatus===403||z.httpStatus===404)&&(c(!1),g(null),t())}}),[a,o,t,S]),N=()=>l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})});return l.jsxs("button",{onClick:u?A:E,className:`flex items-center ${u?"text-blue-600":"text-gray-600"} hover:text-blue-600 transition-colors`,"aria-label":u?"Unlike this post":"Like this post",children:[l.jsx(N,{}),l.jsx("span",{className:"ml-2",children:u?"Unlike":"Like"})]})},CU=()=>{const[e,t]=L.useState(""),[n,i]=L.useState(!1),[o,u]=L.useState(null),[c,a]=L.useState(null),[g,_]=L.useState(null),[S,E]=L.useState({}),[A,N]=L.useState({}),[z,B]=L.useState({}),[$,q]=L.useState("Top"),[W,Q]=L.useState(new Set),{currentUser:Z}=Dm(),K=L.useRef(null),[le,ge]=L.useState(!1),{data:he,error:pe,mutate:Ie}=Tv("Announcements",{fields:["*"],orderBy:{field:"creation",order:"desc"}}),{data:He,error:Ye,mutate:rt}=Tv("Comments",{fields:["*"],orderBy:{field:"creation",order:"desc"}}),[Rt,St]=L.useState({});L.useEffect(()=>{if(He){const Ve={};He.forEach(Ge=>{if(Ge.a_id){Ve[Ge.a_id]||(Ve[Ge.a_id]=[]);const Dt=Ee(te({},Ge),{replies:[]});Ve[Ge.a_id].push(Dt)}}),Object.keys(Ve).forEach(Ge=>{const Dt=Ve[Ge],Lt=Dt.filter(Ot=>!Ot.c_id);Dt.filter(Ot=>Ot.c_id).forEach(Ot=>{const en=Lt.find(_n=>_n.name===Ot.c_id);en&&en.replies.push(Ot)}),Ve[Ge]=Lt}),St(Ve)}},[He]);const{createDoc:De}=_y(),{upload:Qe,reset:et}=Kj(),Nt=Ve=>Gt(null,null,function*(){const Ge=Ve.target.files[0];if(Ge){const Dt=Ge.type.split("/")[0];if(Dt==="image"||Dt==="video"){u(Ge),_(Dt);const Lt=new FileReader;Lt.onloadend=()=>{a(Lt.result)},Lt.readAsDataURL(Ge)}else $a.error("Please select an image or video file.")}}),fe=Ve=>{K.current&&(K.current.accept=Ve==="image"?"image/*":"video/*",K.current.click())},Xe=()=>Gt(null,null,function*(){if(!(!e.trim()&&!o)){i(!0);try{let Ve=null,Ge=null;if(o)try{Ge=g==="image"?"image":"video",Ve=(yield Qe(o,{isPrivate:!1,doctype:"Announcements",fieldname:Ge})).file_url,console.log(`${g} uploaded:`,Ve),et()}catch(Ot){console.error(`Error uploading ${g}:`,Ot),$a.error(`Error uploading ${g}`)}const Dt=Qi.get("full_name")||Z||"Anonymous",Lt=Qi.get("user_image")||"",It={announcements:e,user_name:Dt,image_url:Lt,media_type:g,user_details:[{user_name:Dt,image_url:Lt}]};g==="image"?It.image=Ve:g==="video"&&(It.video=Ve),yield De("Announcements",It),Ie(),$a.success("Post shared successfully!"),t(""),u(null),a(null),_(null)}catch(Ve){console.error("Error creating announcement:",Ve),$a.error("Error creating post")}finally{i(!1)}}}),tt=Ve=>{E(Ge=>Ee(te({},Ge),{[Ve]:!Ge[Ve]})),A[Ve]||N(Ge=>Ee(te({},Ge),{[Ve]:""}))},Me=(Ve,Ge)=>{N(Dt=>Ee(te({},Dt),{[Ve]:Ge}))},ot=Ve=>Gt(null,null,function*(){const Ge=A[Ve];if(Ge.trim())try{const Dt=z[Ve]||null,Lt=Qi.get("full_name")||Z||"Anonymous",It=Qi.get("user_image")||"";yield De("Comments",{comment:Ge,a_id:Ve,c_id:Dt,user_name:Lt,user_image:It}),Me(Ve,""),Dt&&B(Ot=>Ee(te({},Ot),{[Ve]:null})),rt(),$a.success("Comment posted!")}catch(Dt){console.error("Error posting comment:",Dt),$a.error("Error posting comment")}}),ut=(Ve,Ge)=>{B(Dt=>Ee(te({},Dt),{[Ve]:Ge})),setTimeout(()=>{const Dt=document.getElementById(`comment-input-${Ve}`);Dt&&Dt.focus()},0)},dt=Ve=>{B(Ge=>Ee(te({},Ge),{[Ve]:null}))},pt=Ve=>{const Ge=new Date(Ve),Lt=Math.floor((new Date-Ge)/1e3);return Lt<60?"Just now":Lt<3600?`${Math.floor(Lt/60)}m`:Lt<86400?`${Math.floor(Lt/3600)}h`:`${Math.floor(Lt/86400)}d`};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 px-2 sm:px-0",children:l.jsxs("div",{className:"w-full lg:max-w-2xl mx-auto",children:[l.jsx("div",{className:"bg-white rounded-3xl shadow-xl shadow-gray-200/50 mb-8 overflow-hidden border border-gray-100 mx-2 sm:mx-4",children:l.jsxs("div",{className:"p-3 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start space-x-0 sm:space-x-4 space-y-4 sm:space-y-0",children:[l.jsxs("div",{className:"relative mb-3 sm:mb-0",children:[l.jsx("img",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl object-cover ring-2 ring-gray-100",src:Qi.get("user_image")||"https://anantdv.com/construction/img1/transparent%20high%20resolution.png",alt:"Profile"}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),l.jsxs("div",{className:"flex-1 w-full",children:[l.jsx("textarea",{className:"w-full p-2 sm:p-4 bg-gray-50 rounded-2xl resize-none outline-none border-2 border-transparent focus:border-blue-200 focus:bg-white duration-200 text-gray-700 placeholder-gray-400 text-base sm:text-md",placeholder:"What's inspiring you today?",value:e,onChange:Ve=>t(Ve.target.value),rows:3}),c&&l.jsx("div",{className:"relative mt-4 w-full rounded-2xl overflow-hidden",children:l.jsxs("div",{className:"relative",children:[g==="image"?l.jsx("img",{src:c,alt:"Preview",className:"w-full h-auto max-h-56 sm:max-h-64 object-cover"}):l.jsx("video",{src:c,controls:!0,className:"w-full h-auto max-h-56 sm:max-h-64 object-cover"}),l.jsx("button",{onClick:()=>{u(null),a(null),_(null)},className:"absolute top-3 right-3 w-8 h-8 bg-black/50 hover:bg-black/70 backdrop-blur-sm text-white rounded-full flex items-center justify-center transition-all duration-200",children:l.jsx(T0,{className:"w-4 h-4"})})]})})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-6 pt-4 border-t border-gray-100 space-y-2 sm:space-y-0",children:[l.jsx("input",{ref:K,type:"file",className:"hidden",onChange:Nt}),l.jsxs("div",{className:"flex flex-row flex-wrap gap-1 sm:gap-2",children:[l.jsxs("button",{onClick:()=>fe("image"),className:"flex items-center space-x-2 px-3 py-2 rounded-xl text-blue-600 hover:bg-blue-50 transition-all duration-200 group",children:[l.jsx(oL,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),l.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Photo"})]}),l.jsxs("button",{onClick:()=>fe("video"),className:"flex items-center space-x-2 px-3 py-2 rounded-xl text-purple-600 hover:bg-purple-50 transition-all duration-200 group",children:[l.jsx(kP,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),l.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Video"})]}),l.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 rounded-xl text-yellow-600 hover:bg-yellow-50 transition-all duration-200 group",children:[l.jsx(kB,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),l.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Emoji"})]})]}),l.jsx("button",{className:`w-full sm:w-auto px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform ${n||!e.trim()&&!o?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]"}`,disabled:n||!e.trim()&&!o,onClick:Xe,children:n?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),l.jsx("span",{children:"Posting..."})]}):l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Yk,{className:"w-4 h-4"}),l.jsx("span",{children:"Share"})]})})]})]})}),l.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center mb-6 mx-2 sm:mx-4",children:l.jsx("div",{className:"flex items-center bg-white rounded-2xl shadow-lg border border-gray-100 p-2 flex-wrap gap-2",children:["Top","Latest","Trending"].map(Ve=>l.jsx("button",{onClick:()=>q(Ve),className:`px-4 py-1 sm:px-6 sm:py-2 rounded-xl font-medium transition-all duration-200 ${$===Ve?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:Ve},Ve))})}),l.jsx("div",{className:"space-y-5 sm:space-y-6 mx-2 sm:mx-4 pb-8",children:he&&he.length>0?he.map(Ve=>l.jsx("div",{className:"bg-white rounded-3xl shadow-xl shadow-gray-200/50 overflow-hidden border border-gray-100 group hover:shadow-2xl transition-all duration-300",children:l.jsx(KV,{doctype:"Announcements",docname:Ve.name,children:({data:Ge,error:Dt})=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-4 sm:p-6 pb-2 sm:pb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl object-cover ring-2 ring-gray-100",src:Ve.image_url||(Ve.user_info&&Ve.user_info.length>0?Ve.user_info.user_image:"https://anantdv.com/construction/img1/transparent%20high%20resolution.png"),alt:"Profile"}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-900 text-base sm:text-lg",children:Ve.user_name||"Anonymous"}),l.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500 space-x-2",children:[l.jsx("span",{children:"IT Company"}),l.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),l.jsx("span",{children:pt(Ve.creation)})]})]})]}),l.jsx("button",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-xl hover:bg-gray-100 flex items-center justify-center transition-all duration-200 group-hover:bg-gray-50",children:l.jsx(OL,{className:"w-5 h-5 text-gray-500"})})]}),l.jsx("div",{className:"text-gray-800 leading-relaxed mb-3 sm:mb-4",children:le?l.jsxs("p",{children:[Ve.announcements," ",l.jsx("span",{onClick:()=>ge(!1),className:"text-blue-700",children:"see less"})]}):l.jsxs("p",{children:[Ve.announcements.slice(0,250),".... ",l.jsx("span",{onClick:()=>ge(!0),className:"text-blue-700",children:"see more"})]})})]}),(Ve.image||Ve.video)&&l.jsx("div",{className:"relative overflow-hidden",children:Ve.image&&(!Ve.media_type||Ve.media_type==="image")?l.jsx("img",{src:Ve.image,alt:"Post content",className:"w-full h-auto max-h-64 sm:max-h-80 object-cover transition-transform duration-700 group-hover:scale-[1.02]"}):Ve.video&&Ve.media_type==="video"?l.jsx("video",{src:Ve.video,controls:!0,className:"w-full h-auto max-h-64 sm:max-h-80 object-cover"}):null}),l.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4",children:l.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4 items-center justify-between",children:[l.jsx(jU,{announcementName:Ve.name,userName:Z,mutateAnnouncements:Ie}),l.jsxs("button",{onClick:()=>tt(Ve.name),className:`flex items-center space-x-2 px-3 py-2 rounded-xl font-medium transition-all duration-200 group/btn ${S[Ve.name]?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50 hover:text-blue-600"}`,children:[l.jsx(Wk,{className:"w-5 h-5 transition-all duration-200 group-hover/btn:scale-110"}),l.jsx("span",{className:"text-xs sm:text-sm",children:"Comment"})]}),l.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 rounded-xl font-medium text-gray-600 hover:bg-gray-50 hover:text-green-600 transition-all duration-200 group/btn",children:[l.jsx(wB,{className:"w-5 h-5 transition-all duration-200 group-hover/btn:scale-110"}),l.jsx("span",{className:"text-xs sm:text-sm",children:"Share"})]})]})}),S[Ve.name]&&l.jsx("div",{className:"border-t border-gray-100 bg-gradient-to-b from-gray-50/50 to-white",children:l.jsxs("div",{className:"p-4 sm:p-6",children:[z[Ve.name]&&l.jsxs("div",{className:"mb-3 sm:mb-4 flex flex-col sm:flex-row items-center justify-between bg-blue-50 px-4 py-2 rounded-xl",children:[l.jsx("span",{className:"text-sm text-blue-600",children:"Replying to comment"}),l.jsx("button",{onClick:()=>dt(Ve.name),className:"text-sm text-red-500 hover:underline",children:"Cancel"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-start space-x-0 sm:space-x-3 space-y-3 sm:space-y-0 mb-6",children:[l.jsx("img",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-xl object-cover ring-2 ring-gray-100",src:Qi.get("user_image")||"https://anantdv.com/construction/img1/transparent%20high%20resolution.png",alt:"Your profile"}),l.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row space-y-3 sm:space-x-3 sm:space-y-0",children:[l.jsx("input",{id:`comment-input-${Ve.name}`,type:"text",className:"flex-1 px-2 py-2 sm:px-4 sm:py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200",placeholder:"Write a thoughtful comment...",value:A[Ve.name]||"",onChange:Lt=>Me(Ve.name,Lt.target.value)}),l.jsx("button",{onClick:()=>ot(Ve.name),className:"px-4 py-2 sm:px-6 sm:py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:l.jsx(Yk,{className:"w-4 h-4"})})]})]}),l.jsx("div",{className:"space-y-3 sm:space-y-4",children:Rt[Ve.name]&&Rt[Ve.name].length>0?Rt[Ve.name].map(Lt=>l.jsxs("div",{className:"group/comment",children:[l.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[l.jsx("img",{className:"w-8 h-8 sm:w-9 sm:h-9 rounded-xl object-cover ring-2 ring-gray-100",src:Lt.user_image||"https://flowbite.com/docs/images/people/profile-picture-2.jpg",alt:Lt.user_name||"User"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"bg-white rounded-2xl px-3 py-2 sm:px-4 sm:py-3 shadow-sm border border-gray-100",children:[l.jsx("div",{className:"font-semibold text-gray-900 text-xs sm:text-sm",children:Lt.user_name||"Anonymous"}),l.jsx("p",{className:"text-gray-700 mt-1",children:Lt.comment})]}),l.jsxs("div",{className:"flex items-center mt-1 sm:mt-2 text-xs text-gray-500 space-x-2 sm:space-x-4",children:[l.jsx("span",{children:pt(Lt.creation)}),l.jsxs("button",{onClick:()=>ut(Ve.name,Lt.name),className:"font-medium hover:text-blue-600 transition-colors duration-200 flex items-center space-x-1",children:[l.jsx(Zk,{className:"w-3 h-3"}),l.jsx("span",{children:"Reply"})]})]})]})]}),Lt.replies&&Lt.replies.length>0&&l.jsx("div",{className:"ml-6 sm:ml-12 mt-2 sm:mt-3 space-y-2 sm:space-y-3",children:Lt.replies.map(It=>l.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[l.jsx("img",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-xl object-cover ring-2 ring-gray-100",src:It.user_image||"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:It.user_name||"User"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"bg-white rounded-2xl px-3 py-2 sm:px-4 sm:py-3 shadow-sm border border-gray-100",children:[l.jsx("div",{className:"font-semibold text-gray-900 text-xs sm:text-sm",children:It.user_name||"Anonymous"}),l.jsx("p",{className:"text-gray-700 mt-1",children:It.comment})]}),l.jsxs("div",{className:"flex items-center mt-1 sm:mt-2 text-xs text-gray-500 space-x-2 sm:space-x-4",children:[l.jsx("span",{children:pt(It.creation)}),l.jsxs("button",{onClick:()=>ut(Ve.name,Lt.name),className:"font-medium hover:text-blue-600 transition-colors duration-200 flex items-center space-x-1",children:[l.jsx(Zk,{className:"w-3 h-3"}),l.jsx("span",{children:"Reply"})]})]})]})]},It.name))})]},Lt.name)):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Wk,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-500 font-medium",children:"No comments yet"}),l.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Be the first to share your thoughts!"})]})})]})})]})})},Ve.name)):l.jsxs("div",{className:"text-center py-16",children:[l.jsx(hC,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 font-medium",children:"No posts yet"}),l.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Start the conversation by sharing your first post!"})]})})]})})},TU=({user:e,setUserChange:t})=>{const{currentUser:n}=Dm(),{createDoc:i,loading:o}=_y();Qi.get("user_image");const{data:u}=jh("User",n),{data:c}=jh("User",e.name),{call:a}=L.useContext(wc),g=L.useMemo(()=>({filters:{channel_name:`${n} _ ${e.name}`},fields:["*"]}),[n,e.name]),{data:_}=Tv("Raven Channel",g),{call:S}=kv("raven.api.raven_channel.create_direct_message_channel"),E=L.useMemo(()=>{var Z,K;return(K=(Z=u==null?void 0:u.followers)==null?void 0:Z.some(le=>le.user===e.name))!=null?K:!1},[u==null?void 0:u.followers,e.name]),[A,N]=L.useState(!1),[z,B]=L.useState(!1);L.useEffect(()=>{N(E)},[E]);const $=L.useCallback(()=>Gt(null,null,function*(){var Z,K;try{if((Z=_==null?void 0:_[0])!=null&&Z.name){console.log("Channel already exists:",_[0].name);const ge=`/raven/New%20admin%20office%20construction/${_[0].name}`;window.open(ge,"_blank","noopener,noreferrer");return}B(!0);const le=yield S({user_id:e.name});if((K=le==null?void 0:le.message)!=null&&K.name){const ge=`/raven/New%20admin%20office%20construction/${le.message.name}`;window.open(ge,"_blank","noopener,noreferrer"),t&&t(!0)}else throw new Error("Failed to create channel")}catch(le){console.error("Error handling chat:",le),alert("Failed to open chat. Please try again.")}finally{B(!1)}}),[_,S,e.name,t]),q=L.useCallback(()=>Gt(null,null,function*(){if(!(o||E||A))try{N(!0);const[Z]=yield Promise.all([S({user_id:e.name}),i("Followers",{parent:n,parentfield:"followers",parenttype:"User",user:e.name})]);console.log("Successfully followed user and created channel:",Z),t&&t(!0)}catch(Z){console.error("Error following user:",Z),N(!1),alert("Failed to follow user. Please try again.")}}),[o,E,A,S,e.name,i,n,t]),W=o||z,Q=E||A;return l.jsxs("div",{className:"flex items-center justify-between mb-3 mt-3 w-[21rem] md:w-[16rem]",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-10 h-10 bg-white rounded-full overflow-hidden",children:l.jsx("img",{className:"w-full h-full object-cover",src:e.user_image||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRF4C_4SdhCeYFSZttXUY-ScXX08wz0dhuurg&s",alt:`${e.first_name} profile`,onError:Z=>{Z.target.src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRF4C_4SdhCeYFSZttXUY-ScXX08wz0dhuurg&s"}})}),l.jsxs("div",{className:"ml-3 mr-6",children:[l.jsx("div",{className:"font-medium",children:e.first_name}),l.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[l.jsx("span",{children:(c==null?void 0:c.designation)||"UI Designer"}),l.jsx("span",{className:"mx-1",children:""}),l.jsx("span",{children:"2h"})]})]})]}),Q?l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(TP,{size:16,className:"text-green-600"}),l.jsx(uC,{size:16,className:"text-green-600 cursor-pointer hover:text-green-700"}),l.jsx(kP,{size:16,className:"text-green-600 cursor-pointer hover:text-green-700"}),l.jsx(wP,{size:16,onClick:$,className:`text-green-600 cursor-pointer hover:text-green-700 ${z?"opacity-50 cursor-not-allowed":""}`,title:z?"Creating channel...":"Open chat in new tab"})]}):l.jsx("button",{onClick:q,disabled:W,className:`p-1 rounded-full hover:bg-gray-100 transition-colors ${W?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,title:W?"Processing...":"Follow user",children:l.jsx(SP,{className:W?"animate-spin":""})})]})};var g5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TE=Pt.createContext&&Pt.createContext(g5),kU=["attr","size","title"];function EU(e,t){if(e==null)return{};var n=MU(e,t),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)i=u[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function MU(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lv.apply(this,arguments)}function kE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function Bv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(n),!0).forEach(function(i){NU(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function NU(e,t,n){return t=AU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AU(e){var t=PU(e,"string");return typeof t=="symbol"?t:t+""}function PU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y5(e){return e&&e.map((t,n)=>Pt.createElement(t.tag,Bv({key:n},t.attr),y5(t.child)))}function xi(e){return t=>Pt.createElement(RU,Lv({attr:Bv({},e.attr)},t),y5(e.child))}function RU(e){var t=n=>{var{attr:i,size:o,title:u}=e,c=EU(e,kU),a=o||n.size||"1em",g;return n.className&&(g=n.className),e.className&&(g=(g?g+" ":"")+e.className),Pt.createElement("svg",Lv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,c,{className:g,style:Bv(Bv({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),u&&Pt.createElement("title",null,u),e.children)};return TE!==void 0?Pt.createElement(TE.Consumer,null,n=>t(n)):t(g5)}function DU(e){return xi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function zU(e){return xi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}const IU=e=>{const[t,n]=L.useState(!1);return L.useEffect(()=>{function i(u){n(u.matches)}const o=matchMedia(e);return o.addEventListener("change",i),n(o.matches),()=>o.removeEventListener("change",i)},[e]),t},OU=()=>IU("(min-width: 768px)");var n_=e=>e.type==="checkbox",lm=e=>e instanceof Date,Fo=e=>e==null;const x5=e=>typeof e=="object";var Ar=e=>!Fo(e)&&!Array.isArray(e)&&x5(e)&&!lm(e),_5=e=>Ar(e)&&e.target?n_(e.target)?e.target.checked:e.target.value:e,FU=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,b5=(e,t)=>e.has(FU(t)),LU=e=>{const t=e.constructor&&e.constructor.prototype;return Ar(t)&&t.hasOwnProperty("isPrototypeOf")},vC=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function ur(e){let t;const n=Array.isArray(e),i=typeof FileList!="undefined"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(vC&&(e instanceof Blob||i))&&(n||Ar(e)))if(t=n?[]:{},!n&&!LU(e))t=e;else for(const o in e)e.hasOwnProperty(o)&&(t[o]=ur(e[o]));else return e;return t}var i_=e=>Array.isArray(e)?e.filter(Boolean):[],Ks=e=>e===void 0,Sn=(e,t,n)=>{if(!t||!Ar(e))return n;const i=i_(t.split(/[,[\].]+?/)).reduce((o,u)=>Fo(o)?o:o[u],e);return Ks(i)||i===e?Ks(e[t])?n:e[t]:i},Il=e=>typeof e=="boolean",wC=e=>/^\w*$/.test(e),v5=e=>i_(e.replace(/["|']|\]/g,"").split(/\.|\[/)),bs=(e,t,n)=>{let i=-1;const o=wC(t)?[t]:v5(t),u=o.length,c=u-1;for(;++i<u;){const a=o[i];let g=n;if(i!==c){const _=e[a];g=Ar(_)||Array.isArray(_)?_:isNaN(+o[i+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=g,e=e[a]}};const Vv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},_c={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},uh={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},w5=Pt.createContext(null),E1=()=>Pt.useContext(w5),BU=e=>{const i=e,{children:t}=i,n=Jt(i,["children"]);return Pt.createElement(w5.Provider,{value:n},t)};var S5=(e,t,n,i=!0)=>{const o={defaultValues:t._defaultValues};for(const u in e)Object.defineProperty(o,u,{get:()=>{const c=u;return t._proxyFormState[c]!==_c.all&&(t._proxyFormState[c]=!i||_c.all),n&&(n[c]=!0),e[c]}});return o};const SC=typeof window!="undefined"?L.useLayoutEffect:L.useEffect;function VU(e){const t=E1(),{control:n=t.control,disabled:i,name:o,exact:u}=e||{},[c,a]=Pt.useState(n._formState),g=Pt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return SC(()=>n._subscribe({name:o,formState:g.current,exact:u,callback:_=>{!i&&a(te(te({},n._formState),_))}}),[o,i,u]),Pt.useEffect(()=>{g.current.isValid&&n._setValid(!0)},[n]),Pt.useMemo(()=>S5(c,n,g.current,!1),[c,n])}var pd=e=>typeof e=="string",j5=(e,t,n,i,o)=>pd(e)?(i&&t.watch.add(e),Sn(n,e,o)):Array.isArray(e)?e.map(u=>(i&&t.watch.add(u),Sn(n,u))):(i&&(t.watchAll=!0),n);function UU(e){const t=E1(),{control:n=t.control,name:i,defaultValue:o,disabled:u,exact:c}=e||{},a=Pt.useRef(o),[g,_]=Pt.useState(n._getWatch(i,a.current));return SC(()=>n._subscribe({name:i,formState:{values:!0},exact:c,callback:S=>!u&&_(j5(i,n._names,S.values||n._formValues,!1,a.current))}),[i,n,u,c]),Pt.useEffect(()=>n._removeUnmounted()),g}function $U(e){const t=E1(),{name:n,disabled:i,control:o=t.control,shouldUnregister:u}=e,c=b5(o._names.array,n),a=UU({control:o,name:n,defaultValue:Sn(o._formValues,n,Sn(o._defaultValues,n,e.defaultValue)),exact:!0}),g=VU({control:o,name:n,exact:!0}),_=Pt.useRef(e),S=Pt.useRef(o.register(n,te(Ee(te({},e.rules),{value:a}),Il(e.disabled)?{disabled:e.disabled}:{}))),E=Pt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Sn(g.errors,n)},isDirty:{enumerable:!0,get:()=>!!Sn(g.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Sn(g.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Sn(g.validatingFields,n)},error:{enumerable:!0,get:()=>Sn(g.errors,n)}}),[g,n]),A=Pt.useCallback($=>S.current.onChange({target:{value:_5($),name:n},type:Vv.CHANGE}),[n]),N=Pt.useCallback(()=>S.current.onBlur({target:{value:Sn(o._formValues,n),name:n},type:Vv.BLUR}),[n,o._formValues]),z=Pt.useCallback($=>{const q=Sn(o._fields,n);q&&$&&(q._f.ref={focus:()=>$.focus(),select:()=>$.select(),setCustomValidity:W=>$.setCustomValidity(W),reportValidity:()=>$.reportValidity()})},[o._fields,n]),B=Pt.useMemo(()=>Ee(te({name:n,value:a},Il(i)||g.disabled?{disabled:g.disabled||i}:{}),{onChange:A,onBlur:N,ref:z}),[n,i,g.disabled,A,N,z,a]);return Pt.useEffect(()=>{const $=o._options.shouldUnregister||u;o.register(n,te(te({},_.current.rules),Il(_.current.disabled)?{disabled:_.current.disabled}:{}));const q=(W,Q)=>{const Z=Sn(o._fields,W);Z&&Z._f&&(Z._f.mount=Q)};if(q(n,!0),$){const W=ur(Sn(o._options.defaultValues,n));bs(o._defaultValues,n,W),Ks(Sn(o._formValues,n))&&bs(o._formValues,n,W)}return!c&&o.register(n),()=>{(c?$&&!o._state.action:$)?o.unregister(n):q(n,!1)}},[n,o,c,u]),Pt.useEffect(()=>{o._setDisabledField({disabled:i,name:n})},[i,n,o]),Pt.useMemo(()=>({field:B,formState:g,fieldState:E}),[B,g,E])}const HU=e=>e.render($U(e));var qU=(e,t,n,i,o)=>t?Ee(te({},n[e]),{types:Ee(te({},n[e]&&n[e].types?n[e].types:{}),{[i]:o||!0})}):{},cl=e=>Array.isArray(e)?e:[e],EE=()=>{let e=[];return{get observers(){return e},next:o=>{for(const u of e)u.next&&u.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(u=>u!==o)}}),unsubscribe:()=>{e=[]}}},OS=e=>Fo(e)||!x5(e);function Rf(e,t){if(OS(e)||OS(t))return e===t;if(lm(e)&&lm(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const o of n){const u=e[o];if(!i.includes(o))return!1;if(o!=="ref"){const c=t[o];if(lm(u)&&lm(c)||Ar(u)&&Ar(c)||Array.isArray(u)&&Array.isArray(c)?!Rf(u,c):u!==c)return!1}}return!0}var fo=e=>Ar(e)&&!Object.keys(e).length,jC=e=>e.type==="file",gu=e=>typeof e=="function",Uv=e=>{if(!vC)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},C5=e=>e.type==="select-multiple",CC=e=>e.type==="radio",GU=e=>CC(e)||n_(e),Jw=e=>Uv(e)&&e.isConnected;function WU(e,t){const n=t.slice(0,-1).length;let i=0;for(;i<n;)e=Ks(e)?i++:e[t[i++]];return e}function ZU(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ks(e[t]))return!1;return!0}function Wr(e,t){const n=Array.isArray(t)?t:wC(t)?[t]:v5(t),i=n.length===1?e:WU(e,n),o=n.length-1,u=n[o];return i&&delete i[u],o!==0&&(Ar(i)&&fo(i)||Array.isArray(i)&&ZU(i))&&Wr(e,n.slice(0,-1)),e}var T5=e=>{for(const t in e)if(gu(e[t]))return!0;return!1};function $v(e,t={}){const n=Array.isArray(e);if(Ar(e)||n)for(const i in e)Array.isArray(e[i])||Ar(e[i])&&!T5(e[i])?(t[i]=Array.isArray(e[i])?[]:{},$v(e[i],t[i])):Fo(e[i])||(t[i]=!0);return t}function k5(e,t,n){const i=Array.isArray(e);if(Ar(e)||i)for(const o in e)Array.isArray(e[o])||Ar(e[o])&&!T5(e[o])?Ks(t)||OS(n[o])?n[o]=Array.isArray(e[o])?$v(e[o],[]):te({},$v(e[o])):k5(e[o],Fo(t)?{}:t[o],n[o]):n[o]=!Rf(e[o],t[o]);return n}var Fx=(e,t)=>k5(e,t,$v(t));const ME={value:!1,isValid:!1},NE={value:!0,isValid:!0};var E5=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ks(e[0].attributes.value)?Ks(e[0].value)||e[0].value===""?NE:{value:e[0].value,isValid:!0}:NE:ME}return ME},M5=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:i})=>Ks(e)?e:t?e===""?NaN:e&&+e:n&&pd(e)?new Date(e):i?i(e):e;const AE={isValid:!1,value:null};var N5=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,AE):AE;function PE(e){const t=e.ref;return jC(t)?t.files:CC(t)?N5(e.refs).value:C5(t)?[...t.selectedOptions].map(({value:n})=>n):n_(t)?E5(e.refs).value:M5(Ks(t.value)?e.ref.value:t.value,e)}var YU=(e,t,n,i)=>{const o={};for(const u of e){const c=Sn(t,u);c&&bs(o,u,c._f)}return{criteriaMode:n,names:[...e],fields:o,shouldUseNativeValidation:i}},Hv=e=>e instanceof RegExp,Lx=e=>Ks(e)?e:Hv(e)?e.source:Ar(e)?Hv(e.value)?e.value.source:e.value:e,Zg=e=>({isOnSubmit:!e||e===_c.onSubmit,isOnBlur:e===_c.onBlur,isOnChange:e===_c.onChange,isOnAll:e===_c.all,isOnTouch:e===_c.onTouched});const RE="AsyncFunction";var XU=e=>!!e&&!!e.validate&&!!(gu(e.validate)&&e.validate.constructor.name===RE||Ar(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===RE)),KU=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),FS=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ny=(e,t,n,i)=>{for(const u of n||Object.keys(e)){const c=Sn(e,u);if(c){const o=c,{_f:a}=o,g=Jt(o,["_f"]);if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],u)&&!i)return!0;if(a.ref&&t(a.ref,a.name)&&!i)return!0;if(ny(g,t))break}else if(Ar(g)&&ny(g,t))break}}};function DE(e,t,n){const i=Sn(e,n);if(i||wC(n))return{error:i,name:n};const o=n.split(".");for(;o.length;){const u=o.join("."),c=Sn(t,u),a=Sn(e,u);if(c&&!Array.isArray(c)&&n!==u)return{name:n};if(a&&a.type)return{name:u,error:a};o.pop()}return{name:n}}var QU=(e,t,n,i)=>{n(e);const c=e,{name:o}=c,u=Jt(c,["name"]);return fo(u)||Object.keys(u).length>=Object.keys(t).length||Object.keys(u).find(a=>t[a]===(!i||_c.all))},JU=(e,t,n)=>!e||!t||e===t||cl(e).some(i=>i&&(n?i===t:i.startsWith(t)||t.startsWith(i))),e$=(e,t,n,i,o)=>o.isOnAll?!1:!n&&o.isOnTouch?!(t||e):(n?i.isOnBlur:o.isOnBlur)?!e:(n?i.isOnChange:o.isOnChange)?e:!0,t$=(e,t)=>!i_(Sn(e,t)).length&&Wr(e,t),A5=(e,t,n)=>{const i=cl(Sn(e,n));return bs(i,"root",t[n]),bs(e,n,i),e},iv=e=>pd(e);function zE(e,t,n="validate"){if(iv(e)||Array.isArray(e)&&e.every(iv)||Il(e)&&!e)return{type:n,message:iv(e)?e:"",ref:t}}var Fg=e=>Ar(e)&&!Hv(e)?e:{value:e,message:""},LS=(e,t,n,i,o,u)=>Gt(null,null,function*(){const{ref:c,refs:a,required:g,maxLength:_,minLength:S,min:E,max:A,pattern:N,validate:z,name:B,valueAsNumber:$,mount:q}=e._f,W=Sn(n,B);if(!q||t.has(B))return{};const Q=a?a[0]:c,Z=Ye=>{o&&Q.reportValidity&&(Q.setCustomValidity(Il(Ye)?"":Ye||""),Q.reportValidity())},K={},le=CC(c),ge=n_(c),he=le||ge,pe=($||jC(c))&&Ks(c.value)&&Ks(W)||Uv(c)&&c.value===""||W===""||Array.isArray(W)&&!W.length,Ie=qU.bind(null,B,i,K),He=(Ye,rt,Rt,St=uh.maxLength,De=uh.minLength)=>{const Qe=Ye?rt:Rt;K[B]=te({type:Ye?St:De,message:Qe,ref:c},Ie(Ye?St:De,Qe))};if(u?!Array.isArray(W)||!W.length:g&&(!he&&(pe||Fo(W))||Il(W)&&!W||ge&&!E5(a).isValid||le&&!N5(a).isValid)){const{value:Ye,message:rt}=iv(g)?{value:!!g,message:g}:Fg(g);if(Ye&&(K[B]=te({type:uh.required,message:rt,ref:Q},Ie(uh.required,rt)),!i))return Z(rt),K}if(!pe&&(!Fo(E)||!Fo(A))){let Ye,rt;const Rt=Fg(A),St=Fg(E);if(!Fo(W)&&!isNaN(W)){const De=c.valueAsNumber||W&&+W;Fo(Rt.value)||(Ye=De>Rt.value),Fo(St.value)||(rt=De<St.value)}else{const De=c.valueAsDate||new Date(W),Qe=fe=>new Date(new Date().toDateString()+" "+fe),et=c.type=="time",Nt=c.type=="week";pd(Rt.value)&&W&&(Ye=et?Qe(W)>Qe(Rt.value):Nt?W>Rt.value:De>new Date(Rt.value)),pd(St.value)&&W&&(rt=et?Qe(W)<Qe(St.value):Nt?W<St.value:De<new Date(St.value))}if((Ye||rt)&&(He(!!Ye,Rt.message,St.message,uh.max,uh.min),!i))return Z(K[B].message),K}if((_||S)&&!pe&&(pd(W)||u&&Array.isArray(W))){const Ye=Fg(_),rt=Fg(S),Rt=!Fo(Ye.value)&&W.length>+Ye.value,St=!Fo(rt.value)&&W.length<+rt.value;if((Rt||St)&&(He(Rt,Ye.message,rt.message),!i))return Z(K[B].message),K}if(N&&!pe&&pd(W)){const{value:Ye,message:rt}=Fg(N);if(Hv(Ye)&&!W.match(Ye)&&(K[B]=te({type:uh.pattern,message:rt,ref:c},Ie(uh.pattern,rt)),!i))return Z(rt),K}if(z){if(gu(z)){const Ye=yield z(W,n),rt=zE(Ye,Q);if(rt&&(K[B]=te(te({},rt),Ie(uh.validate,rt.message)),!i))return Z(rt.message),K}else if(Ar(z)){let Ye={};for(const rt in z){if(!fo(Ye)&&!i)break;const Rt=zE(yield z[rt](W,n),Q,rt);Rt&&(Ye=te(te({},Rt),Ie(rt,Rt.message)),Z(Rt.message),i&&(K[B]=Ye))}if(!fo(Ye)&&(K[B]=te({ref:Q},Ye),!i))return K}}return Z(!0),K});const n$={mode:_c.onSubmit,reValidateMode:_c.onChange,shouldFocusError:!0};function i$(e={}){let t=te(te({},n$),e),n={submitCount:0,isDirty:!1,isReady:!1,isLoading:gu(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const i={};let o=Ar(t.defaultValues)||Ar(t.values)?ur(t.defaultValues||t.values)||{}:{},u=t.shouldUnregister?{}:ur(o),c={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,_=0;const S={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let E=te({},S);const A={array:EE(),state:EE()},N=t.criteriaMode===_c.all,z=Ue=>We=>{clearTimeout(_),_=setTimeout(Ue,We)},B=Ue=>Gt(null,null,function*(){if(!t.disabled&&(S.isValid||E.isValid||Ue)){const We=t.resolver?fo((yield ge()).errors):yield pe(i,!0);We!==n.isValid&&A.state.next({isValid:We})}}),$=(Ue,We)=>{!t.disabled&&(S.isValidating||S.validatingFields||E.isValidating||E.validatingFields)&&((Ue||Array.from(a.mount)).forEach(Pe=>{Pe&&(We?bs(n.validatingFields,Pe,We):Wr(n.validatingFields,Pe))}),A.state.next({validatingFields:n.validatingFields,isValidating:!fo(n.validatingFields)}))},q=(Ue,We=[],Pe,Bt,Et=!0,nn=!0)=>{if(Bt&&Pe&&!t.disabled){if(c.action=!0,nn&&Array.isArray(Sn(i,Ue))){const yn=Pe(Sn(i,Ue),Bt.argA,Bt.argB);Et&&bs(i,Ue,yn)}if(nn&&Array.isArray(Sn(n.errors,Ue))){const yn=Pe(Sn(n.errors,Ue),Bt.argA,Bt.argB);Et&&bs(n.errors,Ue,yn),t$(n.errors,Ue)}if((S.touchedFields||E.touchedFields)&&nn&&Array.isArray(Sn(n.touchedFields,Ue))){const yn=Pe(Sn(n.touchedFields,Ue),Bt.argA,Bt.argB);Et&&bs(n.touchedFields,Ue,yn)}(S.dirtyFields||E.dirtyFields)&&(n.dirtyFields=Fx(o,u)),A.state.next({name:Ue,isDirty:He(Ue,We),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else bs(u,Ue,We)},W=(Ue,We)=>{bs(n.errors,Ue,We),A.state.next({errors:n.errors})},Q=Ue=>{n.errors=Ue,A.state.next({errors:n.errors,isValid:!1})},Z=(Ue,We,Pe,Bt)=>{const Et=Sn(i,Ue);if(Et){const nn=Sn(u,Ue,Ks(Pe)?Sn(o,Ue):Pe);Ks(nn)||Bt&&Bt.defaultChecked||We?bs(u,Ue,We?nn:PE(Et._f)):Rt(Ue,nn),c.mount&&B()}},K=(Ue,We,Pe,Bt,Et)=>{let nn=!1,yn=!1;const ln={name:Ue};if(!t.disabled){if(!Pe||Bt){(S.isDirty||E.isDirty)&&(yn=n.isDirty,n.isDirty=ln.isDirty=He(),nn=yn!==ln.isDirty);const At=Rf(Sn(o,Ue),We);yn=!!Sn(n.dirtyFields,Ue),At?Wr(n.dirtyFields,Ue):bs(n.dirtyFields,Ue,!0),ln.dirtyFields=n.dirtyFields,nn=nn||(S.dirtyFields||E.dirtyFields)&&yn!==!At}if(Pe){const At=Sn(n.touchedFields,Ue);At||(bs(n.touchedFields,Ue,Pe),ln.touchedFields=n.touchedFields,nn=nn||(S.touchedFields||E.touchedFields)&&At!==Pe)}nn&&Et&&A.state.next(ln)}return nn?ln:{}},le=(Ue,We,Pe,Bt)=>{const Et=Sn(n.errors,Ue),nn=(S.isValid||E.isValid)&&Il(We)&&n.isValid!==We;if(t.delayError&&Pe?(g=z(()=>W(Ue,Pe)),g(t.delayError)):(clearTimeout(_),g=null,Pe?bs(n.errors,Ue,Pe):Wr(n.errors,Ue)),(Pe?!Rf(Et,Pe):Et)||!fo(Bt)||nn){const yn=Ee(te(te({},Bt),nn&&Il(We)?{isValid:We}:{}),{errors:n.errors,name:Ue});n=te(te({},n),yn),A.state.next(yn)}},ge=Ue=>Gt(null,null,function*(){$(Ue,!0);const We=yield t.resolver(u,t.context,YU(Ue||a.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return $(Ue),We}),he=Ue=>Gt(null,null,function*(){const{errors:We}=yield ge(Ue);if(Ue)for(const Pe of Ue){const Bt=Sn(We,Pe);Bt?bs(n.errors,Pe,Bt):Wr(n.errors,Pe)}else n.errors=We;return We}),pe=(Bt,Et,...nn)=>Gt(null,[Bt,Et,...nn],function*(Ue,We,Pe={valid:!0}){for(const ln in Ue){const At=Ue[ln];if(At){const yn=At,{_f:ke}=yn,ae=Jt(yn,["_f"]);if(ke){const ue=a.array.has(ke.name),_e=At._f&&XU(At._f);_e&&S.validatingFields&&$([ln],!0);const Ce=yield LS(At,a.disabled,u,N,t.shouldUseNativeValidation&&!We,ue);if(_e&&S.validatingFields&&$([ln]),Ce[ke.name]&&(Pe.valid=!1,We))break;!We&&(Sn(Ce,ke.name)?ue?A5(n.errors,Ce,ke.name):bs(n.errors,ke.name,Ce[ke.name]):Wr(n.errors,ke.name))}!fo(ae)&&(yield pe(ae,We,Pe))}}return Pe.valid}),Ie=()=>{for(const Ue of a.unMount){const We=Sn(i,Ue);We&&(We._f.refs?We._f.refs.every(Pe=>!Jw(Pe)):!Jw(We._f.ref))&&pt(Ue)}a.unMount=new Set},He=(Ue,We)=>!t.disabled&&(Ue&&We&&bs(u,Ue,We),!Rf(fe(),o)),Ye=(Ue,We,Pe)=>j5(Ue,a,te({},c.mount?u:Ks(We)?o:pd(Ue)?{[Ue]:We}:We),Pe,We),rt=Ue=>i_(Sn(c.mount?u:o,Ue,t.shouldUnregister?Sn(o,Ue,[]):[])),Rt=(Ue,We,Pe={})=>{const Bt=Sn(i,Ue);let Et=We;if(Bt){const nn=Bt._f;nn&&(!nn.disabled&&bs(u,Ue,M5(We,nn)),Et=Uv(nn.ref)&&Fo(We)?"":We,C5(nn.ref)?[...nn.ref.options].forEach(yn=>yn.selected=Et.includes(yn.value)):nn.refs?n_(nn.ref)?nn.refs.forEach(yn=>{(!yn.defaultChecked||!yn.disabled)&&(Array.isArray(Et)?yn.checked=!!Et.find(ln=>ln===yn.value):yn.checked=Et===yn.value||!!Et)}):nn.refs.forEach(yn=>yn.checked=yn.value===Et):jC(nn.ref)?nn.ref.value="":(nn.ref.value=Et,nn.ref.type||A.state.next({name:Ue,values:ur(u)})))}(Pe.shouldDirty||Pe.shouldTouch)&&K(Ue,Et,Pe.shouldTouch,Pe.shouldDirty,!0),Pe.shouldValidate&&Nt(Ue)},St=(Ue,We,Pe)=>{for(const Bt in We){if(!We.hasOwnProperty(Bt))return;const Et=We[Bt],nn=`${Ue}.${Bt}`,yn=Sn(i,nn);(a.array.has(Ue)||Ar(Et)||yn&&!yn._f)&&!lm(Et)?St(nn,Et,Pe):Rt(nn,Et,Pe)}},De=(Ue,We,Pe={})=>{const Bt=Sn(i,Ue),Et=a.array.has(Ue),nn=ur(We);bs(u,Ue,nn),Et?(A.array.next({name:Ue,values:ur(u)}),(S.isDirty||S.dirtyFields||E.isDirty||E.dirtyFields)&&Pe.shouldDirty&&A.state.next({name:Ue,dirtyFields:Fx(o,u),isDirty:He(Ue,nn)})):Bt&&!Bt._f&&!Fo(nn)?St(Ue,nn,Pe):Rt(Ue,nn,Pe),FS(Ue,a)&&A.state.next(te({},n)),A.state.next({name:c.mount?Ue:void 0,values:ur(u)})},Qe=Ue=>Gt(null,null,function*(){c.mount=!0;const We=Ue.target;let Pe=We.name,Bt=!0;const Et=Sn(i,Pe),nn=At=>{Bt=Number.isNaN(At)||lm(At)&&isNaN(At.getTime())||Rf(At,Sn(u,Pe,At))},yn=Zg(t.mode),ln=Zg(t.reValidateMode);if(Et){let At,ke;const ae=We.type?PE(Et._f):_5(Ue),ue=Ue.type===Vv.BLUR||Ue.type===Vv.FOCUS_OUT,_e=!KU(Et._f)&&!t.resolver&&!Sn(n.errors,Pe)&&!Et._f.deps||e$(ue,Sn(n.touchedFields,Pe),n.isSubmitted,ln,yn),Ce=FS(Pe,a,ue);bs(u,Pe,ae),ue?(Et._f.onBlur&&Et._f.onBlur(Ue),g&&g(0)):Et._f.onChange&&Et._f.onChange(Ue);const Ae=K(Pe,ae,ue),J=!fo(Ae)||Ce;if(!ue&&A.state.next({name:Pe,type:Ue.type,values:ur(u)}),_e)return(S.isValid||E.isValid)&&(t.mode==="onBlur"?ue&&B():ue||B()),J&&A.state.next(te({name:Pe},Ce?{}:Ae));if(!ue&&Ce&&A.state.next(te({},n)),t.resolver){const{errors:nt}=yield ge([Pe]);if(nn(ae),Bt){const Je=DE(n.errors,i,Pe),jt=DE(nt,i,Je.name||Pe);At=jt.error,Pe=jt.name,ke=fo(nt)}}else $([Pe],!0),At=(yield LS(Et,a.disabled,u,N,t.shouldUseNativeValidation))[Pe],$([Pe]),nn(ae),Bt&&(At?ke=!1:(S.isValid||E.isValid)&&(ke=yield pe(i,!0)));Bt&&(Et._f.deps&&Nt(Et._f.deps),le(Pe,ke,At,Ae))}}),et=(Ue,We)=>{if(Sn(n.errors,We)&&Ue.focus)return Ue.focus(),1},Nt=(Pe,...Bt)=>Gt(null,[Pe,...Bt],function*(Ue,We={}){let Et,nn;const yn=cl(Ue);if(t.resolver){const ln=yield he(Ks(Ue)?Ue:yn);Et=fo(ln),nn=Ue?!yn.some(At=>Sn(ln,At)):Et}else Ue?(nn=(yield Promise.all(yn.map(ln=>Gt(null,null,function*(){const At=Sn(i,ln);return yield pe(At&&At._f?{[ln]:At}:At)})))).every(Boolean),!(!nn&&!n.isValid)&&B()):nn=Et=yield pe(i);return A.state.next(Ee(te(te({},!pd(Ue)||(S.isValid||E.isValid)&&Et!==n.isValid?{}:{name:Ue}),t.resolver||!Ue?{isValid:Et}:{}),{errors:n.errors})),We.shouldFocus&&!nn&&ny(i,et,Ue?yn:a.mount),nn}),fe=Ue=>{const We=te({},c.mount?u:o);return Ks(Ue)?We:pd(Ue)?Sn(We,Ue):Ue.map(Pe=>Sn(We,Pe))},Xe=(Ue,We)=>({invalid:!!Sn((We||n).errors,Ue),isDirty:!!Sn((We||n).dirtyFields,Ue),error:Sn((We||n).errors,Ue),isValidating:!!Sn(n.validatingFields,Ue),isTouched:!!Sn((We||n).touchedFields,Ue)}),tt=Ue=>{Ue&&cl(Ue).forEach(We=>Wr(n.errors,We)),A.state.next({errors:Ue?n.errors:{}})},Me=(Ue,We,Pe)=>{const Bt=(Sn(i,Ue,{_f:{}})._f||{}).ref,ke=Sn(n.errors,Ue)||{},{ref:nn,message:yn,type:ln}=ke,At=Jt(ke,["ref","message","type"]);bs(n.errors,Ue,Ee(te(te({},At),We),{ref:Bt})),A.state.next({name:Ue,errors:n.errors,isValid:!1}),Pe&&Pe.shouldFocus&&Bt&&Bt.focus&&Bt.focus()},ot=(Ue,We)=>gu(Ue)?A.state.subscribe({next:Pe=>Ue(Ye(void 0,We),Pe)}):Ye(Ue,We,!0),ut=Ue=>A.state.subscribe({next:We=>{JU(Ue.name,We.name,Ue.exact)&&QU(We,Ue.formState||S,Hn,Ue.reRenderRoot)&&Ue.callback(te(te({values:te({},u)},n),We))}}).unsubscribe,dt=Ue=>(c.mount=!0,E=te(te({},E),Ue.formState),ut(Ee(te({},Ue),{formState:E}))),pt=(Ue,We={})=>{for(const Pe of Ue?cl(Ue):a.mount)a.mount.delete(Pe),a.array.delete(Pe),We.keepValue||(Wr(i,Pe),Wr(u,Pe)),!We.keepError&&Wr(n.errors,Pe),!We.keepDirty&&Wr(n.dirtyFields,Pe),!We.keepTouched&&Wr(n.touchedFields,Pe),!We.keepIsValidating&&Wr(n.validatingFields,Pe),!t.shouldUnregister&&!We.keepDefaultValue&&Wr(o,Pe);A.state.next({values:ur(u)}),A.state.next(te(te({},n),We.keepDirty?{isDirty:He()}:{})),!We.keepIsValid&&B()},Ve=({disabled:Ue,name:We})=>{(Il(Ue)&&c.mount||Ue||a.disabled.has(We))&&(Ue?a.disabled.add(We):a.disabled.delete(We))},Ge=(Ue,We={})=>{let Pe=Sn(i,Ue);const Bt=Il(We.disabled)||Il(t.disabled);return bs(i,Ue,Ee(te({},Pe||{}),{_f:te(Ee(te({},Pe&&Pe._f?Pe._f:{ref:{name:Ue}}),{name:Ue,mount:!0}),We)})),a.mount.add(Ue),Pe?Ve({disabled:Il(We.disabled)?We.disabled:t.disabled,name:Ue}):Z(Ue,!0,We.value),Ee(te(te({},Bt?{disabled:We.disabled||t.disabled}:{}),t.progressive?{required:!!We.required,min:Lx(We.min),max:Lx(We.max),minLength:Lx(We.minLength),maxLength:Lx(We.maxLength),pattern:Lx(We.pattern)}:{}),{name:Ue,onChange:Qe,onBlur:Qe,ref:Et=>{if(Et){Ge(Ue,We),Pe=Sn(i,Ue);const nn=Ks(Et.value)&&Et.querySelectorAll&&Et.querySelectorAll("input,select,textarea")[0]||Et,yn=GU(nn),ln=Pe._f.refs||[];if(yn?ln.find(At=>At===nn):nn===Pe._f.ref)return;bs(i,Ue,{_f:te(te({},Pe._f),yn?{refs:[...ln.filter(Jw),nn,...Array.isArray(Sn(o,Ue))?[{}]:[]],ref:{type:nn.type,name:Ue}}:{ref:nn})}),Z(Ue,!1,void 0,nn)}else Pe=Sn(i,Ue,{}),Pe._f&&(Pe._f.mount=!1),(t.shouldUnregister||We.shouldUnregister)&&!(b5(a.array,Ue)&&c.action)&&a.unMount.add(Ue)}})},Dt=()=>t.shouldFocusError&&ny(i,et,a.mount),Lt=Ue=>{Il(Ue)&&(A.state.next({disabled:Ue}),ny(i,(We,Pe)=>{const Bt=Sn(i,Pe);Bt&&(We.disabled=Bt._f.disabled||Ue,Array.isArray(Bt._f.refs)&&Bt._f.refs.forEach(Et=>{Et.disabled=Bt._f.disabled||Ue}))},0,!1))},It=(Ue,We)=>Pe=>Gt(null,null,function*(){let Bt;Pe&&(Pe.preventDefault&&Pe.preventDefault(),Pe.persist&&Pe.persist());let Et=ur(u);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:nn,values:yn}=yield ge();n.errors=nn,Et=yn}else yield pe(i);if(a.disabled.size)for(const nn of a.disabled)bs(Et,nn,void 0);if(Wr(n.errors,"root"),fo(n.errors)){A.state.next({errors:{}});try{yield Ue(Et,Pe)}catch(nn){Bt=nn}}else We&&(yield We(te({},n.errors),Pe)),Dt(),setTimeout(Dt);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:fo(n.errors)&&!Bt,submitCount:n.submitCount+1,errors:n.errors}),Bt)throw Bt}),Ot=(Ue,We={})=>{Sn(i,Ue)&&(Ks(We.defaultValue)?De(Ue,ur(Sn(o,Ue))):(De(Ue,We.defaultValue),bs(o,Ue,ur(We.defaultValue))),We.keepTouched||Wr(n.touchedFields,Ue),We.keepDirty||(Wr(n.dirtyFields,Ue),n.isDirty=We.defaultValue?He(Ue,ur(Sn(o,Ue))):He()),We.keepError||(Wr(n.errors,Ue),S.isValid&&B()),A.state.next(te({},n)))},en=(Ue,We={})=>{const Pe=Ue?ur(Ue):o,Bt=ur(Pe),Et=fo(Ue),nn=Et?o:Bt;if(We.keepDefaultValues||(o=Pe),!We.keepValues){if(We.keepDirtyValues){const yn=new Set([...a.mount,...Object.keys(Fx(o,u))]);for(const ln of Array.from(yn))Sn(n.dirtyFields,ln)?bs(nn,ln,Sn(u,ln)):De(ln,Sn(nn,ln))}else{if(vC&&Ks(Ue))for(const yn of a.mount){const ln=Sn(i,yn);if(ln&&ln._f){const At=Array.isArray(ln._f.refs)?ln._f.refs[0]:ln._f.ref;if(Uv(At)){const ke=At.closest("form");if(ke){ke.reset();break}}}}for(const yn of a.mount)De(yn,Sn(nn,yn))}u=ur(nn),A.array.next({values:te({},nn)}),A.state.next({values:te({},nn)})}a={mount:We.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!S.isValid||!!We.keepIsValid||!!We.keepDirtyValues,c.watch=!!t.shouldUnregister,A.state.next({submitCount:We.keepSubmitCount?n.submitCount:0,isDirty:Et?!1:We.keepDirty?n.isDirty:!!(We.keepDefaultValues&&!Rf(Ue,o)),isSubmitted:We.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Et?{}:We.keepDirtyValues?We.keepDefaultValues&&u?Fx(o,u):n.dirtyFields:We.keepDefaultValues&&Ue?Fx(o,Ue):We.keepDirty?n.dirtyFields:{},touchedFields:We.keepTouched?n.touchedFields:{},errors:We.keepErrors?n.errors:{},isSubmitSuccessful:We.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},_n=(Ue,We)=>en(gu(Ue)?Ue(u):Ue,We),Yn=(Ue,We={})=>{const Pe=Sn(i,Ue),Bt=Pe&&Pe._f;if(Bt){const Et=Bt.refs?Bt.refs[0]:Bt.ref;Et.focus&&(Et.focus(),We.shouldSelect&&gu(Et.select)&&Et.select())}},Hn=Ue=>{n=te(te({},n),Ue)},on={control:{register:Ge,unregister:pt,getFieldState:Xe,handleSubmit:It,setError:Me,_subscribe:ut,_runSchema:ge,_getWatch:Ye,_getDirty:He,_setValid:B,_setFieldArray:q,_setDisabledField:Ve,_setErrors:Q,_getFieldArray:rt,_reset:en,_resetDefaultValues:()=>gu(t.defaultValues)&&t.defaultValues().then(Ue=>{_n(Ue,t.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:Ie,_disableForm:Lt,_subjects:A,_proxyFormState:S,get _fields(){return i},get _formValues(){return u},get _state(){return c},set _state(Ue){c=Ue},get _defaultValues(){return o},get _names(){return a},set _names(Ue){a=Ue},get _formState(){return n},get _options(){return t},set _options(Ue){t=te(te({},t),Ue)}},subscribe:dt,trigger:Nt,register:Ge,handleSubmit:It,watch:ot,setValue:De,getValues:fe,reset:_n,resetField:Ot,clearErrors:tt,unregister:pt,setError:Me,setFocus:Yn,getFieldState:Xe};return Ee(te({},on),{formControl:on})}var Ef=()=>{const e=typeof performance=="undefined"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(Math.random()*16+e)%16|0;return(t=="x"?n:n&3|8).toString(16)})},e2=(e,t,n={})=>n.shouldFocus||Ks(n.shouldFocus)?n.focusName||`${e}.${Ks(n.focusIndex)?t:n.focusIndex}.`:"",t2=(e,t)=>[...e,...cl(t)],n2=e=>Array.isArray(e)?e.map(()=>{}):void 0;function i2(e,t,n){return[...e.slice(0,t),...cl(n),...e.slice(t)]}var s2=(e,t,n)=>Array.isArray(e)?(Ks(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[],r2=(e,t)=>[...cl(t),...cl(e)];function s$(e,t){let n=0;const i=[...e];for(const o of t)i.splice(o-n,1),n++;return i_(i).length?i:[]}var a2=(e,t)=>Ks(t)?[]:s$(e,cl(t).sort((n,i)=>n-i)),o2=(e,t,n)=>{[e[t],e[n]]=[e[n],e[t]]},IE=(e,t,n)=>(e[t]=n,e);function Lg(e){const t=E1(),{control:n=t.control,name:i,keyName:o="id",shouldUnregister:u,rules:c}=e,[a,g]=Pt.useState(n._getFieldArray(i)),_=Pt.useRef(n._getFieldArray(i).map(Ef)),S=Pt.useRef(a),E=Pt.useRef(i),A=Pt.useRef(!1);E.current=i,S.current=a,n._names.array.add(i),c&&n.register(i,c),Pt.useEffect(()=>n._subjects.array.subscribe({next:({values:le,name:ge})=>{if(ge===E.current||!ge){const he=Sn(le,E.current);Array.isArray(he)&&(g(he),_.current=he.map(Ef))}}}).unsubscribe,[n]);const N=Pt.useCallback(le=>{A.current=!0,n._setFieldArray(i,le)},[n,i]),z=(le,ge)=>{const he=cl(ur(le)),pe=t2(n._getFieldArray(i),he);n._names.focus=e2(i,pe.length-1,ge),_.current=t2(_.current,he.map(Ef)),N(pe),g(pe),n._setFieldArray(i,pe,t2,{argA:n2(le)})},B=(le,ge)=>{const he=cl(ur(le)),pe=r2(n._getFieldArray(i),he);n._names.focus=e2(i,0,ge),_.current=r2(_.current,he.map(Ef)),N(pe),g(pe),n._setFieldArray(i,pe,r2,{argA:n2(le)})},$=le=>{const ge=a2(n._getFieldArray(i),le);_.current=a2(_.current,le),N(ge),g(ge),!Array.isArray(Sn(n._fields,i))&&bs(n._fields,i,void 0),n._setFieldArray(i,ge,a2,{argA:le})},q=(le,ge,he)=>{const pe=cl(ur(ge)),Ie=i2(n._getFieldArray(i),le,pe);n._names.focus=e2(i,le,he),_.current=i2(_.current,le,pe.map(Ef)),N(Ie),g(Ie),n._setFieldArray(i,Ie,i2,{argA:le,argB:n2(ge)})},W=(le,ge)=>{const he=n._getFieldArray(i);o2(he,le,ge),o2(_.current,le,ge),N(he),g(he),n._setFieldArray(i,he,o2,{argA:le,argB:ge},!1)},Q=(le,ge)=>{const he=n._getFieldArray(i);s2(he,le,ge),s2(_.current,le,ge),N(he),g(he),n._setFieldArray(i,he,s2,{argA:le,argB:ge},!1)},Z=(le,ge)=>{const he=ur(ge),pe=IE(n._getFieldArray(i),le,he);_.current=[...pe].map((Ie,He)=>!Ie||He===le?Ef():_.current[He]),N(pe),g([...pe]),n._setFieldArray(i,pe,IE,{argA:le,argB:he},!0,!1)},K=le=>{const ge=cl(ur(le));_.current=ge.map(Ef),N([...ge]),g([...ge]),n._setFieldArray(i,[...ge],he=>he,{},!0,!1)};return Pt.useEffect(()=>{if(n._state.action=!1,FS(i,n._names)&&n._subjects.state.next(te({},n._formState)),A.current&&(!Zg(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!Zg(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([i]).then(le=>{const ge=Sn(le.errors,i),he=Sn(n._formState.errors,i);(he?!ge&&he.type||ge&&(he.type!==ge.type||he.message!==ge.message):ge&&ge.type)&&(ge?bs(n._formState.errors,i,ge):Wr(n._formState.errors,i),n._subjects.state.next({errors:n._formState.errors}))});else{const le=Sn(n._fields,i);le&&le._f&&!(Zg(n._options.reValidateMode).isOnSubmit&&Zg(n._options.mode).isOnSubmit)&&LS(le,n._names.disabled,n._formValues,n._options.criteriaMode===_c.all,n._options.shouldUseNativeValidation,!0).then(ge=>!fo(ge)&&n._subjects.state.next({errors:A5(n._formState.errors,ge,i)}))}n._subjects.state.next({name:i,values:ur(n._formValues)}),n._names.focus&&ny(n._fields,(le,ge)=>{if(n._names.focus&&ge.startsWith(n._names.focus)&&le.focus)return le.focus(),1}),n._names.focus="",n._setValid(),A.current=!1},[a,i,n]),Pt.useEffect(()=>(!Sn(n._formValues,i)&&n._setFieldArray(i),()=>{const le=(ge,he)=>{const pe=Sn(n._fields,ge);pe&&pe._f&&(pe._f.mount=he)};n._options.shouldUnregister||u?n.unregister(i):le(i,!1)}),[i,n,o,u]),{swap:Pt.useCallback(W,[N,i,n]),move:Pt.useCallback(Q,[N,i,n]),prepend:Pt.useCallback(B,[N,i,n]),append:Pt.useCallback(z,[N,i,n]),remove:Pt.useCallback($,[N,i,n]),insert:Pt.useCallback(q,[N,i,n]),update:Pt.useCallback(Z,[N,i,n]),replace:Pt.useCallback(K,[N,i,n]),fields:Pt.useMemo(()=>a.map((le,ge)=>Ee(te({},le),{[o]:_.current[ge]||Ef()})),[a,o])}}function BS(e={}){const t=Pt.useRef(void 0),n=Pt.useRef(void 0),[i,o]=Pt.useState({isDirty:!1,isValidating:!1,isLoading:gu(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:gu(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=Ee(te({},e.formControl?e.formControl:i$(e)),{formState:i}),e.formControl&&e.defaultValues&&!gu(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const u=t.current.control;return u._options=e,SC(()=>{const c=u._subscribe({formState:u._proxyFormState,callback:()=>o(te({},u._formState)),reRenderRoot:!0});return o(a=>Ee(te({},a),{isReady:!0})),u._formState.isReady=!0,c},[u]),Pt.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),Pt.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode),e.errors&&!fo(e.errors)&&u._setErrors(e.errors)},[u,e.errors,e.mode,e.reValidateMode]),Pt.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),Pt.useEffect(()=>{if(u._proxyFormState.isDirty){const c=u._getDirty();c!==i.isDirty&&u._subjects.state.next({isDirty:c})}},[u,i.isDirty]),Pt.useEffect(()=>{e.values&&!Rf(e.values,n.current)?(u._reset(e.values,u._options.resetOptions),n.current=e.values,o(c=>te({},c))):u._resetDefaultValues()},[u,e.values]),Pt.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next(te({},u._formState))),u._removeUnmounted()}),t.current.formState=S5(i,u),t.current}function r$(e){return xi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm7.931 9h-2.764a14.67 14.67 0 0 0-1.792-6.243A8.013 8.013 0 0 1 19.931 11zM12.53 4.027c1.035 1.364 2.427 3.78 2.627 6.973H9.03c.139-2.596.994-5.028 2.451-6.974.172-.01.344-.026.519-.026.179 0 .354.016.53.027zm-3.842.7C7.704 6.618 7.136 8.762 7.03 11H4.069a8.013 8.013 0 0 1 4.619-6.273zM4.069 13h2.974c.136 2.379.665 4.478 1.556 6.23A8.01 8.01 0 0 1 4.069 13zm7.381 6.973C10.049 18.275 9.222 15.896 9.041 13h6.113c-.208 2.773-1.117 5.196-2.603 6.972-.182.012-.364.028-.551.028-.186 0-.367-.016-.55-.027zm4.011-.772c.955-1.794 1.538-3.901 1.691-6.201h2.778a8.005 8.005 0 0 1-4.469 6.201z"},child:[]}]})(e)}function a$(e){return xi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z"},child:[]}]})(e)}function o$(e){return xi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"},child:[]},{tag:"path",attr:{d:"M11 11h2v6h-2zm0-4h2v2h-2z"},child:[]}]})(e)}function l$(e){return xi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C9.243 2 7 4.243 7 7v3H6c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-8c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5zm6 10 .002 8H6v-8h12zm-9-2V7c0-1.654 1.346-3 3-3s3 1.346 3 3v3H9z"},child:[]}]})(e)}const c$=({className:e})=>l.jsxs("svg",{className:y1("animate-spin h-4 w-4 dark:text-white text-gray-900",e),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});var u$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ui=u$.reduce((e,t)=>{const n=vm(`Primitive.${t}`),i=L.forwardRef((o,u)=>{const _=o,{asChild:c}=_,a=Jt(_,["asChild"]),g=c?n:t;return typeof window!="undefined"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(g,Ee(te({},a),{ref:u}))});return i.displayName=`Primitive.${t}`,Ee(te({},e),{[t]:i})},{});function d$(e,t){e&&X0.flushSync(()=>e.dispatchEvent(t))}var P5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),h$="VisuallyHidden",f$=L.forwardRef((e,t)=>l.jsx(Ui.span,Ee(te({},e),{ref:t,style:te(te({},P5),e.style)})));f$.displayName=h$;function p$(e,t){const n=L.createContext(t),i=u=>{const _=u,{children:c}=_,a=Jt(_,["children"]),g=L.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:g,children:c})};i.displayName=e+"Provider";function o(u){const c=L.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${u}\` must be used within \`${e}\``)}return[i,o]}function s_(e,t=[]){let n=[];function i(u,c){const a=L.createContext(c),g=n.length;n=[...n,c];const _=E=>{var W;const q=E,{scope:A,children:N}=q,z=Jt(q,["scope","children"]),B=((W=A==null?void 0:A[e])==null?void 0:W[g])||a,$=L.useMemo(()=>z,Object.values(z));return l.jsx(B.Provider,{value:$,children:N})};_.displayName=u+"Provider";function S(E,A){var B;const N=((B=A==null?void 0:A[e])==null?void 0:B[g])||a,z=L.useContext(N);if(z)return z;if(c!==void 0)return c;throw new Error(`\`${E}\` must be used within \`${u}\``)}return[_,S]}const o=()=>{const u=n.map(c=>L.createContext(c));return function(a){const g=(a==null?void 0:a[e])||u;return L.useMemo(()=>({[`__scope${e}`]:Ee(te({},a),{[e]:g})}),[a,g])}};return o.scopeName=e,[i,m$(o,...t)]}function m$(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(u){const c=i.reduce((a,{useScope:g,scopeName:_})=>{const E=g(u)[`__scope${_}`];return te(te({},a),E)},{});return L.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}function g$(e){const t=e+"CollectionProvider",[n,i]=s_(t),[o,u]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=B=>{const{scope:$,children:q}=B,W=Pt.useRef(null),Q=Pt.useRef(new Map).current;return l.jsx(o,{scope:$,itemMap:Q,collectionRef:W,children:q})};c.displayName=t;const a=e+"CollectionSlot",g=vm(a),_=Pt.forwardRef((B,$)=>{const{scope:q,children:W}=B,Q=u(a,q),Z=hr($,Q.collectionRef);return l.jsx(g,{ref:Z,children:W})});_.displayName=a;const S=e+"CollectionItemSlot",E="data-radix-collection-item",A=vm(S),N=Pt.forwardRef((B,$)=>{const ge=B,{scope:q,children:W}=ge,Q=Jt(ge,["scope","children"]),Z=Pt.useRef(null),K=hr($,Z),le=u(S,q);return Pt.useEffect(()=>(le.itemMap.set(Z,te({ref:Z},Q)),()=>void le.itemMap.delete(Z))),l.jsx(A,{[E]:"",ref:K,children:W})});N.displayName=S;function z(B){const $=u(e+"CollectionConsumer",B);return Pt.useCallback(()=>{const W=$.collectionRef.current;if(!W)return[];const Q=Array.from(W.querySelectorAll(`[${E}]`));return Array.from($.itemMap.values()).sort((le,ge)=>Q.indexOf(le.ref.current)-Q.indexOf(ge.ref.current))},[$.collectionRef,$.itemMap])}return[{Provider:c,Slot:_,ItemSlot:N},z,i]}function gs(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}var _o=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},y$=aA[" useInsertionEffect ".trim().toString()]||_o;function qv({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[o,u,c]=x$({defaultProp:t,onChange:n}),a=e!==void 0,g=a?e:o;{const S=L.useRef(e!==void 0);L.useEffect(()=>{const E=S.current;E!==a&&console.warn(`${i} is changing from ${E?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),S.current=a},[a,i])}const _=L.useCallback(S=>{var E;if(a){const A=_$(S)?S(e):S;A!==e&&((E=c.current)==null||E.call(c,A))}else u(S)},[a,e,u,c]);return[g,_]}function x$({defaultProp:e,onChange:t}){const[n,i]=L.useState(e),o=L.useRef(n),u=L.useRef(t);return y$(()=>{u.current=t},[t]),L.useEffect(()=>{var c;o.current!==n&&((c=u.current)==null||c.call(u,n),o.current=n)},[n,o]),[n,i,u]}function _$(e){return typeof e=="function"}function b$(e,t){return L.useReducer((n,i)=>{const o=t[n][i];return o!=null?o:n},e)}var My=e=>{const{present:t,children:n}=e,i=v$(t),o=typeof n=="function"?n({present:i.isPresent}):L.Children.only(n),u=hr(i.ref,w$(o));return typeof n=="function"||i.isPresent?L.cloneElement(o,{ref:u}):null};My.displayName="Presence";function v$(e){const[t,n]=L.useState(),i=L.useRef(null),o=L.useRef(e),u=L.useRef("none"),c=e?"mounted":"unmounted",[a,g]=b$(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const _=mb(i.current);u.current=a==="mounted"?_:"none"},[a]),_o(()=>{const _=i.current,S=o.current;if(S!==e){const A=u.current,N=mb(_);e?g("MOUNT"):N==="none"||(_==null?void 0:_.display)==="none"?g("UNMOUNT"):g(S&&A!==N?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,g]),_o(()=>{var _;if(t){let S;const E=(_=t.ownerDocument.defaultView)!=null?_:window,A=z=>{const $=mb(i.current).includes(z.animationName);if(z.target===t&&$&&(g("ANIMATION_END"),!o.current)){const q=t.style.animationFillMode;t.style.animationFillMode="forwards",S=E.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=q)})}},N=z=>{z.target===t&&(u.current=mb(i.current))};return t.addEventListener("animationstart",N),t.addEventListener("animationcancel",A),t.addEventListener("animationend",A),()=>{E.clearTimeout(S),t.removeEventListener("animationstart",N),t.removeEventListener("animationcancel",A),t.removeEventListener("animationend",A)}}else g("ANIMATION_END")},[t,g]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:L.useCallback(_=>{i.current=_?getComputedStyle(_):null,n(_)},[])}}function mb(e){return(e==null?void 0:e.animationName)||"none"}function w$(e){var i,o;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var S$=aA[" useId ".trim().toString()]||(()=>{}),j$=0;function Fl(e){const[t,n]=L.useState(S$());return _o(()=>{n(i=>i!=null?i:String(j$++))},[e]),e||(t?`radix-${t}`:"")}var C$=L.createContext(void 0);function T$(e){const t=L.useContext(C$);return e||t||"ltr"}function Cm(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>{var i;return(i=t.current)==null?void 0:i.call(t,...n)},[])}function k$(e,t=globalThis==null?void 0:globalThis.document){const n=Cm(e);L.useEffect(()=>{const i=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var E$="DismissableLayer",VS="dismissableLayer.update",M$="dismissableLayer.pointerDownOutside",N$="dismissableLayer.focusOutside",OE,R5=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),M1=L.forwardRef((e,t)=>{var he;const ge=e,{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:u,onInteractOutside:c,onDismiss:a}=ge,g=Jt(ge,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),_=L.useContext(R5),[S,E]=L.useState(null),A=(he=S==null?void 0:S.ownerDocument)!=null?he:globalThis==null?void 0:globalThis.document,[,N]=L.useState({}),z=hr(t,pe=>E(pe)),B=Array.from(_.layers),[$]=[..._.layersWithOutsidePointerEventsDisabled].slice(-1),q=B.indexOf($),W=S?B.indexOf(S):-1,Q=_.layersWithOutsidePointerEventsDisabled.size>0,Z=W>=q,K=R$(pe=>{const Ie=pe.target,He=[..._.branches].some(Ye=>Ye.contains(Ie));!Z||He||(o==null||o(pe),c==null||c(pe),pe.defaultPrevented||a==null||a())},A),le=D$(pe=>{const Ie=pe.target;[..._.branches].some(Ye=>Ye.contains(Ie))||(u==null||u(pe),c==null||c(pe),pe.defaultPrevented||a==null||a())},A);return k$(pe=>{W===_.layers.size-1&&(i==null||i(pe),!pe.defaultPrevented&&a&&(pe.preventDefault(),a()))},A),L.useEffect(()=>{if(S)return n&&(_.layersWithOutsidePointerEventsDisabled.size===0&&(OE=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),_.layersWithOutsidePointerEventsDisabled.add(S)),_.layers.add(S),FE(),()=>{n&&_.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=OE)}},[S,A,n,_]),L.useEffect(()=>()=>{S&&(_.layers.delete(S),_.layersWithOutsidePointerEventsDisabled.delete(S),FE())},[S,_]),L.useEffect(()=>{const pe=()=>N({});return document.addEventListener(VS,pe),()=>document.removeEventListener(VS,pe)},[]),l.jsx(Ui.div,Ee(te({},g),{ref:z,style:te({pointerEvents:Q?Z?"auto":"none":void 0},e.style),onFocusCapture:gs(e.onFocusCapture,le.onFocusCapture),onBlurCapture:gs(e.onBlurCapture,le.onBlurCapture),onPointerDownCapture:gs(e.onPointerDownCapture,K.onPointerDownCapture)}))});M1.displayName=E$;var A$="DismissableLayerBranch",P$=L.forwardRef((e,t)=>{const n=L.useContext(R5),i=L.useRef(null),o=hr(t,i);return L.useEffect(()=>{const u=i.current;if(u)return n.branches.add(u),()=>{n.branches.delete(u)}},[n.branches]),l.jsx(Ui.div,Ee(te({},e),{ref:o}))});P$.displayName=A$;function R$(e,t=globalThis==null?void 0:globalThis.document){const n=Cm(e),i=L.useRef(!1),o=L.useRef(()=>{});return L.useEffect(()=>{const u=a=>{if(a.target&&!i.current){let g=function(){D5(M$,n,_,{discrete:!0})};const _={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=g,t.addEventListener("click",o.current,{once:!0})):g()}else t.removeEventListener("click",o.current);i.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",u),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function D$(e,t=globalThis==null?void 0:globalThis.document){const n=Cm(e),i=L.useRef(!1);return L.useEffect(()=>{const o=u=>{u.target&&!i.current&&D5(N$,n,{originalEvent:u},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function FE(){const e=new CustomEvent(VS);document.dispatchEvent(e)}function D5(e,t,n,{discrete:i}){const o=n.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?d$(o,u):o.dispatchEvent(u)}var l2="focusScope.autoFocusOnMount",c2="focusScope.autoFocusOnUnmount",LE={bubbles:!1,cancelable:!0},z$="FocusScope",N1=L.forwardRef((e,t)=>{const B=e,{loop:n=!1,trapped:i=!1,onMountAutoFocus:o,onUnmountAutoFocus:u}=B,c=Jt(B,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[a,g]=L.useState(null),_=Cm(o),S=Cm(u),E=L.useRef(null),A=hr(t,$=>g($)),N=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(i){let $=function(Z){if(N.paused||!a)return;const K=Z.target;a.contains(K)?E.current=K:Af(E.current,{select:!0})},q=function(Z){if(N.paused||!a)return;const K=Z.relatedTarget;K!==null&&(a.contains(K)||Af(E.current,{select:!0}))},W=function(Z){if(document.activeElement===document.body)for(const le of Z)le.removedNodes.length>0&&Af(a)};document.addEventListener("focusin",$),document.addEventListener("focusout",q);const Q=new MutationObserver(W);return a&&Q.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",$),document.removeEventListener("focusout",q),Q.disconnect()}}},[i,a,N.paused]),L.useEffect(()=>{if(a){VE.add(N);const $=document.activeElement;if(!a.contains($)){const W=new CustomEvent(l2,LE);a.addEventListener(l2,_),a.dispatchEvent(W),W.defaultPrevented||(I$(V$(z5(a)),{select:!0}),document.activeElement===$&&Af(a))}return()=>{a.removeEventListener(l2,_),setTimeout(()=>{const W=new CustomEvent(c2,LE);a.addEventListener(c2,S),a.dispatchEvent(W),W.defaultPrevented||Af($!=null?$:document.body,{select:!0}),a.removeEventListener(c2,S),VE.remove(N)},0)}}},[a,_,S,N]);const z=L.useCallback($=>{if(!n&&!i||N.paused)return;const q=$.key==="Tab"&&!$.altKey&&!$.ctrlKey&&!$.metaKey,W=document.activeElement;if(q&&W){const Q=$.currentTarget,[Z,K]=O$(Q);Z&&K?!$.shiftKey&&W===K?($.preventDefault(),n&&Af(Z,{select:!0})):$.shiftKey&&W===Z&&($.preventDefault(),n&&Af(K,{select:!0})):W===Q&&$.preventDefault()}},[n,i,N.paused]);return l.jsx(Ui.div,Ee(te({tabIndex:-1},c),{ref:A,onKeyDown:z}))});N1.displayName=z$;function I$(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(Af(i,{select:t}),document.activeElement!==n)return}function O$(e){const t=z5(e),n=BE(t,e),i=BE(t.reverse(),e);return[n,i]}function z5(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function BE(e,t){for(const n of e)if(!F$(n,{upTo:t}))return n}function F$(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function L$(e){return e instanceof HTMLInputElement&&"select"in e}function Af(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&L$(e)&&t&&e.select()}}var VE=B$();function B$(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=UE(e,t),e.unshift(t)},remove(t){var n;e=UE(e,t),(n=e[0])==null||n.resume()}}}function UE(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function V$(e){return e.filter(t=>t.tagName!=="A")}var U$="Portal",A1=L.forwardRef((e,t)=>{var g;const a=e,{container:n}=a,i=Jt(a,["container"]),[o,u]=L.useState(!1);_o(()=>u(!0),[]);const c=n||o&&((g=globalThis==null?void 0:globalThis.document)==null?void 0:g.body);return c?tP.createPortal(l.jsx(Ui.div,Ee(te({},i),{ref:t})),c):null});A1.displayName=U$;var u2=0;function TC(){L.useEffect(()=>{var t,n;const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=e[0])!=null?t:$E()),document.body.insertAdjacentElement("beforeend",(n=e[1])!=null?n:$E()),u2++,()=>{u2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),u2--}},[])}function $E(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fd=function(){return fd=Object.assign||function(t){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},fd.apply(this,arguments)};function I5(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function $$(e,t,n){if(n||arguments.length===2)for(var i=0,o=t.length,u;i<o;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))}var sv="right-scroll-bar-position",rv="width-before-scroll-bar",H$="with-scroll-bars-hidden",q$="--removed-body-scroll-bar-size";function d2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function G$(e,t){var n=L.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var o=n.value;o!==i&&(n.value=i,n.callback(i,o))}}}})[0];return n.callback=t,n.facade}var W$=typeof window!="undefined"?L.useLayoutEffect:L.useEffect,HE=new WeakMap;function Z$(e,t){var n=G$(null,function(i){return e.forEach(function(o){return d2(o,i)})});return W$(function(){var i=HE.get(n);if(i){var o=new Set(i),u=new Set(e),c=n.current;o.forEach(function(a){u.has(a)||d2(a,null)}),u.forEach(function(a){o.has(a)||d2(a,c)})}HE.set(n,e)},[e]),n}function Y$(e){return e}function X$(e,t){t===void 0&&(t=Y$);var n=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(u){var c=t(u,i);return n.push(c),function(){n=n.filter(function(a){return a!==c})}},assignSyncMedium:function(u){for(i=!0;n.length;){var c=n;n=[],c.forEach(u)}n={push:function(a){return u(a)},filter:function(){return n}}},assignMedium:function(u){i=!0;var c=[];if(n.length){var a=n;n=[],a.forEach(u),c=n}var g=function(){var S=c;c=[],S.forEach(u)},_=function(){return Promise.resolve().then(g)};_(),n={push:function(S){c.push(S),_()},filter:function(S){return c=c.filter(S),n}}}};return o}function K$(e){e===void 0&&(e={});var t=X$(null);return t.options=fd({async:!0,ssr:!1},e),t}var O5=function(e){var t=e.sideCar,n=I5(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return L.createElement(i,fd({},n))};O5.isSideCarExport=!0;function Q$(e,t){return e.useMedium(t),O5}var F5=K$(),h2=function(){},P1=L.forwardRef(function(e,t){var n=L.useRef(null),i=L.useState({onScrollCapture:h2,onWheelCapture:h2,onTouchMoveCapture:h2}),o=i[0],u=i[1],c=e.forwardProps,a=e.children,g=e.className,_=e.removeScrollBar,S=e.enabled,E=e.shards,A=e.sideCar,N=e.noRelative,z=e.noIsolation,B=e.inert,$=e.allowPinchZoom,q=e.as,W=q===void 0?"div":q,Q=e.gapMode,Z=I5(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),K=A,le=Z$([n,t]),ge=fd(fd({},Z),o);return L.createElement(L.Fragment,null,S&&L.createElement(K,{sideCar:F5,removeScrollBar:_,shards:E,noRelative:N,noIsolation:z,inert:B,setCallbacks:u,allowPinchZoom:!!$,lockRef:n,gapMode:Q}),c?L.cloneElement(L.Children.only(a),fd(fd({},ge),{ref:le})):L.createElement(W,fd({},ge,{className:g,ref:le}),a))});P1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};P1.classNames={fullWidth:rv,zeroRight:sv};var J$=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function eH(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=J$();return t&&e.setAttribute("nonce",t),e}function tH(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function nH(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var iH=function(){var e=0,t=null;return{add:function(n){e==0&&(t=eH())&&(tH(t,n),nH(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},sH=function(){var e=iH();return function(t,n){L.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},L5=function(){var e=sH(),t=function(n){var i=n.styles,o=n.dynamic;return e(i,o),null};return t},rH={left:0,top:0,right:0,gap:0},f2=function(e){return parseInt(e||"",10)||0},aH=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[f2(n),f2(i),f2(o)]},oH=function(e){if(e===void 0&&(e="margin"),typeof window=="undefined")return rH;var t=aH(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},lH=L5(),iy="data-scroll-locked",cH=function(e,t,n,i){var o=e.left,u=e.top,c=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(H$,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(iy,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sv,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(rv,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(sv," .").concat(sv,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(rv," .").concat(rv,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(iy,`] {
    `).concat(q$,": ").concat(a,`px;
  }
`)},qE=function(){var e=parseInt(document.body.getAttribute(iy)||"0",10);return isFinite(e)?e:0},uH=function(){L.useEffect(function(){return document.body.setAttribute(iy,(qE()+1).toString()),function(){var e=qE()-1;e<=0?document.body.removeAttribute(iy):document.body.setAttribute(iy,e.toString())}},[])},dH=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,o=i===void 0?"margin":i;uH();var u=L.useMemo(function(){return oH(o)},[o]);return L.createElement(lH,{styles:cH(u,!t,o,n?"":"!important")})},US=!1;if(typeof window!="undefined")try{var gb=Object.defineProperty({},"passive",{get:function(){return US=!0,!0}});window.addEventListener("test",gb,gb),window.removeEventListener("test",gb,gb)}catch(e){US=!1}var Bg=US?{passive:!1}:!1,hH=function(e){return e.tagName==="TEXTAREA"},B5=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!hH(e)&&n[t]==="visible")},fH=function(e){return B5(e,"overflowY")},pH=function(e){return B5(e,"overflowX")},GE=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot!="undefined"&&i instanceof ShadowRoot&&(i=i.host);var o=V5(e,i);if(o){var u=U5(e,i),c=u[1],a=u[2];if(c>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},mH=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},gH=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},V5=function(e,t){return e==="v"?fH(t):pH(t)},U5=function(e,t){return e==="v"?mH(t):gH(t)},yH=function(e,t){return e==="h"&&t==="rtl"?-1:1},xH=function(e,t,n,i,o){var u=yH(e,window.getComputedStyle(t).direction),c=u*i,a=n.target,g=t.contains(a),_=!1,S=c>0,E=0,A=0;do{var N=U5(e,a),z=N[0],B=N[1],$=N[2],q=B-$-u*z;(z||q)&&V5(e,a)&&(E+=q,A+=z),a=a.parentNode.host||a.parentNode}while(!g&&a!==document.body||g&&(t.contains(a)||t===a));return(S&&Math.abs(E)<1||!S&&Math.abs(A)<1)&&(_=!0),_},yb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},WE=function(e){return[e.deltaX,e.deltaY]},ZE=function(e){return e&&"current"in e?e.current:e},_H=function(e,t){return e[0]===t[0]&&e[1]===t[1]},bH=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vH=0,Vg=[];function wH(e){var t=L.useRef([]),n=L.useRef([0,0]),i=L.useRef(),o=L.useState(vH++)[0],u=L.useState(L5)[0],c=L.useRef(e);L.useEffect(function(){c.current=e},[e]),L.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var B=$$([e.lockRef.current],(e.shards||[]).map(ZE),!0).filter(Boolean);return B.forEach(function($){return $.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),B.forEach(function($){return $.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=L.useCallback(function(B,$){if("touches"in B&&B.touches.length===2||B.type==="wheel"&&B.ctrlKey)return!c.current.allowPinchZoom;var q=yb(B),W=n.current,Q="deltaX"in B?B.deltaX:W[0]-q[0],Z="deltaY"in B?B.deltaY:W[1]-q[1],K,le=B.target,ge=Math.abs(Q)>Math.abs(Z)?"h":"v";if("touches"in B&&ge==="h"&&le.type==="range")return!1;var he=GE(ge,le);if(!he)return!0;if(he?K=ge:(K=ge==="v"?"h":"v",he=GE(ge,le)),!he)return!1;if(!i.current&&"changedTouches"in B&&(Q||Z)&&(i.current=K),!K)return!0;var pe=i.current||K;return xH(pe,$,B,pe==="h"?Q:Z)},[]),g=L.useCallback(function(B){var $=B;if(!(!Vg.length||Vg[Vg.length-1]!==u)){var q="deltaY"in $?WE($):yb($),W=t.current.filter(function(K){return K.name===$.type&&(K.target===$.target||$.target===K.shadowParent)&&_H(K.delta,q)})[0];if(W&&W.should){$.cancelable&&$.preventDefault();return}if(!W){var Q=(c.current.shards||[]).map(ZE).filter(Boolean).filter(function(K){return K.contains($.target)}),Z=Q.length>0?a($,Q[0]):!c.current.noIsolation;Z&&$.cancelable&&$.preventDefault()}}},[]),_=L.useCallback(function(B,$,q,W){var Q={name:B,delta:$,target:q,should:W,shadowParent:SH(q)};t.current.push(Q),setTimeout(function(){t.current=t.current.filter(function(Z){return Z!==Q})},1)},[]),S=L.useCallback(function(B){n.current=yb(B),i.current=void 0},[]),E=L.useCallback(function(B){_(B.type,WE(B),B.target,a(B,e.lockRef.current))},[]),A=L.useCallback(function(B){_(B.type,yb(B),B.target,a(B,e.lockRef.current))},[]);L.useEffect(function(){return Vg.push(u),e.setCallbacks({onScrollCapture:E,onWheelCapture:E,onTouchMoveCapture:A}),document.addEventListener("wheel",g,Bg),document.addEventListener("touchmove",g,Bg),document.addEventListener("touchstart",S,Bg),function(){Vg=Vg.filter(function(B){return B!==u}),document.removeEventListener("wheel",g,Bg),document.removeEventListener("touchmove",g,Bg),document.removeEventListener("touchstart",S,Bg)}},[]);var N=e.removeScrollBar,z=e.inert;return L.createElement(L.Fragment,null,z?L.createElement(u,{styles:bH(o)}):null,N?L.createElement(dH,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function SH(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const jH=Q$(F5,wH);var R1=L.forwardRef(function(e,t){return L.createElement(P1,fd({},e,{ref:t,sideCar:jH}))});R1.classNames=P1.classNames;var CH=function(e){if(typeof document=="undefined")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ug=new WeakMap,xb=new WeakMap,_b={},p2=0,$5=function(e){return e&&(e.host||$5(e.parentNode))},TH=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=$5(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},kH=function(e,t,n,i){var o=TH(t,Array.isArray(e)?e:[e]);_b[n]||(_b[n]=new WeakMap);var u=_b[n],c=[],a=new Set,g=new Set(o),_=function(E){!E||a.has(E)||(a.add(E),_(E.parentNode))};o.forEach(_);var S=function(E){!E||g.has(E)||Array.prototype.forEach.call(E.children,function(A){if(a.has(A))S(A);else try{var N=A.getAttribute(i),z=N!==null&&N!=="false",B=(Ug.get(A)||0)+1,$=(u.get(A)||0)+1;Ug.set(A,B),u.set(A,$),c.push(A),B===1&&z&&xb.set(A,!0),$===1&&A.setAttribute(n,"true"),z||A.setAttribute(i,"true")}catch(q){console.error("aria-hidden: cannot operate on ",A,q)}})};return S(t),a.clear(),p2++,function(){c.forEach(function(E){var A=Ug.get(E)-1,N=u.get(E)-1;Ug.set(E,A),u.set(E,N),A||(xb.has(E)||E.removeAttribute(i),xb.delete(E)),N||E.removeAttribute(n)}),p2--,p2||(Ug=new WeakMap,Ug=new WeakMap,xb=new WeakMap,_b={})}},kC=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),o=CH(e);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live], script"))),kH(i,o,n,"aria-hidden")):function(){return null}},D1="Dialog",[H5,$ae]=s_(D1),[EH,ju]=H5(D1),q5=e=>{const{__scopeDialog:t,children:n,open:i,defaultOpen:o,onOpenChange:u,modal:c=!0}=e,a=L.useRef(null),g=L.useRef(null),[_,S]=qv({prop:i,defaultProp:o!=null?o:!1,onChange:u,caller:D1});return l.jsx(EH,{scope:t,triggerRef:a,contentRef:g,contentId:Fl(),titleId:Fl(),descriptionId:Fl(),open:_,onOpenChange:S,onOpenToggle:L.useCallback(()=>S(E=>!E),[S]),modal:c,children:n})};q5.displayName=D1;var G5="DialogTrigger",MH=L.forwardRef((e,t)=>{const c=e,{__scopeDialog:n}=c,i=Jt(c,["__scopeDialog"]),o=ju(G5,n),u=hr(t,o.triggerRef);return l.jsx(Ui.button,Ee(te({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":NC(o.open)},i),{ref:u,onClick:gs(e.onClick,o.onOpenToggle)}))});MH.displayName=G5;var EC="DialogPortal",[NH,W5]=H5(EC,{forceMount:void 0}),Z5=e=>{const{__scopeDialog:t,forceMount:n,children:i,container:o}=e,u=ju(EC,t);return l.jsx(NH,{scope:t,forceMount:n,children:L.Children.map(i,c=>l.jsx(My,{present:n||u.open,children:l.jsx(A1,{asChild:!0,container:o,children:c})}))})};Z5.displayName=EC;var Gv="DialogOverlay",Y5=L.forwardRef((e,t)=>{const n=W5(Gv,e.__scopeDialog),c=e,{forceMount:i=n.forceMount}=c,o=Jt(c,["forceMount"]),u=ju(Gv,e.__scopeDialog);return u.modal?l.jsx(My,{present:i||u.open,children:l.jsx(PH,Ee(te({},o),{ref:t}))}):null});Y5.displayName=Gv;var AH=vm("DialogOverlay.RemoveScroll"),PH=L.forwardRef((e,t)=>{const u=e,{__scopeDialog:n}=u,i=Jt(u,["__scopeDialog"]),o=ju(Gv,n);return l.jsx(R1,{as:AH,allowPinchZoom:!0,shards:[o.contentRef],children:l.jsx(Ui.div,Ee(te({"data-state":NC(o.open)},i),{ref:t,style:te({pointerEvents:"auto"},i.style)}))})}),Tm="DialogContent",X5=L.forwardRef((e,t)=>{const n=W5(Tm,e.__scopeDialog),c=e,{forceMount:i=n.forceMount}=c,o=Jt(c,["forceMount"]),u=ju(Tm,e.__scopeDialog);return l.jsx(My,{present:i||u.open,children:u.modal?l.jsx(RH,Ee(te({},o),{ref:t})):l.jsx(DH,Ee(te({},o),{ref:t}))})});X5.displayName=Tm;var RH=L.forwardRef((e,t)=>{const n=ju(Tm,e.__scopeDialog),i=L.useRef(null),o=hr(t,n.contentRef,i);return L.useEffect(()=>{const u=i.current;if(u)return kC(u)},[]),l.jsx(K5,Ee(te({},e),{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gs(e.onCloseAutoFocus,u=>{var c;u.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:gs(e.onPointerDownOutside,u=>{const c=u.detail.originalEvent,a=c.button===0&&c.ctrlKey===!0;(c.button===2||a)&&u.preventDefault()}),onFocusOutside:gs(e.onFocusOutside,u=>u.preventDefault())}))}),DH=L.forwardRef((e,t)=>{const n=ju(Tm,e.__scopeDialog),i=L.useRef(!1),o=L.useRef(!1);return l.jsx(K5,Ee(te({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var c,a;(c=e.onCloseAutoFocus)==null||c.call(e,u),u.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),u.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:u=>{var g,_;(g=e.onInteractOutside)==null||g.call(e,u),u.defaultPrevented||(i.current=!0,u.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=u.target;((_=n.triggerRef.current)==null?void 0:_.contains(c))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&o.current&&u.preventDefault()}}))}),K5=L.forwardRef((e,t)=>{const S=e,{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:u}=S,c=Jt(S,["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),a=ju(Tm,n),g=L.useRef(null),_=hr(t,g);return TC(),l.jsxs(l.Fragment,{children:[l.jsx(N1,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:u,children:l.jsx(M1,Ee(te({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":NC(a.open)},c),{ref:_,onDismiss:()=>a.onOpenChange(!1)}))}),l.jsxs(l.Fragment,{children:[l.jsx(FH,{titleId:a.titleId}),l.jsx(BH,{contentRef:g,descriptionId:a.descriptionId})]})]})}),MC="DialogTitle",zH=L.forwardRef((e,t)=>{const u=e,{__scopeDialog:n}=u,i=Jt(u,["__scopeDialog"]),o=ju(MC,n);return l.jsx(Ui.h2,Ee(te({id:o.titleId},i),{ref:t}))});zH.displayName=MC;var Q5="DialogDescription",IH=L.forwardRef((e,t)=>{const u=e,{__scopeDialog:n}=u,i=Jt(u,["__scopeDialog"]),o=ju(Q5,n);return l.jsx(Ui.p,Ee(te({id:o.descriptionId},i),{ref:t}))});IH.displayName=Q5;var J5="DialogClose",OH=L.forwardRef((e,t)=>{const u=e,{__scopeDialog:n}=u,i=Jt(u,["__scopeDialog"]),o=ju(J5,n);return l.jsx(Ui.button,Ee(te({type:"button"},i),{ref:t,onClick:gs(e.onClick,()=>o.onOpenChange(!1))}))});OH.displayName=J5;function NC(e){return e?"open":"closed"}var e3="DialogTitleWarning",[Hae,t3]=p$(e3,{contentName:Tm,titleName:MC,docsSlug:"dialog"}),FH=({titleId:e})=>{const t=t3(e3),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return L.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},LH="DialogDescriptionWarning",BH=({contentRef:e,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${t3(LH).contentName}}.`;return L.useEffect(()=>{var u;const o=(u=e.current)==null?void 0:u.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(i))},[i,e,t]),null},VH=q5,UH=Z5,$H=Y5,HH=X5;function qH(e){const t=L.useRef({value:e,previous:e});return L.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function GH(e){const[t,n]=L.useState(void 0);return _o(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const u=o[0];let c,a;if("borderBoxSize"in u){const g=u.borderBoxSize,_=Array.isArray(g)?g[0]:g;c=_.inlineSize,a=_.blockSize}else c=e.offsetWidth,a=e.offsetHeight;n({width:c,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}const WH=["top","right","bottom","left"],Uf=Math.min,Ol=Math.max,Wv=Math.round,bb=Math.floor,gd=e=>({x:e,y:e}),ZH={left:"right",right:"left",bottom:"top",top:"bottom"},YH={start:"end",end:"start"};function $S(e,t,n){return Ol(e,Uf(t,n))}function kh(e,t){return typeof e=="function"?e(t):e}function Eh(e){return e.split("-")[0]}function Ny(e){return e.split("-")[1]}function AC(e){return e==="x"?"y":"x"}function PC(e){return e==="y"?"height":"width"}function wh(e){return["top","bottom"].includes(Eh(e))?"y":"x"}function RC(e){return AC(wh(e))}function XH(e,t,n){n===void 0&&(n=!1);const i=Ny(e),o=RC(e),u=PC(o);let c=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(c=Zv(c)),[c,Zv(c)]}function KH(e){const t=Zv(e);return[HS(e),t,HS(t)]}function HS(e){return e.replace(/start|end/g,t=>YH[t])}function QH(e,t,n){const i=["left","right"],o=["right","left"],u=["top","bottom"],c=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:i:t?i:o;case"left":case"right":return t?u:c;default:return[]}}function JH(e,t,n,i){const o=Ny(e);let u=QH(Eh(e),n==="start",i);return o&&(u=u.map(c=>c+"-"+o),t&&(u=u.concat(u.map(HS)))),u}function Zv(e){return e.replace(/left|right|bottom|top/g,t=>ZH[t])}function eq(e){return te({top:0,right:0,bottom:0,left:0},e)}function n3(e){return typeof e!="number"?eq(e):{top:e,right:e,bottom:e,left:e}}function Yv(e){const{x:t,y:n,width:i,height:o}=e;return{width:i,height:o,top:n,left:t,right:t+i,bottom:n+o,x:t,y:n}}function YE(e,t,n){let{reference:i,floating:o}=e;const u=wh(t),c=RC(t),a=PC(c),g=Eh(t),_=u==="y",S=i.x+i.width/2-o.width/2,E=i.y+i.height/2-o.height/2,A=i[a]/2-o[a]/2;let N;switch(g){case"top":N={x:S,y:i.y-o.height};break;case"bottom":N={x:S,y:i.y+i.height};break;case"right":N={x:i.x+i.width,y:E};break;case"left":N={x:i.x-o.width,y:E};break;default:N={x:i.x,y:i.y}}switch(Ny(t)){case"start":N[c]-=A*(n&&_?-1:1);break;case"end":N[c]+=A*(n&&_?-1:1);break}return N}const tq=(e,t,n)=>Gt(null,null,function*(){const{placement:i="bottom",strategy:o="absolute",middleware:u=[],platform:c}=n,a=u.filter(Boolean),g=yield c.isRTL==null?void 0:c.isRTL(t);let _=yield c.getElementRects({reference:e,floating:t,strategy:o}),{x:S,y:E}=YE(_,i,g),A=i,N={},z=0;for(let B=0;B<a.length;B++){const{name:$,fn:q}=a[B],{x:W,y:Q,data:Z,reset:K}=yield q({x:S,y:E,initialPlacement:i,placement:A,strategy:o,middlewareData:N,rects:_,platform:c,elements:{reference:e,floating:t}});S=W!=null?W:S,E=Q!=null?Q:E,N=Ee(te({},N),{[$]:te(te({},N[$]),Z)}),K&&z<=50&&(z++,typeof K=="object"&&(K.placement&&(A=K.placement),K.rects&&(_=K.rects===!0?yield c.getElementRects({reference:e,floating:t,strategy:o}):K.rects),{x:S,y:E}=YE(_,A,g)),B=-1)}return{x:S,y:E,placement:A,strategy:o,middlewareData:N}});function N0(e,t){return Gt(this,null,function*(){var n;t===void 0&&(t={});const{x:i,y:o,platform:u,rects:c,elements:a,strategy:g}=e,{boundary:_="clippingAncestors",rootBoundary:S="viewport",elementContext:E="floating",altBoundary:A=!1,padding:N=0}=kh(t,e),z=n3(N),$=a[A?E==="floating"?"reference":"floating":E],q=Yv(yield u.getClippingRect({element:(n=yield u.isElement==null?void 0:u.isElement($))==null||n?$:$.contextElement||(yield u.getDocumentElement==null?void 0:u.getDocumentElement(a.floating)),boundary:_,rootBoundary:S,strategy:g})),W=E==="floating"?{x:i,y:o,width:c.floating.width,height:c.floating.height}:c.reference,Q=yield u.getOffsetParent==null?void 0:u.getOffsetParent(a.floating),Z=(yield u.isElement==null?void 0:u.isElement(Q))?(yield u.getScale==null?void 0:u.getScale(Q))||{x:1,y:1}:{x:1,y:1},K=Yv(u.convertOffsetParentRelativeRectToViewportRelativeRect?yield u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:W,offsetParent:Q,strategy:g}):W);return{top:(q.top-K.top+z.top)/Z.y,bottom:(K.bottom-q.bottom+z.bottom)/Z.y,left:(q.left-K.left+z.left)/Z.x,right:(K.right-q.right+z.right)/Z.x}})}const nq=e=>({name:"arrow",options:e,fn(n){return Gt(this,null,function*(){const{x:i,y:o,placement:u,rects:c,platform:a,elements:g,middlewareData:_}=n,{element:S,padding:E=0}=kh(e,n)||{};if(S==null)return{};const A=n3(E),N={x:i,y:o},z=RC(u),B=PC(z),$=yield a.getDimensions(S),q=z==="y",W=q?"top":"left",Q=q?"bottom":"right",Z=q?"clientHeight":"clientWidth",K=c.reference[B]+c.reference[z]-N[z]-c.floating[B],le=N[z]-c.reference[z],ge=yield a.getOffsetParent==null?void 0:a.getOffsetParent(S);let he=ge?ge[Z]:0;(!he||!(yield a.isElement==null?void 0:a.isElement(ge)))&&(he=g.floating[Z]||c.floating[B]);const pe=K/2-le/2,Ie=he/2-$[B]/2-1,He=Uf(A[W],Ie),Ye=Uf(A[Q],Ie),rt=He,Rt=he-$[B]-Ye,St=he/2-$[B]/2+pe,De=$S(rt,St,Rt),Qe=!_.arrow&&Ny(u)!=null&&St!==De&&c.reference[B]/2-(St<rt?He:Ye)-$[B]/2<0,et=Qe?St<rt?St-rt:St-Rt:0;return{[z]:N[z]+et,data:te({[z]:De,centerOffset:St-De-et},Qe&&{alignmentOffset:et}),reset:Qe}})}}),iq=function(e){return e===void 0&&(e={}),{name:"flip",options:e,fn(n){return Gt(this,null,function*(){var i,o;const{placement:u,middlewareData:c,rects:a,initialPlacement:g,platform:_,elements:S}=n,De=kh(e,n),{mainAxis:E=!0,crossAxis:A=!0,fallbackPlacements:N,fallbackStrategy:z="bestFit",fallbackAxisSideDirection:B="none",flipAlignment:$=!0}=De,q=Jt(De,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((i=c.arrow)!=null&&i.alignmentOffset)return{};const W=Eh(u),Q=wh(g),Z=Eh(g)===g,K=yield _.isRTL==null?void 0:_.isRTL(S.floating),le=N||(Z||!$?[Zv(g)]:KH(g)),ge=B!=="none";!N&&ge&&le.push(...JH(g,$,B,K));const he=[g,...le],pe=yield N0(n,q),Ie=[];let He=((o=c.flip)==null?void 0:o.overflows)||[];if(E&&Ie.push(pe[W]),A){const Qe=XH(u,a,K);Ie.push(pe[Qe[0]],pe[Qe[1]])}if(He=[...He,{placement:u,overflows:Ie}],!Ie.every(Qe=>Qe<=0)){var Ye,rt;const Qe=(((Ye=c.flip)==null?void 0:Ye.index)||0)+1,et=he[Qe];if(et){var Rt;const fe=A==="alignment"?Q!==wh(et):!1,Xe=((Rt=He[0])==null?void 0:Rt.overflows[0])>0;if(!fe||Xe)return{data:{index:Qe,overflows:He},reset:{placement:et}}}let Nt=(rt=He.filter(fe=>fe.overflows[0]<=0).sort((fe,Xe)=>fe.overflows[1]-Xe.overflows[1])[0])==null?void 0:rt.placement;if(!Nt)switch(z){case"bestFit":{var St;const fe=(St=He.filter(Xe=>{if(ge){const tt=wh(Xe.placement);return tt===Q||tt==="y"}return!0}).map(Xe=>[Xe.placement,Xe.overflows.filter(tt=>tt>0).reduce((tt,Me)=>tt+Me,0)]).sort((Xe,tt)=>Xe[1]-tt[1])[0])==null?void 0:St[0];fe&&(Nt=fe);break}case"initialPlacement":Nt=g;break}if(u!==Nt)return{reset:{placement:Nt}}}return{}})}}};function XE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function KE(e){return WH.some(t=>e[t]>=0)}const sq=function(e){return e===void 0&&(e={}),{name:"hide",options:e,fn(n){return Gt(this,null,function*(){const{rects:i}=n,c=kh(e,n),{strategy:o="referenceHidden"}=c,u=Jt(c,["strategy"]);switch(o){case"referenceHidden":{const a=yield N0(n,Ee(te({},u),{elementContext:"reference"})),g=XE(a,i.reference);return{data:{referenceHiddenOffsets:g,referenceHidden:KE(g)}}}case"escaped":{const a=yield N0(n,Ee(te({},u),{altBoundary:!0})),g=XE(a,i.floating);return{data:{escapedOffsets:g,escaped:KE(g)}}}default:return{}}})}}};function rq(e,t){return Gt(this,null,function*(){const{placement:n,platform:i,elements:o}=e,u=yield i.isRTL==null?void 0:i.isRTL(o.floating),c=Eh(n),a=Ny(n),g=wh(n)==="y",_=["left","top"].includes(c)?-1:1,S=u&&g?-1:1,E=kh(t,e);let{mainAxis:A,crossAxis:N,alignmentAxis:z}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return a&&typeof z=="number"&&(N=a==="end"?z*-1:z),g?{x:N*S,y:A*_}:{x:A*_,y:N*S}})}const aq=function(e){return e===void 0&&(e=0),{name:"offset",options:e,fn(n){return Gt(this,null,function*(){var i,o;const{x:u,y:c,placement:a,middlewareData:g}=n,_=yield rq(n,e);return a===((i=g.offset)==null?void 0:i.placement)&&(o=g.arrow)!=null&&o.alignmentOffset?{}:{x:u+_.x,y:c+_.y,data:Ee(te({},_),{placement:a})}})}}},oq=function(e){return e===void 0&&(e={}),{name:"shift",options:e,fn(n){return Gt(this,null,function*(){const{x:i,y:o,placement:u}=n,q=kh(e,n),{mainAxis:c=!0,crossAxis:a=!1,limiter:g={fn:W=>{let{x:Q,y:Z}=W;return{x:Q,y:Z}}}}=q,_=Jt(q,["mainAxis","crossAxis","limiter"]),S={x:i,y:o},E=yield N0(n,_),A=wh(Eh(u)),N=AC(A);let z=S[N],B=S[A];if(c){const W=N==="y"?"top":"left",Q=N==="y"?"bottom":"right",Z=z+E[W],K=z-E[Q];z=$S(Z,z,K)}if(a){const W=A==="y"?"top":"left",Q=A==="y"?"bottom":"right",Z=B+E[W],K=B-E[Q];B=$S(Z,B,K)}const $=g.fn(Ee(te({},n),{[N]:z,[A]:B}));return Ee(te({},$),{data:{x:$.x-i,y:$.y-o,enabled:{[N]:c,[A]:a}}})})}}},lq=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:o,rects:u,middlewareData:c}=t,{offset:a=0,mainAxis:g=!0,crossAxis:_=!0}=kh(e,t),S={x:n,y:i},E=wh(o),A=AC(E);let N=S[A],z=S[E];const B=kh(a,t),$=typeof B=="number"?{mainAxis:B,crossAxis:0}:te({mainAxis:0,crossAxis:0},B);if(g){const Q=A==="y"?"height":"width",Z=u.reference[A]-u.floating[Q]+$.mainAxis,K=u.reference[A]+u.reference[Q]-$.mainAxis;N<Z?N=Z:N>K&&(N=K)}if(_){var q,W;const Q=A==="y"?"width":"height",Z=["top","left"].includes(Eh(o)),K=u.reference[E]-u.floating[Q]+(Z&&((q=c.offset)==null?void 0:q[E])||0)+(Z?0:$.crossAxis),le=u.reference[E]+u.reference[Q]+(Z?0:((W=c.offset)==null?void 0:W[E])||0)-(Z?$.crossAxis:0);z<K?z=K:z>le&&(z=le)}return{[A]:N,[E]:z}}}},cq=function(e){return e===void 0&&(e={}),{name:"size",options:e,fn(n){return Gt(this,null,function*(){var i,o;const{placement:u,rects:c,platform:a,elements:g}=n,He=kh(e,n),{apply:_=()=>{}}=He,S=Jt(He,["apply"]),E=yield N0(n,S),A=Eh(u),N=Ny(u),z=wh(u)==="y",{width:B,height:$}=c.floating;let q,W;A==="top"||A==="bottom"?(q=A,W=N===((yield a.isRTL==null?void 0:a.isRTL(g.floating))?"start":"end")?"left":"right"):(W=A,q=N==="end"?"top":"bottom");const Q=$-E.top-E.bottom,Z=B-E.left-E.right,K=Uf($-E[q],Q),le=Uf(B-E[W],Z),ge=!n.middlewareData.shift;let he=K,pe=le;if((i=n.middlewareData.shift)!=null&&i.enabled.x&&(pe=Z),(o=n.middlewareData.shift)!=null&&o.enabled.y&&(he=Q),ge&&!N){const Ye=Ol(E.left,0),rt=Ol(E.right,0),Rt=Ol(E.top,0),St=Ol(E.bottom,0);z?pe=B-2*(Ye!==0||rt!==0?Ye+rt:Ol(E.left,E.right)):he=$-2*(Rt!==0||St!==0?Rt+St:Ol(E.top,E.bottom))}yield _(Ee(te({},n),{availableWidth:pe,availableHeight:he}));const Ie=yield a.getDimensions(g.floating);return B!==Ie.width||$!==Ie.height?{reset:{rects:!0}}:{}})}}};function z1(){return typeof window!="undefined"}function Ay(e){return i3(e)?(e.nodeName||"").toLowerCase():"#document"}function Ll(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Sd(e){var t;return(t=(i3(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function i3(e){return z1()?e instanceof Node||e instanceof Ll(e).Node:!1}function _u(e){return z1()?e instanceof Element||e instanceof Ll(e).Element:!1}function wd(e){return z1()?e instanceof HTMLElement||e instanceof Ll(e).HTMLElement:!1}function QE(e){return!z1()||typeof ShadowRoot=="undefined"?!1:e instanceof ShadowRoot||e instanceof Ll(e).ShadowRoot}function r_(e){const{overflow:t,overflowX:n,overflowY:i,display:o}=bu(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(o)}function uq(e){return["table","td","th"].includes(Ay(e))}function I1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(n){return!1}})}function DC(e){const t=zC(),n=_u(e)?bu(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function dq(e){let t=$f(e);for(;wd(t)&&!dy(t);){if(DC(t))return t;if(I1(t))return null;t=$f(t)}return null}function zC(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function dy(e){return["html","body","#document"].includes(Ay(e))}function bu(e){return Ll(e).getComputedStyle(e)}function O1(e){return _u(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $f(e){if(Ay(e)==="html")return e;const t=e.assignedSlot||e.parentNode||QE(e)&&e.host||Sd(e);return QE(t)?t.host:t}function s3(e){const t=$f(e);return dy(t)?e.ownerDocument?e.ownerDocument.body:e.body:wd(t)&&r_(t)?t:s3(t)}function A0(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=s3(e),u=o===((i=e.ownerDocument)==null?void 0:i.body),c=Ll(o);if(u){const a=qS(c);return t.concat(c,c.visualViewport||[],r_(o)?o:[],a&&n?A0(a):[])}return t.concat(o,A0(o,[],n))}function qS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function r3(e){const t=bu(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const o=wd(e),u=o?e.offsetWidth:n,c=o?e.offsetHeight:i,a=Wv(n)!==u||Wv(i)!==c;return a&&(n=u,i=c),{width:n,height:i,$:a}}function IC(e){return _u(e)?e:e.contextElement}function sy(e){const t=IC(e);if(!wd(t))return gd(1);const n=t.getBoundingClientRect(),{width:i,height:o,$:u}=r3(t);let c=(u?Wv(n.width):n.width)/i,a=(u?Wv(n.height):n.height)/o;return(!c||!Number.isFinite(c))&&(c=1),(!a||!Number.isFinite(a))&&(a=1),{x:c,y:a}}const hq=gd(0);function a3(e){const t=Ll(e);return!zC()||!t.visualViewport?hq:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function fq(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ll(e)?!1:t}function km(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),u=IC(e);let c=gd(1);t&&(i?_u(i)&&(c=sy(i)):c=sy(e));const a=fq(u,n,i)?a3(u):gd(0);let g=(o.left+a.x)/c.x,_=(o.top+a.y)/c.y,S=o.width/c.x,E=o.height/c.y;if(u){const A=Ll(u),N=i&&_u(i)?Ll(i):i;let z=A,B=qS(z);for(;B&&i&&N!==z;){const $=sy(B),q=B.getBoundingClientRect(),W=bu(B),Q=q.left+(B.clientLeft+parseFloat(W.paddingLeft))*$.x,Z=q.top+(B.clientTop+parseFloat(W.paddingTop))*$.y;g*=$.x,_*=$.y,S*=$.x,E*=$.y,g+=Q,_+=Z,z=Ll(B),B=qS(z)}}return Yv({width:S,height:E,x:g,y:_})}function OC(e,t){const n=O1(e).scrollLeft;return t?t.left+n:km(Sd(e)).left+n}function o3(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=i.left+t.scrollLeft-(n?0:OC(e,i)),u=i.top+t.scrollTop;return{x:o,y:u}}function pq(e){let{elements:t,rect:n,offsetParent:i,strategy:o}=e;const u=o==="fixed",c=Sd(i),a=t?I1(t.floating):!1;if(i===c||a&&u)return n;let g={scrollLeft:0,scrollTop:0},_=gd(1);const S=gd(0),E=wd(i);if((E||!E&&!u)&&((Ay(i)!=="body"||r_(c))&&(g=O1(i)),wd(i))){const N=km(i);_=sy(i),S.x=N.x+i.clientLeft,S.y=N.y+i.clientTop}const A=c&&!E&&!u?o3(c,g,!0):gd(0);return{width:n.width*_.x,height:n.height*_.y,x:n.x*_.x-g.scrollLeft*_.x+S.x+A.x,y:n.y*_.y-g.scrollTop*_.y+S.y+A.y}}function mq(e){return Array.from(e.getClientRects())}function gq(e){const t=Sd(e),n=O1(e),i=e.ownerDocument.body,o=Ol(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),u=Ol(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let c=-n.scrollLeft+OC(e);const a=-n.scrollTop;return bu(i).direction==="rtl"&&(c+=Ol(t.clientWidth,i.clientWidth)-o),{width:o,height:u,x:c,y:a}}function yq(e,t){const n=Ll(e),i=Sd(e),o=n.visualViewport;let u=i.clientWidth,c=i.clientHeight,a=0,g=0;if(o){u=o.width,c=o.height;const _=zC();(!_||_&&t==="fixed")&&(a=o.offsetLeft,g=o.offsetTop)}return{width:u,height:c,x:a,y:g}}function xq(e,t){const n=km(e,!0,t==="fixed"),i=n.top+e.clientTop,o=n.left+e.clientLeft,u=wd(e)?sy(e):gd(1),c=e.clientWidth*u.x,a=e.clientHeight*u.y,g=o*u.x,_=i*u.y;return{width:c,height:a,x:g,y:_}}function JE(e,t,n){let i;if(t==="viewport")i=yq(e,n);else if(t==="document")i=gq(Sd(e));else if(_u(t))i=xq(t,n);else{const o=a3(e);i={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Yv(i)}function l3(e,t){const n=$f(e);return n===t||!_u(n)||dy(n)?!1:bu(n).position==="fixed"||l3(n,t)}function _q(e,t){const n=t.get(e);if(n)return n;let i=A0(e,[],!1).filter(a=>_u(a)&&Ay(a)!=="body"),o=null;const u=bu(e).position==="fixed";let c=u?$f(e):e;for(;_u(c)&&!dy(c);){const a=bu(c),g=DC(c);!g&&a.position==="fixed"&&(o=null),(u?!g&&!o:!g&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||r_(c)&&!g&&l3(e,c))?i=i.filter(S=>S!==c):o=a,c=$f(c)}return t.set(e,i),i}function bq(e){let{element:t,boundary:n,rootBoundary:i,strategy:o}=e;const c=[...n==="clippingAncestors"?I1(t)?[]:_q(t,this._c):[].concat(n),i],a=c[0],g=c.reduce((_,S)=>{const E=JE(t,S,o);return _.top=Ol(E.top,_.top),_.right=Uf(E.right,_.right),_.bottom=Uf(E.bottom,_.bottom),_.left=Ol(E.left,_.left),_},JE(t,a,o));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function vq(e){const{width:t,height:n}=r3(e);return{width:t,height:n}}function wq(e,t,n){const i=wd(t),o=Sd(t),u=n==="fixed",c=km(e,!0,u,t);let a={scrollLeft:0,scrollTop:0};const g=gd(0);function _(){g.x=OC(o)}if(i||!i&&!u)if((Ay(t)!=="body"||r_(o))&&(a=O1(t)),i){const N=km(t,!0,u,t);g.x=N.x+t.clientLeft,g.y=N.y+t.clientTop}else o&&_();u&&!i&&o&&_();const S=o&&!i&&!u?o3(o,a):gd(0),E=c.left+a.scrollLeft-g.x-S.x,A=c.top+a.scrollTop-g.y-S.y;return{x:E,y:A,width:c.width,height:c.height}}function m2(e){return bu(e).position==="static"}function eM(e,t){if(!wd(e)||bu(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Sd(e)===n&&(n=n.ownerDocument.body),n}function c3(e,t){const n=Ll(e);if(I1(e))return n;if(!wd(e)){let o=$f(e);for(;o&&!dy(o);){if(_u(o)&&!m2(o))return o;o=$f(o)}return n}let i=eM(e,t);for(;i&&uq(i)&&m2(i);)i=eM(i,t);return i&&dy(i)&&m2(i)&&!DC(i)?n:i||dq(e)||n}const Sq=function(e){return Gt(this,null,function*(){const t=this.getOffsetParent||c3,n=this.getDimensions,i=yield n(e.floating);return{reference:wq(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}})};function jq(e){return bu(e).direction==="rtl"}const Cq={convertOffsetParentRelativeRectToViewportRelativeRect:pq,getDocumentElement:Sd,getClippingRect:bq,getOffsetParent:c3,getElementRects:Sq,getClientRects:mq,getDimensions:vq,getScale:sy,isElement:_u,isRTL:jq};function u3(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Tq(e,t){let n=null,i;const o=Sd(e);function u(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function c(a,g){a===void 0&&(a=!1),g===void 0&&(g=1),u();const _=e.getBoundingClientRect(),{left:S,top:E,width:A,height:N}=_;if(a||t(),!A||!N)return;const z=bb(E),B=bb(o.clientWidth-(S+A)),$=bb(o.clientHeight-(E+N)),q=bb(S),Q={rootMargin:-z+"px "+-B+"px "+-$+"px "+-q+"px",threshold:Ol(0,Uf(1,g))||1};let Z=!0;function K(le){const ge=le[0].intersectionRatio;if(ge!==g){if(!Z)return c();ge?c(!1,ge):i=setTimeout(()=>{c(!1,1e-7)},1e3)}ge===1&&!u3(_,e.getBoundingClientRect())&&c(),Z=!1}try{n=new IntersectionObserver(K,Ee(te({},Q),{root:o.ownerDocument}))}catch(le){n=new IntersectionObserver(K,Q)}n.observe(e)}return c(!0),u}function kq(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:u=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:g=!1}=i,_=IC(e),S=o||u?[..._?A0(_):[],...A0(t)]:[];S.forEach(q=>{o&&q.addEventListener("scroll",n,{passive:!0}),u&&q.addEventListener("resize",n)});const E=_&&a?Tq(_,n):null;let A=-1,N=null;c&&(N=new ResizeObserver(q=>{let[W]=q;W&&W.target===_&&N&&(N.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var Q;(Q=N)==null||Q.observe(t)})),n()}),_&&!g&&N.observe(_),N.observe(t));let z,B=g?km(e):null;g&&$();function $(){const q=km(e);B&&!u3(B,q)&&n(),B=q,z=requestAnimationFrame($)}return n(),()=>{var q;S.forEach(W=>{o&&W.removeEventListener("scroll",n),u&&W.removeEventListener("resize",n)}),E==null||E(),(q=N)==null||q.disconnect(),N=null,g&&cancelAnimationFrame(z)}}const Eq=aq,Mq=oq,Nq=iq,Aq=cq,Pq=sq,tM=nq,Rq=lq,Dq=(e,t,n)=>{const i=new Map,o=te({platform:Cq},n),u=Ee(te({},o.platform),{_c:i});return tq(e,t,Ee(te({},o),{platform:u}))};var av=typeof document!="undefined"?L.useLayoutEffect:L.useEffect;function Xv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!Xv(e[i],t[i]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,o[i]))return!1;for(i=n;i--!==0;){const u=o[i];if(!(u==="_owner"&&e.$$typeof)&&!Xv(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function d3(e){return typeof window=="undefined"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function nM(e,t){const n=d3(e);return Math.round(t*n)/n}function g2(e){const t=L.useRef(e);return av(()=>{t.current=e}),t}function zq(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:o,elements:{reference:u,floating:c}={},transform:a=!0,whileElementsMounted:g,open:_}=e,[S,E]=L.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[A,N]=L.useState(i);Xv(A,i)||N(i);const[z,B]=L.useState(null),[$,q]=L.useState(null),W=L.useCallback(et=>{et!==le.current&&(le.current=et,B(et))},[]),Q=L.useCallback(et=>{et!==ge.current&&(ge.current=et,q(et))},[]),Z=u||z,K=c||$,le=L.useRef(null),ge=L.useRef(null),he=L.useRef(S),pe=g!=null,Ie=g2(g),He=g2(o),Ye=g2(_),rt=L.useCallback(()=>{if(!le.current||!ge.current)return;const et={placement:t,strategy:n,middleware:A};He.current&&(et.platform=He.current),Dq(le.current,ge.current,et).then(Nt=>{const fe=Ee(te({},Nt),{isPositioned:Ye.current!==!1});Rt.current&&!Xv(he.current,fe)&&(he.current=fe,X0.flushSync(()=>{E(fe)}))})},[A,t,n,He,Ye]);av(()=>{_===!1&&he.current.isPositioned&&(he.current.isPositioned=!1,E(et=>Ee(te({},et),{isPositioned:!1})))},[_]);const Rt=L.useRef(!1);av(()=>(Rt.current=!0,()=>{Rt.current=!1}),[]),av(()=>{if(Z&&(le.current=Z),K&&(ge.current=K),Z&&K){if(Ie.current)return Ie.current(Z,K,rt);rt()}},[Z,K,rt,Ie,pe]);const St=L.useMemo(()=>({reference:le,floating:ge,setReference:W,setFloating:Q}),[W,Q]),De=L.useMemo(()=>({reference:Z,floating:K}),[Z,K]),Qe=L.useMemo(()=>{const et={position:n,left:0,top:0};if(!De.floating)return et;const Nt=nM(De.floating,S.x),fe=nM(De.floating,S.y);return a?te(Ee(te({},et),{transform:"translate("+Nt+"px, "+fe+"px)"}),d3(De.floating)>=1.5&&{willChange:"transform"}):{position:n,left:Nt,top:fe}},[n,a,De.floating,S.x,S.y]);return L.useMemo(()=>Ee(te({},S),{update:rt,refs:St,elements:De,floatingStyles:Qe}),[S,rt,St,De,Qe])}const Iq=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:o}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?tM({element:i.current,padding:o}).fn(n):{}:i?tM({element:i,padding:o}).fn(n):{}}}},Oq=(e,t)=>Ee(te({},Eq(e)),{options:[e,t]}),Fq=(e,t)=>Ee(te({},Mq(e)),{options:[e,t]}),Lq=(e,t)=>Ee(te({},Rq(e)),{options:[e,t]}),Bq=(e,t)=>Ee(te({},Nq(e)),{options:[e,t]}),Vq=(e,t)=>Ee(te({},Aq(e)),{options:[e,t]}),Uq=(e,t)=>Ee(te({},Pq(e)),{options:[e,t]}),$q=(e,t)=>Ee(te({},Iq(e)),{options:[e,t]});var Hq="Arrow",h3=L.forwardRef((e,t)=>{const c=e,{children:n,width:i=10,height:o=5}=c,u=Jt(c,["children","width","height"]);return l.jsx(Ui.svg,Ee(te({},u),{ref:t,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})}))});h3.displayName=Hq;var qq=h3,FC="Popper",[f3,F1]=s_(FC),[Gq,p3]=f3(FC),m3=e=>{const{__scopePopper:t,children:n}=e,[i,o]=L.useState(null);return l.jsx(Gq,{scope:t,anchor:i,onAnchorChange:o,children:n})};m3.displayName=FC;var g3="PopperAnchor",y3=L.forwardRef((e,t)=>{const g=e,{__scopePopper:n,virtualRef:i}=g,o=Jt(g,["__scopePopper","virtualRef"]),u=p3(g3,n),c=L.useRef(null),a=hr(t,c);return L.useEffect(()=>{u.onAnchorChange((i==null?void 0:i.current)||c.current)}),i?null:l.jsx(Ui.div,Ee(te({},o),{ref:a}))});y3.displayName=g3;var LC="PopperContent",[Wq,Zq]=f3(LC),x3=L.forwardRef((e,t)=>{var Ve,Ge,Dt,Lt,It,Ot,en,_n;const pt=e,{__scopePopper:n,side:i="bottom",sideOffset:o=0,align:u="center",alignOffset:c=0,arrowPadding:a=0,avoidCollisions:g=!0,collisionBoundary:_=[],collisionPadding:S=0,sticky:E="partial",hideWhenDetached:A=!1,updatePositionStrategy:N="optimized",onPlaced:z}=pt,B=Jt(pt,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),$=p3(LC,n),[q,W]=L.useState(null),Q=hr(t,Yn=>W(Yn)),[Z,K]=L.useState(null),le=GH(Z),ge=(Ve=le==null?void 0:le.width)!=null?Ve:0,he=(Ge=le==null?void 0:le.height)!=null?Ge:0,pe=i+(u!=="center"?"-"+u:""),Ie=typeof S=="number"?S:te({top:0,right:0,bottom:0,left:0},S),He=Array.isArray(_)?_:[_],Ye=He.length>0,rt={padding:Ie,boundary:He.filter(Xq),altBoundary:Ye},{refs:Rt,floatingStyles:St,placement:De,isPositioned:Qe,middlewareData:et}=zq({strategy:"fixed",placement:pe,whileElementsMounted:(...Yn)=>kq(...Yn,{animationFrame:N==="always"}),elements:{reference:$.anchor},middleware:[Oq({mainAxis:o+he,alignmentAxis:c}),g&&Fq(te({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?Lq():void 0},rt)),g&&Bq(te({},rt)),Vq(Ee(te({},rt),{apply:({elements:Yn,rects:Hn,availableWidth:hn,availableHeight:on})=>{const{width:Ue,height:We}=Hn.reference,Pe=Yn.floating.style;Pe.setProperty("--radix-popper-available-width",`${hn}px`),Pe.setProperty("--radix-popper-available-height",`${on}px`),Pe.setProperty("--radix-popper-anchor-width",`${Ue}px`),Pe.setProperty("--radix-popper-anchor-height",`${We}px`)}})),Z&&$q({element:Z,padding:a}),Kq({arrowWidth:ge,arrowHeight:he}),A&&Uq(te({strategy:"referenceHidden"},rt))]}),[Nt,fe]=v3(De),Xe=Cm(z);_o(()=>{Qe&&(Xe==null||Xe())},[Qe,Xe]);const tt=(Dt=et.arrow)==null?void 0:Dt.x,Me=(Lt=et.arrow)==null?void 0:Lt.y,ot=((It=et.arrow)==null?void 0:It.centerOffset)!==0,[ut,dt]=L.useState();return _o(()=>{q&&dt(window.getComputedStyle(q).zIndex)},[q]),l.jsx("div",{ref:Rt.setFloating,"data-radix-popper-content-wrapper":"",style:te(Ee(te({},St),{transform:Qe?St.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ut,"--radix-popper-transform-origin":[(Ot=et.transformOrigin)==null?void 0:Ot.x,(en=et.transformOrigin)==null?void 0:en.y].join(" ")}),((_n=et.hide)==null?void 0:_n.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:l.jsx(Wq,{scope:n,placedSide:Nt,onArrowChange:K,arrowX:tt,arrowY:Me,shouldHideArrow:ot,children:l.jsx(Ui.div,Ee(te({"data-side":Nt,"data-align":fe},B),{ref:Q,style:Ee(te({},B.style),{animation:Qe?void 0:"none"})}))})})});x3.displayName=LC;var _3="PopperArrow",Yq={top:"bottom",right:"left",bottom:"top",left:"right"},b3=L.forwardRef(function(t,n){const a=t,{__scopePopper:i}=a,o=Jt(a,["__scopePopper"]),u=Zq(_3,i),c=Yq[u.placedSide];return l.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:l.jsx(qq,Ee(te({},o),{ref:n,style:Ee(te({},o.style),{display:"block"})}))})});b3.displayName=_3;function Xq(e){return e!==null}var Kq=e=>({name:"transformOrigin",options:e,fn(t){var $,q,W,Q,Z;const{placement:n,rects:i,middlewareData:o}=t,c=(($=o.arrow)==null?void 0:$.centerOffset)!==0,a=c?0:e.arrowWidth,g=c?0:e.arrowHeight,[_,S]=v3(n),E={start:"0%",center:"50%",end:"100%"}[S],A=((W=(q=o.arrow)==null?void 0:q.x)!=null?W:0)+a/2,N=((Z=(Q=o.arrow)==null?void 0:Q.y)!=null?Z:0)+g/2;let z="",B="";return _==="bottom"?(z=c?E:`${A}px`,B=`${-g}px`):_==="top"?(z=c?E:`${A}px`,B=`${i.floating.height+g}px`):_==="right"?(z=`${-g}px`,B=c?E:`${N}px`):_==="left"&&(z=`${i.floating.width+g}px`,B=c?E:`${N}px`),{data:{x:z,y:B}}}});function v3(e){const[t,n="center"]=e.split("-");return[t,n]}var w3=m3,BC=y3,S3=x3,j3=b3;function iM(e,[t,n]){return Math.min(n,Math.max(t,e))}var L1="Popover",[C3,qae]=s_(L1,[F1]),a_=F1(),[Qq,Xf]=C3(L1),T3=e=>{const{__scopePopover:t,children:n,open:i,defaultOpen:o,onOpenChange:u,modal:c=!1}=e,a=a_(t),g=L.useRef(null),[_,S]=L.useState(!1),[E,A]=qv({prop:i,defaultProp:o!=null?o:!1,onChange:u,caller:L1});return l.jsx(w3,Ee(te({},a),{children:l.jsx(Qq,{scope:t,contentId:Fl(),triggerRef:g,open:E,onOpenChange:A,onOpenToggle:L.useCallback(()=>A(N=>!N),[A]),hasCustomAnchor:_,onCustomAnchorAdd:L.useCallback(()=>S(!0),[]),onCustomAnchorRemove:L.useCallback(()=>S(!1),[]),modal:c,children:n})}))};T3.displayName=L1;var k3="PopoverAnchor",Jq=L.forwardRef((e,t)=>{const g=e,{__scopePopover:n}=g,i=Jt(g,["__scopePopover"]),o=Xf(k3,n),u=a_(n),{onCustomAnchorAdd:c,onCustomAnchorRemove:a}=o;return L.useEffect(()=>(c(),()=>a()),[c,a]),l.jsx(BC,Ee(te(te({},u),i),{ref:t}))});Jq.displayName=k3;var E3="PopoverTrigger",M3=L.forwardRef((e,t)=>{const g=e,{__scopePopover:n}=g,i=Jt(g,["__scopePopover"]),o=Xf(E3,n),u=a_(n),c=hr(t,o.triggerRef),a=l.jsx(Ui.button,Ee(te({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":D3(o.open)},i),{ref:c,onClick:gs(e.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?a:l.jsx(BC,Ee(te({asChild:!0},u),{children:a}))});M3.displayName=E3;var VC="PopoverPortal",[eG,tG]=C3(VC,{forceMount:void 0}),N3=e=>{const{__scopePopover:t,forceMount:n,children:i,container:o}=e,u=Xf(VC,t);return l.jsx(eG,{scope:t,forceMount:n,children:l.jsx(My,{present:n||u.open,children:l.jsx(A1,{asChild:!0,container:o,children:i})})})};N3.displayName=VC;var hy="PopoverContent",A3=L.forwardRef((e,t)=>{const n=tG(hy,e.__scopePopover),c=e,{forceMount:i=n.forceMount}=c,o=Jt(c,["forceMount"]),u=Xf(hy,e.__scopePopover);return l.jsx(My,{present:i||u.open,children:u.modal?l.jsx(iG,Ee(te({},o),{ref:t})):l.jsx(sG,Ee(te({},o),{ref:t}))})});A3.displayName=hy;var nG=vm("PopoverContent.RemoveScroll"),iG=L.forwardRef((e,t)=>{const n=Xf(hy,e.__scopePopover),i=L.useRef(null),o=hr(t,i),u=L.useRef(!1);return L.useEffect(()=>{const c=i.current;if(c)return kC(c)},[]),l.jsx(R1,{as:nG,allowPinchZoom:!0,children:l.jsx(P3,Ee(te({},e),{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gs(e.onCloseAutoFocus,c=>{var a;c.preventDefault(),u.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:gs(e.onPointerDownOutside,c=>{const a=c.detail.originalEvent,g=a.button===0&&a.ctrlKey===!0,_=a.button===2||g;u.current=_},{checkForDefaultPrevented:!1}),onFocusOutside:gs(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})}))})}),sG=L.forwardRef((e,t)=>{const n=Xf(hy,e.__scopePopover),i=L.useRef(!1),o=L.useRef(!1);return l.jsx(P3,Ee(te({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var c,a;(c=e.onCloseAutoFocus)==null||c.call(e,u),u.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),u.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:u=>{var g,_;(g=e.onInteractOutside)==null||g.call(e,u),u.defaultPrevented||(i.current=!0,u.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=u.target;((_=n.triggerRef.current)==null?void 0:_.contains(c))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&o.current&&u.preventDefault()}}))}),P3=L.forwardRef((e,t)=>{const z=e,{__scopePopover:n,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:u,disableOutsidePointerEvents:c,onEscapeKeyDown:a,onPointerDownOutside:g,onFocusOutside:_,onInteractOutside:S}=z,E=Jt(z,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),A=Xf(hy,n),N=a_(n);return TC(),l.jsx(N1,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:u,children:l.jsx(M1,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:S,onEscapeKeyDown:a,onPointerDownOutside:g,onFocusOutside:_,onDismiss:()=>A.onOpenChange(!1),children:l.jsx(S3,Ee(te(te({"data-state":D3(A.open),role:"dialog",id:A.contentId},N),E),{ref:t,style:Ee(te({},E.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),R3="PopoverClose",rG=L.forwardRef((e,t)=>{const u=e,{__scopePopover:n}=u,i=Jt(u,["__scopePopover"]),o=Xf(R3,n);return l.jsx(Ui.button,Ee(te({type:"button"},i),{ref:t,onClick:gs(e.onClick,()=>o.onOpenChange(!1))}))});rG.displayName=R3;var aG="PopoverArrow",oG=L.forwardRef((e,t)=>{const u=e,{__scopePopover:n}=u,i=Jt(u,["__scopePopover"]),o=a_(n);return l.jsx(j3,Ee(te(te({},o),i),{ref:t}))});oG.displayName=aG;function D3(e){return e?"open":"closed"}var lG=T3,cG=M3,uG=N3,dG=A3,hG=[" ","Enter","ArrowUp","ArrowDown"],fG=[" ","Enter"],Em="Select",[B1,V1,pG]=g$(Em),[Py,Gae]=s_(Em,[pG,F1]),U1=F1(),[mG,Kf]=Py(Em),[gG,yG]=Py(Em),z3=e=>{const{__scopeSelect:t,children:n,open:i,defaultOpen:o,onOpenChange:u,value:c,defaultValue:a,onValueChange:g,dir:_,name:S,autoComplete:E,disabled:A,required:N,form:z}=e,B=U1(t),[$,q]=L.useState(null),[W,Q]=L.useState(null),[Z,K]=L.useState(!1),le=T$(_),[ge,he]=qv({prop:i,defaultProp:o!=null?o:!1,onChange:u,caller:Em}),[pe,Ie]=qv({prop:c,defaultProp:a,onChange:g,caller:Em}),He=L.useRef(null),Ye=$?z||!!$.closest("form"):!0,[rt,Rt]=L.useState(new Set),St=Array.from(rt).map(De=>De.props.value).join(";");return l.jsx(w3,Ee(te({},B),{children:l.jsxs(mG,{required:N,scope:t,trigger:$,onTriggerChange:q,valueNode:W,onValueNodeChange:Q,valueNodeHasChildren:Z,onValueNodeHasChildrenChange:K,contentId:Fl(),value:pe,onValueChange:Ie,open:ge,onOpenChange:he,dir:le,triggerPointerDownPosRef:He,disabled:A,children:[l.jsx(B1.Provider,{scope:t,children:l.jsx(gG,{scope:e.__scopeSelect,onNativeOptionAdd:L.useCallback(De=>{Rt(Qe=>new Set(Qe).add(De))},[]),onNativeOptionRemove:L.useCallback(De=>{Rt(Qe=>{const et=new Set(Qe);return et.delete(De),et})},[]),children:n})}),Ye?l.jsxs(r6,{"aria-hidden":!0,required:N,tabIndex:-1,name:S,autoComplete:E,value:pe,onChange:De=>Ie(De.target.value),disabled:A,form:z,children:[pe===void 0?l.jsx("option",{value:""}):null,Array.from(rt)]},St):null]})}))};z3.displayName=Em;var I3="SelectTrigger",O3=L.forwardRef((e,t)=>{const B=e,{__scopeSelect:n,disabled:i=!1}=B,o=Jt(B,["__scopeSelect","disabled"]),u=U1(n),c=Kf(I3,n),a=c.disabled||i,g=hr(t,c.onTriggerChange),_=V1(n),S=L.useRef("touch"),[E,A,N]=o6($=>{const q=_().filter(Z=>!Z.disabled),W=q.find(Z=>Z.value===c.value),Q=l6(q,$,W);Q!==void 0&&c.onValueChange(Q.value)}),z=$=>{a||(c.onOpenChange(!0),N()),$&&(c.triggerPointerDownPosRef.current={x:Math.round($.pageX),y:Math.round($.pageY)})};return l.jsx(BC,Ee(te({asChild:!0},u),{children:l.jsx(Ui.button,Ee(te({type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":a6(c.value)?"":void 0},o),{ref:g,onClick:gs(o.onClick,$=>{$.currentTarget.focus(),S.current!=="mouse"&&z($)}),onPointerDown:gs(o.onPointerDown,$=>{S.current=$.pointerType;const q=$.target;q.hasPointerCapture($.pointerId)&&q.releasePointerCapture($.pointerId),$.button===0&&$.ctrlKey===!1&&$.pointerType==="mouse"&&(z($),$.preventDefault())}),onKeyDown:gs(o.onKeyDown,$=>{const q=E.current!=="";!($.ctrlKey||$.altKey||$.metaKey)&&$.key.length===1&&A($.key),!(q&&$.key===" ")&&hG.includes($.key)&&(z(),$.preventDefault())})}))}))});O3.displayName=I3;var F3="SelectValue",L3=L.forwardRef((e,t)=>{const A=e,{__scopeSelect:n,className:i,style:o,children:u,placeholder:c=""}=A,a=Jt(A,["__scopeSelect","className","style","children","placeholder"]),g=Kf(F3,n),{onValueNodeHasChildrenChange:_}=g,S=u!==void 0,E=hr(t,g.onValueNodeChange);return _o(()=>{_(S)},[_,S]),l.jsx(Ui.span,Ee(te({},a),{ref:E,style:{pointerEvents:"none"},children:a6(g.value)?l.jsx(l.Fragment,{children:c}):u}))});L3.displayName=F3;var xG="SelectIcon",B3=L.forwardRef((e,t)=>{const u=e,{__scopeSelect:n,children:i}=u,o=Jt(u,["__scopeSelect","children"]);return l.jsx(Ui.span,Ee(te({"aria-hidden":!0},o),{ref:t,children:i||""}))});B3.displayName=xG;var _G="SelectPortal",V3=e=>l.jsx(A1,te({asChild:!0},e));V3.displayName=_G;var Mm="SelectContent",U3=L.forwardRef((e,t)=>{const n=Kf(Mm,e.__scopeSelect),[i,o]=L.useState();if(_o(()=>{o(new DocumentFragment)},[]),!n.open){const u=i;return u?X0.createPortal(l.jsx($3,{scope:e.__scopeSelect,children:l.jsx(B1.Slot,{scope:e.__scopeSelect,children:l.jsx("div",{children:e.children})})}),u):null}return l.jsx(H3,Ee(te({},e),{ref:t}))});U3.displayName=Mm;var du=10,[$3,Qf]=Py(Mm),bG="SelectContentImpl",vG=vm("SelectContent.RemoveScroll"),H3=L.forwardRef((e,t)=>{const pt=e,{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:u,onPointerDownOutside:c,side:a,sideOffset:g,align:_,alignOffset:S,arrowPadding:E,collisionBoundary:A,collisionPadding:N,sticky:z,hideWhenDetached:B,avoidCollisions:$}=pt,q=Jt(pt,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),W=Kf(Mm,n),[Q,Z]=L.useState(null),[K,le]=L.useState(null),ge=hr(t,Ve=>Z(Ve)),[he,pe]=L.useState(null),[Ie,He]=L.useState(null),Ye=V1(n),[rt,Rt]=L.useState(!1),St=L.useRef(!1);L.useEffect(()=>{if(Q)return kC(Q)},[Q]),TC();const De=L.useCallback(Ve=>{const[Ge,...Dt]=Ye().map(Ot=>Ot.ref.current),[Lt]=Dt.slice(-1),It=document.activeElement;for(const Ot of Ve)if(Ot===It||(Ot==null||Ot.scrollIntoView({block:"nearest"}),Ot===Ge&&K&&(K.scrollTop=0),Ot===Lt&&K&&(K.scrollTop=K.scrollHeight),Ot==null||Ot.focus(),document.activeElement!==It))return},[Ye,K]),Qe=L.useCallback(()=>De([he,Q]),[De,he,Q]);L.useEffect(()=>{rt&&Qe()},[rt,Qe]);const{onOpenChange:et,triggerPointerDownPosRef:Nt}=W;L.useEffect(()=>{if(Q){let Ve={x:0,y:0};const Ge=Lt=>{var It,Ot,en,_n;Ve={x:Math.abs(Math.round(Lt.pageX)-((Ot=(It=Nt.current)==null?void 0:It.x)!=null?Ot:0)),y:Math.abs(Math.round(Lt.pageY)-((_n=(en=Nt.current)==null?void 0:en.y)!=null?_n:0))}},Dt=Lt=>{Ve.x<=10&&Ve.y<=10?Lt.preventDefault():Q.contains(Lt.target)||et(!1),document.removeEventListener("pointermove",Ge),Nt.current=null};return Nt.current!==null&&(document.addEventListener("pointermove",Ge),document.addEventListener("pointerup",Dt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ge),document.removeEventListener("pointerup",Dt,{capture:!0})}}},[Q,et,Nt]),L.useEffect(()=>{const Ve=()=>et(!1);return window.addEventListener("blur",Ve),window.addEventListener("resize",Ve),()=>{window.removeEventListener("blur",Ve),window.removeEventListener("resize",Ve)}},[et]);const[fe,Xe]=o6(Ve=>{const Ge=Ye().filter(It=>!It.disabled),Dt=Ge.find(It=>It.ref.current===document.activeElement),Lt=l6(Ge,Ve,Dt);Lt&&setTimeout(()=>Lt.ref.current.focus())}),tt=L.useCallback((Ve,Ge,Dt)=>{const Lt=!St.current&&!Dt;(W.value!==void 0&&W.value===Ge||Lt)&&(pe(Ve),Lt&&(St.current=!0))},[W.value]),Me=L.useCallback(()=>Q==null?void 0:Q.focus(),[Q]),ot=L.useCallback((Ve,Ge,Dt)=>{const Lt=!St.current&&!Dt;(W.value!==void 0&&W.value===Ge||Lt)&&He(Ve)},[W.value]),ut=i==="popper"?GS:q3,dt=ut===GS?{side:a,sideOffset:g,align:_,alignOffset:S,arrowPadding:E,collisionBoundary:A,collisionPadding:N,sticky:z,hideWhenDetached:B,avoidCollisions:$}:{};return l.jsx($3,{scope:n,content:Q,viewport:K,onViewportChange:le,itemRefCallback:tt,selectedItem:he,onItemLeave:Me,itemTextRefCallback:ot,focusSelectedItem:Qe,selectedItemText:Ie,position:i,isPositioned:rt,searchRef:fe,children:l.jsx(R1,{as:vG,allowPinchZoom:!0,children:l.jsx(N1,{asChild:!0,trapped:W.open,onMountAutoFocus:Ve=>{Ve.preventDefault()},onUnmountAutoFocus:gs(o,Ve=>{var Ge;(Ge=W.trigger)==null||Ge.focus({preventScroll:!0}),Ve.preventDefault()}),children:l.jsx(M1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:Ve=>Ve.preventDefault(),onDismiss:()=>W.onOpenChange(!1),children:l.jsx(ut,Ee(te(te({role:"listbox",id:W.contentId,"data-state":W.open?"open":"closed",dir:W.dir,onContextMenu:Ve=>Ve.preventDefault()},q),dt),{onPlaced:()=>Rt(!0),ref:ge,style:te({display:"flex",flexDirection:"column",outline:"none"},q.style),onKeyDown:gs(q.onKeyDown,Ve=>{const Ge=Ve.ctrlKey||Ve.altKey||Ve.metaKey;if(Ve.key==="Tab"&&Ve.preventDefault(),!Ge&&Ve.key.length===1&&Xe(Ve.key),["ArrowUp","ArrowDown","Home","End"].includes(Ve.key)){let Lt=Ye().filter(It=>!It.disabled).map(It=>It.ref.current);if(["ArrowUp","End"].includes(Ve.key)&&(Lt=Lt.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ve.key)){const It=Ve.target,Ot=Lt.indexOf(It);Lt=Lt.slice(Ot+1)}setTimeout(()=>De(Lt)),Ve.preventDefault()}})}))})})})})});H3.displayName=bG;var wG="SelectItemAlignedPosition",q3=L.forwardRef((e,t)=>{const ge=e,{__scopeSelect:n,onPlaced:i}=ge,o=Jt(ge,["__scopeSelect","onPlaced"]),u=Kf(Mm,n),c=Qf(Mm,n),[a,g]=L.useState(null),[_,S]=L.useState(null),E=hr(t,he=>S(he)),A=V1(n),N=L.useRef(!1),z=L.useRef(!0),{viewport:B,selectedItem:$,selectedItemText:q,focusSelectedItem:W}=c,Q=L.useCallback(()=>{if(u.trigger&&u.valueNode&&a&&_&&B&&$&&q){const he=u.trigger.getBoundingClientRect(),pe=_.getBoundingClientRect(),Ie=u.valueNode.getBoundingClientRect(),He=q.getBoundingClientRect();if(u.dir!=="rtl"){const It=He.left-pe.left,Ot=Ie.left-It,en=he.left-Ot,_n=he.width+en,Yn=Math.max(_n,pe.width),Hn=window.innerWidth-du,hn=iM(Ot,[du,Math.max(du,Hn-Yn)]);a.style.minWidth=_n+"px",a.style.left=hn+"px"}else{const It=pe.right-He.right,Ot=window.innerWidth-Ie.right-It,en=window.innerWidth-he.right-Ot,_n=he.width+en,Yn=Math.max(_n,pe.width),Hn=window.innerWidth-du,hn=iM(Ot,[du,Math.max(du,Hn-Yn)]);a.style.minWidth=_n+"px",a.style.right=hn+"px"}const Ye=A(),rt=window.innerHeight-du*2,Rt=B.scrollHeight,St=window.getComputedStyle(_),De=parseInt(St.borderTopWidth,10),Qe=parseInt(St.paddingTop,10),et=parseInt(St.borderBottomWidth,10),Nt=parseInt(St.paddingBottom,10),fe=De+Qe+Rt+Nt+et,Xe=Math.min($.offsetHeight*5,fe),tt=window.getComputedStyle(B),Me=parseInt(tt.paddingTop,10),ot=parseInt(tt.paddingBottom,10),ut=he.top+he.height/2-du,dt=rt-ut,pt=$.offsetHeight/2,Ve=$.offsetTop+pt,Ge=De+Qe+Ve,Dt=fe-Ge;if(Ge<=ut){const It=Ye.length>0&&$===Ye[Ye.length-1].ref.current;a.style.bottom="0px";const Ot=_.clientHeight-B.offsetTop-B.offsetHeight,en=Math.max(dt,pt+(It?ot:0)+Ot+et),_n=Ge+en;a.style.height=_n+"px"}else{const It=Ye.length>0&&$===Ye[0].ref.current;a.style.top="0px";const en=Math.max(ut,De+B.offsetTop+(It?Me:0)+pt)+Dt;a.style.height=en+"px",B.scrollTop=Ge-ut+B.offsetTop}a.style.margin=`${du}px 0`,a.style.minHeight=Xe+"px",a.style.maxHeight=rt+"px",i==null||i(),requestAnimationFrame(()=>N.current=!0)}},[A,u.trigger,u.valueNode,a,_,B,$,q,u.dir,i]);_o(()=>Q(),[Q]);const[Z,K]=L.useState();_o(()=>{_&&K(window.getComputedStyle(_).zIndex)},[_]);const le=L.useCallback(he=>{he&&z.current===!0&&(Q(),W==null||W(),z.current=!1)},[Q,W]);return l.jsx(jG,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:N,onScrollButtonChange:le,children:l.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Z},children:l.jsx(Ui.div,Ee(te({},o),{ref:E,style:te({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})});q3.displayName=wG;var SG="SelectPopperPosition",GS=L.forwardRef((e,t)=>{const a=e,{__scopeSelect:n,align:i="start",collisionPadding:o=du}=a,u=Jt(a,["__scopeSelect","align","collisionPadding"]),c=U1(n);return l.jsx(S3,Ee(te(te({},c),u),{ref:t,align:i,collisionPadding:o,style:Ee(te({boxSizing:"border-box"},u.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});GS.displayName=SG;var[jG,UC]=Py(Mm,{}),WS="SelectViewport",G3=L.forwardRef((e,t)=>{const _=e,{__scopeSelect:n,nonce:i}=_,o=Jt(_,["__scopeSelect","nonce"]),u=Qf(WS,n),c=UC(WS,n),a=hr(t,u.onViewportChange),g=L.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),l.jsx(B1.Slot,{scope:n,children:l.jsx(Ui.div,Ee(te({"data-radix-select-viewport":"",role:"presentation"},o),{ref:a,style:te({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:gs(o.onScroll,S=>{const E=S.currentTarget,{contentWrapper:A,shouldExpandOnScrollRef:N}=c;if(N!=null&&N.current&&A){const z=Math.abs(g.current-E.scrollTop);if(z>0){const B=window.innerHeight-du*2,$=parseFloat(A.style.minHeight),q=parseFloat(A.style.height),W=Math.max($,q);if(W<B){const Q=W+z,Z=Math.min(B,Q),K=Q-Z;A.style.height=Z+"px",A.style.bottom==="0px"&&(E.scrollTop=K>0?K:0,A.style.justifyContent="flex-end")}}}g.current=E.scrollTop})}))})]})});G3.displayName=WS;var W3="SelectGroup",[CG,TG]=Py(W3),Z3=L.forwardRef((e,t)=>{const u=e,{__scopeSelect:n}=u,i=Jt(u,["__scopeSelect"]),o=Fl();return l.jsx(CG,{scope:n,id:o,children:l.jsx(Ui.div,Ee(te({role:"group","aria-labelledby":o},i),{ref:t}))})});Z3.displayName=W3;var Y3="SelectLabel",X3=L.forwardRef((e,t)=>{const u=e,{__scopeSelect:n}=u,i=Jt(u,["__scopeSelect"]),o=TG(Y3,n);return l.jsx(Ui.div,Ee(te({id:o.id},i),{ref:t}))});X3.displayName=Y3;var Kv="SelectItem",[kG,K3]=Py(Kv),Q3=L.forwardRef((e,t)=>{const W=e,{__scopeSelect:n,value:i,disabled:o=!1,textValue:u}=W,c=Jt(W,["__scopeSelect","value","disabled","textValue"]),a=Kf(Kv,n),g=Qf(Kv,n),_=a.value===i,[S,E]=L.useState(u!=null?u:""),[A,N]=L.useState(!1),z=hr(t,Q=>{var Z;return(Z=g.itemRefCallback)==null?void 0:Z.call(g,Q,i,o)}),B=Fl(),$=L.useRef("touch"),q=()=>{o||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(kG,{scope:n,value:i,disabled:o,textId:B,isSelected:_,onItemTextChange:L.useCallback(Q=>{E(Z=>{var K;return Z||((K=Q==null?void 0:Q.textContent)!=null?K:"").trim()})},[]),children:l.jsx(B1.ItemSlot,{scope:n,value:i,disabled:o,textValue:S,children:l.jsx(Ui.div,Ee(te({role:"option","aria-labelledby":B,"data-highlighted":A?"":void 0,"aria-selected":_&&A,"data-state":_?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},c),{ref:z,onFocus:gs(c.onFocus,()=>N(!0)),onBlur:gs(c.onBlur,()=>N(!1)),onClick:gs(c.onClick,()=>{$.current!=="mouse"&&q()}),onPointerUp:gs(c.onPointerUp,()=>{$.current==="mouse"&&q()}),onPointerDown:gs(c.onPointerDown,Q=>{$.current=Q.pointerType}),onPointerMove:gs(c.onPointerMove,Q=>{var Z;$.current=Q.pointerType,o?(Z=g.onItemLeave)==null||Z.call(g):$.current==="mouse"&&Q.currentTarget.focus({preventScroll:!0})}),onPointerLeave:gs(c.onPointerLeave,Q=>{var Z;Q.currentTarget===document.activeElement&&((Z=g.onItemLeave)==null||Z.call(g))}),onKeyDown:gs(c.onKeyDown,Q=>{var K;((K=g.searchRef)==null?void 0:K.current)!==""&&Q.key===" "||(fG.includes(Q.key)&&q(),Q.key===" "&&Q.preventDefault())})}))})})});Q3.displayName=Kv;var e0="SelectItemText",J3=L.forwardRef((e,t)=>{const q=e,{__scopeSelect:n,className:i,style:o}=q,u=Jt(q,["__scopeSelect","className","style"]),c=Kf(e0,n),a=Qf(e0,n),g=K3(e0,n),_=yG(e0,n),[S,E]=L.useState(null),A=hr(t,W=>E(W),g.onItemTextChange,W=>{var Q;return(Q=a.itemTextRefCallback)==null?void 0:Q.call(a,W,g.value,g.disabled)}),N=S==null?void 0:S.textContent,z=L.useMemo(()=>l.jsx("option",{value:g.value,disabled:g.disabled,children:N},g.value),[g.disabled,g.value,N]),{onNativeOptionAdd:B,onNativeOptionRemove:$}=_;return _o(()=>(B(z),()=>$(z)),[B,$,z]),l.jsxs(l.Fragment,{children:[l.jsx(Ui.span,Ee(te({id:g.textId},u),{ref:A})),g.isSelected&&c.valueNode&&!c.valueNodeHasChildren?X0.createPortal(u.children,c.valueNode):null]})});J3.displayName=e0;var e6="SelectItemIndicator",t6=L.forwardRef((e,t)=>{const u=e,{__scopeSelect:n}=u,i=Jt(u,["__scopeSelect"]);return K3(e6,n).isSelected?l.jsx(Ui.span,Ee(te({"aria-hidden":!0},i),{ref:t})):null});t6.displayName=e6;var ZS="SelectScrollUpButton",n6=L.forwardRef((e,t)=>{const n=Qf(ZS,e.__scopeSelect),i=UC(ZS,e.__scopeSelect),[o,u]=L.useState(!1),c=hr(t,i.onScrollButtonChange);return _o(()=>{if(n.viewport&&n.isPositioned){let a=function(){const _=g.scrollTop>0;u(_)};const g=n.viewport;return a(),g.addEventListener("scroll",a),()=>g.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?l.jsx(s6,Ee(te({},e),{ref:c,onAutoScroll:()=>{const{viewport:a,selectedItem:g}=n;a&&g&&(a.scrollTop=a.scrollTop-g.offsetHeight)}})):null});n6.displayName=ZS;var YS="SelectScrollDownButton",i6=L.forwardRef((e,t)=>{const n=Qf(YS,e.__scopeSelect),i=UC(YS,e.__scopeSelect),[o,u]=L.useState(!1),c=hr(t,i.onScrollButtonChange);return _o(()=>{if(n.viewport&&n.isPositioned){let a=function(){const _=g.scrollHeight-g.clientHeight,S=Math.ceil(g.scrollTop)<_;u(S)};const g=n.viewport;return a(),g.addEventListener("scroll",a),()=>g.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?l.jsx(s6,Ee(te({},e),{ref:c,onAutoScroll:()=>{const{viewport:a,selectedItem:g}=n;a&&g&&(a.scrollTop=a.scrollTop+g.offsetHeight)}})):null});i6.displayName=YS;var s6=L.forwardRef((e,t)=>{const _=e,{__scopeSelect:n,onAutoScroll:i}=_,o=Jt(_,["__scopeSelect","onAutoScroll"]),u=Qf("SelectScrollButton",n),c=L.useRef(null),a=V1(n),g=L.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return L.useEffect(()=>()=>g(),[g]),_o(()=>{var E;const S=a().find(A=>A.ref.current===document.activeElement);(E=S==null?void 0:S.ref.current)==null||E.scrollIntoView({block:"nearest"})},[a]),l.jsx(Ui.div,Ee(te({"aria-hidden":!0},o),{ref:t,style:te({flexShrink:0},o.style),onPointerDown:gs(o.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:gs(o.onPointerMove,()=>{var S;(S=u.onItemLeave)==null||S.call(u),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:gs(o.onPointerLeave,()=>{g()})}))}),EG="SelectSeparator",MG=L.forwardRef((e,t)=>{const o=e,{__scopeSelect:n}=o,i=Jt(o,["__scopeSelect"]);return l.jsx(Ui.div,Ee(te({"aria-hidden":!0},i),{ref:t}))});MG.displayName=EG;var XS="SelectArrow",NG=L.forwardRef((e,t)=>{const a=e,{__scopeSelect:n}=a,i=Jt(a,["__scopeSelect"]),o=U1(n),u=Kf(XS,n),c=Qf(XS,n);return u.open&&c.position==="popper"?l.jsx(j3,Ee(te(te({},o),i),{ref:t})):null});NG.displayName=XS;var AG="SelectBubbleInput",r6=L.forwardRef((o,i)=>{var u=o,{__scopeSelect:e,value:t}=u,n=Jt(u,["__scopeSelect","value"]);const c=L.useRef(null),a=hr(i,c),g=qH(t);return L.useEffect(()=>{const _=c.current;if(!_)return;const S=window.HTMLSelectElement.prototype,A=Object.getOwnPropertyDescriptor(S,"value").set;if(g!==t&&A){const N=new Event("change",{bubbles:!0});A.call(_,t),_.dispatchEvent(N)}},[g,t]),l.jsx(Ui.select,Ee(te({},n),{style:te(te({},P5),n.style),ref:a,defaultValue:t}))});r6.displayName=AG;function a6(e){return e===""||e===void 0}function o6(e){const t=Cm(e),n=L.useRef(""),i=L.useRef(0),o=L.useCallback(c=>{const a=n.current+c;t(a),function g(_){n.current=_,window.clearTimeout(i.current),_!==""&&(i.current=window.setTimeout(()=>g(""),1e3))}(a)},[t]),u=L.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return L.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,o,u]}function l6(e,t,n){const o=t.length>1&&Array.from(t).every(_=>_===t[0])?t[0]:t,u=n?e.indexOf(n):-1;let c=PG(e,Math.max(u,0));o.length===1&&(c=c.filter(_=>_!==n));const g=c.find(_=>_.textValue.toLowerCase().startsWith(o.toLowerCase()));return g!==n?g:void 0}function PG(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var RG=z3,DG=O3,zG=L3,IG=B3,OG=V3,FG=U3,LG=G3,BG=Z3,VG=X3,UG=Q3,$G=J3,HG=t6,qG=n6,GG=i6,y2={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var sM;function WG(){return sM||(sM=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var u="",c=0;c<arguments.length;c++){var a=arguments[c];a&&(u=o(u,i(a)))}return u}function i(u){if(typeof u=="string"||typeof u=="number")return u;if(typeof u!="object")return"";if(Array.isArray(u))return n.apply(null,u);if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]"))return u.toString();var c="";for(var a in u)t.call(u,a)&&u[a]&&(c=o(c,a));return c}function o(u,c){return c?u?u+" "+c:u+c:u}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(y2)),y2.exports}var ZG=WG();const zf=G0(ZG),c6={asChild:{type:"boolean"}},u6=["gray","gold","bronze","brown","yellow","amber","orange","tomato","red","ruby","crimson","pink","plum","purple","violet","iris","indigo","blue","cyan","teal","jade","green","grass","lime","mint","sky"],YG={color:{type:"enum",values:u6,default:void 0}},XG={color:{type:"enum",values:u6,default:""}},d6={highContrast:{type:"boolean",className:"rt-high-contrast",default:void 0}},KG=["normal","start","end","both"],QG={trim:{type:"enum",className:"rt-r-lt",values:KG,responsive:!0}},JG=["left","center","right"],eW={align:{type:"enum",className:"rt-r-ta",values:JG,responsive:!0}},tW=["wrap","nowrap","pretty","balance"],nW={wrap:{type:"enum",className:"rt-r-tw",values:tW,responsive:!0}},iW={truncate:{type:"boolean",className:"rt-truncate"}},sW=["light","regular","medium","bold"],rW={weight:{type:"enum",className:"rt-r-weight",values:sW,responsive:!0}},$C=["initial","xs","sm","md","lg","xl"];function h6(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d0(e){return typeof e=="object"&&Object.keys(e).some(t=>$C.includes(t))}function aW(i){var o=i,{className:e,customProperties:t}=o,n=Jt(o,["className","customProperties"]);const u=f6(te({allowArbitraryValues:!0,className:e},n)),c=oW(te({customProperties:t},n));return[u,c]}function f6({allowArbitraryValues:e,value:t,className:n,propValues:i,parseValue:o=u=>u}){const u=[];if(t){if(typeof t=="string"&&i.includes(t))return rM(n,t,o);if(d0(t)){const c=t;for(const a in c){if(!h6(c,a)||!$C.includes(a))continue;const g=c[a];if(g!==void 0){if(i.includes(g)){const _=rM(n,g,o),S=a==="initial"?_:`${a}:${_}`;u.push(S)}else if(e){const _=a==="initial"?n:`${a}:${n}`;u.push(_)}}}return u.join(" ")}if(e)return n}}function rM(e,t,n){const i=e?"-":"",o=n(t),u=o==null?void 0:o.startsWith("-"),c=u?"-":"",a=u?o==null?void 0:o.substring(1):o;return`${c}${e}${i}${a}`}function oW({customProperties:e,value:t,propValues:n,parseValue:i=o=>o}){let o={};if(!(!t||typeof t=="string"&&n.includes(t))){if(typeof t=="string"&&(o=Object.fromEntries(e.map(u=>[u,t]))),d0(t)){const u=t;for(const c in u){if(!h6(u,c)||!$C.includes(c))continue;const a=u[c];if(!n.includes(a))for(const g of e)o=te({[c==="initial"?g:`${g}-${c}`]:a},o)}}for(const u in o){const c=o[u];c!==void 0&&(o[u]=i(c))}return o}}function aM(...e){let t={};for(const n of e)n&&(t=te(te({},t),n));return Object.keys(t).length?t:void 0}function lW(...e){return Object.assign({},...e)}function p6(e,...t){let n,i;const o=te({},e),u=lW(...t);for(const c in u){let a=o[c];const g=u[c];if(g.default!==void 0&&a===void 0&&(a=g.default),g.type==="enum"&&![g.default,...g.values].includes(a)&&!d0(a)&&(a=g.default),o[c]=a,"className"in g&&g.className){delete o[c];const _="responsive"in g;if(!a||d0(a)&&!_)continue;if(d0(a)&&(g.default!==void 0&&a.initial===void 0&&(a.initial=g.default),g.type==="enum"&&([g.default,...g.values].includes(a.initial)||(a.initial=g.default))),g.type==="enum"){const S=f6({allowArbitraryValues:!1,value:a,className:g.className,propValues:g.values,parseValue:g.parseValue});n=zf(n,S);continue}if(g.type==="string"||g.type==="enum | string"){const S=g.type==="string"?[]:g.values,[E,A]=aW({className:g.className,customProperties:g.customProperties,propValues:S,parseValue:g.parseValue,value:a});i=aM(i,A),n=zf(n,E);continue}if(g.type==="boolean"&&a){n=zf(n,g.className);continue}}}return o.className=zf(n,e.className),o.style=aM(i,e.style),o}const Xp=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],m6={m:{type:"enum | string",values:Xp,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:Xp,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:Xp,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:Xp,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:Xp,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:Xp,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:Xp,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},cW=["span","div","label","p"],uW=["1","2","3","4","5","6","7","8","9"],dW=te(te(te(te(te(te(te(Ee(te({as:{type:"enum",values:cW,default:"span"}},c6),{size:{type:"enum",className:"rt-r-size",values:uW,responsive:!0}}),rW),eW),QG),iW),nW),YG),d6),HC=L.forwardRef((e,t)=>{const g=p6(e,dW,m6),{children:n,className:i,asChild:o,as:u="span",color:c}=g,a=Jt(g,["children","className","asChild","as","color"]);return L.createElement(aC,Ee(te({"data-accent-color":c},a),{ref:t,className:zf("rt-Text",i)}),o?n:L.createElement(u,null,n))});HC.displayName="Text";function hW(e,t){if(e!==void 0)return typeof e=="string"?t(e):Object.fromEntries(Object.entries(e).map(([n,i])=>[n,t(i)]))}function fW(e){return e==="3"?"3":"2"}const pW=["1","2","3"],mW=["soft","surface","outline"],oM=te(te(Ee(te({},c6),{size:{type:"enum",className:"rt-r-size",values:pW,default:"2",responsive:!0},variant:{type:"enum",className:"rt-variant",values:mW,default:"soft"}}),XG),d6),g6=L.createContext({}),y6=L.forwardRef((e,t)=>{const{size:n=oM.size.default}=e,_=p6(e,oM,m6),{asChild:i,children:o,className:u,color:c}=_,a=Jt(_,["asChild","children","className","color"]),g=i?aC:"div";return L.createElement(g,Ee(te({"data-accent-color":c},a),{className:zf("rt-CalloutRoot",u),ref:t}),L.createElement(g6.Provider,{value:L.useMemo(()=>({size:n}),[n])},o))});y6.displayName="Callout.Root";const x6=L.forwardRef((i,n)=>{var o=i,{className:e}=o,t=Jt(o,["className"]);return L.createElement("div",Ee(te({},t),{className:zf("rt-CalloutIcon",e),ref:n}))});x6.displayName="Callout.Icon";const _6=L.forwardRef((i,n)=>{var o=i,{className:e}=o,t=Jt(o,["className"]);const{size:u}=L.useContext(g6);return L.createElement(HC,Ee(te({as:"p",size:hW(u,fW)},t),{asChild:!1,ref:n,className:zf("rt-CalloutText",e)}))});_6.displayName="Callout.Text";const b6=({rootProps:e,iconProps:t,textProps:n,textChildren:i,iconChildren:o})=>l.jsxs(y6,Ee(te({},e),{className:y1("animate-fadein",e==null?void 0:e.className),children:[l.jsx(x6,Ee(te({},t),{children:o})),l.jsx(_6,Ee(te({},n),{children:i}))]})),gW=n=>{var i=n,{children:e}=i,t=Jt(i,["children"]);return l.jsx(b6,{rootProps:{color:"red"},iconChildren:l.jsx(DU,{size:"18"}),textChildren:e||t.message||"An error occurred"})},yW=({error:e,overrideHeading:t,children:n})=>{const i=L.useMemo(()=>{var u,c;if(!e)return[];let o=e!=null&&e._server_messages?JSON.parse(e==null?void 0:e._server_messages):[];if(o=o.map(a=>{try{return JSON.parse(a)}catch(g){return a}}),o.length===0){const a=(u=e==null?void 0:e.exception)==null?void 0:u.indexOf(":");if(a!==-1){const g=(c=e==null?void 0:e.exception)==null?void 0:c.slice(a+1);g&&(o=[{message:g,title:"Error"}])}o.length===0&&(o=[{message:e==null?void 0:e.message,title:"Error",indicator:"red"}])}return o},[e]);return i.length===0||!e?null:l.jsxs(gW,{children:[t&&l.jsx(HC,{weight:"bold",size:"2",children:t}),i.map((o,u)=>l.jsx("div",{dangerouslySetInnerHTML:{__html:o.message}},u)),n]})};function xW(e,t){return e.replace(/{(\d+)}/g,function(n,i){return typeof t[i]!="undefined"?t[i]:n})}function _W(e,t,n=null){var c,a;const i=((a=(c=window==null?void 0:window.frappe)==null?void 0:c.boot)==null?void 0:a.__messages)||{};let o="";if(n){let g=`${e}:${n}`;i[g]&&(o=i[g])}return o||(o=i[e]||e),/{\d+}/.test(e)?xW(o,t):o}const ca=_W,bW=({isOpen:e,setIsOpen:t,refreshChannels:n})=>{const i="New admin office construction";Pr();const{mutate:o}=SA(),{data:u}=md("raven.api.workspaces.can_create_channel",{workspace:i},void 0),c=BS({defaultValues:{type:"Public",channel_name:"",channel_description:""}}),{register:a,handleSubmit:g,watch:_,control:S,setValue:E,reset:A,formState:{errors:N}}=c,{createDoc:z,error:B,loading:$,reset:q}=_y(),W=(Ie,He)=>{Ie&&(window.location.href=`https://mycardpng.com/raven/${He}/${Ie}`,o(["channel_members",Ie])),t(!1),Q()},Q=()=>{q(),A()},Z=Ie=>{z("Raven Channel",Ee(te({},Ie),{workspace:i})).then(He=>{He&&(o("channel_list",Ye=>({message:Ee(te({},Ye.message),{channels:[...Ye.message.channels,te({},He)]})}),{revalidate:!1}),$a.success(ca("Channel created")),n(),W(He.name,i))})},K=L.useCallback(Ie=>{var He;E("channel_name",(He=Ie.target.value)==null?void 0:He.toLowerCase().replace(" ","-"))},[E]),le=_("type"),{channelIcon:ge,header:he,helperText:pe}=L.useMemo(()=>{switch(le){case"Private":return{channelIcon:l.jsx(l$,{}),header:ca("Create a private channel"),helperText:ca("Only invited users can view or join.")};case"Open":return{channelIcon:l.jsx(r$,{}),header:ca("Create an open channel"),helperText:ca("Everyone in the workspace is a member.")};default:return{channelIcon:l.jsx(a$,{}),header:ca("Create a public channel"),helperText:ca("Anyone can read messages. Members can post.")}}},[le]);return l.jsx(BU,Ee(te({},c),{children:l.jsxs("form",{onSubmit:g(Z),className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:he}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:ca("Channels are best when organized around a topic.")})]}),!(u!=null&&u.message)&&l.jsx(b6,{iconChildren:l.jsx(o$,{size:"18"}),rootProps:{color:"yellow",variant:"surface"},textChildren:l.jsx("p",{className:"text-yellow-800",children:"You cannot create a new channel since you're not an admin. Ask an admin to create one or make you an admin."})}),l.jsx(yW,{error:B}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"channel_name",className:"block font-medium mb-1",children:[ca("Name")," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx(HU,{name:"channel_name",control:S,rules:{required:ca("Please add a channel name"),minLength:{value:3,message:ca("Minimum 3 characters.")},maxLength:{value:50,message:ca("Maximum 50 characters.")},pattern:{value:/^[a-zA-Z0-9][a-zA-Z0-9-]*$/,message:ca("Only letters, numbers, and hyphens allowed.")}},render:({field:Ie,fieldState:{error:He}})=>l.jsx("input",Ee(te({type:"text"},Ie),{onChange:K,maxLength:50,className:`w-full px-4 py-2 border rounded-md ${He?"border-red-500":"border-gray-300"}`,placeholder:"e.g. project-x-team"}))}),N.channel_name&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.channel_name.message})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"channel_description",className:"block font-medium mb-1",children:[ca("Description")," ",l.jsxs("span",{className:"text-sm text-gray-400",children:["(",ca("optional"),")"]})]}),l.jsx("textarea",Ee(te({id:"channel_description"},a("channel_description",{maxLength:{value:140,message:ca("Max 140 characters.")}})),{className:"w-full px-4 py-2 border border-gray-300 rounded-md resize-none",maxLength:140,placeholder:"Describe the channels purpose..."})),N.channel_description&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.channel_description.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2",children:"Channel Type"}),l.jsx("div",{className:"flex space-x-4",children:["Public","Private","Open"].map(Ie=>l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",value:Ie,checked:le===Ie,onChange:()=>E("type",Ie)}),l.jsx("span",{children:Ie})]},Ie))}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:pe})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded border text-gray-700 hover:bg-gray-100",onClick:()=>t(!1),disabled:$,children:ca("Cancel")}),l.jsx("button",{type:"submit",className:"px-4 py-2 rounded text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",disabled:$,children:$?l.jsxs(l.Fragment,{children:[l.jsx(c$,{className:"inline mr-2"}),ca("Saving")]}):ca("Save")})]})]})}))},v6=({refreshChannels:e})=>{const[t,n]=L.useState(!1);return OU(),l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-600 dark:text-white","aria-label":"Create Channel",onClick:()=>n(!0),children:l.jsx(zU,{size:16})}),t&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-transparent ",children:l.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-[#151518] rounded-lg shadow-lg relative p-6",children:[l.jsx("button",{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800",onClick:()=>n(!1),children:""}),l.jsx(bW,{isOpen:t,setIsOpen:n,refreshChannels:e})]})})]})},vW=()=>{var n;Pr();const{data:e,mutate:t}=md("raven.api.raven_channel.get_all_channels",{hide_archived:!0});return console.log("channelList",e),l.jsxs("div",{className:"w-60 bg-white shadow-sm rounded-[20px] text-xs mt-5",children:[l.jsxs("div",{className:"w-full flex justify-between items-center p-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(v6,{refreshChannels:t}),l.jsx("h1",{children:"Group"})]}),l.jsx("p",{children:(n=e==null?void 0:e.message)==null?void 0:n.channels.length})]}),l.jsx("div",{className:"h-[1px] w-full bg-gray-200"}),e&&e.message.channels.map((i,o)=>l.jsxs("div",{onClick:()=>window.location.href=`https://mycard.anantdv.com/raven/New%20admin%20office%20construction/${i.name}`,className:"w-full flex items-center gap-2 p-3 cursor-pointer hover:bg-gray-100",children:[l.jsx("div",{className:"bg-blue-500 text-white flex items-center justify-center rounded-full h-10 w-10",children:i.channel_name[0].toUpperCase()}),l.jsx("p",{children:i.channel_name})]},o))]})},wW=()=>{const[e,t]=L.useState(!1);Pr();const n=Qi.get("user_id");Qi.get("user_image"),Qi.get("full_name");const{data:i}=jh("User",n,{fields:["*"]}),{data:o}=md("raven.api.raven_users.get_list");return l.jsxs("div",{className:"flex mx-4 md:mx-12 flex-col md:flex-row justify-between h-screen overflow-hidden",children:[l.jsx("div",{className:"hidden lg:block lg:sticky lg:top-5 h-screen overflow-y-auto left-side mt-5"}),l.jsx("div",{className:"middle flex-grow overflow-y-auto w-full md:mx-4",children:l.jsx(CU,{})}),l.jsxs("div",{className:"hidden lg:block right-side mt-5 lg:top-5 h-66 no-scrollbar",children:[l.jsxs("div",{className:"lg:w-76 bg-white shadow-sm rounded-[20px] flex flex-col justify-center items-center text-xs",children:[l.jsxs("div",{className:"w-full flex justify-between p-3",children:[l.jsx("h1",{children:"Add to your feed"}),l.jsx(cB,{})]}),l.jsx("div",{className:"h-[1px] w-full bg-gray-200"}),l.jsx("div",{className:"h-66 overflow-y-auto no-scrollbar",children:o&&o.message.map((u,c)=>l.jsxs("div",{className:"w-full px-5",children:[l.jsx(TU,{setUserChange:t,user:u}),c!==o.length-1&&l.jsx("div",{className:"h-[1px] w-full bg-gray-200"})]},c))})]}),l.jsx(vW,{})]})]})};function SW(t){var e=Jt(t,[]);return l.jsx(RG,te({"data-slot":"select"},e))}function jW(t){var e=Jt(t,[]);return l.jsx(BG,te({"data-slot":"select-group"},e))}function CW(t){var e=Jt(t,[]);return l.jsx(zG,te({"data-slot":"select-value"},e))}function TW(o){var u=o,{className:e,size:t="default",children:n}=u,i=Jt(u,["className","size","children"]);return l.jsxs(DG,Ee(te({"data-slot":"select-trigger","data-size":t,className:wr("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e)},i),{children:[n,l.jsx(IG,{asChild:!0,children:l.jsx(Mv,{className:"size-4 opacity-50"})})]}))}function kW(o){var u=o,{className:e,children:t,position:n="popper"}=u,i=Jt(u,["className","children","position"]);return l.jsx(OG,{children:l.jsxs(FG,Ee(te({"data-slot":"select-content",className:wr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n},i),{children:[l.jsx(NW,{}),l.jsx(LG,{className:wr("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),l.jsx(AW,{})]}))})}function EW(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx(VG,te({"data-slot":"select-label",className:wr("text-muted-foreground px-2 py-1.5 text-xs",e)},t))}function MW(i){var o=i,{className:e,children:t}=o,n=Jt(o,["className","children"]);return l.jsxs(UG,Ee(te({"data-slot":"select-item",className:wr("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e)},n),{children:[l.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:l.jsx(HG,{children:l.jsx(yP,{className:"size-4"})})}),l.jsx($G,{children:t})]}))}function NW(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx(qG,Ee(te({"data-slot":"select-scroll-up-button",className:wr("flex cursor-default items-center justify-center py-1",e)},t),{children:l.jsx(pL,{className:"size-4"})}))}function AW(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx(GG,Ee(te({"data-slot":"select-scroll-down-button",className:wr("flex cursor-default items-center justify-center py-1",e)},t),{children:l.jsx(Mv,{className:"size-4"})}))}const w6=L.createContext({});function PW(e){const t=L.useRef(null);return t.current===null&&(t.current=e()),t.current}const qC=typeof window!="undefined",RW=qC?L.useLayoutEffect:L.useEffect,GC=L.createContext(null);function WC(e,t){e.indexOf(t)===-1&&e.push(t)}function ZC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Mh=(e,t,n)=>n>t?t:n<e?e:n;let YC=()=>{};const Nh={},S6=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function j6(e){return typeof e=="object"&&e!==null}const C6=e=>/^0[^.\s]+$/u.test(e);function XC(e){let t;return()=>(t===void 0&&(t=e()),t)}const bc=e=>e,DW=(e,t)=>n=>t(e(n)),o_=(...e)=>e.reduce(DW),P0=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class KC{constructor(){this.subscriptions=[]}add(t){return WC(this.subscriptions,t),()=>ZC(this.subscriptions,t)}notify(t,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,i);else for(let u=0;u<o;u++){const c=this.subscriptions[u];c&&c(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yd=e=>e*1e3,xd=e=>e/1e3;function T6(e,t){return t?e*(1e3/t):0}const k6=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,zW=1e-7,IW=12;function OW(e,t,n,i,o){let u,c,a=0;do c=t+(n-t)/2,u=k6(c,i,o)-e,u>0?n=c:t=c;while(Math.abs(u)>zW&&++a<IW);return c}function l_(e,t,n,i){if(e===t&&n===i)return bc;const o=u=>OW(u,0,1,e,n);return u=>u===0||u===1?u:k6(o(u),t,i)}const E6=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,M6=e=>t=>1-e(1-t),N6=l_(.33,1.53,.69,.99),QC=M6(N6),A6=E6(QC),P6=e=>(e*=2)<1?.5*QC(e):.5*(2-Math.pow(2,-10*(e-1))),JC=e=>1-Math.sin(Math.acos(e)),R6=M6(JC),D6=E6(JC),FW=l_(.42,0,1,1),LW=l_(0,0,.58,1),z6=l_(.42,0,.58,1),BW=e=>Array.isArray(e)&&typeof e[0]!="number",I6=e=>Array.isArray(e)&&typeof e[0]=="number",VW={linear:bc,easeIn:FW,easeInOut:z6,easeOut:LW,circIn:JC,circInOut:D6,circOut:R6,backIn:QC,backInOut:A6,backOut:N6,anticipate:P6},UW=e=>typeof e=="string",lM=e=>{if(I6(e)){YC(e.length===4);const[t,n,i,o]=e;return l_(t,n,i,o)}else if(UW(e))return VW[e];return e},vb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function $W(e,t){let n=new Set,i=new Set,o=!1,u=!1;const c=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function g(S){c.has(S)&&(_.schedule(S),e()),S(a)}const _={schedule:(S,E=!1,A=!1)=>{const z=A&&o?n:i;return E&&c.add(S),z.has(S)||z.add(S),S},cancel:S=>{i.delete(S),c.delete(S)},process:S=>{if(a=S,o){u=!0;return}o=!0,[n,i]=[i,n],n.forEach(g),n.clear(),o=!1,u&&(u=!1,_.process(S))}};return _}const HW=40;function O6(e,t){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,c=vb.reduce((Q,Z)=>(Q[Z]=$W(u),Q),{}),{setup:a,read:g,resolveKeyframes:_,preUpdate:S,update:E,preRender:A,render:N,postRender:z}=c,B=()=>{const Q=Nh.useManualTiming?o.timestamp:performance.now();n=!1,Nh.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(Q-o.timestamp,HW),1)),o.timestamp=Q,o.isProcessing=!0,a.process(o),g.process(o),_.process(o),S.process(o),E.process(o),A.process(o),N.process(o),z.process(o),o.isProcessing=!1,n&&t&&(i=!1,e(B))},$=()=>{n=!0,i=!0,o.isProcessing||e(B)};return{schedule:vb.reduce((Q,Z)=>{const K=c[Z];return Q[Z]=(le,ge=!1,he=!1)=>(n||$(),K.schedule(le,ge,he)),Q},{}),cancel:Q=>{for(let Z=0;Z<vb.length;Z++)c[vb[Z]].cancel(Q)},state:o,steps:c}}const{schedule:sr,cancel:Hf,state:Ua,steps:x2}=O6(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:bc,!0);let ov;function qW(){ov=void 0}const ul={now:()=>(ov===void 0&&ul.set(Ua.isProcessing||Nh.useManualTiming?Ua.timestamp:performance.now()),ov),set:e=>{ov=e,queueMicrotask(qW)}},F6=e=>t=>typeof t=="string"&&t.startsWith(e),eT=F6("--"),GW=F6("var(--"),tT=e=>GW(e)?WW.test(e.split("/*")[0].trim()):!1,WW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ry={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},R0=Ee(te({},Ry),{transform:e=>Mh(0,1,e)}),wb=Ee(te({},Ry),{default:1}),h0=e=>Math.round(e*1e5)/1e5,nT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ZW(e){return e==null}const YW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,iT=(e,t)=>n=>!!(typeof n=="string"&&YW.test(n)&&n.startsWith(e)||t&&!ZW(n)&&Object.prototype.hasOwnProperty.call(n,t)),L6=(e,t,n)=>i=>{if(typeof i!="string")return i;const[o,u,c,a]=i.match(nT);return{[e]:parseFloat(o),[t]:parseFloat(u),[n]:parseFloat(c),alpha:a!==void 0?parseFloat(a):1}},XW=e=>Mh(0,255,e),_2=Ee(te({},Ry),{transform:e=>Math.round(XW(e))}),cm={test:iT("rgb","red"),parse:L6("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+_2.transform(e)+", "+_2.transform(t)+", "+_2.transform(n)+", "+h0(R0.transform(i))+")"};function KW(e){let t="",n="",i="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,i+=i,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const KS={test:iT("#"),parse:KW,transform:cm.transform},c_=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Pf=c_("deg"),_d=c_("%"),hi=c_("px"),QW=c_("vh"),JW=c_("vw"),cM=Ee(te({},_d),{parse:e=>_d.parse(e)/100,transform:e=>_d.transform(e*100)}),Yg={test:iT("hsl","hue"),parse:L6("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+_d.transform(h0(t))+", "+_d.transform(h0(n))+", "+h0(R0.transform(i))+")"},Zr={test:e=>cm.test(e)||KS.test(e)||Yg.test(e),parse:e=>cm.test(e)?cm.parse(e):Yg.test(e)?Yg.parse(e):KS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?cm.transform(e):Yg.transform(e),getAnimatableNone:e=>{const t=Zr.parse(e);return t.alpha=0,Zr.transform(t)}},eZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tZ(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(nT))==null?void 0:t.length)||0)+(((n=e.match(eZ))==null?void 0:n.length)||0)>0}const B6="number",V6="color",nZ="var",iZ="var(",uM="${}",sZ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function D0(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},o=[];let u=0;const a=t.replace(sZ,g=>(Zr.test(g)?(i.color.push(u),o.push(V6),n.push(Zr.parse(g))):g.startsWith(iZ)?(i.var.push(u),o.push(nZ),n.push(g)):(i.number.push(u),o.push(B6),n.push(parseFloat(g))),++u,uM)).split(uM);return{values:n,split:a,indexes:i,types:o}}function U6(e){return D0(e).values}function $6(e){const{split:t,types:n}=D0(e),i=t.length;return o=>{let u="";for(let c=0;c<i;c++)if(u+=t[c],o[c]!==void 0){const a=n[c];a===B6?u+=h0(o[c]):a===V6?u+=Zr.transform(o[c]):u+=o[c]}return u}}const rZ=e=>typeof e=="number"?0:Zr.test(e)?Zr.getAnimatableNone(e):e;function aZ(e){const t=U6(e);return $6(e)(t.map(rZ))}const qf={test:tZ,parse:U6,createTransformer:$6,getAnimatableNone:aZ};function b2(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function oZ({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let o=0,u=0,c=0;if(!t)o=u=c=n;else{const a=n<.5?n*(1+t):n+t-n*t,g=2*n-a;o=b2(g,a,e+1/3),u=b2(g,a,e),c=b2(g,a,e-1/3)}return{red:Math.round(o*255),green:Math.round(u*255),blue:Math.round(c*255),alpha:i}}function Qv(e,t){return n=>n>0?t:e}const dr=(e,t,n)=>e+(t-e)*n,v2=(e,t,n)=>{const i=e*e,o=n*(t*t-i)+i;return o<0?0:Math.sqrt(o)},lZ=[KS,cm,Yg],cZ=e=>lZ.find(t=>t.test(e));function dM(e){const t=cZ(e);if(!t)return!1;let n=t.parse(e);return t===Yg&&(n=oZ(n)),n}const hM=(e,t)=>{const n=dM(e),i=dM(t);if(!n||!i)return Qv(e,t);const o=te({},n);return u=>(o.red=v2(n.red,i.red,u),o.green=v2(n.green,i.green,u),o.blue=v2(n.blue,i.blue,u),o.alpha=dr(n.alpha,i.alpha,u),cm.transform(o))},QS=new Set(["none","hidden"]);function uZ(e,t){return QS.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function dZ(e,t){return n=>dr(e,t,n)}function sT(e){return typeof e=="number"?dZ:typeof e=="string"?tT(e)?Qv:Zr.test(e)?hM:pZ:Array.isArray(e)?H6:typeof e=="object"?Zr.test(e)?hM:hZ:Qv}function H6(e,t){const n=[...e],i=n.length,o=e.map((u,c)=>sT(u)(u,t[c]));return u=>{for(let c=0;c<i;c++)n[c]=o[c](u);return n}}function hZ(e,t){const n=te(te({},e),t),i={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(i[o]=sT(e[o])(e[o],t[o]));return o=>{for(const u in i)n[u]=i[u](o);return n}}function fZ(e,t){var o;const n=[],i={color:0,var:0,number:0};for(let u=0;u<t.values.length;u++){const c=t.types[u],a=e.indexes[c][i[c]],g=(o=e.values[a])!=null?o:0;n[u]=g,i[c]++}return n}const pZ=(e,t)=>{const n=qf.createTransformer(t),i=D0(e),o=D0(t);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?QS.has(e)&&!o.values.length||QS.has(t)&&!i.values.length?uZ(e,t):o_(H6(fZ(i,o),o.values),n):Qv(e,t)};function q6(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?dr(e,t,n):sT(e)(e,t)}const mZ=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>sr.update(t,n),stop:()=>Hf(t),now:()=>Ua.isProcessing?Ua.timestamp:ul.now()}},G6=(e,t,n=10)=>{let i="";const o=Math.max(Math.round(t/n),2);for(let u=0;u<o;u++)i+=Math.round(e(u/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Jv=2e4;function rT(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Jv;)t+=n,i=e.next(t);return t>=Jv?1/0:t}function gZ(e,t=100,n){const i=n(Ee(te({},e),{keyframes:[0,t]})),o=Math.min(rT(i),Jv);return{type:"keyframes",ease:u=>i.next(o*u).value/t,duration:xd(o)}}const yZ=5;function W6(e,t,n){const i=Math.max(t-yZ,0);return T6(n-e(i),t-i)}const br={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fM=.001;function xZ({duration:e=br.duration,bounce:t=br.bounce,velocity:n=br.velocity,mass:i=br.mass}){let o,u,c=1-t;c=Mh(br.minDamping,br.maxDamping,c),e=Mh(br.minDuration,br.maxDuration,xd(e)),c<1?(o=_=>{const S=_*c,E=S*e,A=S-n,N=JS(_,c),z=Math.exp(-E);return fM-A/N*z},u=_=>{const E=_*c*e,A=E*n+n,N=Math.pow(c,2)*Math.pow(_,2)*e,z=Math.exp(-E),B=JS(Math.pow(_,2),c);return(-o(_)+fM>0?-1:1)*((A-N)*z)/B}):(o=_=>{const S=Math.exp(-_*e),E=(_-n)*e+1;return-.001+S*E},u=_=>{const S=Math.exp(-_*e),E=(n-_)*(e*e);return S*E});const a=5/e,g=bZ(o,u,a);if(e=yd(e),isNaN(g))return{stiffness:br.stiffness,damping:br.damping,duration:e};{const _=Math.pow(g,2)*i;return{stiffness:_,damping:c*2*Math.sqrt(i*_),duration:e}}}const _Z=12;function bZ(e,t,n){let i=n;for(let o=1;o<_Z;o++)i=i-e(i)/t(i);return i}function JS(e,t){return e*Math.sqrt(1-t*t)}const vZ=["duration","bounce"],wZ=["stiffness","damping","mass"];function pM(e,t){return t.some(n=>e[n]!==void 0)}function SZ(e){let t=te({velocity:br.velocity,stiffness:br.stiffness,damping:br.damping,mass:br.mass,isResolvedFromDuration:!1},e);if(!pM(e,wZ)&&pM(e,vZ))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,u=2*Mh(.05,1,1-(e.bounce||0))*Math.sqrt(o);t=Ee(te({},t),{mass:br.mass,stiffness:o,damping:u})}else{const n=xZ(e);t=Ee(te(te({},t),n),{mass:br.mass}),t.isResolvedFromDuration=!0}return t}function e1(e=br.visualDuration,t=br.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:o}=n;const u=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],a={done:!1,value:u},{stiffness:g,damping:_,mass:S,duration:E,velocity:A,isResolvedFromDuration:N}=SZ(Ee(te({},n),{velocity:-xd(n.velocity||0)})),z=A||0,B=_/(2*Math.sqrt(g*S)),$=c-u,q=xd(Math.sqrt(g/S)),W=Math.abs($)<5;i||(i=W?br.restSpeed.granular:br.restSpeed.default),o||(o=W?br.restDelta.granular:br.restDelta.default);let Q;if(B<1){const K=JS(q,B);Q=le=>{const ge=Math.exp(-B*q*le);return c-ge*((z+B*q*$)/K*Math.sin(K*le)+$*Math.cos(K*le))}}else if(B===1)Q=K=>c-Math.exp(-q*K)*($+(z+q*$)*K);else{const K=q*Math.sqrt(B*B-1);Q=le=>{const ge=Math.exp(-B*q*le),he=Math.min(K*le,300);return c-ge*((z+B*q*$)*Math.sinh(he)+K*$*Math.cosh(he))/K}}const Z={calculatedDuration:N&&E||null,next:K=>{const le=Q(K);if(N)a.done=K>=E;else{let ge=K===0?z:0;B<1&&(ge=K===0?yd(z):W6(Q,K,le));const he=Math.abs(ge)<=i,pe=Math.abs(c-le)<=o;a.done=he&&pe}return a.value=a.done?c:le,a},toString:()=>{const K=Math.min(rT(Z),Jv),le=G6(ge=>Z.next(K*ge).value,K,30);return K+"ms "+le},toTransition:()=>{}};return Z}e1.applyToOptions=e=>{const t=gZ(e,100,e1);return e.ease=t.ease,e.duration=yd(t.duration),e.type="keyframes",e};function ej({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:u=500,modifyTarget:c,min:a,max:g,restDelta:_=.5,restSpeed:S}){const E=e[0],A={done:!1,value:E},N=he=>a!==void 0&&he<a||g!==void 0&&he>g,z=he=>a===void 0?g:g===void 0||Math.abs(a-he)<Math.abs(g-he)?a:g;let B=n*t;const $=E+B,q=c===void 0?$:c($);q!==$&&(B=q-E);const W=he=>-B*Math.exp(-he/i),Q=he=>q+W(he),Z=he=>{const pe=W(he),Ie=Q(he);A.done=Math.abs(pe)<=_,A.value=A.done?q:Ie};let K,le;const ge=he=>{N(A.value)&&(K=he,le=e1({keyframes:[A.value,z(A.value)],velocity:W6(Q,he,A.value),damping:o,stiffness:u,restDelta:_,restSpeed:S}))};return ge(0),{calculatedDuration:null,next:he=>{let pe=!1;return!le&&K===void 0&&(pe=!0,Z(he),ge(he)),K!==void 0&&he>=K?le.next(he-K):(!pe&&Z(he),A)}}}function jZ(e,t,n){const i=[],o=n||Nh.mix||q6,u=e.length-1;for(let c=0;c<u;c++){let a=o(e[c],e[c+1]);if(t){const g=Array.isArray(t)?t[c]||bc:t;a=o_(g,a)}i.push(a)}return i}function CZ(e,t,{clamp:n=!0,ease:i,mixer:o}={}){const u=e.length;if(YC(u===t.length),u===1)return()=>t[0];if(u===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[u-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=jZ(t,i,o),g=a.length,_=S=>{if(c&&S<e[0])return t[0];let E=0;if(g>1)for(;E<e.length-2&&!(S<e[E+1]);E++);const A=P0(e[E],e[E+1],S);return a[E](A)};return n?S=>_(Mh(e[0],e[u-1],S)):_}function TZ(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const o=P0(0,t,i);e.push(dr(n,1,o))}}function kZ(e){const t=[0];return TZ(t,e.length-1),t}function EZ(e,t){return e.map(n=>n*t)}function MZ(e,t){return e.map(()=>t||z6).splice(0,e.length-1)}function f0({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const o=BW(i)?i.map(lM):lM(i),u={done:!1,value:t[0]},c=EZ(n&&n.length===t.length?n:kZ(t),e),a=CZ(c,t,{ease:Array.isArray(o)?o:MZ(t,o)});return{calculatedDuration:e,next:g=>(u.value=a(g),u.done=g>=e,u)}}const NZ=e=>e!==null;function aT(e,{repeat:t,repeatType:n="loop"},i,o=1){const u=e.filter(NZ),a=o<0||t&&n!=="loop"&&t%2===1?0:u.length-1;return!a||i===void 0?u[a]:i}const AZ={decay:ej,inertia:ej,tween:f0,keyframes:f0,spring:e1};function Z6(e){typeof e.type=="string"&&(e.type=AZ[e.type])}class oT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const PZ=e=>e/100;class lT extends oT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,o;const{motionValue:n}=this.options;n&&n.updatedAt!==ul.now()&&this.tick(ul.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(i=this.options).onStop)==null||o.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Z6(t);const{type:n=f0,repeat:i=0,repeatDelay:o=0,repeatType:u,velocity:c=0}=t;let{keyframes:a}=t;const g=n||f0;g!==f0&&typeof a[0]!="number"&&(this.mixKeyframes=o_(PZ,q6(a[0],a[1])),a=[0,100]);const _=g(Ee(te({},t),{keyframes:a}));u==="mirror"&&(this.mirroredGenerator=g(Ee(te({},t),{keyframes:[...a].reverse(),velocity:-c}))),_.calculatedDuration===null&&(_.calculatedDuration=rT(_));const{calculatedDuration:S}=_;this.calculatedDuration=S,this.resolvedDuration=S+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=_}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:o,mixKeyframes:u,mirroredGenerator:c,resolvedDuration:a,calculatedDuration:g}=this;if(this.startTime===null)return i.next(0);const{delay:_=0,keyframes:S,repeat:E,repeatType:A,repeatDelay:N,type:z,onUpdate:B,finalKeyframe:$}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const q=this.currentTime-_*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?q<0:q>o;this.currentTime=Math.max(q,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let Q=this.currentTime,Z=i;if(E){const he=Math.min(this.currentTime,o)/a;let pe=Math.floor(he),Ie=he%1;!Ie&&he>=1&&(Ie=1),Ie===1&&pe--,pe=Math.min(pe,E+1),!!(pe%2)&&(A==="reverse"?(Ie=1-Ie,N&&(Ie-=N/a)):A==="mirror"&&(Z=c)),Q=Mh(0,1,Ie)*a}const K=W?{done:!1,value:S[0]}:Z.next(Q);u&&(K.value=u(K.value));let{done:le}=K;!W&&g!==null&&(le=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const ge=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&le);return ge&&z!==ej&&(K.value=aT(S,this.options,$,this.speed)),B&&B(K.value),ge&&this.finish(),K}then(t,n){return this.finished.then(t,n)}get duration(){return xd(this.calculatedDuration)}get time(){return xd(this.currentTime)}set time(t){var n;t=yd(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ul.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=xd(this.currentTime))}play(){var o,u;if(this.isStopped)return;const{driver:t=mZ,startTime:n}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),(u=(o=this.options).onPlay)==null||u.call(o);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n!=null?n:i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ul.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function RZ(e){var t;for(let n=1;n<e.length;n++)(t=e[n])!=null||(e[n]=e[n-1])}const um=e=>e*180/Math.PI,tj=e=>{const t=um(Math.atan2(e[1],e[0]));return nj(t)},DZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:tj,rotateZ:tj,skewX:e=>um(Math.atan(e[1])),skewY:e=>um(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},nj=e=>(e=e%360,e<0&&(e+=360),e),mM=tj,gM=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),yM=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),zZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gM,scaleY:yM,scale:e=>(gM(e)+yM(e))/2,rotateX:e=>nj(um(Math.atan2(e[6],e[5]))),rotateY:e=>nj(um(Math.atan2(-e[2],e[0]))),rotateZ:mM,rotate:mM,skewX:e=>um(Math.atan(e[4])),skewY:e=>um(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ij(e){return e.includes("scale")?1:0}function sj(e,t){if(!e||e==="none")return ij(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=zZ,o=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=DZ,o=a}if(!o)return ij(t);const u=i[t],c=o[1].split(",").map(OZ);return typeof u=="function"?u(c):c[u]}const IZ=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return sj(n,t)};function OZ(e){return parseFloat(e.trim())}const Dy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zy=new Set(Dy),xM=e=>e===Ry||e===hi,FZ=new Set(["x","y","z"]),LZ=Dy.filter(e=>!FZ.has(e));function BZ(e){const t=[];return LZ.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const mm={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>sj(t,"x"),y:(e,{transform:t})=>sj(t,"y")};mm.translateX=mm.x;mm.translateY=mm.y;const gm=new Set;let rj=!1,aj=!1,oj=!1;function Y6(){if(aj){const e=Array.from(gm).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const o=BZ(i);o.length&&(n.set(i,o),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([u,c])=>{var a;(a=i.getValue(u))==null||a.set(c)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}aj=!1,rj=!1,gm.forEach(e=>e.complete(oj)),gm.clear()}function X6(){gm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(aj=!0)})}function VZ(){oj=!0,X6(),Y6(),oj=!1}class cT{constructor(t,n,i,o,u,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=o,this.element=u,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(gm.add(this),rj||(rj=!0,sr.read(X6),sr.resolveKeyframes(Y6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:o}=this;if(t[0]===null){const u=o==null?void 0:o.get(),c=t[t.length-1];if(u!==void 0)t[0]=u;else if(i&&n){const a=i.readValue(n,c);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=c),o&&u===void 0&&o.set(t[0])}RZ(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),gm.delete(this)}cancel(){this.state==="scheduled"&&(gm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const UZ=e=>e.startsWith("--");function $Z(e,t,n){UZ(t)?e.style.setProperty(t,n):e.style[t]=n}const HZ=XC(()=>window.ScrollTimeline!==void 0),qZ={};function GZ(e,t){const n=XC(e);return()=>{var i;return(i=qZ[t])!=null?i:n()}}const K6=GZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),t0=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,_M={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:t0([0,.65,.55,1]),circOut:t0([.55,0,1,.45]),backIn:t0([.31,.01,.66,-.59]),backOut:t0([.33,1.53,.69,.99])};function Q6(e,t){if(e)return typeof e=="function"?K6()?G6(e,t):"ease-out":I6(e)?t0(e):Array.isArray(e)?e.map(n=>Q6(n,t)||_M.easeOut):_M[e]}function WZ(e,t,n,{delay:i=0,duration:o=300,repeat:u=0,repeatType:c="loop",ease:a="easeOut",times:g}={},_=void 0){const S={[t]:n};g&&(S.offset=g);const E=Q6(a,o);Array.isArray(E)&&(S.easing=E);const A={delay:i,duration:o,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:u+1,direction:c==="reverse"?"alternate":"normal"};return _&&(A.pseudoElement=_),e.animate(S,A)}function J6(e){return typeof e=="function"&&"applyToOptions"in e}function ZZ(n){var i=n,{type:e}=i,t=Jt(i,["type"]);var o,u;return J6(e)&&K6()?e.applyToOptions(t):((o=t.duration)!=null||(t.duration=300),(u=t.ease)!=null||(t.ease="easeOut"),t)}class YZ extends oT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:o,pseudoElement:u,allowFlatten:c=!1,finalKeyframe:a,onComplete:g}=t;this.isPseudoElement=!!u,this.allowFlatten=c,this.options=t,YC(typeof t.type!="string");const _=ZZ(t);this.animation=WZ(n,i,o,_,u),_.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const S=aT(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(S):$Z(n,i,S),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch(t){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return xd(Number(t))}get time(){return xd(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=yd(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&HZ()?(this.animation.timeline=t,bc):n(this)}}const eR={anticipate:P6,backInOut:A6,circInOut:D6};function XZ(e){return e in eR}function KZ(e){typeof e.ease=="string"&&XZ(e.ease)&&(e.ease=eR[e.ease])}const bM=10;class QZ extends YZ{constructor(t){KZ(t),Z6(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){var S;const _=this.options,{motionValue:n,onUpdate:i,onComplete:o,element:u}=_,c=Jt(_,["motionValue","onUpdate","onComplete","element"]);if(!n)return;if(t!==void 0){n.set(t);return}const a=new lT(Ee(te({},c),{autoplay:!1})),g=yd((S=this.finishedTime)!=null?S:this.time);n.setWithVelocity(a.sample(g-bM).value,a.sample(g).value,bM),a.stop()}}const vM=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(qf.test(e)||e==="0")&&!e.startsWith("url("));function JZ(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function eY(e,t,n,i){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const u=e[e.length-1],c=vM(o,t),a=vM(u,t);return!c||!a?!1:JZ(e)||(n==="spring"||J6(n))&&i}function lj(e){e.duration=0,e.type}const tY=new Set(["opacity","clipPath","filter","transform"]),nY=XC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function iY(e){var S;const{motionValue:t,name:n,repeatDelay:i,repeatType:o,damping:u,type:c}=e;if(!(((S=t==null?void 0:t.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:_}=t.owner.getProps();return nY()&&n&&tY.has(n)&&(n!=="transform"||!_)&&!g&&!i&&o!=="mirror"&&u!==0&&c!=="inertia"}const sY=40;class rY extends oT{constructor(A){var N=A,{autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:c="loop",keyframes:a,name:g,motionValue:_,element:S}=N,E=Jt(N,["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"]);var $;super(),this.stop=()=>{var q,W;this._animation&&(this._animation.stop(),(q=this.stopTimeline)==null||q.call(this)),(W=this.keyframeResolver)==null||W.cancel()},this.createdAt=ul.now();const z=te({autoplay:t,delay:n,type:i,repeat:o,repeatDelay:u,repeatType:c,name:g,motionValue:_,element:S},E),B=(S==null?void 0:S.KeyframeResolver)||cT;this.keyframeResolver=new B(a,(q,W,Q)=>this.onKeyframesResolved(q,W,z,!Q),g,_,S),($=this.keyframeResolver)==null||$.scheduleResolve()}onKeyframesResolved(t,n,i,o){this.keyframeResolver=void 0;const{name:u,type:c,velocity:a,delay:g,isHandoff:_,onUpdate:S}=i;this.resolvedAt=ul.now(),eY(t,u,c,a)||((Nh.instantAnimations||!g)&&(S==null||S(aT(t,i,n))),t[0]=t[t.length-1],lj(i),i.repeat=0);const E=o?this.resolvedAt?this.resolvedAt-this.createdAt>sY?this.resolvedAt:this.createdAt:this.createdAt:void 0,A=Ee(te({startTime:E,finalKeyframe:n},i),{keyframes:t}),N=!_&&iY(A)?new QZ(Ee(te({},A),{element:A.motionValue.owner.current})):new lT(A);N.finished.then(()=>this.notifyFinished()).catch(bc),this.pendingTimeline&&(this.stopTimeline=N.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=N}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),VZ()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const aY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function oY(e){const t=aY.exec(e);if(!t)return[,];const[,n,i,o]=t;return[`--${n!=null?n:i}`,o]}function tR(e,t,n=1){const[i,o]=oY(e);if(!i)return;const u=window.getComputedStyle(t).getPropertyValue(i);if(u){const c=u.trim();return S6(c)?parseFloat(c):c}return tT(o)?tR(o,t,n+1):o}function uT(e,t){var n,i;return(i=(n=e==null?void 0:e[t])!=null?n:e==null?void 0:e.default)!=null?i:e}const nR=new Set(["width","height","top","left","right","bottom",...Dy]),lY={test:e=>e==="auto",parse:e=>e},iR=e=>t=>t.test(e),sR=[Ry,hi,_d,Pf,JW,QW,lY],wM=e=>sR.find(iR(e));function cY(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||C6(e):!0}const uY=new Set(["brightness","contrast","saturate","opacity"]);function dY(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(nT)||[];if(!i)return e;const o=n.replace(i,"");let u=uY.has(t)?1:0;return i!==n&&(u*=100),t+"("+u+o+")"}const hY=/\b([a-z-]*)\(.*?\)/gu,cj=Ee(te({},qf),{getAnimatableNone:e=>{const t=e.match(hY);return t?t.map(dY).join(" "):e}}),SM=Ee(te({},Ry),{transform:Math.round}),fY={rotate:Pf,rotateX:Pf,rotateY:Pf,rotateZ:Pf,scale:wb,scaleX:wb,scaleY:wb,scaleZ:wb,skew:Pf,skewX:Pf,skewY:Pf,distance:hi,translateX:hi,translateY:hi,translateZ:hi,x:hi,y:hi,z:hi,perspective:hi,transformPerspective:hi,opacity:R0,originX:cM,originY:cM,originZ:hi},dT=Ee(te({borderWidth:hi,borderTopWidth:hi,borderRightWidth:hi,borderBottomWidth:hi,borderLeftWidth:hi,borderRadius:hi,radius:hi,borderTopLeftRadius:hi,borderTopRightRadius:hi,borderBottomRightRadius:hi,borderBottomLeftRadius:hi,width:hi,maxWidth:hi,height:hi,maxHeight:hi,top:hi,right:hi,bottom:hi,left:hi,padding:hi,paddingTop:hi,paddingRight:hi,paddingBottom:hi,paddingLeft:hi,margin:hi,marginTop:hi,marginRight:hi,marginBottom:hi,marginLeft:hi,backgroundPositionX:hi,backgroundPositionY:hi},fY),{zIndex:SM,fillOpacity:R0,strokeOpacity:R0,numOctaves:SM}),pY=Ee(te({},dT),{color:Zr,backgroundColor:Zr,outlineColor:Zr,fill:Zr,stroke:Zr,borderColor:Zr,borderTopColor:Zr,borderRightColor:Zr,borderBottomColor:Zr,borderLeftColor:Zr,filter:cj,WebkitFilter:cj}),rR=e=>pY[e];function aR(e,t){let n=rR(e);return n!==cj&&(n=qf),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const mY=new Set(["auto","none","0"]);function gY(e,t,n){let i=0,o;for(;i<e.length&&!o;){const u=e[i];typeof u=="string"&&!mY.has(u)&&D0(u).values.length&&(o=e[i]),i++}if(o&&n)for(const u of t)e[u]=aR(n,o)}class yY extends cT{constructor(t,n,i,o,u){super(t,n,i,o,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let g=0;g<t.length;g++){let _=t[g];if(typeof _=="string"&&(_=_.trim(),tT(_))){const S=tR(_,n.current);S!==void 0&&(t[g]=S),g===t.length-1&&(this.finalKeyframe=_)}}if(this.resolveNoneKeyframes(),!nR.has(i)||t.length!==2)return;const[o,u]=t,c=wM(o),a=wM(u);if(c!==a)if(xM(c)&&xM(a))for(let g=0;g<t.length;g++){const _=t[g];typeof _=="string"&&(t[g]=parseFloat(_))}else mm[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let o=0;o<t.length;o++)(t[o]===null||cY(t[o]))&&i.push(o);i.length&&gY(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mm[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(i,o).jump(o,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const u=i.length-1,c=i[u];i[u]=mm[n](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([g,_])=>{t.getValue(g).set(_)}),this.resolveNoneKeyframes()}}function xY(e,t,n){var i;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;const u=(i=n==null?void 0:n[e])!=null?i:o.querySelectorAll(e);return u?Array.from(u):[]}return Array.from(e)}const oR=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function _Y(e){return j6(e)&&"offsetHeight"in e}const jM=30,bY=e=>!isNaN(parseFloat(e));class vY{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var u;const o=ul.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ul.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=bY(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new KC);const i=this.events[t].add(n);return t==="change"?()=>{i(),sr.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ul.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>jM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jM);return T6(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fy(e,t){return new vY(e,t)}const{schedule:hT}=O6(queueMicrotask,!1),hu={x:!1,y:!1};function lR(){return hu.x||hu.y}function wY(e){return e==="x"||e==="y"?hu[e]?null:(hu[e]=!0,()=>{hu[e]=!1}):hu.x||hu.y?null:(hu.x=hu.y=!0,()=>{hu.x=hu.y=!1})}function cR(e,t){const n=xY(e),i=new AbortController,o=Ee(te({passive:!0},t),{signal:i.signal});return[n,o,()=>i.abort()]}function CM(e){return!(e.pointerType==="touch"||lR())}function SY(e,t,n={}){const[i,o,u]=cR(e,n),c=a=>{if(!CM(a))return;const{target:g}=a,_=t(g,a);if(typeof _!="function"||!g)return;const S=E=>{CM(E)&&(_(E),g.removeEventListener("pointerleave",S))};g.addEventListener("pointerleave",S,o)};return i.forEach(a=>{a.addEventListener("pointerenter",c,o)}),u}const uR=(e,t)=>t?e===t?!0:uR(e,t.parentElement):!1,fT=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,jY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CY(e){return jY.has(e.tagName)||e.tabIndex!==-1}const lv=new WeakSet;function TM(e){return t=>{t.key==="Enter"&&e(t)}}function w2(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const TY=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=TM(()=>{if(lv.has(n))return;w2(n,"down");const o=TM(()=>{w2(n,"up")}),u=()=>w2(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",u,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function kM(e){return fT(e)&&!lR()}function kY(e,t,n={}){const[i,o,u]=cR(e,n),c=a=>{const g=a.currentTarget;if(!kM(a))return;lv.add(g);const _=t(g,a),S=(N,z)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",A),lv.has(g)&&lv.delete(g),kM(N)&&typeof _=="function"&&_(N,{success:z})},E=N=>{S(N,g===window||g===document||n.useGlobalTarget||uR(g,N.target))},A=N=>{S(N,!1)};window.addEventListener("pointerup",E,o),window.addEventListener("pointercancel",A,o)};return i.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",c,o),_Y(a)&&(a.addEventListener("focus",_=>TY(_,o)),!CY(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),u}function dR(e){return j6(e)&&"ownerSVGElement"in e}function EY(e){return dR(e)&&e.tagName==="svg"}const yo=e=>!!(e&&e.getVelocity),MY=[...sR,Zr,qf],NY=e=>MY.find(iR(e)),hR=L.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function AY(e=!0){const t=L.useContext(GC);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=t,u=L.useId();L.useEffect(()=>{if(e)return o(u)},[e]);const c=L.useCallback(()=>e&&i&&i(u),[u,i,e]);return!n&&i?[!1,c]:[!0]}const fR=L.createContext({strict:!1}),EM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},py={};for(const e in EM)py[e]={isEnabled:t=>EM[e].some(n=>!!t[n])};function PY(e){for(const t in e)py[t]=te(te({},py[t]),e[t])}const RY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function t1(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||RY.has(e)}let pR=e=>!t1(e);function DY(e){typeof e=="function"&&(pR=t=>t.startsWith("on")?!t1(t):e(t))}try{DY(require("@emotion/is-prop-valid").default)}catch(e){}function zY(e,t,n){const i={};for(const o in e)o==="values"&&typeof e.values=="object"||(pR(o)||n===!0&&t1(o)||!t&&!t1(o)||e.draggable&&o.startsWith("onDrag"))&&(i[o]=e[o]);return i}const $1=L.createContext({});function H1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function z0(e){return typeof e=="string"||Array.isArray(e)}const pT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mT=["initial",...pT];function q1(e){return H1(e.animate)||mT.some(t=>z0(e[t]))}function mR(e){return!!(q1(e)||e.variants)}function IY(e,t){if(q1(e)){const{initial:n,animate:i}=e;return{initial:n===!1||z0(n)?n:void 0,animate:z0(i)?i:void 0}}return e.inherit!==!1?t:{}}function OY(e){const{initial:t,animate:n}=IY(e,L.useContext($1));return L.useMemo(()=>({initial:t,animate:n}),[MM(t),MM(n)])}function MM(e){return Array.isArray(e)?e.join(" "):e}const I0={};function FY(e){for(const t in e)I0[t]=e[t],eT(t)&&(I0[t].isCSSVariable=!0)}function gR(e,{layout:t,layoutId:n}){return zy.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!I0[e]||e==="opacity")}const LY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BY=Dy.length;function VY(e,t,n){let i="",o=!0;for(let u=0;u<BY;u++){const c=Dy[u],a=e[c];if(a===void 0)continue;let g=!0;if(typeof a=="number"?g=a===(c.startsWith("scale")?1:0):g=parseFloat(a)===0,!g||n){const _=oR(a,dT[c]);if(!g){o=!1;const S=LY[c]||c;i+=`${S}(${_}) `}n&&(t[c]=_)}}return i=i.trim(),n?i=n(t,o?"":i):o&&(i="none"),i}function gT(e,t,n){const{style:i,vars:o,transformOrigin:u}=e;let c=!1,a=!1;for(const g in t){const _=t[g];if(zy.has(g)){c=!0;continue}else if(eT(g)){o[g]=_;continue}else{const S=oR(_,dT[g]);g.startsWith("origin")?(a=!0,u[g]=S):i[g]=S}}if(t.transform||(c||n?i.transform=VY(t,e.transform,n):i.transform&&(i.transform="none")),a){const{originX:g="50%",originY:_="50%",originZ:S=0}=u;i.transformOrigin=`${g} ${_} ${S}`}}const yT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yR(e,t,n){for(const i in t)!yo(t[i])&&!gR(i,n)&&(e[i]=t[i])}function UY({transformTemplate:e},t){return L.useMemo(()=>{const n=yT();return gT(n,t,e),Object.assign({},n.vars,n.style)},[t])}function $Y(e,t){const n=e.style||{},i={};return yR(i,n,e),Object.assign(i,UY(e,t)),i}function HY(e,t){const n={},i=$Y(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const qY={offset:"stroke-dashoffset",array:"stroke-dasharray"},GY={offset:"strokeDashoffset",array:"strokeDasharray"};function WY(e,t,n=1,i=0,o=!0){e.pathLength=1;const u=o?qY:GY;e[u.offset]=hi.transform(-i);const c=hi.transform(t),a=hi.transform(n);e[u.array]=`${c} ${a}`}function xR(e,E,g,_,S){var A=E,{attrX:t,attrY:n,attrScale:i,pathLength:o,pathSpacing:u=1,pathOffset:c=0}=A,a=Jt(A,["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"]);var B,$;if(gT(e,a,_),g){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:N,style:z}=e;N.transform&&(z.transform=N.transform,delete N.transform),(z.transform||N.transformOrigin)&&(z.transformOrigin=(B=N.transformOrigin)!=null?B:"50% 50%",delete N.transformOrigin),z.transform&&(z.transformBox=($=S==null?void 0:S.transformBox)!=null?$:"fill-box",delete N.transformBox),t!==void 0&&(N.x=t),n!==void 0&&(N.y=n),i!==void 0&&(N.scale=i),o!==void 0&&WY(N,o,u,c,!1)}const _R=()=>Ee(te({},yT()),{attrs:{}}),bR=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ZY(e,t,n,i){const o=L.useMemo(()=>{const u=_R();return xR(u,t,bR(i),e.transformTemplate,e.style),Ee(te({},u.attrs),{style:te({},u.style)})},[t]);if(e.style){const u={};yR(u,e.style,e),o.style=te(te({},u),o.style)}return o}const YY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xT(e){return typeof e!="string"||e.includes("-")?!1:!!(YY.indexOf(e)>-1||/[A-Z]/u.test(e))}function XY(e,t,n,{latestValues:i},o,u=!1){const a=(xT(e)?ZY:HY)(t,i,o,e),g=zY(t,typeof e=="string",u),_=e!==L.Fragment?Ee(te(te({},g),a),{ref:n}):{},{children:S}=t,E=L.useMemo(()=>yo(S)?S.get():S,[S]);return L.createElement(e,Ee(te({},_),{children:E}))}function NM(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function _T(e,t,n,i){if(typeof t=="function"){const[o,u]=NM(i);t=t(n!==void 0?n:e.custom,o,u)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,u]=NM(i);t=t(n!==void 0?n:e.custom,o,u)}return t}function cv(e){return yo(e)?e.get():e}function KY({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,o){return{latestValues:QY(n,i,o,e),renderState:t()}}function QY(e,t,n,i){const o={},u=i(e,{});for(const N in u)o[N]=cv(u[N]);let{initial:c,animate:a}=e;const g=q1(e),_=mR(e);t&&_&&!g&&e.inherit!==!1&&(c===void 0&&(c=t.initial),a===void 0&&(a=t.animate));let S=n?n.initial===!1:!1;S=S||c===!1;const E=S?a:c;if(E&&typeof E!="boolean"&&!H1(E)){const N=Array.isArray(E)?E:[E];for(let z=0;z<N.length;z++){const B=_T(e,N[z]);if(B){const A=B,{transitionEnd:$,transition:q}=A,W=Jt(A,["transitionEnd","transition"]);for(const Q in W){let Z=W[Q];if(Array.isArray(Z)){const K=S?Z.length-1:0;Z=Z[K]}Z!==null&&(o[Q]=Z)}for(const Q in $)o[Q]=$[Q]}}}return o}const vR=e=>(t,n)=>{const i=L.useContext($1),o=L.useContext(GC),u=()=>KY(e,t,i,o);return n?u():PW(u)};function bT(e,t,n){var u;const{style:i}=e,o={};for(const c in i)(yo(i[c])||t.style&&yo(t.style[c])||gR(c,e)||((u=n==null?void 0:n.getValue(c))==null?void 0:u.liveStyle)!==void 0)&&(o[c]=i[c]);return o}const JY=vR({scrapeMotionValuesFromProps:bT,createRenderState:yT});function wR(e,t,n){const i=bT(e,t,n);for(const o in e)if(yo(e[o])||yo(t[o])){const u=Dy.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[u]=e[o]}return i}const eX=vR({scrapeMotionValuesFromProps:wR,createRenderState:_R}),tX=Symbol.for("motionComponentSymbol");function Xg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function nX(e,t,n){return L.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Xg(n)&&(n.current=i))},[t])}const vT=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iX="framerAppearId",SR="data-"+vT(iX),jR=L.createContext({});function sX(e,t,n,i,o){var B,$;const{visualElement:u}=L.useContext($1),c=L.useContext(fR),a=L.useContext(GC),g=L.useContext(hR).reducedMotion,_=L.useRef(null);i=i||c.renderer,!_.current&&i&&(_.current=i(e,{visualState:t,parent:u,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:g}));const S=_.current,E=L.useContext(jR);S&&!S.projection&&o&&(S.type==="html"||S.type==="svg")&&rX(_.current,n,o,E);const A=L.useRef(!1);L.useInsertionEffect(()=>{S&&A.current&&S.update(n,a)});const N=n[SR],z=L.useRef(!!N&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,N))&&(($=window.MotionHasOptimisedAnimation)==null?void 0:$.call(window,N)));return RW(()=>{S&&(A.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),z.current&&S.animationState&&S.animationState.animateChanges())}),L.useEffect(()=>{S&&(!z.current&&S.animationState&&S.animationState.animateChanges(),z.current&&(queueMicrotask(()=>{var q;(q=window.MotionHandoffMarkAsComplete)==null||q.call(window,N)}),z.current=!1),S.enteringChildren=void 0)}),S}function rX(e,t,n,i){const{layoutId:o,layout:u,drag:c,dragConstraints:a,layoutScroll:g,layoutRoot:_,layoutCrossfade:S}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:CR(e.parent)),e.projection.setOptions({layoutId:o,layout:u,alwaysMeasureLayout:!!c||a&&Xg(a),visualElement:e,animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,crossfade:S,layoutScroll:g,layoutRoot:_})}function CR(e){if(e)return e.options.allowProjection!==!1?e.projection:CR(e.parent)}function S2(e,{forwardMotionProps:t=!1}={},n,i){var a,g;n&&PY(n);const o=xT(e)?eX:JY;function u(_,S){let E;const A=Ee(te(te({},L.useContext(hR)),_),{layoutId:aX(_)}),{isStatic:N}=A,z=OY(_),B=o(_,N);if(!N&&qC){oX();const $=lX(A);E=$.MeasureLayout,z.visualElement=sX(e,B,A,i,$.ProjectionNode)}return l.jsxs($1.Provider,{value:z,children:[E&&z.visualElement?l.jsx(E,te({visualElement:z.visualElement},A)):null,XY(e,_,nX(B,z.visualElement,S),B,N,t)]})}u.displayName=`motion.${typeof e=="string"?e:`create(${(g=(a=e.displayName)!=null?a:e.name)!=null?g:""})`}`;const c=L.forwardRef(u);return c[tX]=e,c}function aX({layoutId:e}){const t=L.useContext(w6).id;return t&&e!==void 0?t+"-"+e:e}function oX(e,t){L.useContext(fR).strict}function lX(e){const{drag:t,layout:n}=py;if(!t&&!n)return{};const i=te(te({},t),n);return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function cX(e,t){if(typeof Proxy=="undefined")return S2;const n=new Map,i=(u,c)=>S2(u,c,e,t),o=(u,c)=>i(u,c);return new Proxy(o,{get:(u,c)=>c==="create"?i:(n.has(c)||n.set(c,S2(c,void 0,e,t)),n.get(c))})}function TR({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function uX({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function dX(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function j2(e){return e===void 0||e===1}function uj({scale:e,scaleX:t,scaleY:n}){return!j2(e)||!j2(t)||!j2(n)}function im(e){return uj(e)||kR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function kR(e){return AM(e.x)||AM(e.y)}function AM(e){return e&&e!=="0%"}function n1(e,t,n){const i=e-n,o=t*i;return n+o}function PM(e,t,n,i,o){return o!==void 0&&(e=n1(e,o,i)),n1(e,n,i)+t}function dj(e,t=0,n=1,i,o){e.min=PM(e.min,t,n,i,o),e.max=PM(e.max,t,n,i,o)}function ER(e,{x:t,y:n}){dj(e.x,t.translate,t.scale,t.originPoint),dj(e.y,n.translate,n.scale,n.originPoint)}const RM=.999999999999,DM=1.0000000000001;function hX(e,t,n,i=!1){const o=n.length;if(!o)return;t.x=t.y=1;let u,c;for(let a=0;a<o;a++){u=n[a],c=u.projectionDelta;const{visualElement:g}=u.options;g&&g.props.style&&g.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Qg(e,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,ER(e,c)),i&&im(u.latestValues)&&Qg(e,u.latestValues))}t.x<DM&&t.x>RM&&(t.x=1),t.y<DM&&t.y>RM&&(t.y=1)}function Kg(e,t){e.min=e.min+t,e.max=e.max+t}function zM(e,t,n,i,o=.5){const u=dr(e.min,e.max,o);dj(e,t,n,u,i)}function Qg(e,t){zM(e.x,t.x,t.scaleX,t.scale,t.originX),zM(e.y,t.y,t.scaleY,t.scale,t.originY)}function MR(e,t){return TR(dX(e.getBoundingClientRect(),t))}function fX(e,t,n){const i=MR(e,n),{scroll:o}=t;return o&&(Kg(i.x,o.offset.x),Kg(i.y,o.offset.y)),i}const IM=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jg=()=>({x:IM(),y:IM()}),OM=()=>({min:0,max:0}),Er=()=>({x:OM(),y:OM()}),hj={current:null},NR={current:!1};function pX(){if(NR.current=!0,!!qC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>hj.current=e.matches;e.addEventListener("change",t),t()}else hj.current=!1}const mX=new WeakMap;function gX(e,t,n){for(const i in t){const o=t[i],u=n[i];if(yo(o))e.addValue(i,o);else if(yo(u))e.addValue(i,fy(o,{owner:e}));else if(u!==o)if(e.hasValue(i)){const c=e.getValue(i);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=e.getStaticValue(i);e.addValue(i,fy(c!==void 0?c:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const FM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yX{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:u,visualState:c},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=ul.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,sr.render(this.render,!1,!0))};const{latestValues:g,renderState:_}=c;this.latestValues=g,this.baseTarget=te({},g),this.initialValues=n.initial?te({},g):{},this.renderState=_,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!u,this.isControllingVariants=q1(n),this.isVariantNode=mR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const A=this.scrapeMotionValuesFromProps(n,{},this),{willChange:S}=A,E=Jt(A,["willChange"]);for(const N in E){const z=E[N];g[N]!==void 0&&yo(z)&&z.set(g[N])}}mount(t){var n;this.current=t,mX.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),NR.current||pX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hj.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Hf(this.notifyUpdate),Hf(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){var n;this.children.add(t),(n=this.enteringChildren)!=null||(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=zy.has(t);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&sr.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),u&&u(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in py){const n=py[t];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[t]&&o&&i(this.props)&&(this.features[t]=new o(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Er()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<FM.length;i++){const o=FM[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u="on"+o,c=t[u];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=gX(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=fy(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){var o;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(o=this.getBaseTargetFromProps(this.props,t))!=null?o:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(S6(i)||C6(i))?i=parseFloat(i):!NY(i)&&qf.test(n)&&(i=aR(t,n)),this.setBaseTarget(t,yo(i)?i.get():i)),yo(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var u;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const c=_T(this.props,n,(u=this.presenceContext)==null?void 0:u.custom);c&&(i=c[t])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!yo(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new KC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){hT.render(this.render)}}class AR extends yX{constructor(){super(...arguments),this.KeyframeResolver=yY}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;yo(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function PR(e,{style:t,vars:n},i,o){const u=e.style;let c;for(c in t)u[c]=t[c];o==null||o.applyProjectionStyles(u,i);for(c in n)u.setProperty(c,n[c])}function xX(e){return window.getComputedStyle(e)}class _X extends AR{constructor(){super(...arguments),this.type="html",this.renderInstance=PR}readValueFromInstance(t,n){var i;if(zy.has(n))return(i=this.projection)!=null&&i.isProjecting?ij(n):IZ(t,n);{const o=xX(t),u=(eT(n)?o.getPropertyValue(n):o[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:n}){return MR(t,n)}build(t,n,i){gT(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return bT(t,n,i)}}const RR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bX(e,t,n,i){PR(e,t,void 0,i);for(const o in t.attrs)e.setAttribute(RR.has(o)?o:vT(o),t.attrs[o])}class vX extends AR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Er}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(zy.has(n)){const i=rR(n);return i&&i.default||0}return n=RR.has(n)?n:vT(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return wR(t,n,i)}build(t,n,i){xR(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,o){bX(t,n,i,o)}mount(t){this.isSVGTag=bR(t.tagName),super.mount(t)}}const wX=(e,t)=>xT(e)?new vX(t):new _X(t,{allowProjection:e!==L.Fragment});function ry(e,t,n){const i=e.getProps();return _T(i,t,n!==void 0?n:i.custom,e)}const fj=e=>Array.isArray(e);function SX(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fy(n))}function jX(e){return fj(e)?e[e.length-1]||0:e}function CX(e,t){let c=ry(e,t)||{},{transitionEnd:i={},transition:o={}}=c,u=Jt(c,["transitionEnd","transition"]);u=te(te({},u),i);for(const a in u){const g=jX(u[a]);SX(e,a,g)}}function TX(e){return!!(yo(e)&&e.add)}function pj(e,t){const n=e.getValue("willChange");if(TX(n))return n.add(t);if(!n&&Nh.WillChange){const i=new Nh.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function DR(e){return e.props[SR]}const kX=e=>e!==null;function EX(e,{repeat:t,repeatType:n="loop"},i){const o=e.filter(kX),u=t&&n!=="loop"&&t%2===1?0:o.length-1;return o[u]}const MX={type:"spring",stiffness:500,damping:25,restSpeed:10},NX=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),AX={type:"keyframes",duration:.8},PX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RX=(e,{keyframes:t})=>t.length>2?AX:zy.has(e)?e.startsWith("scale")?NX(t[1]):MX:PX;function DX(E){var A=E,{when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:u,repeatType:c,repeatDelay:a,from:g,elapsed:_}=A,S=Jt(A,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(S).length}const wT=(e,t,n,i={},o,u)=>c=>{const a=uT(i,e)||{},g=a.delay||i.delay||0;let{elapsed:_=0}=i;_=_-yd(g);const S=Ee(te({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},a),{delay:-_,onUpdate:A=>{t.set(A),a.onUpdate&&a.onUpdate(A)},onComplete:()=>{c(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:u?void 0:o});DX(a)||Object.assign(S,RX(e,S)),S.duration&&(S.duration=yd(S.duration)),S.repeatDelay&&(S.repeatDelay=yd(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let E=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(lj(S),S.delay===0&&(E=!0)),(Nh.instantAnimations||Nh.skipAnimations)&&(E=!0,lj(S),S.delay=0),S.allowFlatten=!a.type&&!a.ease,E&&!u&&t.get()!==void 0){const A=EX(S.keyframes,a);if(A!==void 0){sr.update(()=>{S.onUpdate(A),S.onComplete()});return}}return a.isSync?new lT(S):new rY(S)};function zX({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function zR(e,t,{delay:n=0,transitionOverride:i,type:o}={}){var E;let S=t,{transition:u=e.getDefaultTransition(),transitionEnd:c}=S,a=Jt(S,["transition","transitionEnd"]);i&&(u=i);const g=[],_=o&&e.animationState&&e.animationState.getState()[o];for(const A in a){const N=e.getValue(A,(E=e.latestValues[A])!=null?E:null),z=a[A];if(z===void 0||_&&zX(_,A))continue;const B=te({delay:n},uT(u||{},A)),$=N.get();if($!==void 0&&!N.isAnimating&&!Array.isArray(z)&&z===$&&!B.velocity)continue;let q=!1;if(window.MotionHandoffAnimation){const Q=DR(e);if(Q){const Z=window.MotionHandoffAnimation(Q,A,sr);Z!==null&&(B.startTime=Z,q=!0)}}pj(e,A),N.start(wT(A,N,z,e.shouldReduceMotion&&nR.has(A)?{type:!1}:B,e,q));const W=N.animation;W&&g.push(W)}return c&&Promise.all(g).then(()=>{sr.update(()=>{c&&CX(e,c)})}),g}function IR(e,t,n,i=0,o=1){const u=Array.from(e).sort((_,S)=>_.sortNodePosition(S)).indexOf(t),c=e.size,a=(c-1)*i;return typeof n=="function"?n(u,c):o===1?u*i:a-u*i}function mj(e,t,n={}){var g;const i=ry(e,t,n.type==="exit"?(g=e.presenceContext)==null?void 0:g.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const u=i?()=>Promise.all(zR(e,i,n)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(_=0)=>{const{delayChildren:S=0,staggerChildren:E,staggerDirection:A}=o;return IX(e,t,_,S,E,A,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[_,S]=a==="beforeChildren"?[u,c]:[c,u];return _().then(()=>S())}else return Promise.all([u(),c(n.delay)])}function IX(e,t,n=0,i=0,o=0,u=1,c){const a=[];for(const g of e.variantChildren)g.notify("AnimationStart",t),a.push(mj(g,t,Ee(te({},c),{delay:n+(typeof i=="function"?0:i)+IR(e.variantChildren,g,i,o,u)})).then(()=>g.notify("AnimationComplete",t)));return Promise.all(a)}function OX(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const o=t.map(u=>mj(e,u,n));i=Promise.all(o)}else if(typeof t=="string")i=mj(e,t,n);else{const o=typeof t=="function"?ry(e,t,n.custom):t;i=Promise.all(zR(e,o,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function OR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const FX=mT.length;function FR(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?FR(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<FX;n++){const i=mT[n],o=e.props[i];(z0(o)||o===!1)&&(t[i]=o)}return t}const LX=[...pT].reverse(),BX=pT.length;function VX(e){return t=>Promise.all(t.map(({animation:n,options:i})=>OX(e,n,i)))}function UX(e){let t=VX(e),n=LM(),i=!0;const o=g=>(_,S)=>{var A;const E=ry(e,S,g==="exit"?(A=e.presenceContext)==null?void 0:A.custom:void 0);if(E){const N=E,{transition:z,transitionEnd:B}=N,$=Jt(N,["transition","transitionEnd"]);_=te(te(te({},_),$),B)}return _};function u(g){t=g(e)}function c(g){const{props:_}=e,S=FR(e.parent)||{},E=[],A=new Set;let N={},z=1/0;for(let $=0;$<BX;$++){const q=LX[$],W=n[q],Q=_[q]!==void 0?_[q]:S[q],Z=z0(Q),K=q===g?W.isActive:null;K===!1&&(z=$);let le=Q===S[q]&&Q!==_[q]&&Z;if(le&&i&&e.manuallyAnimateOnMount&&(le=!1),W.protectedKeys=te({},N),!W.isActive&&K===null||!Q&&!W.prevProp||H1(Q)||typeof Q=="boolean")continue;const ge=$X(W.prevProp,Q);let he=ge||q===g&&W.isActive&&!le&&Z||$>z&&Z,pe=!1;const Ie=Array.isArray(Q)?Q:[Q];let He=Ie.reduce(o(q),{});K===!1&&(He={});const{prevResolvedValues:Ye={}}=W,rt=te(te({},Ye),He),Rt=Qe=>{he=!0,A.has(Qe)&&(pe=!0,A.delete(Qe)),W.needsAnimating[Qe]=!0;const et=e.getValue(Qe);et&&(et.liveStyle=!1)};for(const Qe in rt){const et=He[Qe],Nt=Ye[Qe];if(N.hasOwnProperty(Qe))continue;let fe=!1;fj(et)&&fj(Nt)?fe=!OR(et,Nt):fe=et!==Nt,fe?et!=null?Rt(Qe):A.add(Qe):et!==void 0&&A.has(Qe)?Rt(Qe):W.protectedKeys[Qe]=!0}W.prevProp=Q,W.prevResolvedValues=He,W.isActive&&(N=te(te({},N),He)),i&&e.blockInitialAnimation&&(he=!1);const St=le&&ge;he&&(!St||pe)&&E.push(...Ie.map(Qe=>{const et={type:q};if(typeof Qe=="string"&&i&&!St&&e.manuallyAnimateOnMount&&e.parent){const{parent:Nt}=e,fe=ry(Nt,Qe);if(Nt.enteringChildren&&fe){const{delayChildren:Xe}=fe.transition||{};et.delay=IR(Nt.enteringChildren,e,Xe)}}return{animation:Qe,options:et}}))}if(A.size){const $={};if(typeof _.initial!="boolean"){const q=ry(e,Array.isArray(_.initial)?_.initial[0]:_.initial);q&&q.transition&&($.transition=q.transition)}A.forEach(q=>{const W=e.getBaseTarget(q),Q=e.getValue(q);Q&&(Q.liveStyle=!0),$[q]=W!=null?W:null}),E.push({animation:$})}let B=!!E.length;return i&&(_.initial===!1||_.initial===_.animate)&&!e.manuallyAnimateOnMount&&(B=!1),i=!1,B?t(E):Promise.resolve()}function a(g,_){var E;if(n[g].isActive===_)return Promise.resolve();(E=e.variantChildren)==null||E.forEach(A=>{var N;return(N=A.animationState)==null?void 0:N.setActive(g,_)}),n[g].isActive=_;const S=c(g);for(const A in n)n[A].protectedKeys={};return S}return{animateChanges:c,setActive:a,setAnimateFunction:u,getState:()=>n,reset:()=>{n=LM(),i=!0}}}function $X(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!OR(t,e):!1}function Kp(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function LM(){return{animate:Kp(!0),whileInView:Kp(),whileHover:Kp(),whileTap:Kp(),whileDrag:Kp(),whileFocus:Kp(),exit:Kp()}}class Jf{constructor(t){this.isMounted=!1,this.node=t}update(){}}class HX extends Jf{constructor(t){super(t),t.animationState||(t.animationState=UX(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();H1(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let qX=0;class GX extends Jf{constructor(){super(...arguments),this.id=qX++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const WX={animation:{Feature:HX},exit:{Feature:GX}};function O0(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function u_(e){return{point:{x:e.pageX,y:e.pageY}}}const ZX=e=>t=>fT(t)&&e(t,u_(t));function p0(e,t,n,i){return O0(e,t,ZX(n),i)}const LR=1e-4,YX=1-LR,XX=1+LR,BR=.01,KX=0-BR,QX=0+BR;function Lo(e){return e.max-e.min}function JX(e,t,n){return Math.abs(e-t)<=n}function BM(e,t,n,i=.5){e.origin=i,e.originPoint=dr(t.min,t.max,e.origin),e.scale=Lo(n)/Lo(t),e.translate=dr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=YX&&e.scale<=XX||isNaN(e.scale))&&(e.scale=1),(e.translate>=KX&&e.translate<=QX||isNaN(e.translate))&&(e.translate=0)}function m0(e,t,n,i){BM(e.x,t.x,n.x,i?i.originX:void 0),BM(e.y,t.y,n.y,i?i.originY:void 0)}function VM(e,t,n){e.min=n.min+t.min,e.max=e.min+Lo(t)}function eK(e,t,n){VM(e.x,t.x,n.x),VM(e.y,t.y,n.y)}function UM(e,t,n){e.min=t.min-n.min,e.max=e.min+Lo(t)}function g0(e,t,n){UM(e.x,t.x,n.x),UM(e.y,t.y,n.y)}function gc(e){return[e("x"),e("y")]}const VR=({current:e})=>e?e.ownerDocument.defaultView:null,$M=(e,t)=>Math.abs(e-t);function tK(e,t){const n=$M(e.x,t.x),i=$M(e.y,t.y);return Math.sqrt(Dg(n,2)+Dg(i,2))}class UR{constructor(t,n,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:u=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=T2(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,z=tK(A.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!z)return;const{point:B}=A,{timestamp:$}=Ua;this.history.push(Ee(te({},B),{timestamp:$}));const{onStart:q,onMove:W}=this.handlers;N||(q&&q(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,A)},this.handlePointerMove=(A,N)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=C2(N,this.transformPagePoint),sr.update(this.updatePoint,!0)},this.handlePointerUp=(A,N)=>{this.end();const{onEnd:z,onSessionEnd:B,resumeAnimation:$}=this.handlers;if(this.dragSnapToOrigin&&$&&$(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const q=T2(A.type==="pointercancel"?this.lastMoveEventInfo:C2(N,this.transformPagePoint),this.history);this.startEvent&&z&&z(A,q),B&&B(A,q)},!fT(t))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=o||window;const a=u_(t),g=C2(a,this.transformPagePoint),{point:_}=g,{timestamp:S}=Ua;this.history=[Ee(te({},_),{timestamp:S})];const{onSessionStart:E}=n;E&&E(t,T2(g,this.history)),this.removeListeners=o_(p0(this.contextWindow,"pointermove",this.handlePointerMove),p0(this.contextWindow,"pointerup",this.handlePointerUp),p0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Hf(this.updatePoint)}}function C2(e,t){return t?{point:t(e.point)}:e}function HM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function T2({point:e},t){return{point:e,delta:HM(e,$R(t)),offset:HM(e,nK(t)),velocity:iK(t,.1)}}function nK(e){return e[0]}function $R(e){return e[e.length-1]}function iK(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const o=$R(e);for(;n>=0&&(i=e[n],!(o.timestamp-i.timestamp>yd(t)));)n--;if(!i)return{x:0,y:0};const u=xd(o.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const c={x:(o.x-i.x)/u,y:(o.y-i.y)/u};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function sK(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?dr(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?dr(n,e,i.max):Math.min(e,n)),e}function qM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function rK(e,{top:t,left:n,bottom:i,right:o}){return{x:qM(e.x,n,o),y:qM(e.y,t,i)}}function GM(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function aK(e,t){return{x:GM(e.x,t.x),y:GM(e.y,t.y)}}function oK(e,t){let n=.5;const i=Lo(e),o=Lo(t);return o>i?n=P0(t.min,t.max-i,e.min):i>o&&(n=P0(e.min,e.max-o,t.min)),Mh(0,1,n)}function lK(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const gj=.35;function cK(e=gj){return e===!1?e=0:e===!0&&(e=gj),{x:WM(e,"left","right"),y:WM(e,"top","bottom")}}function WM(e,t,n){return{min:ZM(e,t),max:ZM(e,n)}}function ZM(e,t){return typeof e=="number"?e:e[t]||0}const uK=new WeakMap;class dK{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Er(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const u=E=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(u_(E).point)},c=(E,A)=>{const{drag:N,dragPropagation:z,onDragStart:B}=this.getProps();if(N&&!z&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wY(N),!this.openDragLock))return;this.latestPointerEvent=E,this.latestPanInfo=A,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gc(q=>{let W=this.getAxisMotionValue(q).get()||0;if(_d.test(W)){const{projection:Q}=this.visualElement;if(Q&&Q.layout){const Z=Q.layout.layoutBox[q];Z&&(W=Lo(Z)*(parseFloat(W)/100))}}this.originPoint[q]=W}),B&&sr.postRender(()=>B(E,A)),pj(this.visualElement,"transform");const{animationState:$}=this.visualElement;$&&$.setActive("whileDrag",!0)},a=(E,A)=>{this.latestPointerEvent=E,this.latestPanInfo=A;const{dragPropagation:N,dragDirectionLock:z,onDirectionLock:B,onDrag:$}=this.getProps();if(!N&&!this.openDragLock)return;const{offset:q}=A;if(z&&this.currentDirection===null){this.currentDirection=hK(q),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",A.point,q),this.updateAxis("y",A.point,q),this.visualElement.render(),$&&$(E,A)},g=(E,A)=>{this.latestPointerEvent=E,this.latestPanInfo=A,this.stop(E,A),this.latestPointerEvent=null,this.latestPanInfo=null},_=()=>gc(E=>{var A;return this.getAnimationState(E)==="paused"&&((A=this.getAxisMotionValue(E).animation)==null?void 0:A.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new UR(t,{onSessionStart:u,onStart:c,onMove:a,onSessionEnd:g,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:i,contextWindow:VR(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,o=n||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!o||!i)return;const{velocity:c}=o;this.startAnimation(c);const{onDragEnd:a}=this.getProps();a&&sr.postRender(()=>a(i,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:o}=this.getProps();if(!i||!Sb(t,o,this.currentDirection))return;const u=this.getAxisMotionValue(t);let c=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(c=sK(c,this.constraints[t],this.elastic[t])),u.set(c)}resolveConstraints(){var u;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,o=this.constraints;t&&Xg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=rK(i.layoutBox,t):this.constraints=!1,this.elastic=cK(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&gc(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=lK(i.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xg(t))return!1;const i=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=fX(i,o.root,this.visualElement.getTransformPagePoint());let c=aK(o.layout.layoutBox,u);if(n){const a=n(uX(c));this.hasMutatedConstraints=!!a,a&&(c=TR(a))}return c}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:u,dragSnapToOrigin:c,onDragTransitionEnd:a}=this.getProps(),g=this.constraints||{},_=gc(S=>{if(!Sb(S,n,this.currentDirection))return;let E=g&&g[S]||{};c&&(E={min:0,max:0});const A=o?200:1e6,N=o?40:1e7,z=te(te({type:"inertia",velocity:i?t[S]:0,bounceStiffness:A,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10},u),E);return this.startAxisValueAnimation(S,z)});return Promise.all(_).then(a)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return pj(this.visualElement,t),i.start(wT(t,i,0,n,this.visualElement,!1))}stopAnimation(){gc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gc(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){gc(n=>{const{drag:i}=this.getProps();if(!Sb(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(n);if(o&&o.layout){const{min:c,max:a}=o.layout.layoutBox[n];u.set(t[n]-dr(c,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Xg(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};gc(c=>{const a=this.getAxisMotionValue(c);if(a&&this.constraints!==!1){const g=a.get();o[c]=oK({min:g,max:g},this.constraints[c])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),gc(c=>{if(!Sb(c,t,null))return;const a=this.getAxisMotionValue(c),{min:g,max:_}=this.constraints[c];a.set(dr(g,_,o[c]))})}addListeners(){if(!this.visualElement.current)return;uK.set(this.visualElement,this);const t=this.visualElement.current,n=p0(t,"pointerdown",g=>{const{drag:_,dragListener:S=!0}=this.getProps();_&&S&&this.start(g)}),i=()=>{const{dragConstraints:g}=this.getProps();Xg(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),sr.read(i);const c=O0(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_})=>{this.isDragging&&_&&(gc(S=>{const E=this.getAxisMotionValue(S);E&&(this.originPoint[S]+=g[S].translate,E.set(E.get()+g[S].translate))}),this.visualElement.render())});return()=>{c(),n(),u(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:c=gj,dragMomentum:a=!0}=t;return Ee(te({},t),{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:u,dragElastic:c,dragMomentum:a})}}function Sb(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function hK(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class fK extends Jf{constructor(t){super(t),this.removeGroupControls=bc,this.removeListeners=bc,this.controls=new dK(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bc}unmount(){this.removeGroupControls(),this.removeListeners()}}const YM=e=>(t,n)=>{e&&sr.postRender(()=>e(t,n))};class pK extends Jf{constructor(){super(...arguments),this.removePointerDownListener=bc}onPointerDown(t){this.session=new UR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:VR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:YM(t),onStart:YM(n),onMove:i,onEnd:(u,c)=>{delete this.session,o&&sr.postRender(()=>o(u,c))}}}mount(){this.removePointerDownListener=p0(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const uv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function XM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Bx={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(hi.test(e))e=parseFloat(e);else return e;const n=XM(e,t.target.x),i=XM(e,t.target.y);return`${n}% ${i}%`}},mK={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,o=qf.parse(e);if(o.length>5)return i;const u=qf.createTransformer(e),c=typeof o[0]!="number"?1:0,a=n.x.scale*t.x,g=n.y.scale*t.y;o[0+c]/=a,o[1+c]/=g;const _=dr(a,g,.5);return typeof o[2+c]=="number"&&(o[2+c]/=_),typeof o[3+c]=="number"&&(o[3+c]/=_),u(o)}};let k2=!1;class gK extends L.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:u}=t;FY(yK),u&&(n.group&&n.group.add(u),i&&i.register&&o&&i.register(u),k2&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions(Ee(te({},u.options),{onExitComplete:()=>this.safeToRemove()}))),uv.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:o,isPresent:u}=this.props,{projection:c}=i;return c&&(c.isPresent=u,k2=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==u?c.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?c.promote():c.relegate()||sr.postRender(()=>{const a=c.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),hT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=t;k2=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function HR(e){const[t,n]=AY(),i=L.useContext(w6);return l.jsx(gK,Ee(te({},e),{layoutGroup:i,switchLayoutGroup:L.useContext(jR),isPresent:t,safeToRemove:n}))}const yK={borderRadius:Ee(te({},Bx),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Bx,borderTopRightRadius:Bx,borderBottomLeftRadius:Bx,borderBottomRightRadius:Bx,boxShadow:mK};function xK(e,t,n){const i=yo(e)?e:fy(e);return i.start(wT("",i,t,n)),i.animation}const _K=(e,t)=>e.depth-t.depth;class bK{constructor(){this.children=[],this.isDirty=!1}add(t){WC(this.children,t),this.isDirty=!0}remove(t){ZC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(_K),this.isDirty=!1,this.children.forEach(t)}}function vK(e,t){const n=ul.now(),i=({timestamp:o})=>{const u=o-n;u>=t&&(Hf(i),e(u-t))};return sr.setup(i,!0),()=>Hf(i)}const qR=["TopLeft","TopRight","BottomLeft","BottomRight"],wK=qR.length,KM=e=>typeof e=="string"?parseFloat(e):e,QM=e=>typeof e=="number"||hi.test(e);function SK(e,t,n,i,o,u){var c,a,g,_;o?(e.opacity=dr(0,(c=n.opacity)!=null?c:1,jK(i)),e.opacityExit=dr((a=t.opacity)!=null?a:1,0,CK(i))):u&&(e.opacity=dr((g=t.opacity)!=null?g:1,(_=n.opacity)!=null?_:1,i));for(let S=0;S<wK;S++){const E=`border${qR[S]}Radius`;let A=JM(t,E),N=JM(n,E);if(A===void 0&&N===void 0)continue;A||(A=0),N||(N=0),A===0||N===0||QM(A)===QM(N)?(e[E]=Math.max(dr(KM(A),KM(N),i),0),(_d.test(N)||_d.test(A))&&(e[E]+="%")):e[E]=N}(t.rotate||n.rotate)&&(e.rotate=dr(t.rotate||0,n.rotate||0,i))}function JM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const jK=GR(0,.5,R6),CK=GR(.5,.95,bc);function GR(e,t,n){return i=>i<e?0:i>t?1:n(P0(e,t,i))}function eN(e,t){e.min=t.min,e.max=t.max}function pc(e,t){eN(e.x,t.x),eN(e.y,t.y)}function tN(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function nN(e,t,n,i,o){return e-=t,e=n1(e,1/n,i),o!==void 0&&(e=n1(e,1/o,i)),e}function TK(e,t=0,n=1,i=.5,o,u=e,c=e){if(_d.test(t)&&(t=parseFloat(t),t=dr(c.min,c.max,t/100)-c.min),typeof t!="number")return;let a=dr(u.min,u.max,i);e===u&&(a-=t),e.min=nN(e.min,t,n,a,o),e.max=nN(e.max,t,n,a,o)}function iN(e,t,[n,i,o],u,c){TK(e,t[n],t[i],t[o],t.scale,u,c)}const kK=["x","scaleX","originX"],EK=["y","scaleY","originY"];function sN(e,t,n,i){iN(e.x,t,kK,n?n.x:void 0,i?i.x:void 0),iN(e.y,t,EK,n?n.y:void 0,i?i.y:void 0)}function rN(e){return e.translate===0&&e.scale===1}function WR(e){return rN(e.x)&&rN(e.y)}function aN(e,t){return e.min===t.min&&e.max===t.max}function MK(e,t){return aN(e.x,t.x)&&aN(e.y,t.y)}function oN(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ZR(e,t){return oN(e.x,t.x)&&oN(e.y,t.y)}function lN(e){return Lo(e.x)/Lo(e.y)}function cN(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class NK{constructor(){this.members=[]}add(t){WC(this.members,t),t.scheduleRender()}remove(t){if(ZC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AK(e,t,n){let i="";const o=e.x.translate/t.x,u=e.y.translate/t.y,c=(n==null?void 0:n.z)||0;if((o||u||c)&&(i=`translate3d(${o}px, ${u}px, ${c}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:_,rotate:S,rotateX:E,rotateY:A,skewX:N,skewY:z}=n;_&&(i=`perspective(${_}px) ${i}`),S&&(i+=`rotate(${S}deg) `),E&&(i+=`rotateX(${E}deg) `),A&&(i+=`rotateY(${A}deg) `),N&&(i+=`skewX(${N}deg) `),z&&(i+=`skewY(${z}deg) `)}const a=e.x.scale*t.x,g=e.y.scale*t.y;return(a!==1||g!==1)&&(i+=`scale(${a}, ${g})`),i||"none"}const E2=["","X","Y","Z"],PK=1e3;let RK=0;function M2(e,t,n,i){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),i&&(i[e]=0))}function YR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=DR(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:u}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",sr,!(o||u))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&YR(i)}function XR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(c={},a=t==null?void 0:t()){this.id=RK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(IK),this.nodes.forEach(BK),this.nodes.forEach(VK),this.nodes.forEach(OK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new bK)}addEventListener(c,a){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new KC),this.eventHandlers.get(c).add(a)}notifyListeners(c,...a){const g=this.eventHandlers.get(c);g&&g.notify(...a)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=dR(c)&&!EY(c),this.instance=c;const{layoutId:a,layout:g,visualElement:_}=this.options;if(_&&!_.current&&_.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||a)&&(this.isLayoutDirty=!0),e){let S,E=0;const A=()=>this.root.updateBlockedByResize=!1;sr.read(()=>{E=window.innerWidth}),e(c,()=>{const N=window.innerWidth;N!==E&&(E=N,this.root.updateBlockedByResize=!0,S&&S(),S=vK(A,250),uv.hasAnimatedSinceResize&&(uv.hasAnimatedSinceResize=!1,this.nodes.forEach(hN)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&_&&(a||g)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:E,hasRelativeLayoutChanged:A,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const z=this.options.transition||_.getDefaultTransition()||GK,{onLayoutAnimationStart:B,onLayoutAnimationComplete:$}=_.getProps(),q=!this.targetLayout||!ZR(this.targetLayout,N),W=!E&&A;if(this.options.layoutRoot||this.resumeFrom||W||E&&(q||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Q=Ee(te({},uT(z,"layout")),{onPlay:B,onComplete:$});(_.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q),this.setAnimationOrigin(S,W)}else E||hN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UK),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&YR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const E=this.path[S];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:a,layout:g}=this.options;if(a===void 0&&!g)return;const _=this.getTransformTemplate();this.prevTransformTemplateValue=_?_(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(uN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(dN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(LK),this.nodes.forEach(DK),this.nodes.forEach(zK)):this.nodes.forEach(dN),this.clearAllSnapshots();const a=ul.now();Ua.delta=Mh(0,1e3/60,a-Ua.timestamp),Ua.timestamp=a,Ua.isProcessing=!0,x2.update.process(Ua),x2.preRender.process(Ua),x2.render.process(Ua),Ua.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FK),this.sharedNodes.forEach($K)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Lo(this.snapshot.measuredBox.x)&&!Lo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Er(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(a=!1),a&&this.instance){const g=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:g,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!WR(this.projectionDelta),g=this.getTransformTemplate(),_=g?g(this.latestValues,""):void 0,S=_!==this.prevTransformTemplateValue;c&&this.instance&&(a||im(this.latestValues)||S)&&(o(this.instance,_),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const a=this.measurePageBox();let g=this.removeElementScroll(a);return c&&(g=this.removeTransform(g)),WK(g),{animationId:this.root.animationId,measuredBox:a,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var _;const{visualElement:c}=this.options;if(!c)return Er();const a=c.measureViewportBox();if(!(((_=this.scroll)==null?void 0:_.wasRoot)||this.path.some(ZK))){const{scroll:S}=this.root;S&&(Kg(a.x,S.offset.x),Kg(a.y,S.offset.y))}return a}removeElementScroll(c){var g;const a=Er();if(pc(a,c),(g=this.scroll)!=null&&g.wasRoot)return a;for(let _=0;_<this.path.length;_++){const S=this.path[_],{scroll:E,options:A}=S;S!==this.root&&E&&A.layoutScroll&&(E.wasRoot&&pc(a,c),Kg(a.x,E.offset.x),Kg(a.y,E.offset.y))}return a}applyTransform(c,a=!1){const g=Er();pc(g,c);for(let _=0;_<this.path.length;_++){const S=this.path[_];!a&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Qg(g,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),im(S.latestValues)&&Qg(g,S.latestValues)}return im(this.latestValues)&&Qg(g,this.latestValues),g}removeTransform(c){const a=Er();pc(a,c);for(let g=0;g<this.path.length;g++){const _=this.path[g];if(!_.instance||!im(_.latestValues))continue;uj(_.latestValues)&&_.updateSnapshot();const S=Er(),E=_.measurePageBox();pc(S,E),sN(a,_.latestValues,_.snapshot?_.snapshot.layoutBox:void 0,S)}return im(this.latestValues)&&sN(a,this.latestValues),a}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options=Ee(te(te({},this.options),c),{crossfade:c.crossfade!==void 0?c.crossfade:!0})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ua.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var A;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==a;if(!(c||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:E}=this.options;if(!(!this.layout||!(S||E))){if(this.resolvedRelativeTargetAt=Ua.timestamp,!this.targetDelta&&!this.relativeTarget){const N=this.getClosestProjectingParent();N&&N.layout&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Er(),this.relativeTargetOrigin=Er(),g0(this.relativeTargetOrigin,this.layout.layoutBox,N.layout.layoutBox),pc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Er(),this.targetWithTransforms=Er()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pc(this.target,this.layout.layoutBox),ER(this.target,this.targetDelta)):pc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const N=this.getClosestProjectingParent();N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Er(),this.relativeTargetOrigin=Er(),g0(this.relativeTargetOrigin,this.target,N.target),pc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||uj(this.parent.latestValues)||kR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var z;const c=this.getLead(),a=!!this.resumingFrom||this!==c;let g=!0;if((this.isProjectionDirty||(z=this.parent)!=null&&z.isProjectionDirty)&&(g=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Ua.timestamp&&(g=!1),g)return;const{layout:_,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_||S))return;pc(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,A=this.treeScale.y;hX(this.layoutCorrected,this.treeScale,this.path,a),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Er());const{target:N}=c;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(tN(this.prevProjectionDelta.x,this.projectionDelta.x),tN(this.prevProjectionDelta.y,this.projectionDelta.y)),m0(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==A||!cN(this.projectionDelta.x,this.prevProjectionDelta.x)||!cN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),c){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jg(),this.projectionDelta=Jg(),this.projectionDeltaWithTransform=Jg()}setAnimationOrigin(c,a=!1){const g=this.snapshot,_=g?g.latestValues:{},S=te({},this.latestValues),E=Jg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const A=Er(),N=g?g.source:void 0,z=this.layout?this.layout.source:void 0,B=N!==z,$=this.getStack(),q=!$||$.members.length<=1,W=!!(B&&!q&&this.options.crossfade===!0&&!this.path.some(qK));this.animationProgress=0;let Q;this.mixTargetDelta=Z=>{const K=Z/1e3;fN(E.x,c.x,K),fN(E.y,c.y,K),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(g0(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HK(this.relativeTarget,this.relativeTargetOrigin,A,K),Q&&MK(this.relativeTarget,Q)&&(this.isProjectionDirty=!1),Q||(Q=Er()),pc(Q,this.relativeTarget)),B&&(this.animationValues=S,SK(S,_,this.latestValues,K,W,q)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var a,g,_;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(_=(g=this.resumingFrom)==null?void 0:g.currentAnimation)==null||_.stop(),this.pendingAnimation&&(Hf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sr.update(()=>{uv.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fy(0)),this.currentAnimation=xK(this.motionValue,[0,1e3],Ee(te({},c),{velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),c.onUpdate&&c.onUpdate(S)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:a,target:g,layout:_,latestValues:S}=c;if(!(!a||!g||!_)){if(this!==c&&this.layout&&_&&KR(this.options.animationType,this.layout.layoutBox,_.layoutBox)){g=this.target||Er();const E=Lo(this.layout.layoutBox.x);g.x.min=c.target.x.min,g.x.max=g.x.min+E;const A=Lo(this.layout.layoutBox.y);g.y.min=c.target.y.min,g.y.max=g.y.min+A}pc(a,g),Qg(a,S),m0(this.projectionDeltaWithTransform,this.layoutCorrected,a,S)}}registerSharedNode(c,a){this.sharedNodes.has(c)||this.sharedNodes.set(c,new NK),this.sharedNodes.get(c).add(a);const _=a.options.initialPromotionConfig;a.promote({transition:_?_.transition:void 0,preserveFollowOpacity:_&&_.shouldPreserveFollowOpacity?_.shouldPreserveFollowOpacity(a):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var a;const{layoutId:c}=this.options;return c?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:c}=this.options;return c?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:a,preserveFollowOpacity:g}={}){const _=this.getStack();_&&_.promote(this,g),c&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let a=!1;const{latestValues:g}=c;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(a=!0),!a)return;const _={};g.z&&M2("z",c,_,this.animationValues);for(let S=0;S<E2.length;S++)M2(`rotate${E2[S]}`,c,_,this.animationValues),M2(`skew${E2[S]}`,c,_,this.animationValues);c.render();for(const S in _)c.setStaticValue(S,_[S]),this.animationValues&&(this.animationValues[S]=_[S]);c.scheduleRender()}applyProjectionStyles(c,a){var z,B;if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=cv(a==null?void 0:a.pointerEvents)||"",c.transform=g?g(this.latestValues,""):"none";return}const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=cv(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!im(this.latestValues)&&(c.transform=g?g({},""):"none",this.hasProjected=!1);return}c.visibility="";const S=_.animationValues||_.latestValues;this.applyTransformsToTarget();let E=AK(this.projectionDeltaWithTransform,this.treeScale,S);g&&(E=g(S,E)),c.transform=E;const{x:A,y:N}=this.projectionDelta;c.transformOrigin=`${A.origin*100}% ${N.origin*100}% 0`,_.animationValues?c.opacity=_===this?(B=(z=S.opacity)!=null?z:this.latestValues.opacity)!=null?B:1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:c.opacity=_===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const $ in I0){if(S[$]===void 0)continue;const{correct:q,applyTo:W,isCSSVariable:Q}=I0[$],Z=E==="none"?S[$]:q(S[$],_);if(W){const K=W.length;for(let le=0;le<K;le++)c[W[le]]=Z}else Q?this.options.visualElement.renderState.vars[$]=Z:c[$]=Z}this.options.layoutId&&(c.pointerEvents=_===this?cv(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var a;return(a=c.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(uN),this.root.sharedNodes.clear()}}}function DK(e){e.updateLayout()}function zK(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=e.layout,{animationType:u}=e.options,c=t.source!==e.layout.source;u==="size"?gc(E=>{const A=c?t.measuredBox[E]:t.layoutBox[E],N=Lo(A);A.min=i[E].min,A.max=A.min+N}):KR(u,t.layoutBox,i)&&gc(E=>{const A=c?t.measuredBox[E]:t.layoutBox[E],N=Lo(i[E]);A.max=A.min+N,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[E].max=e.relativeTarget[E].min+N)});const a=Jg();m0(a,i,t.layoutBox);const g=Jg();c?m0(g,e.applyTransform(o,!0),t.measuredBox):m0(g,i,t.layoutBox);const _=!WR(a);let S=!1;if(!e.resumeFrom){const E=e.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:A,layout:N}=E;if(A&&N){const z=Er();g0(z,t.layoutBox,A.layoutBox);const B=Er();g0(B,i,N.layoutBox),ZR(z,B)||(S=!0),E.options.layoutRoot&&(e.relativeTarget=B,e.relativeTargetOrigin=z,e.relativeParent=E)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:g,layoutDelta:a,hasLayoutChanged:_,hasRelativeLayoutChanged:S})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function IK(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function OK(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function FK(e){e.clearSnapshot()}function uN(e){e.clearMeasurements()}function dN(e){e.isLayoutDirty=!1}function LK(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function hN(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function BK(e){e.resolveTargetDelta()}function VK(e){e.calcProjection()}function UK(e){e.resetSkewAndRotation()}function $K(e){e.removeLeadSnapshot()}function fN(e,t,n){e.translate=dr(t.translate,0,n),e.scale=dr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function pN(e,t,n,i){e.min=dr(t.min,n.min,i),e.max=dr(t.max,n.max,i)}function HK(e,t,n,i){pN(e.x,t.x,n.x,i),pN(e.y,t.y,n.y,i)}function qK(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const GK={duration:.45,ease:[.4,0,.1,1]},mN=e=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),gN=mN("applewebkit/")&&!mN("chrome/")?Math.round:bc;function yN(e){e.min=gN(e.min),e.max=gN(e.max)}function WK(e){yN(e.x),yN(e.y)}function KR(e,t,n){return e==="position"||e==="preserve-aspect"&&!JX(lN(t),lN(n),.2)}function ZK(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const YK=XR({attachResizeListener:(e,t)=>O0(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),N2={current:void 0},QR=XR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!N2.current){const e=new YK({});e.mount(window),e.setOptions({layoutScroll:!0}),N2.current=e}return N2.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),XK={pan:{Feature:pK},drag:{Feature:fK,ProjectionNode:QR,MeasureLayout:HR}};function xN(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,u=i[o];u&&sr.postRender(()=>u(t,u_(t)))}class KK extends Jf{mount(){const{current:t}=this.node;t&&(this.unmount=SY(t,(n,i)=>(xN(this.node,i,"Start"),o=>xN(this.node,o,"End"))))}unmount(){}}class QK extends Jf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(n){t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=o_(O0(this.node.current,"focus",()=>this.onFocus()),O0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _N(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),u=i[o];u&&sr.postRender(()=>u(t,u_(t)))}class JK extends Jf{mount(){const{current:t}=this.node;t&&(this.unmount=kY(t,(n,i)=>(_N(this.node,i,"Start"),(o,{success:u})=>_N(this.node,o,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yj=new WeakMap,A2=new WeakMap,eQ=e=>{const t=yj.get(e.target);t&&t(e)},tQ=e=>{e.forEach(eQ)};function nQ(n){var i=n,{root:e}=i,t=Jt(i,["root"]);const o=e||document;A2.has(o)||A2.set(o,{});const u=A2.get(o),c=JSON.stringify(t);return u[c]||(u[c]=new IntersectionObserver(tQ,te({root:e},t))),u[c]}function iQ(e,t,n){const i=nQ(t);return yj.set(e,n),i.observe(e),()=>{yj.delete(e),i.unobserve(e)}}const sQ={some:0,all:1};class rQ extends Jf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:u}=t,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:sQ[o]},a=g=>{const{isIntersecting:_}=g;if(this.isInView===_||(this.isInView=_,u&&!_&&this.hasEnteredView))return;_&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",_);const{onViewportEnter:S,onViewportLeave:E}=this.node.getProps(),A=_?S:E;A&&A(g)};return iQ(this.node.current,c,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(aQ(t,n))&&this.startObserver()}unmount(){}}function aQ({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const oQ={inView:{Feature:rQ},tap:{Feature:JK},focus:{Feature:QK},hover:{Feature:KK}},lQ={layout:{ProjectionNode:QR,MeasureLayout:HR}},cQ=te(te(te(te({},WX),oQ),XK),lQ),Xs=cX(cQ,wX),JR="/assets/custom/mycard/assets/new-logo-CUf3m9o7.png",uQ=({isOpen:e,onClose:t})=>{if(!e)return null;const n=Pr();return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 mx-4",children:l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:l.jsx("svg",{className:"h-10 w-10 text-green-500 dark:text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Account Created Successfully!"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Your account has been created successfully. You can now log in with your credentials."}),l.jsx("div",{className:"flex space-x-2 w-full",children:l.jsx("button",{onClick:()=>n("/login"),className:"w-full px-5 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Continue to Login"})})]})})})},dQ=["Female","Male","Prefer not to say","Non-Conforming","Genderqueer","Transgender","Other"],hQ={hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.6,ease:"easeOut",when:"beforeChildren",staggerChildren:.1}}},Oo={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.3}}};function fQ(){const[e,t]=L.useState(!1),[n,i]=L.useState(!1),[o,u]=L.useState(!1),[c,a]=L.useState(""),[g,_]=L.useState(!1),[S,E]=L.useState({first_name:"",last_name:"",email:"",gender:"",birth_date:"2025-04-02",mobile_no:"",new_password:"",confirm_password:"",role_profile_name:"User All Access"}),A=S.new_password&&S.confirm_password&&S.new_password===S.confirm_password,N=()=>S.new_password!==S.confirm_password?(a("Passwords do not match"),!1):S.new_password.length<6?(a("Password must be at least 6 characters long"),!1):(a(""),!0),z=Q=>{const{name:Z,value:K}=Q.target;E(le=>Ee(te({},le),{[Z]:K})),(Z==="new_password"||Z==="confirm_password")&&a("")},B=Q=>{E(Z=>Ee(te({},Z),{gender:Q}))},$=()=>t(!1),q=Q=>{const Z=new Headers;Z.append("Authorization","token 3533a01fba5c78a:12e33572bb13e99"),Z.append("Content-Type","application/json"),console.log("create user",S);const K=JSON.stringify({first_name:S.first_name,email:S.email,gender:S.gender,last_name:S.last_name,birth_date:"2025-04-02",mobile_no:"",new_password:S.new_password,role_profile_name:"User All Access"});fetch("/api/resource/User",{method:"POST",headers:Z,body:K,redirect:"follow",credentials:"omit"}).then(ge=>ge.json()).then(ge=>{ge.data?t(!0):ge.exception&&a(ge.exception)}).catch(ge=>console.error(ge))},W=Q=>Gt(null,null,function*(){if(Q.preventDefault(),!N())return;const Z={first_name:S.first_name,email:S.email,gender:S.gender,full_name:S.full_name,birth_date:"2025-04-02",mobile_no:S.mobile_no,new_password:S.new_password,role_profile_name:"User All Access"};console.log("USER data....",Z);try{q(Z),_(!1)}catch(K){console.error("Error creating user:",K)}});return l.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 to-purple-100 overflow-hidden px-4",children:[l.jsx(Xs.div,{className:"absolute top-[-10%] left-[-12%] w-60 h-60 bg-blue-400 opacity-20 rounded-full blur-3xl",animate:{scale:[1,1.15,1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),l.jsx(Xs.div,{className:"absolute bottom-[-10%] right-[-12%] w-72 h-72 bg-purple-500 opacity-25 rounded-full blur-3xl",animate:{scale:[1,.9,1]},transition:{duration:9,repeat:1/0,ease:"easeInOut"}}),l.jsxs(Xs.div,{variants:hQ,initial:"hidden",animate:"visible",className:"relative z-10 w-full max-w-md p-8 rounded-3xl bg-white/50 backdrop-blur-xl shadow-lg border border-blue-200",children:[l.jsx(Xs.img,{variants:Oo,src:JR,alt:"Logo",className:"mx-auto mb-5 h-14 rounded-full shadow-sm"}),l.jsx(Xs.h2,{variants:Oo,className:"text-center text-3xl font-extrabold text-blue-700 mb-2",children:"Create your account"}),l.jsx(Xs.p,{variants:Oo,className:"text-center text-blue-400 mb-8",children:"Signup to get started"}),l.jsxs("form",{onSubmit:W,className:"space-y-5",children:[l.jsxs(Xs.div,{variants:Oo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Email Address"}),l.jsx("input",{type:"email",name:"email",value:S.email,onChange:z,disabled:g,required:!0,className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"name@company.com"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs(Xs.div,{variants:Oo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"First Name"}),l.jsx("input",{type:"text",name:"first_name",value:S.first_name,onChange:z,disabled:g,required:!0,placeholder:"First Name",className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"})]}),l.jsxs(Xs.div,{variants:Oo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Last Name"}),l.jsx("input",{type:"text",name:"last_name",value:S.last_name,onChange:z,disabled:g,required:!0,placeholder:"Last Name",className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs(Xs.div,{variants:Oo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Gender"}),l.jsxs(SW,{onValueChange:B,value:S.gender,children:[l.jsx(TW,{className:"w-full h-11 rounded-lg border border-blue-300 bg-white/70 focus:ring-2 focus:ring-blue-400 transition",children:l.jsx(CW,{placeholder:"Select Gender"})}),l.jsx(kW,{className:"rounded-xl",children:l.jsxs(jW,{children:[l.jsx(EW,{children:"Gender"}),dQ.map((Q,Z)=>l.jsx(MW,{value:Q,children:Q},Z))]})})]})]}),l.jsxs(Xs.div,{variants:Oo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Mobile Number"}),l.jsx("input",{type:"tel",name:"mobile_no",value:S.mobile_no,onChange:z,disabled:g,placeholder:"Mobile Number",className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs(Xs.div,{variants:Oo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:n?"text":"password",name:"new_password",value:S.new_password,onChange:z,disabled:g,placeholder:"Enter password",required:!0,className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 pr-11 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"}),l.jsx("button",{type:"button",className:"absolute right-3 top-3 text-blue-600 hover:text-blue-800 transition",onClick:()=>i(Q=>!Q),disabled:g,"aria-label":"Toggle Password Visibility",children:n?l.jsx(ty,{size:20}):l.jsx(hm,{size:20})})]})]}),l.jsxs(Xs.div,{variants:Oo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Confirm Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:o?"text":"password",name:"confirm_password",value:S.confirm_password,onChange:z,disabled:g,placeholder:"Confirm password",required:!0,className:`w-full rounded-lg border px-4 py-3 pr-11 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 transition ${c?"border-red-400 focus:ring-red-400":A&&S.confirm_password?"border-green-400 focus:ring-green-400":"border-blue-300 focus:ring-blue-400"} bg-white/70`}),l.jsx("div",{className:"absolute right-10 top-3",children:S.confirm_password&&(A?l.jsx($k,{size:20,className:"text-green-500"}):l.jsx(Nv,{size:20,className:"text-red-500"}))}),l.jsx("button",{type:"button",className:"absolute right-3 top-3 text-blue-600 hover:text-blue-800 transition",onClick:()=>u(Q=>!Q),disabled:g,"aria-label":"Toggle Confirm Password Visibility",children:o?l.jsx(ty,{size:20}):l.jsx(hm,{size:20})})]})]})]}),c&&l.jsxs(Xs.div,{variants:Oo,className:"flex items-center gap-2 text-red-600 bg-red-50 rounded-lg p-2 text-sm",children:[l.jsx(Nv,{size:16})," ",l.jsx("span",{children:c})]}),A&&S.confirm_password&&!c&&l.jsxs(Xs.div,{variants:Oo,className:"flex items-center gap-2 text-green-600 bg-green-50 rounded-lg p-2 text-sm",children:[l.jsx($k,{size:16})," ",l.jsx("span",{children:"Passwords match perfectly!"})]}),l.jsxs(Xs.div,{variants:Oo,className:"flex items-center space-x-2 text-blue-600 text-sm",children:[l.jsx("input",{type:"checkbox",id:"terms",required:!0,className:"w-4 h-4 rounded border border-blue-400 checked:bg-blue-600 focus:ring-2 focus:ring-blue-400"}),l.jsxs("label",{htmlFor:"terms",className:"select-none",children:["I agree to the"," ",l.jsx("a",{target:"_blank",href:"/mycard/terms_and_condition",className:"font-semibold hover:underline",children:"Terms and Conditions"})," ","and"," ",l.jsx("a",{target:"_blank",href:"/mycard/terms_and_condition",className:"font-semibold hover:underline",children:"Privacy Policy"})]})]}),l.jsx(Xs.button,{variants:Oo,type:"submit",disabled:g||c||!A||!S.email||!S.first_name||!S.new_password,className:"w-full py-3 rounded-xl font-bold text-white bg-gradient-to-r from-blue-600 to-purple-600 shadow-lg hover:brightness-110 hover:scale-105 transition transform disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Creating Account...":"Create Account"})]}),l.jsxs(Xs.p,{variants:Oo,className:"text-center text-sm text-blue-700 mt-6",children:["Already have an account?"," ",l.jsx("a",{href:"/mycard/login",className:"font-semibold hover:underline",children:"Sign in here"})]}),l.jsx(uQ,{isOpen:e,onClose:$})]})]})}const eD="/api/resource",dv=Cy("user/fetchUser",(n,i)=>Gt(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{const u=yield Os.get(`${eD}/User/${e}`,{withCredentials:!0});return console.log("my user ka detail",u,e),u.data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),P2=Cy("user/fetchUserList",(n,i)=>Gt(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{return(yield Os.get(`${eD}/User`,{withCredentials:!0})).data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),tD=Ty({name:"user",initialState:{currentUser:null,userList:[],loading:!1,error:null},reducers:{resetUser:e=>{e.currentUser=null,e.error=null,e.loading=!1}},extraReducers:e=>{e.addCase(dv.pending,t=>{t.loading=!0,t.error=null}).addCase(dv.fulfilled,(t,n)=>{t.loading=!1,t.currentUser=n.payload}).addCase(dv.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(P2.pending,t=>{t.loading=!0}).addCase(P2.fulfilled,(t,n)=>{t.loading=!1,t.userList=n.payload}).addCase(P2.rejected,(t,n)=>{t.loading=!1,t.error=n.payload})}}),{resetUser:Zae}=tD.actions,pQ=tD.reducer;function mQ(){const[e,t]=L.useState({username:"",password:""}),[n,i]=L.useState(!1),[o,u]=L.useState(""),[c,a]=L.useState(!1),{login:g}=Dm(),_=Im(),[S,E]=L.useState(!1),A=Pr(),{user:N,loading:z,error:B}=hd(W=>W.user),$=W=>t(Ee(te({},e),{[W.target.name]:W.target.value}));L.useEffect(()=>{S&&N&&!z&&!B?A("/"):S&&B&&(u("Failed to fetch user data"),E(!1),a(!1))},[N,z,B,S]);const q=W=>Gt(null,null,function*(){W.preventDefault(),u(""),a(!0);try{if(e.username===""||e.password==="")throw new Error("Please fill in all fields");const Q=yield g(e);if((Q==null?void 0:Q.message)==="Logged In")_(dv(e.username)),console.log("login success, fetching user data..."),setTimeout(()=>{A("/")},100),E(!0);else throw new Error((Q==null?void 0:Q.message)||"Login failed")}catch(Q){u(Q.message),a(!1)}});return l.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-white overflow-hidden",children:[l.jsx(Xs.div,{className:"absolute top-[-12%] left-[-10%] w-[360px] h-[360px] bg-blue-600 opacity-[0.12] morphing-blob blur-[110px] z-0",animate:{scale:[1,1.12,1]},transition:{repeat:1/0,duration:10,ease:"easeInOut"}}),l.jsx(Xs.div,{className:"absolute bottom-[-12%] right-[-10%] w-[400px] h-[400px] bg-blue-700 opacity-[0.15] morphing-blob blur-[120px] z-0",animate:{scale:[1,.95,1]},transition:{repeat:1/0,duration:9,ease:"easeInOut"}}),l.jsxs(Xs.div,{initial:{y:60,opacity:0,scale:.96},animate:{y:0,opacity:1,scale:1},transition:{duration:.8,type:"spring"},className:"relative z-10 p-10 w-full max-w-md rounded-2xl bg-white shadow-2xl border border-blue-200",children:[l.jsx(Xs.img,{src:JR,alt:"Logo",className:"mx-auto mb-6 h-14 rounded-full glow",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.7}}),l.jsx(Xs.h2,{className:"font-bold text-3xl text-blue-700 text-center mb-2",initial:{opacity:0,y:14},animate:{opacity:1,y:0},transition:{delay:.45},children:"Welcome Back!"}),l.jsx("p",{className:"text-blue-400 text-center mb-8",children:"Sign in to your account"}),l.jsxs("form",{onSubmit:q,className:"space-y-6",children:[l.jsxs(Xs.div,{initial:{opacity:0,x:48},animate:{opacity:1,x:0},transition:{delay:.59,type:"spring"},children:[l.jsx("label",{htmlFor:"username",className:"text-sm font-semibold text-blue-700",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(vP,{className:"absolute left-3 top-3 w-5 h-5 text-blue-300"}),l.jsx("input",{id:"username",name:"username",type:"email",autoComplete:"email",value:e.username,onChange:$,disabled:c,required:!0,className:"w-full pl-10 pr-4 py-3 rounded-lg bg-white border border-blue-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-400 text-blue-900 shadow-sm focus:shadow-lg transition-all duration-300 outline-none",placeholder:"you@example.com"})]})]}),l.jsxs(Xs.div,{initial:{opacity:0,x:70},animate:{opacity:1,x:0},transition:{delay:.69,type:"spring"},children:[l.jsx("label",{htmlFor:"password",className:"text-sm font-semibold text-blue-700",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(eB,{className:"absolute left-3 top-3 w-5 h-5 text-blue-300"}),l.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",value:e.password,onChange:$,disabled:c,required:!0,className:"w-full pl-10 pr-12 py-3 rounded-lg bg-white border border-blue-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-400 text-blue-900 shadow-sm focus:shadow-lg transition-all duration-300 outline-none",placeholder:"********"}),l.jsx("button",{type:"button","aria-label":"Toggle password visibility",className:"absolute right-2 top-3 text-blue-500 hover:text-blue-700",onClick:()=>i(W=>!W),disabled:c,children:n?l.jsx(ty,{}):l.jsx(hm,{})})]})]}),l.jsx("button",{type:"submit",disabled:c,className:`w-full py-3 rounded-full bg-gradient-to-r from-blue-600 to-blue-900 font-bold text-white text-lg shadow-lg transition-all duration-300 flex justify-center items-center ${c?"cursor-not-allowed opacity-70":"hover:scale-105"}`,children:c?l.jsxs("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Sign In"})]}),o&&l.jsx("p",{className:"mt-4 p-2 text-red-600 bg-red-50 rounded-lg",children:o}),l.jsxs("p",{className:"text-sm text-blue-500 text-center mt-6",children:["Don't have an account?"," ",l.jsx("a",{href:"/mycard/signup",className:"font-bold text-blue-700 hover:underline",children:"Sign up"})]})]})]})}const gQ=()=>{const[e,t]=L.useState(""),[n,i]=L.useState(null),[o,u]=L.useState([]),{id:c}=tC(),{data:a,isLoading:g,error:_,mutate:S}=Tv("Comments",{fields:["*"]}),{createDoc:E}=_y();console.log("Params",c),L.useEffect(()=>{if(a){const $=a.filter(q=>q.a_id&&!q.c_id).map(q=>{const W=a.filter(Q=>Q.c_id===q.name);return Ee(te({},q),{replies:W})});u($)}},[a]);const A=B=>Gt(null,null,function*(){if(B.preventDefault(),!!e.trim())try{yield E("Comments",{comment:e,a_id:c,c_id:n||null}),t(""),i(null),S()}catch($){console.error("Error posting comment:",$)}}),N=B=>{i(B),document.getElementById("comment").focus()},z=()=>{i(null)};return l.jsx("section",{className:"bg-white dark:bg-gray-900 py-8 lg:py-16 antialiased",children:l.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsxs("h2",{className:"text-lg lg:text-2xl font-bold text-gray-900 dark:text-white",children:["Discussion (",o.length,")"]})}),l.jsxs("form",{className:"mb-6",onSubmit:A,children:[n&&l.jsxs("div",{className:"mb-2 flex items-center",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Replying to comment"}),l.jsx("button",{type:"button",onClick:z,className:"ml-2 text-xs text-red-500 hover:underline",children:"Cancel"})]}),l.jsxs("div",{className:"py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[l.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Your comment"}),l.jsx("textarea",{id:"comment",rows:"6",className:"px-0 w-full text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none dark:text-white dark:placeholder-gray-400 dark:bg-gray-800",placeholder:"Write a comment...",value:e,onChange:B=>t(B.target.value),required:!0})]}),l.jsx("button",{type:"submit",className:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-900 hover:bg-blue-800",children:n?"Post reply":"Post comment"})]}),g&&l.jsx("p",{className:"text-center",children:"Loading comments..."}),_&&l.jsx("p",{className:"text-center text-red-500",children:"Error loading comments"}),o.map(B=>l.jsxs("div",{children:[l.jsxs("article",{className:"p-6 text-base bg-white rounded-lg dark:bg-gray-900",children:[l.jsxs("footer",{className:"flex justify-between items-center mb-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("p",{className:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold",children:[l.jsx("img",{className:"mr-2 w-6 h-6 rounded-full",src:B.user_image||"https://flowbite.com/docs/images/people/profile-picture-2.jpg",alt:B.user_name||"User"}),B.owner||"Anonymous"]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.jsx("time",{pubdate:!0,dateTime:B.creation,children:new Date(B.creation).toLocaleDateString()})})]}),l.jsxs("button",{id:`dropdownComment${B.name}`,"data-dropdown-toggle":`dropdownComment${B.name}`,className:"inline-flex items-center p-2 text-sm font-medium text-center text-gray-500 dark:text-gray-400 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-50 dark:bg-gray-900 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button",children:[l.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 3",children:l.jsx("path",{d:"M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"})}),l.jsx("span",{className:"sr-only",children:"Comment settings"})]}),l.jsx("div",{id:`dropdownComment${B.name}`,className:"hidden z-10 w-36 bg-white rounded divide-y divide-gray-100 shadow dark:bg-gray-700 dark:divide-gray-600",children:l.jsxs("ul",{className:"py-1 text-sm text-gray-700 dark:text-gray-200",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:"Edit"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:"Remove"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:"Report"})})]})})]}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:B.comment}),l.jsx("div",{className:"flex items-center mt-4 space-x-4",children:l.jsxs("button",{type:"button",onClick:()=>N(B.name),className:"flex items-center text-sm text-gray-500 hover:underline dark:text-gray-400 font-medium",children:[l.jsx("svg",{className:"mr-1.5 w-3.5 h-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 18",children:l.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 5h5M5 8h2m6-3h2m-5 3h6m2-7H2a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h3v5l5-5h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"})}),"Reply"]})})]}),B.replies&&B.replies.map($=>l.jsxs("article",{className:"p-6 mb-3 ml-6 lg:ml-12 text-base bg-white rounded-lg dark:bg-gray-900",children:[l.jsxs("footer",{className:"flex justify-between items-center mb-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("p",{className:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold",children:[l.jsx("img",{className:"mr-2 w-6 h-6 rounded-full",src:$.user_image||"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:$.user_name||"User"}),$.owner||"Anonymous"]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.jsx("time",{pubdate:!0,dateTime:$.creation,children:new Date($.creation).toLocaleDateString()})})]}),l.jsxs("button",{id:`dropdownComment${$.name}`,"data-dropdown-toggle":`dropdownComment${$.name}`,className:"inline-flex items-center p-2 text-sm font-medium text-center text-gray-500 dark:text-gray-400 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-50 dark:bg-gray-900 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button",children:[l.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 3",children:l.jsx("path",{d:"M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"})}),l.jsx("span",{className:"sr-only",children:"Comment settings"})]})]}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:$.comment}),l.jsx("div",{className:"flex items-center mt-4 space-x-4",children:l.jsxs("button",{type:"button",onClick:()=>N(B.name),className:"flex items-center text-sm text-gray-500 hover:underline dark:text-gray-400 font-medium",children:[l.jsx("svg",{className:"mr-1.5 w-3.5 h-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 18",children:l.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 5h5M5 8h2m6-3h2m-5 3h6m2-7H2a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h3v5l5-5h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"})}),"Reply"]})})]},$.name))]},B.name))]})})};function Vx(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:l.jsx("table",te({"data-slot":"table",className:wr("w-full caption-bottom text-sm",e)},t))})}function Ux(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx("thead",te({"data-slot":"table-header",className:wr("[&_tr]:border-b",e)},t))}function $x(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx("tbody",te({"data-slot":"table-body",className:wr("[&_tr:last-child]:border-0",e)},t))}function cd(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx("tr",te({"data-slot":"table-row",className:wr("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e)},t))}function qr(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx("th",te({"data-slot":"table-head",className:wr("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e)},t))}function Gr(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx("td",te({"data-slot":"table-cell",className:wr("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e)},t))}function bN(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx("caption",te({"data-slot":"table-caption",className:wr("text-muted-foreground mt-4 text-sm",e)},t))}var vN=1,yQ=.9,xQ=.8,_Q=.17,R2=.1,D2=.999,bQ=.9999,vQ=.99,wQ=/[\\\/_+.#"@\[\(\{&]/,SQ=/[\\\/_+.#"@\[\(\{&]/g,jQ=/[\s-]/,nD=/[\s-]/g;function xj(e,t,n,i,o,u,c){if(u===t.length)return o===e.length?vN:vQ;var a=`${o},${u}`;if(c[a]!==void 0)return c[a];for(var g=i.charAt(u),_=n.indexOf(g,o),S=0,E,A,N,z;_>=0;)E=xj(e,t,n,i,_+1,u+1,c),E>S&&(_===o?E*=vN:wQ.test(e.charAt(_-1))?(E*=xQ,N=e.slice(o,_-1).match(SQ),N&&o>0&&(E*=Math.pow(D2,N.length))):jQ.test(e.charAt(_-1))?(E*=yQ,z=e.slice(o,_-1).match(nD),z&&o>0&&(E*=Math.pow(D2,z.length))):(E*=_Q,o>0&&(E*=Math.pow(D2,_-o))),e.charAt(_)!==t.charAt(u)&&(E*=bQ)),(E<R2&&n.charAt(_-1)===i.charAt(u+1)||i.charAt(u+1)===i.charAt(u)&&n.charAt(_-1)!==i.charAt(u))&&(A=xj(e,t,n,i,_+1,u+2,c),A*R2>E&&(E=A*R2)),E>S&&(S=E),_=n.indexOf(g,_+1);return c[a]=S,S}function wN(e){return e.toLowerCase().replace(nD," ")}function CQ(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,xj(e,t,wN(e),wN(t),0,0,{})}var Hx='[cmdk-group=""]',z2='[cmdk-group-items=""]',TQ='[cmdk-group-heading=""]',iD='[cmdk-item=""]',SN=`${iD}:not([aria-disabled="true"])`,_j="cmdk-item-select",Gg="data-value",kQ=(e,t,n)=>CQ(e,t,n),sD=L.createContext(void 0),d_=()=>L.useContext(sD),rD=L.createContext(void 0),ST=()=>L.useContext(rD),aD=L.createContext(void 0),oD=L.forwardRef((e,t)=>{let n=Wg(()=>{var Me,ot;return{search:"",value:(ot=(Me=e.value)!=null?Me:e.defaultValue)!=null?ot:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),i=Wg(()=>new Set),o=Wg(()=>new Map),u=Wg(()=>new Map),c=Wg(()=>new Set),a=lD(e),tt=e,{label:g,children:_,value:S,onValueChange:E,filter:A,shouldFilter:N,loop:z,disablePointerSelection:B=!1,vimBindings:$=!0}=tt,q=Jt(tt,["label","children","value","onValueChange","filter","shouldFilter","loop","disablePointerSelection","vimBindings"]),W=Fl(),Q=Fl(),Z=Fl(),K=L.useRef(null),le=FQ();Nm(()=>{if(S!==void 0){let Me=S.trim();n.current.value=Me,ge.emit()}},[S]),Nm(()=>{le(6,rt)},[]);let ge=L.useMemo(()=>({subscribe:Me=>(c.current.add(Me),()=>c.current.delete(Me)),snapshot:()=>n.current,setState:(Me,ot,ut)=>{var dt,pt,Ve,Ge;if(!Object.is(n.current[Me],ot)){if(n.current[Me]=ot,Me==="search")Ye(),Ie(),le(1,He);else if(Me==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Dt=document.getElementById(Z);Dt?Dt.focus():(dt=document.getElementById(W))==null||dt.focus()}if(le(7,()=>{var Dt;n.current.selectedItemId=(Dt=Rt())==null?void 0:Dt.id,ge.emit()}),ut||le(5,rt),((pt=a.current)==null?void 0:pt.value)!==void 0){let Dt=ot!=null?ot:"";(Ge=(Ve=a.current).onValueChange)==null||Ge.call(Ve,Dt);return}}ge.emit()}},emit:()=>{c.current.forEach(Me=>Me())}}),[]),he=L.useMemo(()=>({value:(Me,ot,ut)=>{var dt;ot!==((dt=u.current.get(Me))==null?void 0:dt.value)&&(u.current.set(Me,{value:ot,keywords:ut}),n.current.filtered.items.set(Me,pe(ot,ut)),le(2,()=>{Ie(),ge.emit()}))},item:(Me,ot)=>(i.current.add(Me),ot&&(o.current.has(ot)?o.current.get(ot).add(Me):o.current.set(ot,new Set([Me]))),le(3,()=>{Ye(),Ie(),n.current.value||He(),ge.emit()}),()=>{u.current.delete(Me),i.current.delete(Me),n.current.filtered.items.delete(Me);let ut=Rt();le(4,()=>{Ye(),(ut==null?void 0:ut.getAttribute("id"))===Me&&He(),ge.emit()})}),group:Me=>(o.current.has(Me)||o.current.set(Me,new Set),()=>{u.current.delete(Me),o.current.delete(Me)}),filter:()=>a.current.shouldFilter,label:g||e["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:W,inputId:Z,labelId:Q,listInnerRef:K}),[]);function pe(Me,ot){var ut,dt;let pt=(dt=(ut=a.current)==null?void 0:ut.filter)!=null?dt:kQ;return Me?pt(Me,n.current.search,ot):0}function Ie(){if(!n.current.search||a.current.shouldFilter===!1)return;let Me=n.current.filtered.items,ot=[];n.current.filtered.groups.forEach(dt=>{let pt=o.current.get(dt),Ve=0;pt.forEach(Ge=>{let Dt=Me.get(Ge);Ve=Math.max(Dt,Ve)}),ot.push([dt,Ve])});let ut=K.current;St().sort((dt,pt)=>{var Ve,Ge;let Dt=dt.getAttribute("id"),Lt=pt.getAttribute("id");return((Ve=Me.get(Lt))!=null?Ve:0)-((Ge=Me.get(Dt))!=null?Ge:0)}).forEach(dt=>{let pt=dt.closest(z2);pt?pt.appendChild(dt.parentElement===pt?dt:dt.closest(`${z2} > *`)):ut.appendChild(dt.parentElement===ut?dt:dt.closest(`${z2} > *`))}),ot.sort((dt,pt)=>pt[1]-dt[1]).forEach(dt=>{var pt;let Ve=(pt=K.current)==null?void 0:pt.querySelector(`${Hx}[${Gg}="${encodeURIComponent(dt[0])}"]`);Ve==null||Ve.parentElement.appendChild(Ve)})}function He(){let Me=St().find(ut=>ut.getAttribute("aria-disabled")!=="true"),ot=Me==null?void 0:Me.getAttribute(Gg);ge.setState("value",ot||void 0)}function Ye(){var Me,ot,ut,dt;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=i.current.size;return}n.current.filtered.groups=new Set;let pt=0;for(let Ve of i.current){let Ge=(ot=(Me=u.current.get(Ve))==null?void 0:Me.value)!=null?ot:"",Dt=(dt=(ut=u.current.get(Ve))==null?void 0:ut.keywords)!=null?dt:[],Lt=pe(Ge,Dt);n.current.filtered.items.set(Ve,Lt),Lt>0&&pt++}for(let[Ve,Ge]of o.current)for(let Dt of Ge)if(n.current.filtered.items.get(Dt)>0){n.current.filtered.groups.add(Ve);break}n.current.filtered.count=pt}function rt(){var Me,ot,ut;let dt=Rt();dt&&(((Me=dt.parentElement)==null?void 0:Me.firstChild)===dt&&((ut=(ot=dt.closest(Hx))==null?void 0:ot.querySelector(TQ))==null||ut.scrollIntoView({block:"nearest"})),dt.scrollIntoView({block:"nearest"}))}function Rt(){var Me;return(Me=K.current)==null?void 0:Me.querySelector(`${iD}[aria-selected="true"]`)}function St(){var Me;return Array.from(((Me=K.current)==null?void 0:Me.querySelectorAll(SN))||[])}function De(Me){let ot=St()[Me];ot&&ge.setState("value",ot.getAttribute(Gg))}function Qe(Me){var ot;let ut=Rt(),dt=St(),pt=dt.findIndex(Ge=>Ge===ut),Ve=dt[pt+Me];(ot=a.current)!=null&&ot.loop&&(Ve=pt+Me<0?dt[dt.length-1]:pt+Me===dt.length?dt[0]:dt[pt+Me]),Ve&&ge.setState("value",Ve.getAttribute(Gg))}function et(Me){let ot=Rt(),ut=ot==null?void 0:ot.closest(Hx),dt;for(;ut&&!dt;)ut=Me>0?IQ(ut,Hx):OQ(ut,Hx),dt=ut==null?void 0:ut.querySelector(SN);dt?ge.setState("value",dt.getAttribute(Gg)):Qe(Me)}let Nt=()=>De(St().length-1),fe=Me=>{Me.preventDefault(),Me.metaKey?Nt():Me.altKey?et(1):Qe(1)},Xe=Me=>{Me.preventDefault(),Me.metaKey?De(0):Me.altKey?et(-1):Qe(-1)};return L.createElement(Ui.div,Ee(te({ref:t,tabIndex:-1},q),{"cmdk-root":"",onKeyDown:Me=>{var ot;(ot=q.onKeyDown)==null||ot.call(q,Me);let ut=Me.nativeEvent.isComposing||Me.keyCode===229;if(!(Me.defaultPrevented||ut))switch(Me.key){case"n":case"j":{$&&Me.ctrlKey&&fe(Me);break}case"ArrowDown":{fe(Me);break}case"p":case"k":{$&&Me.ctrlKey&&Xe(Me);break}case"ArrowUp":{Xe(Me);break}case"Home":{Me.preventDefault(),De(0);break}case"End":{Me.preventDefault(),Nt();break}case"Enter":{Me.preventDefault();let dt=Rt();if(dt){let pt=new Event(_j);dt.dispatchEvent(pt)}}}}}),L.createElement("label",{"cmdk-label":"",htmlFor:he.inputId,id:he.labelId,style:BQ},g),G1(e,Me=>L.createElement(rD.Provider,{value:ge},L.createElement(sD.Provider,{value:he},Me))))}),EQ=L.forwardRef((e,t)=>{var n,i;let o=Fl(),u=L.useRef(null),c=L.useContext(aD),a=d_(),g=lD(e),_=(i=(n=g.current)==null?void 0:n.forceMount)!=null?i:c==null?void 0:c.forceMount;Nm(()=>{if(!_)return a.item(o,c==null?void 0:c.id)},[_]);let S=cD(o,u,[e.value,e.children,u],e.keywords),E=ST(),A=Gf(ge=>ge.value&&ge.value===S.current),N=Gf(ge=>_||a.filter()===!1?!0:ge.search?ge.filtered.items.get(o)>0:!0);L.useEffect(()=>{let ge=u.current;if(!(!ge||e.disabled))return ge.addEventListener(_j,z),()=>ge.removeEventListener(_j,z)},[N,e.onSelect,e.disabled]);function z(){var ge,he;B(),(he=(ge=g.current).onSelect)==null||he.call(ge,S.current)}function B(){E.setState("value",S.current,!0)}if(!N)return null;let le=e,{disabled:$,value:q,onSelect:W,forceMount:Q,keywords:Z}=le,K=Jt(le,["disabled","value","onSelect","forceMount","keywords"]);return L.createElement(Ui.div,Ee(te({ref:bm(u,t)},K),{id:o,"cmdk-item":"",role:"option","aria-disabled":!!$,"aria-selected":!!A,"data-disabled":!!$,"data-selected":!!A,onPointerMove:$||a.getDisablePointerSelection()?void 0:B,onClick:$?void 0:z}),e.children)}),MQ=L.forwardRef((e,t)=>{let N=e,{heading:n,children:i,forceMount:o}=N,u=Jt(N,["heading","children","forceMount"]),c=Fl(),a=L.useRef(null),g=L.useRef(null),_=Fl(),S=d_(),E=Gf(z=>o||S.filter()===!1?!0:z.search?z.filtered.groups.has(c):!0);Nm(()=>S.group(c),[]),cD(c,a,[e.value,e.heading,g]);let A=L.useMemo(()=>({id:c,forceMount:o}),[o]);return L.createElement(Ui.div,Ee(te({ref:bm(a,t)},u),{"cmdk-group":"",role:"presentation",hidden:E?void 0:!0}),n&&L.createElement("div",{ref:g,"cmdk-group-heading":"","aria-hidden":!0,id:_},n),G1(e,z=>L.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?_:void 0},L.createElement(aD.Provider,{value:A},z))))}),NQ=L.forwardRef((e,t)=>{let c=e,{alwaysRender:n}=c,i=Jt(c,["alwaysRender"]),o=L.useRef(null),u=Gf(a=>!a.search);return!n&&!u?null:L.createElement(Ui.div,Ee(te({ref:bm(o,t)},i),{"cmdk-separator":"",role:"separator"}))}),AQ=L.forwardRef((e,t)=>{let _=e,{onValueChange:n}=_,i=Jt(_,["onValueChange"]),o=e.value!=null,u=ST(),c=Gf(S=>S.search),a=Gf(S=>S.selectedItemId),g=d_();return L.useEffect(()=>{e.value!=null&&u.setState("search",e.value)},[e.value]),L.createElement(Ui.input,Ee(te({ref:t},i),{"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":g.listId,"aria-labelledby":g.labelId,"aria-activedescendant":a,id:g.inputId,type:"text",value:o?e.value:c,onChange:S=>{o||u.setState("search",S.target.value),n==null||n(S.target.value)}}))}),PQ=L.forwardRef((e,t)=>{let _=e,{children:n,label:i="Suggestions"}=_,o=Jt(_,["children","label"]),u=L.useRef(null),c=L.useRef(null),a=Gf(S=>S.selectedItemId),g=d_();return L.useEffect(()=>{if(c.current&&u.current){let S=c.current,E=u.current,A,N=new ResizeObserver(()=>{A=requestAnimationFrame(()=>{let z=S.offsetHeight;E.style.setProperty("--cmdk-list-height",z.toFixed(1)+"px")})});return N.observe(S),()=>{cancelAnimationFrame(A),N.unobserve(S)}}},[]),L.createElement(Ui.div,Ee(te({ref:bm(u,t)},o),{"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":i,id:g.listId}),G1(e,S=>L.createElement("div",{ref:bm(c,g.listInnerRef),"cmdk-list-sizer":""},S)))}),RQ=L.forwardRef((e,t)=>{let g=e,{open:n,onOpenChange:i,overlayClassName:o,contentClassName:u,container:c}=g,a=Jt(g,["open","onOpenChange","overlayClassName","contentClassName","container"]);return L.createElement(VH,{open:n,onOpenChange:i},L.createElement(UH,{container:c},L.createElement($H,{"cmdk-overlay":"",className:o}),L.createElement(HH,{"aria-label":e.label,"cmdk-dialog":"",className:u},L.createElement(oD,te({ref:t},a)))))}),DQ=L.forwardRef((e,t)=>Gf(n=>n.filtered.count===0)?L.createElement(Ui.div,Ee(te({ref:t},e),{"cmdk-empty":"",role:"presentation"})):null),zQ=L.forwardRef((e,t)=>{let c=e,{progress:n,children:i,label:o="Loading..."}=c,u=Jt(c,["progress","children","label"]);return L.createElement(Ui.div,Ee(te({ref:t},u),{"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o}),G1(e,a=>L.createElement("div",{"aria-hidden":!0},a)))}),Iy=Object.assign(oD,{List:PQ,Item:EQ,Input:AQ,Group:MQ,Separator:NQ,Dialog:RQ,Empty:DQ,Loading:zQ});function IQ(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function OQ(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function lD(e){let t=L.useRef(e);return Nm(()=>{t.current=e}),t}var Nm=typeof window=="undefined"?L.useEffect:L.useLayoutEffect;function Wg(e){let t=L.useRef();return t.current===void 0&&(t.current=e()),t}function Gf(e){let t=ST(),n=()=>e(t.snapshot());return L.useSyncExternalStore(t.subscribe,n,n)}function cD(e,t,n,i=[]){let o=L.useRef(),u=d_();return Nm(()=>{var c;let a=(()=>{var _;for(let S of n){if(typeof S=="string")return S.trim();if(typeof S=="object"&&"current"in S)return S.current?(_=S.current.textContent)==null?void 0:_.trim():o.current}})(),g=i.map(_=>_.trim());u.value(e,a,g),(c=t.current)==null||c.setAttribute(Gg,a),o.current=a}),o}var FQ=()=>{let[e,t]=L.useState(),n=Wg(()=>new Map);return Nm(()=>{n.current.forEach(i=>i()),n.current=new Map},[e]),(i,o)=>{n.current.set(i,o),t({})}};function LQ(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function G1({asChild:e,children:t},n){return e&&L.isValidElement(t)?L.cloneElement(LQ(t),{ref:t.ref},n(t.props.children)):n(t)}var BQ={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function VQ(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx(Iy,te({"data-slot":"command",className:wr("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e)},t))}function UQ(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[l.jsx(l0,{className:"size-4 shrink-0 opacity-50"}),l.jsx(Iy.Input,te({"data-slot":"command-input",className:wr("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e)},t))]})}function $Q(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx(Iy.List,te({"data-slot":"command-list",className:wr("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e)},t))}function HQ(t){var e=Jt(t,[]);return l.jsx(Iy.Empty,te({"data-slot":"command-empty",className:"py-6 text-center text-sm"},e))}function qQ(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx(Iy.Group,te({"data-slot":"command-group",className:wr("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e)},t))}function GQ(n){var i=n,{className:e}=i,t=Jt(i,["className"]);return l.jsx(Iy.Item,te({"data-slot":"command-item",className:wr("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e)},t))}function WQ(t){var e=Jt(t,[]);return l.jsx(lG,te({"data-slot":"popover"},e))}function ZQ(t){var e=Jt(t,[]);return l.jsx(cG,te({"data-slot":"popover-trigger"},e))}function YQ(o){var u=o,{className:e,align:t="center",sideOffset:n=4}=u,i=Jt(u,["className","align","sideOffset"]);return l.jsx(uG,{children:l.jsx(dG,te({"data-slot":"popover-content",align:t,sideOffset:n,className:wr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e)},i))})}const qx=({value:e,onChange:t,doctype:n})=>{var g;const[i,o]=L.useState(!1),[u,c]=L.useState(""),{data:a}=TO(n,u);return console.log("Link data",a),l.jsxs(WQ,{open:i,onOpenChange:o,children:[l.jsx(ZQ,{asChild:!0,children:l.jsxs(V8,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-[200px] justify-between",children:[e||`select ${n}`,l.jsx(gL,{className:"opacity-50"})]})}),l.jsx(YQ,{className:"w-[200px] p-0",children:l.jsxs(VQ,{shouldFilter:!1,children:[l.jsx(UQ,{placeholder:"Search ...",className:"h-9",value:u,onValueChange:c}),l.jsxs($Q,{children:[l.jsxs(HQ,{children:["No ",n," found."]}),l.jsxs(qQ,{children:[(a==null?void 0:a.message.length)===0&&l.jsxs("span",{className:"py-6 text-center text-sm",children:["No ",n," found."]}),(g=a==null?void 0:a.message)==null?void 0:g.map(_=>l.jsxs(GQ,{value:_.value,onSelect:S=>{t(S===e?"":S),o(!1)},children:[_.value,l.jsx(yP,{className:wr("ml-auto",e===_.value?"opacity-100":"opacity-0")})]},_.value))]})]})]})})]})};L.createContext({});L.createContext({});const XQ=()=>{var qt,Ft,bn,Tn,ct;BS();const{currentUser:e,login:t}=Dm(),{data:n,loading:i,error:o,mutate:u}=jh("User",e),{updateDoc:c,loading:a}=LA(),[g,_]=L.useState(""),[S,E]=L.useState(""),[A,N]=L.useState(""),[z,B]=L.useState(""),[$,q]=L.useState(""),[W,Q]=L.useState(""),[Z,K]=L.useState(""),[le,ge]=L.useState([]),[he,pe]=L.useState([]),[Ie,He]=L.useState([]),[Ye,rt]=L.useState([]),[Rt,St]=L.useState([]),[De,Qe]=L.useState([]),[et,Nt]=L.useState([]),[fe,Xe]=L.useState(""),[tt,Me]=L.useState(""),[ot,ut]=L.useState(""),[dt,pt]=L.useState(!1),[Ve,Ge]=L.useState(!1),[Dt,Lt]=L.useState(!1),[It,Ot]=L.useState(null),[en,_n]=L.useState(""),[Yn,Hn]=L.useState(!1),{upload:hn}=Kj(),{register:on,handleSubmit:Ue,control:We}=BS();Pr();const{data:Pe}=jh("User",e);console.log("User details",Pe),L.useEffect(()=>{n&&(E(n.first_name||""),N(n.last_name||""),B(n.birth_date||""),q(n.gender||""),Q(n.mobile_no||""),K(n.bio||""),_n(n.user_image||""))},[n]);const Bt=()=>Gt(null,null,function*(){if(!fe||!tt){$a.warning("Please fill both password fields");return}if(tt!==ot){$a.error("New password and Confirm password are not matching");return}console.log("Current password",fe);try{yield t({username:e,password:fe}).then(Ut=>Gt(null,null,function*(){Ut.message==="Logged In"&&tt===ot&&(yield c("User",e,{new_password:tt}),Xe(""),Me(""),$a.success("Password updated successfully"))}))}catch(wt){console.log("login error",wt),$a.error(wt.message)}}),Et=wt=>{const Wt=wt.target.files[0];Wt&&(Ot(Wt),_n(URL.createObjectURL(Wt)))},nn=()=>{Ot(null),_n("")},yn=()=>Gt(null,null,function*(){if(It&&It){const wt=yield hn(It,{isPrivate:!0,doctype:"User",fieldname:"user_image"});wt&&(Ot(wt.file_url),yield c("User",e,{user_image:wt.file_url}),u(),alert("Profile picture uploaded successfully"))}}),ln=()=>Gt(null,null,function*(){if(!Yn){Hn(!0);return}try{alert("Account deletion ")}catch(wt){console.error("Error deleting account:",wt),alert("Failed to delete account")}});if(i)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading user data..."});if(o)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:"Error loading user data"});const At=()=>S&&A?(S[0]+A[0]).toUpperCase():S?S[0].toUpperCase():e?e[0].toUpperCase():"U",ke=Lg({control:We,name:"identifications"}),ae=Lg({control:We,name:"identification_type"}),ue=Lg({control:We,name:"biometric_details"}),_e=Lg({control:We,name:"bank_account_details"}),Ce=Lg({control:We,name:"details_of_spouse"}),Ae=Lg({control:We,name:"details_of_children"}),J=wt=>Gt(null,null,function*(){console.log("Form submitted:",wt);const Wt=Object.fromEntries(Object.entries({title:wt.title,first_name:wt.first_name,middle_name:wt.middle_name,last_name:wt.last_name,gender:wt.gender,nationality:wt.nationality,resident_status:wt.resident_status,marital_status:wt.marital_status,origin:wt.origin,portion_nolot_no:wt.portion_nolot_no,villagestreet:wt.villagestreet,town:wt.town,district:wt.district,province:wt.province,country:wt.country,po_box:wt.po_box,postal_code:wt.postal_code,portion_lot_no:wt.portion_lot_no,village_street:wt.village_street,town1:wt.town1,district1:wt.district1,province1:wt.province1,country1:wt.country1,po_box1:wt.po_box1,postal_code1:wt.postal_code1,office_no:wt.office_no,home:wt.home,mobile_no:wt.mobile_no,office_email:wt.office_email,personal_email:wt.personal_email,phone_no:wt.phone_no,email_id:wt.email_id,dd:wt.identifications,identification_type:wt.biometric_details,table_64:wt.bank_account_details,details_of_spose:wt.details_of_spouse,details_of_children:wt.details_of_children,name1:wt.name1,relationship:wt.relationship,crm_no:wt.crm_no}).filter(([Ut,vn])=>vn!=null));try{yield c("Prospect Details","CRM-0000010",Wt),Xe(""),Me(""),$a.success("Data updated successfully")}catch(Ut){console.error("Error updating data:",Ut),$a.error("Failed to update data")}}),nt=wt=>{switch(wt){case"identifications":ke.append({identification_type:"",number:""});break;case"identification_type":ae.append({identification_type:"",status:""});break;case"education":educationArray.append({institution:"",degree:"",year:""});break;case"employment":employmentArray.append({company:"",position:"",duration:""});break;case"biometric_details":ue.append({identification_type:"",status:""});break;case"bank_account_details":_e.append({bank_account:"",account_number:"",branch_name:""});break;case"details_of_spouse":Ce.append({name1:"",crm_no:"",age:""});break;case"details_of_children":Ae.append({children_name:"",spouse_name:"",crm_no:"",age:""});break;default:console.error("Unknown table type:",wt)}},Je=(wt,Wt)=>{switch(wt){case"identifications":ge(Ut=>Ut.includes(Wt)?Ut.filter(vn=>vn!==Wt):[...Ut,Wt]);break;case"identification_type":Qe(Ut=>Ut.includes(Wt)?Ut.filter(vn=>vn!==Wt):[...Ut,Wt]);break;case"employment":Nt(Ut=>Ut.includes(Wt)?Ut.filter(vn=>vn!==Wt):[...Ut,Wt]);break;default:console.error("Unknown table type:",wt)}},jt=wt=>{let Wt,Ut,vn;switch(wt){case"identifications":Wt=le,Ut=ke,vn=ge;break;case"identification_type":Wt=De,Ut=ae,vn=Qe;break;case"employment":Wt=et,Ut=employmentArray,vn=Nt;break;default:console.error("Unknown table type:",wt);return}[...Wt].sort((Jn,ai)=>ai-Jn).forEach(Jn=>{Ut.remove(Jn)}),vn([])};return l.jsx("div",{className:"min-h-screen bg-[#f2f9ff] text-gray-700 py-8 px-4",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold mb-8 text-blue-800",children:"Edit Profile"}),l.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-center",children:[l.jsx("div",{className:"mb-4 sm:mb-0 sm:mr-6",children:en?l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsx("img",{src:en,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-blue-100"}),l.jsx("button",{onClick:nn,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:l.jsx(T0,{size:16})})]}):l.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-500 flex items-center justify-center text-white text-3xl font-bold",children:At()})}),l.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[l.jsx("p",{className:"text-lg font-medium mb-3",children:"Profile Picture"}),l.jsxs("div",{className:"flex flex-wrap gap-3 justify-center sm:justify-start",children:[l.jsxs("label",{className:"px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 cursor-pointer flex items-center transition",children:[l.jsx(zm,{size:18,className:"mr-2"}),"Select Image",l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Et})]}),l.jsxs("button",{onClick:yn,disabled:!It,className:`px-4 py-2 rounded-lg flex items-center transition ${It?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[l.jsx(Xk,{size:18,className:"mr-2"}),"Upload"]})]})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Basic Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Title"}),l.jsxs("select",Ee(te({},on("title")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select Title"}),l.jsx("option",{value:"Mr.",children:"Mr."}),l.jsx("option",{value:"Mrs.",children:"Mrs."}),l.jsx("option",{value:"Miss.",children:"Miss."})]}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Gender"}),l.jsxs("select",Ee(te({},on("gender")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select Gender"}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"}),l.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"First Name"}),l.jsx("input",Ee(te({type:"text"},on("first_name")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Nationality"}),l.jsx("input",Ee(te({type:"text"},on("nationality")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Middle Name"}),l.jsx("input",Ee(te({type:"text"},on("middle_name")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Resident Status"}),l.jsxs("select",Ee(te({},on("resident_status")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select Status"}),l.jsx("option",{value:"Resident",children:"Resident"}),l.jsx("option",{value:"Non-Resident",children:"Non-Resident"})]}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Last Name"}),l.jsx("input",Ee(te({type:"text"},on("last_name")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Marital Status"}),l.jsxs("select",Ee(te({},on("marital_status")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select Status"}),l.jsx("option",{value:"Married",children:"Married"}),l.jsx("option",{value:"Unmarried",children:"Unmarried"})]}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Date of Birth"}),l.jsx("input",Ee(te({type:"date"},on("date_of_birth")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Origin"}),l.jsx("input",Ee(te({type:"text"},on("origin")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("input",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Permanent Address"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Portion No/Lot No"}),l.jsx("input",Ee(te({type:"text"},on("portion_lot_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Province"}),l.jsx("input",Ee(te({type:"text"},on("province")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Village/Street"}),l.jsx("input",Ee(te({type:"text"},on("villagestreet")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Country"}),l.jsx("input",Ee(te({type:"text"},on("country")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Town"}),l.jsx("input",Ee(te({type:"text"},on("town")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"PO Box"}),l.jsx("input",Ee(te({type:"text"},on("po_box")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"District"}),l.jsx("input",Ee(te({type:"text"},on("district")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Postal Code"}),l.jsx("input",Ee(te({type:"text"},on("postal_code")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Current Location / Correspondence Address"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Portion No/Lot No"}),l.jsx("input",Ee(te({type:"text"},on("portion_nolot_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Province"}),l.jsx("input",Ee(te({type:"text"},on("province1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Village/Street"}),l.jsx("input",Ee(te({type:"text"},on("village_street")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Country"}),l.jsx("input",Ee(te({type:"text"},on("country1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Town"}),l.jsx("input",Ee(te({type:"text"},on("town1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"PO Box"}),l.jsx("input",Ee(te({type:"text"},on("po_box1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"District"}),l.jsx("input",Ee(te({type:"text"},on("district1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Postal Code"}),l.jsx("input",Ee(te({type:"text"},on("postal_code1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Contact Number"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Office No"}),l.jsx("input",Ee(te({type:"text"},on("office_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Mobile No"}),l.jsx("input",Ee(te({type:"number"},on("mobile_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Home"}),l.jsx("input",Ee(te({type:"text"},on("home")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Email Id"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Office Email"}),l.jsx("input",Ee(te({type:"text"},on("office_email")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Personal Email"}),l.jsx("input",Ee(te({type:"email"},on("personal_email")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Preferred Secured Communication"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Phone No"}),l.jsx("input",Ee(te({type:"number"},on("phone_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Email Id"}),l.jsx("input",Ee(te({type:"email"},on("email_id")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Identification Details"}),l.jsxs(Vx,{className:"w-full bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(Ux,{children:l.jsxs(cd,{children:[l.jsx(qr,{className:"w-[100px]",children:"No."}),l.jsx(qr,{children:"Identification Type"}),l.jsx(qr,{children:"Number"}),l.jsx(qr,{children:"Attached"})]})}),l.jsxs($x,{className:"bg-white border border-blue-100",children:[(qt=ke==null?void 0:ke.fields)==null?void 0:qt.map((wt,Wt)=>{var Ut;return l.jsxs(cd,{children:[l.jsxs(Gr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:le.includes(Wt),onChange:()=>Je(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(Gr,{children:l.jsx(qx,{doctype:"indentify",placeholder:"Select Identification Type",value:(Ut=ke.fields[Wt])==null?void 0:Ut.identification_type,onChange:vn=>{ke.update(Wt,Ee(te({},ke.fields[Wt]),{identification_type:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(Gr,{children:l.jsx("input",Ee(te({type:"number",placeholder:"Number"},on(`identifications.${Wt}.number`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(Gr,{children:l.jsxs("button",{className:"px-4 py-2 rounded-lg flex items-center transition  bg-gray-200 text-gray-400",children:[l.jsx(Xk,{size:18,className:"mr-2"}),"Upload"]})})]},wt.id)}),ke.fields.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("identifications"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>jt("identifications"),disabled:le.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${le.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(Og,{size:18,className:"mr-2"}),"Delete Selected (",le.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Biometric Details"}),l.jsxs(Vx,{className:"w-full bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(Ux,{children:l.jsxs(cd,{children:[l.jsx(qr,{className:"w-[100px]",children:"No."}),l.jsx(qr,{children:"Identification Type"}),l.jsx(qr,{children:"Status"})]})}),l.jsxs($x,{className:"bg-white border border-blue-100",children:[(Ft=ue==null?void 0:ue.fields)==null?void 0:Ft.map((wt,Wt)=>{var Ut;return l.jsxs(cd,{children:[l.jsxs(Gr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:De.includes(Wt),onChange:()=>Je(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(Gr,{children:l.jsx(qx,{doctype:"Biometric",placeholder:"Select Biometric",value:(Ut=ue==null?void 0:ue.fields[Wt])==null?void 0:Ut.identification_type,onChange:vn=>{ue.update(Wt,Ee(te({},ue==null?void 0:ue.fields[Wt]),{identification_type:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(Gr,{children:l.jsx("input",Ee(te({type:"checkbox"},on(`biometric_details.${Wt}.identification_type`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))})]},wt.id)}),(ue==null?void 0:ue.fields.length)===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("biometric_details"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>jt("biometric_details"),disabled:De.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${De.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(Og,{size:18,className:"mr-2"}),"Delete Selected (",De.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Bank Account Details"}),l.jsxs(Vx,{className:"w-full bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(Ux,{children:l.jsxs(cd,{children:[l.jsx(qr,{className:"w-[100px]",children:"No."}),l.jsx(qr,{children:"Account Name"}),l.jsx(qr,{children:"Account Number"}),l.jsx(qr,{children:"Branch Name"})]})}),l.jsxs($x,{className:"bg-white border border-blue-100",children:[(bn=_e==null?void 0:_e.fields)==null?void 0:bn.map((wt,Wt)=>{var Ut;return l.jsxs(cd,{children:[l.jsxs(Gr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:le.includes(Wt),onChange:()=>Je(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(Gr,{children:l.jsx(qx,{doctype:"Bank Account Summary",placeholder:"Select Bank Account Summary",value:(Ut=_e==null?void 0:_e.fields[Wt])==null?void 0:Ut.bank_account,onChange:vn=>{_e.update(Wt,Ee(te({},_e.fields[Wt]),{bank_account:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(Gr,{children:l.jsx("input",Ee(te({type:"number",placeholder:"Account Number"},on(`bank_account_details.${Wt}.account_number`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(Gr,{children:l.jsx("input",Ee(te({type:"text",placeholder:"Branch Name"},on(`bank_account_details.${Wt}.branch_name`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))})]},Wt)}),(_e==null?void 0:_e.fields.length)===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("bank_account_details"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>jt("bank_account_details"),disabled:le.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${le.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(Og,{size:18,className:"mr-2"}),"Delete Selected (",le.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Employement Details"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.jsx("div",{children:l.jsx("input",Ee(te({type:"text"},on("employement_details")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))})}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Healthcare Information"}),l.jsxs(Vx,{className:"w-full bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(bN,{children:"Deatils of spouse"}),l.jsx(Ux,{children:l.jsxs(cd,{children:[l.jsx(qr,{className:"w-[100px]",children:"No."}),l.jsx(qr,{children:"Name"}),l.jsx(qr,{children:"CRM ID"}),l.jsx(qr,{children:"Age"})]})}),l.jsxs($x,{className:"bg-white border border-blue-100",children:[(Tn=Ce==null?void 0:Ce.fields)==null?void 0:Tn.map((wt,Wt)=>{var Ut;return l.jsxs(cd,{children:[l.jsxs(Gr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:le.includes(Wt),onChange:()=>Je(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(Gr,{children:l.jsx("input",Ee(te({type:"text",placeholder:"Name"},on(`details_of_spouse.${Wt}.name1`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(Gr,{children:l.jsx(qx,{doctype:"Prospect Details",placeholder:"Select CRM ID",value:(Ut=Ce==null?void 0:Ce.fields[Wt])==null?void 0:Ut.crm_no,onChange:vn=>{Ce.update(Wt,Ee(te({},Ce.fields[Wt]),{crm_no:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(Gr,{children:l.jsx("input",Ee(te({type:"number",placeholder:"Age"},on(`details_of_spouse.${Wt}.age`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))})]},wt.id)}),Ce.fields.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("details_of_spouse"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>jt("details_of_spouse"),disabled:le.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${le.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(Og,{size:18,className:"mr-2"}),"Delete Selected (",le.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]}),l.jsxs(Vx,{className:"w-full mt-10 bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(bN,{children:"Deatils of children"}),l.jsx(Ux,{children:l.jsxs(cd,{children:[l.jsx(qr,{className:"w-[100px]",children:"No."}),l.jsx(qr,{children:"Children Name"}),l.jsx(qr,{children:"Father's/Mother's Name"}),l.jsx(qr,{children:"CRM ID"}),l.jsx(qr,{children:"Age"})]})}),l.jsxs($x,{className:"bg-white border border-blue-100",children:[(ct=Ae==null?void 0:Ae.fields)==null?void 0:ct.map((wt,Wt)=>{var Ut;return l.jsxs(cd,{children:[l.jsxs(Gr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:le.includes(Wt),onChange:()=>Je(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(Gr,{children:l.jsx("input",Ee(te({type:"text",placeholder:"Children Name"},on(`details_of_children.${Wt}.children_name`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(Gr,{children:l.jsx("input",Ee(te({type:"text",placeholder:"Father's/Mother's Name"},on(`details_of_children.${Wt}.spouse_name`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(Gr,{children:l.jsx(qx,{doctype:"Prospect Details",placeholder:"Select CRM ID",value:(Ut=Ae==null?void 0:Ae.fields[Wt])==null?void 0:Ut.crm_no,onChange:vn=>{Ae.update(Wt,Ee(te({},Ae.fields[Wt]),{crm_no:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(Gr,{children:l.jsx("input",Ee(te({type:"number",placeholder:"Age"},on(`details_of_children.${Wt}.age`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))})]},wt.id)}),(Ae==null?void 0:Ae.fields.length)===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("details_of_children"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>jt("details_of_children"),disabled:le.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${le.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(Og,{size:18,className:"mr-2"}),"Delete Selected (",le.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(J),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Next Of Kin"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Name"}),l.jsx("input",Ee(te({type:"text"},on("name1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"CRM Id"}),l.jsx("input",Ee(te({type:"text"},on("crm_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Relationship"}),l.jsxs("select",Ee(te({},on("relationship")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select relationship"}),l.jsx("option",{value:"Father",children:"Father"}),l.jsx("option",{value:"Mother",children:"Mother"}),l.jsx("option",{value:"Spouse",children:"Spouse"}),l.jsx("option",{value:"Daughter",children:"Daughter"}),l.jsx("option",{value:"Son",children:"Son"}),l.jsx("option",{value:"Sister",children:"Sister"}),l.jsx("option",{value:"Brother",children:"Brother"})]}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Update Password"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Current Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:dt?"text":"password",value:fe,onChange:wt=>Xe(wt.target.value),placeholder:"Enter Current Password",className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),l.jsx("button",{type:"button",onClick:()=>pt(!dt),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:dt?l.jsx(ty,{size:20}):l.jsx(hm,{size:20})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:Ve?"text":"password",value:tt,onChange:wt=>Me(wt.target.value),placeholder:"Enter New Password",className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),l.jsx("button",{type:"button",onClick:()=>Ge(!Ve),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Ve?l.jsx(ty,{size:20}):l.jsx(hm,{size:20})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Confirm Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:Dt?"text":"password",value:ot,onChange:wt=>ut(wt.target.value),placeholder:"Enter New Password",className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),l.jsx("button",{type:"button",onClick:()=>Lt(!Dt),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Dt?l.jsx(ty,{size:20}):l.jsx(hm,{size:20})})]})]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{onClick:Bt,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Update Password"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-red-500",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start",children:[l.jsx("div",{className:"bg-red-100 p-3 rounded-full mb-4 sm:mb-0 sm:mr-4",children:l.jsx(Og,{size:24,className:"text-red-500"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-xl font-bold mb-2 text-red-600",children:"Delete Account"}),l.jsx("p",{className:"mb-2 text-gray-700",children:"Would you like to delete your account?"}),l.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This account may contain important information. Deleting your account is permanent and will remove all the content associated with it."}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{onClick:()=>Hn(!Yn),className:"px-5 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition",children:Yn?"Cancel":"Delete Account"}),Yn&&l.jsx("button",{onClick:ln,className:"ml-3 px-5 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Confirm Deletion"})]})]})]})})]})})},KQ=({onSelectChannel:e,currentUser:t})=>{const[n,i]=L.useState(""),[o,u]=L.useState([]),{data:c,error:a,isLoading:g,mutate:_}=md("raven.api.raven_channel.get_all_channels",{hide_archived:!0}),{data:S,isLoading:E}=md("raven.api.raven_users.get_list"),{data:A}=md("raven.api.raven_message.get_unread_count_for_channels"),{call:N}=kv("raven.api.raven_channel.create_direct_message_channel");L.useEffect(()=>{if(S&&S.message&&c&&c.message){const Z=new Set;c.message.dm_channels&&c.message.dm_channels.forEach(le=>{const ge=le.peer_user_id;ge&&Z.add(ge)});const K=S.message.filter(le=>le.name!==t).filter(le=>!Z.has(le.name)).filter(le=>le.name.toLowerCase().includes(n.toLowerCase())||le.full_name&&le.full_name.toLowerCase().includes(n.toLowerCase()));u(K),console.log("Available users",K)}},[c,S,n,t]);const z=Z=>Z.full_name?`${Z.full_name} (${Z.name})`:Z.name,B=Z=>{if(!Z)return"";const K=new Date(Z),ge=Math.floor((new Date-K)/(1e3*60*60*24));return ge===0?K.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):ge===1?"Yesterday":ge<7?K.toLocaleDateString([],{weekday:"short"}):K.toLocaleDateString([],{month:"short",day:"numeric"})},$=Z=>!A||!A.unread_count?0:A.unread_count[Z]||0,q=(Z,K)=>{e&&e(Z,K)},W=Z=>Gt(null,null,function*(){try{const K=yield N({user_id:Z});K&&K.message&&(_(),q(K.message,Z))}catch(K){console.error("Failed to create conversation:",K)}});if(g||E)return l.jsx("div",{className:"p-4 text-center",children:"Loading conversations..."});if(a)return l.jsx("div",{className:"p-4 text-red-500",children:"Error loading conversations"});const Q=c&&c.message&&c.message.dm_channels?c.message.dm_channels.filter(Z=>Z.peer_user_id&&Z.peer_user_id.toLowerCase().includes(n.toLowerCase())):[];return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"p-3",children:l.jsx("input",{type:"text",placeholder:"Search users...",value:n,onChange:Z=>i(Z.target.value),className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-300"})}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.jsx("h3",{className:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Direct Messages"}),Q.length>0?Q.map(Z=>{const K=$(Z.name);return l.jsxs("div",{onClick:()=>q(Z.name,Z.peer_user_id),className:"p-3 hover:bg-gray-100 cursor-pointer flex justify-between border-b",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:Z.peer_user_id}),l.jsxs("div",{className:"text-sm text-gray-500 truncate",children:[Z.last_message?Z.last_message.substring(0,30):"No messages",Z.last_message&&Z.last_message.length>30?"...":""]})]}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("div",{className:"text-xs text-gray-500",children:B(Z.modified)}),K>0&&l.jsx("div",{className:"mt-1 px-2 py-1 text-xs bg-blue-500 text-white rounded-full",children:K})]})]},Z.name)}):l.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No conversations yet"}),o.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"px-3 py-2 mt-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start New Conversation"}),o.map(Z=>l.jsxs("div",{onClick:()=>W(Z.name),className:"p-3 hover:bg-gray-100 cursor-pointer flex items-center border-b",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-500 rounded-full flex items-center justify-center mr-3",children:Z.name.substring(0,1).toUpperCase()}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:z(Z)}),Z.user_status&&l.jsx("div",{className:"text-xs text-gray-500",children:l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:`w-2 h-2 ${Z.user_status==="Online"?"bg-green-500":"bg-gray-300"} rounded-full mr-1`}),Z.user_status]})})]})]},Z.name))]})]})]})},QQ=({channelId:e,channelName:t})=>{var he;const[n,i]=L.useState(""),[o,u]=L.useState(null),c=L.useRef(null),a=L.useRef(null),{currentUser:g}=Dm(),[_,S]=L.useState({lastEventTime:null,eventsReceived:0,socketConnected:!1}),{data:E,error:A,isLoading:N,mutate:z}=md("raven.api.chat_stream.get_messages",{channel_id:e,limit:50},{key:`get_messages_for_channel_${e}`},{revalidateOnFocus:!0}),{call:B,loading:$}=kv("raven.api.raven_message.send_message"),{call:q}=kv("raven.api.raven_message.mark_channel_as_read");L.useEffect(()=>{E&&E.message&&e&&q({channel:e})},[E,e,q]),L.useEffect(()=>{console.log(`RavenDirectMessage component initialized for channel: ${e}`);const pe=()=>{S(He=>Ee(te({},He),{socketConnected:window.socket&&window.socket.readyState===1}))};pe();const Ie=setInterval(pe,5e3);return()=>{clearInterval(Ie),console.log(`RavenDirectMessage component unmounted for channel: ${e}`)}},[e]),L.useEffect(()=>{A&&(console.error("Error loading messages:",A),u("Failed to load messages"))},[A]),L.useEffect(()=>{c.current&&W()},[E]);const W=(pe="auto")=>{if(!a.current)return;requestAnimationFrame(()=>{a.current&&a.current.scrollTo({top:a.current.scrollHeight,behavior:pe})});const Ie=setTimeout(()=>{a.current&&a.current.scrollTo({top:a.current.scrollHeight,behavior:pe})},100),He=setTimeout(()=>{a.current&&a.current.scrollTo({top:a.current.scrollHeight,behavior:pe})},500);return()=>{clearTimeout(Ie),clearTimeout(He)}};L.useEffect(()=>()=>{},[]),Ek("*",pe=>{console.log("WebSocket event received:",pe),S(Ie=>Ee(te({},Ie),{eventsReceived:Ie.eventsReceived+1,lastEventTime:new Date().toISOString()}))}),Ek("message_created",pe=>{console.log("Raw message_created event received:",pe),console.log(`Current channelId: ${e}, Event channelId: ${pe.channel_id}`),pe.channel_id===e?(console.log("New message received via WebSocket for this channel:",pe),z(Ie=>{if(!Ie||!Ie.message)return Ie;const He=Ie.message.messages||[],Ye=He.findIndex(Rt=>Rt.name===pe.message_details.name);if(Ye===-1){const Rt=[...He,pe.message_details];return Rt.sort((St,De)=>new Date(St.creation).getTime()-new Date(De.creation).getTime()),Ee(te({},Ie),{message:Ee(te({},Ie.message),{messages:Rt,has_new_messages:!1,has_old_messages:Ie.message.has_old_messages})})}const rt=[...He];return rt[Ye]=pe.message_details,Ee(te({},Ie),{message:Ee(te({},Ie.message),{messages:rt,has_new_messages:!1,has_old_messages:Ie.message.has_old_messages})})},{revalidate:!1}).then(()=>{a.current&&(a.current.scrollTop+a.current.clientHeight>=a.current.scrollHeight-100||pe.message_details.owner===g)&&W("smooth")})):console.log("Message received for different channel - ignoring")});const Q=pe=>Gt(null,null,function*(){if(pe.preventDefault(),!(!n.trim()||!e)){console.log(`Attempting to send message to channel: ${e}`);try{const Ie={content:n,owner:g,creation:new Date().toISOString(),name:`temp-${Date.now()}`,message_type:"Text"};z(Ye=>{if(!Ye||!Ye.message)return Ye;const Rt=[...Ye.message.messages||[],Ie];return Rt.sort((St,De)=>new Date(St.creation).getTime()-new Date(De.creation).getTime()),Ee(te({},Ye),{message:Ee(te({},Ye.message),{messages:Rt})})},{revalidate:!1}),i(""),console.log("Sending message to server...");const He=yield B({channel_id:e,text:n,message_type:"DM"});console.log("Server response:",He)}catch(Ie){console.error("Failed to send message:",Ie),u("Failed to send message"),z(He=>!He||!He.message?He:Ee(te({},He),{message:Ee(te({},He.message),{messages:He.message.messages.filter(Ye=>!Ye.name.startsWith("temp-"))})}),{revalidate:!1})}}}),Z=pe=>pe?new Date(pe).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",K=pe=>{if(!pe)return"";const Ie=new Date(pe),He=new Date,Ye=new Date(He);return Ye.setDate(Ye.getDate()-1),Ie.toDateString()===He.toDateString()?"Today":Ie.toDateString()===Ye.toDateString()?"Yesterday":Ie.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"})},le=()=>{var rt;const pe=((rt=E==null?void 0:E.message)==null?void 0:rt.messages)||[],Ie=[];let He=null,Ye=[];return pe.forEach(Rt=>{const St=Rt.creation?K(Rt.creation):"";St!==He?(Ye.length>0&&Ie.push({date:He,messages:Ye}),He=St,Ye=[Rt]):Ye.push(Rt)}),Ye.length>0&&Ie.push({date:He,messages:Ye}),Ie};if(N)return l.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading messages..."});if(o)return l.jsxs("div",{className:"text-red-500 p-4",children:["Error: ",o]});const ge=le();return l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"bg-gray-100 p-3 border-b",children:[l.jsxs("h2",{className:"font-medium",children:["Conversation with ",t]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.jsxs("span",{children:["WebSocket: ",_.socketConnected?" Connected":" Disconnected"]})," |",l.jsxs("span",{children:[" Events: ",_.eventsReceived]}),_.lastEventTime&&l.jsxs("span",{children:[" | Last event: ",new Date(_.lastEventTime).toLocaleTimeString()]})]})]}),l.jsxs("div",{ref:a,className:"flex-1 overflow-y-auto p-4",children:[!((he=E==null?void 0:E.message)!=null&&he.messages)||E.message.messages.length===0?l.jsx("div",{className:"text-center text-gray-500 my-8",children:"No messages yet. Start a conversation!"}):ge.map((pe,Ie)=>l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-center",children:l.jsx("span",{className:"text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded-full",children:pe.date})}),pe.messages.map((He,Ye)=>{var rt,Rt;return l.jsx("div",{id:`message-${He.name}`,className:`mt-4 flex ${He.owner===g?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-3/4 p-3 rounded-lg ${He.owner===g?`bg-blue-500 text-white rounded-br-none ${(rt=He.name)!=null&&rt.startsWith("temp-")?"opacity-70":""}`:"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[l.jsx("div",{children:He.content}),l.jsxs("div",{className:`text-xs mt-1 ${He.owner===g?"text-blue-100":"text-gray-500"}`,children:[Z(He.creation),((Rt=He.name)==null?void 0:Rt.startsWith("temp-"))&&" (sending...)"]})]})},He.name||`temp-${Ye}`)})]},Ie)),l.jsx("div",{ref:c})]}),l.jsxs("form",{onSubmit:Q,className:"border-t p-3 flex",children:[l.jsx("input",{type:"text",value:n,onChange:pe=>i(pe.target.value),placeholder:"Type a message...",className:"flex-1 p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-300"}),l.jsx("button",{type:"submit",disabled:$||!n.trim(),className:"bg-blue-500 text-white px-4 py-2 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:bg-blue-300",children:"Send"})]})]})},JQ=()=>{var A;const[e,t]=L.useState(null),[n,i]=L.useState(null),[o,u]=L.useState(window.innerWidth<768),[c,a]=L.useState(!0),{data:g}=md("raven.api.raven_users.get_current_raven_user");console.log("User data",g);const _=(A=g==null?void 0:g.message)==null?void 0:A.user;L.useEffect(()=>{const N=()=>{const z=window.innerWidth<768;u(z),z||a(!0)};return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const S=(N,z)=>{t(N),i(z),o&&a(!1)},E=()=>{a(!0)};return _?l.jsxs("div",{className:"h-screen flex flex-col",children:[l.jsxs("div",{className:"bg-white shadow-sm border-b p-3 flex justify-between items-center",children:[l.jsx("h1",{className:"text-xl font-bold",children:"Raven Chat"}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Logged in as: ",_]})]}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[(!o||c)&&l.jsx("div",{className:`${o?"w-full":"w-1/3 border-r"} bg-white`,children:l.jsx(KQ,{onSelectChannel:S,currentUser:_})}),(!o||!c)&&l.jsx("div",{className:`${o?"w-full":"w-2/3"} bg-white flex flex-col`,children:e?l.jsxs(l.Fragment,{children:[o&&l.jsx("button",{onClick:E,className:"p-2 m-2 bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center",children:""}),l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(QQ,{channelId:e,channelName:n})})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a conversation to start chatting"})})]})]}):l.jsx("div",{className:"p-4 text-center",children:"Loading user data..."})},jN=()=>l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-8",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-transparent bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 animate-spin",children:l.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 m-1"})}),l.jsx("div",{className:"absolute inset-4 w-24 h-24 rounded-full bg-gradient-to-r from-cyan-400 to-purple-400 animate-pulse opacity-80 flex items-center justify-center",children:l.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:l.jsx("div",{className:"w-3 h-3 rounded-full bg-white animate-bounce"})})}),l.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 rounded-full bg-pink-400 animate-ping"}),l.jsx("div",{className:"absolute -top-1 -right-3 w-3 h-3 rounded-full bg-cyan-400 animate-ping animation-delay-300"}),l.jsx("div",{className:"absolute -bottom-2 -left-3 w-2 h-2 rounded-full bg-purple-400 animate-ping animation-delay-700"}),l.jsx("div",{className:"absolute -bottom-1 -right-2 w-3 h-3 rounded-full bg-yellow-400 animate-ping animation-delay-1000"}),l.jsxs("div",{className:"absolute inset-0 animate-spin animation-duration-3000",children:[l.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 rounded-full bg-gradient-to-r from-pink-400 to-red-400"}),l.jsx("div",{className:"absolute top-1/2 -right-1 transform -translate-y-1/2 w-2 h-2 rounded-full bg-gradient-to-r from-cyan-400 to-blue-400"}),l.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-2 h-2 rounded-full bg-gradient-to-r from-green-400 to-emerald-400"}),l.jsx("div",{className:"absolute top-1/2 -left-1 transform -translate-y-1/2 w-2 h-2 rounded-full bg-gradient-to-r from-yellow-400 to-orange-400"})]})]}),l.jsx("div",{className:"absolute bottom-1/3 left-1/2 transform -translate-x-1/2",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("div",{className:"text-white font-semibold text-lg animate-pulse",children:"Loading"}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce animation-delay-300"}),l.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce animation-delay-700"})]})]})}),l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 rounded-full bg-purple-500/10 animate-pulse animation-delay-500"}),l.jsx("div",{className:"absolute top-40 right-32 w-24 h-24 rounded-full bg-cyan-500/10 animate-pulse animation-delay-1000"}),l.jsx("div",{className:"absolute bottom-32 left-40 w-20 h-20 rounded-full bg-pink-500/10 animate-pulse animation-delay-1500"}),l.jsx("div",{className:"absolute bottom-20 right-20 w-28 h-28 rounded-full bg-yellow-500/10 animate-pulse animation-delay-2000"})]}),l.jsx("style",{jsx:!0,children:`
        .animation-delay-300 {
          animation-delay: 0.3s;
        }
        .animation-delay-500 {
          animation-delay: 0.5s;
        }
        .animation-delay-700 {
          animation-delay: 0.7s;
        }
        .animation-delay-1000 {
          animation-delay: 1s;
        }
        .animation-delay-1500 {
          animation-delay: 1.5s;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-duration-3000 {
          animation-duration: 3s;
        }
      `})]}),eJ=()=>{const[e,t]=L.useState(null),[n,i]=L.useState(null),[o,u]=L.useState(!1),[c,a]=L.useState(null),{id:g}=tC();return L.useEffect(()=>{Gt(null,null,function*(){var S;u(!0),a(null);try{const A=yield(yield fetch("https://lblerp.anantdv.com/api/method/erpnext.allow_login.login",{method:"GET",headers:{"Content-Type":"application/json"},redirect:"follow"})).json(),N=(S=A==null?void 0:A.message)==null?void 0:S.sid;if(t(N),N){const B=yield(yield fetch(`https://lblerp.anantdv.com/api/resource/Prospect Details/${g}?sid=${N}`,{method:"GET",headers:new Headers,redirect:"follow"})).json();B.data?i(B.data):a(new Error("No prospect data found"))}else a(new Error("Session ID not found"))}catch(E){a(E)}finally{u(!1)}})},[g]),n&&(console.log(n),console.log(`https://lblerp.anantdv.com${n.profile_image}`)),o?l.jsx(jN,{}):c?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-500 text-xl mb-2",children:""}),l.jsx("p",{className:"text-red-600",children:"Error loading prospect details"}),l.jsx("p",{className:"text-gray-500 text-sm mt-2",children:c.message})]})}):n?l.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("div",{className:"mb-8",children:l.jsx("h1",{className:"text-3xl font-bold text-blue-600 text-center",children:"Prospect Profile"})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsx("div",{className:"relative",children:l.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:n.profile_image?l.jsx("img",{src:`https://lblerp.anantdv.com${n.profile_image}?sid=${e}`,alt:"Profile",className:"w-full h-full object-cover"}):l.jsx(zm,{className:"w-8 h-8 text-gray-400"})})}),l.jsx("div",{children:l.jsxs("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:[n==null?void 0:n.title," ",n==null?void 0:n.first_name," ",n==null?void 0:n.last_name]})})]})}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-6",children:"Basic Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Title"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.title||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Gender"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.gender||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"First Name"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.first_name||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Nationality"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.nationality||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Middle Name"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.middle_name||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Resident Status"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.resident_status||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Last Name"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.last_name||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Marital Status"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.marital_status||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Date of Birth"}),l.jsxs("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700 flex items-center",children:[l.jsx(xc,{className:"w-4 h-4 mr-2 text-gray-400"}),n.date_of_birth?new Date(n.date_of_birth).toLocaleDateString():"Not provided"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Origin"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.origin||"Not specified"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-blue-600 mb-6 flex items-center",children:[l.jsx(fm,{className:"w-5 h-5 mr-2"}),"Permanent Address"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Portion No/Lot No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.portion_nolot_no||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Province"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.province||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Village/Street"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.villagestreet||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Country"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.country||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Town"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.town||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"PO Box"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.po_box||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"District"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.district||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Postal Code"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.postal_code||"Not provided"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-blue-600 mb-6 flex items-center",children:[l.jsx(fm,{className:"w-5 h-5 mr-2"}),"Current Location / Correspondence Address"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Portion No/Lot No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.portion_lot_no||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Province"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.province1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Village/Street"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.village_street||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Country"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.country1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Town"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.town1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"PO Box"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.po_box1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"District"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.district1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Postal Code"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.postal_code1||"Not provided"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-6",children:"Contact Number"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Office No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.office_no||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Mobile No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.mobile_no||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Home"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.home||"Not provided"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-6",children:"Email Id"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Office Email"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.office_email||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Personal Email"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.personal_email||"Not specified"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-6",children:"Preferred Secured Communication"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Phone No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.phone_no||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Email Id"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.email_id||"Not specified"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-blue-600 mb-6 flex items-center",children:[l.jsx(C0,{className:"w-5 h-5 mr-2"}),"Identification Details"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"No."}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Identification Type"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Number"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Attached"})]})}),l.jsx("tbody",{children:n.dd&&n.dd.length>0?n.dd.map((_,S)=>l.jsxs("tr",{className:"border-b border-gray-100",children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:S+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.identification_type||"Not specified"}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.number||"Not provided"}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.attached?l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Yes"}):l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"No"})})]},S)):l.jsx("tr",{children:l.jsx("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"No identification records available."})})})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-blue-600 mb-6 flex items-center",children:[l.jsx(C0,{className:"w-5 h-5 mr-2"}),"Biometric Details"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"No."}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Identification Type"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Status"})]})}),l.jsx("tbody",{children:n.identification_type&&n.identification_type.length>0?n.identification_type.map((_,S)=>l.jsxs("tr",{className:"border-b border-gray-100",children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:S+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.identification_type||"Not specified"}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.status==1?l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Yes"}):l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"No"})})]},S)):l.jsx("tr",{children:l.jsx("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"No identification records available."})})})]})})]})]})}):l.jsx(jN,{})},I2=()=>{const e=Pr(),t=pl(),[n,i]=L.useState(!1),[o,u]=L.useState(0),[c,a]=L.useState(!0),[g,_]=L.useState(null),[S,E]=L.useState(!1),[A,N]=L.useState(null),[z,B]=L.useState(!1),$=Qi.get("user_id"),{data:q}=jh("User",$),W=pe=>Gt(null,null,function*(){var Ye;console.log("----------------->",pe);const Ie=new Headers;Ie.append("Authorization","token e0723ce34466cea:79dca2f515d4e2c");const He={method:"GET",headers:Ie,redirect:"follow"};try{const Rt=yield(yield fetch(`https://lblerp.anantdv.com/api/resource/Patient?filters=[["card_blo_me_number", "=", "${pe}"]]&fields=["*"]&limit=1`,He)).json();console.log("Testing.....Patient",Rt),((Ye=Rt==null?void 0:Rt.data)==null?void 0:Ye.length)>0?N(Rt.data):N([])}catch(rt){console.error("Error fetching patient:",rt),N([])}});L.useEffect(()=>{q!=null&&q.card_blo_me_number&&W(q==null?void 0:q.card_blo_me_number)},[q]),L.useEffect(()=>{if(z)E(!0);else{const pe=A&&A.length>0;_(pe),E(!1)}},[A,z]);const Q=pe=>Gt(null,null,function*(){var Ye,rt;const Ie=new Headers;Ie.append("Authorization","token e0723ce34466cea:79dca2f515d4e2c");const He={method:"GET",headers:Ie,redirect:"follow"};try{const St=yield(yield fetch(`https://lblerp.anantdv.com/api/resource/Customer?filters=[["cbm_id", "=", "${pe}"]]&limit=1`,He)).json();return(rt=(Ye=St==null?void 0:St.data)==null?void 0:Ye[0])==null?void 0:rt.name}catch(Rt){return console.error("Error fetching customer:",Rt),null}}),Z=()=>Gt(null,null,function*(){var He,Ye;if(!(q!=null&&q.card_blo_me_number)){a(!1);return}let pe=q==null?void 0:q.card_blo_me_number,Ie=yield Q(pe);if(!Ie){a(!1);return}try{a(!0);const rt=new Headers;rt.append("Authorization","token e0723ce34466cea:79dca2f515d4e2c"),rt.append("Content-Type","application/json");const Rt=JSON.stringify({party_type:"Customer",party:Ie,loyalty_program:"Card Blo me Points"}),De=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.accounts.party.get_dashboard_info_m",{method:"POST",headers:rt,body:Rt,redirect:"follow"});if(!De.ok)throw new Error(`HTTP error! status: ${De.status}`);const Qe=yield De.json(),et=((Ye=(He=Qe==null?void 0:Qe.message)==null?void 0:He[0])==null?void 0:Ye.loyalty_points)||0;u(et)}catch(rt){console.log("error in loyalty fetch",rt),u(0)}finally{a(!1)}});L.useEffect(()=>{q&&Z()},[q]);const K=[{icon:lC,label:"Social Blo Me",path:"/social_media"},{icon:zm,label:"Kad Blo Me",path:"/"},{icon:bP,label:"Health Blo Me",path:"/health"},{icon:gP,label:"Bank Blo Me",path:"/bank"},{icon:hC,label:"Trade Blo Me",path:"/trade"},{icon:jP,label:"Academy Blo Me",path:"/academy"},{icon:mP,label:"Legal Blo Me",path:"/legal"},{icon:_P,label:"Career Me",path:"/career"}],le=[{icon:bB,label:"Settings",path:"/settings"},{icon:wL,label:"Help",path:"/help"},{icon:bS,label:"Logout",path:"/logout"}],ge=()=>{i(!n)};L.useEffect(()=>{if(z)E(!0);else{const pe=A&&A.length>0;_(pe),E(!1)}},[A,z]),L.useEffect(()=>{const pe=setTimeout(()=>{S&&(E(!1),_(!1))},1e4);return()=>clearTimeout(pe)},[S]);const he=pe=>Ie=>{if(pe.path==="/social_media"&&(!(q!=null&&q.card_blo_me_number)||q.card_blo_me_number==="")){Ie.preventDefault(),e("/");return}if(pe.path==="/health"){if(Ie.preventDefault(),S)return;if(console.log("patient exists",g),!g){e("/patient-not-found");return}e(pe.path);return}e(pe.path)};return l.jsxs("div",{className:`${n?"w-16":"w-52"} hidden lg:block bg-white rounded-lg shadow-lg transition-all duration-300 ease-in-out relative`,children:[l.jsx("button",{onClick:ge,className:"absolute -right-3 top-6 bg-white border border-gray-200 rounded-full p-1 shadow-md hover:shadow-lg transition-shadow z-10",children:n?l.jsx(xP,{size:16,className:"text-gray-600"}):l.jsx(dL,{size:16,className:"text-gray-600"})}),l.jsx("div",{className:"p-6 flex items-center justify-center",children:n?l.jsx("img",{className:"h-8",src:"/assets/erpnext/images/mycard-logo.png",alt:"MyCard Logo"}):l.jsx("img",{className:"h-16",src:"/assets/erpnext/images/mycard-logo.png",alt:"MyCard Logo"})}),l.jsx("div",{className:`mx-6 mb-6 ${n?"mx-2":""}`,children:n?l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-2 border border-blue-100 flex justify-center",children:l.jsx(qk,{size:18,className:"text-blue-600"})}),l.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:c?"...":`${o} Credits`})]}):l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[l.jsx("p",{className:"text-center text-xl font-bold text-blue-600",children:(q==null?void 0:q.card_blo_me_number)||""}),l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(qk,{size:18,className:"text-blue-600"}),l.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Wallet Points"})]}),l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c?"...":o}),l.jsx("div",{onClick:()=>e("/loyalty"),className:"text-xs text-gray-500 mt-1 cursor-pointer",children:"Available Balance"})]})}),l.jsxs("nav",{children:[!n&&l.jsx("div",{className:"px-6 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"MENU"}),l.jsx("div",{className:"space-y-1",children:K.map((pe,Ie)=>{const He=t.pathname===pe.path,rt=pe.path==="/health"&&S;return l.jsxs(Mr,{to:pe.path,onClick:he(pe),className:`flex items-center gap-3 px-6 py-3 group relative
                  ${He?"text-blue-600 bg-blue-50 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}
                  ${n?"justify-center":""}
                  ${rt?"opacity-60 cursor-wait":""}
                `,title:n?pe.label:"",children:[l.jsx(pe.icon,{size:20}),!n&&l.jsxs("span",{className:"flex items-center gap-2",children:[pe.label,rt&&l.jsx("div",{className:"w-3 h-3 border border-blue-400 border-t-transparent rounded-full animate-spin"})]}),n&&l.jsxs("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:[pe.label,rt&&" (Checking...)"]})]},Ie)})}),!n&&l.jsx("div",{className:"px-6 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 mt-8",children:"GENERAL"}),l.jsx("div",{className:`space-y-1 ${n?"mt-8":""}`,children:le.map((pe,Ie)=>l.jsxs(Mr,{to:pe.path,className:`flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 group relative
                ${n?"justify-center":"gap-3"}
              `,title:n?pe.label:"",children:[l.jsx(pe.icon,{size:20}),!n&&l.jsx("span",{children:pe.label}),n&&l.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:pe.label})]},Ie))})]})]})},tJ=({totalAppointments:e,pastAppointments:t,totalLabReports:n,completedLabTests:i,activeMainTab:o,setActiveMainTab:u})=>(console.log("Active tab.......",o),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[l.jsxs("div",{onClick:()=>u("Total Appointments"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(_S,{className:"w-8 h-8 text-blue-500 group-hover:text-blue-600 transition-colors"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors",children:e})]}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Total Appointments"})]}),l.jsxs("div",{onClick:()=>u("Prescriptions"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(C0,{className:"w-8 h-8 text-green-500 group-hover:text-blue-500 transition-colors"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors",children:t==null?void 0:t.length})]}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Prescriptions"})]}),l.jsxs("div",{onClick:()=>u("Lab Reports"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(CP,{className:"w-8 h-8 text-purple-500 group-hover:text-blue-500 transition-colors"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors",children:n})]}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Lab Reports"})]}),l.jsxs("div",{onClick:()=>u("Vaccinations"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(wS,{className:"w-8 h-8 text-orange-500 group-hover:text-blue-500 transition-colors"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors",children:3})]}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Vaccinations"})]}),l.jsxs("div",{onClick:()=>u("Get Medicine"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx(wS,{className:"w-8 h-8 text-orange-500 group-hover:text-blue-500 transition-colors"})}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Get Medicine"})]})]})),nJ=({showPatientDetails:e,setShowPatientDetails:t,patientData:n,patientLoading:i,patientError:o,userImage:u,user_name:c})=>{var _,S,E,A,N,z,B,$,q,W,Q,Z;const a=()=>c&&c!=="Guest User"?c.split(" ").map(K=>K[0]).join("").toUpperCase():"U",g=K=>{if(!K)return"Not specified";const le=new Date(K),ge=new Date;if(isNaN(le.getTime()))return"Not specified";let he=ge.getFullYear()-le.getFullYear(),pe=ge.getMonth()-le.getMonth(),Ie=ge.getDate()-le.getDate();return pe<0&&(he--,pe+=12),Ie<0&&(pe--,pe<0&&(he--,pe+=12)),he===0&&pe===0?"Less than 1 month":he===0?`${pe} month${pe!==1?"s":""}`:pe===0?`${he} yr${he!==1?"s":""}`:`${he} yr${he!==1?"s":""} ${pe} month${pe!==1?"s":""}`};return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[l.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>t(!e),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[u?l.jsx("div",{className:"w-14 h-14 overflow-hidden rounded-full border-2 border-blue-200 shadow-lg",children:l.jsx("img",{src:u,alt:"Profile",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold shadow-lg",children:a()}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Patient Information"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Click to view your medical profile"})]})]}),l.jsx(xP,{className:`w-5 h-5 text-gray-400 transition-transform ${e?"rotate-90":""}`})]})}),e&&l.jsx("div",{className:"px-6 pb-6 border-t border-gray-100",children:i?l.jsx("div",{className:"mt-4 flex items-center justify-center py-8",children:l.jsx("div",{className:"text-gray-500",children:"Loading patient information..."})}):o?l.jsx("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:l.jsxs("p",{className:"text-red-600 text-sm",children:["Error loading patient data: ",o.message]})}):n&&n.length>0?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Full Name"}),l.jsx("p",{className:"font-medium text-gray-800",children:(_=n[0])==null?void 0:_.patient_name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Patient ID"}),l.jsx("p",{className:"font-medium text-gray-800",children:(S=n[0])==null?void 0:S.name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Age"}),l.jsx("p",{className:"font-medium text-gray-800",children:g((E=n[0])==null?void 0:E.dob)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Blood Group"}),l.jsx("p",{className:"font-medium text-gray-800",children:((A=n[0])==null?void 0:A.blood_group)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Gender"}),l.jsx("p",{className:"font-medium text-gray-800",children:((N=n[0])==null?void 0:N.sex)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Contact"}),l.jsx("p",{className:"font-medium text-gray-800",children:((z=n[0])==null?void 0:z.phone)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Email"}),l.jsx("p",{className:"font-medium text-gray-800",children:(B=n[0])==null?void 0:B.email})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emergency Contact"}),l.jsx("p",{className:"font-medium text-gray-800",children:(($=n[0])==null?void 0:$.mobile)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Occupation"}),l.jsx("p",{className:"font-medium text-gray-800",children:((q=n[0])==null?void 0:q.occupation)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Marital Status"}),l.jsx("p",{className:"font-medium text-gray-800",children:((W=n[0])==null?void 0:W.marital_status)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Customer Group"}),l.jsx("p",{className:"font-medium text-gray-800",children:((Q=n[0])==null?void 0:Q.customer_group)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Card Blo Me Number"}),l.jsx("p",{className:"font-medium text-gray-800",children:((Z=n[0])==null?void 0:Z.card_blo_me_number)||"Not assigned"})]})]}):l.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:l.jsxs("p",{className:"text-yellow-800 text-sm",children:[l.jsx("strong",{children:"Note:"})," No patient record found. Please complete your patient registration to see detailed medical information."]})})})]})},uD=(e,t)=>Gt(null,null,function*(){try{if(console.log("Downloading prescription for appointment:",e),t){const n=`https://lblerp.anantdv.com/api/method/frappe.utils.print_format.download_pdf?doctype=Sales Invoice&name=${t}&format=Standard&no_letterhead=0`,i=document.createElement("a");i.href=n,i.download=`Invoice_${t}.pdf`,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)}else{const n=`https://lblerp.anantdv.com/api/method/frappe.utils.print_format.download_pdf?doctype=Patient Appointment&name=${e}&format=Prescription&no_letterhead=0`,i=document.createElement("a");i.href=n,i.download=`Prescription_${e}.pdf`,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)}console.log("Download initiated successfully")}catch(n){console.error("Error downloading prescription:",n),alert("Failed to download prescription. Please try again.")}}),dD=e=>Gt(null,null,function*(){try{console.log("Downloading lab report:",e);const t=`https://lblerp.anantdv.com/api/method/frappe.utils.print_format.download_pdf?doctype=Lab Test&name=${e}&format=Lab Test Report&no_letterhead=0`,n=document.createElement("a");n.href=t,n.download=`LabReport_${e}.pdf`,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log("Lab report download initiated")}catch(t){console.error("Error downloading lab report:",t),alert("Failed to download lab report. Please try again.")}}),iJ=({allAppointments:e,appointmentLoading:t,setShowAppointmentModal:n})=>{console.log("all appointment list.....",e);const i=o=>{uD(o.appointmentId,o.refInvoice)};return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"All Appointments"}),l.jsxs("button",{onClick:()=>n(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[l.jsx(SP,{className:"w-4 h-4 mr-2"}),"Book Appointment"]})]}),l.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t?l.jsx("div",{className:"text-center py-8",children:l.jsx("div",{className:"text-gray-500",children:"Loading appointments..."})}):e&&e.length>0?e.map(o=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(dC,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-800",children:o.doctor}),l.jsx("p",{className:"text-sm text-gray-500",children:o.specialty}),l.jsxs("div",{className:"flex items-center mt-2 text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 mr-1"}),o.date,l.jsx(cy,{className:"w-4 h-4 ml-3 mr-1"}),o.time,o.duration&&l.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",o.duration," min)"]})]}),l.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-600",children:[l.jsx(fm,{className:"w-4 h-4 mr-1"}),o.location]}),l.jsxs("div",{className:"mt-1",children:[l.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["Type: ",o.appointmentType]}),o.refInvoice&&l.jsxs("span",{className:"text-xs text-gray-500",children:["Invoice: ",o.refInvoice]})]})]})]}),l.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[l.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${o.status==="Closed"?"bg-green-100 text-green-700":o.status==="Confirmed"?"bg-blue-100 text-blue-700":o.status==="Open"||o.status==="Scheduled"?"bg-yellow-100 text-yellow-700":o.status==="No Show"?"bg-red-100 text-red-700":(o.status==="Cancelled","bg-gray-100 text-gray-700")}`,children:[o.status==="Closed"?l.jsx(_L,{className:"w-3 h-3 inline mr-1"}):o.status==="No Show"?l.jsx(Hk,{className:"w-3 h-3 inline mr-1"}):o.status==="Cancelled"?l.jsx(Hk,{className:"w-3 h-3 inline mr-1"}):l.jsx(cy,{className:"w-3 h-3 inline mr-1"}),o.status]}),o.invoiced&&l.jsxs("button",{onClick:()=>i(o),className:"flex items-center px-2 py-1 bg-green-50 text-green-600 rounded text-xs hover:bg-green-100 transition-colors",children:[l.jsx(Av,{className:"w-3 h-3 mr-1"}),"Invoice"]})]})]})},o.id)):l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No appointments found"})})]})},sJ=({activeTab:e,setActiveTab:t,appointmentData:n,appointmentLoading:i,labReports:o,labTestLoading:u,patientData:c,allAppointments:a})=>{const g=[{id:"appointments",label:"All Appointments",icon:xc},{id:"lab-reports",label:"Lab Reports",icon:CP},{id:"medical-history",label:"Medical History",icon:WL},{id:"allergies",label:"Allergies",icon:jB},{id:"medications",label:"Medications",icon:Xb},{id:"vaccinations",label:"Vaccinations",icon:wS}],_=c&&c.length>0&&c[0].medical_history?[{id:1,condition:c[0].medical_history,diagnosedDate:"Not specified",status:"Ongoing",doctor:"Not specified"}]:[{id:1,condition:"No medical history recorded",diagnosedDate:"-",status:"-",doctor:"-"}],S=c&&c.length>0&&c[0].allergies?c[0].allergies.split(`
`).map((z,B)=>({id:B+1,allergen:z.trim(),reaction:"Not specified",severity:"Not specified"})):[{id:1,allergen:"No allergies recorded",reaction:"-",severity:"-"}],E=c&&c.length>0&&c[0].medication?[{id:1,name:c[0].medication,dosage:"As prescribed",frequency:"As prescribed",prescribedBy:"Not specified",startDate:"Not specified"}]:[{id:1,name:"No current medications",dosage:"-",frequency:"-",prescribedBy:"-",startDate:"-"}],A=[{id:1,vaccine:"COVID-19 (Pfizer)",date:"Jan 2025",nextDue:"Jan 2026"},{id:2,vaccine:"Influenza",date:"Oct 2024",nextDue:"Oct 2025"},{id:3,vaccine:"Tetanus",date:"March 2020",nextDue:"March 2030"}],N=()=>{switch(e){case"appointments":return l.jsx("div",{className:"space-y-4",children:i?l.jsx("div",{className:"text-center py-8",children:l.jsx("div",{className:"text-gray-500",children:"Loading appointments..."})}):a&&a.length>0?a.map(z=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:z.doctor}),l.jsx("p",{className:"text-sm text-gray-500",children:z.specialty}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 inline mr-1"}),z.date]}),l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(cy,{className:"w-4 h-4 inline mr-1"}),z.time]}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Type: ",l.jsx("span",{className:"font-medium",children:z.appointmentType})]})]}),z.serviceUnit&&l.jsx("div",{className:"mt-1",children:l.jsxs("span",{className:"text-sm text-gray-600",children:["Unit: ",l.jsx("span",{className:"font-medium",children:z.serviceUnit})]})}),l.jsx("div",{className:"mt-2",children:l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${z.status==="Closed"?"bg-green-100 text-green-700":z.status==="No Show"?"bg-red-100 text-red-700":z.status==="Cancelled"?"bg-gray-100 text-gray-700":z.status==="Confirmed"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:z.status})})]}),z.invoiced&&l.jsxs("button",{onClick:()=>uD(z.appointmentId,z.refInvoice),className:"flex items-center px-3 py-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition-colors text-sm",children:[l.jsx(Av,{className:"w-4 h-4 mr-2"}),"Invoice"]})]})},z.id)):l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No appointments found"})});case"lab-reports":return l.jsx("div",{className:"space-y-4",children:u?l.jsx("div",{className:"text-center py-8",children:l.jsx("div",{className:"text-gray-500",children:"Loading lab reports..."})}):o&&o.length>0?o.map(z=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:z.testName}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Ordered by: ",z.doctor]}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 inline mr-1"}),z.date]}),l.jsx("span",{className:`text-sm font-medium ${z.status==="Completed"||z.status==="Normal"?"text-green-600":z.status==="Pending"?"text-yellow-600":"text-orange-600"}`,children:z.status}),z.department&&l.jsxs("span",{className:"text-sm text-gray-600",children:["Dept: ",z.department]})]}),z.invoiced&&l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700 mt-1",children:"Invoiced"})]}),z.downloadable&&l.jsxs("button",{onClick:()=>dD(z.labTestId),className:"flex items-center px-3 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors text-sm",children:[l.jsx(Av,{className:"w-4 h-4 mr-2"}),"Download"]})]})},z.id)):l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No lab reports found"})});case"medical-history":return l.jsx("div",{className:"space-y-4",children:_.map(z=>l.jsxs("div",{className:"border border-gray-100 rounded-lg p-4",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:z.condition}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Diagnosed by ",z.doctor]}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 inline mr-1"}),z.diagnosedDate]}),l.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${z.status==="Ongoing"?"bg-red-100 text-red-700":z.status==="Managed"?"bg-yellow-100 text-yellow-700":z.status==="-"?"bg-gray-100 text-gray-700":"bg-green-100 text-green-700"}`,children:z.status})]})]})}),c&&c.length>0&&c[0].surgical_history&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Surgical History:"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c[0].surgical_history})]})]},z.id))});case"allergies":return l.jsx("div",{className:"space-y-4",children:S.map(z=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:z.allergen}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Reaction: ",z.reaction]})]}),l.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${z.severity==="Severe"?"bg-red-100 text-red-700":z.severity==="Moderate"?"bg-yellow-100 text-yellow-700":z.severity==="-"?"bg-gray-100 text-gray-700":"bg-green-100 text-green-700"}`,children:z.severity})]})},z.id))});case"medications":return l.jsx("div",{className:"space-y-4",children:E.map(z=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-gray-800",children:z.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:[z.dosage," - ",z.frequency]}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:["Prescribed by: ",z.prescribedBy]}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Since: ",z.startDate]})]})]})},z.id))});case"vaccinations":return l.jsx("div",{className:"space-y-4",children:A.map(z=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:z.vaccine}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 inline mr-1"}),"Last: ",z.date]}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Next Due: ",z.nextDue]})]})]}),l.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:"Up to Date"})]})},z.id))});default:return null}};return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Medical Records"}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-6 border-b border-gray-200",children:g.map(z=>{const B=z.icon;return l.jsxs("button",{onClick:()=>t(z.id),className:`flex items-center px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${e===z.id?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[l.jsx(B,{className:"w-4 h-4 mr-2"}),z.label]},z.id)})}),N()]})},rJ=({vitalSignData:e})=>{var n,i,o,u;const t=[{label:"Blood Pressure",value:(i=(n=e[0])==null?void 0:n.bp)==null?void 0:i.split(" ")[0],unit:"mmHg",icon:cC,color:"text-red-500",bgColor:"bg-red-50"},{label:"Heart Rate",value:(o=e[0])==null?void 0:o.pulse,unit:"bpm",icon:x1,color:"text-pink-500",bgColor:"bg-pink-50"},{label:"Temperature",value:(u=e[0])==null?void 0:u.temperature,unit:"F",icon:DB,color:"text-orange-500",bgColor:"bg-orange-50"},{label:"Oxygen",value:"98",unit:"%",icon:GB,color:"text-blue-500",bgColor:"bg-blue-50"}];return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Vital Signs"}),l.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Last updated: Today, 9:00 AM"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.map((c,a)=>{const g=c.icon;return l.jsxs("div",{className:`${c.bgColor} rounded-lg p-3`,children:[l.jsx(g,{className:`w-5 h-5 ${c.color} mb-2`}),l.jsx("p",{className:"text-xs text-gray-600",children:c.label}),l.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[c.value," ",l.jsx("span",{className:"text-xs text-gray-500",children:c.unit})]})]},a)})})]})},aJ=({recentLabTests:e,labTestLoading:t,setActiveTab:n})=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Recent Lab Tests"}),l.jsx("button",{onClick:()=>n("lab-reports"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"})]}),l.jsx("div",{className:"space-y-3",children:t?l.jsx("div",{className:"text-center py-4",children:l.jsx("div",{className:"text-gray-500 text-sm",children:"Loading tests..."})}):e&&e.length>0?e.map((i,o)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-800",children:i.name}),l.jsx("p",{className:"text-xs text-gray-500",children:i.date})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:`text-xs font-medium ${i.status==="completed"?i.result==="Normal"?"text-green-600":"text-orange-600":"text-gray-400"}`,children:i.result}),i.status==="completed"&&l.jsxs("button",{onClick:()=>dD(i.labTestId),className:"block mt-1 text-xs text-blue-600 hover:text-blue-700",children:[l.jsx(Av,{className:"w-3 h-3 inline mr-1"}),"Download"]})]})]},o)):l.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No recent lab tests"})})]}),oJ=()=>{const e=[{name:"General Physician",icon:TP,color:"bg-teal-500"},{name:"Neurologist",icon:nL,color:"bg-purple-500"},{name:"ENT",icon:hm,color:"bg-indigo-500"},{name:"Urology",icon:zL,color:"bg-blue-500"},{name:"Cardio",icon:cC,color:"bg-red-500"},{name:"Gynaecology",icon:vS,color:"bg-pink-500"},{name:"Oncology",icon:x1,color:"bg-orange-500"},{name:"Trauma",icon:Nv,color:"bg-yellow-500"}];return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Search by Departments"}),l.jsx("div",{className:"grid grid-cols-4 gap-3",children:e.map((t,n)=>{const i=t.icon;return l.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[l.jsx("div",{className:`w-12 h-12 ${t.color} rounded-lg flex items-center justify-center mb-2 group-hover:scale-110 transition-transform`,children:l.jsx(i,{className:"w-6 h-6 text-white"})}),l.jsx("span",{className:"text-xs text-gray-600",children:t.name})]},n)})})]})},lJ=()=>{const e=t=>{console.log(`Quick action: ${t}`)};return l.jsxs("div",{className:"bg-gray-900 rounded-xl p-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-6 text-white",children:"Quick Actions"}),l.jsxs("div",{className:"relative space-y-4",children:[l.jsx("div",{onClick:()=>e("enroll"),className:"relative bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"New"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Enroll Patient"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(zm,{className:"w-6 h-6 text-purple-600"})})]})}),l.jsx("div",{onClick:()=>e("emergency"),className:"relative bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 -mt-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"911"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Emergency Call"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(uC,{className:"w-6 h-6 text-red-500"})})]})}),l.jsx("div",{onClick:()=>e("history"),className:"relative bg-gradient-to-r from-green-500 to-teal-500 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 -mt-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"View"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Medical History"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(CL,{className:"w-6 h-6 text-green-500"})})]})}),l.jsx("div",{onClick:()=>e("reminder"),className:"relative bg-gradient-to-r from-orange-500 to-yellow-500 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 -mt-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"Set"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Medicine Reminder"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(xS,{className:"w-6 h-6 text-orange-500"})})]})}),l.jsx("div",{onClick:()=>e("findDoctor"),className:"relative bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 -mt-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"Find"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Find Doctor"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(l0,{className:"w-6 h-6 text-indigo-500"})})]})})]})]})},cJ=({showModal:e,setShowModal:t,patientData:n,patientId:i,user_name:o,cardBloMeNumber:u,refreshAppointments:c,departmentsData:a,departmentsLoading:g,appointmentTypesData:_,practitionersData:S})=>{const[E,A]=L.useState(!1),[N,z]=L.useState({patient:"",patient_name:"",appointment_for:"Patient",appointment_date:"",appointment_time:"",department:"",practitioner:"",practitioner_name:"",appointment_type:"New",service_unit:"",duration:30,mode_of_payment:"Cash",paid_amount:0,add_video_conferencing:!1,status:"Open"}),[B,$]=L.useState(),[q,W]=L.useState([]),[Q,Z]=L.useState(!1);console.log("------------------------------------------",S),_y(),L.useEffect(()=>{e&&n&&n.length>0&&z(pe=>Ee(te({},pe),{patient:n[0].name,patient_name:n[0].patient_name||o,appointment_for:"Patient"}))},[e,n,o]);const K=L.useCallback(pe=>{const{name:Ie,value:He,type:Ye,checked:rt}=pe.target;Ie==="appointment_date"&&ge(N.practitioner,He),Ie==="practitioner"&&($(He),ge(He,N.appointment_date)),z(Rt=>Ee(te({},Rt),{[Ie]:Ye==="checkbox"?rt:He})),Ie==="department"&&z(Rt=>Ee(te({},Rt),{practitioner:"",practitioner_name:""})),Ie==="practitioner"&&($(He),z(Rt=>Ee(te({},Rt),{practitioner_name:He})))},[N.practitioner,N.appointment_date]),le=L.useCallback(pe=>Gt(null,null,function*(){if(pe.preventDefault(),pe.stopPropagation(),!E){A(!0),console.log("appointment form------>",N);try{const Ie={doctype:"Patient Appointment",patient:N.patient,patient_name:N.patient_name,appointment_date:N.appointment_date,appointment_time:N.appointment_time,department:N.department,practitioner:N.practitioner,appointment_type:N.appointment_type||"New",duration:parseInt(N.duration),status:"Open"},He=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.create_appointment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 73fb1eefb9d16d3:5b665ea071ecae4"},credentials:"omit",body:JSON.stringify({appointmentForm1:Ie})});if(!He.ok){const rt=yield He.text()}const Ye=yield He.json();console.log("patient created succesfully",Ye),alert("Appointment booked successfully!"),c&&c(),t(!1),he()}catch(Ie){console.error("Error creating appointment:",Ie),alert("Failed to book appointment. Please try again.")}finally{A(!1)}return!1}}),[N,c,E,t]),ge=L.useCallback((pe,Ie)=>Gt(null,null,function*(){var He,Ye;if(console.log("Practitioner:",pe,"Date:",Ie),!pe||!Ie){W([]);return}Z(!0);try{const rt=new Headers;rt.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),rt.append("Content-Type","application/json"),rt.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const Rt=JSON.stringify({practitioner:pe,date:Ie}),Qe=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.healthcare.doctype.patient_appointment.patient_appointment.get_availability_data",{method:"POST",headers:rt,body:Rt,redirect:"follow"});if(!Qe.ok)throw new Error(`HTTP error! status: ${Qe.status}`);const et=yield Qe.text(),Nt=JSON.parse(et);console.log("get availability data.........",Nt),Nt&&Nt.message&&Nt.message.slot_details?W((Ye=(He=Nt==null?void 0:Nt.message)==null?void 0:He.slot_details[0])==null?void 0:Ye.avail_slot):W([])}catch(rt){console.log(rt),W([])}finally{Z(!1)}})),he=L.useCallback(()=>{z({patient:"",patient_name:"",appointment_for:"Patient",appointment_date:"",appointment_time:"",department:"",practitioner:"",practitioner_name:"",appointment_type:"New",service_unit:"",duration:30,mode_of_payment:"Cash",paid_amount:0,add_video_conferencing:!1,status:"Open"}),W([]),Z(!1)},[]);return e?l.jsx("div",{className:"fixed inset-0 bg-transparent backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto animate-in slide-in-from-bottom duration-300 border border-gray-200",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(xc,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Book New Appointment"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[o," with Dr. ",N.practitioner_name||"..."]})]})]}),l.jsx("button",{onClick:()=>{t(!1),he()},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(T0,{className:"w-5 h-5 text-gray-500"})})]}),l.jsxs("form",{onSubmit:le,className:"p-6",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[l.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-3 flex items-center",children:[l.jsx(zm,{className:"w-4 h-4 mr-2"}),"Patient Details"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name"}),l.jsx("input",{type:"text",name:"patient_name",value:N.patient_name,readOnly:!0,className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient ID"}),l.jsx("input",{type:"text",name:"patient",value:N.patient||"Not Registered",readOnly:!0,className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-700"})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[l.jsx(dC,{className:"w-4 h-4 mr-2"}),"Consultation Details"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Department ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{name:"department",value:N.department,onChange:K,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-100",children:[l.jsx("option",{value:"",children:"Select Department"}),a&&a.map(pe=>l.jsx("option",{value:pe.name,children:pe.name},pe.name))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Practitioner ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{name:"practitioner",value:N.practitioner,onChange:K,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-100",children:[l.jsx("option",{value:"",children:"Select Practitioner"}),S&&S.map(pe=>l.jsx("option",{value:pe.name,children:pe.name},pe.name))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Appointment Date ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"date",name:"appointment_date",value:N.appointment_date,onChange:K,min:new Date().toISOString().split("T")[0],required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appointment Type"}),l.jsx("select",{name:"appointment_type",value:N.appointment_type,onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-100",children:_&&_.map(pe=>l.jsx("option",{value:pe.name,children:pe.name},pe.name))})]})]})]}),l.jsx("div",{className:"space-y-6",children:N.practitioner&&N.appointment_date&&l.jsxs("div",{children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[l.jsx(_S,{className:"w-4 h-4 mr-2"}),N.practitioner_name?`${N.practitioner_name}'s Schedule`:"Available Time Slots"]}),Q?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{className:"ml-3 text-gray-600",children:"Loading available slots..."})]}):q.length>0?l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3",children:q.map((pe,Ie)=>(typeof pe=="string"||pe.slot_name||pe.avail_slot||pe.time,l.jsx("button",{type:"button",onClick:()=>{z(He=>Ee(te({},He),{appointment_time:pe==null?void 0:pe.from_time}))},className:`px-4 py-2.5 rounded-lg border-2 text-sm font-medium transition-all cursor-pointer
                             ${N.appointment_time===(pe==null?void 0:pe.from_time)?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:(pe==null?void 0:pe.from_time)||"N/A"},Ie)))}):l.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsx(QL,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),l.jsx("p",{className:"text-gray-600",children:"No available slots for this date"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Please select a different date or practitioner"})]})]})}),l.jsx("div",{className:"space-y-6"}),l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 flex items-center justify-end space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>{t(!1),he()},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center",children:E?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Booking..."]}):l.jsxs(l.Fragment,{children:[l.jsx(_S,{className:"w-4 h-4 mr-2"}),"Book Appointment"]})})]})]})]})}):null},uJ=({prescriptions:e=[],selectedPrescription:t,setSelectedPrescription:n})=>{const i=Pr();console.log("selected Prescription....",t);const o=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",u=c=>c?c.slice(0,5):"";return l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsxs("div",{className:"w-96 bg-white border-r border-gray-200 overflow-y-auto",children:[l.jsxs("div",{className:"p-6 border-b border-gray-200",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Prescriptions"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[e.length," total"]})]}),l.jsx("div",{className:"p-4 space-y-3",children:e.map(c=>l.jsxs("div",{onClick:()=>n(c),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${(t==null?void 0:t.name)===c.name?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:c.patient_name}),l.jsx("span",{className:"text-xs text-gray-500",children:o(c.encounter_date)})]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[l.jsx(zm,{size:14,className:"mr-2"}),l.jsx("span",{children:c.practitioner_name})]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[l.jsx(Xb,{size:14,className:"mr-2"}),l.jsx("span",{className:"truncate",children:c.drug_name})]}),l.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-100",children:[l.jsx("span",{className:"text-xs text-blue-600 font-medium",children:c.appointment}),l.jsx("span",{className:"text-xs text-gray-500",children:c.dosage_form})]})]},c.name))})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:t?l.jsx("div",{className:"p-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Prescription Details"}),l.jsx("span",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:t.docstatus===1?"Submitted":"Draft"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Name"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.patient_name}),l.jsx("p",{className:"text-sm text-gray-600",children:t.patient})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Details"}),l.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[t.patient_sex,t.patient_age&&`, ${t.patient_age} years`]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Prescribed By"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.practitioner_name}),l.jsx("p",{className:"text-sm text-gray-600",children:t.practitioner})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Appointment"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.appointment||"N/A"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Encounter Date"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(xc,{size:18,className:"mr-2 text-gray-600"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:o(t.encounter_date)})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Encounter Time"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(cy,{size:18,className:"mr-2 text-gray-600"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:u(t.encounter_time)})]})]})]})]}),(t.company||t.medical_department)&&l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[l.jsx(x1,{className:"mr-2",size:22}),"Organization Details"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.company&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.company})]}),t.medical_department&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Department"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.medical_department})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[l.jsx(Xb,{className:"mr-2",size:22}),"Medication Details"]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-lg text-gray-800 mb-4",children:t.drug_name}),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Drug Code"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.drug_code})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Dosage"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.dosage})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Dosage Form"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.dosage_form})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Period"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.period})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Interval"}),l.jsxs("p",{className:"text-gray-700 font-medium",children:[t.interval," ",t.interval_uom]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Update Schedule"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.update_schedule?"Yes":"No"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[l.jsx(kL,{className:"mr-2",size:22}),"Additional Information"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Print Diagnosis"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.diagnosis_in_print?"Yes":"No"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Print Symptoms"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.symptoms_in_print?"Yes":"No"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Invoiced"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.invoiced?"Yes":"No"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Record ID"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.name})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[l.jsx(Xb,{className:"mr-2",size:22}),"Prescription Attachment"]}),l.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:l.jsx("img",{src:`https://lblerp.anantdv.com${t==null?void 0:t.attach_prescription}`,alt:""})})]}),l.jsx("div",{className:"w-full flex items-center justify-center ",children:l.jsx("button",{onClick:()=>i("/get_medicine"),className:"py-3 px-5 bg-blue-200 rounded-md font-medium cursor-pointer",children:"Get Medicine"})})]})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx(C0,{size:64,className:"mx-auto text-gray-300 mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Prescription Selected"}),l.jsx("p",{className:"text-gray-500",children:"Select a prescription from the list to view details"})]})})})]})};function dJ({city:e,setCity:t}){const[n,i]=L.useState(!0),[o,u]=L.useState(!1),c=()=>{i(!1),u(!0)},a=()=>{t(""),console.log("City submitted:",e),u(!1)},g=()=>{u(!1),t("")};return l.jsxs("div",{className:"min-h-screen bg-gray-100 p-8",children:[n&&l.jsx("div",{className:"fixed inset-0 backdrop-blur-md flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden",children:[l.jsx("div",{className:"bg-red-500 text-white px-6 py-4 flex items-center justify-between",children:l.jsx("h2",{className:"text-xl font-semibold",children:"Warning"})}),l.jsxs("div",{className:"p-8 text-center",children:[l.jsx("p",{className:"text-red-500 text-lg font-medium mb-6",children:"Please Enable Location"}),l.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-600 text-white font-medium px-8 py-3 rounded-lg shadow-md transition-colors",children:"Done"})]})]})}),o&&l.jsx("div",{className:"fixed inset-0 backdrop-blur-md flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-8",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Help us serve you better!"}),l.jsx("div",{className:"flex justify-center mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(fm,{size:80,className:"text-yellow-500 fill-yellow-500"}),l.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full"}),l.jsx("div",{className:"absolute top-8 right-2 w-4 h-4 bg-yellow-300 rounded-full"}),l.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-10 h-10 bg-teal-700 rounded-full border-4 border-white"})]})}),l.jsx("p",{className:"text-gray-700 mb-6",children:"Please provide us your delivery city name for faster and seamless deliveries."}),l.jsxs("div",{className:"mb-2",children:[l.jsx("label",{className:"block text-gray-800 font-medium mb-2",children:"Delivery City"}),l.jsx("input",{type:"text",placeholder:"Enter city name here",value:e,onChange:_=>t(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"*Enter your city name to proceed"}),l.jsxs("div",{className:"flex gap-4 justify-end",children:[l.jsx("button",{onClick:g,className:"px-6 py-2 text-teal-600 font-medium hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),l.jsx("button",{onClick:a,className:"px-6 py-2 bg-teal-600 hover:bg-teal-700 text-white font-medium rounded-lg transition-colors",children:"Submit"})]})]})})]})}var hv={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.9.0/LICENSE.txt
 */var hJ=hv.exports,CN;function fJ(){return CN||(CN=1,function(e,t){(function(n,i){e.exports=i()})(hJ,function(){var n={},i={};function o(c,a,g){if(i[c]=g,c==="index"){var _="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",S={};return i.shared(S),i.index(n,S),typeof window!="undefined"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([_],{type:"text/javascript"}))),n}}o("shared",["exports"],function(c){function a(f,r,d,y){return new(d||(d=Promise))(function(v,C){function M(V){try{I(y.next(V))}catch(H){C(H)}}function R(V){try{I(y.throw(V))}catch(H){C(H)}}function I(V){var H;V.done?v(V.value):(H=V.value,H instanceof d?H:new d(function(X){X(H)})).then(M,R)}I((y=y.apply(f,r||[])).next())})}function g(f,r){this.x=f,this.y=r}function _(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var S,E;typeof SuppressedError=="function"&&SuppressedError,g.prototype={clone(){return new g(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,r){return this.clone()._rotateAround(f,r)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const r=f.x-this.x,d=f.y-this.y;return r*r+d*d},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,r){return Math.atan2(this.x*r-this.y*f,this.x*f+this.y*r)},_matMult(f){const r=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=r,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const r=Math.cos(f),d=Math.sin(f),y=d*this.x+r*this.y;return this.x=r*this.x-d*this.y,this.y=y,this},_rotateAround(f,r){const d=Math.cos(f),y=Math.sin(f),v=r.y+y*(this.x-r.x)+d*(this.y-r.y);return this.x=r.x+d*(this.x-r.x)-y*(this.y-r.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:g},g.convert=function(f){if(f instanceof g)return f;if(Array.isArray(f))return new g(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new g(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var A=function(){if(E)return S;function f(r,d,y,v){this.cx=3*r,this.bx=3*(y-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(v-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=d,this.p2x=y,this.p2y=v}return E=1,S=f,f.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,d){if(d===void 0&&(d=1e-6),r<0)return 0;if(r>1)return 1;for(var y=r,v=0;v<8;v++){var C=this.sampleCurveX(y)-r;if(Math.abs(C)<d)return y;var M=this.sampleCurveDerivativeX(y);if(Math.abs(M)<1e-6)break;y-=C/M}var R=0,I=1;for(y=r,v=0;v<20&&(C=this.sampleCurveX(y),!(Math.abs(C-r)<d));v++)r>C?R=y:I=y,y=.5*(I-R)+R;return y},solve:function(r,d){return this.sampleCurveY(this.solveCurveX(r,d))}},S}(),N=_(A);let z,B;function $(){return z==null&&(z=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),z}function q(){if(B==null&&(B=!1,$())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let y=0;y<5*5;y++){const v=4*y;r.fillStyle=`rgb(${v},${v+1},${v+2})`,r.fillRect(y%5,Math.floor(y/5),1,1)}const d=r.getImageData(0,0,5,5).data;for(let y=0;y<5*5*4;y++)if(y%4!=3&&d[y]!==y){B=!0;break}}}return B||!1}var W=1e-6,Q=typeof Float32Array!="undefined"?Float32Array:Array;function Z(){var f=new Q(9);return Q!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function K(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function le(){var f=new Q(3);return Q!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function ge(f){var r=f[0],d=f[1],y=f[2];return Math.sqrt(r*r+d*d+y*y)}function he(f,r,d){var y=new Q(3);return y[0]=f,y[1]=r,y[2]=d,y}function pe(f,r,d){return f[0]=r[0]+d[0],f[1]=r[1]+d[1],f[2]=r[2]+d[2],f}function Ie(f,r,d){return f[0]=r[0]*d,f[1]=r[1]*d,f[2]=r[2]*d,f}function He(f,r,d){var y=r[0],v=r[1],C=r[2],M=d[0],R=d[1],I=d[2];return f[0]=v*I-C*R,f[1]=C*M-y*I,f[2]=y*R-v*M,f}var Ye,rt=ge;function Rt(f,r,d){var y=r[0],v=r[1],C=r[2],M=r[3];return f[0]=d[0]*y+d[4]*v+d[8]*C+d[12]*M,f[1]=d[1]*y+d[5]*v+d[9]*C+d[13]*M,f[2]=d[2]*y+d[6]*v+d[10]*C+d[14]*M,f[3]=d[3]*y+d[7]*v+d[11]*C+d[15]*M,f}function St(){var f=new Q(4);return Q!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function De(f,r,d,y){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",C=Math.PI/360;r*=C,y*=C,d*=C;var M=Math.sin(r),R=Math.cos(r),I=Math.sin(d),V=Math.cos(d),H=Math.sin(y),X=Math.cos(y);switch(v){case"xyz":f[0]=M*V*X+R*I*H,f[1]=R*I*X-M*V*H,f[2]=R*V*H+M*I*X,f[3]=R*V*X-M*I*H;break;case"xzy":f[0]=M*V*X-R*I*H,f[1]=R*I*X-M*V*H,f[2]=R*V*H+M*I*X,f[3]=R*V*X+M*I*H;break;case"yxz":f[0]=M*V*X+R*I*H,f[1]=R*I*X-M*V*H,f[2]=R*V*H-M*I*X,f[3]=R*V*X+M*I*H;break;case"yzx":f[0]=M*V*X+R*I*H,f[1]=R*I*X+M*V*H,f[2]=R*V*H-M*I*X,f[3]=R*V*X-M*I*H;break;case"zxy":f[0]=M*V*X-R*I*H,f[1]=R*I*X+M*V*H,f[2]=R*V*H+M*I*X,f[3]=R*V*X-M*I*H;break;case"zyx":f[0]=M*V*X-R*I*H,f[1]=R*I*X+M*V*H,f[2]=R*V*H-M*I*X,f[3]=R*V*X+M*I*H;break;default:throw new Error("Unknown angle order "+v)}return f}function Qe(){var f=new Q(2);return Q!=Float32Array&&(f[0]=0,f[1]=0),f}function et(f,r){var d=new Q(2);return d[0]=f,d[1]=r,d}le(),Ye=new Q(4),Q!=Float32Array&&(Ye[0]=0,Ye[1]=0,Ye[2]=0,Ye[3]=0),le(),he(1,0,0),he(0,1,0),St(),St(),Z(),Qe();const Nt=8192;function fe(f,r,d){return r*(Nt/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function Xe(f,r){return(f%r+r)%r}function tt(f,r,d){return f*(1-d)+r*d}function Me(f){if(f<=0)return 0;if(f>=1)return 1;const r=f*f,d=r*f;return 4*(f<.5?d:3*(f-r)+d-.75)}function ot(f,r,d,y){const v=new N(f,r,d,y);return C=>v.solve(C)}const ut=ot(.25,.1,.25,1);function dt(f,r,d){return Math.min(d,Math.max(r,f))}function pt(f,r,d){const y=d-r,v=((f-r)%y+y)%y+r;return v===r?d:v}function Ve(f,...r){for(const d of r)for(const y in d)f[y]=d[y];return f}let Ge=1;function Dt(f,r,d){const y={};for(const v in f)y[v]=r.call(this,f[v],v,f);return y}function Lt(f,r,d){const y={};for(const v in f)r.call(this,f[v],v,f)&&(y[v]=f[v]);return y}function It(f){return Array.isArray(f)?f.map(It):typeof f=="object"&&f?Dt(f,It):f}const Ot={};function en(f){Ot[f]||(typeof console!="undefined"&&console.warn(f),Ot[f]=!0)}function _n(f,r,d){return(d.y-f.y)*(r.x-f.x)>(r.y-f.y)*(d.x-f.x)}function Yn(f){return typeof WorkerGlobalScope!="undefined"&&f!==void 0&&f instanceof WorkerGlobalScope}let Hn=null;function hn(f){if(Hn==null){const r=f.navigator?f.navigator.userAgent:null;Hn=!!f.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Hn}function on(f){return typeof ImageBitmap!="undefined"&&f instanceof ImageBitmap}const Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function We(f,r,d,y,v){return a(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");const C=new VideoFrame(f,{timestamp:0});try{const M=C==null?void 0:C.format;if(!M||!M.startsWith("BGR")&&!M.startsWith("RGB"))throw new Error(`Unrecognized format ${M}`);const R=M.startsWith("BGR"),I=new Uint8ClampedArray(y*v*4);if(yield C.copyTo(I,function(V,H,X,ie,oe){const de=4*Math.max(-H,0),xe=(Math.max(0,X)-X)*ie*4+de,ve=4*ie,Re=Math.max(0,H),at=Math.max(0,X);return{rect:{x:Re,y:at,width:Math.min(V.width,H+ie)-Re,height:Math.min(V.height,X+oe)-at},layout:[{offset:xe,stride:ve}]}}(f,r,d,y,v)),R)for(let V=0;V<I.length;V+=4){const H=I[V];I[V]=I[V+2],I[V+2]=H}return I}finally{C.close()}})}let Pe,Bt;function Et(f,r,d,y){return f.addEventListener(r,d,y),{unsubscribe:()=>{f.removeEventListener(r,d,y)}}}function nn(f){return f*Math.PI/180}function yn(f){return f/Math.PI*180}const ln={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},At={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ke="AbortError";function ae(){return new Error(ke)}const ue={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function _e(f){return ue.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Ce="global-dispatcher";class Ae extends Error{constructor(r,d,y,v){super(`AJAXError: ${d} (${r}): ${y}`),this.status=r,this.statusText=d,this.url=y,this.body=v}}const J=()=>Yn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,nt=function(f,r){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const y=_e(f.url);if(y)return y(f,r);if(Yn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Ce},r)}if(!(/^file:/.test(d=f.url)||/^file:/.test(J())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(y,v){return a(this,void 0,void 0,function*(){const C=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:J(),signal:v.signal});let M,R;y.type!=="json"||C.headers.has("Accept")||C.headers.set("Accept","application/json");try{M=yield fetch(C)}catch(V){throw new Ae(0,V.message,y.url,new Blob)}if(!M.ok){const V=yield M.blob();throw new Ae(M.status,M.statusText,y.url,V)}R=y.type==="arrayBuffer"||y.type==="image"?M.arrayBuffer():y.type==="json"?M.json():M.text();const I=yield R;if(v.signal.aborted)throw ae();return{data:I,cacheControl:M.headers.get("Cache-Control"),expires:M.headers.get("Expires")}})}(f,r);if(Yn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Ce},r)}var d;return function(y,v){return new Promise((C,M)=>{var R;const I=new XMLHttpRequest;I.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(I.responseType="arraybuffer");for(const V in y.headers)I.setRequestHeader(V,y.headers[V]);y.type==="json"&&(I.responseType="text",!((R=y.headers)===null||R===void 0)&&R.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=y.credentials==="include",I.onerror=()=>{M(new Error(I.statusText))},I.onload=()=>{if(!v.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let V=I.response;if(y.type==="json")try{V=JSON.parse(I.response)}catch(H){return void M(H)}C({data:V,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const V=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});M(new Ae(I.status,I.statusText,y.url,V))}},v.signal.addEventListener("abort",()=>{I.abort(),M(ae())}),I.send(y.body)})}(f,r)};function Je(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const r=new URL(f),d=window.location;return r.protocol===d.protocol&&r.host===d.host}function jt(f,r,d){d[f]&&d[f].indexOf(r)!==-1||(d[f]=d[f]||[],d[f].push(r))}function qt(f,r,d){if(d&&d[f]){const y=d[f].indexOf(r);y!==-1&&d[f].splice(y,1)}}class Ft{constructor(r,d={}){Ve(this,d),this.type=r}}class bn extends Ft{constructor(r,d={}){super("error",Ve({error:r},d))}}class Tn{on(r,d){return this._listeners=this._listeners||{},jt(r,d,this._listeners),{unsubscribe:()=>{this.off(r,d)}}}off(r,d){return qt(r,d,this._listeners),qt(r,d,this._oneTimeListeners),this}once(r,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},jt(r,d,this._oneTimeListeners),this):new Promise(y=>this.once(r,y))}fire(r,d){typeof r=="string"&&(r=new Ft(r,d||{}));const y=r.type;if(this.listens(y)){r.target=this;const v=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const R of v)R.call(this,r);const C=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const R of C)qt(y,R,this._oneTimeListeners),R.call(this,r);const M=this._eventedParent;M&&(Ve(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(r))}else r instanceof bn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,d){return this._eventedParent=r,this._eventedParentData=d,this}}var ct={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const wt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Wt(f,r){const d={};for(const y in f)y!=="ref"&&(d[y]=f[y]);return wt.forEach(y=>{y in r&&(d[y]=r[y])}),d}function Ut(f,r){if(Array.isArray(f)){if(!Array.isArray(r)||f.length!==r.length)return!1;for(let d=0;d<f.length;d++)if(!Ut(f[d],r[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&r!==null){if(typeof r!="object"||Object.keys(f).length!==Object.keys(r).length)return!1;for(const d in f)if(!Ut(f[d],r[d]))return!1;return!0}return f===r}function vn(f,r){f.push(r)}function Gi(f,r,d){vn(d,{command:"addSource",args:[f,r[f]]})}function Jn(f,r,d){vn(r,{command:"removeSource",args:[f]}),d[f]=!0}function ai(f,r,d,y){Jn(f,d,y),Gi(f,r,d)}function qn(f,r,d){let y;for(y in f[d])if(Object.prototype.hasOwnProperty.call(f[d],y)&&y!=="data"&&!Ut(f[d][y],r[d][y]))return!1;for(y in r[d])if(Object.prototype.hasOwnProperty.call(r[d],y)&&y!=="data"&&!Ut(f[d][y],r[d][y]))return!1;return!0}function Bn(f,r,d,y,v,C){f=f||{},r=r||{};for(const M in f)Object.prototype.hasOwnProperty.call(f,M)&&(Ut(f[M],r[M])||d.push({command:C,args:[y,M,r[M],v]}));for(const M in r)Object.prototype.hasOwnProperty.call(r,M)&&!Object.prototype.hasOwnProperty.call(f,M)&&(Ut(f[M],r[M])||d.push({command:C,args:[y,M,r[M],v]}))}function yi(f){return f.id}function Xt(f,r){return f[r.id]=r,f}class lt{constructor(r,d,y,v){this.message=(r?`${r}: `:"")+y,v&&(this.identifier=v),d!=null&&d.__line__&&(this.line=d.__line__)}}function Ri(f,...r){for(const d of r)for(const y in d)f[y]=d[y];return f}class li extends Error{constructor(r,d){super(d),this.message=d,this.key=r}}class Wi{constructor(r,d=[]){this.parent=r,this.bindings={};for(const[y,v]of d)this.bindings[y]=v}concat(r){return new Wi(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const ds={kind:"null"},tn={kind:"number"},ei={kind:"string"},On={kind:"boolean"},ws={kind:"color"},Ii={kind:"projectionDefinition"},Xr={kind:"object"},Vn={kind:"value"},Kr={kind:"collator"},Rr={kind:"formatted"},da={kind:"padding"},hs={kind:"colorArray"},Qr={kind:"numberArray"},ka={kind:"resolvedImage"},Di={kind:"variableAnchorOffsetCollection"};function ts(f,r){return{kind:"array",itemType:f,N:r}}function ti(f){if(f.kind==="array"){const r=ti(f.itemType);return typeof f.N=="number"?`array<${r}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${r}>`}return f.kind}const ml=[ds,tn,ei,On,ws,Ii,Rr,Xr,ts(Vn),da,Qr,hs,ka,Di];function gl(f,r){if(r.kind==="error")return null;if(f.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!gl(f.itemType,r.itemType))&&(typeof f.N!="number"||f.N===r.N))return null}else{if(f.kind===r.kind)return null;if(f.kind==="value"){for(const d of ml)if(!gl(d,r))return null}}return`Expected ${ti(f)} but found ${ti(r)} instead.`}function Ea(f,r){return r.some(d=>d.kind===f.kind)}function Ha(f,r){return r.some(d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f)}function ha(f,r){return f.kind==="array"&&r.kind==="array"?f.itemType.kind===r.itemType.kind&&typeof f.N=="number":f.kind===r.kind}const Ph=.96422,Cu=.82521,Jr=4/29,yl=6/29,jd=3*yl*yl,Sc=yl*yl*yl,Bo=Math.PI/180,jc=180/Math.PI;function Rh(f){return(f%=360)<0&&(f+=360),f}function Dr([f,r,d,y]){let v,C;const M=Tu((.2225045*(f=vo(f))+.7168786*(r=vo(r))+.0606169*(d=vo(d)))/1);f===r&&r===d?v=C=M:(v=Tu((.4360747*f+.3850649*r+.1430804*d)/Ph),C=Tu((.0139322*f+.0971045*r+.7141733*d)/Cu));const R=116*M-16;return[R<0?0:R,500*(v-M),200*(M-C),y]}function vo(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Tu(f){return f>Sc?Math.pow(f,1/3):f/jd+Jr}function ku([f,r,d,y]){let v=(f+16)/116,C=isNaN(r)?v:v+r/500,M=isNaN(d)?v:v-d/200;return v=1*xl(v),C=Ph*xl(C),M=Cu*xl(M),[ea(3.1338561*C-1.6168667*v-.4906146*M),ea(-.9787684*C+1.9161415*v+.033454*M),ea(.0719453*C-.2289914*v+1.4052427*M),y]}function ea(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function xl(f){return f>yl?f*f*f:jd*(f-Jr)}const Cd=Object.hasOwn||function(f,r){return Object.prototype.hasOwnProperty.call(f,r)};function qa(f,r){return Cd(f,r)?f[r]:void 0}function Vl(f){return parseInt(f.padEnd(2,f),16)/255}function Eu(f,r){return or(r?f/100:f,0,1)}function or(f,r,d){return Math.min(Math.max(r,f),d)}function ci(f){return!f.some(Number.isNaN)}const wo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Sr(f,r,d){return f+d*(r-f)}function Ga(f,r,d){return f.map((y,v)=>Sr(y,r[v],d))}class ui{constructor(r,d,y,v=1,C=!0){this.r=r,this.g=d,this.b=y,this.a=v,C||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[r,d,y,v]))}static parse(r){if(r instanceof ui)return r;if(typeof r!="string")return;const d=function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=qa(wo,y);if(v){const[M,R,I]=v;return[M/255,R/255,I/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const M=y.length<6?1:2;let R=1;return[Vl(y.slice(R,R+=M)),Vl(y.slice(R,R+=M)),Vl(y.slice(R,R+=M)),Vl(y.slice(R,R+M)||"ff")]}if(y.startsWith("rgb")){const M=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){const[R,I,V,H,X,ie,oe,de,xe,ve,Re,at]=M,Be=[H||" ",oe||" ",ve].join("");if(Be==="  "||Be==="  /"||Be===",,"||Be===",,,"){const Ze=[V,ie,xe].join(""),xt=Ze==="%%%"?100:Ze===""?255:0;if(xt){const Mt=[or(+I/xt,0,1),or(+X/xt,0,1),or(+de/xt,0,1),Re?Eu(+Re,at):1];if(ci(Mt))return Mt}}return}}const C=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[M,R,I,V,H,X,ie,oe,de]=C,xe=[I||" ",H||" ",ie].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const ve=[+R,or(+V,0,100),or(+X,0,100),oe?Eu(+oe,de):1];if(ci(ve))return function([Re,at,Be,Ze]){function xt(Mt){const Zt=(Mt+Re/30)%12,cn=at*Math.min(Be,1-Be);return Be-cn*Math.max(-1,Math.min(Zt-3,9-Zt,1))}return Re=Rh(Re),at/=100,Be/=100,[xt(0),xt(8),xt(4),Ze]}(ve)}}}(r);return d?new ui(...d,!1):void 0}get rgb(){const{r,g:d,b:y,a:v}=this,C=v||1/0;return this.overwriteGetter("rgb",[r/C,d/C,y/C,v])}get hcl(){return this.overwriteGetter("hcl",function(r){const[d,y,v,C]=Dr(r),M=Math.sqrt(y*y+v*v);return[Math.round(1e4*M)?Rh(Math.atan2(v,y)*jc):NaN,M,d,C]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Dr(this.rgb))}overwriteGetter(r,d){return Object.defineProperty(this,r,{value:d}),d}toString(){const[r,d,y,v]=this.rgb;return`rgba(${[r,d,y].map(C=>Math.round(255*C)).join(",")},${v})`}static interpolate(r,d,y,v="rgb"){switch(v){case"rgb":{const[C,M,R,I]=Ga(r.rgb,d.rgb,y);return new ui(C,M,R,I,!1)}case"hcl":{const[C,M,R,I]=r.hcl,[V,H,X,ie]=d.hcl;let oe,de;if(isNaN(C)||isNaN(V))isNaN(C)?isNaN(V)?oe=NaN:(oe=V,R!==1&&R!==0||(de=H)):(oe=C,X!==1&&X!==0||(de=M));else{let Be=V-C;V>C&&Be>180?Be-=360:V<C&&C-V>180&&(Be+=360),oe=C+y*Be}const[xe,ve,Re,at]=function([Be,Ze,xt,Mt]){return Be=isNaN(Be)?0:Be*Bo,ku([xt,Math.cos(Be)*Ze,Math.sin(Be)*Ze,Mt])}([oe,de!=null?de:Sr(M,H,y),Sr(R,X,y),Sr(I,ie,y)]);return new ui(xe,ve,Re,at,!1)}case"lab":{const[C,M,R,I]=ku(Ga(r.lab,d.lab,y));return new ui(C,M,R,I,!1)}}}}ui.black=new ui(0,0,0,1),ui.white=new ui(1,1,1,1),ui.transparent=new ui(0,0,0,0),ui.red=new ui(1,0,0,1);class So{constructor(r,d,y){this.sensitivity=r?d?"variant":"case":d?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,d){return this.collator.compare(r,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ma=["bottom","center","top"];class Na{constructor(r,d,y,v,C,M){this.text=r,this.image=d,this.scale=y,this.fontStack=v,this.textColor=C,this.verticalAlign=M}}class fr{constructor(r){this.sections=r}static fromString(r){return new fr([new Na(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof fr?r:fr.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Ns{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ns)return r;if(typeof r=="number")return new Ns([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const d of r)if(typeof d!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Ns(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,d,y){return new Ns(Ga(r.values,d.values,y))}}class Fs{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Fs)return r;if(typeof r=="number")return new Fs([r]);if(Array.isArray(r)){for(const d of r)if(typeof d!="number")return;return new Fs(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,d,y){return new Fs(Ga(r.values,d.values,y))}}class Ss{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ss)return r;if(typeof r=="string"){const y=ui.parse(r);return y?new Ss([y]):void 0}if(!Array.isArray(r))return;const d=[];for(const y of r){if(typeof y!="string")return;const v=ui.parse(y);if(!v)return;d.push(v)}return new Ss(d)}toString(){return JSON.stringify(this.values)}static interpolate(r,d,y,v="rgb"){const C=[];if(r.values.length!=d.values.length)throw new Error(`colorArray: Arrays have mismatched length (${r.values.length} vs. ${d.values.length}), cannot interpolate.`);for(let M=0;M<r.values.length;M++)C.push(ui.interpolate(r.values[M],d.values[M],y,v));return new Ss(C)}}class vi extends Error{constructor(r){super(r),this.name="RuntimeError"}toJSON(){return this.message}}const jo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zs{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Zs)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let d=0;d<r.length;d+=2){const y=r[d],v=r[d+1];if(typeof y!="string"||!jo.has(y)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Zs(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,d,y){const v=r.values,C=d.values;if(v.length!==C.length)throw new vi(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${d.toString()}`);const M=[];for(let R=0;R<v.length;R+=2){if(v[R]!==C[R])throw new vi(`Cannot interpolate values containing mismatched anchors. from[${R}]: ${v[R]}, to[${R}]: ${C[R]}`);M.push(v[R]);const[I,V]=v[R+1],[H,X]=C[R+1];M.push([Sr(I,H,y),Sr(V,X,y)])}return new Zs(M)}}class ys{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new ys({name:r,available:!1}):null}}class rs{constructor(r,d,y){this.from=r,this.to=d,this.transition=y}static interpolate(r,d,y){return new rs(r,d,y)}static parse(r){return r instanceof rs?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new rs(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new rs(r.from,r.to,r.transition):typeof r=="string"?new rs(r,r,1):void 0}}function Aa(f,r,d,y){return typeof f=="number"&&f>=0&&f<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof d=="number"&&d>=0&&d<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[f,r,d,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[f,r,d,y]:[f,r,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Mi(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof rs||f instanceof ui||f instanceof So||f instanceof fr||f instanceof Ns||f instanceof Fs||f instanceof Ss||f instanceof Zs||f instanceof ys)return!0;if(Array.isArray(f)){for(const r of f)if(!Mi(r))return!1;return!0}if(typeof f=="object"){for(const r in f)if(!Mi(f[r]))return!1;return!0}return!1}function Zi(f){if(f===null)return ds;if(typeof f=="string")return ei;if(typeof f=="boolean")return On;if(typeof f=="number")return tn;if(f instanceof ui)return ws;if(f instanceof rs)return Ii;if(f instanceof So)return Kr;if(f instanceof fr)return Rr;if(f instanceof Ns)return da;if(f instanceof Fs)return Qr;if(f instanceof Ss)return hs;if(f instanceof Zs)return Di;if(f instanceof ys)return ka;if(Array.isArray(f)){const r=f.length;let d;for(const y of f){const v=Zi(y);if(d){if(d===v)continue;d=Vn;break}d=v}return ts(d||Vn,r)}return Xr}function di(f){const r=typeof f;return f===null?"":r==="string"||r==="number"||r==="boolean"?String(f):f instanceof ui||f instanceof rs||f instanceof fr||f instanceof Ns||f instanceof Fs||f instanceof Ss||f instanceof Zs||f instanceof ys?f.toString():JSON.stringify(f)}class Kn{constructor(r,d){this.type=r,this.value=d}static parse(r,d){if(r.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Mi(r[1]))return d.error("invalid value");const y=r[1];let v=Zi(y);const C=d.expectedType;return v.kind!=="array"||v.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(v=C),new Kn(v,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ys={string:ei,number:tn,boolean:On,object:Xr};class Xn{constructor(r,d){this.type=r,this.args=d}static parse(r,d){if(r.length<2)return d.error("Expected at least one argument.");let y,v=1;const C=r[0];if(C==="array"){let R,I;if(r.length>2){const V=r[1];if(typeof V!="string"||!(V in Ys)||V==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);R=Ys[V],v++}else R=Vn;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return d.error('The length argument to "array" must be a positive integer literal',2);I=r[2],v++}y=ts(R,I)}else{if(!Ys[C])throw new Error(`Types doesn't contain name = ${C}`);y=Ys[C]}const M=[];for(;v<r.length;v++){const R=d.parse(r[v],v,Vn);if(!R)return null;M.push(R)}return new Xn(y,M)}evaluate(r){for(let d=0;d<this.args.length;d++){const y=this.args[d].evaluate(r);if(!gl(this.type,Zi(y)))return y;if(d===this.args.length-1)throw new vi(`Expected value to be of type ${ti(this.type)}, but found ${ti(Zi(y))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const _l={"to-boolean":On,"to-color":ws,"to-number":tn,"to-string":ei};class As{constructor(r,d){this.type=r,this.args=d}static parse(r,d){if(r.length<2)return d.error("Expected at least one argument.");const y=r[0];if(!_l[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&r.length!==2)return d.error("Expected one argument.");const v=_l[y],C=[];for(let M=1;M<r.length;M++){const R=d.parse(r[M],M,Vn);if(!R)return null;C.push(R)}return new As(v,C)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let d,y;for(const v of this.args){if(d=v.evaluate(r),y=null,d instanceof ui)return d;if(typeof d=="string"){const C=r.parseColor(d);if(C)return C}else if(Array.isArray(d)&&(y=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:Aa(d[0],d[1],d[2],d[3]),!y))return new ui(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new vi(y||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const y of this.args){d=y.evaluate(r);const v=Ns.parse(d);if(v)return v}throw new vi(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"numberArray":{let d;for(const y of this.args){d=y.evaluate(r);const v=Fs.parse(d);if(v)return v}throw new vi(`Could not parse numberArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"colorArray":{let d;for(const y of this.args){d=y.evaluate(r);const v=Ss.parse(d);if(v)return v}throw new vi(`Could not parse colorArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const y of this.args){d=y.evaluate(r);const v=Zs.parse(d);if(v)return v}throw new vi(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const y of this.args){if(d=y.evaluate(r),d===null)return 0;const v=Number(d);if(!isNaN(v))return v}throw new vi(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return fr.fromString(di(this.args[0].evaluate(r)));case"resolvedImage":return ys.fromString(di(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return di(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const js=["Unknown","Point","LineString","Polygon"];class se{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?js[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let d=this._parseColorCache.get(r);return d||(d=ui.parse(r),this._parseColorCache.set(r,d)),d}}class me{constructor(r,d,y=[],v,C=new Wi,M=[]){this.registry=r,this.path=y,this.key=y.map(R=>`[${R}]`).join(""),this.scope=C,this.errors=M,this.expectedType=v,this._isConstant=d}parse(r,d,y,v,C={}){return d?this.concat(d,y,v)._parse(r,C):this._parse(r,C)}_parse(r,d){function y(v,C,M){return M==="assert"?new Xn(C,[v]):M==="coerce"?new As(C,[v]):v}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=r[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[v];if(C){let M=C.parse(r,this);if(!M)return null;if(this.expectedType){const R=this.expectedType,I=M.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||I.kind!=="value"){if(R.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(R.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(R.kind)&&["value","number","array"].includes(I.kind)||R.kind==="colorArray"&&["value","string","array"].includes(I.kind)||R.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))M=y(M,R,d.typeAnnotation||"coerce");else if(this.checkSubtype(R,I))return null}else M=y(M,R,d.typeAnnotation||"assert")}if(!(M instanceof Kn)&&M.type.kind!=="resolvedImage"&&this._isConstant(M)){const R=new se;try{M=new Kn(M.type,M.evaluate(R))}catch(I){return this.error(I.message),null}}return M}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,d,y){const v=typeof r=="number"?this.path.concat(r):this.path,C=y?this.scope.concat(y):this.scope;return new me(this.registry,this._isConstant,v,d||null,C,this.errors)}error(r,...d){const y=`${this.key}${d.map(v=>`[${v}]`).join("")}`;this.errors.push(new li(y,r))}checkSubtype(r,d){const y=gl(r,d);return y&&this.error(y),y}}class je{constructor(r,d){this.type=d.type,this.bindings=[].concat(r),this.result=d}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const d of this.bindings)r(d[1]);r(this.result)}static parse(r,d){if(r.length<4)return d.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const y=[];for(let C=1;C<r.length-1;C+=2){const M=r[C];if(typeof M!="string")return d.error(`Expected string, but found ${typeof M} instead.`,C);if(/[^a-zA-Z0-9_]/.test(M))return d.error("Variable names must contain only alphanumeric characters or '_'.",C);const R=d.parse(r[C+1],C+1);if(!R)return null;y.push([M,R])}const v=d.parse(r[r.length-1],r.length-1,d.expectedType,y);return v?new je(y,v):null}outputDefined(){return this.result.outputDefined()}}class Ne{constructor(r,d){this.type=d.type,this.name=r,this.boundExpression=d}static parse(r,d){if(r.length!==2||typeof r[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const y=r[1];return d.scope.has(y)?new Ne(y,d.scope.get(y)):d.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class ht{constructor(r,d,y){this.type=r,this.index=d,this.input=y}static parse(r,d){if(r.length!==3)return d.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const y=d.parse(r[1],1,tn),v=d.parse(r[2],2,ts(d.expectedType||Vn));return y&&v?new ht(v.type.itemType,y,v):null}evaluate(r){const d=this.index.evaluate(r),y=this.input.evaluate(r);if(d<0)throw new vi(`Array index out of bounds: ${d} < 0.`);if(d>=y.length)throw new vi(`Array index out of bounds: ${d} > ${y.length-1}.`);if(d!==Math.floor(d))throw new vi(`Array index must be an integer, but found ${d} instead.`);return y[d]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class gt{constructor(r,d){this.type=On,this.needle=r,this.haystack=d}static parse(r,d){if(r.length!==3)return d.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const y=d.parse(r[1],1,Vn),v=d.parse(r[2],2,Vn);return y&&v?Ea(y.type,[On,ei,tn,ds,Vn])?new gt(y,v):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ti(y.type)} instead`):null}evaluate(r){const d=this.needle.evaluate(r),y=this.haystack.evaluate(r);if(!y)return!1;if(!Ha(d,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${ti(Zi(d))} instead.`);if(!Ha(y,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${ti(Zi(y))} instead.`);return y.indexOf(d)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Ct{constructor(r,d,y){this.type=tn,this.needle=r,this.haystack=d,this.fromIndex=y}static parse(r,d){if(r.length<=2||r.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const y=d.parse(r[1],1,Vn),v=d.parse(r[2],2,Vn);if(!y||!v)return null;if(!Ea(y.type,[On,ei,tn,ds,Vn]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ti(y.type)} instead`);if(r.length===4){const C=d.parse(r[3],3,tn);return C?new Ct(y,v,C):null}return new Ct(y,v)}evaluate(r){const d=this.needle.evaluate(r),y=this.haystack.evaluate(r);if(!Ha(d,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${ti(Zi(d))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(r)),Ha(y,["string"])){const C=y.indexOf(d,v);return C===-1?-1:[...y.slice(0,C)].length}if(Ha(y,["array"]))return y.indexOf(d,v);throw new vi(`Expected second argument to be of type array or string, but found ${ti(Zi(y))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class un{constructor(r,d,y,v,C,M){this.inputType=r,this.type=d,this.input=y,this.cases=v,this.outputs=C,this.otherwise=M}static parse(r,d){if(r.length<5)return d.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return d.error("Expected an even number of arguments.");let y,v;d.expectedType&&d.expectedType.kind!=="value"&&(v=d.expectedType);const C={},M=[];for(let V=2;V<r.length-1;V+=2){let H=r[V];const X=r[V+1];Array.isArray(H)||(H=[H]);const ie=d.concat(V);if(H.length===0)return ie.error("Expected at least one branch label.");for(const de of H){if(typeof de!="number"&&typeof de!="string")return ie.error("Branch labels must be numbers or strings.");if(typeof de=="number"&&Math.abs(de)>Number.MAX_SAFE_INTEGER)return ie.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof de=="number"&&Math.floor(de)!==de)return ie.error("Numeric branch labels must be integer values.");if(y){if(ie.checkSubtype(y,Zi(de)))return null}else y=Zi(de);if(C[String(de)]!==void 0)return ie.error("Branch labels must be unique.");C[String(de)]=M.length}const oe=d.parse(X,V,v);if(!oe)return null;v=v||oe.type,M.push(oe)}const R=d.parse(r[1],1,Vn);if(!R)return null;const I=d.parse(r[r.length-1],r.length-1,v);return I?R.type.kind!=="value"&&d.concat(1).checkSubtype(y,R.type)?null:new un(y,v,R,C,M,I):null}evaluate(r){const d=this.input.evaluate(r);return(Zi(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class kn{constructor(r,d,y){this.type=r,this.branches=d,this.otherwise=y}static parse(r,d){if(r.length<4)return d.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return d.error("Expected an odd number of arguments.");let y;d.expectedType&&d.expectedType.kind!=="value"&&(y=d.expectedType);const v=[];for(let M=1;M<r.length-1;M+=2){const R=d.parse(r[M],M,On);if(!R)return null;const I=d.parse(r[M+1],M+1,y);if(!I)return null;v.push([R,I]),y=y||I.type}const C=d.parse(r[r.length-1],r.length-1,y);if(!C)return null;if(!y)throw new Error("Can't infer output type");return new kn(y,v,C)}evaluate(r){for(const[d,y]of this.branches)if(d.evaluate(r))return y.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[d,y]of this.branches)r(d),r(y);r(this.otherwise)}outputDefined(){return this.branches.every(([r,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class mn{constructor(r,d,y,v){this.type=r,this.input=d,this.beginIndex=y,this.endIndex=v}static parse(r,d){if(r.length<=2||r.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const y=d.parse(r[1],1,Vn),v=d.parse(r[2],2,tn);if(!y||!v)return null;if(!Ea(y.type,[ts(Vn),ei,Vn]))return d.error(`Expected first argument to be of type array or string, but found ${ti(y.type)} instead`);if(r.length===4){const C=d.parse(r[3],3,tn);return C?new mn(y.type,y,v,C):null}return new mn(y.type,y,v)}evaluate(r){const d=this.input.evaluate(r),y=this.beginIndex.evaluate(r);let v;if(this.endIndex&&(v=this.endIndex.evaluate(r)),Ha(d,["string"]))return[...d].slice(y,v).join("");if(Ha(d,["array"]))return d.slice(y,v);throw new vi(`Expected first argument to be of type array or string, but found ${ti(Zi(d))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Cn(f,r){const d=f.length-1;let y,v,C=0,M=d,R=0;for(;C<=M;)if(R=Math.floor((C+M)/2),y=f[R],v=f[R+1],y<=r){if(R===d||r<v)return R;C=R+1}else{if(!(y>r))throw new vi("Input is not a number.");M=R-1}return 0}class Un{constructor(r,d,y){this.type=r,this.input=d,this.labels=[],this.outputs=[];for(const[v,C]of y)this.labels.push(v),this.outputs.push(C)}static parse(r,d){if(r.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return d.error("Expected an even number of arguments.");const y=d.parse(r[1],1,tn);if(!y)return null;const v=[];let C=null;d.expectedType&&d.expectedType.kind!=="value"&&(C=d.expectedType);for(let M=1;M<r.length;M+=2){const R=M===1?-1/0:r[M],I=r[M+1],V=M,H=M+1;if(typeof R!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(v.length&&v[v.length-1][0]>=R)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const X=d.parse(I,H,C);if(!X)return null;C=C||X.type,v.push([R,X])}return new Un(C,y,v)}evaluate(r){const d=this.labels,y=this.outputs;if(d.length===1)return y[0].evaluate(r);const v=this.input.evaluate(r);if(v<=d[0])return y[0].evaluate(r);const C=d.length;return v>=d[C-1]?y[C-1].evaluate(r):y[Cn(d,v)].evaluate(r)}eachChild(r){r(this.input);for(const d of this.outputs)r(d)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function oi(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var ri,Gn,Dn=function(){if(Gn)return ri;function f(r,d,y,v){this.cx=3*r,this.bx=3*(y-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(v-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=d,this.p2x=y,this.p2y=v}return Gn=1,ri=f,f.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,d){if(d===void 0&&(d=1e-6),r<0)return 0;if(r>1)return 1;for(var y=r,v=0;v<8;v++){var C=this.sampleCurveX(y)-r;if(Math.abs(C)<d)return y;var M=this.sampleCurveDerivativeX(y);if(Math.abs(M)<1e-6)break;y-=C/M}var R=0,I=1;for(y=r,v=0;v<20&&(C=this.sampleCurveX(y),!(Math.abs(C-r)<d));v++)r>C?R=y:I=y,y=.5*(I-R)+R;return y},solve:function(r,d){return this.sampleCurveY(this.solveCurveX(r,d))}},ri}(),pr=oi(Dn);class Si{constructor(r,d,y,v,C){this.type=r,this.operator=d,this.interpolation=y,this.input=v,this.labels=[],this.outputs=[];for(const[M,R]of C)this.labels.push(M),this.outputs.push(R)}static interpolationFactor(r,d,y,v){let C=0;if(r.name==="exponential")C=ns(d,r.base,y,v);else if(r.name==="linear")C=ns(d,1,y,v);else if(r.name==="cubic-bezier"){const M=r.controlPoints;C=new pr(M[0],M[1],M[2],M[3]).solve(ns(d,1,y,v))}return C}static parse(r,d){let[y,v,C,...M]=r;if(!Array.isArray(v)||v.length===0)return d.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const V=v[1];if(typeof V!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:V}}else{if(v[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const V=v.slice(1);if(V.length!==4||V.some(H=>typeof H!="number"||H<0||H>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:V}}}if(r.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(C=d.parse(C,2,tn),!C)return null;const R=[];let I=null;y!=="interpolate-hcl"&&y!=="interpolate-lab"||d.expectedType==hs?d.expectedType&&d.expectedType.kind!=="value"&&(I=d.expectedType):I=ws;for(let V=0;V<M.length;V+=2){const H=M[V],X=M[V+1],ie=V+3,oe=V+4;if(typeof H!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(R.length&&R[R.length-1][0]>=H)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ie);const de=d.parse(X,oe,I);if(!de)return null;I=I||de.type,R.push([H,de])}return ha(I,tn)||ha(I,Ii)||ha(I,ws)||ha(I,da)||ha(I,Qr)||ha(I,hs)||ha(I,Di)||ha(I,ts(tn))?new Si(I,y,v,C,R):d.error(`Type ${ti(I)} is not interpolatable.`)}evaluate(r){const d=this.labels,y=this.outputs;if(d.length===1)return y[0].evaluate(r);const v=this.input.evaluate(r);if(v<=d[0])return y[0].evaluate(r);const C=d.length;if(v>=d[C-1])return y[C-1].evaluate(r);const M=Cn(d,v),R=Si.interpolationFactor(this.interpolation,v,d[M],d[M+1]),I=y[M].evaluate(r),V=y[M+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Sr(I,V,R);case"color":return ui.interpolate(I,V,R);case"padding":return Ns.interpolate(I,V,R);case"colorArray":return Ss.interpolate(I,V,R);case"numberArray":return Fs.interpolate(I,V,R);case"variableAnchorOffsetCollection":return Zs.interpolate(I,V,R);case"array":return Ga(I,V,R);case"projectionDefinition":return rs.interpolate(I,V,R)}case"interpolate-hcl":switch(this.type.kind){case"color":return ui.interpolate(I,V,R,"hcl");case"colorArray":return Ss.interpolate(I,V,R,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ui.interpolate(I,V,R,"lab");case"colorArray":return Ss.interpolate(I,V,R,"lab")}}}eachChild(r){r(this.input);for(const d of this.outputs)r(d)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function ns(f,r,d,y){const v=y-d,C=f-d;return v===0?0:r===1?C/v:(Math.pow(r,C)-1)/(Math.pow(r,v)-1)}const Ps={color:ui.interpolate,number:Sr,padding:Ns.interpolate,numberArray:Fs.interpolate,colorArray:Ss.interpolate,variableAnchorOffsetCollection:Zs.interpolate,array:Ga};class Vo{constructor(r,d){this.type=r,this.args=d}static parse(r,d){if(r.length<2)return d.error("Expected at least one argument.");let y=null;const v=d.expectedType;v&&v.kind!=="value"&&(y=v);const C=[];for(const R of r.slice(1)){const I=d.parse(R,1+C.length,y,void 0,{typeAnnotation:"omit"});if(!I)return null;y=y||I.type,C.push(I)}if(!y)throw new Error("No output type");const M=v&&C.some(R=>gl(v,R.type));return new Vo(M?Vn:y,C)}evaluate(r){let d,y=null,v=0;for(const C of this.args)if(v++,y=C.evaluate(r),y&&y instanceof ys&&!y.available&&(d||(d=y.name),y=null,v===this.args.length&&(y=d)),y!==null)break;return y}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Wa(f,r){return f==="=="||f==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Za(f,r,d,y){return y.compare(r,d)===0}function fa(f,r,d){const y=f!=="=="&&f!=="!=";return class hD{constructor(C,M,R){this.type=On,this.lhs=C,this.rhs=M,this.collator=R,this.hasUntypedArgument=C.type.kind==="value"||M.type.kind==="value"}static parse(C,M){if(C.length!==3&&C.length!==4)return M.error("Expected two or three arguments.");const R=C[0];let I=M.parse(C[1],1,Vn);if(!I)return null;if(!Wa(R,I.type))return M.concat(1).error(`"${R}" comparisons are not supported for type '${ti(I.type)}'.`);let V=M.parse(C[2],2,Vn);if(!V)return null;if(!Wa(R,V.type))return M.concat(2).error(`"${R}" comparisons are not supported for type '${ti(V.type)}'.`);if(I.type.kind!==V.type.kind&&I.type.kind!=="value"&&V.type.kind!=="value")return M.error(`Cannot compare types '${ti(I.type)}' and '${ti(V.type)}'.`);y&&(I.type.kind==="value"&&V.type.kind!=="value"?I=new Xn(V.type,[I]):I.type.kind!=="value"&&V.type.kind==="value"&&(V=new Xn(I.type,[V])));let H=null;if(C.length===4){if(I.type.kind!=="string"&&V.type.kind!=="string"&&I.type.kind!=="value"&&V.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(H=M.parse(C[3],3,Kr),!H)return null}return new hD(I,V,H)}evaluate(C){const M=this.lhs.evaluate(C),R=this.rhs.evaluate(C);if(y&&this.hasUntypedArgument){const I=Zi(M),V=Zi(R);if(I.kind!==V.kind||I.kind!=="string"&&I.kind!=="number")throw new vi(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${I.kind}, ${V.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const I=Zi(M),V=Zi(R);if(I.kind!=="string"||V.kind!=="string")return r(C,M,R)}return this.collator?d(C,M,R,this.collator.evaluate(C)):r(C,M,R)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const zr=fa("==",function(f,r,d){return r===d},Za),Td=fa("!=",function(f,r,d){return r!==d},function(f,r,d,y){return!Za(0,r,d,y)}),Dh=fa("<",function(f,r,d){return r<d},function(f,r,d,y){return y.compare(r,d)<0}),Oy=fa(">",function(f,r,d){return r>d},function(f,r,d,y){return y.compare(r,d)>0}),tp=fa("<=",function(f,r,d){return r<=d},function(f,r,d,y){return y.compare(r,d)<=0}),Fy=fa(">=",function(f,r,d){return r>=d},function(f,r,d,y){return y.compare(r,d)>=0});class zh{constructor(r,d,y){this.type=Kr,this.locale=y,this.caseSensitive=r,this.diacriticSensitive=d}static parse(r,d){if(r.length!==2)return d.error("Expected one argument.");const y=r[1];if(typeof y!="object"||Array.isArray(y))return d.error("Collator options argument must be an object.");const v=d.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,On);if(!v)return null;const C=d.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,On);if(!C)return null;let M=null;return y.locale&&(M=d.parse(y.locale,1,ei),!M)?null:new zh(v,C,M)}evaluate(r){return new So(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class np{constructor(r,d,y,v,C){this.type=ei,this.number=r,this.locale=d,this.currency=y,this.minFractionDigits=v,this.maxFractionDigits=C}static parse(r,d){if(r.length!==3)return d.error("Expected two arguments.");const y=d.parse(r[1],1,tn);if(!y)return null;const v=r[2];if(typeof v!="object"||Array.isArray(v))return d.error("NumberFormat options argument must be an object.");let C=null;if(v.locale&&(C=d.parse(v.locale,1,ei),!C))return null;let M=null;if(v.currency&&(M=d.parse(v.currency,1,ei),!M))return null;let R=null;if(v["min-fraction-digits"]&&(R=d.parse(v["min-fraction-digits"],1,tn),!R))return null;let I=null;return v["max-fraction-digits"]&&(I=d.parse(v["max-fraction-digits"],1,tn),!I)?null:new np(y,C,M,R,I)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Ih{constructor(r){this.type=Rr,this.sections=r}static parse(r,d){if(r.length<2)return d.error("Expected at least one argument.");const y=r[1];if(!Array.isArray(y)&&typeof y=="object")return d.error("First argument must be an image or text section.");const v=[];let C=!1;for(let M=1;M<=r.length-1;++M){const R=r[M];if(C&&typeof R=="object"&&!Array.isArray(R)){C=!1;let I=null;if(R["font-scale"]&&(I=d.parse(R["font-scale"],1,tn),!I))return null;let V=null;if(R["text-font"]&&(V=d.parse(R["text-font"],1,ts(ei)),!V))return null;let H=null;if(R["text-color"]&&(H=d.parse(R["text-color"],1,ws),!H))return null;let X=null;if(R["vertical-align"]){if(typeof R["vertical-align"]=="string"&&!Ma.includes(R["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${R["vertical-align"]}' instead.`);if(X=d.parse(R["vertical-align"],1,ei),!X)return null}const ie=v[v.length-1];ie.scale=I,ie.font=V,ie.textColor=H,ie.verticalAlign=X}else{const I=d.parse(r[M],1,Vn);if(!I)return null;const V=I.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,v.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ih(v)}evaluate(r){return new fr(this.sections.map(d=>{const y=d.content.evaluate(r);return Zi(y)===ka?new Na("",y,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(r):null):new Na(di(y),null,d.scale?d.scale.evaluate(r):null,d.font?d.font.evaluate(r).join(","):null,d.textColor?d.textColor.evaluate(r):null,d.verticalAlign?d.verticalAlign.evaluate(r):null)}))}eachChild(r){for(const d of this.sections)r(d.content),d.scale&&r(d.scale),d.font&&r(d.font),d.textColor&&r(d.textColor),d.verticalAlign&&r(d.verticalAlign)}outputDefined(){return!1}}class Ul{constructor(r){this.type=ka,this.input=r}static parse(r,d){if(r.length!==2)return d.error("Expected two arguments.");const y=d.parse(r[1],1,ei);return y?new Ul(y):d.error("No image name provided.")}evaluate(r){const d=this.input.evaluate(r),y=ys.fromString(d);return y&&r.availableImages&&(y.available=r.availableImages.indexOf(d)>-1),y}eachChild(r){r(this.input)}outputDefined(){return!1}}class Cc{constructor(r){this.type=tn,this.input=r}static parse(r,d){if(r.length!==2)return d.error(`Expected 1 argument, but found ${r.length-1} instead.`);const y=d.parse(r[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${ti(y.type)} instead.`):new Cc(y):null}evaluate(r){const d=this.input.evaluate(r);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new vi(`Expected value to be of type string or array, but found ${ti(Zi(d))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Co=8192;function ip(f,r){const d=(180+f[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,v=Math.pow(2,r.z);return[Math.round(d*v*Co),Math.round(y*v*Co)]}function Oh(f,r){const d=Math.pow(2,r.z);return[(v=(f[0]/Co+r.x)/d,360*v-180),(y=(f[1]/Co+r.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,v}function Tc(f,r){f[0]=Math.min(f[0],r[0]),f[1]=Math.min(f[1],r[1]),f[2]=Math.max(f[2],r[0]),f[3]=Math.max(f[3],r[1])}function Mu(f,r){return!(f[0]<=r[0]||f[2]>=r[2]||f[1]<=r[1]||f[3]>=r[3])}function Fm(f,r,d){const y=f[0]-r[0],v=f[1]-r[1],C=f[0]-d[0],M=f[1]-d[1];return y*M-C*v==0&&y*C<=0&&v*M<=0}function bl(f,r,d,y){return(v=[y[0]-d[0],y[1]-d[1]])[0]*(C=[r[0]-f[0],r[1]-f[1]])[1]-v[1]*C[0]!=0&&!(!Au(f,r,d,y)||!Au(d,y,f,r));var v,C}function Ly(f,r,d){for(const y of d)for(let v=0;v<y.length-1;++v)if(bl(f,r,y[v],y[v+1]))return!0;return!1}function Nu(f,r,d=!1){let y=!1;for(const R of r)for(let I=0;I<R.length-1;I++){if(Fm(f,R[I],R[I+1]))return d;(C=R[I])[1]>(v=f)[1]!=(M=R[I+1])[1]>v[1]&&v[0]<(M[0]-C[0])*(v[1]-C[1])/(M[1]-C[1])+C[0]&&(y=!y)}var v,C,M;return y}function Lm(f,r){for(const d of r)if(Nu(f,d))return!0;return!1}function Fh(f,r){for(const d of f)if(!Nu(d,r))return!1;for(let d=0;d<f.length-1;++d)if(Ly(f[d],f[d+1],r))return!1;return!0}function sp(f,r){for(const d of r)if(Fh(f,d))return!0;return!1}function Au(f,r,d,y){const v=y[0]-d[0],C=y[1]-d[1],M=(f[0]-d[0])*C-v*(f[1]-d[1]),R=(r[0]-d[0])*C-v*(r[1]-d[1]);return M>0&&R<0||M<0&&R>0}function kc(f,r,d){const y=[];for(let v=0;v<f.length;v++){const C=[];for(let M=0;M<f[v].length;M++){const R=ip(f[v][M],d);Tc(r,R),C.push(R)}y.push(C)}return y}function Bm(f,r,d){const y=[];for(let v=0;v<f.length;v++){const C=kc(f[v],r,d);y.push(C)}return y}function kd(f,r,d,y){if(f[0]<d[0]||f[0]>d[2]){const v=.5*y;let C=f[0]-d[0]>v?-y:d[0]-f[0]>v?y:0;C===0&&(C=f[0]-d[2]>v?-y:d[2]-f[0]>v?y:0),f[0]+=C}Tc(r,f)}function Pu(f,r,d,y){const v=Math.pow(2,y.z)*Co,C=[y.x*Co,y.y*Co],M=[];for(const R of f)for(const I of R){const V=[I.x+C[0],I.y+C[1]];kd(V,r,d,v),M.push(V)}return M}function rp(f,r,d,y){const v=Math.pow(2,y.z)*Co,C=[y.x*Co,y.y*Co],M=[];for(const I of f){const V=[];for(const H of I){const X=[H.x+C[0],H.y+C[1]];Tc(r,X),V.push(X)}M.push(V)}if(r[2]-r[0]<=v/2){(R=r)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const I of M)for(const V of I)kd(V,r,d,v)}var R;return M}class vl{constructor(r,d){this.type=On,this.geojson=r,this.geometries=d}static parse(r,d){if(r.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Mi(r[1])){const y=r[1];if(y.type==="FeatureCollection"){const v=[];for(const C of y.features){const{type:M,coordinates:R}=C.geometry;M==="Polygon"&&v.push(R),M==="MultiPolygon"&&v.push(...R)}if(v.length)return new vl(y,{type:"MultiPolygon",coordinates:v})}else if(y.type==="Feature"){const v=y.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new vl(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new vl(y,y)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(d,y){const v=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],M=d.canonicalID();if(y.type==="Polygon"){const R=kc(y.coordinates,C,M),I=Pu(d.geometry(),v,C,M);if(!Mu(v,C))return!1;for(const V of I)if(!Nu(V,R))return!1}if(y.type==="MultiPolygon"){const R=Bm(y.coordinates,C,M),I=Pu(d.geometry(),v,C,M);if(!Mu(v,C))return!1;for(const V of I)if(!Lm(V,R))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(d,y){const v=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],M=d.canonicalID();if(y.type==="Polygon"){const R=kc(y.coordinates,C,M),I=rp(d.geometry(),v,C,M);if(!Mu(v,C))return!1;for(const V of I)if(!Fh(V,R))return!1}if(y.type==="MultiPolygon"){const R=Bm(y.coordinates,C,M),I=rp(d.geometry(),v,C,M);if(!Mu(v,C))return!1;for(const V of I)if(!sp(V,R))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Lh=class{constructor(f=[],r=(d,y)=>d<y?-1:d>y?1:0){if(this.data=f,this.length=this.data.length,this.compare=r,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:r,compare:d}=this,y=r[f];for(;f>0;){const v=f-1>>1,C=r[v];if(d(y,C)>=0)break;r[f]=C,f=v}r[f]=y}_down(f){const{data:r,compare:d}=this,y=this.length>>1,v=r[f];for(;f<y;){let C=1+(f<<1);const M=C+1;if(M<this.length&&d(r[M],r[C])<0&&(C=M),d(r[C],v)>=0)break;r[f]=r[C],f=C}r[f]=v}};function ap(f,r,d=0,y=f.length-1,v=op){for(;y>d;){if(y-d>600){const I=y-d+1,V=r-d+1,H=Math.log(I),X=.5*Math.exp(2*H/3),ie=.5*Math.sqrt(H*X*(I-X)/I)*(V-I/2<0?-1:1);ap(f,r,Math.max(d,Math.floor(r-V*X/I+ie)),Math.min(y,Math.floor(r+(I-V)*X/I+ie)),v)}const C=f[r];let M=d,R=y;for($l(f,d,r),v(f[y],C)>0&&$l(f,d,y);M<R;){for($l(f,M,R),M++,R--;v(f[M],C)<0;)M++;for(;v(f[R],C)>0;)R--}v(f[d],C)===0?$l(f,d,R):(R++,$l(f,R,y)),R<=r&&(d=R+1),r<=R&&(y=R-1)}}function $l(f,r,d){const y=f[r];f[r]=f[d],f[d]=y}function op(f,r){return f<r?-1:f>r?1:0}function Bh(f,r){if(f.length<=1)return[f];const d=[];let y,v;for(const C of f){const M=Vm(C);M!==0&&(C.area=Math.abs(M),v===void 0&&(v=M<0),v===M<0?(y&&d.push(y),y=[C]):y.push(C))}if(y&&d.push(y),r>1)for(let C=0;C<d.length;C++)d[C].length<=r||(ap(d[C],r,1,d[C].length-1,By),d[C]=d[C].slice(0,r));return d}function By(f,r){return r.area-f.area}function Vm(f){let r=0;for(let d,y,v=0,C=f.length,M=C-1;v<C;M=v++)d=f[v],y=f[M],r+=(y.x-d.x)*(d.y+y.y);return r}const lp=1/298.257223563,Um=lp*(2-lp),pa=Math.PI/180;class Ec{constructor(r){const d=6378.137*pa*1e3,y=Math.cos(r*pa),v=1/(1-Um*(1-y*y)),C=Math.sqrt(v);this.kx=d*C*y,this.ky=d*C*v*(1-Um)}distance(r,d){const y=this.wrap(r[0]-d[0])*this.kx,v=(r[1]-d[1])*this.ky;return Math.sqrt(y*y+v*v)}pointOnLine(r,d){let y,v,C,M,R=1/0;for(let I=0;I<r.length-1;I++){let V=r[I][0],H=r[I][1],X=this.wrap(r[I+1][0]-V)*this.kx,ie=(r[I+1][1]-H)*this.ky,oe=0;X===0&&ie===0||(oe=(this.wrap(d[0]-V)*this.kx*X+(d[1]-H)*this.ky*ie)/(X*X+ie*ie),oe>1?(V=r[I+1][0],H=r[I+1][1]):oe>0&&(V+=X/this.kx*oe,H+=ie/this.ky*oe)),X=this.wrap(d[0]-V)*this.kx,ie=(d[1]-H)*this.ky;const de=X*X+ie*ie;de<R&&(R=de,y=V,v=H,C=I,M=oe)}return{point:[y,v],index:C,t:Math.max(0,Math.min(1,M))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Vh(f,r){return r[0]-f[0]}function Ed(f){return f[1]-f[0]+1}function Uo(f,r){return f[1]>=f[0]&&f[1]<r}function Uh(f,r){if(f[0]>f[1])return[null,null];const d=Ed(f);if(r){if(d===2)return[f,null];const v=Math.floor(d/2);return[[f[0],f[0]+v],[f[0]+v,f[1]]]}if(d===1)return[f,null];const y=Math.floor(d/2)-1;return[[f[0],f[0]+y],[f[0]+y+1,f[1]]]}function Md(f,r){if(!Uo(r,f.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let y=r[0];y<=r[1];++y)Tc(d,f[y]);return d}function zi(f){const r=[1/0,1/0,-1/0,-1/0];for(const d of f)for(const y of d)Tc(r,y);return r}function Mc(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Nd(f,r,d){if(!Mc(f)||!Mc(r))return NaN;let y=0,v=0;return f[2]<r[0]&&(y=r[0]-f[2]),f[0]>r[2]&&(y=f[0]-r[2]),f[1]>r[3]&&(v=f[1]-r[3]),f[3]<r[1]&&(v=r[1]-f[3]),d.distance([0,0],[y,v])}function To(f,r,d){const y=d.pointOnLine(r,f);return d.distance(f,y.point)}function Ad(f,r,d,y,v){const C=Math.min(To(f,[d,y],v),To(r,[d,y],v)),M=Math.min(To(d,[f,r],v),To(y,[f,r],v));return Math.min(C,M)}function $m(f,r,d,y,v){if(!Uo(r,f.length)||!Uo(y,d.length))return 1/0;let C=1/0;for(let M=r[0];M<r[1];++M){const R=f[M],I=f[M+1];for(let V=y[0];V<y[1];++V){const H=d[V],X=d[V+1];if(bl(R,I,H,X))return 0;C=Math.min(C,Ad(R,I,H,X,v))}}return C}function Nc(f,r,d,y,v){if(!Uo(r,f.length)||!Uo(y,d.length))return NaN;let C=1/0;for(let M=r[0];M<=r[1];++M)for(let R=y[0];R<=y[1];++R)if(C=Math.min(C,v.distance(f[M],d[R])),C===0)return C;return C}function Ru(f,r,d){if(Nu(f,r,!0))return 0;let y=1/0;for(const v of r){const C=v[0],M=v[v.length-1];if(C!==M&&(y=Math.min(y,To(f,[M,C],d)),y===0))return y;const R=d.pointOnLine(v,f);if(y=Math.min(y,d.distance(f,R.point)),y===0)return y}return y}function cp(f,r,d,y){if(!Uo(r,f.length))return NaN;for(let C=r[0];C<=r[1];++C)if(Nu(f[C],d,!0))return 0;let v=1/0;for(let C=r[0];C<r[1];++C){const M=f[C],R=f[C+1];for(const I of d)for(let V=0,H=I.length,X=H-1;V<H;X=V++){const ie=I[X],oe=I[V];if(bl(M,R,ie,oe))return 0;v=Math.min(v,Ad(M,R,ie,oe,y))}}return v}function up(f,r){for(const d of f)for(const y of d)if(Nu(y,r,!0))return!0;return!1}function Ac(f,r,d,y=1/0){const v=zi(f),C=zi(r);if(y!==1/0&&Nd(v,C,d)>=y)return y;if(Mu(v,C)){if(up(f,r))return 0}else if(up(r,f))return 0;let M=1/0;for(const R of f)for(let I=0,V=R.length,H=V-1;I<V;H=I++){const X=R[H],ie=R[I];for(const oe of r)for(let de=0,xe=oe.length,ve=xe-1;de<xe;ve=de++){const Re=oe[ve],at=oe[de];if(bl(X,ie,Re,at))return 0;M=Math.min(M,Ad(X,ie,Re,at,d))}}return M}function dp(f,r,d,y,v,C){if(!C)return;const M=Nd(Md(y,C),v,d);M<r&&f.push([M,C,[0,0]])}function Pd(f,r,d,y,v,C,M){if(!C||!M)return;const R=Nd(Md(y,C),Md(v,M),d);R<r&&f.push([R,C,M])}function Rd(f,r,d,y,v=1/0){let C=Math.min(y.distance(f[0],d[0][0]),v);if(C===0)return C;const M=new Lh([[0,[0,f.length-1],[0,0]]],Vh),R=zi(d);for(;M.length>0;){const I=M.pop();if(I[0]>=C)continue;const V=I[1],H=r?50:100;if(Ed(V)<=H){if(!Uo(V,f.length))return NaN;if(r){const X=cp(f,V,d,y);if(isNaN(X)||X===0)return X;C=Math.min(C,X)}else for(let X=V[0];X<=V[1];++X){const ie=Ru(f[X],d,y);if(C=Math.min(C,ie),C===0)return 0}}else{const X=Uh(V,r);dp(M,C,y,f,R,X[0]),dp(M,C,y,f,R,X[1])}}return C}function $h(f,r,d,y,v,C=1/0){let M=Math.min(C,v.distance(f[0],d[0]));if(M===0)return M;const R=new Lh([[0,[0,f.length-1],[0,d.length-1]]],Vh);for(;R.length>0;){const I=R.pop();if(I[0]>=M)continue;const V=I[1],H=I[2],X=r?50:100,ie=y?50:100;if(Ed(V)<=X&&Ed(H)<=ie){if(!Uo(V,f.length)&&Uo(H,d.length))return NaN;let oe;if(r&&y)oe=$m(f,V,d,H,v),M=Math.min(M,oe);else if(r&&!y){const de=f.slice(V[0],V[1]+1);for(let xe=H[0];xe<=H[1];++xe)if(oe=To(d[xe],de,v),M=Math.min(M,oe),M===0)return M}else if(!r&&y){const de=d.slice(H[0],H[1]+1);for(let xe=V[0];xe<=V[1];++xe)if(oe=To(f[xe],de,v),M=Math.min(M,oe),M===0)return M}else oe=Nc(f,V,d,H,v),M=Math.min(M,oe)}else{const oe=Uh(V,r),de=Uh(H,y);Pd(R,M,v,f,d,oe[0],de[0]),Pd(R,M,v,f,d,oe[0],de[1]),Pd(R,M,v,f,d,oe[1],de[0]),Pd(R,M,v,f,d,oe[1],de[1])}}return M}function hp(f){return f.type==="MultiPolygon"?f.coordinates.map(r=>({type:"Polygon",coordinates:r})):f.type==="MultiLineString"?f.coordinates.map(r=>({type:"LineString",coordinates:r})):f.type==="MultiPoint"?f.coordinates.map(r=>({type:"Point",coordinates:r})):[f]}class Pc{constructor(r,d){this.type=tn,this.geojson=r,this.geometries=d}static parse(r,d){if(r.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Mi(r[1])){const y=r[1];if(y.type==="FeatureCollection")return new Pc(y,y.features.map(v=>hp(v.geometry)).flat());if(y.type==="Feature")return new Pc(y,hp(y.geometry));if("type"in y&&"coordinates"in y)return new Pc(y,hp(y))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(d,y){const v=d.geometry(),C=v.flat().map(I=>Oh([I.x,I.y],d.canonical));if(v.length===0)return NaN;const M=new Ec(C[0][1]);let R=1/0;for(const I of y){switch(I.type){case"Point":R=Math.min(R,$h(C,!1,[I.coordinates],!1,M,R));break;case"LineString":R=Math.min(R,$h(C,!1,I.coordinates,!0,M,R));break;case"Polygon":R=Math.min(R,Rd(C,!1,I.coordinates,M,R))}if(R===0)return R}return R}(r,this.geometries);if(r.geometryType()==="LineString")return function(d,y){const v=d.geometry(),C=v.flat().map(I=>Oh([I.x,I.y],d.canonical));if(v.length===0)return NaN;const M=new Ec(C[0][1]);let R=1/0;for(const I of y){switch(I.type){case"Point":R=Math.min(R,$h(C,!0,[I.coordinates],!1,M,R));break;case"LineString":R=Math.min(R,$h(C,!0,I.coordinates,!0,M,R));break;case"Polygon":R=Math.min(R,Rd(C,!0,I.coordinates,M,R))}if(R===0)return R}return R}(r,this.geometries);if(r.geometryType()==="Polygon")return function(d,y){const v=d.geometry();if(v.length===0||v[0].length===0)return NaN;const C=Bh(v,0).map(I=>I.map(V=>V.map(H=>Oh([H.x,H.y],d.canonical)))),M=new Ec(C[0][0][0][1]);let R=1/0;for(const I of y)for(const V of C){switch(I.type){case"Point":R=Math.min(R,Rd([I.coordinates],!1,V,M,R));break;case"LineString":R=Math.min(R,Rd(I.coordinates,!0,V,M,R));break;case"Polygon":R=Math.min(R,Ac(V,I.coordinates,M,R))}if(R===0)return R}return R}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Du{constructor(r){this.type=Vn,this.key=r}static parse(r,d){if(r.length!==2)return d.error(`Expected 1 argument, but found ${r.length-1} instead.`);const y=r[1];return y==null?d.error("Global state property must be defined."):typeof y!="string"?d.error(`Global state property must be string, but found ${typeof r[1]} instead.`):new Du(y)}evaluate(r){var d;const y=(d=r.globals)===null||d===void 0?void 0:d.globalState;return y&&Object.keys(y).length!==0?qa(y,this.key):null}eachChild(){}outputDefined(){return!1}}const Rc={"==":zr,"!=":Td,">":Oy,"<":Dh,">=":Fy,"<=":tp,array:Xn,at:ht,boolean:Xn,case:kn,coalesce:Vo,collator:zh,format:Ih,image:Ul,in:gt,"index-of":Ct,interpolate:Si,"interpolate-hcl":Si,"interpolate-lab":Si,length:Cc,let:je,literal:Kn,match:un,number:Xn,"number-format":np,object:Xn,slice:mn,step:Un,string:Xn,"to-boolean":As,"to-color":As,"to-number":As,"to-string":As,var:Ne,within:vl,distance:Pc,"global-state":Du};class ma{constructor(r,d,y,v){this.name=r,this.type=d,this._evaluate=y,this.args=v}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,d){const y=r[0],v=ma.definitions[y];if(!v)return d.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(v)?v[0]:v.type,M=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,R=M.filter(([V])=>!Array.isArray(V)||V.length===r.length-1);let I=null;for(const[V,H]of R){I=new me(d.registry,wl,d.path,null,d.scope);const X=[];let ie=!1;for(let oe=1;oe<r.length;oe++){const de=r[oe],xe=Array.isArray(V)?V[oe-1]:V.type,ve=I.parse(de,1+X.length,xe);if(!ve){ie=!0;break}X.push(ve)}if(!ie)if(Array.isArray(V)&&V.length!==X.length)I.error(`Expected ${V.length} arguments, but found ${X.length} instead.`);else{for(let oe=0;oe<X.length;oe++){const de=Array.isArray(V)?V[oe]:V.type,xe=X[oe];I.concat(oe+1).checkSubtype(de,xe.type)}if(I.errors.length===0)return new ma(y,C,H,X)}}if(R.length===1)d.errors.push(...I.errors);else{const V=(R.length?R:M).map(([X])=>{return ie=X,Array.isArray(ie)?`(${ie.map(ti).join(", ")})`:`(${ti(ie.type)}...)`;var ie}).join(" | "),H=[];for(let X=1;X<r.length;X++){const ie=d.parse(r[X],1+H.length);if(!ie)return null;H.push(ti(ie.type))}d.error(`Expected arguments of type ${V}, but found (${H.join(", ")}) instead.`)}return null}static register(r,d){ma.definitions=d;for(const y in d)r[y]=ma}}function Ya(f,[r,d,y,v]){r=r.evaluate(f),d=d.evaluate(f),y=y.evaluate(f);const C=v?v.evaluate(f):1,M=Aa(r,d,y,C);if(M)throw new vi(M);return new ui(r/255,d/255,y/255,C,!1)}function fp(f,r){return f in r}function ga(f,r){const d=r[f];return d===void 0?null:d}function mr(f){return{type:f}}function wl(f){if(f instanceof Ne)return wl(f.boundExpression);if(f instanceof ma&&f.name==="error"||f instanceof zh||f instanceof vl||f instanceof Pc||f instanceof Du)return!1;const r=f instanceof As||f instanceof Xn;let d=!0;return f.eachChild(y=>{d=r?d&&wl(y):d&&y instanceof Kn}),!!d&&zu(f)&&Dc(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function zu(f){if(f instanceof ma&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof vl||f instanceof Pc)return!1;let r=!0;return f.eachChild(d=>{r&&!zu(d)&&(r=!1)}),r}function Hl(f){if(f instanceof ma&&f.name==="feature-state")return!1;let r=!0;return f.eachChild(d=>{r&&!Hl(d)&&(r=!1)}),r}function Dc(f,r){if(f instanceof ma&&r.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild(y=>{d&&!Dc(y,r)&&(d=!1)}),d}function Hh(f){return{result:"success",value:f}}function ko(f){return{result:"error",value:f}}function zc(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Dd(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function $o(f){return!!f.expression&&f.expression.interpolated}function _i(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function Ir(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Zi(f)===Xr}function pp(f){return f}function Eo(f,r){const d=f.stops&&typeof f.stops[0][0]=="object",y=d||!(d||f.property!==void 0),v=f.type||($o(r)?"exponential":"interval"),C=function(H){switch(H.type){case"color":return ui.parse;case"padding":return Ns.parse;case"numberArray":return Fs.parse;case"colorArray":return Ss.parse;default:return null}}(r);if(C&&((f=Ri({},f)).stops&&(f.stops=f.stops.map(H=>[H[0],C(H[1])])),f.default=C(f.default?f.default:r.default)),f.colorSpace&&(M=f.colorSpace)!=="rgb"&&M!=="hcl"&&M!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var M;const R=function(H){switch(H){case"exponential":return zd;case"interval":return Ho;case"categorical":return qh;case"identity":return mp;default:throw new Error(`Unknown function type "${H}"`)}}(v);let I,V;if(v==="categorical"){I=Object.create(null);for(const H of f.stops)I[H[0]]=H[1];V=typeof f.stops[0][0]}if(d){const H={},X=[];for(let de=0;de<f.stops.length;de++){const xe=f.stops[de],ve=xe[0].zoom;H[ve]===void 0&&(H[ve]={zoom:ve,type:f.type,property:f.property,default:f.default,stops:[]},X.push(ve)),H[ve].stops.push([xe[0].value,xe[1]])}const ie=[];for(const de of X)ie.push([H[de].zoom,Eo(H[de],r)]);const oe={name:"linear"};return{kind:"composite",interpolationType:oe,interpolationFactor:Si.interpolationFactor.bind(void 0,oe),zoomStops:ie.map(de=>de[0]),evaluate:({zoom:de},xe)=>zd({stops:ie,base:f.base},r,de).evaluate(de,xe)}}if(y){const H=v==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:H,interpolationFactor:Si.interpolationFactor.bind(void 0,H),zoomStops:f.stops.map(X=>X[0]),evaluate:({zoom:X})=>R(f,r,X,I,V)}}return{kind:"source",evaluate(H,X){const ie=X&&X.properties?X.properties[f.property]:void 0;return ie===void 0?Iu(f.default,r.default):R(f,r,ie,I,V)}}}function Iu(f,r,d){return f!==void 0?f:r!==void 0?r:d!==void 0?d:void 0}function qh(f,r,d,y,v){return Iu(typeof d===v?y[d]:void 0,f.default,r.default)}function Ho(f,r,d){if(_i(d)!=="number")return Iu(f.default,r.default);const y=f.stops.length;if(y===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[y-1][0])return f.stops[y-1][1];const v=Cn(f.stops.map(C=>C[0]),d);return f.stops[v][1]}function zd(f,r,d){const y=f.base!==void 0?f.base:1;if(_i(d)!=="number")return Iu(f.default,r.default);const v=f.stops.length;if(v===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[v-1][0])return f.stops[v-1][1];const C=Cn(f.stops.map(H=>H[0]),d),M=function(H,X,ie,oe){const de=oe-ie,xe=H-ie;return de===0?0:X===1?xe/de:(Math.pow(X,xe)-1)/(Math.pow(X,de)-1)}(d,y,f.stops[C][0],f.stops[C+1][0]),R=f.stops[C][1],I=f.stops[C+1][1],V=Ps[r.type]||pp;return typeof R.evaluate=="function"?{evaluate(...H){const X=R.evaluate.apply(void 0,H),ie=I.evaluate.apply(void 0,H);if(X!==void 0&&ie!==void 0)return V(X,ie,M,f.colorSpace)}}:V(R,I,M,f.colorSpace)}function mp(f,r,d){switch(r.type){case"color":d=ui.parse(d);break;case"formatted":d=fr.fromString(d.toString());break;case"resolvedImage":d=ys.fromString(d.toString());break;case"padding":d=Ns.parse(d);break;case"colorArray":d=Ss.parse(d);break;case"numberArray":d=Fs.parse(d);break;default:_i(d)===r.type||r.type==="enum"&&r.values[d]||(d=void 0)}return Iu(d,f.default,r.default)}ma.register(Rc,{error:[{kind:"error"},[ei],(f,[r])=>{throw new vi(r.evaluate(f))}],typeof:[ei,[Vn],(f,[r])=>ti(Zi(r.evaluate(f)))],"to-rgba":[ts(tn,4),[ws],(f,[r])=>{const[d,y,v,C]=r.evaluate(f).rgb;return[255*d,255*y,255*v,C]}],rgb:[ws,[tn,tn,tn],Ya],rgba:[ws,[tn,tn,tn,tn],Ya],has:{type:On,overloads:[[[ei],(f,[r])=>fp(r.evaluate(f),f.properties())],[[ei,Xr],(f,[r,d])=>fp(r.evaluate(f),d.evaluate(f))]]},get:{type:Vn,overloads:[[[ei],(f,[r])=>ga(r.evaluate(f),f.properties())],[[ei,Xr],(f,[r,d])=>ga(r.evaluate(f),d.evaluate(f))]]},"feature-state":[Vn,[ei],(f,[r])=>ga(r.evaluate(f),f.featureState||{})],properties:[Xr,[],f=>f.properties()],"geometry-type":[ei,[],f=>f.geometryType()],id:[Vn,[],f=>f.id()],zoom:[tn,[],f=>f.globals.zoom],"heatmap-density":[tn,[],f=>f.globals.heatmapDensity||0],elevation:[tn,[],f=>f.globals.elevation||0],"line-progress":[tn,[],f=>f.globals.lineProgress||0],accumulated:[Vn,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[tn,mr(tn),(f,r)=>{let d=0;for(const y of r)d+=y.evaluate(f);return d}],"*":[tn,mr(tn),(f,r)=>{let d=1;for(const y of r)d*=y.evaluate(f);return d}],"-":{type:tn,overloads:[[[tn,tn],(f,[r,d])=>r.evaluate(f)-d.evaluate(f)],[[tn],(f,[r])=>-r.evaluate(f)]]},"/":[tn,[tn,tn],(f,[r,d])=>r.evaluate(f)/d.evaluate(f)],"%":[tn,[tn,tn],(f,[r,d])=>r.evaluate(f)%d.evaluate(f)],ln2:[tn,[],()=>Math.LN2],pi:[tn,[],()=>Math.PI],e:[tn,[],()=>Math.E],"^":[tn,[tn,tn],(f,[r,d])=>Math.pow(r.evaluate(f),d.evaluate(f))],sqrt:[tn,[tn],(f,[r])=>Math.sqrt(r.evaluate(f))],log10:[tn,[tn],(f,[r])=>Math.log(r.evaluate(f))/Math.LN10],ln:[tn,[tn],(f,[r])=>Math.log(r.evaluate(f))],log2:[tn,[tn],(f,[r])=>Math.log(r.evaluate(f))/Math.LN2],sin:[tn,[tn],(f,[r])=>Math.sin(r.evaluate(f))],cos:[tn,[tn],(f,[r])=>Math.cos(r.evaluate(f))],tan:[tn,[tn],(f,[r])=>Math.tan(r.evaluate(f))],asin:[tn,[tn],(f,[r])=>Math.asin(r.evaluate(f))],acos:[tn,[tn],(f,[r])=>Math.acos(r.evaluate(f))],atan:[tn,[tn],(f,[r])=>Math.atan(r.evaluate(f))],min:[tn,mr(tn),(f,r)=>Math.min(...r.map(d=>d.evaluate(f)))],max:[tn,mr(tn),(f,r)=>Math.max(...r.map(d=>d.evaluate(f)))],abs:[tn,[tn],(f,[r])=>Math.abs(r.evaluate(f))],round:[tn,[tn],(f,[r])=>{const d=r.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[tn,[tn],(f,[r])=>Math.floor(r.evaluate(f))],ceil:[tn,[tn],(f,[r])=>Math.ceil(r.evaluate(f))],"filter-==":[On,[ei,Vn],(f,[r,d])=>f.properties()[r.value]===d.value],"filter-id-==":[On,[Vn],(f,[r])=>f.id()===r.value],"filter-type-==":[On,[ei],(f,[r])=>f.geometryType()===r.value],"filter-<":[On,[ei,Vn],(f,[r,d])=>{const y=f.properties()[r.value],v=d.value;return typeof y==typeof v&&y<v}],"filter-id-<":[On,[Vn],(f,[r])=>{const d=f.id(),y=r.value;return typeof d==typeof y&&d<y}],"filter->":[On,[ei,Vn],(f,[r,d])=>{const y=f.properties()[r.value],v=d.value;return typeof y==typeof v&&y>v}],"filter-id->":[On,[Vn],(f,[r])=>{const d=f.id(),y=r.value;return typeof d==typeof y&&d>y}],"filter-<=":[On,[ei,Vn],(f,[r,d])=>{const y=f.properties()[r.value],v=d.value;return typeof y==typeof v&&y<=v}],"filter-id-<=":[On,[Vn],(f,[r])=>{const d=f.id(),y=r.value;return typeof d==typeof y&&d<=y}],"filter->=":[On,[ei,Vn],(f,[r,d])=>{const y=f.properties()[r.value],v=d.value;return typeof y==typeof v&&y>=v}],"filter-id->=":[On,[Vn],(f,[r])=>{const d=f.id(),y=r.value;return typeof d==typeof y&&d>=y}],"filter-has":[On,[Vn],(f,[r])=>r.value in f.properties()],"filter-has-id":[On,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[On,[ts(ei)],(f,[r])=>r.value.indexOf(f.geometryType())>=0],"filter-id-in":[On,[ts(Vn)],(f,[r])=>r.value.indexOf(f.id())>=0],"filter-in-small":[On,[ei,ts(Vn)],(f,[r,d])=>d.value.indexOf(f.properties()[r.value])>=0],"filter-in-large":[On,[ei,ts(Vn)],(f,[r,d])=>function(y,v,C,M){for(;C<=M;){const R=C+M>>1;if(v[R]===y)return!0;v[R]>y?M=R-1:C=R+1}return!1}(f.properties()[r.value],d.value,0,d.value.length-1)],all:{type:On,overloads:[[[On,On],(f,[r,d])=>r.evaluate(f)&&d.evaluate(f)],[mr(On),(f,r)=>{for(const d of r)if(!d.evaluate(f))return!1;return!0}]]},any:{type:On,overloads:[[[On,On],(f,[r,d])=>r.evaluate(f)||d.evaluate(f)],[mr(On),(f,r)=>{for(const d of r)if(d.evaluate(f))return!0;return!1}]]},"!":[On,[On],(f,[r])=>!r.evaluate(f)],"is-supported-script":[On,[ei],(f,[r])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(r.evaluate(f))}],upcase:[ei,[ei],(f,[r])=>r.evaluate(f).toUpperCase()],downcase:[ei,[ei],(f,[r])=>r.evaluate(f).toLowerCase()],concat:[ei,mr(Vn),(f,r)=>r.map(d=>di(d.evaluate(f))).join("")],"resolved-locale":[ei,[Kr],(f,[r])=>r.evaluate(f).resolvedLocale()]});class ql{constructor(r,d,y){this.expression=r,this._warningHistory={},this._evaluator=new se,this._defaultValue=d?function(v){if(v.type==="color"&&Ir(v.default))return new ui(0,0,0,0);switch(v.type){case"color":return ui.parse(v.default)||null;case"padding":return Ns.parse(v.default)||null;case"numberArray":return Fs.parse(v.default)||null;case"colorArray":return Ss.parse(v.default)||null;case"variableAnchorOffsetCollection":return Zs.parse(v.default)||null;case"projectionDefinition":return rs.parse(v.default)||null;default:return v.default===void 0?null:v.default}}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null,this._globalState=y}evaluateWithoutErrorHandling(r,d,y,v,C,M){return this._globalState&&(r=Ra(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=d,this._evaluator.featureState=y,this._evaluator.canonical=v,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(r,d,y,v,C,M){this._globalState&&(r=Ra(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=d||null,this._evaluator.featureState=y||null,this._evaluator.canonical=v,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=M||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new vi(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console!="undefined"&&console.warn(R.message)),this._defaultValue}}}function Sl(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Rc}function Ic(f,r,d){const y=new me(Rc,wl,[],r?function(C){const M={color:ws,string:ei,number:tn,enum:ei,boolean:On,formatted:Rr,padding:da,numberArray:Qr,colorArray:hs,projectionDefinition:Ii,resolvedImage:ka,variableAnchorOffsetCollection:Di};return C.type==="array"?ts(M[C.value]||Vn,C.length):M[C.type]}(r):void 0),v=y.parse(f,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Hh(new ql(v,r,d)):ko(y.errors)}class Oc{constructor(r,d,y){this.kind=r,this._styleExpression=d,this.isStateDependent=r!=="constant"&&!Hl(d.expression),this.globalStateRefs=Pa(d.expression),this._globalState=y}evaluateWithoutErrorHandling(r,d,y,v,C,M){return this._globalState&&(r=Ra(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,d,y,v,C,M)}evaluate(r,d,y,v,C,M){return this._globalState&&(r=Ra(r,this._globalState)),this._styleExpression.evaluate(r,d,y,v,C,M)}}class ta{constructor(r,d,y,v,C){this.kind=r,this.zoomStops=y,this._styleExpression=d,this.isStateDependent=r!=="camera"&&!Hl(d.expression),this.globalStateRefs=Pa(d.expression),this.interpolationType=v,this._globalState=C}evaluateWithoutErrorHandling(r,d,y,v,C,M){return this._globalState&&(r=Ra(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,d,y,v,C,M)}evaluate(r,d,y,v,C,M){return this._globalState&&(r=Ra(r,this._globalState)),this._styleExpression.evaluate(r,d,y,v,C,M)}interpolationFactor(r,d,y){return this.interpolationType?Si.interpolationFactor(this.interpolationType,r,d,y):0}}function ya(f,r,d){const y=Ic(f,r,d);if(y.result==="error")return y;const v=y.value.expression,C=zu(v);if(!C&&!zc(r))return ko([new li("","data expressions not supported")]);const M=Dc(v,["zoom"]);if(!M&&!Dd(r))return ko([new li("","zoom expressions not supported")]);const R=Xa(v);return R||M?R instanceof li?ko([R]):R instanceof Si&&!$o(r)?ko([new li("",'"interpolate" expressions cannot be used with this property')]):Hh(R?new ta(C?"camera":"composite",y.value,R.labels,R instanceof Si?R.interpolation:void 0,d):new Oc(C?"constant":"source",y.value,d)):ko([new li("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class qo{constructor(r,d){this._parameters=r,this._specification=d,Ri(this,Eo(this._parameters,this._specification))}static deserialize(r){return new qo(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Xa(f){let r=null;if(f instanceof je)r=Xa(f.result);else if(f instanceof Vo){for(const d of f.args)if(r=Xa(d),r)break}else(f instanceof Un||f instanceof Si)&&f.input instanceof ma&&f.input.name==="zoom"&&(r=f);return r instanceof li||f.eachChild(d=>{const y=Xa(d);y instanceof li?r=y:!r&&y?r=new li("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&y&&r!==y&&(r=new li("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Pa(f,r=new Set){return f instanceof Du&&r.add(f.key),f.eachChild(d=>{Pa(d,r)}),r}function Ra(f,r){const{zoom:d,heatmapDensity:y,elevation:v,lineProgress:C,isSupportedScript:M,accumulated:R}=f!=null?f:{};return{zoom:d,heatmapDensity:y,elevation:v,lineProgress:C,isSupportedScript:M,accumulated:R,globalState:r}}function Id(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const r of f.slice(1))if(!Id(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const gp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fc(f,r){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Id(f)||(f=Ni(f));const d=Ic(f,gp,r);if(d.result==="error")throw new Error(d.value.map(y=>`${y.key}: ${y.message}`).join(", "));return{filter:(y,v,C)=>d.value.evaluate(y,v,{},C),needGeometry:Rs(f),getGlobalStateRefs:()=>Pa(d.value.expression)}}function na(f,r){return f<r?-1:f>r?1:0}function Rs(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let r=1;r<f.length;r++)if(Rs(f[r]))return!0;return!1}function Ni(f){if(!f)return!0;const r=f[0];return f.length<=1?r!=="any":r==="=="?Go(f[1],f[2],"=="):r==="!="?Ka(Go(f[1],f[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Go(f[1],f[2],r):r==="any"?(d=f.slice(1),["any"].concat(d.map(Ni))):r==="all"?["all"].concat(f.slice(1).map(Ni)):r==="none"?["all"].concat(f.slice(1).map(Ni).map(Ka)):r==="in"?Da(f[1],f.slice(2)):r==="!in"?Ka(Da(f[1],f.slice(2))):r==="has"?Ou(f[1]):r!=="!has"||Ka(Ou(f[1]));var d}function Go(f,r,d){switch(f){case"$type":return[`filter-type-${d}`,r];case"$id":return[`filter-id-${d}`,r];default:return[`filter-${d}`,f,r]}}function Da(f,r){if(r.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(d=>typeof d!=typeof r[0])?["filter-in-large",f,["literal",r.sort(na)]]:["filter-in-small",f,["literal",r]]}}function Ou(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Ka(f){return["!",f]}function Fu(f){const r=typeof f;if(r==="number"||r==="boolean"||r==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let v="[";for(const C of f)v+=`${Fu(C)},`;return`${v}]`}const d=Object.keys(f).sort();let y="{";for(let v=0;v<d.length;v++)y+=`${JSON.stringify(d[v])}:${Fu(f[d[v]])},`;return`${y}}`}function Od(f){let r="";for(const d of wt)r+=`/${Fu(f[d])}`;return r}function Lu(f){const r=f.value;return r?[new lt(f.key,r,"constants have been deprecated as of v8")]:[]}function fs(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Gl(f){if(Array.isArray(f))return f.map(Gl);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const r={};for(const d in f)r[d]=Gl(f[d]);return r}return fs(f)}function Or(f){const r=f.key,d=f.value,y=f.valueSpec||{},v=f.objectElementValidators||{},C=f.style,M=f.styleSpec,R=f.validateSpec;let I=[];const V=_i(d);if(V!=="object")return[new lt(r,d,`object expected, ${V} found`)];for(const H in d){const X=H.split(".")[0],ie=qa(y,X)||y["*"];let oe;if(qa(v,X))oe=v[X];else if(qa(y,X))oe=R;else if(v["*"])oe=v["*"];else{if(!y["*"]){I.push(new lt(r,d[H],`unknown property "${H}"`));continue}oe=R}I=I.concat(oe({key:(r&&`${r}.`)+H,value:d[H],valueSpec:ie,style:C,styleSpec:M,object:d,objectKey:H,validateSpec:R},d))}for(const H in y)v[H]||y[H].required&&y[H].default===void 0&&d[H]===void 0&&I.push(new lt(r,d,`missing required property "${H}"`));return I}function Fd(f){const r=f.value,d=f.valueSpec,y=f.style,v=f.styleSpec,C=f.key,M=f.arrayElementValidator||f.validateSpec;if(_i(r)!=="array")return[new lt(C,r,`array expected, ${_i(r)} found`)];if(d.length&&r.length!==d.length)return[new lt(C,r,`array length ${d.length} expected, length ${r.length} found`)];if(d["min-length"]&&r.length<d["min-length"])return[new lt(C,r,`array length at least ${d["min-length"]} expected, length ${r.length} found`)];let R={type:d.value,values:d.values};v.$version<7&&(R.function=d.function),_i(d.value)==="object"&&(R=d.value);let I=[];for(let V=0;V<r.length;V++)I=I.concat(M({array:r,arrayIndex:V,value:r[V],valueSpec:R,validateSpec:f.validateSpec,style:y,styleSpec:v,key:`${C}[${V}]`}));return I}function Wo(f){const r=f.key,d=f.value,y=f.valueSpec;let v=_i(d);return v==="number"&&d!=d&&(v="NaN"),v!=="number"?[new lt(r,d,`number expected, ${v} found`)]:"minimum"in y&&d<y.minimum?[new lt(r,d,`${d} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&d>y.maximum?[new lt(r,d,`${d} is greater than the maximum value ${y.maximum}`)]:[]}function Mo(f){const r=f.valueSpec,d=fs(f.value.type);let y,v,C,M={};const R=d!=="categorical"&&f.value.property===void 0,I=!R,V=_i(f.value.stops)==="array"&&_i(f.value.stops[0])==="array"&&_i(f.value.stops[0][0])==="object",H=Or({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(oe){if(d==="identity")return[new lt(oe.key,oe.value,'identity function may not have a "stops" property')];let de=[];const xe=oe.value;return de=de.concat(Fd({key:oe.key,value:xe,valueSpec:oe.valueSpec,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,arrayElementValidator:X})),_i(xe)==="array"&&xe.length===0&&de.push(new lt(oe.key,xe,"array must have at least one stop")),de},default:function(oe){return oe.validateSpec({key:oe.key,value:oe.value,valueSpec:r,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec})}}});return d==="identity"&&R&&H.push(new lt(f.key,f.value,'missing required property "property"')),d==="identity"||f.value.stops||H.push(new lt(f.key,f.value,'missing required property "stops"')),d==="exponential"&&f.valueSpec.expression&&!$o(f.valueSpec)&&H.push(new lt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(I&&!zc(f.valueSpec)?H.push(new lt(f.key,f.value,"property functions not supported")):R&&!Dd(f.valueSpec)&&H.push(new lt(f.key,f.value,"zoom functions not supported"))),d!=="categorical"&&!V||f.value.property!==void 0||H.push(new lt(f.key,f.value,'"property" property is required')),H;function X(oe){let de=[];const xe=oe.value,ve=oe.key;if(_i(xe)!=="array")return[new lt(ve,xe,`array expected, ${_i(xe)} found`)];if(xe.length!==2)return[new lt(ve,xe,`array length 2 expected, length ${xe.length} found`)];if(V){if(_i(xe[0])!=="object")return[new lt(ve,xe,`object expected, ${_i(xe[0])} found`)];if(xe[0].zoom===void 0)return[new lt(ve,xe,"object stop key must have zoom")];if(xe[0].value===void 0)return[new lt(ve,xe,"object stop key must have value")];if(C&&C>fs(xe[0].zoom))return[new lt(ve,xe[0].zoom,"stop zoom values must appear in ascending order")];fs(xe[0].zoom)!==C&&(C=fs(xe[0].zoom),v=void 0,M={}),de=de.concat(Or({key:`${ve}[0]`,value:xe[0],valueSpec:{zoom:{}},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{zoom:Wo,value:ie}}))}else de=de.concat(ie({key:`${ve}[0]`,value:xe[0],validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec},xe));return Sl(Gl(xe[1]))?de.concat([new lt(`${ve}[1]`,xe[1],"expressions are not allowed in function stops.")]):de.concat(oe.validateSpec({key:`${ve}[1]`,value:xe[1],valueSpec:r,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec}))}function ie(oe,de){const xe=_i(oe.value),ve=fs(oe.value),Re=oe.value!==null?oe.value:de;if(y){if(xe!==y)return[new lt(oe.key,Re,`${xe} stop domain type must match previous stop domain type ${y}`)]}else y=xe;if(xe!=="number"&&xe!=="string"&&xe!=="boolean")return[new lt(oe.key,Re,"stop domain value must be a number, string, or boolean")];if(xe!=="number"&&d!=="categorical"){let at=`number expected, ${xe} found`;return zc(r)&&d===void 0&&(at+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new lt(oe.key,Re,at)]}return d!=="categorical"||xe!=="number"||isFinite(ve)&&Math.floor(ve)===ve?d!=="categorical"&&xe==="number"&&v!==void 0&&ve<v?[new lt(oe.key,Re,"stop domain values must appear in ascending order")]:(v=ve,d==="categorical"&&ve in M?[new lt(oe.key,Re,"stop domain values must be unique")]:(M[ve]=!0,[])):[new lt(oe.key,Re,`integer expected, found ${ve}`)]}}function xa(f){const r=(f.expressionContext==="property"?ya:Ic)(Gl(f.value),f.valueSpec);if(r.result==="error")return r.value.map(y=>new lt(`${f.key}${y.key}`,f.value,y.message));const d=r.value.expression||r.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!d.outputDefined())return[new lt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Hl(d))return[new lt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Hl(d))return[new lt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Dc(d,["zoom","feature-state"]))return[new lt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!zu(d))return[new lt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function _a(f){const r=f.key,d=f.value,y=_i(d);return y!=="string"?[new lt(r,d,`color expected, ${y} found`)]:ui.parse(String(d))?[]:[new lt(r,d,`color expected, "${d}" found`)]}function Lc(f){const r=f.key,d=f.value,y=f.valueSpec,v=[];return Array.isArray(y.values)?y.values.indexOf(fs(d))===-1&&v.push(new lt(r,d,`expected one of [${y.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(y.values).indexOf(fs(d))===-1&&v.push(new lt(r,d,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(d)} found`)),v}function Bu(f){return Id(Gl(f.value))?xa(Ri({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bc(f)}function Bc(f){const r=f.value,d=f.key;if(_i(r)!=="array")return[new lt(d,r,`array expected, ${_i(r)} found`)];const y=f.styleSpec;let v,C=[];if(r.length<1)return[new lt(d,r,"filter array must have at least 1 element")];switch(C=C.concat(Lc({key:`${d}[0]`,value:r[0],valueSpec:y.filter_operator,style:f.style,styleSpec:f.styleSpec})),fs(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&fs(r[1])==="$type"&&C.push(new lt(d,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&C.push(new lt(d,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(v=_i(r[1]),v!=="string"&&C.push(new lt(`${d}[1]`,r[1],`string expected, ${v} found`)));for(let M=2;M<r.length;M++)v=_i(r[M]),fs(r[1])==="$type"?C=C.concat(Lc({key:`${d}[${M}]`,value:r[M],valueSpec:y.geometry_type,style:f.style,styleSpec:f.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&C.push(new lt(`${d}[${M}]`,r[M],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let M=1;M<r.length;M++)C=C.concat(Bc({key:`${d}[${M}]`,value:r[M],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":v=_i(r[1]),r.length!==2?C.push(new lt(d,r,`filter array for "${r[0]}" operator must have 2 elements`)):v!=="string"&&C.push(new lt(`${d}[1]`,r[1],`string expected, ${v} found`))}return C}function Ld(f,r){const d=f.key,y=f.validateSpec,v=f.style,C=f.styleSpec,M=f.value,R=f.objectKey,I=C[`${r}_${f.layerType}`];if(!I)return[];const V=R.match(/^(.*)-transition$/);if(r==="paint"&&V&&I[V[1]]&&I[V[1]].transition)return y({key:d,value:M,valueSpec:C.transition,style:v,styleSpec:C});const H=f.valueSpec||I[R];if(!H)return[new lt(d,M,`unknown property "${R}"`)];let X;if(_i(M)==="string"&&zc(H)&&!H.tokens&&(X=/^{([^}]+)}$/.exec(M)))return[new lt(d,M,`"${R}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(X[1])} }\`.`)];const ie=[];return f.layerType==="symbol"&&(R==="text-field"&&v&&!v.glyphs&&ie.push(new lt(d,M,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&Ir(Gl(M))&&fs(M.type)==="identity"&&ie.push(new lt(d,M,'"text-font" does not support identity functions'))),ie.concat(y({key:f.key,value:M,valueSpec:H,style:v,styleSpec:C,expressionContext:"property",propertyType:r,propertyKey:R}))}function jl(f){return Ld(f,"paint")}function gr(f){return Ld(f,"layout")}function Cl(f){let r=[];const d=f.value,y=f.key,v=f.style,C=f.styleSpec;if(_i(d)!=="object")return[new lt(y,d,`object expected, ${_i(d)} found`)];d.type||d.ref||r.push(new lt(y,d,'either "type" or "ref" is required'));let M=fs(d.type);const R=fs(d.ref);if(d.id){const I=fs(d.id);for(let V=0;V<f.arrayIndex;V++){const H=v.layers[V];fs(H.id)===I&&r.push(new lt(y,d.id,`duplicate layer id "${d.id}", previously used at line ${H.id.__line__}`))}}if("ref"in d){let I;["type","source","source-layer","filter","layout"].forEach(V=>{V in d&&r.push(new lt(y,d[V],`"${V}" is prohibited for ref layers`))}),v.layers.forEach(V=>{fs(V.id)===R&&(I=V)}),I?I.ref?r.push(new lt(y,d.ref,"ref cannot reference another ref layer")):M=fs(I.type):r.push(new lt(y,d.ref,`ref layer "${R}" not found`))}else if(M!=="background")if(d.source){const I=v.sources&&v.sources[d.source],V=I&&fs(I.type);I?V==="vector"&&M==="raster"?r.push(new lt(y,d.source,`layer "${d.id}" requires a raster source`)):V!=="raster-dem"&&M==="hillshade"||V!=="raster-dem"&&M==="color-relief"?r.push(new lt(y,d.source,`layer "${d.id}" requires a raster-dem source`)):V==="raster"&&M!=="raster"?r.push(new lt(y,d.source,`layer "${d.id}" requires a vector source`)):V!=="vector"||d["source-layer"]?V==="raster-dem"&&M!=="hillshade"&&M!=="color-relief"?r.push(new lt(y,d.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):M!=="line"||!d.paint||!d.paint["line-gradient"]||V==="geojson"&&I.lineMetrics||r.push(new lt(y,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new lt(y,d,`layer "${d.id}" must specify a "source-layer"`)):r.push(new lt(y,d.source,`source "${d.source}" not found`))}else r.push(new lt(y,d,'missing required property "source"'));return r=r.concat(Or({key:y,value:d,valueSpec:C.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${y}.type`,value:d.type,valueSpec:C.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:d,objectKey:"type"}),filter:Bu,layout:I=>Or({layer:d,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":V=>gr(Ri({layerType:M},V))}}),paint:I=>Or({layer:d,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":V=>jl(Ri({layerType:M},V))}})}})),r}function Wl(f){const r=f.value,d=f.key,y=_i(r);return y!=="string"?[new lt(d,r,`string expected, ${y} found`)]:[]}const Hm={promoteId:function({key:f,value:r}){if(_i(r)==="string")return Wl({key:f,value:r});{const d=[];for(const y in r)d.push(...Wl({key:`${f}.${y}`,value:r[y]}));return d}}};function qm(f){const r=f.value,d=f.key,y=f.styleSpec,v=f.style,C=f.validateSpec;if(!r.type)return[new lt(d,r,'"type" is required')];const M=fs(r.type);let R;switch(M){case"vector":case"raster":return R=Or({key:d,value:r,valueSpec:y[`source_${M.replace("-","_")}`],style:f.style,styleSpec:y,objectElementValidators:Hm,validateSpec:C}),R;case"raster-dem":return R=function(I){var V;const H=(V=I.sourceName)!==null&&V!==void 0?V:"",X=I.value,ie=I.styleSpec,oe=ie.source_raster_dem,de=I.style;let xe=[];const ve=_i(X);if(X===void 0)return xe;if(ve!=="object")return xe.push(new lt("source_raster_dem",X,`object expected, ${ve} found`)),xe;const Re=fs(X.encoding)==="custom",at=["redFactor","greenFactor","blueFactor","baseShift"],Be=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Ze in X)!Re&&at.includes(Ze)?xe.push(new lt(Ze,X[Ze],`In "${H}": "${Ze}" is only valid when "encoding" is set to "custom". ${Be} encoding found`)):oe[Ze]?xe=xe.concat(I.validateSpec({key:Ze,value:X[Ze],valueSpec:oe[Ze],validateSpec:I.validateSpec,style:de,styleSpec:ie})):xe.push(new lt(Ze,X[Ze],`unknown property "${Ze}"`));return xe}({sourceName:d,value:r,style:f.style,styleSpec:y,validateSpec:C}),R;case"geojson":if(R=Or({key:d,value:r,valueSpec:y.source_geojson,style:v,styleSpec:y,validateSpec:C,objectElementValidators:Hm}),r.cluster)for(const I in r.clusterProperties){const[V,H]=r.clusterProperties[I],X=typeof V=="string"?[V,["accumulated"],["get",I]]:V;R.push(...xa({key:`${d}.${I}.map`,value:H,expressionContext:"cluster-map"})),R.push(...xa({key:`${d}.${I}.reduce`,value:X,expressionContext:"cluster-reduce"}))}return R;case"video":return Or({key:d,value:r,valueSpec:y.source_video,style:v,validateSpec:C,styleSpec:y});case"image":return Or({key:d,value:r,valueSpec:y.source_image,style:v,validateSpec:C,styleSpec:y});case"canvas":return[new lt(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Lc({key:`${d}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Gm(f){const r=f.value,d=f.styleSpec,y=d.light,v=f.style;let C=[];const M=_i(r);if(r===void 0)return C;if(M!=="object")return C=C.concat([new lt("light",r,`object expected, ${M} found`)]),C;for(const R in r){const I=R.match(/^(.*)-transition$/);C=C.concat(I&&y[I[1]]&&y[I[1]].transition?f.validateSpec({key:R,value:r[R],valueSpec:d.transition,validateSpec:f.validateSpec,style:v,styleSpec:d}):y[R]?f.validateSpec({key:R,value:r[R],valueSpec:y[R],validateSpec:f.validateSpec,style:v,styleSpec:d}):[new lt(R,r[R],`unknown property "${R}"`)])}return C}function Js(f){const r=f.value,d=f.styleSpec,y=d.sky,v=f.style,C=_i(r);if(r===void 0)return[];if(C!=="object")return[new lt("sky",r,`object expected, ${C} found`)];let M=[];for(const R in r)M=M.concat(y[R]?f.validateSpec({key:R,value:r[R],valueSpec:y[R],style:v,styleSpec:d}):[new lt(R,r[R],`unknown property "${R}"`)]);return M}function Gh(f){const r=f.value,d=f.styleSpec,y=d.terrain,v=f.style;let C=[];const M=_i(r);if(r===void 0)return C;if(M!=="object")return C=C.concat([new lt("terrain",r,`object expected, ${M} found`)]),C;for(const R in r)C=C.concat(y[R]?f.validateSpec({key:R,value:r[R],valueSpec:y[R],validateSpec:f.validateSpec,style:v,styleSpec:d}):[new lt(R,r[R],`unknown property "${R}"`)]);return C}function Zo(f){let r=[];const d=f.value,y=f.key;if(Array.isArray(d)){const v=[],C=[];for(const M in d)d[M].id&&v.includes(d[M].id)&&r.push(new lt(y,d,`all the sprites' ids must be unique, but ${d[M].id} is duplicated`)),v.push(d[M].id),d[M].url&&C.includes(d[M].url)&&r.push(new lt(y,d,`all the sprites' URLs must be unique, but ${d[M].url} is duplicated`)),C.push(d[M].url),r=r.concat(Or({key:`${y}[${M}]`,value:d[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return r}return Wl({key:y,value:d})}function Yo(f){return r=f.value,r&&r.constructor===Object?[]:[new lt(f.key,f.value,`object expected, ${_i(f.value)} found`)];var r}const Fr={"*":()=>[],array:Fd,boolean:function(f){const r=f.value,d=f.key,y=_i(r);return y!=="boolean"?[new lt(d,r,`boolean expected, ${y} found`)]:[]},number:Wo,color:_a,constants:Lu,enum:Lc,filter:Bu,function:Mo,layer:Cl,object:Or,source:qm,light:Gm,sky:Js,terrain:Gh,projection:function(f){const r=f.value,d=f.styleSpec,y=d.projection,v=f.style,C=_i(r);if(r===void 0)return[];if(C!=="object")return[new lt("projection",r,`object expected, ${C} found`)];let M=[];for(const R in r)M=M.concat(y[R]?f.validateSpec({key:R,value:r[R],valueSpec:y[R],style:v,styleSpec:d}):[new lt(R,r[R],`unknown property "${R}"`)]);return M},projectionDefinition:function(f){const r=f.key;let d=f.value;d=d instanceof String?d.valueOf():d;const y=_i(d);return y!=="array"||function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"}(d)||function(v){return!!["interpolate","step","literal"].includes(v[0])}(d)?["array","string"].includes(y)?[]:[new lt(r,d,`projection expected, invalid type "${y}" found`)]:[new lt(r,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:Wl,formatted:function(f){return Wl(f).length===0?[]:xa(f)},resolvedImage:function(f){return Wl(f).length===0?[]:xa(f)},padding:function(f){const r=f.key,d=f.value;if(_i(d)==="array"){if(d.length<1||d.length>4)return[new lt(r,d,`padding requires 1 to 4 values; ${d.length} values found`)];const y={type:"number"};let v=[];for(let C=0;C<d.length;C++)v=v.concat(f.validateSpec({key:`${r}[${C}]`,value:d[C],validateSpec:f.validateSpec,valueSpec:y}));return v}return Wo({key:r,value:d,valueSpec:{}})},numberArray:function(f){const r=f.key,d=f.value;if(_i(d)==="array"){const y={type:"number"};if(d.length<1)return[new lt(r,d,"array length at least 1 expected, length 0 found")];let v=[];for(let C=0;C<d.length;C++)v=v.concat(f.validateSpec({key:`${r}[${C}]`,value:d[C],validateSpec:f.validateSpec,valueSpec:y}));return v}return Wo({key:r,value:d,valueSpec:{}})},colorArray:function(f){const r=f.key,d=f.value;if(_i(d)==="array"){if(d.length<1)return[new lt(r,d,"array length at least 1 expected, length 0 found")];let y=[];for(let v=0;v<d.length;v++)y=y.concat(_a({key:`${r}[${v}]`,value:d[v]}));return y}return _a({key:r,value:d})},variableAnchorOffsetCollection:function(f){const r=f.key,d=f.value,y=_i(d),v=f.styleSpec;if(y!=="array"||d.length<1||d.length%2!=0)return[new lt(r,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let M=0;M<d.length;M+=2)C=C.concat(Lc({key:`${r}[${M}]`,value:d[M],valueSpec:v.layout_symbol["text-anchor"]})),C=C.concat(Fd({key:`${r}[${M+1}]`,value:d[M+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:v}));return C},sprite:Zo,state:Yo};function za(f){const r=f.value,d=f.valueSpec,y=f.styleSpec;return f.validateSpec=za,d.expression&&Ir(fs(r))?Mo(f):d.expression&&Sl(Gl(r))?xa(f):d.type&&Fr[d.type]?Fr[d.type](f):Or(Ri({},f,{valueSpec:d.type?y[d.type]:d}))}function Zl(f){const r=f.value,d=f.key,y=Wl(f);return y.length||(r.indexOf("{fontstack}")===-1&&y.push(new lt(d,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&y.push(new lt(d,r,'"glyphs" url must include a "{range}" token'))),y}function Qa(f,r=ct){let d=[];return d=d.concat(za({key:"",value:f,valueSpec:r.$root,styleSpec:r,style:f,validateSpec:za,objectElementValidators:{glyphs:Zl,"*":()=>[]}})),f.constants&&(d=d.concat(Lu({key:"constants",value:f.constants}))),Vu(d)}function Ja(f){return function(r){return f(Object.assign({},r,{validateSpec:za}))}}function Vu(f){return[].concat(f).sort((r,d)=>r.line-d.line)}function Ia(f){return function(...r){return Vu(f.apply(this,r))}}Qa.source=Ia(Ja(qm)),Qa.sprite=Ia(Ja(Zo)),Qa.glyphs=Ia(Ja(Zl)),Qa.light=Ia(Ja(Gm)),Qa.sky=Ia(Ja(Js)),Qa.terrain=Ia(Ja(Gh)),Qa.state=Ia(Ja(Yo)),Qa.layer=Ia(Ja(Cl)),Qa.filter=Ia(Ja(Bu)),Qa.paintProperty=Ia(Ja(jl)),Qa.layoutProperty=Ia(Ja(gr));const ba=Qa,yp=ba.light,Uu=ba.sky,Wm=ba.paintProperty,Tl=ba.layoutProperty;function xp(f,r){let d=!1;if(r&&r.length)for(const y of r)f.fire(new bn(new Error(y.message))),d=!0;return d}class Yl{constructor(r,d,y){const v=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const M=new Int32Array(this.arrayBuffer);r=M[0],this.d=(d=M[1])+2*(y=M[2]);for(let I=0;I<this.d*this.d;I++){const V=M[3+I],H=M[3+I+1];v.push(V===H?null:M.subarray(V,H))}const R=M[3+v.length+1];this.keys=M.subarray(M[3+v.length],R),this.bboxes=M.subarray(R),this.insert=this._insertReadonly}else{this.d=d+2*y;for(let M=0;M<this.d*this.d;M++)v.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=r,this.padding=y,this.scale=d/r,this.uid=0;const C=y/d*r;this.min=-C,this.max=r+C}insert(r,d,y,v,C){this._forEachCell(d,y,v,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(v),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,d,y,v,C,M){this.cells[C].push(M)}query(r,d,y,v,C){const M=this.min,R=this.max;if(r<=M&&d<=M&&R<=y&&R<=v&&!C)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(r,d,y,v,this._queryCell,I,{},C),I}}_queryCell(r,d,y,v,C,M,R,I){const V=this.cells[C];if(V!==null){const H=this.keys,X=this.bboxes;for(let ie=0;ie<V.length;ie++){const oe=V[ie];if(R[oe]===void 0){const de=4*oe;(I?I(X[de+0],X[de+1],X[de+2],X[de+3]):r<=X[de+2]&&d<=X[de+3]&&y>=X[de+0]&&v>=X[de+1])?(R[oe]=!0,M.push(H[oe])):R[oe]=!1}}}}_forEachCell(r,d,y,v,C,M,R,I){const V=this._convertToCellCoord(r),H=this._convertToCellCoord(d),X=this._convertToCellCoord(y),ie=this._convertToCellCoord(v);for(let oe=V;oe<=X;oe++)for(let de=H;de<=ie;de++){const xe=this.d*de+oe;if((!I||I(this._convertFromCellCoord(oe),this._convertFromCellCoord(de),this._convertFromCellCoord(oe+1),this._convertFromCellCoord(de+1)))&&C.call(this,r,d,y,v,xe,M,R,I))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,d=3+this.cells.length+1+1;let y=0;for(let M=0;M<this.cells.length;M++)y+=this.cells[M].length;const v=new Int32Array(d+y+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let C=d;for(let M=0;M<r.length;M++){const R=r[M];v[3+M]=C,v.set(R,C),C+=R.length}return v[3+r.length]=C,v.set(this.keys,C),C+=this.keys.length,v[3+r.length+1]=C,v.set(this.bboxes,C),C+=this.bboxes.length,v.buffer}static serialize(r,d){const y=r.toArrayBuffer();return d&&d.push(y),{buffer:y}}static deserialize(r){return new Yl(r.buffer)}}const No={};function xn(f,r,d={}){if(No[f])throw new Error(`${f} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:f,writeable:!1}),No[f]={klass:r,omit:d.omit||[],shallow:d.shallow||[]}}xn("Object",Object),xn("Set",Set),xn("TransferableGridIndex",Yl),xn("Color",ui),xn("Error",Error),xn("AJAXError",Ae),xn("ResolvedImage",ys),xn("StylePropertyFunction",qo),xn("StyleExpression",ql,{omit:["_evaluator"]}),xn("ZoomDependentExpression",ta),xn("ZoomConstantExpression",Oc),xn("CompoundExpression",ma,{omit:["_evaluate"]});for(const f in Rc)Rc[f]._classRegistryKey||xn(`Expression_${f}`,Rc[f]);function Bd(f){return f&&typeof ArrayBuffer!="undefined"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Wh(f){return f.$name||f.constructor._classRegistryKey}function kl(f){return!function(r){if(r===null||typeof r!="object")return!1;const d=Wh(r);return!(!d||d==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||Bd(f)||on(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function $u(f,r){if(kl(f))return(Bd(f)||on(f))&&r&&r.push(f),ArrayBuffer.isView(f)&&r&&r.push(f.buffer),f instanceof ImageData&&r&&r.push(f.data.buffer),f;if(Array.isArray(f)){const C=[];for(const M of f)C.push($u(M,r));return C}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const d=Wh(f);if(!d)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!No[d])throw new Error(`${d} is not registered.`);const{klass:y}=No[d],v=y.serialize?y.serialize(f,r):{};if(y.serialize){if(r&&v===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in f){if(!f.hasOwnProperty(C)||No[d].omit.indexOf(C)>=0)continue;const M=f[C];v[C]=No[d].shallow.indexOf(C)>=0?M:$u(M,r)}f instanceof Error&&(v.message=f.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(v.$name=d),v}function Xl(f){if(kl(f))return f;if(Array.isArray(f))return f.map(Xl);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const r=Wh(f)||"Object";if(!No[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:d}=No[r];if(!d)throw new Error(`can't deserialize unregistered class ${r}`);if(d.deserialize)return d.deserialize(f);const y=Object.create(d.prototype);for(const v of Object.keys(f)){if(v==="$name")continue;const C=f[v];y[v]=No[r].shallow.indexOf(v)>=0?C:Xl(C)}return y}class Oa{constructor(){this.first=!0}update(r,d){const y=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=d),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=y,!0))}}const pi={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Hu(f){for(const r of f)if(Kl(r.charCodeAt(0)))return!0;return!1}function El(f){for(const r of f)if(!Zh(r.charCodeAt(0)))return!1;return!0}function Ao(f){const r=f.map(d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch(y){return null}}).filter(d=>d);return new RegExp(r.join("|"),"u")}const Vc=Ao(["Arab","Dupl","Mong","Ougr","Syrc"]);function Zh(f){return!Vc.test(String.fromCodePoint(f))}const Yh=Ao(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Kl(f){return!(f!==746&&f!==747&&(f<4352||!(pi["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||pi["CJK Compatibility"](f)||pi["CJK Strokes"](f)||!(!pi["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||pi["Enclosed CJK Letters and Months"](f)||pi["Ideographic Description Characters"](f)||pi.Kanbun(f)||pi.Katakana(f)&&f!==12540||!(!pi["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!pi["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||pi["Vertical Forms"](f)||pi["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||Yh.test(String.fromCodePoint(f)))))}function qu(f){return!(Kl(f)||function(r){return!!(pi["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||pi["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||pi["Letterlike Symbols"](r)||pi["Number Forms"](r)||pi["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||pi["Control Pictures"](r)&&r!==9251||pi["Optical Character Recognition"](r)||pi["Enclosed Alphanumerics"](r)||pi["Geometric Shapes"](r)||pi["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||pi["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||pi["CJK Symbols and Punctuation"](r)||pi.Katakana(r)||pi["Private Use Area"](r)||pi["CJK Compatibility Forms"](r)||pi["Small Form Variants"](r)||pi["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(f))}const _p=Ao(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function bp(f){return _p.test(String.fromCodePoint(f))}function Uc(f,r){return!(!r&&bp(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||pi.Khmer(f))}function Vd(f){for(const r of f)if(bp(r.charCodeAt(0)))return!0;return!1}const Ml=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Ml.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,r){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const d=f.pluginURL,y=new Promise(C=>{this.loadScriptResolve=C});r(d);const v=new Promise(C=>setTimeout(()=>C(),this.TIMEOUT));if(yield Promise.race([y,v]),this.isParsed()){const C={pluginStatus:"loaded",pluginURL:d};return this.setState(C),C}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)})}};class Yi{constructor(r,d){this.isSupportedScript=Xh,this.zoom=r,d?(this.now=d.now||0,this.fadeDuration=d.fadeDuration||0,this.zoomHistory=d.zoomHistory||new Oa,this.transition=d.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Oa,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,d=r-Math.floor(r),y=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*d}}}function Xh(f){return function(r,d){for(const y of r)if(!Uc(y.charCodeAt(0),d))return!1;return!0}(f,Ml.getRTLTextPluginStatus()==="loaded")}class eo{constructor(r,d,y){this.property=r,this.value=d,this.expression=function(v,C,M){if(Ir(v))return new qo(v,C);if(Sl(v)){const R=ya(v,C,M);if(R.result==="error")throw new Error(R.value.map(I=>`${I.key}: ${I.message}`).join(", "));return R.value}{let R=v;return C.type==="color"&&typeof v=="string"?R=ui.parse(v):C.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?C.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?C.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?C.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?R=Zs.parse(v):C.type==="projectionDefinition"&&typeof v=="string"&&(R=rs.parse(v)):R=Ss.parse(v):R=Fs.parse(v):R=Ns.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>R}}}(d===void 0?r.specification.default:d,r.specification,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(r,d,y){return this.property.possiblyEvaluate(this,r,d,y)}}class mi{constructor(r,d){this.property=r,this.value=new eo(r,void 0,d)}transitioned(r,d){return new Cs(this.property,this.value,d,Ve({},r.transition,this.transition),r.now)}untransitioned(){return new Cs(this.property,this.value,null,{},0)}}class Xi{constructor(r,d){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._globalState=d}getValue(r){return It(this._values[r].value.value)}setValue(r,d){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new mi(this._values[r].property,this._globalState)),this._values[r].value=new eo(this._values[r].property,d===null?void 0:It(d),this._globalState)}getTransition(r){return It(this._values[r].transition)}setTransition(r,d){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new mi(this._values[r].property,this._globalState)),this._values[r].transition=It(d)||void 0}serialize(){const r={};for(const d of Object.keys(this._values)){const y=this.getValue(d);y!==void 0&&(r[d]=y);const v=this.getTransition(d);v!==void 0&&(r[`${d}-transition`]=v)}return r}transitioned(r,d){const y=new Ud(this._properties);for(const v of Object.keys(this._values))y._values[v]=this._values[v].transitioned(r,d._values[v]);return y}untransitioned(){const r=new Ud(this._properties);for(const d of Object.keys(this._values))r._values[d]=this._values[d].untransitioned();return r}}class Cs{constructor(r,d,y,v,C){this.property=r,this.value=d,this.begin=C+v.delay||0,this.end=this.begin+v.duration||0,r.specification.transition&&(v.delay||v.duration)&&(this.prior=y)}possiblyEvaluate(r,d,y){const v=r.now||0,C=this.value.possiblyEvaluate(r,d,y),M=this.prior;if(M){if(v>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(v<this.begin)return M.possiblyEvaluate(r,d,y);{const R=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(r,d,y),C,Me(R))}}return C}}class Ud{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,d,y){const v=new $c(this._properties);for(const C of Object.keys(this._values))v._values[C]=this._values[C].possiblyEvaluate(r,d,y);return v}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Ql{constructor(r,d){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._globalState=d}hasValue(r){return this._values[r].value!==void 0}getValue(r){return It(this._values[r].value)}setValue(r,d){this._values[r]=new eo(this._values[r].property,d===null?void 0:It(d),this._globalState)}serialize(){const r={};for(const d of Object.keys(this._values)){const y=this.getValue(d);y!==void 0&&(r[d]=y)}return r}possiblyEvaluate(r,d,y){const v=new $c(this._properties);for(const C of Object.keys(this._values))v._values[C]=this._values[C].possiblyEvaluate(r,d,y);return v}}class Lr{constructor(r,d,y){this.property=r,this.value=d,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,d,y,v){return this.property.evaluate(this.value,this.parameters,r,d,y,v)}}class $c{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class En{constructor(r){this.specification=r}possiblyEvaluate(r,d){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(d)}interpolate(r,d,y){const v=Ps[this.specification.type];return v?v(r,d,y):r}}class zn{constructor(r,d){this.specification=r,this.overrides=d}possiblyEvaluate(r,d,y,v){return new Lr(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(d,null,{},y,v)}:r.expression,d)}interpolate(r,d,y){if(r.value.kind!=="constant"||d.value.kind!=="constant")return r;if(r.value.value===void 0||d.value.value===void 0)return new Lr(this,{kind:"constant",value:void 0},r.parameters);const v=Ps[this.specification.type];if(v){const C=v(r.value.value,d.value.value,y);return new Lr(this,{kind:"constant",value:C},r.parameters)}return r}evaluate(r,d,y,v,C,M){return r.kind==="constant"?r.value:r.evaluate(d,y,v,C,M)}}class Gu extends zn{possiblyEvaluate(r,d,y,v){if(r.value===void 0)return new Lr(this,{kind:"constant",value:void 0},d);if(r.expression.kind==="constant"){const C=r.expression.evaluate(d,null,{},y,v),M=r.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,R=this._calculate(M,M,M,d);return new Lr(this,{kind:"constant",value:R},d)}if(r.expression.kind==="camera"){const C=this._calculate(r.expression.evaluate({zoom:d.zoom-1}),r.expression.evaluate({zoom:d.zoom}),r.expression.evaluate({zoom:d.zoom+1}),d);return new Lr(this,{kind:"constant",value:C},d)}return new Lr(this,r.expression,d)}evaluate(r,d,y,v,C,M){if(r.kind==="source"){const R=r.evaluate(d,y,v,C,M);return this._calculate(R,R,R,d)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(d.zoom)-1},y,v),r.evaluate({zoom:Math.floor(d.zoom)},y,v),r.evaluate({zoom:Math.floor(d.zoom)+1},y,v),d):r.value}_calculate(r,d,y,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:r,to:d}:{from:y,to:d}}interpolate(r){return r}}class Ls{constructor(r){this.specification=r}possiblyEvaluate(r,d,y,v){if(r.value!==void 0){if(r.expression.kind==="constant"){const C=r.expression.evaluate(d,null,{},y,v);return this._calculate(C,C,C,d)}return this._calculate(r.expression.evaluate(new Yi(Math.floor(d.zoom-1),d)),r.expression.evaluate(new Yi(Math.floor(d.zoom),d)),r.expression.evaluate(new Yi(Math.floor(d.zoom+1),d)),d)}}_calculate(r,d,y,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:r,to:d}:{from:y,to:d}}interpolate(r){return r}}class Wu{constructor(r){this.specification=r}possiblyEvaluate(r,d,y,v){return!!r.expression.evaluate(d,null,{},y,v)}interpolate(){return!1}}class jr{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in r){const y=r[d];y.specification.overridable&&this.overridableProperties.push(d);const v=this.defaultPropertyValues[d]=new eo(y,void 0,void 0),C=this.defaultTransitionablePropertyValues[d]=new mi(y,void 0);this.defaultTransitioningPropertyValues[d]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=v.possiblyEvaluate({})}}}xn("DataDrivenProperty",zn),xn("DataConstantProperty",En),xn("CrossFadedDataDrivenProperty",Gu),xn("CrossFadedProperty",Ls),xn("ColorRampProperty",Wu);const vp="-transition";class to extends Tn{constructor(r,d,y){if(super(),this.id=r.id,this.type=r.type,this._globalState=y,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter,this._featureFilter=Fc(r.filter,y)),d.layout&&(this._unevaluatedLayout=new Ql(d.layout,y)),d.paint)){this._transitionablePaint=new Xi(d.paint,y);for(const v in r.paint)this.setPaintProperty(v,r.paint[v],{validate:!1});for(const v in r.layout)this.setLayoutProperty(v,r.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $c(d.paint)}}setFilter(r){this.filter=r,this._featureFilter=Fc(r,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}getLayoutAffectingGlobalStateRefs(){const r=new Set;if(this._unevaluatedLayout)for(const d in this._unevaluatedLayout._values){const y=this._unevaluatedLayout._values[d];for(const v of y.getGlobalStateRefs())r.add(v)}for(const d of this._featureFilter.getGlobalStateRefs())r.add(d);return r}getPaintAffectingGlobalStateRefs(){var r;const d=new globalThis.Map;if(this._transitionablePaint)for(const y in this._transitionablePaint._values){const v=this._transitionablePaint._values[y].value;for(const C of v.getGlobalStateRefs()){const M=(r=d.get(C))!==null&&r!==void 0?r:[];M.push({name:y,value:v.value}),d.set(C,M)}}return d}setLayoutProperty(r,d,y={}){d!=null&&this._validate(Tl,`layers.${this.id}.layout.${r}`,r,d,y)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,d):this.visibility=d)}getPaintProperty(r){return r.endsWith(vp)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,d,y={}){if(d!=null&&this._validate(Wm,`layers.${this.id}.paint.${r}`,r,d,y))return!1;if(r.endsWith(vp))return this._transitionablePaint.setTransition(r.slice(0,-11),d||void 0),!1;{const v=this._transitionablePaint._values[r],C=v.property.specification["property-type"]==="cross-faded-data-driven",M=v.value.isDataDriven(),R=v.value;this._transitionablePaint.setValue(r,d),this._handleSpecialPaintPropertyUpdate(r);const I=this._transitionablePaint._values[r].value;return I.isDataDriven()||M||C||this._handleOverridablePaintPropertyUpdate(r,R,I)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,d,y){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,d){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,d)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Lt(r,(d,y)=>!(d===void 0||y==="layout"&&!Object.keys(d).length||y==="paint"&&!Object.keys(d).length))}_validate(r,d,y,v,C={}){return(!C||C.validate!==!1)&&xp(this,r.call(ba,{key:d,layerType:this.type,objectKey:y,value:v,styleSpec:ct,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const d=this.paint.get(r);if(d instanceof Lr&&zc(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}let Hc;var wp={get paint(){return Hc=Hc||new jr({"raster-opacity":new En(ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new En(ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new En(ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new En(ct.paint_raster["raster-brightness-max"]),"raster-saturation":new En(ct.paint_raster["raster-saturation"]),"raster-contrast":new En(ct.paint_raster["raster-contrast"]),"raster-resampling":new En(ct.paint_raster["raster-resampling"]),"raster-fade-duration":new En(ct.paint_raster["raster-fade-duration"])})}};class Sp extends to{constructor(r,d){super(r,wp,d)}}const jp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class lr{constructor(r,d){this._structArray=r,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class fi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,d){return r._trim(),d&&(r.isTransferred=!0,d.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const d=Object.create(this.prototype);return d.arrayBuffer=r.arrayBuffer,d.length=r.length,d.capacity=r.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ts(f,r=1){let d=0,y=0;return{members:f.map(v=>{const C=jp[v.type].BYTES_PER_ELEMENT,M=d=no(d,Math.max(r,C)),R=v.components||1;return y=Math.max(y,C),d+=C*R,{name:v.name,type:v.type,components:R,offset:M}}),size:no(d,Math.max(y,r)),alignment:r}}function no(f,r){return Math.ceil(f/r)*r}class Nl extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d){const y=this.length;return this.resize(y+1),this.emplace(y,r,d)}emplace(r,d,y){const v=2*r;return this.int16[v+0]=d,this.int16[v+1]=y,r}}Nl.prototype.bytesPerElement=4,xn("StructArrayLayout2i4",Nl);class Jl extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=3*r;return this.int16[C+0]=d,this.int16[C+1]=y,this.int16[C+2]=v,r}}Jl.prototype.bytesPerElement=6,xn("StructArrayLayout3i6",Jl);class io extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v){const C=this.length;return this.resize(C+1),this.emplace(C,r,d,y,v)}emplace(r,d,y,v,C){const M=4*r;return this.int16[M+0]=d,this.int16[M+1]=y,this.int16[M+2]=v,this.int16[M+3]=C,r}}io.prototype.bytesPerElement=8,xn("StructArrayLayout4i8",io);class ec extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M){const R=this.length;return this.resize(R+1),this.emplace(R,r,d,y,v,C,M)}emplace(r,d,y,v,C,M,R){const I=6*r;return this.int16[I+0]=d,this.int16[I+1]=y,this.int16[I+2]=v,this.int16[I+3]=C,this.int16[I+4]=M,this.int16[I+5]=R,r}}ec.prototype.bytesPerElement=12,xn("StructArrayLayout2i4i12",ec);class $d extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M){const R=this.length;return this.resize(R+1),this.emplace(R,r,d,y,v,C,M)}emplace(r,d,y,v,C,M,R){const I=4*r,V=8*r;return this.int16[I+0]=d,this.int16[I+1]=y,this.uint8[V+4]=v,this.uint8[V+5]=C,this.uint8[V+6]=M,this.uint8[V+7]=R,r}}$d.prototype.bytesPerElement=8,xn("StructArrayLayout2i4ub8",$d);class Xo extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d){const y=this.length;return this.resize(y+1),this.emplace(y,r,d)}emplace(r,d,y){const v=2*r;return this.float32[v+0]=d,this.float32[v+1]=y,r}}Xo.prototype.bytesPerElement=8,xn("StructArrayLayout2f8",Xo);class tc extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V,H){const X=this.length;return this.resize(X+1),this.emplace(X,r,d,y,v,C,M,R,I,V,H)}emplace(r,d,y,v,C,M,R,I,V,H,X){const ie=10*r;return this.uint16[ie+0]=d,this.uint16[ie+1]=y,this.uint16[ie+2]=v,this.uint16[ie+3]=C,this.uint16[ie+4]=M,this.uint16[ie+5]=R,this.uint16[ie+6]=I,this.uint16[ie+7]=V,this.uint16[ie+8]=H,this.uint16[ie+9]=X,r}}tc.prototype.bytesPerElement=20,xn("StructArrayLayout10ui20",tc);class Kh extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I){const V=this.length;return this.resize(V+1),this.emplace(V,r,d,y,v,C,M,R,I)}emplace(r,d,y,v,C,M,R,I,V){const H=8*r;return this.uint16[H+0]=d,this.uint16[H+1]=y,this.uint16[H+2]=v,this.uint16[H+3]=C,this.uint16[H+4]=M,this.uint16[H+5]=R,this.uint16[H+6]=I,this.uint16[H+7]=V,r}}Kh.prototype.bytesPerElement=16,xn("StructArrayLayout8ui16",Kh);class Hd extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V,H,X,ie){const oe=this.length;return this.resize(oe+1),this.emplace(oe,r,d,y,v,C,M,R,I,V,H,X,ie)}emplace(r,d,y,v,C,M,R,I,V,H,X,ie,oe){const de=12*r;return this.int16[de+0]=d,this.int16[de+1]=y,this.int16[de+2]=v,this.int16[de+3]=C,this.uint16[de+4]=M,this.uint16[de+5]=R,this.uint16[de+6]=I,this.uint16[de+7]=V,this.int16[de+8]=H,this.int16[de+9]=X,this.int16[de+10]=ie,this.int16[de+11]=oe,r}}Hd.prototype.bytesPerElement=24,xn("StructArrayLayout4i4ui4i24",Hd);class nc extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=3*r;return this.float32[C+0]=d,this.float32[C+1]=y,this.float32[C+2]=v,r}}nc.prototype.bytesPerElement=12,xn("StructArrayLayout3f12",nc);class Qh extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const d=this.length;return this.resize(d+1),this.emplace(d,r)}emplace(r,d){return this.uint32[1*r+0]=d,r}}Qh.prototype.bytesPerElement=4,xn("StructArrayLayout1ul4",Qh);class Jh extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V){const H=this.length;return this.resize(H+1),this.emplace(H,r,d,y,v,C,M,R,I,V)}emplace(r,d,y,v,C,M,R,I,V,H){const X=10*r,ie=5*r;return this.int16[X+0]=d,this.int16[X+1]=y,this.int16[X+2]=v,this.int16[X+3]=C,this.int16[X+4]=M,this.int16[X+5]=R,this.uint32[ie+3]=I,this.uint16[X+8]=V,this.uint16[X+9]=H,r}}Jh.prototype.bytesPerElement=20,xn("StructArrayLayout6i1ul2ui20",Jh);class Zu extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M){const R=this.length;return this.resize(R+1),this.emplace(R,r,d,y,v,C,M)}emplace(r,d,y,v,C,M,R){const I=6*r;return this.int16[I+0]=d,this.int16[I+1]=y,this.int16[I+2]=v,this.int16[I+3]=C,this.int16[I+4]=M,this.int16[I+5]=R,r}}Zu.prototype.bytesPerElement=12,xn("StructArrayLayout2i2i2i12",Zu);class ef extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,d,y,v,C)}emplace(r,d,y,v,C,M){const R=4*r,I=8*r;return this.float32[R+0]=d,this.float32[R+1]=y,this.float32[R+2]=v,this.int16[I+6]=C,this.int16[I+7]=M,r}}ef.prototype.bytesPerElement=16,xn("StructArrayLayout2f1f2i16",ef);class j extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M){const R=this.length;return this.resize(R+1),this.emplace(R,r,d,y,v,C,M)}emplace(r,d,y,v,C,M,R){const I=16*r,V=4*r,H=8*r;return this.uint8[I+0]=d,this.uint8[I+1]=y,this.float32[V+1]=v,this.float32[V+2]=C,this.int16[H+6]=M,this.int16[H+7]=R,r}}j.prototype.bytesPerElement=16,xn("StructArrayLayout2ub2f2i16",j);class s extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=3*r;return this.uint16[C+0]=d,this.uint16[C+1]=y,this.uint16[C+2]=v,r}}s.prototype.bytesPerElement=6,xn("StructArrayLayout3ui6",s);class p extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V,H,X,ie,oe,de,xe,ve,Re){const at=this.length;return this.resize(at+1),this.emplace(at,r,d,y,v,C,M,R,I,V,H,X,ie,oe,de,xe,ve,Re)}emplace(r,d,y,v,C,M,R,I,V,H,X,ie,oe,de,xe,ve,Re,at){const Be=24*r,Ze=12*r,xt=48*r;return this.int16[Be+0]=d,this.int16[Be+1]=y,this.uint16[Be+2]=v,this.uint16[Be+3]=C,this.uint32[Ze+2]=M,this.uint32[Ze+3]=R,this.uint32[Ze+4]=I,this.uint16[Be+10]=V,this.uint16[Be+11]=H,this.uint16[Be+12]=X,this.float32[Ze+7]=ie,this.float32[Ze+8]=oe,this.uint8[xt+36]=de,this.uint8[xt+37]=xe,this.uint8[xt+38]=ve,this.uint32[Ze+10]=Re,this.int16[Be+22]=at,r}}p.prototype.bytesPerElement=48,xn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",p);class x extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V,H,X,ie,oe,de,xe,ve,Re,at,Be,Ze,xt,Mt,Zt,cn,an,dn,Nn,fn){const pn=this.length;return this.resize(pn+1),this.emplace(pn,r,d,y,v,C,M,R,I,V,H,X,ie,oe,de,xe,ve,Re,at,Be,Ze,xt,Mt,Zt,cn,an,dn,Nn,fn)}emplace(r,d,y,v,C,M,R,I,V,H,X,ie,oe,de,xe,ve,Re,at,Be,Ze,xt,Mt,Zt,cn,an,dn,Nn,fn,pn){const $t=32*r,Wn=16*r;return this.int16[$t+0]=d,this.int16[$t+1]=y,this.int16[$t+2]=v,this.int16[$t+3]=C,this.int16[$t+4]=M,this.int16[$t+5]=R,this.int16[$t+6]=I,this.int16[$t+7]=V,this.uint16[$t+8]=H,this.uint16[$t+9]=X,this.uint16[$t+10]=ie,this.uint16[$t+11]=oe,this.uint16[$t+12]=de,this.uint16[$t+13]=xe,this.uint16[$t+14]=ve,this.uint16[$t+15]=Re,this.uint16[$t+16]=at,this.uint16[$t+17]=Be,this.uint16[$t+18]=Ze,this.uint16[$t+19]=xt,this.uint16[$t+20]=Mt,this.uint16[$t+21]=Zt,this.uint16[$t+22]=cn,this.uint32[Wn+12]=an,this.float32[Wn+13]=dn,this.float32[Wn+14]=Nn,this.uint16[$t+30]=fn,this.uint16[$t+31]=pn,r}}x.prototype.bytesPerElement=64,xn("StructArrayLayout8i15ui1ul2f2ui64",x);class w extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const d=this.length;return this.resize(d+1),this.emplace(d,r)}emplace(r,d){return this.float32[1*r+0]=d,r}}w.prototype.bytesPerElement=4,xn("StructArrayLayout1f4",w);class T extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=3*r;return this.uint16[6*r+0]=d,this.float32[C+1]=y,this.float32[C+2]=v,r}}T.prototype.bytesPerElement=12,xn("StructArrayLayout1ui2f12",T);class P extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=4*r;return this.uint32[2*r+0]=d,this.uint16[C+2]=y,this.uint16[C+3]=v,r}}P.prototype.bytesPerElement=8,xn("StructArrayLayout1ul2ui8",P);class O extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d){const y=this.length;return this.resize(y+1),this.emplace(y,r,d)}emplace(r,d,y){const v=2*r;return this.uint16[v+0]=d,this.uint16[v+1]=y,r}}O.prototype.bytesPerElement=4,xn("StructArrayLayout2ui4",O);class F extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const d=this.length;return this.resize(d+1),this.emplace(d,r)}emplace(r,d){return this.uint16[1*r+0]=d,r}}F.prototype.bytesPerElement=2,xn("StructArrayLayout1ui2",F);class G extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y,v){const C=this.length;return this.resize(C+1),this.emplace(C,r,d,y,v)}emplace(r,d,y,v,C){const M=4*r;return this.float32[M+0]=d,this.float32[M+1]=y,this.float32[M+2]=v,this.float32[M+3]=C,r}}G.prototype.bytesPerElement=16,xn("StructArrayLayout4f16",G);class Y extends lr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new g(this.anchorPointX,this.anchorPointY)}}Y.prototype.size=20;class ne extends Jh{get(r){return new Y(this,r)}}xn("CollisionBoxArray",ne);class ee extends lr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ee.prototype.size=48;class ce extends p{get(r){return new ee(this,r)}}xn("PlacedSymbolArray",ce);class ye extends lr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ye.prototype.size=64;class Se extends x{get(r){return new ye(this,r)}}xn("SymbolInstanceArray",Se);class we extends w{getoffsetX(r){return this.float32[1*r+0]}}xn("GlyphOffsetArray",we);class Te extends Jl{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}xn("SymbolLineVertexArray",Te);class ze extends lr{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ze.prototype.size=12;class Le extends T{get(r){return new ze(this,r)}}xn("TextAnchorOffsetArray",Le);class Oe extends lr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Oe.prototype.size=8;class qe extends P{get(r){return new Oe(this,r)}}xn("FeatureIndexArray",qe);class Ke extends Nl{}class Fe extends Nl{}class it extends Nl{}class kt extends ec{}class yt extends $d{}class _t extends Xo{}class bt extends tc{}class sn extends Kh{}class rn extends Hd{}class Yt extends nc{}class Mn extends Qh{}class ni extends Zu{}class Li extends j{}class Bi extends s{}class Ji extends O{}const ks=Ts([{name:"a_pos",components:2,type:"Int16"}],4),{members:is}=ks;class gi{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,d,y,v){const C=this.segments[this.segments.length-1];return r>gi.MAX_VERTEX_ARRAY_LENGTH&&en(`Max vertices per segment is ${gi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${gi.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!C||C.vertexLength+r>gi.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==v?this.createNewSegment(d,y,v):C}createNewSegment(r,d,y){const v={vertexOffset:r.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(v.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(r,d,y){return this.prepareSegment(0,r,d,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const d in r.vaos)r.vaos[d].destroy()}static simpleSegment(r,d,y,v){return new gi([{vertexOffset:r,primitiveOffset:d,vertexLength:y,primitiveLength:v,vaos:{},sortKey:0}])}}function as(f,r){return 256*(f=dt(Math.floor(f),0,255))+dt(Math.floor(r),0,255)}gi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xn("SegmentVector",gi);const er=Ts([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Bs=Ts([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Vs,yr,Al,so={exports:{}},ic={exports:{}},ro={exports:{}},sc=function(){if(Al)return so.exports;Al=1;var f=(Vs||(Vs=1,ic.exports=function(d,y){var v,C,M,R,I,V,H,X;for(C=d.length-(v=3&d.length),M=y,I=3432918353,V=461845907,X=0;X<C;)H=255&d.charCodeAt(X)|(255&d.charCodeAt(++X))<<8|(255&d.charCodeAt(++X))<<16|(255&d.charCodeAt(++X))<<24,++X,M=27492+(65535&(R=5*(65535&(M=(M^=H=(65535&(H=(H=(65535&H)*I+(((H>>>16)*I&65535)<<16)&4294967295)<<15|H>>>17))*V+(((H>>>16)*V&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(R>>>16)&65535)<<16);switch(H=0,v){case 3:H^=(255&d.charCodeAt(X+2))<<16;case 2:H^=(255&d.charCodeAt(X+1))<<8;case 1:M^=H=(65535&(H=(H=(65535&(H^=255&d.charCodeAt(X)))*I+(((H>>>16)*I&65535)<<16)&4294967295)<<15|H>>>17))*V+(((H>>>16)*V&65535)<<16)&4294967295}return M^=d.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0}),ic.exports),r=(yr||(yr=1,ro.exports=function(d,y){for(var v,C=d.length,M=y^C,R=0;C>=4;)v=1540483477*(65535&(v=255&d.charCodeAt(R)|(255&d.charCodeAt(++R))<<8|(255&d.charCodeAt(++R))<<16|(255&d.charCodeAt(++R))<<24))+((1540483477*(v>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),C-=4,++R;switch(C){case 3:M^=(255&d.charCodeAt(R+2))<<16;case 2:M^=(255&d.charCodeAt(R+1))<<8;case 1:M=1540483477*(65535&(M^=255&d.charCodeAt(R)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0}),ro.exports);return so.exports=f,so.exports.murmur3=f,so.exports.murmur2=r,so.exports}(),Pl=_(sc);class Fa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,d,y,v){this.ids.push(Br(r)),this.positions.push(d,y,v)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Br(r);let y=0,v=this.ids.length-1;for(;y<v;){const M=y+v>>1;this.ids[M]>=d?v=M:y=M+1}const C=[];for(;this.ids[y]===d;)C.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return C}static serialize(r,d){const y=new Float64Array(r.ids),v=new Uint32Array(r.positions);return Po(y,v,0,y.length-1),d&&d.push(y.buffer,v.buffer),{ids:y,positions:v}}static deserialize(r){const d=new Fa;return d.ids=r.ids,d.positions=r.positions,d.indexed=!0,d}}function Br(f){const r=+f;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Pl(String(f))}function Po(f,r,d,y){for(;d<y;){const v=f[d+y>>1];let C=d-1,M=y+1;for(;;){do C++;while(f[C]<v);do M--;while(f[M]>v);if(C>=M)break;Ro(f,C,M),Ro(r,3*C,3*M),Ro(r,3*C+1,3*M+1),Ro(r,3*C+2,3*M+2)}M-d<y-M?(Po(f,r,d,M),d=M+1):(Po(f,r,M+1,y),y=M)}}function Ro(f,r,d){const y=f[r];f[r]=f[d],f[d]=y}xn("FeaturePositionMap",Fa);class xr{constructor(r,d){this.gl=r.gl,this.location=d}}class Ds extends xr{constructor(r,d){super(r,d),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Ki extends xr{constructor(r,d){super(r,d),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Us extends xr{constructor(r,d){super(r,d),this.current=ui.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const xs=new Float32Array(16);function tf(f){return[as(255*f.r,255*f.g),as(255*f.b,255*f.a)]}class ao{constructor(r,d,y){this.value=r,this.uniformNames=d.map(v=>`u_${v}`),this.type=y}setUniform(r,d,y){r.set(y.constantOr(this.value))}getBinding(r,d,y){return this.type==="color"?new Us(r,d):new Ds(r,d)}}class ia{constructor(r,d){this.uniformNames=d.map(y=>`u_${y}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=r.tlbr}setConstantDashPositions(r,d){this.dashTo=[0,r.y,r.height,r.width],this.dashFrom=[0,d.y,d.height,d.width]}setUniform(r,d,y,v){let C=null;v==="u_pattern_to"?C=this.patternTo:v==="u_pattern_from"?C=this.patternFrom:v==="u_dasharray_to"?C=this.dashTo:v==="u_dasharray_from"?C=this.dashFrom:v==="u_pixel_ratio_to"?C=this.pixelRatioTo:v==="u_pixel_ratio_from"&&(C=this.pixelRatioFrom),C!==null&&r.set(C)}getBinding(r,d,y){return y.substr(0,9)==="u_pattern"||y.substr(0,12)==="u_dasharray_"?new Ki(r,d):new Ds(r,d)}}class os{constructor(r,d,y,v){this.expression=r,this.type=y,this.maxValue=0,this.paintVertexAttributes=d.map(C=>({name:`a_${C}`,type:"Float32",components:y==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(r,d,y){const v=this.paintVertexArray.length,C=this.expression.evaluate(new Yi(0,y),d,{},y.canonical,[],y.formattedSection);this.paintVertexArray.resize(r),this._setPaintValue(v,r,C)}updatePaintArray(r,d,y,v,C){const M=this.expression.evaluate(new Yi(0,C),y,v);this._setPaintValue(r,d,M)}_setPaintValue(r,d,y){if(this.type==="color"){const v=tf(y);for(let C=r;C<d;C++)this.paintVertexArray.emplace(C,v[0],v[1])}else{for(let v=r;v<d;v++)this.paintVertexArray.emplace(v,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class va{constructor(r,d,y,v,C,M){this.expression=r,this.uniformNames=d.map(R=>`u_${R}_t`),this.type=y,this.useIntegerZoom=v,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=d.map(R=>({name:`a_${R}`,type:"Float32",components:y==="color"?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(r,d,y){const v=this.expression.evaluate(new Yi(this.zoom,y),d,{},y.canonical,[],y.formattedSection),C=this.expression.evaluate(new Yi(this.zoom+1,y),d,{},y.canonical,[],y.formattedSection),M=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(M,r,v,C)}updatePaintArray(r,d,y,v,C){const M=this.expression.evaluate(new Yi(this.zoom,C),y,v),R=this.expression.evaluate(new Yi(this.zoom+1,C),y,v);this._setPaintValue(r,d,M,R)}_setPaintValue(r,d,y,v){if(this.type==="color"){const C=tf(y),M=tf(v);for(let R=r;R<d;R++)this.paintVertexArray.emplace(R,C[0],C[1],M[0],M[1])}else{for(let C=r;C<d;C++)this.paintVertexArray.emplace(C,y,v);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(v))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,d){const y=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,v=dt(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);r.set(v)}getBinding(r,d,y){return new Ds(r,d)}}class Ko{constructor(r,d,y,v,C,M){this.expression=r,this.type=d,this.useIntegerZoom=y,this.zoom=v,this.layerId=M,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(r,d,y){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(v,r,this.getPositionIds(d),y)}updatePaintArray(r,d,y,v,C){this._setPaintValues(r,d,this.getPositionIds(y),C)}_setPaintValues(r,d,y,v){const C=this.getPositions(v);if(!C||!y)return;const M=C[y.min],R=C[y.mid],I=C[y.max];if(M&&R&&I)for(let V=r;V<d;V++)this.emplace(this.zoomInPaintVertexArray,V,R,M),this.emplace(this.zoomOutPaintVertexArray,V,R,I)}upload(r){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const d=this.getVertexAttributes();this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,d,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,d,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Qo extends Ko{getPositions(r){return r.imagePositions}getPositionIds(r){return r.patterns&&r.patterns[this.layerId]}getVertexAttributes(){return er.members}emplace(r,d,y,v){r.emplace(d,y.tlbr[0],y.tlbr[1],y.tlbr[2],y.tlbr[3],v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],y.pixelRatio,v.pixelRatio)}}class nf extends Ko{getPositions(r){return r.dashPositions}getPositionIds(r){return r.dashes&&r.dashes[this.layerId]}getVertexAttributes(){return Bs.members}emplace(r,d,y,v){r.emplace(d,0,y.y,y.height,y.width,0,v.y,v.height,v.width)}}class sf{constructor(r,d,y){this.binders={},this._buffers=[];const v=[];for(const C in r.paint._values){if(!y(C))continue;const M=r.paint.get(C);if(!(M instanceof Lr&&zc(M.property.specification)))continue;const R=Yu(C,r.type),I=M.value,V=M.property.specification.type,H=M.property.useIntegerZoom,X=M.property.specification["property-type"],ie=X==="cross-faded"||X==="cross-faded-data-driven";if(I.kind==="constant")this.binders[C]=ie?new ia(I.value,R):new ao(I.value,R,V),v.push(`/u_${C}`);else if(I.kind==="source"||ie){const oe=rf(C,V,"source");this.binders[C]=ie?C==="line-dasharray"?new nf(I,V,H,d,oe,r.id):new Qo(I,V,H,d,oe,r.id):new os(I,R,V,oe),v.push(`/a_${C}`)}else{const oe=rf(C,V,"composite");this.binders[C]=new va(I,R,V,H,d,oe),v.push(`/z_${C}`)}}this.cacheKey=v.sort().join("")}getMaxValue(r){const d=this.binders[r];return d instanceof os||d instanceof va?d.maxValue:0}populatePaintArrays(r,d,y){for(const v in this.binders){const C=this.binders[v];(C instanceof os||C instanceof va||C instanceof Ko)&&C.populatePaintArray(r,d,y)}}setConstantPatternPositions(r,d){for(const y in this.binders){const v=this.binders[y];v instanceof ia&&v.setConstantPatternPositions(r,d)}}setConstantDashPositions(r,d){for(const y in this.binders){const v=this.binders[y];v instanceof ia&&v.setConstantDashPositions(r,d)}}updatePaintArrays(r,d,y,v,C){let M=!1;for(const R in r){const I=d.getPositions(R);for(const V of I){const H=y.feature(V.index);for(const X in this.binders){const ie=this.binders[X];if((ie instanceof os||ie instanceof va||ie instanceof Ko)&&ie.expression.isStateDependent===!0){const oe=v.paint.get(X);ie.expression=oe.value,ie.updatePaintArray(V.start,V.end,H,r[R],C),M=!0}}}}return M}defines(){const r=[];for(const d in this.binders){const y=this.binders[d];(y instanceof ao||y instanceof ia)&&r.push(...y.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return r}getBinderAttributes(){const r=[];for(const d in this.binders){const y=this.binders[d];if(y instanceof os||y instanceof va)for(let v=0;v<y.paintVertexAttributes.length;v++)r.push(y.paintVertexAttributes[v].name);else if(y instanceof Ko){const v=y.getVertexAttributes();for(const C of v)r.push(C.name)}}return r}getBinderUniforms(){const r=[];for(const d in this.binders){const y=this.binders[d];if(y instanceof ao||y instanceof ia||y instanceof va)for(const v of y.uniformNames)r.push(v)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,d){const y=[];for(const v in this.binders){const C=this.binders[v];if(C instanceof ao||C instanceof ia||C instanceof va){for(const M of C.uniformNames)if(d[M]){const R=C.getBinding(r,d[M],M);y.push({name:M,property:v,binding:R})}}}return y}setUniforms(r,d,y,v){for(const{name:C,property:M,binding:R}of d)this.binders[M].setUniform(R,v,y.get(M),C)}updatePaintBuffers(r){this._buffers=[];for(const d in this.binders){const y=this.binders[d];if(r&&y instanceof Ko){const v=r.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(y instanceof os||y instanceof va)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(r){for(const d in this.binders){const y=this.binders[d];(y instanceof os||y instanceof va||y instanceof Ko)&&y.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const d=this.binders[r];(d instanceof os||d instanceof va||d instanceof Ko)&&d.destroy()}}}class wa{constructor(r,d,y=()=>!0){this.programConfigurations={};for(const v of r)this.programConfigurations[v.id]=new sf(v,d,y);this.needsUpload=!1,this._featureMap=new Fa,this._bufferOffset=0}populatePaintArrays(r,d,y,v){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(r,d,v);d.id!==void 0&&this._featureMap.add(d.id,y,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,d,y,v){for(const C of y)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(r,this._featureMap,d,C,v)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Yu(f,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${r}-`,"").replace(/-/g,"_")]}function rf(f,r,d){const y={color:{source:Xo,composite:G},number:{source:w,composite:Xo}},v=function(C){return{"line-pattern":{source:bt,composite:bt},"fill-pattern":{source:bt,composite:bt},"fill-extrusion-pattern":{source:bt,composite:bt},"line-dasharray":{source:sn,composite:sn}}[C]}(f);return v&&v[d]||y[r][d]}xn("ConstantBinder",ao),xn("CrossFadedConstantBinder",ia),xn("SourceExpressionBinder",os),xn("CrossFadedPatternBinder",Qo),xn("CrossFadedDasharrayBinder",nf),xn("CompositeExpressionBinder",va),xn("ProgramConfiguration",sf,{omit:["_buffers"]}),xn("ProgramConfigurationSet",wa);const Xu=Math.pow(2,14)-1,Vy=-Xu-1;function rc(f){const r=Nt/f.extent,d=f.loadGeometry();for(let y=0;y<d.length;y++){const v=d[y];for(let C=0;C<v.length;C++){const M=v[C],R=Math.round(M.x*r),I=Math.round(M.y*r);M.x=dt(R,Vy,Xu),M.y=dt(I,Vy,Xu),(R<M.x||R>M.x+1||I<M.y||I>M.y+1)&&en("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Ku(f,r){return{type:f.type,id:f.id,properties:f.properties,geometry:r?rc(f):[]}}const Zm=-32768;function p_(f,r,d,y,v){f.emplaceBack(Zm+8*r+y,Zm+8*d+v)}class Ym{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(d=>d.id),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new Fe,this.indexArray=new Bi,this.segments=new gi,this.programConfigurations=new wa(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(r,d,y){const v=this.layers[0],C=[];let M=null,R=!1,I=v.type==="heatmap";if(v.type==="circle"){const H=v;M=H.layout.get("circle-sort-key"),R=!M.isConstant(),I=I||H.paint.get("circle-pitch-alignment")==="map"}const V=I?d.subdivisionGranularity.circle:1;for(const{feature:H,id:X,index:ie,sourceLayerIndex:oe}of r){const de=this.layers[0]._featureFilter.needGeometry,xe=Ku(H,de);if(!this.layers[0]._featureFilter.filter(new Yi(this.zoom),xe,y))continue;const ve=R?M.evaluate(xe,{},y):void 0,Re={id:X,properties:H.properties,type:H.type,sourceLayerIndex:oe,index:ie,geometry:de?xe.geometry:rc(H),patterns:{},sortKey:ve};C.push(Re)}R&&C.sort((H,X)=>H.sortKey-X.sortKey);for(const H of C){const{geometry:X,index:ie,sourceLayerIndex:oe}=H,de=r[ie].feature;this.addFeature(H,X,ie,y,V),d.featureIndex.insert(de,X,ie,oe,this.index)}}update(r,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,d,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,is),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,d,y,v,C=1){let M;switch(C){case 1:M=[0,7];break;case 3:M=[0,2,5,7];break;case 5:M=[0,1,3,4,6,7];break;case 7:M=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${C}; valid values are 1, 3, 5, 7.`)}const R=M.length;for(const I of d)for(const V of I){const H=V.x,X=V.y;if(H<0||H>=Nt||X<0||X>=Nt)continue;const ie=this.segments.prepareSegment(R*R,this.layoutVertexArray,this.indexArray,r.sortKey),oe=ie.vertexLength;for(let de=0;de<R;de++)for(let xe=0;xe<R;xe++)p_(this.layoutVertexArray,H,X,M[xe],M[de]);for(let de=0;de<R-1;de++)for(let xe=0;xe<R-1;xe++){const ve=oe+de*R+xe,Re=oe+(de+1)*R+xe;this.indexArray.emplaceBack(ve,Re+1,ve+1),this.indexArray.emplaceBack(ve,Re,Re+1)}ie.vertexLength+=R*R,ie.primitiveLength+=(R-1)*(R-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,y,{imagePositions:{},canonical:v})}}function m_(f,r){for(let d=0;d<f.length;d++)if(qc(r,f[d]))return!0;for(let d=0;d<r.length;d++)if(qc(f,r[d]))return!0;return!!Xm(f,r)}function Cp(f,r,d){return!!qc(f,r)||!!Km(r,f,d)}function Cr(f,r){if(f.length===1)return $y(r,f[0]);for(let d=0;d<r.length;d++){const y=r[d];for(let v=0;v<y.length;v++)if(qc(f,y[v]))return!0}for(let d=0;d<f.length;d++)if($y(r,f[d]))return!0;for(let d=0;d<r.length;d++)if(Xm(f,r[d]))return!0;return!1}function sa(f,r,d){if(f.length>1){if(Xm(f,r))return!0;for(let y=0;y<r.length;y++)if(Km(r[y],f,d))return!0}for(let y=0;y<f.length;y++)if(Km(f[y],r,d))return!0;return!1}function Xm(f,r){if(f.length===0||r.length===0)return!1;for(let d=0;d<f.length-1;d++){const y=f[d],v=f[d+1];for(let C=0;C<r.length-1;C++)if(g_(y,v,r[C],r[C+1]))return!0}return!1}function g_(f,r,d,y){return _n(f,d,y)!==_n(r,d,y)&&_n(f,r,d)!==_n(f,r,y)}function Km(f,r,d){const y=d*d;if(r.length===1)return f.distSqr(r[0])<y;for(let v=1;v<r.length;v++)if(Uy(f,r[v-1],r[v])<y)return!0;return!1}function Uy(f,r,d){const y=r.distSqr(d);if(y===0)return f.distSqr(r);const v=((f.x-r.x)*(d.x-r.x)+(f.y-r.y)*(d.y-r.y))/y;return f.distSqr(v<0?r:v>1?d:d.sub(r)._mult(v)._add(r))}function $y(f,r){let d,y,v,C=!1;for(let M=0;M<f.length;M++){d=f[M];for(let R=0,I=d.length-1;R<d.length;I=R++)y=d[R],v=d[I],y.y>r.y!=v.y>r.y&&r.x<(v.x-y.x)*(r.y-y.y)/(v.y-y.y)+y.x&&(C=!C)}return C}function qc(f,r){let d=!1;for(let y=0,v=f.length-1;y<f.length;v=y++){const C=f[y],M=f[v];C.y>r.y!=M.y>r.y&&r.x<(M.x-C.x)*(r.y-C.y)/(M.y-C.y)+C.x&&(d=!d)}return d}function Hy(f,r,d){const y=d[0],v=d[2];if(f.x<y.x&&r.x<y.x||f.x>v.x&&r.x>v.x||f.y<y.y&&r.y<y.y||f.y>v.y&&r.y>v.y)return!1;const C=_n(f,r,d[0]);return C!==_n(f,r,d[1])||C!==_n(f,r,d[2])||C!==_n(f,r,d[3])}function qd(f,r,d){const y=r.paint.get(f).value;return y.kind==="constant"?y.value:d.programConfigurations.get(r.id).getMaxValue(f)}function Tp(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function kp(f,r,d,y,v){if(!r[0]&&!r[1])return f;const C=g.convert(r)._mult(v);d==="viewport"&&C._rotate(-y);const M=[];for(let R=0;R<f.length;R++)M.push(f[R].sub(C));return M}function qy({queryGeometry:f,size:r},d){return Cp(f,d,r)}function Gy({queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v},C){return Cp(f,C,r*(d.projectTileCoordinates(C.x,C.y,y,v).signedDistanceFromCamera/d.cameraToCenterDistance))}function Wy({queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v},C){const M=d.projectTileCoordinates(C.x,C.y,y,v).signedDistanceFromCamera,R=r*(d.cameraToCenterDistance/M);return Cp(f,af(C,d,y,v),R)}function y_({queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v},C){return Cp(f,af(C,d,y,v),r)}function Qm({queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v,pitchAlignment:C="map",pitchScale:M="map"},R){const I=C==="map"?M==="map"?qy:Gy:M==="map"?Wy:y_,V={queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v};for(const H of R)for(const X of H)if(I(V,X))return!0;return!1}function af(f,r,d,y){const v=r.projectTileCoordinates(f.x,f.y,d,y).point;return new g((.5*v.x+.5)*r.width,(.5*-v.y+.5)*r.height)}let Jm,Zy;xn("CircleBucket",Ym,{omit:["layers"]});var Yy={get paint(){return Zy=Zy||new jr({"circle-radius":new zn(ct.paint_circle["circle-radius"]),"circle-color":new zn(ct.paint_circle["circle-color"]),"circle-blur":new zn(ct.paint_circle["circle-blur"]),"circle-opacity":new zn(ct.paint_circle["circle-opacity"]),"circle-translate":new En(ct.paint_circle["circle-translate"]),"circle-translate-anchor":new En(ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new En(ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new En(ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zn(ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zn(ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zn(ct.paint_circle["circle-stroke-opacity"])})},get layout(){return Jm=Jm||new jr({"circle-sort-key":new zn(ct.layout_circle["circle-sort-key"])})}};class x_ extends to{constructor(r,d){super(r,Yy,d)}createBucket(r){return new Ym(r)}queryRadius(r){const d=r;return qd("circle-radius",this,d)+qd("circle-stroke-width",this,d)+Tp(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:d,featureState:y,geometry:v,transform:C,pixelsToTileUnits:M,unwrappedTileID:R,getElevation:I}){const V=kp(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-C.bearingInRadians,M),H=this.paint.get("circle-radius").evaluate(d,y)+this.paint.get("circle-stroke-width").evaluate(d,y),X=this.paint.get("circle-pitch-scale"),ie=this.paint.get("circle-pitch-alignment");let oe,de;return ie==="map"?(oe=V,de=H*M):(oe=function(xe,ve,Re,at){return xe.map(Be=>af(Be,ve,Re,at))}(V,C,R,I),de=H),Qm({queryGeometry:oe,size:de,transform:C,unwrappedTileID:R,getElevation:I,pitchAlignment:ie,pitchScale:X},v)}}class ac extends Ym{}let eg;xn("HeatmapBucket",ac,{omit:["layers"]});var tw={get paint(){return eg=eg||new jr({"heatmap-radius":new zn(ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zn(ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new En(ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wu(ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new En(ct.paint_heatmap["heatmap-opacity"])})}};function tg(f,{width:r,height:d},y,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==r*d*y)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${r*d*y}`)}else v=new Uint8Array(r*d*y);return f.width=r,f.height=d,f.data=v,f}function oc(f,{width:r,height:d},y){if(r===f.width&&d===f.height)return;const v=tg({},{width:r,height:d},y);ng(f,v,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,r),height:Math.min(f.height,d)},y),f.width=r,f.height=d,f.data=v.data}function ng(f,r,d,y,v,C){if(v.width===0||v.height===0)return r;if(v.width>f.width||v.height>f.height||d.x>f.width-v.width||d.y>f.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>r.width||v.height>r.height||y.x>r.width-v.width||y.y>r.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const M=f.data,R=r.data;if(M===R)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<v.height;I++){const V=((d.y+I)*f.width+d.x)*C,H=((y.y+I)*r.width+y.x)*C;for(let X=0;X<v.width*C;X++)R[H+X]=M[V+X]}return r}class Qu{constructor(r,d){tg(this,r,1,d)}resize(r){oc(this,r,1)}clone(){return new Qu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,d,y,v,C){ng(r,d,y,v,C,1)}}class Tr{constructor(r,d){tg(this,r,4,d)}resize(r){oc(this,r,4)}replace(r,d){d?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Tr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,d,y,v,C){ng(r,d,y,v,C,4)}setPixel(r,d,y){const v=4*(r*this.width+d);this.data[v+0]=Math.round(255*y.r/y.a),this.data[v+1]=Math.round(255*y.g/y.a),this.data[v+2]=Math.round(255*y.b/y.a),this.data[v+3]=Math.round(255*y.a)}}function $s(f){const r={},d=f.resolution||256,y=f.clips?f.clips.length:1,v=f.image||new Tr({width:d,height:y});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const C=(M,R,I)=>{r[f.evaluationKey]=I;const V=f.expression.evaluate(r);v.setPixel(M/4/d,R/4,V)};if(f.clips)for(let M=0,R=0;M<y;++M,R+=4*d)for(let I=0,V=0;I<d;I++,V+=4){const H=I/(d-1),{start:X,end:ie}=f.clips[M];C(R,V,X*(1-H)+ie*H)}else for(let M=0,R=0;M<d;M++,R+=4)C(0,R,M/(d-1));return v}xn("AlphaImage",Qu),xn("RGBAImage",Tr);const Xy="big-fb";class nw extends to{createBucket(r){return new ac(r)}constructor(r,d){super(r,tw,d),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$s({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Xy)&&this.heatmapFbos.delete(Xy)}queryRadius(r){return qd("heatmap-radius",this,r)}queryIntersectsFeature({queryGeometry:r,feature:d,featureState:y,geometry:v,transform:C,pixelsToTileUnits:M,unwrappedTileID:R,getElevation:I}){return Qm({queryGeometry:r,size:this.paint.get("heatmap-radius").evaluate(d,y)*M,transform:C,unwrappedTileID:R,getElevation:I},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Ky;var Ep={get paint(){return Ky=Ky||new jr({"hillshade-illumination-direction":new En(ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new En(ct.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new En(ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new En(ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new En(ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new En(ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new En(ct.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new En(ct.paint_hillshade["hillshade-method"])})}};class Ju extends to{constructor(r,d){super(r,Ep,d),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let r=this.paint.get("hillshade-illumination-direction").values,d=this.paint.get("hillshade-illumination-altitude").values,y=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const C=Math.max(r.length,d.length,y.length,v.length);r=r.concat(Array(C-r.length).fill(r.at(-1))),d=d.concat(Array(C-d.length).fill(d.at(-1))),y=y.concat(Array(C-y.length).fill(y.at(-1))),v=v.concat(Array(C-v.length).fill(v.at(-1)));const M=d.map(nn);return{directionRadians:r.map(nn),altitudeRadians:M,shadowColor:v,highlightColor:y}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Qy;var __={get paint(){return Qy=Qy||new jr({"color-relief-opacity":new En(ct["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Wu(ct["paint_color-relief"]["color-relief-color"])})}};class Gd{constructor(r,d,y,v){this.context=r,this.format=y,this.texture=r.gl.createTexture(),this.update(d,v)}update(r,d,y){const{width:v,height:C}=r,M=!(this.size&&this.size[0]===v&&this.size[1]===C||y),{context:R}=this,{gl:I}=R;if(this.useMipmap=!!(d&&d.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!d||d.premultiply!==!1)),M)this.size=[v,C],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||on(r)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,r):I.texImage2D(I.TEXTURE_2D,0,this.format,v,C,0,this.format,I.UNSIGNED_BYTE,r.data);else{const{x:V,y:H}=y||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||on(r)?I.texSubImage2D(I.TEXTURE_2D,0,V,H,I.RGBA,I.UNSIGNED_BYTE,r):I.texSubImage2D(I.TEXTURE_2D,0,V,H,v,C,I.RGBA,I.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),R.pixelStoreUnpackFlipY.setDefault(),R.pixelStoreUnpack.setDefault(),R.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,d,y){const{context:v}=this,{gl:C}=v;C.bindTexture(C.TEXTURE_2D,this.texture),y!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=C.LINEAR),r!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,r),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,y||r),this.filter=r),d!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,d),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class Rl{constructor(r,d,y,v=1,C=1,M=1,R=0){if(this.uid=r,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void en(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const I=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=C,this.blueFactor=M,this.baseShift=R;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<I;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(I,V)]=this.data[this._idx(I-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,I)]=this.data[this._idx(V,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<I;V++)for(let H=0;H<I;H++){const X=this.get(V,H);X>this.max&&(this.max=X),X<this.min&&(this.min=X)}}get(r,d){const y=new Uint8Array(this.data.buffer),v=4*this._idx(r,d);return this.unpack(y[v],y[v+1],y[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,d){if(r<-1||r>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(r+1)}unpack(r,d,y){return r*this.redFactor+d*this.greenFactor+y*this.blueFactor-this.baseShift}pack(r){return Jy(r,this.getUnpackVector())}getPixels(){return new Tr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,d,y){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let v=d*this.dim,C=d*this.dim+this.dim,M=y*this.dim,R=y*this.dim+this.dim;switch(d){case-1:v=C-1;break;case 1:C=v+1}switch(y){case-1:M=R-1;break;case 1:R=M+1}const I=-d*this.dim,V=-y*this.dim;for(let H=M;H<R;H++)for(let X=v;X<C;X++)this.data[this._idx(X,H)]=r.data[this._idx(X+I,H+V)]}}function Jy(f,r){const d=r[0],y=r[1],v=r[2],C=r[3],M=Math.min(d,y,v),R=Math.round((f+C)/M);return{r:Math.floor(R*M/d)%256,g:Math.floor(R*M/y)%256,b:Math.floor(R*M/v)%256}}xn("DEMData",Rl);class ex extends to{constructor(r,d){super(r,__,d)}_createColorRamp(r){const d={elevationStops:[],colorStops:[]},y=this._transitionablePaint._values["color-relief-color"].value.expression;if(y instanceof Oc&&y._styleExpression.expression instanceof Si){this.colorRampExpression=y;const M=y._styleExpression.expression;d.elevationStops=M.labels,d.colorStops=[];for(const R of d.elevationStops)d.colorStops.push(M.evaluate({globals:{elevation:R}}))}if(d.elevationStops.length<1&&(d.elevationStops=[0],d.colorStops=[ui.transparent]),d.elevationStops.length<2&&(d.elevationStops.push(d.elevationStops[0]+1),d.colorStops.push(d.colorStops[0])),d.elevationStops.length<=r)return d;const v={elevationStops:[],colorStops:[]},C=(d.elevationStops.length-1)/(r-1);for(let M=0;M<d.elevationStops.length-.5;M+=C)v.elevationStops.push(d.elevationStops[Math.round(M)]),v.colorStops.push(d.colorStops[Math.round(M)]);return en(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(r,d,y){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(d),C=new Tr({width:v.colorStops.length,height:1}),M=new Tr({width:v.colorStops.length,height:1});for(let R=0;R<v.elevationStops.length;R++){const I=Jy(v.elevationStops[R],y);M.setPixel(0,R,new ui(I.r/255,I.g/255,I.b/255,1)),C.setPixel(0,R,v.colorStops[R])}return this.colorRampTextures={elevationTexture:new Gd(r,M,r.gl.RGBA),colorTexture:new Gd(r,C,r.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const b_=Ts([{name:"a_pos",components:2,type:"Int16"}],4),{members:tx}=b_;function of(f,r,d){const y=d.patternDependencies;let v=!1;for(const C of r){const M=C.paint.get(`${f}-pattern`);M.isConstant()||(v=!0);const R=M.constantOr(null);R&&(v=!0,y[R.to]=!0,y[R.from]=!0)}return v}function lf(f,r,d,y,v){const{zoom:C}=y,M=v.patternDependencies;for(const R of r){const I=R.paint.get(`${f}-pattern`).value;if(I.kind!=="constant"){let V=I.evaluate({zoom:C-1},d,{},v.availableImages),H=I.evaluate({zoom:C},d,{},v.availableImages),X=I.evaluate({zoom:C+1},d,{},v.availableImages);V=V&&V.name?V.name:V,H=H&&H.name?H.name:H,X=X&&X.name?X.name:X,M[V]=!0,M[H]=!0,M[X]=!0,d.patterns[R.id]={min:V,mid:H,max:X}}}return d}function nx(f,r,d,y,v){let C;if(v===function(M,R,I,V){let H=0;for(let X=R,ie=I-V;X<I;X+=V)H+=(M[ie]-M[X])*(M[X+1]+M[ie+1]),ie=X;return H}(f,r,d,y)>0)for(let M=r;M<d;M+=y)C=ed(M/y|0,f[M],f[M+1],C);else for(let M=d-y;M>=r;M-=y)C=ed(M/y|0,f[M],f[M+1],C);return C&&Ur(C,C.next)&&(el(C),C=C.next),C}function La(f,r){if(!f)return f;r||(r=f);let d,y=f;do if(d=!1,y.steiner||!Ur(y,y.next)&&Is(y.prev,y,y.next)!==0)y=y.next;else{if(el(y),y=r=y.prev,y===y.next)break;d=!0}while(d||y!==r);return r}function zs(f,r,d,y,v,C,M){if(!f)return;!M&&C&&function(I,V,H,X){let ie=I;do ie.z===0&&(ie.z=Sa(ie.x,ie.y,V,H,X)),ie.prevZ=ie.prev,ie.nextZ=ie.next,ie=ie.next;while(ie!==I);ie.prevZ.nextZ=null,ie.prevZ=null,function(oe){let de,xe=1;do{let ve,Re=oe;oe=null;let at=null;for(de=0;Re;){de++;let Be=Re,Ze=0;for(let Mt=0;Mt<xe&&(Ze++,Be=Be.nextZ,Be);Mt++);let xt=xe;for(;Ze>0||xt>0&&Be;)Ze!==0&&(xt===0||!Be||Re.z<=Be.z)?(ve=Re,Re=Re.nextZ,Ze--):(ve=Be,Be=Be.nextZ,xt--),at?at.nextZ=ve:oe=ve,ve.prevZ=at,at=ve;Re=Be}at.nextZ=null,xe*=2}while(de>1)}(ie)}(f,y,v,C);let R=f;for(;f.prev!==f.next;){const I=f.prev,V=f.next;if(C?v_(f,y,v,C):ix(f))r.push(I.i,f.i,V.i),el(f),f=V.next,R=V.next;else if((f=V)===R){M?M===1?zs(f=Vr(La(f),r),r,d,y,v,C,2):M===2&&iw(f,r,d,y,v,C):zs(La(f),r,d,y,v,C,1);break}}}function ix(f){const r=f.prev,d=f,y=f.next;if(Is(r,d,y)>=0)return!1;const v=r.x,C=d.x,M=y.x,R=r.y,I=d.y,V=y.y,H=Math.min(v,C,M),X=Math.min(R,I,V),ie=Math.max(v,C,M),oe=Math.max(R,I,V);let de=y.next;for(;de!==r;){if(de.x>=H&&de.x<=ie&&de.y>=X&&de.y<=oe&&cf(v,R,C,I,M,V,de.x,de.y)&&Is(de.prev,de,de.next)>=0)return!1;de=de.next}return!0}function v_(f,r,d,y){const v=f.prev,C=f,M=f.next;if(Is(v,C,M)>=0)return!1;const R=v.x,I=C.x,V=M.x,H=v.y,X=C.y,ie=M.y,oe=Math.min(R,I,V),de=Math.min(H,X,ie),xe=Math.max(R,I,V),ve=Math.max(H,X,ie),Re=Sa(oe,de,r,d,y),at=Sa(xe,ve,r,d,y);let Be=f.prevZ,Ze=f.nextZ;for(;Be&&Be.z>=Re&&Ze&&Ze.z<=at;){if(Be.x>=oe&&Be.x<=xe&&Be.y>=de&&Be.y<=ve&&Be!==v&&Be!==M&&cf(R,H,I,X,V,ie,Be.x,Be.y)&&Is(Be.prev,Be,Be.next)>=0||(Be=Be.prevZ,Ze.x>=oe&&Ze.x<=xe&&Ze.y>=de&&Ze.y<=ve&&Ze!==v&&Ze!==M&&cf(R,H,I,X,V,ie,Ze.x,Ze.y)&&Is(Ze.prev,Ze,Ze.next)>=0))return!1;Ze=Ze.nextZ}for(;Be&&Be.z>=Re;){if(Be.x>=oe&&Be.x<=xe&&Be.y>=de&&Be.y<=ve&&Be!==v&&Be!==M&&cf(R,H,I,X,V,ie,Be.x,Be.y)&&Is(Be.prev,Be,Be.next)>=0)return!1;Be=Be.prevZ}for(;Ze&&Ze.z<=at;){if(Ze.x>=oe&&Ze.x<=xe&&Ze.y>=de&&Ze.y<=ve&&Ze!==v&&Ze!==M&&cf(R,H,I,X,V,ie,Ze.x,Ze.y)&&Is(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.nextZ}return!0}function Vr(f,r){let d=f;do{const y=d.prev,v=d.next.next;!Ur(y,v)&&Jo(y,d,d.next,v)&&uf(y,v)&&uf(v,y)&&(r.push(y.i,d.i,v.i),el(d),el(d.next),d=f=v),d=d.next}while(d!==f);return La(d)}function iw(f,r,d,y,v,C){let M=f;do{let R=M.next.next;for(;R!==M.prev;){if(M.i!==R.i&&sw(M,R)){let I=Wc(M,R);return M=La(M,M.next),I=La(I,I.next),zs(M,r,d,y,v,C,0),void zs(I,r,d,y,v,C,0)}R=R.next}M=M.next}while(M!==f)}function w_(f,r){let d=f.x-r.x;return d===0&&(d=f.y-r.y,d===0)&&(d=(f.next.y-f.y)/(f.next.x-f.x)-(r.next.y-r.y)/(r.next.x-r.x)),d}function S_(f,r){const d=function(v,C){let M=C;const R=v.x,I=v.y;let V,H=-1/0;if(Ur(v,M))return M;do{if(Ur(v,M.next))return M.next;if(I<=M.y&&I>=M.next.y&&M.next.y!==M.y){const xe=M.x+(I-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(xe<=R&&xe>H&&(H=xe,V=M.x<M.next.x?M:M.next,xe===R))return V}M=M.next}while(M!==C);if(!V)return null;const X=V,ie=V.x,oe=V.y;let de=1/0;M=V;do{if(R>=M.x&&M.x>=ie&&R!==M.x&&sx(I<oe?R:H,I,ie,oe,I<oe?H:R,I,M.x,M.y)){const xe=Math.abs(I-M.y)/(R-M.x);uf(M,v)&&(xe<de||xe===de&&(M.x>V.x||M.x===V.x&&Hs(V,M)))&&(V=M,de=xe)}M=M.next}while(M!==X);return V}(f,r);if(!d)return r;const y=Wc(d,f);return La(y,y.next),La(d,d.next)}function Hs(f,r){return Is(f.prev,f,r.prev)<0&&Is(r.next,f,f.next)<0}function Sa(f,r,d,y,v){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*v|0)|f<<8))|f<<4))|f<<2))|f<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-y)*v|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Gc(f){let r=f,d=f;do(r.x<d.x||r.x===d.x&&r.y<d.y)&&(d=r),r=r.next;while(r!==f);return d}function sx(f,r,d,y,v,C,M,R){return(v-M)*(r-R)>=(f-M)*(C-R)&&(f-M)*(y-R)>=(d-M)*(r-R)&&(d-M)*(C-R)>=(v-M)*(y-R)}function cf(f,r,d,y,v,C,M,R){return!(f===M&&r===R)&&sx(f,r,d,y,v,C,M,R)}function sw(f,r){return f.next.i!==r.i&&f.prev.i!==r.i&&!function(d,y){let v=d;do{if(v.i!==d.i&&v.next.i!==d.i&&v.i!==y.i&&v.next.i!==y.i&&Jo(v,v.next,d,y))return!0;v=v.next}while(v!==d);return!1}(f,r)&&(uf(f,r)&&uf(r,f)&&function(d,y){let v=d,C=!1;const M=(d.x+y.x)/2,R=(d.y+y.y)/2;do v.y>R!=v.next.y>R&&v.next.y!==v.y&&M<(v.next.x-v.x)*(R-v.y)/(v.next.y-v.y)+v.x&&(C=!C),v=v.next;while(v!==d);return C}(f,r)&&(Is(f.prev,f,r.prev)||Is(f,r.prev,r))||Ur(f,r)&&Is(f.prev,f,f.next)>0&&Is(r.prev,r,r.next)>0)}function Is(f,r,d){return(r.y-f.y)*(d.x-r.x)-(r.x-f.x)*(d.y-r.y)}function Ur(f,r){return f.x===r.x&&f.y===r.y}function Jo(f,r,d,y){const v=ja(Is(f,r,d)),C=ja(Is(f,r,y)),M=ja(Is(d,y,f)),R=ja(Is(d,y,r));return v!==C&&M!==R||!(v!==0||!Mp(f,d,r))||!(C!==0||!Mp(f,y,r))||!(M!==0||!Mp(d,f,y))||!(R!==0||!Mp(d,r,y))}function Mp(f,r,d){return r.x<=Math.max(f.x,d.x)&&r.x>=Math.min(f.x,d.x)&&r.y<=Math.max(f.y,d.y)&&r.y>=Math.min(f.y,d.y)}function ja(f){return f>0?1:f<0?-1:0}function uf(f,r){return Is(f.prev,f,f.next)<0?Is(f,r,f.next)>=0&&Is(f,f.prev,r)>=0:Is(f,r,f.prev)<0||Is(f,f.next,r)<0}function Wc(f,r){const d=Np(f.i,f.x,f.y),y=Np(r.i,r.x,r.y),v=f.next,C=r.prev;return f.next=r,r.prev=f,d.next=v,v.prev=d,y.next=d,d.prev=y,C.next=y,y.prev=C,y}function ed(f,r,d,y){const v=Np(f,r,d);return y?(v.next=y.next,v.prev=y,y.next.prev=v,y.next=v):(v.prev=v,v.next=v),v}function el(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Np(f,r,d){return{i:f,x:r,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class td{constructor(r,d){if(d>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=d}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class Do{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}Do.noSubdivision=new Do({fill:new td(0,0),line:new td(0,0),tile:new td(0,0),stencil:new td(0,0),circle:1}),xn("SubdivisionGranularityExpression",td),xn("SubdivisionGranularitySetting",Do);const Wd=-32768,lc=32767;class Ap{constructor(r,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=Nt/r,this._canonical=d}_getKey(r,d){return(r+=32768)<<16|d+32768}_vertexToIndex(r,d){if(r<-32768||d<-32768||r>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(r),v=0|Math.round(d),C=this._getKey(y,v);if(this._vertexDictionary.has(C))return this._vertexDictionary.get(C);const M=this._vertexBuffer.length/2;return this._vertexDictionary.set(C,M),this._vertexBuffer.push(y,v),M}_subdivideTrianglesScanline(r){if(this._granularity<2)return function(v,C){const M=[];for(let R=0;R<C.length;R+=3){const I=C[R],V=C[R+1],H=C[R+2],X=v[2*I],ie=v[2*I+1];(v[2*V]-X)*(v[2*H+1]-ie)-(v[2*V+1]-ie)*(v[2*H]-X)>0?(M.push(I),M.push(H),M.push(V)):(M.push(I),M.push(V),M.push(H))}return M}(this._vertexBuffer,r);const d=[],y=r.length;for(let v=0;v<y;v+=3){const C=[r[v+0],r[v+1],r[v+2]],M=[this._vertexBuffer[2*r[v+0]+0],this._vertexBuffer[2*r[v+0]+1],this._vertexBuffer[2*r[v+1]+0],this._vertexBuffer[2*r[v+1]+1],this._vertexBuffer[2*r[v+2]+0],this._vertexBuffer[2*r[v+2]+1]];let R=1/0,I=1/0,V=-1/0,H=-1/0;for(let xe=0;xe<3;xe++){const ve=M[2*xe],Re=M[2*xe+1];R=Math.min(R,ve),V=Math.max(V,ve),I=Math.min(I,Re),H=Math.max(H,Re)}if(R===V||I===H)continue;const X=Math.floor(R/this._granularityCellSize),ie=Math.ceil(V/this._granularityCellSize),oe=Math.floor(I/this._granularityCellSize),de=Math.ceil(H/this._granularityCellSize);if(X!==ie||oe!==de)for(let xe=oe;xe<de;xe++){const ve=this._scanlineGenerateVertexRingForCellRow(xe,M,C);j_(this._vertexBuffer,ve,d)}else d.push(...C)}return d}_scanlineGenerateVertexRingForCellRow(r,d,y){const v=r*this._granularityCellSize,C=v+this._granularityCellSize,M=[];for(let R=0;R<3;R++){const I=d[2*R],V=d[2*R+1],H=d[2*(R+1)%6],X=d[(2*(R+1)+1)%6],ie=d[2*(R+2)%6],oe=d[(2*(R+2)+1)%6],de=H-I,xe=X-V,ve=de===0,Re=xe===0,at=(v-V)/xe,Be=(C-V)/xe,Ze=Math.min(at,Be),xt=Math.max(at,Be);if(!Re&&(Ze>=1||xt<=0)||Re&&(V<v||V>C)){X>=v&&X<=C&&M.push(y[(R+1)%3]);continue}!Re&&Ze>0&&M.push(this._vertexToIndex(I+de*Ze,V+xe*Ze));const Mt=I+de*Math.max(Ze,0),Zt=I+de*Math.min(xt,1);ve||this._generateIntraEdgeVertices(M,I,V,H,X,Mt,Zt),!Re&&xt<1&&M.push(this._vertexToIndex(I+de*xt,V+xe*xt)),(Re||X>=v&&X<=C)&&M.push(y[(R+1)%3]),!Re&&(X<=v||X>=C)&&this._generateInterEdgeVertices(M,I,V,H,X,ie,oe,Zt,v,C)}return M}_generateIntraEdgeVertices(r,d,y,v,C,M,R){const I=v-d,V=C-y,H=V===0,X=H?Math.min(d,v):Math.min(M,R),ie=H?Math.max(d,v):Math.max(M,R),oe=Math.floor(X/this._granularityCellSize)+1,de=Math.ceil(ie/this._granularityCellSize)-1;if(H?d<v:M<R)for(let xe=oe;xe<=de;xe++){const ve=xe*this._granularityCellSize;r.push(this._vertexToIndex(ve,y+V*(ve-d)/I))}else for(let xe=de;xe>=oe;xe--){const ve=xe*this._granularityCellSize;r.push(this._vertexToIndex(ve,y+V*(ve-d)/I))}}_generateInterEdgeVertices(r,d,y,v,C,M,R,I,V,H){const X=C-y,ie=M-v,oe=R-C,de=(V-C)/oe,xe=(H-C)/oe,ve=Math.min(de,xe),Re=Math.max(de,xe),at=v+ie*ve;let Be=Math.floor(Math.min(at,I)/this._granularityCellSize)+1,Ze=Math.ceil(Math.max(at,I)/this._granularityCellSize)-1,xt=I<at;const Mt=oe===0;if(Mt&&(R===V||R===H))return;if(Mt||ve>=1||Re<=0){const cn=y-R,an=M+(d-M)*Math.min((V-R)/cn,(H-R)/cn);Be=Math.floor(Math.min(an,I)/this._granularityCellSize)+1,Ze=Math.ceil(Math.max(an,I)/this._granularityCellSize)-1,xt=I<an}const Zt=X>0?H:V;if(xt)for(let cn=Be;cn<=Ze;cn++)r.push(this._vertexToIndex(cn*this._granularityCellSize,Zt));else for(let cn=Ze;cn>=Be;cn--)r.push(this._vertexToIndex(cn*this._granularityCellSize,Zt))}_generateOutline(r){const d=[];for(const y of r){const v=tl(y,this._granularity,!0),C=this._pointArrayToIndices(v),M=[];for(let R=1;R<C.length;R++)M.push(C[R-1]),M.push(C[R]);d.push(M)}return d}_handlePoles(r){let d=!1,y=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(d||y)&&this._fillPoles(r,d,y)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let d=0;d<r.length;d+=2){const y=r[d+1];y===Wd&&(r[d+1]=-32767),y===lc&&(r[d+1]=32766)}}_generatePoleQuad(r,d,y,v,C,M){v>C!=(M===Wd)?(r.push(d),r.push(y),r.push(this._vertexToIndex(v,M)),r.push(y),r.push(this._vertexToIndex(C,M)),r.push(this._vertexToIndex(v,M))):(r.push(y),r.push(d),r.push(this._vertexToIndex(v,M)),r.push(this._vertexToIndex(C,M)),r.push(y),r.push(this._vertexToIndex(v,M)))}_fillPoles(r,d,y){const v=this._vertexBuffer,C=Nt,M=r.length;for(let R=2;R<M;R+=3){const I=r[R-2],V=r[R-1],H=r[R],X=v[2*I],ie=v[2*I+1],oe=v[2*V],de=v[2*V+1],xe=v[2*H],ve=v[2*H+1];d&&(ie===0&&de===0&&this._generatePoleQuad(r,I,V,X,oe,Wd),de===0&&ve===0&&this._generatePoleQuad(r,V,H,oe,xe,Wd),ve===0&&ie===0&&this._generatePoleQuad(r,H,I,xe,X,Wd)),y&&(ie===C&&de===C&&this._generatePoleQuad(r,I,V,X,oe,lc),de===C&&ve===C&&this._generatePoleQuad(r,V,H,oe,xe,lc),ve===C&&ie===C&&this._generatePoleQuad(r,H,I,xe,X,lc))}}_initializeVertices(r){for(let d=0;d<r.length;d+=2)this._vertexToIndex(r[d],r[d+1])}subdividePolygonInternal(r,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:v}=function(R){const I=[],V=[];for(const H of R)if(H.length!==0){H!==R[0]&&I.push(V.length/2);for(let X=0;X<H.length;X++)V.push(H[X].x),V.push(H[X].y)}return{flattened:V,holeIndices:I}}(r);let C;this._initializeVertices(y);try{const R=function(V,H,X=2){const ie=H&&H.length,oe=ie?H[0]*X:V.length;let de=nx(V,0,oe,X,!0);const xe=[];if(!de||de.next===de.prev)return xe;let ve,Re,at;if(ie&&(de=function(Be,Ze,xt,Mt){const Zt=[];for(let cn=0,an=Ze.length;cn<an;cn++){const dn=nx(Be,Ze[cn]*Mt,cn<an-1?Ze[cn+1]*Mt:Be.length,Mt,!1);dn===dn.next&&(dn.steiner=!0),Zt.push(Gc(dn))}Zt.sort(w_);for(let cn=0;cn<Zt.length;cn++)xt=S_(Zt[cn],xt);return xt}(V,H,de,X)),V.length>80*X){ve=V[0],Re=V[1];let Be=ve,Ze=Re;for(let xt=X;xt<oe;xt+=X){const Mt=V[xt],Zt=V[xt+1];Mt<ve&&(ve=Mt),Zt<Re&&(Re=Zt),Mt>Be&&(Be=Mt),Zt>Ze&&(Ze=Zt)}at=Math.max(Be-ve,Ze-Re),at=at!==0?32767/at:0}return zs(de,xe,X,ve,Re,at,0),xe}(y,v),I=this._convertIndices(y,R);C=this._subdivideTrianglesScanline(I)}catch(R){console.error(R)}let M=[];return d&&(M=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(C),{verticesFlattened:this._vertexBuffer,indicesTriangles:C,indicesLineList:M}}_convertIndices(r,d){const y=[];for(let v=0;v<d.length;v++)y.push(this._vertexToIndex(r[2*d[v]],r[2*d[v]+1]));return y}_pointArrayToIndices(r){const d=[];for(let y=0;y<r.length;y++){const v=r[y];d.push(this._vertexToIndex(v.x,v.y))}return d}}function df(f,r,d,y=!0){return new Ap(d,r).subdividePolygonInternal(f,y)}function tl(f,r,d=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const y=f[0],v=f[f.length-1],C=d&&(y.x!==v.x||y.y!==v.y);if(r<2)return C?[...f,f[0]]:[...f];const M=Math.floor(Nt/r),R=[];R.push(new g(f[0].x,f[0].y));const I=f.length,V=C?I:I-1;for(let H=0;H<V;H++){const X=f[H],ie=H<I-1?f[H+1]:f[0],oe=X.x,de=X.y,xe=ie.x,ve=ie.y,Re=oe!==xe,at=de!==ve;if(!Re&&!at)continue;const Be=xe-oe,Ze=ve-de,xt=Math.abs(Be),Mt=Math.abs(Ze);let Zt=oe,cn=de;for(;;){const dn=Be>0?(Math.floor(Zt/M)+1)*M:(Math.ceil(Zt/M)-1)*M,Nn=Ze>0?(Math.floor(cn/M)+1)*M:(Math.ceil(cn/M)-1)*M,fn=Math.abs(Zt-dn),pn=Math.abs(cn-Nn),$t=Math.abs(Zt-xe),Wn=Math.abs(cn-ve),Qn=Re?fn/xt:Number.POSITIVE_INFINITY,Rn=at?pn/Mt:Number.POSITIVE_INFINITY;if(($t<=fn||!Re)&&(Wn<=pn||!at))break;if(Qn<Rn&&Re||!at){Zt=dn,cn+=Ze*Qn;const An=new g(Zt,Math.round(cn));R[R.length-1].x===An.x&&R[R.length-1].y===An.y||R.push(An)}else{Zt+=Be*Rn,cn=Nn;const An=new g(Math.round(Zt),cn);R[R.length-1].x===An.x&&R[R.length-1].y===An.y||R.push(An)}}const an=new g(xe,ve);R[R.length-1].x===an.x&&R[R.length-1].y===an.y||R.push(an)}return R}function j_(f,r,d){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,v=f[2*r[0]];for(let I=1;I<r.length;I++){const V=f[2*r[I]];V<v&&(v=V,y=I)}const C=r.length;let M=y,R=(M+1)%C;for(;;){const I=M-1>=0?M-1:C-1,V=(R+1)%C,H=f[2*r[I]],X=f[2*r[V]],ie=f[2*r[M]],oe=f[2*r[M]+1],de=f[2*r[R]+1];let xe=!1;if(H<X)xe=!0;else if(H>X)xe=!1;else{const ve=de-oe,Re=-(f[2*r[R]]-ie),at=oe<de?1:-1;((H-ie)*ve+(f[2*r[I]+1]-oe)*Re)*at>((X-ie)*ve+(f[2*r[V]+1]-oe)*Re)*at&&(xe=!0)}if(xe){const ve=r[I],Re=r[M],at=r[R];ve!==Re&&ve!==at&&Re!==at&&d.push(at,Re,ve),M--,M<0&&(M=C-1)}else{const ve=r[V],Re=r[M],at=r[R];ve!==Re&&ve!==at&&Re!==at&&d.push(at,Re,ve),R++,R>=C&&(R=0)}if(I===V)break}}function rx(f,r,d,y,v,C,M,R,I){const V=v.length/2,H=M&&R&&I;if(V<gi.MAX_VERTEX_ARRAY_LENGTH){const X=r.prepareSegment(V,d,y),ie=X.vertexLength;for(let xe=0;xe<C.length;xe+=3)y.emplaceBack(ie+C[xe],ie+C[xe+1],ie+C[xe+2]);let oe,de;X.vertexLength+=V,X.primitiveLength+=C.length/3,H&&(de=M.prepareSegment(V,d,R),oe=de.vertexLength,de.vertexLength+=V);for(let xe=0;xe<v.length;xe+=2)f(v[xe],v[xe+1]);if(H)for(let xe=0;xe<I.length;xe++){const ve=I[xe];for(let Re=1;Re<ve.length;Re+=2)R.emplaceBack(oe+ve[Re-1],oe+ve[Re]);de.primitiveLength+=ve.length/2}}else(function(X,ie,oe,de,xe,ve){const Re=[];for(let Mt=0;Mt<de.length/2;Mt++)Re.push(-1);const at={count:0};let Be=0,Ze=X.getOrCreateLatestSegment(ie,oe),xt=Ze.vertexLength;for(let Mt=2;Mt<xe.length;Mt+=3){const Zt=xe[Mt-2],cn=xe[Mt-1],an=xe[Mt];let dn=Re[Zt]<Be,Nn=Re[cn]<Be,fn=Re[an]<Be;Ze.vertexLength+((dn?1:0)+(Nn?1:0)+(fn?1:0))>gi.MAX_VERTEX_ARRAY_LENGTH&&(Ze=X.createNewSegment(ie,oe),Be=at.count,dn=!0,Nn=!0,fn=!0,xt=0);const pn=Zc(Re,de,ve,at,Zt,dn,Ze),$t=Zc(Re,de,ve,at,cn,Nn,Ze),Wn=Zc(Re,de,ve,at,an,fn,Ze);oe.emplaceBack(xt+pn-Be,xt+$t-Be,xt+Wn-Be),Ze.primitiveLength++}})(r,d,y,v,C,f),H&&function(X,ie,oe,de,xe,ve){const Re=[];for(let Mt=0;Mt<de.length/2;Mt++)Re.push(-1);const at={count:0};let Be=0,Ze=X.getOrCreateLatestSegment(ie,oe),xt=Ze.vertexLength;for(let Mt=0;Mt<xe.length;Mt++){const Zt=xe[Mt];for(let cn=1;cn<xe[Mt].length;cn+=2){const an=Zt[cn-1],dn=Zt[cn];let Nn=Re[an]<Be,fn=Re[dn]<Be;Ze.vertexLength+((Nn?1:0)+(fn?1:0))>gi.MAX_VERTEX_ARRAY_LENGTH&&(Ze=X.createNewSegment(ie,oe),Be=at.count,Nn=!0,fn=!0,xt=0);const pn=Zc(Re,de,ve,at,an,Nn,Ze),$t=Zc(Re,de,ve,at,dn,fn,Ze);oe.emplaceBack(xt+pn-Be,xt+$t-Be),Ze.primitiveLength++}}}(M,d,R,v,I,f),r.forceNewSegmentOnNextPrepare(),M==null||M.forceNewSegmentOnNextPrepare()}function Zc(f,r,d,y,v,C,M){if(C){const R=y.count;return d(r[2*v],r[2*v+1]),f[v]=y.count,y.count++,M.vertexLength++,R}return f[v]}class ig{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(d=>d.id),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new it,this.indexArray=new Bi,this.indexArray2=new Ji,this.programConfigurations=new wa(r.layers,r.zoom),this.segments=new gi,this.segments2=new gi,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(r,d,y){this.hasDependencies=of("fill",this.layers,d);const v=this.layers[0].layout.get("fill-sort-key"),C=!v.isConstant(),M=[];for(const{feature:R,id:I,index:V,sourceLayerIndex:H}of r){const X=this.layers[0]._featureFilter.needGeometry,ie=Ku(R,X);if(!this.layers[0]._featureFilter.filter(new Yi(this.zoom),ie,y))continue;const oe=C?v.evaluate(ie,{},y,d.availableImages):void 0,de={id:I,properties:R.properties,type:R.type,sourceLayerIndex:H,index:V,geometry:X?ie.geometry:rc(R),patterns:{},sortKey:oe};M.push(de)}C&&M.sort((R,I)=>R.sortKey-I.sortKey);for(const R of M){const{geometry:I,index:V,sourceLayerIndex:H}=R;if(this.hasDependencies){const X=lf("fill",this.layers,R,{zoom:this.zoom},d);this.patternFeatures.push(X)}else this.addFeature(R,I,V,y,{},d.subdivisionGranularity);d.featureIndex.insert(r[V].feature,I,V,H,this.index)}}update(r,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,d,this.stateDependentLayers,{imagePositions:y})}addFeatures(r,d,y){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,d,y,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,tx),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,d,y,v,C,M){for(const R of Bh(d,500)){const I=df(R,v,M.fill.getGranularityForZoomLevel(v.z)),V=this.layoutVertexArray;rx((H,X)=>{V.emplaceBack(H,X)},this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,y,{imagePositions:C,canonical:v})}}let Pp,ax;xn("FillBucket",ig,{omit:["layers","patternFeatures"]});var rw={get paint(){return ax=ax||new jr({"fill-antialias":new En(ct.paint_fill["fill-antialias"]),"fill-opacity":new zn(ct.paint_fill["fill-opacity"]),"fill-color":new zn(ct.paint_fill["fill-color"]),"fill-outline-color":new zn(ct.paint_fill["fill-outline-color"]),"fill-translate":new En(ct.paint_fill["fill-translate"]),"fill-translate-anchor":new En(ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new Gu(ct.paint_fill["fill-pattern"])})},get layout(){return Pp=Pp||new jr({"fill-sort-key":new zn(ct.layout_fill["fill-sort-key"])})}};class aw extends to{constructor(r,d){super(r,rw,d)}recalculate(r,d){super.recalculate(r,d);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new ig(r)}queryRadius(){return Tp(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:d,transform:y,pixelsToTileUnits:v}){return Cr(kp(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,v),d)}isTileClipped(){return!0}}const ls=Ts([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Es=Ts([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ai}=ls;class Ci{constructor(r,d,y,v,C){this.properties={},this.extent=y,this.type=0,this.id=void 0,this._pbf=r,this._geometry=-1,this._keys=v,this._values=C,r.readFields(cs,this,d)}loadGeometry(){const r=this._pbf;r.pos=this._geometry;const d=r.readVarint()+r.pos,y=[];let v,C=1,M=0,R=0,I=0;for(;r.pos<d;){if(M<=0){const V=r.readVarint();C=7&V,M=V>>3}if(M--,C===1||C===2)R+=r.readSVarint(),I+=r.readSVarint(),C===1&&(v&&y.push(v),v=[]),v&&v.push(new g(R,I));else{if(C!==7)throw new Error(`unknown command ${C}`);v&&v.push(v[0].clone())}}return v&&y.push(v),y}bbox(){const r=this._pbf;r.pos=this._geometry;const d=r.readVarint()+r.pos;let y=1,v=0,C=0,M=0,R=1/0,I=-1/0,V=1/0,H=-1/0;for(;r.pos<d;){if(v<=0){const X=r.readVarint();y=7&X,v=X>>3}if(v--,y===1||y===2)C+=r.readSVarint(),M+=r.readSVarint(),C<R&&(R=C),C>I&&(I=C),M<V&&(V=M),M>H&&(H=M);else if(y!==7)throw new Error(`unknown command ${y}`)}return[R,V,I,H]}toGeoJSON(r,d,y){const v=this.extent*Math.pow(2,y),C=this.extent*r,M=this.extent*d,R=this.loadGeometry();function I(ie){return[360*(ie.x+C)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(ie.y+M)/v)*Math.PI))-90]}function V(ie){return ie.map(I)}let H;if(this.type===1){const ie=[];for(const de of R)ie.push(de[0]);const oe=V(ie);H=ie.length===1?{type:"Point",coordinates:oe[0]}:{type:"MultiPoint",coordinates:oe}}else if(this.type===2){const ie=R.map(V);H=ie.length===1?{type:"LineString",coordinates:ie[0]}:{type:"MultiLineString",coordinates:ie}}else{if(this.type!==3)throw new Error("unknown feature type");{const ie=function(de){const xe=de.length;if(xe<=1)return[de];const ve=[];let Re,at;for(let Be=0;Be<xe;Be++){const Ze=zo(de[Be]);Ze!==0&&(at===void 0&&(at=Ze<0),at===Ze<0?(Re&&ve.push(Re),Re=[de[Be]]):Re&&Re.push(de[Be]))}return Re&&ve.push(Re),ve}(R),oe=[];for(const de of ie)oe.push(de.map(V));H=oe.length===1?{type:"Polygon",coordinates:oe[0]}:{type:"MultiPolygon",coordinates:oe}}}const X={type:"Feature",geometry:H,properties:this.properties};return this.id!=null&&(X.id=this.id),X}}function cs(f,r,d){f===1?r.id=d.readVarint():f===2?function(y,v){const C=y.readVarint()+y.pos;for(;y.pos<C;){const M=v._keys[y.readVarint()],R=v._values[y.readVarint()];v.properties[M]=R}}(d,r):f===3?r.type=d.readVarint():f===4&&(r._geometry=d.pos)}function zo(f){let r=0;for(let d,y,v=0,C=f.length,M=C-1;v<C;M=v++)d=f[v],y=f[M],r+=(y.x-d.x)*(d.y+y.y);return r}Ci.types=["Unknown","Point","LineString","Polygon"];class Yc{constructor(r,d){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(hf,this,d),this.length=this._features.length}feature(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];const d=this._pbf.readVarint()+this._pbf.pos;return new Ci(this._pbf,d,this.extent,this._keys,this._values)}}function hf(f,r,d){f===15?r.version=d.readVarint():f===1?r.name=d.readString():f===5?r.extent=d.readVarint():f===2?r._features.push(d.pos):f===3?r._keys.push(d.readString()):f===4&&r._values.push(function(y){let v=null;const C=y.readVarint()+y.pos;for(;y.pos<C;){const M=y.readVarint()>>3;v=M===1?y.readString():M===2?y.readFloat():M===3?y.readDouble():M===4?y.readVarint64():M===5?y.readVarint():M===6?y.readSVarint():M===7?y.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v}(d))}class sg{constructor(r,d){this.layers=r.readFields(Xc,{},d)}}function Xc(f,r,d){if(f===3){const y=new Yc(d,d.readVarint()+d.pos);y.length&&(r[y.name]=y)}}const qs=Math.pow(2,13);function nl(f,r,d,y,v,C,M,R){f.emplaceBack(r,d,2*Math.floor(y*qs)+M,v*qs*2,C*qs*2,Math.round(R))}class Kc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(d=>d.id),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new kt,this.centroidVertexArray=new Ke,this.indexArray=new Bi,this.programConfigurations=new wa(r.layers,r.zoom),this.segments=new gi,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(r,d,y){this.features=[],this.hasDependencies=of("fill-extrusion",this.layers,d);for(const{feature:v,id:C,index:M,sourceLayerIndex:R}of r){const I=this.layers[0]._featureFilter.needGeometry,V=Ku(v,I);if(!this.layers[0]._featureFilter.filter(new Yi(this.zoom),V,y))continue;const H={id:C,sourceLayerIndex:R,index:M,geometry:I?V.geometry:rc(v),properties:v.properties,type:v.type,patterns:{}};this.hasDependencies?this.features.push(lf("fill-extrusion",this.layers,H,{zoom:this.zoom},d)):this.addFeature(H,H.geometry,M,y,{},d.subdivisionGranularity),d.featureIndex.insert(v,H.geometry,M,R,this.index,!0)}}addFeatures(r,d,y){for(const v of this.features){const{geometry:C}=v;this.addFeature(v,C,v.index,d,y,r.subdivisionGranularity)}}update(r,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,d,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Ai),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Es.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,d,y,v,C,M){for(const R of Bh(d,500)){const I={x:0,y:0,sampleCount:0},V=this.layoutVertexArray.length;this.processPolygon(I,v,r,R,M);const H=this.layoutVertexArray.length-V,X=Math.floor(I.x/I.sampleCount),ie=Math.floor(I.y/I.sampleCount);for(let oe=0;oe<H;oe++)this.centroidVertexArray.emplaceBack(X,ie)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,y,{imagePositions:C,canonical:v})}processPolygon(r,d,y,v,C){if(v.length<1||Zd(v[0]))return;for(const X of v)X.length!==0&&ox(r,X);const M={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},R=C.fill.getGranularityForZoomLevel(d.z),I=Ci.types[y.type]==="Polygon";for(const X of v){if(X.length===0||Zd(X))continue;const ie=tl(X,R,I);this._generateSideFaces(ie,M)}if(!I)return;const V=df(v,d,R,!1),H=this.layoutVertexArray;rx((X,ie)=>{nl(H,X,ie,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,V.verticesFlattened,V.indicesTriangles)}_generateSideFaces(r,d){let y=0;for(let v=1;v<r.length;v++){const C=r[v],M=r[v-1];if(il(C,M))continue;d.segment.vertexLength+4>gi.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const R=C.sub(M)._perp()._unit(),I=M.dist(C);y+I>32768&&(y=0),nl(this.layoutVertexArray,C.x,C.y,R.x,R.y,0,0,y),nl(this.layoutVertexArray,C.x,C.y,R.x,R.y,0,1,y),y+=I,nl(this.layoutVertexArray,M.x,M.y,R.x,R.y,0,0,y),nl(this.layoutVertexArray,M.x,M.y,R.x,R.y,0,1,y);const V=d.segment.vertexLength;this.indexArray.emplaceBack(V,V+2,V+1),this.indexArray.emplaceBack(V+1,V+2,V+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function ox(f,r){for(let d=0;d<r.length;d++){const y=r[d];d===r.length-1&&r[0].x===y.x&&r[0].y===y.y||(f.x+=y.x,f.y+=y.y,f.sampleCount++)}}function il(f,r){return f.x===r.x&&(f.x<0||f.x>Nt)||f.y===r.y&&(f.y<0||f.y>Nt)}function Zd(f){return f.every(r=>r.x<0)||f.every(r=>r.x>Nt)||f.every(r=>r.y<0)||f.every(r=>r.y>Nt)}let ff;xn("FillExtrusionBucket",Kc,{omit:["layers","features"]});var oo={get paint(){return ff=ff||new jr({"fill-extrusion-opacity":new En(ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zn(ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new En(ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new En(ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Gu(ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zn(ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zn(ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new En(ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class lx extends to{constructor(r,d){super(r,oo,d)}createBucket(r){return new Kc(r)}queryRadius(){return Tp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:d,featureState:y,geometry:v,transform:C,pixelsToTileUnits:M,pixelPosMatrix:R}){const I=kp(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-C.bearingInRadians,M),V=this.paint.get("fill-extrusion-height").evaluate(d,y),H=this.paint.get("fill-extrusion-base").evaluate(d,y),X=function(oe,de){const xe=[];for(const ve of oe){const Re=[ve.x,ve.y,0,1];Rt(Re,Re,de),xe.push(new g(Re[0]/Re[3],Re[1]/Re[3]))}return xe}(I,R),ie=function(oe,de,xe,ve){const Re=[],at=[],Be=ve[8]*de,Ze=ve[9]*de,xt=ve[10]*de,Mt=ve[11]*de,Zt=ve[8]*xe,cn=ve[9]*xe,an=ve[10]*xe,dn=ve[11]*xe;for(const Nn of oe){const fn=[],pn=[];for(const $t of Nn){const Wn=$t.x,Qn=$t.y,Rn=ve[0]*Wn+ve[4]*Qn+ve[12],An=ve[1]*Wn+ve[5]*Qn+ve[13],wi=ve[2]*Wn+ve[6]*Qn+ve[14],ms=ve[3]*Wn+ve[7]*Qn+ve[15],Gs=wi+xt,kr=ms+Mt,aa=Rn+Zt,oa=An+cn,tr=wi+an,_s=ms+dn,_r=new g((Rn+Be)/kr,(An+Ze)/kr);_r.z=Gs/kr,fn.push(_r);const nr=new g(aa/_s,oa/_s);nr.z=tr/_s,pn.push(nr)}Re.push(fn),at.push(pn)}return[Re,at]}(v,H,V,R);return function(oe,de,xe){let ve=1/0;Cr(xe,de)&&(ve=Rp(xe,de[0]));for(let Re=0;Re<de.length;Re++){const at=de[Re],Be=oe[Re];for(let Ze=0;Ze<at.length-1;Ze++){const xt=at[Ze],Mt=[xt,at[Ze+1],Be[Ze+1],Be[Ze],xt];m_(xe,Mt)&&(ve=Math.min(ve,Rp(xe,Mt)))}}return ve!==1/0&&ve}(ie[0],ie[1],X)}}function Yd(f,r){return f.x*r.x+f.y*r.y}function Rp(f,r){if(f.length===1){let d=0;const y=r[d++];let v;for(;!v||y.equals(v);)if(v=r[d++],!v)return 1/0;for(;d<r.length;d++){const C=r[d],M=f[0],R=v.sub(y),I=C.sub(y),V=M.sub(y),H=Yd(R,R),X=Yd(R,I),ie=Yd(I,I),oe=Yd(V,R),de=Yd(V,I),xe=H*ie-X*X,ve=(ie*oe-X*de)/xe,Re=(H*de-X*oe)/xe,at=y.z*(1-ve-Re)+v.z*ve+C.z*Re;if(isFinite(at))return at}return 1/0}{let d=1/0;for(const y of r)d=Math.min(d,y.z);return d}}const rg=Ts([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:nd}=rg,ra=Ts([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:id}=ra,pf=Math.cos(Math.PI/180*37.5),Xd=Math.pow(2,14)/.5;class Dp{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(d=>d.id),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new yt,this.layoutVertexArray2=new _t,this.indexArray=new Bi,this.programConfigurations=new wa(r.layers,r.zoom),this.segments=new gi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(r,d,y){this.hasDependencies=of("line",this.layers,d)||this.hasLineDasharray(this.layers);const v=this.layers[0].layout.get("line-sort-key"),C=!v.isConstant(),M=[];for(const{feature:R,id:I,index:V,sourceLayerIndex:H}of r){const X=this.layers[0]._featureFilter.needGeometry,ie=Ku(R,X);if(!this.layers[0]._featureFilter.filter(new Yi(this.zoom),ie,y))continue;const oe=C?v.evaluate(ie,{},y):void 0,de={id:I,properties:R.properties,type:R.type,sourceLayerIndex:H,index:V,geometry:X?ie.geometry:rc(R),patterns:{},dashes:{},sortKey:oe};M.push(de)}C&&M.sort((R,I)=>R.sortKey-I.sortKey);for(const R of M){const{geometry:I,index:V,sourceLayerIndex:H}=R;this.hasDependencies?(of("line",this.layers,d)?lf("line",this.layers,R,{zoom:this.zoom},d):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,R,this.zoom,d),this.patternFeatures.push(R)):this.addFeature(R,I,V,y,{},{},d.subdivisionGranularity),d.featureIndex.insert(r[V].feature,I,V,H,this.index)}}update(r,d,y,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,d,this.stateDependentLayers,{imagePositions:y,dashPositions:v})}addFeatures(r,d,y,v){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,d,y,v,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,id)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,nd),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,d,y,v,C,M,R){const I=this.layers[0].layout,V=I.get("line-join").evaluate(r,{}),H=I.get("line-cap"),X=I.get("line-miter-limit"),ie=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const oe of d)this.addLine(oe,r,V,H,X,ie,v,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,y,{imagePositions:C,dashPositions:M,canonical:v})}addLine(r,d,y,v,C,M,R,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=tl(r,R?I.line.getGranularityForZoomLevel(R.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<r.length-1;Be++)this.totalDistance+=r[Be].dist(r[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const V=Ci.types[d.type]==="Polygon";let H=r.length;for(;H>=2&&r[H-1].equals(r[H-2]);)H--;let X=0;for(;X<H-1&&r[X].equals(r[X+1]);)X++;if(H<(V?3:2))return;y==="bevel"&&(C=1.05);const ie=this.overscaling<=16?122880/(512*this.overscaling):0,oe=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let de,xe,ve,Re,at;this.e1=this.e2=-1,V&&(de=r[H-2],at=r[X].sub(de)._unit()._perp());for(let Be=X;Be<H;Be++){if(ve=Be===H-1?V?r[X+1]:void 0:r[Be+1],ve&&r[Be].equals(ve))continue;at&&(Re=at),de&&(xe=de),de=r[Be],at=ve?ve.sub(de)._unit()._perp():Re,Re=Re||at;let Ze=Re.add(at);Ze.x===0&&Ze.y===0||Ze._unit();const xt=Re.x*at.x+Re.y*at.y,Mt=Ze.x*at.x+Ze.y*at.y,Zt=Mt!==0?1/Mt:1/0,cn=2*Math.sqrt(2-2*Mt),an=Mt<pf&&xe&&ve,dn=Re.x*at.y-Re.y*at.x>0;if(an&&Be>X){const pn=de.dist(xe);if(pn>2*ie){const $t=de.sub(de.sub(xe)._mult(ie/pn)._round());this.updateDistance(xe,$t),this.addCurrentVertex($t,Re,0,0,oe),xe=$t}}const Nn=xe&&ve;let fn=Nn?y:V?"butt":v;if(Nn&&fn==="round"&&(Zt<M?fn="miter":Zt<=2&&(fn="fakeround")),fn==="miter"&&Zt>C&&(fn="bevel"),fn==="bevel"&&(Zt>2&&(fn="flipbevel"),Zt<C&&(fn="miter")),xe&&this.updateDistance(xe,de),fn==="miter")Ze._mult(Zt),this.addCurrentVertex(de,Ze,0,0,oe);else if(fn==="flipbevel"){if(Zt>100)Ze=at.mult(-1);else{const pn=Zt*Re.add(at).mag()/Re.sub(at).mag();Ze._perp()._mult(pn*(dn?-1:1))}this.addCurrentVertex(de,Ze,0,0,oe),this.addCurrentVertex(de,Ze.mult(-1),0,0,oe)}else if(fn==="bevel"||fn==="fakeround"){const pn=-Math.sqrt(Zt*Zt-1),$t=dn?pn:0,Wn=dn?0:pn;if(xe&&this.addCurrentVertex(de,Re,$t,Wn,oe),fn==="fakeround"){const Qn=Math.round(180*cn/Math.PI/20);for(let Rn=1;Rn<Qn;Rn++){let An=Rn/Qn;if(An!==.5){const ms=An-.5;An+=An*ms*(An-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*ms*ms+(.848013+xt*(.215638*xt-1.06021)))}const wi=at.sub(Re)._mult(An)._add(Re)._unit()._mult(dn?-1:1);this.addHalfVertex(de,wi.x,wi.y,!1,dn,0,oe)}}ve&&this.addCurrentVertex(de,at,-$t,-Wn,oe)}else if(fn==="butt")this.addCurrentVertex(de,Ze,0,0,oe);else if(fn==="square"){const pn=xe?1:-1;this.addCurrentVertex(de,Ze,pn,pn,oe)}else fn==="round"&&(xe&&(this.addCurrentVertex(de,Re,0,0,oe),this.addCurrentVertex(de,Re,1,1,oe,!0)),ve&&(this.addCurrentVertex(de,at,-1,-1,oe,!0),this.addCurrentVertex(de,at,0,0,oe)));if(an&&Be<H-1){const pn=de.dist(ve);if(pn>2*ie){const $t=de.add(ve.sub(de)._mult(ie/pn)._round());this.updateDistance(de,$t),this.addCurrentVertex($t,at,0,0,oe),de=$t}}}}addCurrentVertex(r,d,y,v,C,M=!1){const R=d.y*v-d.x,I=-d.y-d.x*v;this.addHalfVertex(r,d.x+d.y*y,d.y-d.x*y,M,!1,y,C),this.addHalfVertex(r,R,I,M,!0,-v,C),this.distance>Xd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,d,y,v,C,M))}addHalfVertex({x:r,y:d},y,v,C,M,R,I){const V=.5*(this.lineClips?this.scaledDistance*(Xd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(C?1:0),(d<<1)+(M?1:0),Math.round(63*y)+128,Math.round(63*v)+128,1+(R===0?0:R<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const H=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,H,this.e2),I.primitiveLength++),M?this.e2=H:this.e1=H}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,d){this.distance+=r.dist(d),this.updateScaledDistance()}hasLineDasharray(r){for(const d of r){const y=d.paint.get("line-dasharray");if(y&&!y.isConstant())return!0}return!1}addLineDashDependencies(r,d,y,v){for(const C of r){const M=C.paint.get("line-dasharray");if(!M||M.value.kind==="constant")continue;const R=C.layout.get("line-cap")==="round",I={dasharray:M.value.evaluate({zoom:y-1},d,{}),round:R},V={dasharray:M.value.evaluate({zoom:y},d,{}),round:R},H={dasharray:M.value.evaluate({zoom:y+1},d,{}),round:R},X=`${I.dasharray.join(",")},${I.round}`,ie=`${V.dasharray.join(",")},${V.round}`,oe=`${H.dasharray.join(",")},${H.round}`;v.dashDependencies[X]=I,v.dashDependencies[ie]=V,v.dashDependencies[oe]=H,d.dashes[C.id]={min:X,mid:ie,max:oe}}}}let ag,cx;xn("LineBucket",Dp,{omit:["layers","patternFeatures"]});var mf={get paint(){return cx=cx||new jr({"line-opacity":new zn(ct.paint_line["line-opacity"]),"line-color":new zn(ct.paint_line["line-color"]),"line-translate":new En(ct.paint_line["line-translate"]),"line-translate-anchor":new En(ct.paint_line["line-translate-anchor"]),"line-width":new zn(ct.paint_line["line-width"]),"line-gap-width":new zn(ct.paint_line["line-gap-width"]),"line-offset":new zn(ct.paint_line["line-offset"]),"line-blur":new zn(ct.paint_line["line-blur"]),"line-dasharray":new Gu(ct.paint_line["line-dasharray"]),"line-pattern":new Gu(ct.paint_line["line-pattern"]),"line-gradient":new Wu(ct.paint_line["line-gradient"])})},get layout(){return ag=ag||new jr({"line-cap":new En(ct.layout_line["line-cap"]),"line-join":new zn(ct.layout_line["line-join"]),"line-miter-limit":new En(ct.layout_line["line-miter-limit"]),"line-round-limit":new En(ct.layout_line["line-round-limit"]),"line-sort-key":new zn(ct.layout_line["line-sort-key"])})}};class ux extends zn{possiblyEvaluate(r,d){return d=new Yi(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(r,d)}evaluate(r,d,y,v){return d=Ve({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(r,d,y,v)}}let Ca;class C_ extends to{constructor(r,d){super(r,mf,d),this.gradientVersion=0,Ca||(Ca=new ux(mf.paint.properties["line-width"].specification),Ca.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!function(y){return y._styleExpression!==void 0}(d)&&d._styleExpression.expression instanceof Un,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,d){super.recalculate(r,d),this.paint._values["line-floorwidth"]=Ca.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Dp(r)}queryRadius(r){const d=r,y=lo(qd("line-width",this,d),qd("line-gap-width",this,d)),v=qd("line-offset",this,d);return y/2+Math.abs(v)+Tp(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:d,featureState:y,geometry:v,transform:C,pixelsToTileUnits:M}){const R=kp(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-C.bearingInRadians,M),I=M/2*lo(this.paint.get("line-width").evaluate(d,y),this.paint.get("line-gap-width").evaluate(d,y)),V=this.paint.get("line-offset").evaluate(d,y);return V&&(v=function(H,X){const ie=[];for(let oe=0;oe<H.length;oe++){const de=H[oe],xe=[];for(let ve=0;ve<de.length;ve++){const Re=de[ve-1],at=de[ve],Be=de[ve+1],Ze=ve===0?new g(0,0):at.sub(Re)._unit()._perp(),xt=ve===de.length-1?new g(0,0):Be.sub(at)._unit()._perp(),Mt=Ze._add(xt)._unit(),Zt=Mt.x*xt.x+Mt.y*xt.y;Zt!==0&&Mt._mult(1/Zt),xe.push(Mt._mult(X)._add(at))}ie.push(xe)}return ie}(v,V*M)),function(H,X,ie){for(let oe=0;oe<X.length;oe++){const de=X[oe];if(H.length>=3){for(let xe=0;xe<de.length;xe++)if(qc(H,de[xe]))return!0}if(sa(H,de,ie))return!0}return!1}(R,v,I)}isTileClipped(){return!0}}function lo(f,r){return r>0?r+2*f:f}const T_=Ts([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),k_=Ts([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ts([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ow=Ts([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ts([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Qc=Ts([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),og=Ts([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function dx(f,r,d){return f.sections.forEach(y=>{y.text=function(v,C,M){const R=C.layout.get("text-transform").evaluate(M,{});return R==="uppercase"?v=v.toLocaleUpperCase():R==="lowercase"&&(v=v.toLocaleLowerCase()),Ml.applyArabicShaping&&(v=Ml.applyArabicShaping(v)),v}(y.text,r,d)}),f}Ts([{name:"triangle",components:3,type:"Uint16"}]),Ts([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ts([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ts([{type:"Float32",name:"offsetX"}]),Ts([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ts([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const cc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var cr=24;const lg=4294967296,hx=1/lg,cg=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class zp{constructor(r=new Uint8Array(16)){this.buf=ArrayBuffer.isView(r)?r:new Uint8Array(r),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(r,d,y=this.length){for(;this.pos<y;){const v=this.readVarint(),C=v>>3,M=this.pos;this.type=7&v,r(C,d,this),this.pos===M&&this.skip(v)}return d}readMessage(r,d){return this.readFields(r,d,this.readVarint()+this.pos)}readFixed32(){const r=this.dataView.getUint32(this.pos,!0);return this.pos+=4,r}readSFixed32(){const r=this.dataView.getInt32(this.pos,!0);return this.pos+=4,r}readFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*lg;return this.pos+=8,r}readSFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*lg;return this.pos+=8,r}readFloat(){const r=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,r}readDouble(){const r=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,r}readVarint(r){const d=this.buf;let y,v;return v=d[this.pos++],y=127&v,v<128?y:(v=d[this.pos++],y|=(127&v)<<7,v<128?y:(v=d[this.pos++],y|=(127&v)<<14,v<128?y:(v=d[this.pos++],y|=(127&v)<<21,v<128?y:(v=d[this.pos],y|=(15&v)<<28,function(C,M,R){const I=R.buf;let V,H;if(H=I[R.pos++],V=(112&H)>>4,H<128||(H=I[R.pos++],V|=(127&H)<<3,H<128)||(H=I[R.pos++],V|=(127&H)<<10,H<128)||(H=I[R.pos++],V|=(127&H)<<17,H<128)||(H=I[R.pos++],V|=(127&H)<<24,H<128)||(H=I[R.pos++],V|=(1&H)<<31,H<128))return gf(C,V,M);throw new Error("Expected varint not more than 10 bytes")}(y,r,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const r=this.readVarint();return r%2==1?(r+1)/-2:r/2}readBoolean(){return!!this.readVarint()}readString(){const r=this.readVarint()+this.pos,d=this.pos;return this.pos=r,r-d>=12&&cg?cg.decode(this.buf.subarray(d,r)):function(y,v,C){let M="",R=v;for(;R<C;){const I=y[R];let V,H,X,ie=null,oe=I>239?4:I>223?3:I>191?2:1;if(R+oe>C)break;oe===1?I<128&&(ie=I):oe===2?(V=y[R+1],(192&V)==128&&(ie=(31&I)<<6|63&V,ie<=127&&(ie=null))):oe===3?(V=y[R+1],H=y[R+2],(192&V)==128&&(192&H)==128&&(ie=(15&I)<<12|(63&V)<<6|63&H,(ie<=2047||ie>=55296&&ie<=57343)&&(ie=null))):oe===4&&(V=y[R+1],H=y[R+2],X=y[R+3],(192&V)==128&&(192&H)==128&&(192&X)==128&&(ie=(15&I)<<18|(63&V)<<12|(63&H)<<6|63&X,(ie<=65535||ie>=1114112)&&(ie=null))),ie===null?(ie=65533,oe=1):ie>65535&&(ie-=65536,M+=String.fromCharCode(ie>>>10&1023|55296),ie=56320|1023&ie),M+=String.fromCharCode(ie),R+=oe}return M}(this.buf,d,r)}readBytes(){const r=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,r);return this.pos=r,d}readPackedVarint(r=[],d){const y=this.readPackedEnd();for(;this.pos<y;)r.push(this.readVarint(d));return r}readPackedSVarint(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readSVarint());return r}readPackedBoolean(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readBoolean());return r}readPackedFloat(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readFloat());return r}readPackedDouble(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readDouble());return r}readPackedFixed32(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readFixed32());return r}readPackedSFixed32(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readSFixed32());return r}readPackedFixed64(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readFixed64());return r}readPackedSFixed64(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readSFixed64());return r}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(r){const d=7&r;if(d===0)for(;this.buf[this.pos++]>127;);else if(d===2)this.pos=this.readVarint()+this.pos;else if(d===5)this.pos+=4;else{if(d!==1)throw new Error(`Unimplemented type: ${d}`);this.pos+=8}}writeTag(r,d){this.writeVarint(r<<3|d)}realloc(r){let d=this.length||16;for(;d<this.pos+r;)d*=2;if(d!==this.length){const y=new Uint8Array(d);y.set(this.buf),this.buf=y,this.dataView=new DataView(y.buffer),this.length=d}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeSFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*hx),!0),this.pos+=8}writeSFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*hx),!0),this.pos+=8}writeVarint(r){(r=+r||0)>268435455||r<0?function(d,y){let v,C;if(d>=0?(v=d%4294967296|0,C=d/4294967296|0):(v=~(-d%4294967296),C=~(-d/4294967296),4294967295^v?v=v+1|0:(v=0,C=C+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");y.realloc(10),function(M,R,I){I.buf[I.pos++]=127&M|128,M>>>=7,I.buf[I.pos++]=127&M|128,M>>>=7,I.buf[I.pos++]=127&M|128,M>>>=7,I.buf[I.pos++]=127&M|128,I.buf[I.pos]=127&(M>>>=7)}(v,0,y),function(M,R){const I=(7&M)<<4;R.buf[R.pos++]|=I|((M>>>=3)?128:0),M&&(R.buf[R.pos++]=127&M|((M>>>=7)?128:0),M&&(R.buf[R.pos++]=127&M|((M>>>=7)?128:0),M&&(R.buf[R.pos++]=127&M|((M>>>=7)?128:0),M&&(R.buf[R.pos++]=127&M|((M>>>=7)?128:0),M&&(R.buf[R.pos++]=127&M)))))}(C,y)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))}writeSVarint(r){this.writeVarint(r<0?2*-r-1:2*r)}writeBoolean(r){this.writeVarint(+r)}writeString(r){r=String(r),this.realloc(4*r.length),this.pos++;const d=this.pos;this.pos=function(v,C,M){for(let R,I,V=0;V<C.length;V++){if(R=C.charCodeAt(V),R>55295&&R<57344){if(!I){R>56319||V+1===C.length?(v[M++]=239,v[M++]=191,v[M++]=189):I=R;continue}if(R<56320){v[M++]=239,v[M++]=191,v[M++]=189,I=R;continue}R=I-55296<<10|R-56320|65536,I=null}else I&&(v[M++]=239,v[M++]=191,v[M++]=189,I=null);R<128?v[M++]=R:(R<2048?v[M++]=R>>6|192:(R<65536?v[M++]=R>>12|224:(v[M++]=R>>18|240,v[M++]=R>>12&63|128),v[M++]=R>>6&63|128),v[M++]=63&R|128)}return M}(this.buf,r,this.pos);const y=this.pos-d;y>=128&&E_(d,y,this),this.pos=d-1,this.writeVarint(y),this.pos+=y}writeFloat(r){this.realloc(4),this.dataView.setFloat32(this.pos,r,!0),this.pos+=4}writeDouble(r){this.realloc(8),this.dataView.setFloat64(this.pos,r,!0),this.pos+=8}writeBytes(r){const d=r.length;this.writeVarint(d),this.realloc(d);for(let y=0;y<d;y++)this.buf[this.pos++]=r[y]}writeRawMessage(r,d){this.pos++;const y=this.pos;r(d,this);const v=this.pos-y;v>=128&&E_(y,v,this),this.pos=y-1,this.writeVarint(v),this.pos+=v}writeMessage(r,d,y){this.writeTag(r,2),this.writeRawMessage(d,y)}writePackedVarint(r,d){d.length&&this.writeMessage(r,lw,d)}writePackedSVarint(r,d){d.length&&this.writeMessage(r,M_,d)}writePackedBoolean(r,d){d.length&&this.writeMessage(r,ug,d)}writePackedFloat(r,d){d.length&&this.writeMessage(r,N_,d)}writePackedDouble(r,d){d.length&&this.writeMessage(r,yf,d)}writePackedFixed32(r,d){d.length&&this.writeMessage(r,A_,d)}writePackedSFixed32(r,d){d.length&&this.writeMessage(r,P_,d)}writePackedFixed64(r,d){d.length&&this.writeMessage(r,R_,d)}writePackedSFixed64(r,d){d.length&&this.writeMessage(r,D_,d)}writeBytesField(r,d){this.writeTag(r,2),this.writeBytes(d)}writeFixed32Field(r,d){this.writeTag(r,5),this.writeFixed32(d)}writeSFixed32Field(r,d){this.writeTag(r,5),this.writeSFixed32(d)}writeFixed64Field(r,d){this.writeTag(r,1),this.writeFixed64(d)}writeSFixed64Field(r,d){this.writeTag(r,1),this.writeSFixed64(d)}writeVarintField(r,d){this.writeTag(r,0),this.writeVarint(d)}writeSVarintField(r,d){this.writeTag(r,0),this.writeSVarint(d)}writeStringField(r,d){this.writeTag(r,2),this.writeString(d)}writeFloatField(r,d){this.writeTag(r,5),this.writeFloat(d)}writeDoubleField(r,d){this.writeTag(r,1),this.writeDouble(d)}writeBooleanField(r,d){this.writeVarintField(r,+d)}}function gf(f,r,d){return d?4294967296*r+(f>>>0):4294967296*(r>>>0)+(f>>>0)}function E_(f,r,d){const y=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));d.realloc(y);for(let v=d.pos-1;v>=f;v--)d.buf[v+y]=d.buf[v]}function lw(f,r){for(let d=0;d<f.length;d++)r.writeVarint(f[d])}function M_(f,r){for(let d=0;d<f.length;d++)r.writeSVarint(f[d])}function N_(f,r){for(let d=0;d<f.length;d++)r.writeFloat(f[d])}function yf(f,r){for(let d=0;d<f.length;d++)r.writeDouble(f[d])}function ug(f,r){for(let d=0;d<f.length;d++)r.writeBoolean(f[d])}function A_(f,r){for(let d=0;d<f.length;d++)r.writeFixed32(f[d])}function P_(f,r){for(let d=0;d<f.length;d++)r.writeSFixed32(f[d])}function R_(f,r){for(let d=0;d<f.length;d++)r.writeFixed64(f[d])}function D_(f,r){for(let d=0;d<f.length;d++)r.writeSFixed64(f[d])}function z_(f,r,d){f===1&&d.readMessage(I_,r)}function I_(f,r,d){if(f===3){const{id:y,bitmap:v,width:C,height:M,left:R,top:I,advance:V}=d.readMessage(dg,{});r.push({id:y,bitmap:new Qu({width:C+6,height:M+6},v),metrics:{width:C,height:M,left:R,top:I,advance:V}})}}function dg(f,r,d){f===1?r.id=d.readVarint():f===2?r.bitmap=d.readBytes():f===3?r.width=d.readVarint():f===4?r.height=d.readVarint():f===5?r.left=d.readSVarint():f===6?r.top=d.readSVarint():f===7&&(r.advance=d.readVarint())}function fx(f){let r=0,d=0;for(const M of f)r+=M.w*M.h,d=Math.max(d,M.w);f.sort((M,R)=>R.h-M.h);const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),d),h:1/0}];let v=0,C=0;for(const M of f)for(let R=y.length-1;R>=0;R--){const I=y[R];if(!(M.w>I.w||M.h>I.h)){if(M.x=I.x,M.y=I.y,C=Math.max(C,M.y+M.h),v=Math.max(v,M.x+M.w),M.w===I.w&&M.h===I.h){const V=y.pop();V&&R<y.length&&(y[R]=V)}else M.h===I.h?(I.x+=M.w,I.w-=M.w):M.w===I.w?(I.y+=M.h,I.h-=M.h):(y.push({x:I.x+M.w,y:I.y,w:I.w-M.w,h:M.h}),I.y+=M.h,I.h-=M.h);break}}return{w:v,h:C,fill:r/(v*C)||0}}class hg{constructor(r,{pixelRatio:d,version:y,stretchX:v,stretchY:C,content:M,textFitWidth:R,textFitHeight:I}){this.paddedRect=r,this.pixelRatio=d,this.stretchX=v,this.stretchY=C,this.content=M,this.version=y,this.textFitWidth=R,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ps{constructor(r,d){const y={},v={};this.haveRenderCallbacks=[];const C=[];this.addImages(r,y,C),this.addImages(d,v,C);const{w:M,h:R}=fx(C),I=new Tr({width:M||1,height:R||1});for(const V in r){const H=r[V],X=y[V].paddedRect;Tr.copy(H.data,I,{x:0,y:0},{x:X.x+1,y:X.y+1},H.data)}for(const V in d){const H=d[V],X=v[V].paddedRect,ie=X.x+1,oe=X.y+1,de=H.data.width,xe=H.data.height;Tr.copy(H.data,I,{x:0,y:0},{x:ie,y:oe},H.data),Tr.copy(H.data,I,{x:0,y:xe-1},{x:ie,y:oe-1},{width:de,height:1}),Tr.copy(H.data,I,{x:0,y:0},{x:ie,y:oe+xe},{width:de,height:1}),Tr.copy(H.data,I,{x:de-1,y:0},{x:ie-1,y:oe},{width:1,height:xe}),Tr.copy(H.data,I,{x:0,y:0},{x:ie+de,y:oe},{width:1,height:xe})}this.image=I,this.iconPositions=y,this.patternPositions=v}addImages(r,d,y){for(const v in r){const C=r[v],M={x:0,y:0,w:C.data.width+2,h:C.data.height+2};y.push(M),d[v]=new hg(M,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(r,d){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in r.updatedImages)this.patchUpdatedImage(this.iconPositions[y],r.getImage(y),d),this.patchUpdatedImage(this.patternPositions[y],r.getImage(y),d)}patchUpdatedImage(r,d,y){if(!r||!d||r.version===d.version)return;r.version=d.version;const[v,C]=r.tl;y.update(d.data,void 0,{x:v,y:C})}}var uc;xn("ImagePosition",hg),xn("ImageAtlas",ps),c.ao=void 0,(uc=c.ao||(c.ao={}))[uc.none=0]="none",uc[uc.horizontal=1]="horizontal",uc[uc.vertical=2]="vertical",uc[uc.horizontalOnly=3]="horizontalOnly";class Ip{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(r,d,y){const v=new Ip;return v.scale=r||1,v.fontStack=d,v.verticalAlign=y||"bottom",v}static forImage(r,d){const y=new Ip;return y.imageName=r,y.verticalAlign=d||"bottom",y}}class Kd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,d){const y=new Kd;for(let v=0;v<r.sections.length;v++){const C=r.sections[v];C.image?y.addImageSection(C):y.addTextSection(C,d)}return y}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let d="";for(let y=0;y<r.length;y++){const v=r.charCodeAt(y+1)||null,C=r.charCodeAt(y-1)||null;d+=v&&qu(v)&&!cc[r[y+1]]||C&&qu(C)&&!cc[r[y-1]]||!cc[r[y]]?r[y]:cc[r[y]]}return d}(this.text)}trim(){let r=0;for(let y=0;y<this.text.length&&pg[this.text.charCodeAt(y)];y++)r++;let d=this.text.length;for(let y=this.text.length-1;y>=0&&y>=r&&pg[this.text.charCodeAt(y)];y--)d--;this.text=this.text.substring(r,d),this.sectionIndex=this.sectionIndex.slice(r,d)}substring(r,d){const y=new Kd;return y.text=this.text.substring(r,d),y.sectionIndex=this.sectionIndex.slice(r,d),y.sections=this.sections,y}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,d)=>Math.max(r,this.sections[d].scale),0)}getMaxImageSize(r){let d=0,y=0;for(let v=0;v<this.length();v++){const C=this.getSection(v);if(C.imageName){const M=r[C.imageName];if(!M)continue;const R=M.displaySize;d=Math.max(d,R[0]),y=Math.max(y,R[1])}}return{maxImageWidth:d,maxImageHeight:y}}addTextSection(r,d){this.text+=r.text,this.sections.push(Ip.forText(r.scale,r.fontStack||d,r.verticalAlign));const y=this.sections.length-1;for(let v=0;v<r.text.length;++v)this.sectionIndex.push(y)}addImageSection(r){const d=r.image?r.image.name:"";if(d.length===0)return void en("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push(Ip.forImage(d,r.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):en("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function fg(f,r,d,y,v,C,M,R,I,V,H,X,ie,oe,de){const xe=Kd.fromFeature(f,v);let ve;X===c.ao.vertical&&xe.verticalizePunctuation();const{processBidirectionalText:Re,processStyledBidirectionalText:at}=Ml;if(Re&&xe.sections.length===1){ve=[];const xt=Re(xe.toString(),sl(xe,V,C,r,y,oe));for(const Mt of xt){const Zt=new Kd;Zt.text=Mt,Zt.sections=xe.sections;for(let cn=0;cn<Mt.length;cn++)Zt.sectionIndex.push(0);ve.push(Zt)}}else if(at){ve=[];const xt=at(xe.text,xe.sectionIndex,sl(xe,V,C,r,y,oe));for(const Mt of xt){const Zt=new Kd;Zt.text=Mt[0],Zt.sectionIndex=Mt[1],Zt.sections=xe.sections,ve.push(Zt)}}else ve=function(xt,Mt){const Zt=[],cn=xt.text;let an=0;for(const dn of Mt)Zt.push(xt.substring(an,dn)),an=dn;return an<cn.length&&Zt.push(xt.substring(an,cn.length)),Zt}(xe,sl(xe,V,C,r,y,oe));const Be=[],Ze={positionedLines:Be,text:xe.toString(),top:H[1],bottom:H[1],left:H[0],right:H[0],writingMode:X,iconsInText:!1,verticalizable:!1};return function(xt,Mt,Zt,cn,an,dn,Nn,fn,pn,$t,Wn,Qn){let Rn=0,An=0,wi=0,ms=0;const Gs=fn==="right"?1:fn==="left"?0:.5,kr=cr/Qn;let aa=0;for(const _s of an){_s.trim();const _r=_s.getMaxScale(),nr={positionedGlyphs:[],lineOffset:0};xt.positionedLines[aa]=nr;const h=nr.positionedGlyphs;let m=0;if(!_s.length()){An+=dn,++aa;continue}const b=uw(cn,_s,kr);for(let D=0;D<_s.length();D++){const U=_s.getSection(D),re=_s.getSectionIndex(D),be=_s.getCharCode(D),$e=O_(pn,Wn,be);let ft;if(U.imageName){if(xt.iconsInText=!0,U.scale=U.scale*kr,ft=L_(U,$e,_r,b,cn),!ft)continue;m=Math.max(m,ft.imageOffset)}else if(ft=F_(U,be,$e,b,Mt,Zt),!ft)continue;const{rect:Ht,metrics:Qt,baselineOffset:Tt}=ft;h.push({glyph:be,imageName:U.imageName,x:Rn,y:An+Tt+-17,vertical:$e,scale:U.scale,fontStack:U.fontStack,sectionIndex:re,metrics:Qt,rect:Ht}),$e?(xt.verticalizable=!0,Rn+=(U.imageName?Qt.advance:cr)*U.scale+$t):Rn+=Qt.advance*U.scale+$t}h.length!==0&&(wi=Math.max(Rn-$t,wi),dw(h,0,h.length-1,Gs)),Rn=0,nr.lineOffset=Math.max(m,(_r-1)*cr);const k=dn*_r+m;An+=k,ms=Math.max(k,ms),++aa}const{horizontalAlign:oa,verticalAlign:tr}=Jd(Nn);(function(_s,_r,nr,h,m,b,k,D,U){const re=(_r-nr)*m;let be=0;be=b!==k?-D*h- -17:-h*U*k+.5*k;for(const $e of _s)for(const ft of $e.positionedGlyphs)ft.x+=re,ft.y+=be})(xt.positionedLines,Gs,oa,tr,wi,ms,dn,An,an.length),xt.top+=-tr*An,xt.bottom=xt.top+An,xt.left+=-oa*wi,xt.right=xt.left+wi}(Ze,r,d,y,ve,M,R,I,X,V,ie,de),!function(xt){for(const Mt of xt)if(Mt.positionedGlyphs.length!==0)return!1;return!0}(Be)&&Ze}const pg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cw={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},mg={40:!0};function Qd(f,r,d,y,v,C){if(r.imageName){const M=y[r.imageName];return M?M.displaySize[0]*r.scale*cr/C+v:0}{const M=d[r.fontStack],R=M&&M[f];return R?R.metrics.advance*r.scale+v:0}}function gg(f,r,d,y){const v=Math.pow(f-r,2);return y?f<r?v/2:2*v:v+Math.abs(d)*d}function yg(f,r,d){let y=0;return f===10&&(y-=1e4),d&&(y+=150),f!==40&&f!==65288||(y+=50),r!==41&&r!==65289||(y+=50),y}function xg(f,r,d,y,v,C){let M=null,R=gg(r,d,v,C);for(const I of y){const V=gg(r-I.x,d,v,C)+I.badness;V<=R&&(M=I,R=V)}return{index:f,x:r,priorBreak:M,badness:R}}function sd(f){return f?sd(f.priorBreak).concat(f.index):[]}function sl(f,r,d,y,v,C){if(!f)return[];const M=[],R=function(X,ie,oe,de,xe,ve){let Re=0;for(let at=0;at<X.length();at++){const Be=X.getSection(at);Re+=Qd(X.getCharCode(at),Be,de,xe,ie,ve)}return Re/Math.max(1,Math.ceil(Re/oe))}(f,r,d,y,v,C),I=f.text.indexOf("")>=0;let V=0;for(let X=0;X<f.length();X++){const ie=f.getSection(X),oe=f.getCharCode(X);if(pg[oe]||(V+=Qd(oe,ie,y,v,r,C)),X<f.length()-1){const de=!((H=oe)<11904)&&(!!pi["CJK Compatibility Forms"](H)||!!pi["CJK Compatibility"](H)||!!pi["CJK Strokes"](H)||!!pi["CJK Symbols and Punctuation"](H)||!!pi["Enclosed CJK Letters and Months"](H)||!!pi["Halfwidth and Fullwidth Forms"](H)||!!pi["Ideographic Description Characters"](H)||!!pi["Vertical Forms"](H)||Yh.test(String.fromCodePoint(H)));(cw[oe]||de||ie.imageName||X!==f.length()-2&&mg[f.getCharCode(X+1)])&&M.push(xg(X+1,V,R,M,yg(oe,f.getCharCode(X+1),de&&I),!1))}}var H;return sd(xg(f.length(),V,R,M,0,!0))}function Jd(f){let r=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:r,verticalAlign:d}}function uw(f,r,d){const y=r.getMaxScale()*cr,{maxImageWidth:v,maxImageHeight:C}=r.getMaxImageSize(f),M=Math.max(y,C*d);return{verticalLineContentWidth:Math.max(y,v*d),horizontalLineContentHeight:M}}function px(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function O_(f,r,d){return!(f===c.ao.horizontal||!r&&!Kl(d)||r&&(pg[d]||(y=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function F_(f,r,d,y,v,C){const M=C[f.fontStack],R=function(V,H,X,ie){if(V&&V.rect)return V;const oe=H[X.fontStack],de=oe&&oe[ie];return de?{rect:null,metrics:de.metrics}:null}(M&&M[r],v,f,r);if(R===null)return null;let I;if(d)I=y.verticalLineContentWidth-f.scale*cr;else{const V=px(f.verticalAlign);I=(y.horizontalLineContentHeight-f.scale*cr)*V}return{rect:R.rect,metrics:R.metrics,baselineOffset:I}}function L_(f,r,d,y,v){const C=v[f.imageName];if(!C)return null;const M=C.paddedRect,R=C.displaySize,I={width:R[0],height:R[1],left:1,top:-3,advance:r?R[1]:R[0]};let V;if(r)V=y.verticalLineContentWidth-R[1]*f.scale;else{const H=px(f.verticalAlign);V=(y.horizontalLineContentHeight-R[1]*f.scale)*H}return{rect:M,metrics:I,baselineOffset:V,imageOffset:(r?R[0]:R[1])*f.scale-cr*d}}function dw(f,r,d,y){if(y===0)return;const v=f[d],C=(f[d].x+v.metrics.advance*v.scale)*y;for(let M=r;M<=d;M++)f[M].x-=C}function mx(f,r,d){const{horizontalAlign:y,verticalAlign:v}=Jd(d),C=r[0]-f.displaySize[0]*y,M=r[1]-f.displaySize[1]*v;return{image:f,top:M,bottom:M+f.displaySize[1],left:C,right:C+f.displaySize[0]}}function gx(f){var r,d;let y=f.left,v=f.top,C=f.right-y,M=f.bottom-v;const R=(r=f.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",I=(d=f.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",V=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(I==="proportional"){if(R==="stretchOnly"&&C/M<V||R==="proportional"){const H=Math.ceil(M*V);y*=H/C,C=H}}else if(R==="proportional"&&I==="stretchOnly"&&V!==0&&C/M>V){const H=Math.ceil(C/V);v*=H/M,M=H}return{x1:y,y1:v,x2:y+C,y2:v+M}}function yx(f,r,d,y,v,C){const M=f.image;let R;if(M.content){const ve=M.content,Re=M.pixelRatio||1;R=[ve[0]/Re,ve[1]/Re,M.displaySize[0]-ve[2]/Re,M.displaySize[1]-ve[3]/Re]}const I=r.left*C,V=r.right*C;let H,X,ie,oe;d==="width"||d==="both"?(oe=v[0]+I-y[3],X=v[0]+V+y[1]):(oe=v[0]+(I+V-M.displaySize[0])/2,X=oe+M.displaySize[0]);const de=r.top*C,xe=r.bottom*C;return d==="height"||d==="both"?(H=v[1]+de-y[0],ie=v[1]+xe+y[2]):(H=v[1]+(de+xe-M.displaySize[1])/2,ie=H+M.displaySize[1]),{image:M,top:H,right:X,bottom:ie,left:oe,collisionPadding:R}}const Jc=128,dc=32640;function _g(f,r){const{expression:d}=r;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Yi(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:v}=d;let C=0;for(;C<y.length&&y[C]<=f;)C++;C=Math.max(0,C-1);let M=C;for(;M<y.length&&y[M]<f+1;)M++;M=Math.min(y.length-1,M);const R=y[C],I=y[M];return d.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:I,interpolationType:v}:{kind:"camera",minZoom:R,maxZoom:I,minSize:d.evaluate(new Yi(R)),maxSize:d.evaluate(new Yi(I)),interpolationType:v}}}function xx(f,r,d){let y="never";const v=f.get(r);return v?y=v:f.get(d)&&(y="always"),y}const hw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rd(f,r,d,y,v,C,M,R,I,V,H,X,ie){const oe=R?Math.min(dc,Math.round(R[0])):0,de=R?Math.min(dc,Math.round(R[1])):0;f.emplaceBack(r,d,Math.round(32*y),Math.round(32*v),C,M,(oe<<1)+(I?1:0),de,16*V,16*H,256*X,256*ie)}function _x(f,r,d){f.emplaceBack(r.x,r.y,d),f.emplaceBack(r.x,r.y,d),f.emplaceBack(r.x,r.y,d),f.emplaceBack(r.x,r.y,d)}function B_(f){for(const r of f.sections)if(Vd(r.text))return!0;return!1}class Ti{constructor(r){this.layoutVertexArray=new rn,this.indexArray=new Bi,this.programConfigurations=r,this.segments=new gi,this.dynamicLayoutVertexArray=new Yt,this.opacityVertexArray=new Mn,this.hasVisibleVertices=!1,this.placedSymbolArray=new ce}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,d,y,v){this.isEmpty()||(y&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,T_.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,k_.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,hw,!0),this.opacityVertexBuffer.itemSize=1),(y||v)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}xn("SymbolBuffers",Ti);class Op{constructor(r,d,y){this.layoutVertexArray=new r,this.layoutAttributes=d,this.indexArray=new y,this.segments=new gi,this.collisionVertexArray=new Li}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,ow.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}xn("CollisionBuffers",Op);class eu{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=hn(globalThis)?Math.min(r.overscaling,128):r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(M=>M.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_g(this.zoom,d["text-size"]),this.iconSizeData=_g(this.zoom,d["icon-size"]);const y=this.layers[0].layout,v=y.get("symbol-sort-key"),C=y.get("symbol-z-order");this.canOverlap=xx(y,"text-overlap","text-allow-overlap")!=="never"||xx(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map(M=>c.ao[M])),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=r.sourceID}createArrays(){this.text=new Ti(new wa(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Ti(new wa(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new we,this.lineVertexArray=new Te,this.symbolInstances=new Se,this.textAnchorOffsets=new Le}calculateGlyphDependencies(r,d,y,v,C){for(let M=0;M<r.length;M++)if(d[r.charCodeAt(M)]=!0,(y||v)&&C){const R=cc[r.charAt(M)];R&&(d[R.charCodeAt(0)]=!0)}}populate(r,d,y){const v=this.layers[0],C=v.layout,M=C.get("text-font"),R=C.get("text-field"),I=C.get("icon-image"),V=(R.value.kind!=="constant"||R.value.value instanceof fr&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),H=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,X=C.get("symbol-sort-key");if(this.features=[],!V&&!H)return;const ie=d.iconDependencies,oe=d.glyphDependencies,de=d.availableImages,xe=new Yi(this.zoom);for(const{feature:ve,id:Re,index:at,sourceLayerIndex:Be}of r){const Ze=v._featureFilter.needGeometry,xt=Ku(ve,Ze);if(!v._featureFilter.filter(xe,xt,y))continue;let Mt,Zt;if(Ze||(xt.geometry=rc(ve)),V){const an=v.getValueAndResolveTokens("text-field",xt,y,de),dn=fr.factory(an),Nn=this.hasRTLText=this.hasRTLText||B_(dn);(!Nn||Ml.getRTLTextPluginStatus()==="unavailable"||Nn&&Ml.isParsed())&&(Mt=dx(dn,v,xt))}if(H){const an=v.getValueAndResolveTokens("icon-image",xt,y,de);Zt=an instanceof ys?an:ys.fromString(an)}if(!Mt&&!Zt)continue;const cn=this.sortFeaturesByKey?X.evaluate(xt,{},y):void 0;if(this.features.push({id:Re,text:Mt,icon:Zt,index:at,sourceLayerIndex:Be,geometry:xt.geometry,properties:ve.properties,type:Ci.types[ve.type],sortKey:cn}),Zt&&(ie[Zt.name]=!0),Mt){const an=M.evaluate(xt,{},y).join(","),dn=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ao.vertical)>=0;for(const Nn of Mt.sections)if(Nn.image)ie[Nn.image.name]=!0;else{const fn=Hu(Mt.toString()),pn=Nn.fontStack||an,$t=oe[pn]=oe[pn]||{};this.calculateGlyphDependencies(Nn.text,$t,dn,this.allowVerticalPlacement,fn)}}}C.get("symbol-placement")==="line"&&(this.features=function(ve){const Re={},at={},Be=[];let Ze=0;function xt(an){Be.push(ve[an]),Ze++}function Mt(an,dn,Nn){const fn=at[an];return delete at[an],at[dn]=fn,Be[fn].geometry[0].pop(),Be[fn].geometry[0]=Be[fn].geometry[0].concat(Nn[0]),fn}function Zt(an,dn,Nn){const fn=Re[dn];return delete Re[dn],Re[an]=fn,Be[fn].geometry[0].shift(),Be[fn].geometry[0]=Nn[0].concat(Be[fn].geometry[0]),fn}function cn(an,dn,Nn){const fn=Nn?dn[0][dn[0].length-1]:dn[0][0];return`${an}:${fn.x}:${fn.y}`}for(let an=0;an<ve.length;an++){const dn=ve[an],Nn=dn.geometry,fn=dn.text?dn.text.toString():null;if(!fn){xt(an);continue}const pn=cn(fn,Nn),$t=cn(fn,Nn,!0);if(pn in at&&$t in Re&&at[pn]!==Re[$t]){const Wn=Zt(pn,$t,Nn),Qn=Mt(pn,$t,Be[Wn].geometry);delete Re[pn],delete at[$t],at[cn(fn,Be[Qn].geometry,!0)]=Qn,Be[Wn].geometry=null}else pn in at?Mt(pn,$t,Nn):$t in Re?Zt(pn,$t,Nn):(xt(an),Re[pn]=Ze-1,at[$t]=Ze-1)}return Be.filter(an=>an.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,Re)=>ve.sortKey-Re.sortKey)}update(r,d,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,d,this.layers,{imagePositions:y}),this.icon.programConfigurations.updatePaintArrays(r,d,this.layers,{imagePositions:y}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,d){const y=this.lineVertexArray.length;if(r.segment!==void 0){let v=r.dist(d[r.segment+1]),C=r.dist(d[r.segment]);const M={};for(let R=r.segment+1;R<d.length;R++)M[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:v},R<d.length-1&&(v+=d[R+1].dist(d[R]));for(let R=r.segment||0;R>=0;R--)M[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:C},R>0&&(C+=d[R-1].dist(d[R]));for(let R=0;R<d.length;R++){const I=M[R];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(r,d,y,v,C,M,R,I,V,H,X,ie){const oe=r.indexArray,de=r.layoutVertexArray,xe=r.segments.prepareSegment(4*d.length,de,oe,this.canOverlap?M.sortKey:void 0),ve=this.glyphOffsetArray.length,Re=xe.vertexLength,at=this.allowVerticalPlacement&&R===c.ao.vertical?Math.PI/2:0,Be=M.text&&M.text.sections;for(let Ze=0;Ze<d.length;Ze++){const{tl:xt,tr:Mt,bl:Zt,br:cn,tex:an,pixelOffsetTL:dn,pixelOffsetBR:Nn,minFontScaleX:fn,minFontScaleY:pn,glyphOffset:$t,isSDF:Wn,sectionIndex:Qn}=d[Ze],Rn=xe.vertexLength,An=$t[1];rd(de,I.x,I.y,xt.x,An+xt.y,an.x,an.y,y,Wn,dn.x,dn.y,fn,pn),rd(de,I.x,I.y,Mt.x,An+Mt.y,an.x+an.w,an.y,y,Wn,Nn.x,dn.y,fn,pn),rd(de,I.x,I.y,Zt.x,An+Zt.y,an.x,an.y+an.h,y,Wn,dn.x,Nn.y,fn,pn),rd(de,I.x,I.y,cn.x,An+cn.y,an.x+an.w,an.y+an.h,y,Wn,Nn.x,Nn.y,fn,pn),_x(r.dynamicLayoutVertexArray,I,at),oe.emplaceBack(Rn,Rn+2,Rn+1),oe.emplaceBack(Rn+1,Rn+2,Rn+3),xe.vertexLength+=4,xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($t[0]),Ze!==d.length-1&&Qn===d[Ze+1].sectionIndex||r.programConfigurations.populatePaintArrays(de.length,M,M.index,{imagePositions:{},canonical:ie,formattedSection:Be&&Be[Qn]})}r.placedSymbolArray.emplaceBack(I.x,I.y,ve,this.glyphOffsetArray.length-ve,Re,V,H,I.segment,y?y[0]:0,y?y[1]:0,v[0],v[1],R,0,!1,0,X)}_addCollisionDebugVertex(r,d,y,v,C,M){return d.emplaceBack(0,0),r.emplaceBack(y.x,y.y,v,C,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(r,d,y,v,C,M,R){const I=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),V=I.vertexLength,H=C.layoutVertexArray,X=C.collisionVertexArray,ie=R.anchorX,oe=R.anchorY;this._addCollisionDebugVertex(H,X,M,ie,oe,new g(r,d)),this._addCollisionDebugVertex(H,X,M,ie,oe,new g(y,d)),this._addCollisionDebugVertex(H,X,M,ie,oe,new g(y,v)),this._addCollisionDebugVertex(H,X,M,ie,oe,new g(r,v)),I.vertexLength+=4;const de=C.indexArray;de.emplaceBack(V,V+1),de.emplaceBack(V+1,V+2),de.emplaceBack(V+2,V+3),de.emplaceBack(V+3,V),I.primitiveLength+=4}addDebugCollisionBoxes(r,d,y,v){for(let C=r;C<d;C++){const M=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,v?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Op(ni,Qc.members,Ji),this.iconCollisionBox=new Op(ni,Qc.members,Ji);for(let r=0;r<this.symbolInstances.length;r++){const d=this.symbolInstances.get(r);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(r,d,y,v,C,M,R,I,V){const H={};for(let X=d;X<y;X++){const ie=r.get(X);H.textBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},H.textFeatureIndex=ie.featureIndex;break}for(let X=v;X<C;X++){const ie=r.get(X);H.verticalTextBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},H.verticalTextFeatureIndex=ie.featureIndex;break}for(let X=M;X<R;X++){const ie=r.get(X);H.iconBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},H.iconFeatureIndex=ie.featureIndex;break}for(let X=I;X<V;X++){const ie=r.get(X);H.verticalIconBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},H.verticalIconFeatureIndex=ie.featureIndex;break}return H}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const y=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,d){const y=r.placedSymbolArray.get(d),v=y.vertexStartIndex+4*y.numGlyphs;for(let C=y.vertexStartIndex;C<v;C+=4)r.indexArray.emplaceBack(C,C+2,C+1),r.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(r),y=Math.cos(r),v=[],C=[],M=[];for(let R=0;R<this.symbolInstances.length;++R){M.push(R);const I=this.symbolInstances.get(R);v.push(0|Math.round(d*I.anchorX+y*I.anchorY)),C.push(I.featureIndex)}return M.sort((R,I)=>v[R]-v[I]||C[I]-C[R]),M}addToSortKeyRanges(r,d){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===d?y.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const y=this.symbolInstances.get(d);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach((v,C,M)=>{v>=0&&M.indexOf(v)===C&&this.addIndicesForPlacedSymbol(this.text,v)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let bg,bx;xn("SymbolBucket",eu,{omit:["layers","collisionBoxArray","features","compareText"]}),eu.MAX_GLYPHS=65535,eu.addDynamicAttributes=_x;var Fp={get paint(){return bx=bx||new jr({"icon-opacity":new zn(ct.paint_symbol["icon-opacity"]),"icon-color":new zn(ct.paint_symbol["icon-color"]),"icon-halo-color":new zn(ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new zn(ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zn(ct.paint_symbol["icon-halo-blur"]),"icon-translate":new En(ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new En(ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new zn(ct.paint_symbol["text-opacity"]),"text-color":new zn(ct.paint_symbol["text-color"],{runtimeType:ws,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new zn(ct.paint_symbol["text-halo-color"]),"text-halo-width":new zn(ct.paint_symbol["text-halo-width"]),"text-halo-blur":new zn(ct.paint_symbol["text-halo-blur"]),"text-translate":new En(ct.paint_symbol["text-translate"]),"text-translate-anchor":new En(ct.paint_symbol["text-translate-anchor"])})},get layout(){return bg=bg||new jr({"symbol-placement":new En(ct.layout_symbol["symbol-placement"]),"symbol-spacing":new En(ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new En(ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zn(ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new En(ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new En(ct.layout_symbol["icon-allow-overlap"]),"icon-overlap":new En(ct.layout_symbol["icon-overlap"]),"icon-ignore-placement":new En(ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new En(ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new En(ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new zn(ct.layout_symbol["icon-size"]),"icon-text-fit":new En(ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new En(ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new zn(ct.layout_symbol["icon-image"]),"icon-rotate":new zn(ct.layout_symbol["icon-rotate"]),"icon-padding":new zn(ct.layout_symbol["icon-padding"]),"icon-keep-upright":new En(ct.layout_symbol["icon-keep-upright"]),"icon-offset":new zn(ct.layout_symbol["icon-offset"]),"icon-anchor":new zn(ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new En(ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new En(ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new En(ct.layout_symbol["text-rotation-alignment"]),"text-field":new zn(ct.layout_symbol["text-field"]),"text-font":new zn(ct.layout_symbol["text-font"]),"text-size":new zn(ct.layout_symbol["text-size"]),"text-max-width":new zn(ct.layout_symbol["text-max-width"]),"text-line-height":new En(ct.layout_symbol["text-line-height"]),"text-letter-spacing":new zn(ct.layout_symbol["text-letter-spacing"]),"text-justify":new zn(ct.layout_symbol["text-justify"]),"text-radial-offset":new zn(ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new En(ct.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new zn(ct.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new zn(ct.layout_symbol["text-anchor"]),"text-max-angle":new En(ct.layout_symbol["text-max-angle"]),"text-writing-mode":new En(ct.layout_symbol["text-writing-mode"]),"text-rotate":new zn(ct.layout_symbol["text-rotate"]),"text-padding":new En(ct.layout_symbol["text-padding"]),"text-keep-upright":new En(ct.layout_symbol["text-keep-upright"]),"text-transform":new zn(ct.layout_symbol["text-transform"]),"text-offset":new zn(ct.layout_symbol["text-offset"]),"text-allow-overlap":new En(ct.layout_symbol["text-allow-overlap"]),"text-overlap":new En(ct.layout_symbol["text-overlap"]),"text-ignore-placement":new En(ct.layout_symbol["text-ignore-placement"]),"text-optional":new En(ct.layout_symbol["text-optional"])})}};class xf{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:ds,this.defaultValue=r}evaluate(r){if(r.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(r.formattedSection))return d.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xn("FormatSectionOverride",xf,{omit:["defaultValue"]});class eh extends to{constructor(r,d){super(r,Fp,d)}recalculate(r,d){if(super.recalculate(r,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const v=[];for(const C of y)v.indexOf(C)<0&&v.push(C);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,d,y,v){const C=this.layout.get(r).evaluate(d,{},y,v),M=this._unevaluatedLayout._values[r];return M.isDataDriven()||Sl(M.value)||!C?C:function(R,I){return I.replace(/{([^{}]+)}/g,(V,H)=>R&&H in R?String(R[H]):"")}(d.properties,C)}createBucket(r){return new eu(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Fp.paint.overridableProperties){if(!eh.hasPaintOverride(this.layout,r))continue;const d=this.paint.get(r),y=new xf(d),v=new ql(y,d.property.specification);let C=null;C=d.value.kind==="constant"||d.value.kind==="source"?new Oc("source",v):new ta("composite",v,d.value.zoomStops),this.paint._values[r]=new Lr(d.property,C,d.parameters)}}_handleOverridablePaintPropertyUpdate(r,d,y){return!(!this.layout||d.isDataDriven()||y.isDataDriven())&&eh.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,d){const y=r.get("text-field"),v=Fp.paint.properties[d];let C=!1;const M=R=>{for(const I of R)if(v.overrides&&v.overrides.hasOverride(I))return void(C=!0)};if(y.value.kind==="constant"&&y.value.value instanceof fr)M(y.value.value.sections);else if(y.value.kind==="source"||y.value.kind==="composite"){const R=V=>{C||(V instanceof Kn&&Zi(V.value)===Rr?M(V.value.sections):V instanceof Ih?M(V.sections):V.eachChild(R))},I=y.value;I._styleExpression&&R(I._styleExpression.expression)}return C}}let th;var V_={get paint(){return th=th||new jr({"background-color":new En(ct.paint_background["background-color"]),"background-pattern":new Ls(ct.paint_background["background-pattern"]),"background-opacity":new En(ct.paint_background["background-opacity"])})}};class fw extends to{constructor(r,d){super(r,V_,d)}}class pw extends to{constructor(r,d){super(r,{},d),this.onAdd=y=>{this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)},this.onRemove=y=>{this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class U_{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const $_={once:!0},_f=63710088e-1;class Oi{constructor(r,d){if(isNaN(r)||isNaN(d))throw new Error(`Invalid LngLat object: (${r}, ${d})`);if(this.lng=+r,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Oi(pt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const d=Math.PI/180,y=this.lat*d,v=r.lat*d,C=Math.sin(y)*Math.sin(v)+Math.cos(y)*Math.cos(v)*Math.cos((r.lng-this.lng)*d);return _f*Math.acos(Math.min(C,1))}static convert(r){if(r instanceof Oi)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Oi(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Oi(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const vg=2*Math.PI*_f;function $r(f){return vg*Math.cos(f*Math.PI/180)}function H_(f){return(180+f)/360}function wg(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function Sg(f,r){return f/$r(r)}function bf(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function vx(f,r){return f*$r(bf(r))}class vf{constructor(r,d,y=0){this.x=+r,this.y=+d,this.z=+y}static fromLngLat(r,d=0){const y=Oi.convert(r);return new vf(H_(y.lng),wg(y.lat),Sg(d,y.lat))}toLngLat(){return new Oi(360*this.x-180,bf(this.y))}toAltitude(){return vx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/vg*(r=bf(this.y),1/Math.cos(r*Math.PI/180));var r}}function jg(f,r,d){var y=2*Math.PI*6378137/256/Math.pow(2,d);return[f*y-2*Math.PI*6378137/2,r*y-2*Math.PI*6378137/2]}class Lp{constructor(r,d,y){if(!function(v,C,M){return!(v<0||v>25||M<0||M>=Math.pow(2,v)||C<0||C>=Math.pow(2,v))}(r,d,y))throw new Error(`x=${d}, y=${y}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=d,this.y=y,this.key=wf(0,r,r,d,y)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,d,y){const v=(M=this.y,R=this.z,I=jg(256*(C=this.x),256*(M=Math.pow(2,R)-M-1),R),V=jg(256*(C+1),256*(M+1),R),I[0]+","+I[1]+","+V[0]+","+V[1]);var C,M,R,I,V;const H=function(X,ie,oe){let de,xe="";for(let ve=X;ve>0;ve--)de=1<<ve-1,xe+=(ie&de?1:0)+(oe&de?2:0);return xe}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,H).replace(/{bbox-epsg-3857}/g,v)}isChildOf(r){const d=this.z-r.z;return d>0&&r.x===this.x>>d&&r.y===this.y>>d}getTilePoint(r){const d=Math.pow(2,this.z);return new g((r.x*d-this.x)*Nt,(r.y*d-this.y)*Nt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class q_{constructor(r,d){this.wrap=r,this.canonical=d,this.key=wf(r,d.z,d.z,d.x,d.y)}}class co{constructor(r,d,y,v,C){if(this.terrainRttPosMatrix32f=null,r<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${y}`);this.overscaledZ=r,this.wrap=d,this.canonical=new Lp(y,+v,+C),this.key=wf(d,r,y,v,C)}clone(){return new co(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?new co(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new co(r,this.wrap,r,this.canonical.x>>d,this.canonical.y>>d)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(r,d){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-r;return r>this.canonical.z?wf(this.wrap*+d,r,this.canonical.z,this.canonical.x,this.canonical.y):wf(this.wrap*+d,r,r,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(r){if(r.wrap!==this.wrap||this.overscaledZ-r.overscaledZ<=0)return!1;if(r.overscaledZ===0)return this.overscaledZ>0;const d=this.canonical.z-r.canonical.z;return!(d<0)&&r.canonical.x===this.canonical.x>>d&&r.canonical.y===this.canonical.y>>d}children(r){if(this.overscaledZ>=r)return[new co(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,y=2*this.canonical.x,v=2*this.canonical.y;return[new co(d,this.wrap,d,y,v),new co(d,this.wrap,d,y+1,v),new co(d,this.wrap,d,y,v+1),new co(d,this.wrap,d,y+1,v+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new co(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new co(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new q_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new vf(r.x-this.wrap,r.y))}}function wf(f,r,d,y,v){(f*=2)<0&&(f=-1*f-1);const C=1<<d;return(C*C*f+C*v+y).toString(36)+d.toString(36)+r.toString(36)}function Sf(f,r){return r?f.properties[r]:f.id}xn("CanonicalTileID",Lp),xn("OverscaledTileID",co,{omit:["terrainRttPosMatrix32f"]});class nh{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(r){return this.minX=Math.min(this.minX,r.x),this.minY=Math.min(this.minY,r.y),this.maxX=Math.max(this.maxX,r.x),this.maxY=Math.max(this.maxY,r.y),this}expandBy(r){return this.minX-=r,this.minY-=r,this.maxX+=r,this.maxY+=r,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(r){return this.expandBy(-r)}map(r){const d=new nh;return d.extend(r(new g(this.minX,this.minY))),d.extend(r(new g(this.maxX,this.minY))),d.extend(r(new g(this.minX,this.maxY))),d.extend(r(new g(this.maxX,this.maxY))),d}static fromPoints(r){const d=new nh;for(const y of r)d.extend(y);return d}contains(r){return r.x>=this.minX&&r.x<=this.maxX&&r.y>=this.minY&&r.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(r){return!this.empty()&&!r.empty()&&r.minX>=this.minX&&r.maxX<=this.maxX&&r.minY>=this.minY&&r.maxY<=this.maxY}intersects(r){return!this.empty()&&!r.empty()&&r.minX<=this.maxX&&r.maxX>=this.minX&&r.minY<=this.maxY&&r.maxY>=this.minY}}class G_{constructor(r){this._stringToNumber={},this._numberToString=[];for(let d=0;d<r.length;d++){const y=r[d];this._stringToNumber[y]=d,this._numberToString[d]=y}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class tu{constructor(r,d,y,v,C){this.type="Feature",this._vectorTileFeature=r,r._z=d,r._x=y,r._y=v,this.properties=r.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(r[d]=this[d]);return r}}class wx{constructor(r,d){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Yl(Nt,16,0),this.grid3D=new Yl(Nt,16,0),this.featureIndexArray=new qe,this.promoteId=d}insert(r,d,y,v,C,M){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,v,C);const I=M?this.grid3D:this.grid;for(let V=0;V<d.length;V++){const H=d[V],X=[1/0,1/0,-1/0,-1/0];for(let ie=0;ie<H.length;ie++){const oe=H[ie];X[0]=Math.min(X[0],oe.x),X[1]=Math.min(X[1],oe.y),X[2]=Math.max(X[2],oe.x),X[3]=Math.max(X[3],oe.y)}X[0]<Nt&&X[1]<Nt&&X[2]>=0&&X[3]>=0&&I.insert(R,X[0],X[1],X[2],X[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new sg(new zp(this.rawTileData)).layers,this.sourceLayerCoder=new G_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,d,y,v){this.loadVTLayers();const C=r.params,M=Nt/r.tileSize/r.scale,R=Fc(C.filter,C.globalState),I=r.queryGeometry,V=r.queryPadding*M,H=nh.fromPoints(I),X=this.grid.query(H.minX-V,H.minY-V,H.maxX+V,H.maxY+V),ie=nh.fromPoints(r.cameraQueryGeometry).expandBy(V),oe=this.grid3D.query(ie.minX,ie.minY,ie.maxX,ie.maxY,(ve,Re,at,Be)=>function(Ze,xt,Mt,Zt,cn){for(const dn of Ze)if(xt<=dn.x&&Mt<=dn.y&&Zt>=dn.x&&cn>=dn.y)return!0;const an=[new g(xt,Mt),new g(xt,cn),new g(Zt,cn),new g(Zt,Mt)];if(Ze.length>2){for(const dn of an)if(qc(Ze,dn))return!0}for(let dn=0;dn<Ze.length-1;dn++)if(Hy(Ze[dn],Ze[dn+1],an))return!0;return!1}(r.cameraQueryGeometry,ve-V,Re-V,at+V,Be+V));for(const ve of oe)X.push(ve);X.sort(mw);const de={};let xe;for(let ve=0;ve<X.length;ve++){const Re=X[ve];if(Re===xe)continue;xe=Re;const at=this.featureIndexArray.get(Re);let Be=null;this.loadMatchingFeature(de,at.bucketIndex,at.sourceLayerIndex,at.featureIndex,R,C.layers,C.availableImages,d,y,v,(Ze,xt,Mt)=>(Be||(Be=rc(Ze)),xt.queryIntersectsFeature({queryGeometry:I,feature:Ze,featureState:Mt,geometry:Be,zoom:this.z,transform:r.transform,pixelsToTileUnits:M,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation})))}return de}loadMatchingFeature(r,d,y,v,C,M,R,I,V,H,X){const ie=this.bucketLayerIDs[d];if(M&&!ie.some(ve=>M.has(ve)))return;const oe=this.sourceLayerCoder.decode(y),de=this.vtLayers[oe].feature(v);if(C.needGeometry){const ve=Ku(de,!0);if(!C.filter(new Yi(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!C.filter(new Yi(this.tileID.overscaledZ),de))return;const xe=this.getId(de,oe);for(let ve=0;ve<ie.length;ve++){const Re=ie[ve];if(M&&!M.has(Re))continue;const at=I[Re];if(!at)continue;let Be={};xe&&H&&(Be=H.getState(at.sourceLayer||"_geojsonTileLayer",xe));const Ze=Ve({},V[Re]);Ze.paint=Cg(Ze.paint,at.paint,de,Be,R),Ze.layout=Cg(Ze.layout,at.layout,de,Be,R);const xt=!X||X(de,at,Be);if(!xt)continue;const Mt=new tu(de,this.z,this.x,this.y,xe);Mt.layer=Ze;let Zt=r[Re];Zt===void 0&&(Zt=r[Re]=[]),Zt.push({featureIndex:v,feature:Mt,intersectionZ:xt})}}lookupSymbolFeatures(r,d,y,v,C,M,R,I){const V={};this.loadVTLayers();const H=Fc(C.filterSpec,C.globalState);for(const X of r)this.loadMatchingFeature(V,y,v,X,H,M,R,I,d);return V}hasLayer(r){for(const d of this.bucketLayerIDs)for(const y of d)if(r===y)return!0;return!1}getId(r,d){var y;let v=r.id;return this.promoteId&&(v=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((y=r.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(v=Number(r.properties.cluster_id))),v}}function Cg(f,r,d,y,v){return Dt(f,(C,M)=>{const R=r instanceof $c?r.get(M):null;return R&&R.evaluate?R.evaluate(d,y,v):R})}function mw(f,r){return r-f}function W_(f,r,d,y,v){const C=[];for(let M=0;M<f.length;M++){const R=f[M];let I;for(let V=0;V<R.length-1;V++){let H=R[V],X=R[V+1];H.x<r&&X.x<r||(H.x<r?H=new g(r,H.y+(r-H.x)/(X.x-H.x)*(X.y-H.y))._round():X.x<r&&(X=new g(r,H.y+(r-H.x)/(X.x-H.x)*(X.y-H.y))._round()),H.y<d&&X.y<d||(H.y<d?H=new g(H.x+(d-H.y)/(X.y-H.y)*(X.x-H.x),d)._round():X.y<d&&(X=new g(H.x+(d-H.y)/(X.y-H.y)*(X.x-H.x),d)._round()),H.x>=y&&X.x>=y||(H.x>=y?H=new g(y,H.y+(y-H.x)/(X.x-H.x)*(X.y-H.y))._round():X.x>=y&&(X=new g(y,H.y+(y-H.x)/(X.x-H.x)*(X.y-H.y))._round()),H.y>=v&&X.y>=v||(H.y>=v?H=new g(H.x+(v-H.y)/(X.y-H.y)*(X.x-H.x),v)._round():X.y>=v&&(X=new g(H.x+(v-H.y)/(X.y-H.y)*(X.x-H.x),v)._round()),I&&H.equals(I[I.length-1])||(I=[H],C.push(I)),I.push(X)))))}}return C}xn("FeatureIndex",wx,{omit:["rawTileData","sourceLayerCoder"]});class hc extends g{constructor(r,d,y,v){super(r,d),this.angle=y,v!==void 0&&(this.segment=v)}clone(){return new hc(this.x,this.y,this.angle,this.segment)}}function Z_(f,r,d,y,v){if(r.segment===void 0||d===0)return!0;let C=r,M=r.segment+1,R=0;for(;R>-d/2;){if(M--,M<0)return!1;R-=f[M].dist(C),C=f[M]}R+=f[M].dist(f[M+1]),M++;const I=[];let V=0;for(;R<d/2;){const H=f[M],X=f[M+1];if(!X)return!1;let ie=f[M-1].angleTo(H)-H.angleTo(X);for(ie=Math.abs((ie+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:R,angleDelta:ie}),V+=ie;R-I[0].distance>y;)V-=I.shift().angleDelta;if(V>v)return!1;M++,R+=H.dist(X)}return!0}function rl(f){let r=0;for(let d=0;d<f.length-1;d++)r+=f[d].dist(f[d+1]);return r}function Tg(f,r,d){return f?.6*r*d:0}function Sx(f,r){return Math.max(f?f.right-f.left:0,r?r.right-r.left:0)}function Y_(f,r,d,y,v,C){const M=Tg(d,v,C),R=Sx(d,y)*C;let I=0;const V=rl(f)/2;for(let H=0;H<f.length-1;H++){const X=f[H],ie=f[H+1],oe=X.dist(ie);if(I+oe>V){const de=(V-I)/oe,xe=Ps.number(X.x,ie.x,de),ve=Ps.number(X.y,ie.y,de),Re=new hc(xe,ve,ie.angleTo(X),H);return Re._round(),!M||Z_(f,Re,R,M,r)?Re:void 0}I+=oe}}function Bp(f,r,d,y,v,C,M,R,I){const V=Tg(y,C,M),H=Sx(y,v),X=H*M,ie=f[0].x===0||f[0].x===I||f[0].y===0||f[0].y===I;return r-X<r/4&&(r=X+r/4),Io(f,ie?r/2*R%r:(H/2+2*C)*M*R%r,r,V,d,X,ie,!1,I)}function Io(f,r,d,y,v,C,M,R,I){const V=C/2,H=rl(f);let X=0,ie=r-d,oe=[];for(let de=0;de<f.length-1;de++){const xe=f[de],ve=f[de+1],Re=xe.dist(ve),at=ve.angleTo(xe);for(;ie+d<X+Re;){ie+=d;const Be=(ie-X)/Re,Ze=Ps.number(xe.x,ve.x,Be),xt=Ps.number(xe.y,ve.y,Be);if(Ze>=0&&Ze<I&&xt>=0&&xt<I&&ie-V>=0&&ie+V<=H){const Mt=new hc(Ze,xt,at,de);Mt._round(),y&&!Z_(f,Mt,C,y,v)||oe.push(Mt)}}X+=Re}return R||oe.length||M||(oe=Io(f,X/2,d,y,v,C,M,!0,I)),oe}function jx(f,r,d,y){const v=[],C=f.image,M=C.pixelRatio,R=C.paddedRect.w-2,I=C.paddedRect.h-2;let V={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const H=C.stretchX||[[0,R]],X=C.stretchY||[[0,I]],ie=($t,Wn)=>$t+Wn[1]-Wn[0],oe=H.reduce(ie,0),de=X.reduce(ie,0),xe=R-oe,ve=I-de;let Re=0,at=oe,Be=0,Ze=de,xt=0,Mt=xe,Zt=0,cn=ve;if(C.content&&y){const $t=C.content,Wn=$t[2]-$t[0],Qn=$t[3]-$t[1];(C.textFitWidth||C.textFitHeight)&&(V=gx(f)),Re=ih(H,0,$t[0]),Be=ih(X,0,$t[1]),at=ih(H,$t[0],$t[2]),Ze=ih(X,$t[1],$t[3]),xt=$t[0]-Re,Zt=$t[1]-Be,Mt=Wn-at,cn=Qn-Ze}const an=V.x1,dn=V.y1,Nn=V.x2-an,fn=V.y2-dn,pn=($t,Wn,Qn,Rn)=>{const An=kg($t.stretch-Re,at,Nn,an),wi=Eg($t.fixed-xt,Mt,$t.stretch,oe),ms=kg(Wn.stretch-Be,Ze,fn,dn),Gs=Eg(Wn.fixed-Zt,cn,Wn.stretch,de),kr=kg(Qn.stretch-Re,at,Nn,an),aa=Eg(Qn.fixed-xt,Mt,Qn.stretch,oe),oa=kg(Rn.stretch-Be,Ze,fn,dn),tr=Eg(Rn.fixed-Zt,cn,Rn.stretch,de),_s=new g(An,ms),_r=new g(kr,ms),nr=new g(kr,oa),h=new g(An,oa),m=new g(wi/M,Gs/M),b=new g(aa/M,tr/M),k=r*Math.PI/180;if(k){const re=Math.sin(k),be=Math.cos(k),$e=[be,-re,re,be];_s._matMult($e),_r._matMult($e),h._matMult($e),nr._matMult($e)}const D=$t.stretch+$t.fixed,U=Wn.stretch+Wn.fixed;return{tl:_s,tr:_r,bl:h,br:nr,tex:{x:C.paddedRect.x+1+D,y:C.paddedRect.y+1+U,w:Qn.stretch+Qn.fixed-D,h:Rn.stretch+Rn.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:m,pixelOffsetBR:b,minFontScaleX:Mt/M/Nn,minFontScaleY:cn/M/fn,isSDF:d}};if(y&&(C.stretchX||C.stretchY)){const $t=fc(H,xe,oe),Wn=fc(X,ve,de);for(let Qn=0;Qn<$t.length-1;Qn++){const Rn=$t[Qn],An=$t[Qn+1];for(let wi=0;wi<Wn.length-1;wi++)v.push(pn(Rn,Wn[wi],An,Wn[wi+1]))}}else v.push(pn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:I+1}));return v}function ih(f,r,d){let y=0;for(const v of f)y+=Math.max(r,Math.min(d,v[1]))-Math.max(r,Math.min(d,v[0]));return y}function fc(f,r,d){const y=[{fixed:-1,stretch:0}];for(const[v,C]of f){const M=y[y.length-1];y.push({fixed:v-M.stretch,stretch:M.stretch}),y.push({fixed:v-M.stretch,stretch:M.stretch+(C-v)})}return y.push({fixed:r+1,stretch:d}),y}function kg(f,r,d,y){return f/r*d+y}function Eg(f,r,d,y){return f-r*d/y}xn("Anchor",hc);class nu{constructor(r,d,y,v,C,M,R,I,V,H){var X;if(this.boxStartIndex=r.length,V){let ie=M.top,oe=M.bottom;const de=M.collisionPadding;de&&(ie-=de[1],oe+=de[3]);let xe=oe-ie;xe>0&&(xe=Math.max(10,xe),this.circleDiameter=xe)}else{const ie=!((X=M.image)===null||X===void 0)&&X.content&&(M.image.textFitWidth||M.image.textFitHeight)?gx(M):{x1:M.left,y1:M.top,x2:M.right,y2:M.bottom};ie.y1=ie.y1*R-I[0],ie.y2=ie.y2*R+I[2],ie.x1=ie.x1*R-I[3],ie.x2=ie.x2*R+I[1];const oe=M.collisionPadding;if(oe&&(ie.x1-=oe[0]*R,ie.y1-=oe[1]*R,ie.x2+=oe[2]*R,ie.y2+=oe[3]*R),H){const de=new g(ie.x1,ie.y1),xe=new g(ie.x2,ie.y1),ve=new g(ie.x1,ie.y2),Re=new g(ie.x2,ie.y2),at=H*Math.PI/180;de._rotate(at),xe._rotate(at),ve._rotate(at),Re._rotate(at),ie.x1=Math.min(de.x,xe.x,ve.x,Re.x),ie.x2=Math.max(de.x,xe.x,ve.x,Re.x),ie.y1=Math.min(de.y,xe.y,ve.y,Re.y),ie.y2=Math.max(de.y,xe.y,ve.y,Re.y)}r.emplaceBack(d.x,d.y,ie.x1,ie.y1,ie.x2,ie.y2,y,v,C)}this.boxEndIndex=r.length}}class X_{constructor(r=[],d=(y,v)=>y<v?-1:y>v?1:0){if(this.data=r,this.length=this.data.length,this.compare=d,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:d,compare:y}=this,v=d[r];for(;r>0;){const C=r-1>>1,M=d[C];if(y(v,M)>=0)break;d[r]=M,r=C}d[r]=v}_down(r){const{data:d,compare:y}=this,v=this.length>>1,C=d[r];for(;r<v;){let M=1+(r<<1);const R=M+1;if(R<this.length&&y(d[R],d[M])<0&&(M=R),y(d[M],C)>=0)break;d[r]=d[M],r=M}d[r]=C}}function gw(f,r=1,d=!1){const y=nh.fromPoints(f[0]),v=Math.min(y.width(),y.height());let C=v/2;const M=new X_([],yw),{minX:R,minY:I,maxX:V,maxY:H}=y;if(v===0)return new g(R,I);for(let oe=R;oe<V;oe+=v)for(let de=I;de<H;de+=v)M.push(new jf(oe+C,de+C,C,f));let X=function(oe){let de=0,xe=0,ve=0;const Re=oe[0];for(let at=0,Be=Re.length,Ze=Be-1;at<Be;Ze=at++){const xt=Re[at],Mt=Re[Ze],Zt=xt.x*Mt.y-Mt.x*xt.y;xe+=(xt.x+Mt.x)*Zt,ve+=(xt.y+Mt.y)*Zt,de+=3*Zt}return new jf(xe/de,ve/de,0,oe)}(f),ie=M.length;for(;M.length;){const oe=M.pop();(oe.d>X.d||!X.d)&&(X=oe,d&&console.log("found best %d after %d probes",Math.round(1e4*oe.d)/1e4,ie)),oe.max-X.d<=r||(C=oe.h/2,M.push(new jf(oe.p.x-C,oe.p.y-C,C,f)),M.push(new jf(oe.p.x+C,oe.p.y-C,C,f)),M.push(new jf(oe.p.x-C,oe.p.y+C,C,f)),M.push(new jf(oe.p.x+C,oe.p.y+C,C,f)),ie+=4)}return d&&(console.log(`num probes: ${ie}`),console.log(`best distance: ${X.d}`)),X.p}function yw(f,r){return r.max-f.max}function jf(f,r,d,y){this.p=new g(f,r),this.h=d,this.d=function(v,C){let M=!1,R=1/0;for(let I=0;I<C.length;I++){const V=C[I];for(let H=0,X=V.length,ie=X-1;H<X;ie=H++){const oe=V[H],de=V[ie];oe.y>v.y!=de.y>v.y&&v.x<(de.x-oe.x)*(v.y-oe.y)/(de.y-oe.y)+oe.x&&(M=!M),R=Math.min(R,Uy(v,oe,de))}}return(M?1:-1)*Math.sqrt(R)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}var Hr;c.aE=void 0,(Hr=c.aE||(c.aE={}))[Hr.center=1]="center",Hr[Hr.left=2]="left",Hr[Hr.right=3]="right",Hr[Hr.top=4]="top",Hr[Hr.bottom=5]="bottom",Hr[Hr["top-left"]=6]="top-left",Hr[Hr["top-right"]=7]="top-right",Hr[Hr["bottom-left"]=8]="bottom-left",Hr[Hr["bottom-right"]=9]="bottom-right";const Cx=Number.POSITIVE_INFINITY;function K_(f,r){return r[1]!==Cx?function(d,y,v){let C=0,M=0;switch(y=Math.abs(y),v=Math.abs(v),d){case"top-right":case"top-left":case"top":M=v-7;break;case"bottom-right":case"bottom-left":case"bottom":M=7-v}switch(d){case"top-right":case"bottom-right":case"right":C=-y;break;case"top-left":case"bottom-left":case"left":C=y}return[C,M]}(f,r[0],r[1]):function(d,y){let v=0,C=0;y<0&&(y=0);const M=y/Math.SQRT2;switch(d){case"top-right":case"top-left":C=M-7;break;case"bottom-right":case"bottom-left":C=7-M;break;case"bottom":C=7-y;break;case"top":C=y-7}switch(d){case"top-right":case"bottom-right":v=-M;break;case"top-left":case"bottom-left":v=M;break;case"left":v=y;break;case"right":v=-y}return[v,C]}(f,r[0])}function Q_(f,r,d){var y;const v=f.layout,C=(y=v.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(r,{},d);if(C){const R=C.values,I=[];for(let V=0;V<R.length;V+=2){const H=I[V]=R[V],X=R[V+1].map(ie=>ie*cr);H.startsWith("top")?X[1]-=7:H.startsWith("bottom")&&(X[1]+=7),I[V+1]=X}return new Zs(I)}const M=v.get("text-variable-anchor");if(M){let R;R=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(r,{},d)*cr,Cx]:v.get("text-offset").evaluate(r,{},d).map(V=>V*cr);const I=[];for(const V of M)I.push(V,K_(V,R));return new Zs(I)}return null}function Mg(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Cf(f,r,d,y,v,C,M,R,I,V,H,X){let ie=C.textMaxSize.evaluate(r,{});ie===void 0&&(ie=M);const oe=f.layers[0].layout,de=oe.get("icon-offset").evaluate(r,{},H),xe=Tx(d.horizontal),ve=M/24,Re=f.tilePixelRatio*ve,at=f.tilePixelRatio*ie/24,Be=f.tilePixelRatio*R,Ze=f.tilePixelRatio*oe.get("symbol-spacing"),xt=oe.get("text-padding")*f.tilePixelRatio,Mt=function(Qn,Rn,An,wi=1){const ms=Qn.get("icon-padding").evaluate(Rn,{},An),Gs=ms&&ms.values;return[Gs[0]*wi,Gs[1]*wi,Gs[2]*wi,Gs[3]*wi]}(oe,r,H,f.tilePixelRatio),Zt=oe.get("text-max-angle")/180*Math.PI,cn=oe.get("text-rotation-alignment")!=="viewport"&&oe.get("symbol-placement")!=="point",an=oe.get("icon-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",dn=oe.get("symbol-placement"),Nn=Ze/2,fn=oe.get("icon-text-fit");let pn;y&&fn!=="none"&&(f.allowVerticalPlacement&&d.vertical&&(pn=yx(y,d.vertical,fn,oe.get("icon-text-fit-padding"),de,ve)),xe&&(y=yx(y,xe,fn,oe.get("icon-text-fit-padding"),de,ve)));const $t=H?X.line.getGranularityForZoomLevel(H.z):1,Wn=(Qn,Rn)=>{Rn.x<0||Rn.x>=Nt||Rn.y<0||Rn.y>=Nt||function(An,wi,ms,Gs,kr,aa,oa,tr,_s,_r,nr,h,m,b,k,D,U,re,be,$e,ft,Ht,Qt,Tt,zt){const ii=An.addToLineVertexArray(wi,ms);let Zn,$i,mt,st,vt=0,Kt=0,In=0,ki=0,$n=-1,si=-1;const Ms={};let Hi=Pl("");if(An.allowVerticalPlacement&&Gs.vertical){const Ba=tr.layout.get("text-rotate").evaluate(ft,{},Tt)+90;mt=new nu(_s,wi,_r,nr,h,Gs.vertical,m,b,k,Ba),oa&&(st=new nu(_s,wi,_r,nr,h,oa,U,re,k,Ba))}if(kr){const Ba=tr.layout.get("icon-rotate").evaluate(ft,{}),Dl=tr.layout.get("icon-text-fit")!=="none",Gp=jx(kr,Ba,Qt,Dl),ru=oa?jx(oa,Ba,Qt,Dl):void 0;$i=new nu(_s,wi,_r,nr,h,kr,U,re,!1,Ba),vt=4*Gp.length;const Wp=An.iconSizeData;let ad=null;Wp.kind==="source"?(ad=[Jc*tr.layout.get("icon-size").evaluate(ft,{})],ad[0]>dc&&en(`${An.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Wp.kind==="composite"&&(ad=[Jc*Ht.compositeIconSizes[0].evaluate(ft,{},Tt),Jc*Ht.compositeIconSizes[1].evaluate(ft,{},Tt)],(ad[0]>dc||ad[1]>dc)&&en(`${An.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),An.addSymbols(An.icon,Gp,ad,$e,be,ft,c.ao.none,wi,ii.lineStartIndex,ii.lineLength,-1,Tt),$n=An.icon.placedSymbolArray.length-1,ru&&(Kt=4*ru.length,An.addSymbols(An.icon,ru,ad,$e,be,ft,c.ao.vertical,wi,ii.lineStartIndex,ii.lineLength,-1,Tt),si=An.icon.placedSymbolArray.length-1)}const iu=Object.keys(Gs.horizontal);for(const Ba of iu){const Dl=Gs.horizontal[Ba];if(!Zn){Hi=Pl(Dl.text);const ru=tr.layout.get("text-rotate").evaluate(ft,{},Tt);Zn=new nu(_s,wi,_r,nr,h,Dl,m,b,k,ru)}const Gp=Dl.positionedLines.length===1;if(In+=Tf(An,wi,Dl,aa,tr,k,ft,D,ii,Gs.vertical?c.ao.horizontal:c.ao.horizontalOnly,Gp?iu:[Ba],Ms,$n,Ht,Tt),Gp)break}Gs.vertical&&(ki+=Tf(An,wi,Gs.vertical,aa,tr,k,ft,D,ii,c.ao.vertical,["vertical"],Ms,si,Ht,Tt));const bw=Zn?Zn.boxStartIndex:An.collisionBoxArray.length,Tz=Zn?Zn.boxEndIndex:An.collisionBoxArray.length,kz=mt?mt.boxStartIndex:An.collisionBoxArray.length,Ez=mt?mt.boxEndIndex:An.collisionBoxArray.length,Mz=$i?$i.boxStartIndex:An.collisionBoxArray.length,Nz=$i?$i.boxEndIndex:An.collisionBoxArray.length,Az=st?st.boxStartIndex:An.collisionBoxArray.length,Pz=st?st.boxEndIndex:An.collisionBoxArray.length;let su=-1;const J_=(Ba,Dl)=>Ba&&Ba.circleDiameter?Math.max(Ba.circleDiameter,Dl):Dl;su=J_(Zn,su),su=J_(mt,su),su=J_($i,su),su=J_(st,su);const $T=su>-1?1:0;$T&&(su*=zt/cr),An.glyphOffsetArray.length>=eu.MAX_GLYPHS&&en("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ft.sortKey!==void 0&&An.addToSortKeyRanges(An.symbolInstances.length,ft.sortKey);const Rz=Q_(tr,ft,Tt),[Dz,zz]=function(Ba,Dl){const Gp=Ba.length,ru=Dl==null?void 0:Dl.values;if((ru==null?void 0:ru.length)>0)for(let Wp=0;Wp<ru.length;Wp+=2){const ad=ru[Wp+1];Ba.emplaceBack(c.aE[ru[Wp]],ad[0],ad[1])}return[Gp,Ba.length]}(An.textAnchorOffsets,Rz);An.symbolInstances.emplaceBack(wi.x,wi.y,Ms.right>=0?Ms.right:-1,Ms.center>=0?Ms.center:-1,Ms.left>=0?Ms.left:-1,Ms.vertical||-1,$n,si,Hi,bw,Tz,kz,Ez,Mz,Nz,Az,Pz,_r,In,ki,vt,Kt,$T,0,m,su,Dz,zz)}(f,Rn,Qn,d,y,v,pn,f.layers[0],f.collisionBoxArray,r.index,r.sourceLayerIndex,f.index,Re,[xt,xt,xt,xt],cn,I,Be,Mt,an,de,r,C,V,H,M)};if(dn==="line")for(const Qn of W_(r.geometry,0,0,Nt,Nt)){const Rn=tl(Qn,$t),An=Bp(Rn,Ze,Zt,d.vertical||xe,y,24,at,f.overscaling,Nt);for(const wi of An)xe&&xw(f,xe.text,Nn,wi)||Wn(Rn,wi)}else if(dn==="line-center"){for(const Qn of r.geometry)if(Qn.length>1){const Rn=tl(Qn,$t),An=Y_(Rn,Zt,d.vertical||xe,y,24,at);An&&Wn(Rn,An)}}else if(r.type==="Polygon")for(const Qn of Bh(r.geometry,0)){const Rn=gw(Qn,16);Wn(tl(Qn[0],$t,!0),new hc(Rn.x,Rn.y,0))}else if(r.type==="LineString")for(const Qn of r.geometry){const Rn=tl(Qn,$t);Wn(Rn,new hc(Rn[0].x,Rn[0].y,0))}else if(r.type==="Point")for(const Qn of r.geometry)for(const Rn of Qn)Wn([Rn],new hc(Rn.x,Rn.y,0))}function Tf(f,r,d,y,v,C,M,R,I,V,H,X,ie,oe,de){const xe=function(at,Be,Ze,xt,Mt,Zt,cn,an){const dn=xt.layout.get("text-rotate").evaluate(Zt,{})*Math.PI/180,Nn=[];for(const fn of Be.positionedLines)for(const pn of fn.positionedGlyphs){if(!pn.rect)continue;const $t=pn.rect||{};let Wn=4,Qn=!0,Rn=1,An=0;const wi=(Mt||an)&&pn.vertical,ms=pn.metrics.advance*pn.scale/2;if(an&&Be.verticalizable&&(An=fn.lineOffset/2-(pn.imageName?-(cr-pn.metrics.width*pn.scale)/2:(pn.scale-1)*cr)),pn.imageName){const re=cn[pn.imageName];Qn=re.sdf,Rn=re.pixelRatio,Wn=1/Rn}const Gs=Mt?[pn.x+ms,pn.y]:[0,0];let kr=Mt?[0,0]:[pn.x+ms+Ze[0],pn.y+Ze[1]-An],aa=[0,0];wi&&(aa=kr,kr=[0,0]);const oa=pn.metrics.isDoubleResolution?2:1,tr=(pn.metrics.left-Wn)*pn.scale-ms+kr[0],_s=(-pn.metrics.top-Wn)*pn.scale+kr[1],_r=tr+$t.w/oa*pn.scale/Rn,nr=_s+$t.h/oa*pn.scale/Rn,h=new g(tr,_s),m=new g(_r,_s),b=new g(tr,nr),k=new g(_r,nr);if(wi){const re=new g(-ms,ms- -17),be=-Math.PI/2,$e=12-ms,ft=new g(22-$e,-(pn.imageName?$e:0)),Ht=new g(...aa);h._rotateAround(be,re)._add(ft)._add(Ht),m._rotateAround(be,re)._add(ft)._add(Ht),b._rotateAround(be,re)._add(ft)._add(Ht),k._rotateAround(be,re)._add(ft)._add(Ht)}if(dn){const re=Math.sin(dn),be=Math.cos(dn),$e=[be,-re,re,be];h._matMult($e),m._matMult($e),b._matMult($e),k._matMult($e)}const D=new g(0,0),U=new g(0,0);Nn.push({tl:h,tr:m,bl:b,br:k,tex:$t,writingMode:Be.writingMode,glyphOffset:Gs,sectionIndex:pn.sectionIndex,isSDF:Qn,pixelOffsetTL:D,pixelOffsetBR:U,minFontScaleX:0,minFontScaleY:0})}return Nn}(0,d,R,v,C,M,y,f.allowVerticalPlacement),ve=f.textSizeData;let Re=null;ve.kind==="source"?(Re=[Jc*v.layout.get("text-size").evaluate(M,{})],Re[0]>dc&&en(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ve.kind==="composite"&&(Re=[Jc*oe.compositeTextSizes[0].evaluate(M,{},de),Jc*oe.compositeTextSizes[1].evaluate(M,{},de)],(Re[0]>dc||Re[1]>dc)&&en(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,xe,Re,R,C,M,V,r,I.lineStartIndex,I.lineLength,ie,de);for(const at of H)X[at]=f.text.placedSymbolArray.length-1;return 4*xe.length}function Tx(f){for(const r in f)return f[r];return null}function xw(f,r,d,y){const v=f.compareText;if(r in v){const C=v[r];for(let M=C.length-1;M>=0;M--)if(y.dist(C[M])<d)return!0}else v[r]=[];return v[r].push(y),!1}const sh=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class rh{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,y]=new Uint8Array(r,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=y>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const C=sh[15&y];if(!C)throw new Error("Unrecognized array type.");const[M]=new Uint16Array(r,2,1),[R]=new Uint32Array(r,4,1);return new rh(R,M,C,r)}constructor(r,d=64,y=Float64Array,v){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=y,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const C=sh.indexOf(this.ArrayType),M=2*r*this.ArrayType.BYTES_PER_ELEMENT,R=r*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-R%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${y}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+R+I,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+M+R+I),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+R+I,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=r)}add(r,d){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=r,this.coords[this._pos++]=d,y}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Ng(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,d,y,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:M,nodeSize:R}=this,I=[0,C.length-1,0],V=[];for(;I.length;){const H=I.pop()||0,X=I.pop()||0,ie=I.pop()||0;if(X-ie<=R){for(let ve=ie;ve<=X;ve++){const Re=M[2*ve],at=M[2*ve+1];Re>=r&&Re<=y&&at>=d&&at<=v&&V.push(C[ve])}continue}const oe=ie+X>>1,de=M[2*oe],xe=M[2*oe+1];de>=r&&de<=y&&xe>=d&&xe<=v&&V.push(C[oe]),(H===0?r<=de:d<=xe)&&(I.push(ie),I.push(oe-1),I.push(1-H)),(H===0?y>=de:v>=xe)&&(I.push(oe+1),I.push(X),I.push(1-H))}return V}within(r,d,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:C,nodeSize:M}=this,R=[0,v.length-1,0],I=[],V=y*y;for(;R.length;){const H=R.pop()||0,X=R.pop()||0,ie=R.pop()||0;if(X-ie<=M){for(let ve=ie;ve<=X;ve++)$p(C[2*ve],C[2*ve+1],r,d)<=V&&I.push(v[ve]);continue}const oe=ie+X>>1,de=C[2*oe],xe=C[2*oe+1];$p(de,xe,r,d)<=V&&I.push(v[oe]),(H===0?r-y<=de:d-y<=xe)&&(R.push(ie),R.push(oe-1),R.push(1-H)),(H===0?r+y>=de:d+y>=xe)&&(R.push(oe+1),R.push(X),R.push(1-H))}return I}}function Ng(f,r,d,y,v,C){if(v-y<=d)return;const M=y+v>>1;Vp(f,r,M,y,v,C),Ng(f,r,d,y,M-1,1-C),Ng(f,r,d,M+1,v,1-C)}function Vp(f,r,d,y,v,C){for(;v>y;){if(v-y>600){const V=v-y+1,H=d-y+1,X=Math.log(V),ie=.5*Math.exp(2*X/3),oe=.5*Math.sqrt(X*ie*(V-ie)/V)*(H-V/2<0?-1:1);Vp(f,r,d,Math.max(y,Math.floor(d-H*ie/V+oe)),Math.min(v,Math.floor(d+(V-H)*ie/V+oe)),C)}const M=r[2*d+C];let R=y,I=v;for(ah(f,r,y,d),r[2*v+C]>M&&ah(f,r,y,v);R<I;){for(ah(f,r,R,I),R++,I--;r[2*R+C]<M;)R++;for(;r[2*I+C]>M;)I--}r[2*y+C]===M?ah(f,r,y,I):(I++,ah(f,r,I,v)),I<=d&&(y=I+1),d<=I&&(v=I-1)}}function ah(f,r,d,y){Up(f,d,y),Up(r,2*d,2*y),Up(r,2*d+1,2*y+1)}function Up(f,r,d){const y=f[r];f[r]=f[d],f[d]=y}function $p(f,r,d,y){const v=f-d,C=r-y;return v*v+C*C}var Ag;c.cx=void 0,(Ag=c.cx||(c.cx={})).create="create",Ag.load="load",Ag.fullLoad="fullLoad";let Hp=null,qp=[];const Pg=1e3/60,oh="loadTime",kx="fullLoadTime",_w={mark(f){performance.mark(f)},frame(f){const r=f;Hp!=null&&qp.push(r-Hp),Hp=r},clearMetrics(){Hp=null,qp=[],performance.clearMeasures(oh),performance.clearMeasures(kx);for(const f in c.cx)performance.clearMarks(c.cx[f])},getPerformanceMetrics(){performance.measure(oh,c.cx.create,c.cx.load),performance.measure(kx,c.cx.create,c.cx.fullLoad);const f=performance.getEntriesByName(oh)[0].duration,r=performance.getEntriesByName(kx)[0].duration,d=qp.length,y=1/(qp.reduce((C,M)=>C+M,0)/d/1e3),v=qp.filter(C=>C>Pg).reduce((C,M)=>C+(M-Pg)/Pg,0);return{loadTime:f,fullLoadTime:r,fps:y,percentDroppedFrames:v/(d+v)*100,totalFrames:d}}};c.$=Nt,c.A=Q,c.B=function([f,r,d]){return r+=90,r*=Math.PI/180,d*=Math.PI/180,{x:f*Math.cos(r)*Math.sin(d),y:f*Math.sin(r)*Math.sin(d),z:f*Math.cos(d)}},c.C=Ps,c.D=En,c.E=Tn,c.F=Yi,c.G=Uu,c.H=hn,c.I=hg,c.J=class{constructor(f,r){this.target=f,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new U_(()=>this.process()),this.subscription=Et(this.target,"message",d=>this.receive(d),!1),this.globalScope=Yn(self)?f:window}registerMessageHandler(f,r){this.messageHandlers[f]=r}sendAsync(f,r){return new Promise((d,y)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),C=r?Et(r.signal,"abort",()=>{C==null||C.unsubscribe(),delete this.resolveRejects[v];const I={id:v,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)},$_):null;this.resolveRejects[v]={resolve:I=>{C==null||C.unsubscribe(),d(I)},reject:I=>{C==null||C.unsubscribe(),y(I)}};const M=[],R=Object.assign(Object.assign({},f),{id:v,sourceMapId:this.mapId,origin:location.origin,data:$u(f.data,M)});this.target.postMessage(R,{transfer:M})})}receive(f){const r=f.data,d=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[d];const y=this.abortControllers[d];return delete this.abortControllers[d],void(y&&y.abort())}if(Yn(self)||r.mustQueue)return this.tasks[d]=r,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,r)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),r=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(f,r)}processTask(f,r){return a(this,void 0,void 0,function*(){if(r.type==="<response>"){const v=this.resolveRejects[f];return delete this.resolveRejects[f],v?void(r.error?v.reject(Xl(r.error)):v.resolve(Xl(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=Xl(r.data),y=new AbortController;this.abortControllers[f]=y;try{const v=yield this.messageHandlers[r.type](r.sourceMapId,d,y);this.completeTask(f,null,v)}catch(v){this.completeTask(f,v)}})}completeTask(f,r,d){const y=[];delete this.abortControllers[f];const v={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?$u(r):null,data:$u(d,y)};this.target.postMessage(v,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.K=Ce,c.L=function(){var f=new Q(16);return Q!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},c.M=function(f,r,d){var y,v,C,M,R,I,V,H,X,ie,oe,de,xe=d[0],ve=d[1],Re=d[2];return r===f?(f[12]=r[0]*xe+r[4]*ve+r[8]*Re+r[12],f[13]=r[1]*xe+r[5]*ve+r[9]*Re+r[13],f[14]=r[2]*xe+r[6]*ve+r[10]*Re+r[14],f[15]=r[3]*xe+r[7]*ve+r[11]*Re+r[15]):(v=r[1],C=r[2],M=r[3],R=r[4],I=r[5],V=r[6],H=r[7],X=r[8],ie=r[9],oe=r[10],de=r[11],f[0]=y=r[0],f[1]=v,f[2]=C,f[3]=M,f[4]=R,f[5]=I,f[6]=V,f[7]=H,f[8]=X,f[9]=ie,f[10]=oe,f[11]=de,f[12]=y*xe+R*ve+X*Re+r[12],f[13]=v*xe+I*ve+ie*Re+r[13],f[14]=C*xe+V*ve+oe*Re+r[14],f[15]=M*xe+H*ve+de*Re+r[15]),f},c.N=function(f,r,d){var y=d[0],v=d[1],C=d[2];return f[0]=r[0]*y,f[1]=r[1]*y,f[2]=r[2]*y,f[3]=r[3]*y,f[4]=r[4]*v,f[5]=r[5]*v,f[6]=r[6]*v,f[7]=r[7]*v,f[8]=r[8]*C,f[9]=r[9]*C,f[10]=r[10]*C,f[11]=r[11]*C,f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15],f},c.O=function(f,r,d){var y=r[0],v=r[1],C=r[2],M=r[3],R=r[4],I=r[5],V=r[6],H=r[7],X=r[8],ie=r[9],oe=r[10],de=r[11],xe=r[12],ve=r[13],Re=r[14],at=r[15],Be=d[0],Ze=d[1],xt=d[2],Mt=d[3];return f[0]=Be*y+Ze*R+xt*X+Mt*xe,f[1]=Be*v+Ze*I+xt*ie+Mt*ve,f[2]=Be*C+Ze*V+xt*oe+Mt*Re,f[3]=Be*M+Ze*H+xt*de+Mt*at,f[4]=(Be=d[4])*y+(Ze=d[5])*R+(xt=d[6])*X+(Mt=d[7])*xe,f[5]=Be*v+Ze*I+xt*ie+Mt*ve,f[6]=Be*C+Ze*V+xt*oe+Mt*Re,f[7]=Be*M+Ze*H+xt*de+Mt*at,f[8]=(Be=d[8])*y+(Ze=d[9])*R+(xt=d[10])*X+(Mt=d[11])*xe,f[9]=Be*v+Ze*I+xt*ie+Mt*ve,f[10]=Be*C+Ze*V+xt*oe+Mt*Re,f[11]=Be*M+Ze*H+xt*de+Mt*at,f[12]=(Be=d[12])*y+(Ze=d[13])*R+(xt=d[14])*X+(Mt=d[15])*xe,f[13]=Be*v+Ze*I+xt*ie+Mt*ve,f[14]=Be*C+Ze*V+xt*oe+Mt*Re,f[15]=Be*M+Ze*H+xt*de+Mt*at,f},c.P=g,c.Q=function(f,r){const d={};for(let y=0;y<r.length;y++){const v=r[y];v in f&&(d[v]=f[v])}return d},c.R=Tr,c.S=Oi,c.T=Gd,c.U=wg,c.V=H_,c.W=$,c.X=q,c.Y=We,c.Z=co,c._=a,c.a=ue,c.a$=rt,c.a0=function(f,r){var d,y,v,C,M;if(!f)return r!=null?r:{};if(!r)return f;let R=Object.assign({},f);if(r.removeAll&&(R={removeAll:!0}),r.remove){const I=new Set(r.remove);R.add&&(R.add=R.add.filter(H=>!I.has(H.id))),R.update&&(R.update=R.update.filter(H=>!I.has(H.id)));const V=new Set(((d=f.add)!==null&&d!==void 0?d:[]).map(H=>H.id));r.remove=r.remove.filter(H=>!V.has(H))}if(r.remove){const I=new Set(R.remove?R.remove.concat(r.remove):r.remove);R.remove=Array.from(I.values())}if(r.add){const I=R.add?R.add.concat(r.add):r.add,V=new Map(I.map(H=>[H.id,H]));R.add=Array.from(V.values())}if(r.update){const I=new Map((y=R.update)===null||y===void 0?void 0:y.map(V=>[V.id,V]));for(const V of r.update){const H=(v=I.get(V.id))!==null&&v!==void 0?v:{id:V.id};V.newGeometry&&(H.newGeometry=V.newGeometry),V.addOrUpdateProperties&&(H.addOrUpdateProperties=((C=H.addOrUpdateProperties)!==null&&C!==void 0?C:[]).concat(V.addOrUpdateProperties)),V.removeProperties&&(H.removeProperties=((M=H.removeProperties)!==null&&M!==void 0?M:[]).concat(V.removeProperties)),V.removeAllProperties&&(H.removeAllProperties=!0),I.set(V.id,H)}R.update=Array.from(I.values())}return R.remove&&R.add&&(R.remove=R.remove.filter(I=>R.add.findIndex(V=>V.id===I)===-1)),R},c.a1=vf,c.a2=nh,c.a3=25,c.a4=Lp,c.a5=f=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(d=>{r.onloadstart=()=>{d(r)};for(const y of f){const v=window.document.createElement("source");Je(y)||(r.crossOrigin="Anonymous"),v.src=y,r.appendChild(v)}})},c.a6=lt,c.a7=function(){return Ge++},c.a8=ne,c.a9=eu,c.aA=function(f){let r=1/0,d=1/0,y=-1/0,v=-1/0;for(const C of f)r=Math.min(r,C.x),d=Math.min(d,C.y),y=Math.max(y,C.x),v=Math.max(v,C.y);return[r,d,y,v]},c.aB=cr,c.aC=fe,c.aD=function(f,r,d,y,v=!1){if(!d[0]&&!d[1])return[0,0];const C=v?y==="map"?-f.bearingInRadians:0:y==="viewport"?f.bearingInRadians:0;if(C){const M=Math.sin(C),R=Math.cos(C);d=[d[0]*R-d[1]*M,d[0]*M+d[1]*R]}return[v?d[0]:fe(r,d[0],f.zoom),v?d[1]:fe(r,d[1],f.zoom)]},c.aF=xx,c.aG=Mg,c.aH=Jd,c.aI=rh,c.aJ=Ts,c.aK=Do,c.aL=Ke,c.aM=gi,c.aN=Bi,c.aO=pt,c.aP=yn,c.aQ=vx,c.aR=Ie,c.aS=pe,c.aT=function(f){var r=new Q(3);return r[0]=f[0],r[1]=f[1],r[2]=f[2],r},c.aU=function(f,r,d){return f[0]=r[0]-d[0],f[1]=r[1]-d[1],f[2]=r[2]-d[2],f},c.aV=function(f,r){var d=r[0],y=r[1],v=r[2],C=d*d+y*y+v*v;return C>0&&(C=1/Math.sqrt(C)),f[0]=r[0]*C,f[1]=r[1]*C,f[2]=r[2]*C,f},c.aW=He,c.aX=function(f,r){return f[0]*r[0]+f[1]*r[1]+f[2]*r[2]},c.aY=function(f,r,d){return f[0]=r[0]*d[0],f[1]=r[1]*d[1],f[2]=r[2]*d[2],f[3]=r[3]*d[3],f},c.aZ=ge,c.a_=function(f,r,d){const y=r[0]*d[0]+r[1]*d[1]+r[2]*d[2];return y===0?null:(-(f[0]*d[0]+f[1]*d[1]+f[2]*d[2])-d[3])/y},c.aa=Fc,c.ab=Ku,c.ac=tu,c.ad=function(f){const r={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,y,v,C)=>{const M=v||C;return r[y]=!M||M.toLowerCase(),""}),r["max-age"]){const d=parseInt(r["max-age"],10);isNaN(d)?delete r["max-age"]:r["max-age"]=d}return r},c.ae=nn,c.af=function(f){return Math.pow(2,f)},c.ag=K,c.ah=dt,c.ai=85.051129,c.aj=Sg,c.ak=function(f){return Math.log(f)/Math.LN2},c.al=function(f){var r=f[0],d=f[1];return r*r+d*d},c.am=function(f){if(!f.length)return new Set;const r=Math.max(...f.map(I=>I.canonical.z));let d=1/0,y=-1/0,v=1/0,C=-1/0;const M=[];for(const I of f){const{x:V,y:H,z:X}=I.canonical,ie=Math.pow(2,r-X),oe=V*ie,de=H*ie;M.push({id:I,x:oe,y:de}),oe<d&&(d=oe),oe>y&&(y=oe),de<v&&(v=de),de>C&&(C=de)}const R=new Set;for(const I of M)I.x!==d&&I.x!==y&&I.y!==v&&I.y!==C||R.add(I.id);return R},c.an=function(f,r){let d=0,y=0;if(f.kind==="constant")y=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:v,minZoom:C,maxZoom:M}=f,R=v?dt(Si.interpolationFactor(v,r,C,M),0,1):0;f.kind==="camera"?y=Ps.number(f.minSize,f.maxSize,R):d=R}return{uSizeT:d,uSize:y}},c.ap=function(f,{uSize:r,uSizeT:d},{lowerSize:y,upperSize:v}){return f.kind==="source"?y/Jc:f.kind==="composite"?Ps.number(y/Jc,v/Jc,d):r},c.aq=function(f,r){var d=r[0],y=r[1],v=r[2],C=r[3],M=r[4],R=r[5],I=r[6],V=r[7],H=r[8],X=r[9],ie=r[10],oe=r[11],de=r[12],xe=r[13],ve=r[14],Re=r[15],at=d*R-y*M,Be=d*I-v*M,Ze=d*V-C*M,xt=y*I-v*R,Mt=y*V-C*R,Zt=v*V-C*I,cn=H*xe-X*de,an=H*ve-ie*de,dn=H*Re-oe*de,Nn=X*ve-ie*xe,fn=X*Re-oe*xe,pn=ie*Re-oe*ve,$t=at*pn-Be*fn+Ze*Nn+xt*dn-Mt*an+Zt*cn;return $t?(f[0]=(R*pn-I*fn+V*Nn)*($t=1/$t),f[1]=(v*fn-y*pn-C*Nn)*$t,f[2]=(xe*Zt-ve*Mt+Re*xt)*$t,f[3]=(ie*Mt-X*Zt-oe*xt)*$t,f[4]=(I*dn-M*pn-V*an)*$t,f[5]=(d*pn-v*dn+C*an)*$t,f[6]=(ve*Ze-de*Zt-Re*Be)*$t,f[7]=(H*Zt-ie*Ze+oe*Be)*$t,f[8]=(M*fn-R*dn+V*cn)*$t,f[9]=(y*dn-d*fn-C*cn)*$t,f[10]=(de*Mt-xe*Ze+Re*at)*$t,f[11]=(X*Ze-H*Mt-oe*at)*$t,f[12]=(R*an-M*Nn-I*cn)*$t,f[13]=(d*Nn-y*an+v*cn)*$t,f[14]=(xe*Be-de*xt-ve*at)*$t,f[15]=(H*xt-X*Be+ie*at)*$t,f):null},c.ar=Qe,c.as=function(f){var r=f[0],d=f[1];return Math.sqrt(r*r+d*d)},c.at=function(f){return f[0]=0,f[1]=0,f},c.au=function(f,r,d){return f[0]=r[0]*d,f[1]=r[1]*d,f},c.av=_x,c.aw=Rt,c.ax=function(f,r,d,y){const v=r.y-f.y,C=r.x-f.x,M=y.y-d.y,R=y.x-d.x,I=M*C-R*v;if(I===0)return null;const V=(R*(f.y-d.y)-M*(f.x-d.x))/I;return new g(f.x+V*C,f.y+V*v)},c.ay=W_,c.az=m_,c.b=on,c.b$=class extends xr{constructor(f,r){super(f,r),this.current=new Array}set(f){if(f!=this.current){this.current=f;const r=new Float32Array(f);this.gl.uniform1fv(this.location,r)}}},c.b0=function(f,r,d){return f[0]=r[0]*d,f[1]=r[1]*d,f[2]=r[2]*d,f[3]=r[3]*d,f},c.b1=function(f,r){return f[0]*r[0]+f[1]*r[1]+f[2]*r[2]+f[3]},c.b2=q_,c.b3=wf,c.b4=function(f,r,d,y,v){var C=1/Math.tan(r/2);if(f[0]=C/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=C,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,v!=null&&v!==1/0){var M=1/(y-v);f[10]=(v+y)*M,f[14]=2*v*y*M}else f[10]=-1,f[14]=-2*y;return f},c.b5=function(f){var r=new Q(16);return r[0]=f[0],r[1]=f[1],r[2]=f[2],r[3]=f[3],r[4]=f[4],r[5]=f[5],r[6]=f[6],r[7]=f[7],r[8]=f[8],r[9]=f[9],r[10]=f[10],r[11]=f[11],r[12]=f[12],r[13]=f[13],r[14]=f[14],r[15]=f[15],r},c.b6=function(f,r,d){var y=Math.sin(d),v=Math.cos(d),C=r[0],M=r[1],R=r[2],I=r[3],V=r[4],H=r[5],X=r[6],ie=r[7];return r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f[0]=C*v+V*y,f[1]=M*v+H*y,f[2]=R*v+X*y,f[3]=I*v+ie*y,f[4]=V*v-C*y,f[5]=H*v-M*y,f[6]=X*v-R*y,f[7]=ie*v-I*y,f},c.b7=function(f,r,d){var y=Math.sin(d),v=Math.cos(d),C=r[4],M=r[5],R=r[6],I=r[7],V=r[8],H=r[9],X=r[10],ie=r[11];return r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f[4]=C*v+V*y,f[5]=M*v+H*y,f[6]=R*v+X*y,f[7]=I*v+ie*y,f[8]=V*v-C*y,f[9]=H*v-M*y,f[10]=X*v-R*y,f[11]=ie*v-I*y,f},c.b8=function(){const f=new Float32Array(16);return K(f),f},c.b9=function(){const f=new Float64Array(16);return K(f),f},c.bA=function(f,r){const d=Xe(f,360),y=Xe(r,360),v=y-d,C=y>d?v-360:v+360;return Math.abs(v)<Math.abs(C)?v:C},c.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},c.bC=function(f,r,d,y){const v=Math.sqrt(f*f+r*r),C=Math.sqrt(d*d+y*y);f/=v,r/=v,d/=C,y/=C;const M=Math.acos(f*d+r*y);return-r*d+f*y>0?M:-M},c.bD=function(f,r){const d=Xe(f,2*Math.PI),y=Xe(r,2*Math.PI);return Math.min(Math.abs(d-y),Math.abs(d-y+2*Math.PI),Math.abs(d-y-2*Math.PI))},c.bE=function(){const f={},r=ct.$version;for(const d in ct.$root){const y=ct.$root[d];if(y.required){let v=null;v=d==="version"?r:y.type==="array"?[]:{},v!=null&&(f[d]=v)}}return f},c.bF=Oa,c.bG=J,c.bH=function f(r,d){if(Array.isArray(r)){if(!Array.isArray(d)||r.length!==d.length)return!1;for(let y=0;y<r.length;y++)if(!f(r[y],d[y]))return!1;return!0}if(typeof r=="object"&&r!==null&&d!==null){if(typeof d!="object"||Object.keys(r).length!==Object.keys(d).length)return!1;for(const y in r)if(!f(r[y],d[y]))return!1;return!0}return r===d},c.bI=function(f){f=f.slice();const r=Object.create(null);for(let d=0;d<f.length;d++)r[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=Wt(f[d],r[f[d].ref]));return f},c.bJ=function(f,r){if(f.type==="custom")return new pw(f,r);switch(f.type){case"background":return new fw(f,r);case"circle":return new x_(f,r);case"color-relief":return new ex(f,r);case"fill":return new aw(f,r);case"fill-extrusion":return new lx(f,r);case"heatmap":return new nw(f,r);case"hillshade":return new Ju(f,r);case"line":return new C_(f,r);case"raster":return new Sp(f,r);case"symbol":return new eh(f,r)}},c.bK=f=>f.type==="raster",c.bL=It,c.bM=function(f,r){if(!f)return[{command:"setStyle",args:[r]}];let d=[];try{if(!Ut(f.version,r.version))return[{command:"setStyle",args:[r]}];Ut(f.center,r.center)||d.push({command:"setCenter",args:[r.center]}),Ut(f.state,r.state)||d.push({command:"setGlobalState",args:[r.state]}),Ut(f.centerAltitude,r.centerAltitude)||d.push({command:"setCenterAltitude",args:[r.centerAltitude]}),Ut(f.zoom,r.zoom)||d.push({command:"setZoom",args:[r.zoom]}),Ut(f.bearing,r.bearing)||d.push({command:"setBearing",args:[r.bearing]}),Ut(f.pitch,r.pitch)||d.push({command:"setPitch",args:[r.pitch]}),Ut(f.roll,r.roll)||d.push({command:"setRoll",args:[r.roll]}),Ut(f.sprite,r.sprite)||d.push({command:"setSprite",args:[r.sprite]}),Ut(f.glyphs,r.glyphs)||d.push({command:"setGlyphs",args:[r.glyphs]}),Ut(f.transition,r.transition)||d.push({command:"setTransition",args:[r.transition]}),Ut(f.light,r.light)||d.push({command:"setLight",args:[r.light]}),Ut(f.terrain,r.terrain)||d.push({command:"setTerrain",args:[r.terrain]}),Ut(f.sky,r.sky)||d.push({command:"setSky",args:[r.sky]}),Ut(f.projection,r.projection)||d.push({command:"setProjection",args:[r.projection]});const y={},v=[];(function(M,R,I,V){let H;for(H in R=R||{},M=M||{})Object.prototype.hasOwnProperty.call(M,H)&&(Object.prototype.hasOwnProperty.call(R,H)||Jn(H,I,V));for(H in R)Object.prototype.hasOwnProperty.call(R,H)&&(Object.prototype.hasOwnProperty.call(M,H)?Ut(M[H],R[H])||(M[H].type==="geojson"&&R[H].type==="geojson"&&qn(M,R,H)?vn(I,{command:"setGeoJSONSourceData",args:[H,R[H].data]}):ai(H,R,I,V)):Gi(H,R,I))})(f.sources,r.sources,v,y);const C=[];f.layers&&f.layers.forEach(M=>{"source"in M&&y[M.source]?d.push({command:"removeLayer",args:[M.id]}):C.push(M)}),d=d.concat(v),function(M,R,I){R=R||[];const V=(M=M||[]).map(yi),H=R.map(yi),X=M.reduce(Xt,{}),ie=R.reduce(Xt,{}),oe=V.slice(),de=Object.create(null);let xe,ve,Re,at,Be;for(let Ze=0,xt=0;Ze<V.length;Ze++)xe=V[Ze],Object.prototype.hasOwnProperty.call(ie,xe)?xt++:(vn(I,{command:"removeLayer",args:[xe]}),oe.splice(oe.indexOf(xe,xt),1));for(let Ze=0,xt=0;Ze<H.length;Ze++)xe=H[H.length-1-Ze],oe[oe.length-1-Ze]!==xe&&(Object.prototype.hasOwnProperty.call(X,xe)?(vn(I,{command:"removeLayer",args:[xe]}),oe.splice(oe.lastIndexOf(xe,oe.length-xt),1)):xt++,at=oe[oe.length-Ze],vn(I,{command:"addLayer",args:[ie[xe],at]}),oe.splice(oe.length-Ze,0,xe),de[xe]=!0);for(let Ze=0;Ze<H.length;Ze++)if(xe=H[Ze],ve=X[xe],Re=ie[xe],!de[xe]&&!Ut(ve,Re))if(Ut(ve.source,Re.source)&&Ut(ve["source-layer"],Re["source-layer"])&&Ut(ve.type,Re.type)){for(Be in Bn(ve.layout,Re.layout,I,xe,null,"setLayoutProperty"),Bn(ve.paint,Re.paint,I,xe,null,"setPaintProperty"),Ut(ve.filter,Re.filter)||vn(I,{command:"setFilter",args:[xe,Re.filter]}),Ut(ve.minzoom,Re.minzoom)&&Ut(ve.maxzoom,Re.maxzoom)||vn(I,{command:"setLayerZoomRange",args:[xe,Re.minzoom,Re.maxzoom]}),ve)Object.prototype.hasOwnProperty.call(ve,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Bn(ve[Be],Re[Be],I,xe,Be.slice(6),"setPaintProperty"):Ut(ve[Be],Re[Be])||vn(I,{command:"setLayerProperty",args:[xe,Be,Re[Be]]}));for(Be in Re)Object.prototype.hasOwnProperty.call(Re,Be)&&!Object.prototype.hasOwnProperty.call(ve,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Bn(ve[Be],Re[Be],I,xe,Be.slice(6),"setPaintProperty"):Ut(ve[Be],Re[Be])||vn(I,{command:"setLayerProperty",args:[xe,Be,Re[Be]]}))}else vn(I,{command:"removeLayer",args:[xe]}),at=oe[oe.lastIndexOf(xe)+1],vn(I,{command:"addLayer",args:[Re,at]})}(C,r.layers,d)}catch(y){console.warn("Unable to compute style diff:",y),d=[{command:"setStyle",args:[r]}]}return d},c.bN=function(f){const r=[],d=f.id;return d===void 0&&r.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&r.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&r.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),r},c.bO=Dt,c.bP=Lt,c.bQ=class extends xr{constructor(f,r){super(f,r),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},c.bR=Us,c.bS=class extends xr{constructor(f,r){super(f,r),this.current=xs}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let r=1;r<16;r++)if(f[r]!==this.current[r]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},c.bT=Ki,c.bU=class extends xr{constructor(f,r){super(f,r),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},c.bV=class extends xr{constructor(f,r){super(f,r),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},c.bW=Z,c.bX=function(f,r){var d=Math.sin(r),y=Math.cos(r);return f[0]=y,f[1]=d,f[2]=0,f[3]=-d,f[4]=y,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},c.bY=function(f,r,d){var y=r[0],v=r[1],C=r[2];return f[0]=y*d[0]+v*d[3]+C*d[6],f[1]=y*d[1]+v*d[4]+C*d[7],f[2]=y*d[2]+v*d[5]+C*d[8],f},c.bZ=function(f,r,d,y,v,C,M){var R=1/(r-d),I=1/(y-v),V=1/(C-M);return f[0]=-2*R,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*I,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*V,f[11]=0,f[12]=(r+d)*R,f[13]=(v+y)*I,f[14]=(M+C)*V,f[15]=1,f},c.b_=class extends xr{constructor(f,r){super(f,r),this.current=new Array}set(f){if(f!=this.current){this.current=f;const r=new Float32Array(4*f.length);for(let d=0;d<f.length;d++)r[4*d]=f[d].r,r[4*d+1]=f[d].g,r[4*d+2]=f[d].b,r[4*d+3]=f[d].a;this.gl.uniform4fv(this.location,r)}}},c.ba=function(){return new Float64Array(16)},c.bb=function(f,r,d){const y=new Float64Array(4);return De(y,f,r-90,d),y},c.bc=function(f,r,d,y){var v,C,M,R,I,V=r[0],H=r[1],X=r[2],ie=r[3],oe=d[0],de=d[1],xe=d[2],ve=d[3];return(C=V*oe+H*de+X*xe+ie*ve)<0&&(C=-C,oe=-oe,de=-de,xe=-xe,ve=-ve),1-C>W?(v=Math.acos(C),M=Math.sin(v),R=Math.sin((1-y)*v)/M,I=Math.sin(y*v)/M):(R=1-y,I=y),f[0]=R*V+I*oe,f[1]=R*H+I*de,f[2]=R*X+I*xe,f[3]=R*ie+I*ve,f},c.bd=function(f){const r=new Float64Array(9);var d,y,v,C,M,R,I,V,H,X,ie,oe,de,xe,ve,Re,at,Be;X=(v=(y=f)[0])*(I=v+v),ie=(C=y[1])*I,de=(M=y[2])*I,xe=M*(V=C+C),Re=(R=y[3])*I,at=R*V,Be=R*(H=M+M),(d=r)[0]=1-(oe=C*V)-(ve=M*H),d[3]=ie-Be,d[6]=de+at,d[1]=ie+Be,d[4]=1-X-ve,d[7]=xe-Re,d[2]=de-at,d[5]=xe+Re,d[8]=1-X-oe;const Ze=yn(-Math.asin(dt(r[2],-1,1)));let xt,Mt;return Math.hypot(r[5],r[8])<.001?(xt=0,Mt=-yn(Math.atan2(r[3],r[4]))):(xt=yn(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),Mt=yn(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:xt,pitch:Ze+90,bearing:Mt}},c.be=function(f,r){return f.roll==r.roll&&f.pitch==r.pitch&&f.bearing==r.bearing},c.bf=ui,c.bg=Ds,c.bh=Wd,c.bi=lc,c.bj=td,c.bk=tt,c.bl=Me,c.bm=rs,c.bn=function(f,r,d,y,v){return tt(y,v,dt((f-r)/(d-r),0,1))},c.bo=Xe,c.bp=function(){return new Float64Array(3)},c.bq=function(f,r,d,y){return f[0]=r[0]+d[0]*y,f[1]=r[1]+d[1]*y,f[2]=r[2]+d[2]*y,f},c.br=De,c.bs=function(f,r,d){var y=d[0],v=d[1],C=d[2],M=d[3],R=r[0],I=r[1],V=r[2],H=v*V-C*I,X=C*R-y*V,ie=y*I-v*R;return f[0]=R+M*(H+=H)+v*(ie+=ie)-C*(X+=X),f[1]=I+M*X+C*H-y*ie,f[2]=V+M*ie+y*X-v*H,f},c.bt=function(f,r,d){const y=(v=[f[0],f[1],f[2],r[0],r[1],r[2],d[0],d[1],d[2]])[0]*((H=v[8])*(M=v[4])-(R=v[5])*(V=v[7]))+v[1]*(-H*(C=v[3])+R*(I=v[6]))+v[2]*(V*C-M*I);var v,C,M,R,I,V,H;if(y===0)return null;const X=He([],[r[0],r[1],r[2]],[d[0],d[1],d[2]]),ie=He([],[d[0],d[1],d[2]],[f[0],f[1],f[2]]),oe=He([],[f[0],f[1],f[2]],[r[0],r[1],r[2]]),de=Ie([],X,-f[3]);return pe(de,de,Ie([],ie,-r[3])),pe(de,de,Ie([],oe,-d[3])),Ie(de,de,1/y),de},c.bu=_f,c.bv=function(){return new Float64Array(4)},c.bw=function(f,r,d,y){var v=[],C=[];return v[0]=r[0]-d[0],v[1]=r[1]-d[1],v[2]=r[2]-d[2],C[0]=v[0]*Math.cos(y)-v[1]*Math.sin(y),C[1]=v[0]*Math.sin(y)+v[1]*Math.cos(y),C[2]=v[2],f[0]=C[0]+d[0],f[1]=C[1]+d[1],f[2]=C[2]+d[2],f},c.bx=function(f,r,d,y){var v=[],C=[];return v[0]=r[0]-d[0],v[1]=r[1]-d[1],v[2]=r[2]-d[2],C[0]=v[0],C[1]=v[1]*Math.cos(y)-v[2]*Math.sin(y),C[2]=v[1]*Math.sin(y)+v[2]*Math.cos(y),f[0]=C[0]+d[0],f[1]=C[1]+d[1],f[2]=C[2]+d[2],f},c.by=function(f,r,d,y){var v=[],C=[];return v[0]=r[0]-d[0],v[1]=r[1]-d[1],v[2]=r[2]-d[2],C[0]=v[2]*Math.sin(y)+v[0]*Math.cos(y),C[1]=v[1],C[2]=v[2]*Math.cos(y)-v[0]*Math.sin(y),f[0]=C[0]+d[0],f[1]=C[1]+d[1],f[2]=C[2]+d[2],f},c.bz=function(f,r,d){var y=Math.sin(d),v=Math.cos(d),C=r[0],M=r[1],R=r[2],I=r[3],V=r[8],H=r[9],X=r[10],ie=r[11];return r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f[0]=C*v-V*y,f[1]=M*v-H*y,f[2]=R*v-X*y,f[3]=I*v-ie*y,f[8]=C*y+V*v,f[9]=M*y+H*v,f[10]=R*y+X*v,f[11]=I*y+ie*v,f},c.c=ae,c.c0=class extends ef{},c.c1=og,c.c2=class extends s{},c.c3=Xy,c.c4=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},c.c5=$s,c.c6=function(f,r,d){var y=r[0],v=r[1],C=r[2],M=d[3]*y+d[7]*v+d[11]*C+d[15];return f[0]=(d[0]*y+d[4]*v+d[8]*C+d[12])/(M=M||1),f[1]=(d[1]*y+d[5]*v+d[9]*C+d[13])/M,f[2]=(d[2]*y+d[6]*v+d[10]*C+d[14])/M,f},c.c7=class extends io{},c.c8=class extends F{},c.c9=function(f,r){return f[0]===r[0]&&f[1]===r[1]&&f[2]===r[2]&&f[3]===r[3]&&f[4]===r[4]&&f[5]===r[5]&&f[6]===r[6]&&f[7]===r[7]&&f[8]===r[8]&&f[9]===r[9]&&f[10]===r[10]&&f[11]===r[11]&&f[12]===r[12]&&f[13]===r[13]&&f[14]===r[14]&&f[15]===r[15]},c.cA=function(f,r){ue.REGISTERED_PROTOCOLS[f]=r},c.cB=function(f){delete ue.REGISTERED_PROTOCOLS[f]},c.cC=function(f,r){const d={};for(let v=0;v<f.length;v++){const C=r&&r[f[v].id]||Od(f[v]);r&&(r[f[v].id]=C);let M=d[C];M||(M=d[C]=[]),M.push(f[v])}const y=[];for(const v in d)y.push(d[v]);return y},c.cD=xn,c.cE=G_,c.cF=wx,c.cG=ps,c.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=Nt/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const r=f.bucket.layers[0],d=r.layout,y=r._unevaluatedLayout._values,v={layoutIconSize:y["icon-size"].possiblyEvaluate(new Yi(f.bucket.zoom+1),f.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new Yi(f.bucket.zoom+1),f.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new Yi(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:H}=f.bucket.textSizeData;v.compositeTextSizes=[y["text-size"].possiblyEvaluate(new Yi(V),f.canonical),y["text-size"].possiblyEvaluate(new Yi(H),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:H}=f.bucket.iconSizeData;v.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new Yi(V),f.canonical),y["icon-size"].possiblyEvaluate(new Yi(H),f.canonical)]}const C=d.get("text-line-height")*cr,M=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",R=d.get("text-keep-upright"),I=d.get("text-size");for(const V of f.bucket.features){const H=d.get("text-font").evaluate(V,{},f.canonical).join(","),X=I.evaluate(V,{},f.canonical),ie=v.layoutTextSize.evaluate(V,{},f.canonical),oe=v.layoutIconSize.evaluate(V,{},f.canonical),de={horizontal:{},vertical:void 0},xe=V.text;let ve,Re=[0,0];if(xe){const Ze=xe.toString(),xt=d.get("text-letter-spacing").evaluate(V,{},f.canonical)*cr,Mt=El(Ze)?xt:0,Zt=d.get("text-anchor").evaluate(V,{},f.canonical),cn=Q_(r,V,f.canonical);if(!cn){const fn=d.get("text-radial-offset").evaluate(V,{},f.canonical);Re=fn?K_(Zt,[fn*cr,Cx]):d.get("text-offset").evaluate(V,{},f.canonical).map(pn=>pn*cr)}let an=M?"center":d.get("text-justify").evaluate(V,{},f.canonical);const dn=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(V,{},f.canonical)*cr:1/0,Nn=()=>{f.bucket.allowVerticalPlacement&&Hu(Ze)&&(de.vertical=fg(xe,f.glyphMap,f.glyphPositions,f.imagePositions,H,dn,C,Zt,"left",Mt,Re,c.ao.vertical,!0,ie,X))};if(!M&&cn){const fn=new Set;if(an==="auto")for(let $t=0;$t<cn.values.length;$t+=2)fn.add(Mg(cn.values[$t]));else fn.add(an);let pn=!1;for(const $t of fn)if(!de.horizontal[$t])if(pn)de.horizontal[$t]=de.horizontal[0];else{const Wn=fg(xe,f.glyphMap,f.glyphPositions,f.imagePositions,H,dn,C,"center",$t,Mt,Re,c.ao.horizontal,!1,ie,X);Wn&&(de.horizontal[$t]=Wn,pn=Wn.positionedLines.length===1)}Nn()}else{an==="auto"&&(an=Mg(Zt));const fn=fg(xe,f.glyphMap,f.glyphPositions,f.imagePositions,H,dn,C,Zt,an,Mt,Re,c.ao.horizontal,!1,ie,X);fn&&(de.horizontal[an]=fn),Nn(),Hu(Ze)&&M&&R&&(de.vertical=fg(xe,f.glyphMap,f.glyphPositions,f.imagePositions,H,dn,C,Zt,an,Mt,Re,c.ao.vertical,!1,ie,X))}}let at=!1;if(V.icon&&V.icon.name){const Ze=f.imageMap[V.icon.name];Ze&&(ve=mx(f.imagePositions[V.icon.name],d.get("icon-offset").evaluate(V,{},f.canonical),d.get("icon-anchor").evaluate(V,{},f.canonical)),at=!!Ze.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=at:f.bucket.sdfIcons!==at&&en("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==f.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const Be=Tx(de.horizontal)||de.vertical;f.bucket.iconsInText=!!Be&&Be.iconsInText,(Be||ve)&&Cf(f.bucket,V,de,ve,f.imageMap,v,ie,oe,Re,at,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},c.cI=ig,c.cJ=Kc,c.cK=Dp,c.cL=sg,c.cM=zp,c.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},c.cO=function(f,r,d,y,v){return a(this,void 0,void 0,function*(){if(q())try{return yield We(f,r,d,y,v)}catch(C){}return function(C,M,R,I,V){const H=C.width,X=C.height;Pe&&Bt||(Pe=new OffscreenCanvas(H,X),Bt=Pe.getContext("2d",{willReadFrequently:!0})),Pe.width=H,Pe.height=X,Bt.drawImage(C,0,0,H,X);const ie=Bt.getImageData(M,R,I,V);return Bt.clearRect(0,0,H,X),ie.data}(f,r,d,y,v)})},c.cP=Rl,c.cQ=_,c.cR=Yc,c.cS=Ci,c.cT=Ic,c.cU=function(f,r){const d=new Map;if(f!=null)if(f.type==="Feature")d.set(Sf(f,r),f);else for(const y of f.features)d.set(Sf(y,r),y);return d},c.cV=function(f,r){if(f==null)return!0;if(f.type==="Feature")return Sf(f,r)!=null;if(f.type==="FeatureCollection"){const d=new Set;for(const y of f.features){const v=Sf(y,r);if(v==null||d.has(v))return!1;d.add(v)}return!0}return!1},c.cW=function(f,r,d){var y,v,C,M;if(r.removeAll&&f.clear(),r.remove)for(const R of r.remove)f.delete(R);if(r.add)for(const R of r.add){const I=Sf(R,d);I!=null&&f.set(I,R)}if(r.update)for(const R of r.update){let I=f.get(R.id);if(I==null)continue;const V=!R.removeAllProperties&&(((y=R.removeProperties)===null||y===void 0?void 0:y.length)>0||((v=R.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0);if((R.newGeometry||R.removeAllProperties||V)&&(I=Object.assign({},I),f.set(R.id,I),V&&(I.properties=Object.assign({},I.properties))),R.newGeometry&&(I.geometry=R.newGeometry),R.removeAllProperties)I.properties={};else if(((C=R.removeProperties)===null||C===void 0?void 0:C.length)>0)for(const H of R.removeProperties)Object.prototype.hasOwnProperty.call(I.properties,H)&&delete I.properties[H];if(((M=R.addOrUpdateProperties)===null||M===void 0?void 0:M.length)>0)for(const{key:H,value:X}of R.addOrUpdateProperties)I.properties[H]=X}},c.cX=Ml,c.ca=function(f,r){var d=f[0],y=f[1],v=f[2],C=f[3],M=f[4],R=f[5],I=f[6],V=f[7],H=f[8],X=f[9],ie=f[10],oe=f[11],de=f[12],xe=f[13],ve=f[14],Re=f[15],at=r[0],Be=r[1],Ze=r[2],xt=r[3],Mt=r[4],Zt=r[5],cn=r[6],an=r[7],dn=r[8],Nn=r[9],fn=r[10],pn=r[11],$t=r[12],Wn=r[13],Qn=r[14],Rn=r[15];return Math.abs(d-at)<=W*Math.max(1,Math.abs(d),Math.abs(at))&&Math.abs(y-Be)<=W*Math.max(1,Math.abs(y),Math.abs(Be))&&Math.abs(v-Ze)<=W*Math.max(1,Math.abs(v),Math.abs(Ze))&&Math.abs(C-xt)<=W*Math.max(1,Math.abs(C),Math.abs(xt))&&Math.abs(M-Mt)<=W*Math.max(1,Math.abs(M),Math.abs(Mt))&&Math.abs(R-Zt)<=W*Math.max(1,Math.abs(R),Math.abs(Zt))&&Math.abs(I-cn)<=W*Math.max(1,Math.abs(I),Math.abs(cn))&&Math.abs(V-an)<=W*Math.max(1,Math.abs(V),Math.abs(an))&&Math.abs(H-dn)<=W*Math.max(1,Math.abs(H),Math.abs(dn))&&Math.abs(X-Nn)<=W*Math.max(1,Math.abs(X),Math.abs(Nn))&&Math.abs(ie-fn)<=W*Math.max(1,Math.abs(ie),Math.abs(fn))&&Math.abs(oe-pn)<=W*Math.max(1,Math.abs(oe),Math.abs(pn))&&Math.abs(de-$t)<=W*Math.max(1,Math.abs(de),Math.abs($t))&&Math.abs(xe-Wn)<=W*Math.max(1,Math.abs(xe),Math.abs(Wn))&&Math.abs(ve-Qn)<=W*Math.max(1,Math.abs(ve),Math.abs(Qn))&&Math.abs(Re-Rn)<=W*Math.max(1,Math.abs(Re),Math.abs(Rn))},c.cb=function(f,r){return f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15],f},c.cc=f=>f.type==="symbol",c.cd=f=>f.type==="circle",c.ce=f=>f.type==="heatmap",c.cf=f=>f.type==="line",c.cg=f=>f.type==="fill",c.ch=f=>f.type==="fill-extrusion",c.ci=f=>f.type==="hillshade",c.cj=f=>f.type==="color-relief",c.ck=f=>f.type==="background",c.cl=f=>f.type==="custom",c.cm=ot,c.cn=function(f,r,d){const y=et(r.x-d.x,r.y-d.y),v=et(f.x-d.x,f.y-d.y);var C,M;return yn(Math.atan2(y[0]*v[1]-y[1]*v[0],(C=y)[0]*(M=v)[0]+C[1]*M[1]))},c.co=ut,c.cp=function(f,r){return At[r]&&(f instanceof MouseEvent||f instanceof WheelEvent)},c.cq=function(f,r){return ln[r]&&"touches"in f},c.cr=function(f){return ln[f]||At[f]},c.cs=function(f,r,d){var y=r[0],v=r[1];return f[0]=d[0]*y+d[4]*v+d[12],f[1]=d[1]*y+d[5]*v+d[13],f},c.ct=function(f,r){const{x:d,y}=vf.fromLngLat(r);return!(f<0||f>25||y<0||y>=1||d<0||d>=1)},c.cu=function(f,r){return f[0]=r[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=r[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=r[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},c.cv=class extends Jl{},c.cw=_w,c.cy=function(f){return f.message===ke},c.cz=Ae,c.d=Je,c.e=Ve,c.f=f=>a(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(r)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=_e,c.h=f=>new Promise((r,d)=>{const y=new Image;y.onload=()=>{r(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame(()=>{y.src=Ue})},y.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(f)],{type:"image/png"});y.src=f.byteLength?URL.createObjectURL(v):Ue}),c.i=Yn,c.j=(f,r)=>nt(Ve(f,{type:"json"}),r),c.k=bn,c.l=Ft,c.m=nt,c.n=(f,r)=>nt(Ve(f,{type:"arrayBuffer"}),r),c.o=function(f){return new zp(f).readFields(z_,[])},c.p=fx,c.q=Qu,c.r=jr,c.s=Et,c.t=Xi,c.u=pi,c.v=ct,c.w=en,c.x=yp,c.y=xp,c.z=ba}),o("worker",["./shared"],function(c){class a{constructor(ae,ue){this.keyCache={},ae&&this.replace(ae,ue)}replace(ae,ue){this._layerConfigs={},this._layers={},this.update(ae,[],ue)}update(ae,ue,_e){for(const Ae of ae){this._layerConfigs[Ae.id]=Ae;const J=this._layers[Ae.id]=c.bJ(Ae,_e);J._featureFilter=c.aa(J.filter,_e),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(const Ae of ue)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const Ce=c.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ae of Ce){const J=Ae.map(bn=>this._layers[bn.id]),nt=J[0];if(nt.visibility==="none")continue;const Je=nt.source||"";let jt=this.familiesBySource[Je];jt||(jt=this.familiesBySource[Je]={});const qt=nt.sourceLayer||"_geojsonTileLayer";let Ft=jt[qt];Ft||(Ft=jt[qt]=[]),Ft.push(J)}}}class g{constructor(ae){const ue={},_e=[];for(const nt in ae){const Je=ae[nt],jt=ue[nt]={};for(const qt in Je){const Ft=Je[+qt];if(!Ft||Ft.bitmap.width===0||Ft.bitmap.height===0)continue;const bn={x:0,y:0,w:Ft.bitmap.width+2,h:Ft.bitmap.height+2};_e.push(bn),jt[qt]={rect:bn,metrics:Ft.metrics}}}const{w:Ce,h:Ae}=c.p(_e),J=new c.q({width:Ce||1,height:Ae||1});for(const nt in ae){const Je=ae[nt];for(const jt in Je){const qt=Je[+jt];if(!qt||qt.bitmap.width===0||qt.bitmap.height===0)continue;const Ft=ue[nt][jt].rect;c.q.copy(qt.bitmap,J,{x:0,y:0},{x:Ft.x+1,y:Ft.y+1},qt.bitmap)}}this.image=J,this.positions=ue}}c.cD("GlyphAtlas",g);class _{constructor(ae){this.tileID=new c.Z(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,ue,_e,Ce,Ae){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new c.a8;const J=new c.cE(Object.keys(ae.layers).sort()),nt=new c.cF(this.tileID,this.promoteId);nt.bucketLayerIDs=[];const Je={},jt={featureIndex:nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:_e,subdivisionGranularity:Ae},qt=ue.familiesBySource[this.source];for(const Xt in qt){const lt=ae.layers[Xt];if(!lt)continue;lt.version===1&&c.w(`Vector tile source "${this.source}" layer "${Xt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ri=J.encode(Xt),li=[];for(let Wi=0;Wi<lt.length;Wi++){const ds=lt.feature(Wi),tn=nt.getId(ds,Xt);li.push({feature:ds,id:tn,index:Wi,sourceLayerIndex:Ri})}for(const Wi of qt[Xt]){const ds=Wi[0];ds.source!==this.source&&c.w(`layer.source = ${ds.source} does not equal this.source = ${this.source}`),ds.minzoom&&this.zoom<Math.floor(ds.minzoom)||ds.maxzoom&&this.zoom>=ds.maxzoom||ds.visibility!=="none"&&(S(Wi,this.zoom,_e),(Je[ds.id]=ds.createBucket({index:nt.bucketLayerIDs.length,layers:Wi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ri,sourceID:this.source})).populate(li,jt,this.tileID.canonical),nt.bucketLayerIDs.push(Wi.map(tn=>tn.id)))}}const Ft=c.bO(jt.glyphDependencies,Xt=>Object.keys(Xt).map(Number));this.inFlightDependencies.forEach(Xt=>Xt==null?void 0:Xt.abort()),this.inFlightDependencies=[];let bn=Promise.resolve({});if(Object.keys(Ft).length){const Xt=new AbortController;this.inFlightDependencies.push(Xt),bn=Ce.sendAsync({type:"GG",data:{stacks:Ft,source:this.source,tileID:this.tileID,type:"glyphs"}},Xt)}const Tn=Object.keys(jt.iconDependencies);let ct=Promise.resolve({});if(Tn.length){const Xt=new AbortController;this.inFlightDependencies.push(Xt),ct=Ce.sendAsync({type:"GI",data:{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"}},Xt)}const wt=Object.keys(jt.patternDependencies);let Wt=Promise.resolve({});if(wt.length){const Xt=new AbortController;this.inFlightDependencies.push(Xt),Wt=Ce.sendAsync({type:"GI",data:{icons:wt,source:this.source,tileID:this.tileID,type:"patterns"}},Xt)}const Ut=jt.dashDependencies;let vn=Promise.resolve({});if(Object.keys(Ut).length){const Xt=new AbortController;this.inFlightDependencies.push(Xt),vn=Ce.sendAsync({type:"GDA",data:{dashes:Ut}},Xt)}const[Gi,Jn,ai,qn]=yield Promise.all([bn,ct,Wt,vn]),Bn=new g(Gi),yi=new c.cG(Jn,ai);for(const Xt in Je){const lt=Je[Xt];lt instanceof c.a9?(S(lt.layers,this.zoom,_e),c.cH({bucket:lt,glyphMap:Gi,glyphPositions:Bn.positions,imageMap:Jn,imagePositions:yi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:jt.subdivisionGranularity})):lt.hasDependencies&&(lt instanceof c.cI||lt instanceof c.cJ||lt instanceof c.cK)&&(S(lt.layers,this.zoom,_e),lt.addFeatures(jt,this.tileID.canonical,yi.patternPositions,qn))}return this.status="done",{buckets:Object.values(Je).filter(Xt=>!Xt.isEmpty()),featureIndex:nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Bn.image,imageAtlas:yi,dashPositions:qn,glyphMap:this.returnDependencies?Gi:null,iconMap:this.returnDependencies?Jn:null,glyphPositions:this.returnDependencies?Bn.positions:null}})}}function S(ke,ae,ue){const _e=new c.F(ae);for(const Ce of ke)Ce.recalculate(_e,ue)}class E{constructor(ae,ue,_e){this.actor=ae,this.layerIndex=ue,this.availableImages=_e,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,ue){return c._(this,void 0,void 0,function*(){const _e=yield c.n(ae.request,ue);try{return{vectorTile:new c.cL(new c.cM(_e.data)),rawData:_e.data,cacheControl:_e.cacheControl,expires:_e.expires}}catch(Ce){const Ae=new Uint8Array(_e.data);let J=`Unable to parse the tile at ${ae.request.url}, `;throw J+=Ae[0]===31&&Ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ce.message}`,new Error(J)}})}loadTile(ae){return c._(this,void 0,void 0,function*(){const ue=ae.uid,_e=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new c.cN(ae.request),Ce=new _(ae);this.loading[ue]=Ce;const Ae=new AbortController;Ce.abort=Ae;try{const J=yield this.loadVectorTile(ae,Ae);if(delete this.loading[ue],!J)return null;const nt=J.rawData,Je={};J.expires&&(Je.expires=J.expires),J.cacheControl&&(Je.cacheControl=J.cacheControl);const jt={};if(_e){const Ft=_e.finish();Ft&&(jt.resourceTiming=JSON.parse(JSON.stringify(Ft)))}Ce.vectorTile=J.vectorTile;const qt=Ce.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[ue]=Ce,this.fetching[ue]={rawTileData:nt,cacheControl:Je,resourceTiming:jt};try{const Ft=yield qt;return c.e({rawTileData:nt.slice(0)},Ft,Je,jt)}finally{delete this.fetching[ue]}}catch(J){throw delete this.loading[ue],Ce.status="done",this.loaded[ue]=Ce,J}})}reloadTile(ae){return c._(this,void 0,void 0,function*(){const ue=ae.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const _e=this.loaded[ue];if(_e.showCollisionBoxes=ae.showCollisionBoxes,_e.status==="parsing"){const Ce=yield _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let Ae;if(this.fetching[ue]){const{rawTileData:J,cacheControl:nt,resourceTiming:Je}=this.fetching[ue];delete this.fetching[ue],Ae=c.e({rawTileData:J.slice(0)},Ce,nt,Je)}else Ae=Ce;return Ae}if(_e.status==="done"&&_e.vectorTile)return _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return c._(this,void 0,void 0,function*(){const ue=this.loading,_e=ae.uid;ue&&ue[_e]&&ue[_e].abort&&(ue[_e].abort.abort(),delete ue[_e])})}removeTile(ae){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class A{constructor(){this.loaded={}}loadTile(ae){return c._(this,void 0,void 0,function*(){const{uid:ue,encoding:_e,rawImageData:Ce,redFactor:Ae,greenFactor:J,blueFactor:nt,baseShift:Je}=ae,jt=Ce.width+2,qt=Ce.height+2,Ft=c.b(Ce)?new c.R({width:jt,height:qt},yield c.cO(Ce,-1,-1,jt,qt)):Ce,bn=new c.cP(ue,Ft,_e,Ae,J,nt,Je);return this.loaded=this.loaded||{},this.loaded[ue]=bn,bn})}removeTile(ae){const ue=this.loaded,_e=ae.uid;ue&&ue[_e]&&delete ue[_e]}}var N,z,B=function(){if(z)return N;function ke(ue,_e){if(ue.length!==0){ae(ue[0],_e);for(var Ce=1;Ce<ue.length;Ce++)ae(ue[Ce],!_e)}}function ae(ue,_e){for(var Ce=0,Ae=0,J=0,nt=ue.length,Je=nt-1;J<nt;Je=J++){var jt=(ue[J][0]-ue[Je][0])*(ue[Je][1]+ue[J][1]),qt=Ce+jt;Ae+=Math.abs(Ce)>=Math.abs(jt)?Ce-qt+jt:jt-qt+Ce,Ce=qt}Ce+Ae>=0!=!!_e&&ue.reverse()}return z=1,N=function ue(_e,Ce){var Ae,J=_e&&_e.type;if(J==="FeatureCollection")for(Ae=0;Ae<_e.features.length;Ae++)ue(_e.features[Ae],Ce);else if(J==="GeometryCollection")for(Ae=0;Ae<_e.geometries.length;Ae++)ue(_e.geometries[Ae],Ce);else if(J==="Feature")ue(_e.geometry,Ce);else if(J==="Polygon")ke(_e.coordinates,Ce);else if(J==="MultiPolygon")for(Ae=0;Ae<_e.coordinates.length;Ae++)ke(_e.coordinates[Ae],Ce);return _e}}(),$=c.cQ(B);class q extends c.cS{constructor(ae,ue){super(new c.cM,0,ue,[],[]),this.feature=ae,this.type=ae.type,this.properties=ae.tags?ae.tags:{},"id"in ae&&(typeof ae.id=="string"?this.id=parseInt(ae.id,10):typeof ae.id!="number"||isNaN(ae.id)||(this.id=ae.id))}loadGeometry(){const ae=[],ue=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const _e of ue){const Ce=[];for(const Ae of _e)Ce.push(new c.P(Ae[0],Ae[1]));ae.push(Ce)}return ae}}class W extends c.cR{constructor(ae,ue){super(new c.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ue?ue.version:1,this.extent=ue?ue.extent:4096,this.length=ae.length,this.features=ae}feature(ae){return new q(this.features[ae],this.extent)}}function Q(ke,ae){ae.writeVarintField(15,ke.version||1),ae.writeStringField(1,ke.name||""),ae.writeVarintField(5,ke.extent||4096);const ue={keys:[],values:[],keycache:{},valuecache:{}};for(let Ae=0;Ae<ke.length;Ae++)ue.feature=ke.feature(Ae),ae.writeMessage(2,Z,ue);const _e=ue.keys;for(const Ae of _e)ae.writeStringField(3,Ae);const Ce=ue.values;for(const Ae of Ce)ae.writeMessage(4,pe,Ae)}function Z(ke,ae){if(!ke.feature)return;const ue=ke.feature;ue.id!==void 0&&ae.writeVarintField(1,ue.id),ae.writeMessage(2,K,ke),ae.writeVarintField(3,ue.type),ae.writeMessage(4,he,ue)}function K(ke,ae){var ue;for(const _e in(ue=ke.feature)==null?void 0:ue.properties){let Ce=ke.feature.properties[_e],Ae=ke.keycache[_e];if(Ce===null)continue;Ae===void 0&&(ke.keys.push(_e),Ae=ke.keys.length-1,ke.keycache[_e]=Ae),ae.writeVarint(Ae),typeof Ce!="string"&&typeof Ce!="boolean"&&typeof Ce!="number"&&(Ce=JSON.stringify(Ce));const J=typeof Ce+":"+Ce;let nt=ke.valuecache[J];nt===void 0&&(ke.values.push(Ce),nt=ke.values.length-1,ke.valuecache[J]=nt),ae.writeVarint(nt)}}function le(ke,ae){return(ae<<3)+(7&ke)}function ge(ke){return ke<<1^ke>>31}function he(ke,ae){const ue=ke.loadGeometry(),_e=ke.type;let Ce=0,Ae=0;for(const J of ue){let nt=1;_e===1&&(nt=J.length),ae.writeVarint(le(1,nt));const Je=_e===3?J.length-1:J.length;for(let jt=0;jt<Je;jt++){jt===1&&_e!==1&&ae.writeVarint(le(2,Je-1));const qt=J[jt].x-Ce,Ft=J[jt].y-Ae;ae.writeVarint(ge(qt)),ae.writeVarint(ge(Ft)),Ce+=qt,Ae+=Ft}ke.type===3&&ae.writeVarint(le(7,1))}}function pe(ke,ae){const ue=typeof ke;ue==="string"?ae.writeStringField(1,ke):ue==="boolean"?ae.writeBooleanField(7,ke):ue==="number"&&(ke%1!=0?ae.writeDoubleField(3,ke):ke<0?ae.writeSVarintField(6,ke):ae.writeVarintField(5,ke))}const Ie={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},He=Math.fround||(Ye=new Float32Array(1),ke=>(Ye[0]=+ke,Ye[0]));var Ye;class rt{constructor(ae){this.options=Object.assign(Object.create(Ie),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:ue,minZoom:_e,maxZoom:Ce}=this.options;ue&&console.time("total time");const Ae=`prepare ${ae.length} points`;ue&&console.time(Ae),this.points=ae;const J=[];for(let Je=0;Je<ae.length;Je++){const jt=ae[Je];if(!jt.geometry)continue;const[qt,Ft]=jt.geometry.coordinates,bn=He(De(qt)),Tn=He(Qe(Ft));J.push(bn,Tn,1/0,Je,-1,1),this.options.reduce&&J.push(0)}let nt=this.trees[Ce+1]=this._createTree(J);ue&&console.timeEnd(Ae);for(let Je=Ce;Je>=_e;Je--){const jt=+Date.now();nt=this.trees[Je]=this._createTree(this._cluster(nt,Je)),ue&&console.log("z%d: %d clusters in %dms",Je,nt.numItems,+Date.now()-jt)}return ue&&console.timeEnd("total time"),this}getClusters(ae,ue){let _e=((ae[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,ae[1]));let Ae=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const J=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)_e=-180,Ae=180;else if(_e>Ae){const Ft=this.getClusters([_e,Ce,180,J],ue),bn=this.getClusters([-180,Ce,Ae,J],ue);return Ft.concat(bn)}const nt=this.trees[this._limitZoom(ue)],Je=nt.range(De(_e),Qe(J),De(Ae),Qe(Ce)),jt=nt.data,qt=[];for(const Ft of Je){const bn=this.stride*Ft;qt.push(jt[bn+5]>1?Rt(jt,bn,this.clusterProps):this.points[jt[bn+3]])}return qt}getChildren(ae){const ue=this._getOriginId(ae),_e=this._getOriginZoom(ae),Ce="No cluster with the specified id.",Ae=this.trees[_e];if(!Ae)throw new Error(Ce);const J=Ae.data;if(ue*this.stride>=J.length)throw new Error(Ce);const nt=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),Je=Ae.within(J[ue*this.stride],J[ue*this.stride+1],nt),jt=[];for(const qt of Je){const Ft=qt*this.stride;J[Ft+4]===ae&&jt.push(J[Ft+5]>1?Rt(J,Ft,this.clusterProps):this.points[J[Ft+3]])}if(jt.length===0)throw new Error(Ce);return jt}getLeaves(ae,ue,_e){const Ce=[];return this._appendLeaves(Ce,ae,ue=ue||10,_e=_e||0,0),Ce}getTile(ae,ue,_e){const Ce=this.trees[this._limitZoom(ae)],Ae=Math.pow(2,ae),{extent:J,radius:nt}=this.options,Je=nt/J,jt=(_e-Je)/Ae,qt=(_e+1+Je)/Ae,Ft={features:[]};return this._addTileFeatures(Ce.range((ue-Je)/Ae,jt,(ue+1+Je)/Ae,qt),Ce.data,ue,_e,Ae,Ft),ue===0&&this._addTileFeatures(Ce.range(1-Je/Ae,jt,1,qt),Ce.data,Ae,_e,Ae,Ft),ue===Ae-1&&this._addTileFeatures(Ce.range(0,jt,Je/Ae,qt),Ce.data,-1,_e,Ae,Ft),Ft.features.length?Ft:null}getClusterExpansionZoom(ae){let ue=this._getOriginZoom(ae)-1;for(;ue<=this.options.maxZoom;){const _e=this.getChildren(ae);if(ue++,_e.length!==1)break;ae=_e[0].properties.cluster_id}return ue}_appendLeaves(ae,ue,_e,Ce,Ae){const J=this.getChildren(ue);for(const nt of J){const Je=nt.properties;if(Je&&Je.cluster?Ae+Je.point_count<=Ce?Ae+=Je.point_count:Ae=this._appendLeaves(ae,Je.cluster_id,_e,Ce,Ae):Ae<Ce?Ae++:ae.push(nt),ae.length===_e)break}return Ae}_createTree(ae){const ue=new c.aI(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<ae.length;_e+=this.stride)ue.add(ae[_e],ae[_e+1]);return ue.finish(),ue.data=ae,ue}_addTileFeatures(ae,ue,_e,Ce,Ae,J){for(const nt of ae){const Je=nt*this.stride,jt=ue[Je+5]>1;let qt,Ft,bn;if(jt)qt=St(ue,Je,this.clusterProps),Ft=ue[Je],bn=ue[Je+1];else{const wt=this.points[ue[Je+3]];qt=wt.properties;const[Wt,Ut]=wt.geometry.coordinates;Ft=De(Wt),bn=Qe(Ut)}const Tn={type:1,geometry:[[Math.round(this.options.extent*(Ft*Ae-_e)),Math.round(this.options.extent*(bn*Ae-Ce))]],tags:qt};let ct;ct=jt||this.options.generateId?ue[Je+3]:this.points[ue[Je+3]].id,ct!==void 0&&(Tn.id=ct),J.features.push(Tn)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,ue){const{radius:_e,extent:Ce,reduce:Ae,minPoints:J}=this.options,nt=_e/(Ce*Math.pow(2,ue)),Je=ae.data,jt=[],qt=this.stride;for(let Ft=0;Ft<Je.length;Ft+=qt){if(Je[Ft+2]<=ue)continue;Je[Ft+2]=ue;const bn=Je[Ft],Tn=Je[Ft+1],ct=ae.within(Je[Ft],Je[Ft+1],nt),wt=Je[Ft+5];let Wt=wt;for(const Ut of ct){const vn=Ut*qt;Je[vn+2]>ue&&(Wt+=Je[vn+5])}if(Wt>wt&&Wt>=J){let Ut,vn=bn*wt,Gi=Tn*wt,Jn=-1;const ai=(Ft/qt<<5)+(ue+1)+this.points.length;for(const qn of ct){const Bn=qn*qt;if(Je[Bn+2]<=ue)continue;Je[Bn+2]=ue;const yi=Je[Bn+5];vn+=Je[Bn]*yi,Gi+=Je[Bn+1]*yi,Je[Bn+4]=ai,Ae&&(Ut||(Ut=this._map(Je,Ft,!0),Jn=this.clusterProps.length,this.clusterProps.push(Ut)),Ae(Ut,this._map(Je,Bn)))}Je[Ft+4]=ai,jt.push(vn/Wt,Gi/Wt,1/0,ai,-1,Wt),Ae&&jt.push(Jn)}else{for(let Ut=0;Ut<qt;Ut++)jt.push(Je[Ft+Ut]);if(Wt>1)for(const Ut of ct){const vn=Ut*qt;if(!(Je[vn+2]<=ue)){Je[vn+2]=ue;for(let Gi=0;Gi<qt;Gi++)jt.push(Je[vn+Gi])}}}}return jt}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,ue,_e){if(ae[ue+5]>1){const J=this.clusterProps[ae[ue+6]];return _e?Object.assign({},J):J}const Ce=this.points[ae[ue+3]].properties,Ae=this.options.map(Ce);return _e&&Ae===Ce?Object.assign({},Ae):Ae}}function Rt(ke,ae,ue){return{type:"Feature",id:ke[ae+3],properties:St(ke,ae,ue),geometry:{type:"Point",coordinates:[(_e=ke[ae],360*(_e-.5)),et(ke[ae+1])]}};var _e}function St(ke,ae,ue){const _e=ke[ae+5],Ce=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,Ae=ke[ae+6],J=Ae===-1?{}:Object.assign({},ue[Ae]);return Object.assign(J,{cluster:!0,cluster_id:ke[ae+3],point_count:_e,point_count_abbreviated:Ce})}function De(ke){return ke/360+.5}function Qe(ke){const ae=Math.sin(ke*Math.PI/180),ue=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ue<0?0:ue>1?1:ue}function et(ke){const ae=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function Nt(ke,ae,ue,_e){let Ce=_e;const Ae=ae+(ue-ae>>1);let J,nt=ue-ae;const Je=ke[ae],jt=ke[ae+1],qt=ke[ue],Ft=ke[ue+1];for(let bn=ae+3;bn<ue;bn+=3){const Tn=fe(ke[bn],ke[bn+1],Je,jt,qt,Ft);if(Tn>Ce)J=bn,Ce=Tn;else if(Tn===Ce){const ct=Math.abs(bn-Ae);ct<nt&&(J=bn,nt=ct)}}Ce>_e&&(J-ae>3&&Nt(ke,ae,J,_e),ke[J+2]=Ce,ue-J>3&&Nt(ke,J,ue,_e))}function fe(ke,ae,ue,_e,Ce,Ae){let J=Ce-ue,nt=Ae-_e;if(J!==0||nt!==0){const Je=((ke-ue)*J+(ae-_e)*nt)/(J*J+nt*nt);Je>1?(ue=Ce,_e=Ae):Je>0&&(ue+=J*Je,_e+=nt*Je)}return J=ke-ue,nt=ae-_e,J*J+nt*nt}function Xe(ke,ae,ue,_e){const Ce={id:ke==null?null:ke,type:ae,geometry:ue,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")tt(Ce,ue);else if(ae==="Polygon")tt(Ce,ue[0]);else if(ae==="MultiLineString")for(const Ae of ue)tt(Ce,Ae);else if(ae==="MultiPolygon")for(const Ae of ue)tt(Ce,Ae[0]);return Ce}function tt(ke,ae){for(let ue=0;ue<ae.length;ue+=3)ke.minX=Math.min(ke.minX,ae[ue]),ke.minY=Math.min(ke.minY,ae[ue+1]),ke.maxX=Math.max(ke.maxX,ae[ue]),ke.maxY=Math.max(ke.maxY,ae[ue+1])}function Me(ke,ae,ue,_e){if(!ae.geometry)return;const Ce=ae.geometry.coordinates;if(Ce&&Ce.length===0)return;const Ae=ae.geometry.type,J=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2);let nt=[],Je=ae.id;if(ue.promoteId?Je=ae.properties[ue.promoteId]:ue.generateId&&(Je=_e||0),Ae==="Point")ot(Ce,nt);else if(Ae==="MultiPoint")for(const jt of Ce)ot(jt,nt);else if(Ae==="LineString")ut(Ce,nt,J,!1);else if(Ae==="MultiLineString"){if(ue.lineMetrics){for(const jt of Ce)nt=[],ut(jt,nt,J,!1),ke.push(Xe(Je,"LineString",nt,ae.properties));return}dt(Ce,nt,J,!1)}else if(Ae==="Polygon")dt(Ce,nt,J,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(const jt of ae.geometry.geometries)Me(ke,{id:Je,geometry:jt,properties:ae.properties},ue,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const jt of Ce){const qt=[];dt(jt,qt,J,!0),nt.push(qt)}}ke.push(Xe(Je,Ae,nt,ae.properties))}function ot(ke,ae){ae.push(pt(ke[0]),Ve(ke[1]),0)}function ut(ke,ae,ue,_e){let Ce,Ae,J=0;for(let Je=0;Je<ke.length;Je++){const jt=pt(ke[Je][0]),qt=Ve(ke[Je][1]);ae.push(jt,qt,0),Je>0&&(J+=_e?(Ce*qt-jt*Ae)/2:Math.sqrt(Math.pow(jt-Ce,2)+Math.pow(qt-Ae,2))),Ce=jt,Ae=qt}const nt=ae.length-3;ae[2]=1,Nt(ae,0,nt,ue),ae[nt+2]=1,ae.size=Math.abs(J),ae.start=0,ae.end=ae.size}function dt(ke,ae,ue,_e){for(let Ce=0;Ce<ke.length;Ce++){const Ae=[];ut(ke[Ce],Ae,ue,_e),ae.push(Ae)}}function pt(ke){return ke/360+.5}function Ve(ke){const ae=Math.sin(ke*Math.PI/180),ue=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ue<0?0:ue>1?1:ue}function Ge(ke,ae,ue,_e,Ce,Ae,J,nt){if(_e/=ae,Ae>=(ue/=ae)&&J<_e)return ke;if(J<ue||Ae>=_e)return null;const Je=[];for(const jt of ke){const qt=jt.geometry;let Ft=jt.type;const bn=Ce===0?jt.minX:jt.minY,Tn=Ce===0?jt.maxX:jt.maxY;if(bn>=ue&&Tn<_e){Je.push(jt);continue}if(Tn<ue||bn>=_e)continue;let ct=[];if(Ft==="Point"||Ft==="MultiPoint")Dt(qt,ct,ue,_e,Ce);else if(Ft==="LineString")Lt(qt,ct,ue,_e,Ce,!1,nt.lineMetrics);else if(Ft==="MultiLineString")Ot(qt,ct,ue,_e,Ce,!1);else if(Ft==="Polygon")Ot(qt,ct,ue,_e,Ce,!0);else if(Ft==="MultiPolygon")for(const wt of qt){const Wt=[];Ot(wt,Wt,ue,_e,Ce,!0),Wt.length&&ct.push(Wt)}if(ct.length){if(nt.lineMetrics&&Ft==="LineString"){for(const wt of ct)Je.push(Xe(jt.id,Ft,wt,jt.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(ct.length===1?(Ft="LineString",ct=ct[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=ct.length===3?"Point":"MultiPoint"),Je.push(Xe(jt.id,Ft,ct,jt.tags))}}return Je.length?Je:null}function Dt(ke,ae,ue,_e,Ce){for(let Ae=0;Ae<ke.length;Ae+=3){const J=ke[Ae+Ce];J>=ue&&J<=_e&&en(ae,ke[Ae],ke[Ae+1],ke[Ae+2])}}function Lt(ke,ae,ue,_e,Ce,Ae,J){let nt=It(ke);const Je=Ce===0?_n:Yn;let jt,qt,Ft=ke.start;for(let Wt=0;Wt<ke.length-3;Wt+=3){const Ut=ke[Wt],vn=ke[Wt+1],Gi=ke[Wt+2],Jn=ke[Wt+3],ai=ke[Wt+4],qn=Ce===0?Ut:vn,Bn=Ce===0?Jn:ai;let yi=!1;J&&(jt=Math.sqrt(Math.pow(Ut-Jn,2)+Math.pow(vn-ai,2))),qn<ue?Bn>ue&&(qt=Je(nt,Ut,vn,Jn,ai,ue),J&&(nt.start=Ft+jt*qt)):qn>_e?Bn<_e&&(qt=Je(nt,Ut,vn,Jn,ai,_e),J&&(nt.start=Ft+jt*qt)):en(nt,Ut,vn,Gi),Bn<ue&&qn>=ue&&(qt=Je(nt,Ut,vn,Jn,ai,ue),yi=!0),Bn>_e&&qn<=_e&&(qt=Je(nt,Ut,vn,Jn,ai,_e),yi=!0),!Ae&&yi&&(J&&(nt.end=Ft+jt*qt),ae.push(nt),nt=It(ke)),J&&(Ft+=jt)}let bn=ke.length-3;const Tn=ke[bn],ct=ke[bn+1],wt=Ce===0?Tn:ct;wt>=ue&&wt<=_e&&en(nt,Tn,ct,ke[bn+2]),bn=nt.length-3,Ae&&bn>=3&&(nt[bn]!==nt[0]||nt[bn+1]!==nt[1])&&en(nt,nt[0],nt[1],nt[2]),nt.length&&ae.push(nt)}function It(ke){const ae=[];return ae.size=ke.size,ae.start=ke.start,ae.end=ke.end,ae}function Ot(ke,ae,ue,_e,Ce,Ae){for(const J of ke)Lt(J,ae,ue,_e,Ce,Ae,!1)}function en(ke,ae,ue,_e){ke.push(ae,ue,_e)}function _n(ke,ae,ue,_e,Ce,Ae){const J=(Ae-ae)/(_e-ae);return en(ke,Ae,ue+(Ce-ue)*J,1),J}function Yn(ke,ae,ue,_e,Ce,Ae){const J=(Ae-ue)/(Ce-ue);return en(ke,ae+(_e-ae)*J,Ae,1),J}function Hn(ke,ae){const ue=[];for(let _e=0;_e<ke.length;_e++){const Ce=ke[_e],Ae=Ce.type;let J;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")J=hn(Ce.geometry,ae);else if(Ae==="MultiLineString"||Ae==="Polygon"){J=[];for(const nt of Ce.geometry)J.push(hn(nt,ae))}else if(Ae==="MultiPolygon"){J=[];for(const nt of Ce.geometry){const Je=[];for(const jt of nt)Je.push(hn(jt,ae));J.push(Je)}}ue.push(Xe(Ce.id,Ae,J,Ce.tags))}return ue}function hn(ke,ae){const ue=[];ue.size=ke.size,ke.start!==void 0&&(ue.start=ke.start,ue.end=ke.end);for(let _e=0;_e<ke.length;_e+=3)ue.push(ke[_e]+ae,ke[_e+1],ke[_e+2]);return ue}function on(ke,ae){if(ke.transformed)return ke;const ue=1<<ke.z,_e=ke.x,Ce=ke.y;for(const Ae of ke.features){const J=Ae.geometry,nt=Ae.type;if(Ae.geometry=[],nt===1)for(let Je=0;Je<J.length;Je+=2)Ae.geometry.push(Ue(J[Je],J[Je+1],ae,ue,_e,Ce));else for(let Je=0;Je<J.length;Je++){const jt=[];for(let qt=0;qt<J[Je].length;qt+=2)jt.push(Ue(J[Je][qt],J[Je][qt+1],ae,ue,_e,Ce));Ae.geometry.push(jt)}}return ke.transformed=!0,ke}function Ue(ke,ae,ue,_e,Ce,Ae){return[Math.round(ue*(ke*_e-Ce)),Math.round(ue*(ae*_e-Ae))]}function We(ke,ae,ue,_e,Ce){const Ae=ae===Ce.maxZoom?0:Ce.tolerance/((1<<ae)*Ce.extent),J={features:[],numPoints:0,numSimplified:0,numFeatures:ke.length,source:null,x:ue,y:_e,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const nt of ke)Pe(J,nt,Ae,Ce);return J}function Pe(ke,ae,ue,_e){const Ce=ae.geometry,Ae=ae.type,J=[];if(ke.minX=Math.min(ke.minX,ae.minX),ke.minY=Math.min(ke.minY,ae.minY),ke.maxX=Math.max(ke.maxX,ae.maxX),ke.maxY=Math.max(ke.maxY,ae.maxY),Ae==="Point"||Ae==="MultiPoint")for(let nt=0;nt<Ce.length;nt+=3)J.push(Ce[nt],Ce[nt+1]),ke.numPoints++,ke.numSimplified++;else if(Ae==="LineString")Bt(J,Ce,ke,ue,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(let nt=0;nt<Ce.length;nt++)Bt(J,Ce[nt],ke,ue,Ae==="Polygon",nt===0);else if(Ae==="MultiPolygon")for(let nt=0;nt<Ce.length;nt++){const Je=Ce[nt];for(let jt=0;jt<Je.length;jt++)Bt(J,Je[jt],ke,ue,!0,jt===0)}if(J.length){let nt=ae.tags||null;if(Ae==="LineString"&&_e.lineMetrics){nt={};for(const jt in ae.tags)nt[jt]=ae.tags[jt];nt.mapbox_clip_start=Ce.start/Ce.size,nt.mapbox_clip_end=Ce.end/Ce.size}const Je={geometry:J,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:nt};ae.id!==null&&(Je.id=ae.id),ke.features.push(Je)}}function Bt(ke,ae,ue,_e,Ce,Ae){const J=_e*_e;if(_e>0&&ae.size<(Ce?J:_e))return void(ue.numPoints+=ae.length/3);const nt=[];for(let Je=0;Je<ae.length;Je+=3)(_e===0||ae[Je+2]>J)&&(ue.numSimplified++,nt.push(ae[Je],ae[Je+1])),ue.numPoints++;Ce&&function(Je,jt){let qt=0;for(let Ft=0,bn=Je.length,Tn=bn-2;Ft<bn;Tn=Ft,Ft+=2)qt+=(Je[Ft]-Je[Tn])*(Je[Ft+1]+Je[Tn+1]);if(qt>0===jt)for(let Ft=0,bn=Je.length;Ft<bn/2;Ft+=2){const Tn=Je[Ft],ct=Je[Ft+1];Je[Ft]=Je[bn-2-Ft],Je[Ft+1]=Je[bn-1-Ft],Je[bn-2-Ft]=Tn,Je[bn-1-Ft]=ct}}(nt,Ae),ke.push(nt)}const Et={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class nn{constructor(ae,ue){const _e=(ue=this.options=function(Ae,J){for(const nt in J)Ae[nt]=J[nt];return Ae}(Object.create(Et),ue)).debug;if(_e&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ce=function(Ae,J){const nt=[];if(Ae.type==="FeatureCollection")for(let Je=0;Je<Ae.features.length;Je++)Me(nt,Ae.features[Je],J,Je);else Me(nt,Ae.type==="Feature"?Ae:{geometry:Ae},J);return nt}(ae,ue);this.tiles={},this.tileCoords=[],_e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ce=function(Ae,J){const nt=J.buffer/J.extent;let Je=Ae;const jt=Ge(Ae,1,-1-nt,nt,0,-1,2,J),qt=Ge(Ae,1,1-nt,2+nt,0,-1,2,J);return(jt||qt)&&(Je=Ge(Ae,1,-nt,1+nt,0,-1,2,J)||[],jt&&(Je=Hn(jt,1).concat(Je)),qt&&(Je=Je.concat(Hn(qt,-1)))),Je}(Ce,ue),Ce.length&&this.splitTile(Ce,0,0,0),_e&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,ue,_e,Ce,Ae,J,nt){const Je=[ae,ue,_e,Ce],jt=this.options,qt=jt.debug;for(;Je.length;){Ce=Je.pop(),_e=Je.pop(),ue=Je.pop(),ae=Je.pop();const Ft=1<<ue,bn=yn(ue,_e,Ce);let Tn=this.tiles[bn];if(!Tn&&(qt>1&&console.time("creation"),Tn=this.tiles[bn]=We(ae,ue,_e,Ce,jt),this.tileCoords.push({z:ue,x:_e,y:Ce}),qt)){qt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,_e,Ce,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));const yi=`z${ue}`;this.stats[yi]=(this.stats[yi]||0)+1,this.total++}if(Tn.source=ae,Ae==null){if(ue===jt.indexMaxZoom||Tn.numPoints<=jt.indexMaxPoints)continue}else{if(ue===jt.maxZoom||ue===Ae)continue;if(Ae!=null){const yi=Ae-ue;if(_e!==J>>yi||Ce!==nt>>yi)continue}}if(Tn.source=null,ae.length===0)continue;qt>1&&console.time("clipping");const ct=.5*jt.buffer/jt.extent,wt=.5-ct,Wt=.5+ct,Ut=1+ct;let vn=null,Gi=null,Jn=null,ai=null,qn=Ge(ae,Ft,_e-ct,_e+Wt,0,Tn.minX,Tn.maxX,jt),Bn=Ge(ae,Ft,_e+wt,_e+Ut,0,Tn.minX,Tn.maxX,jt);ae=null,qn&&(vn=Ge(qn,Ft,Ce-ct,Ce+Wt,1,Tn.minY,Tn.maxY,jt),Gi=Ge(qn,Ft,Ce+wt,Ce+Ut,1,Tn.minY,Tn.maxY,jt),qn=null),Bn&&(Jn=Ge(Bn,Ft,Ce-ct,Ce+Wt,1,Tn.minY,Tn.maxY,jt),ai=Ge(Bn,Ft,Ce+wt,Ce+Ut,1,Tn.minY,Tn.maxY,jt),Bn=null),qt>1&&console.timeEnd("clipping"),Je.push(vn||[],ue+1,2*_e,2*Ce),Je.push(Gi||[],ue+1,2*_e,2*Ce+1),Je.push(Jn||[],ue+1,2*_e+1,2*Ce),Je.push(ai||[],ue+1,2*_e+1,2*Ce+1)}}getTile(ae,ue,_e){ae=+ae,ue=+ue,_e=+_e;const Ce=this.options,{extent:Ae,debug:J}=Ce;if(ae<0||ae>24)return null;const nt=1<<ae,Je=yn(ae,ue=ue+nt&nt-1,_e);if(this.tiles[Je])return on(this.tiles[Je],Ae);J>1&&console.log("drilling down to z%d-%d-%d",ae,ue,_e);let jt,qt=ae,Ft=ue,bn=_e;for(;!jt&&qt>0;)qt--,Ft>>=1,bn>>=1,jt=this.tiles[yn(qt,Ft,bn)];return jt&&jt.source?(J>1&&(console.log("found parent tile z%d-%d-%d",qt,Ft,bn),console.time("drilling down")),this.splitTile(jt.source,qt,Ft,bn,ae,ue,_e),J>1&&console.timeEnd("drilling down"),this.tiles[Je]?on(this.tiles[Je],Ae):null):null}}function yn(ke,ae,ue){return 32*((1<<ke)*ue+ae)+ke}class ln extends E{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,ue){return c._(this,void 0,void 0,function*(){const _e=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ce=this._geoJSONIndex.getTile(_e.z,_e.x,_e.y);if(!Ce)return null;const Ae=new W(Ce.features,{version:2,extent:c.$});let J=function(nt){const Je=new c.cM;return function(jt,qt){for(const Ft in jt.layers)qt.writeMessage(3,Q,jt.layers[Ft])}(nt,Je),Je.finish()}(Ae);return J.byteOffset===0&&J.byteLength===J.buffer.byteLength||(J=new Uint8Array(J)),{vectorTile:Ae,rawData:J.buffer}})}loadData(ae){return c._(this,void 0,void 0,function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const _e=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new c.cN(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest);const Ce=yield this._pendingData;this._geoJSONIndex=ae.cluster?new rt(function({superclusterOptions:J,clusterProperties:nt}){if(!nt||!J)return J;const Je={},jt={},qt={accumulated:null,zoom:0},Ft={properties:null},bn=Object.keys(nt);for(const Tn of bn){const[ct,wt]=nt[Tn],Wt=c.cT(wt),Ut=c.cT(typeof ct=="string"?[ct,["accumulated"],["get",Tn]]:ct);Je[Tn]=Wt.value,jt[Tn]=Ut.value}return J.map=Tn=>{Ft.properties=Tn;const ct={};for(const wt of bn)ct[wt]=Je[wt].evaluate(qt,Ft);return ct},J.reduce=(Tn,ct)=>{Ft.properties=ct;for(const wt of bn)qt.accumulated=Tn[wt],Tn[wt]=jt[wt].evaluate(qt,Ft)},J}(ae)).load(Ce.features):function(J,nt){return new nn(J,nt)}(Ce,ae.geojsonVtOptions),this.loaded={};const Ae={data:Ce};if(_e){const J=_e.finish();J&&(Ae.resourceTiming={},Ae.resourceTiming[ae.source]=JSON.parse(JSON.stringify(J)))}return Ae}catch(Ce){if(delete this._pendingRequest,c.cy(Ce))return{abandoned:!0};throw Ce}})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const ue=this.loaded;return ue&&ue[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,ue){return c._(this,void 0,void 0,function*(){let _e=yield this.loadGeoJSON(ae,ue);if(delete this._pendingRequest,typeof _e!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if($(_e,!0),ae.filter){const Ce=c.cT(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ce.result==="error")throw new Error(Ce.value.map(J=>`${J.key}: ${J.message}`).join(", "));_e={type:"FeatureCollection",features:_e.features.filter(J=>Ce.value.evaluate({zoom:0},J))}}return _e})}loadGeoJSON(ae,ue){return c._(this,void 0,void 0,function*(){const{promoteId:_e}=ae;if(ae.request){const Ce=yield c.j(ae.request,ue);return this._dataUpdateable=c.cV(Ce.data,_e)?c.cU(Ce.data,_e):void 0,Ce.data}if(typeof ae.data=="string")try{const Ce=JSON.parse(ae.data);return this._dataUpdateable=c.cV(Ce,_e)?c.cU(Ce,_e):void 0,Ce}catch(Ce){throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return c.cW(this._dataUpdateable,ae.dataDiff,_e),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class At{constructor(ae){this.self=ae,this.actor=new c.J(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ue,_e)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=_e},this.self.addProtocol=c.cA,this.self.removeProtocol=c.cB,this.self.registerRTLTextPlugin=ue=>{c.cX.setMethods(ue)},this.actor.registerMessageHandler("LDT",(ue,_e)=>this._getDEMWorkerSource(ue,_e.source).loadTile(_e)),this.actor.registerMessageHandler("RDT",(ue,_e)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ue,_e.source).removeTile(_e)})),this.actor.registerMessageHandler("GCEZ",(ue,_e)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,_e.type,_e.source).getClusterExpansionZoom(_e)})),this.actor.registerMessageHandler("GCC",(ue,_e)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,_e.type,_e.source).getClusterChildren(_e)})),this.actor.registerMessageHandler("GCL",(ue,_e)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,_e.type,_e.source).getClusterLeaves(_e)})),this.actor.registerMessageHandler("LD",(ue,_e)=>this._getWorkerSource(ue,_e.type,_e.source).loadData(_e)),this.actor.registerMessageHandler("GD",(ue,_e)=>this._getWorkerSource(ue,_e.type,_e.source).getData()),this.actor.registerMessageHandler("LT",(ue,_e)=>this._getWorkerSource(ue,_e.type,_e.source).loadTile(_e)),this.actor.registerMessageHandler("RT",(ue,_e)=>this._getWorkerSource(ue,_e.type,_e.source).reloadTile(_e)),this.actor.registerMessageHandler("AT",(ue,_e)=>this._getWorkerSource(ue,_e.type,_e.source).abortTile(_e)),this.actor.registerMessageHandler("RMT",(ue,_e)=>this._getWorkerSource(ue,_e.type,_e.source).removeTile(_e)),this.actor.registerMessageHandler("RS",(ue,_e)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[ue]||!this.workerSources[ue][_e.type]||!this.workerSources[ue][_e.type][_e.source])return;const Ce=this.workerSources[ue][_e.type][_e.source];delete this.workerSources[ue][_e.type][_e.source],Ce.removeSource!==void 0&&Ce.removeSource(_e)})),this.actor.registerMessageHandler("RM",ue=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue],this.globalStates.delete(ue)})),this.actor.registerMessageHandler("SR",(ue,_e)=>c._(this,void 0,void 0,function*(){this.referrer=_e})),this.actor.registerMessageHandler("SRPS",(ue,_e)=>this._syncRTLPluginState(ue,_e)),this.actor.registerMessageHandler("IS",(ue,_e)=>c._(this,void 0,void 0,function*(){this.self.importScripts(_e)})),this.actor.registerMessageHandler("SI",(ue,_e)=>this._setImages(ue,_e)),this.actor.registerMessageHandler("UL",(ue,_e)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ue).update(_e.layers,_e.removedIds,this._getGlobalState(ue))})),this.actor.registerMessageHandler("UGS",(ue,_e)=>c._(this,void 0,void 0,function*(){const Ce=this._getGlobalState(ue);for(const Ae in _e)Ce[Ae]=_e[Ae]})),this.actor.registerMessageHandler("SL",(ue,_e)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ue).replace(_e,this._getGlobalState(ue))}))}_getGlobalState(ae){let ue=this.globalStates.get(ae);return ue||(ue={},this.globalStates.set(ae,ue)),ue}_setImages(ae,ue){return c._(this,void 0,void 0,function*(){this.availableImages[ae]=ue;for(const _e in this.workerSources[ae]){const Ce=this.workerSources[ae][_e];for(const Ae in Ce)Ce[Ae].availableImages=ue}})}_syncRTLPluginState(ae,ue){return c._(this,void 0,void 0,function*(){return yield c.cX.syncState(ue,this.self.importScripts)})}_getAvailableImages(ae){let ue=this.availableImages[ae];return ue||(ue=[]),ue}_getLayerIndex(ae){let ue=this.layerIndexes[ae];return ue||(ue=this.layerIndexes[ae]=new a),ue}_getWorkerSource(ae,ue,_e){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][ue]||(this.workerSources[ae][ue]={}),!this.workerSources[ae][ue][_e]){const Ce={sendAsync:(Ae,J)=>(Ae.targetMapId=ae,this.actor.sendAsync(Ae,J))};switch(ue){case"vector":this.workerSources[ae][ue][_e]=new E(Ce,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][ue][_e]=new ln(Ce,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][ue][_e]=new this.externalWorkerSourceTypes[ue](Ce,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][ue][_e]}_getDEMWorkerSource(ae,ue){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][ue]||(this.demWorkerSources[ae][ue]=new A),this.demWorkerSources[ae][ue]}}return c.i(self)&&(self.worker=new At(self)),At}),o("index",["exports","./shared"],function(c,a){var g="5.9.0";function _(){var j=new a.A(4);return a.A!=Float32Array&&(j[1]=0,j[2]=0),j[0]=1,j[3]=1,j}let S,E;const A={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(j,s,p){const x=requestAnimationFrame(T=>{w(),s(T)}),{unsubscribe:w}=a.s(j.signal,"abort",()=>{w(),cancelAnimationFrame(x),p(a.c())},!1)},frameAsync(j){return new Promise((s,p)=>{this.frame(j,s,p)})},getImageData(j,s=0){return this.getImageCanvasContext(j).getImageData(-s,-s,j.width+2*s,j.height+2*s)},getImageCanvasContext(j){const s=window.document.createElement("canvas"),p=s.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return s.width=j.width,s.height=j.height,p.drawImage(j,0,0,j.width,j.height),p},resolveURL:j=>(S||(S=document.createElement("a")),S.href=j,S.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class N{static testProp(s){if(!N.docStyle)return s[0];for(let p=0;p<s.length;p++)if(s[p]in N.docStyle)return s[p];return s[0]}static create(s,p,x){const w=window.document.createElement(s);return p!==void 0&&(w.className=p),x&&x.appendChild(w),w}static createNS(s,p){return window.document.createElementNS(s,p)}static disableDrag(){N.docStyle&&N.selectProp&&(N.userSelect=N.docStyle[N.selectProp],N.docStyle[N.selectProp]="none")}static enableDrag(){N.docStyle&&N.selectProp&&(N.docStyle[N.selectProp]=N.userSelect)}static setTransform(s,p){s.style[N.transformProp]=p}static addEventListener(s,p,x,w={}){s.addEventListener(p,x,"passive"in w?w:w.capture)}static removeEventListener(s,p,x,w={}){s.removeEventListener(p,x,"passive"in w?w:w.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",N.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",N.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",N.suppressClickInternal,!0)},0)}static getScale(s){const p=s.getBoundingClientRect();return{x:p.width/s.offsetWidth||1,y:p.height/s.offsetHeight||1,boundingClientRect:p}}static getPoint(s,p,x){const w=p.boundingClientRect;return new a.P((x.clientX-w.left)/p.x-s.clientLeft,(x.clientY-w.top)/p.y-s.clientTop)}static mousePos(s,p){const x=N.getScale(s);return N.getPoint(s,x,p)}static touchPos(s,p){const x=[],w=N.getScale(s);for(let T=0;T<p.length;T++)x.push(N.getPoint(s,w,p[T]));return x}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const p=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),x=p.querySelectorAll("script");for(const w of x)w.remove();return N.clean(p),p.innerHTML}static isPossiblyDangerous(s,p){const x=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!x.includes("javascript:")&&!x.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const p=s.children;for(const x of p)N.removeAttributes(x),N.clean(x)}static removeAttributes(s){for(const{name:p,value:x}of s.attributes)N.isPossiblyDangerous(p,x)&&s.removeAttribute(p)}}N.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,N.selectProp=N.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),N.transformProp=N.testProp(["transform","WebkitTransform"]);const z={supported:!1,testSupport:function(j){!q&&$&&(W?Q(j):B=j)}};let B,$,q=!1,W=!1;function Q(j){const s=j.createTexture();j.bindTexture(j.TEXTURE_2D,s);try{if(j.texImage2D(j.TEXTURE_2D,0,j.RGBA,j.RGBA,j.UNSIGNED_BYTE,$),j.isContextLost())return;z.supported=!0}catch(p){}j.deleteTexture(s),q=!0}var Z;typeof document!="undefined"&&($=document.createElement("img"),$.onload=()=>{B&&Q(B),B=null,W=!0},$.onerror=()=>{q=!0,B=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(j){let s,p,x,w;j.resetRequestQueue=()=>{s=[],p=0,x=0,w={}},j.addThrottleControl=F=>{const G=x++;return w[G]=F,G},j.removeThrottleControl=F=>{delete w[F],P()},j.getImage=(F,G,Y=!0)=>new Promise((ne,ee)=>{z.supported&&(F.headers||(F.headers={}),F.headers.accept="image/webp,*/*"),a.e(F,{type:"image"}),s.push({abortController:G,requestParameters:F,supportImageRefresh:Y,state:"queued",onError:ce=>{ee(ce)},onSuccess:ce=>{ne(ce)}}),P()});const T=F=>a._(this,void 0,void 0,function*(){F.state="running";const{requestParameters:G,supportImageRefresh:Y,onError:ne,onSuccess:ee,abortController:ce}=F,ye=Y===!1&&!a.i(self)&&!a.g(G.url)&&(!G.headers||Object.keys(G.headers).reduce((Te,ze)=>Te&&ze==="accept",!0));p++;const Se=ye?O(G,ce):a.m(G,ce);try{const Te=yield Se;delete F.abortController,F.state="completed",Te.data instanceof HTMLImageElement||a.b(Te.data)?ee(Te):Te.data&&ee({data:yield(we=Te.data,typeof createImageBitmap=="function"?a.f(we):a.h(we)),cacheControl:Te.cacheControl,expires:Te.expires})}catch(Te){delete F.abortController,ne(Te)}finally{p--,P()}var we}),P=()=>{const F=(()=>{for(const G of Object.keys(w))if(w[G]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let G=p;G<F&&s.length>0;G++){const Y=s.shift();Y.abortController.signal.aborted?G--:T(Y)}},O=(F,G)=>new Promise((Y,ne)=>{const ee=new Image,ce=F.url,ye=F.credentials;ye&&ye==="include"?ee.crossOrigin="use-credentials":(ye&&ye==="same-origin"||!a.d(ce))&&(ee.crossOrigin="anonymous"),G.signal.addEventListener("abort",()=>{ee.src="",ne(a.c())}),ee.fetchPriority="high",ee.onload=()=>{ee.onerror=ee.onload=null,Y({data:ee})},ee.onerror=()=>{ee.onerror=ee.onload=null,G.signal.aborted||ne(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ee.src=ce})}(Z||(Z={})),Z.resetRequestQueue();class K{constructor(s){this._transformRequestFn=s!=null?s:null}transformRequest(s,p){return this._transformRequestFn&&this._transformRequestFn(s,p)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function le(j){const s=[];if(typeof j=="string")s.push({id:"default",url:j});else if(j&&j.length>0){const p=[];for(const{id:x,url:w}of j){const T=`${x}${w}`;p.indexOf(T)===-1&&(p.push(T),s.push({id:x,url:w}))}}return s}function ge(j,s,p){try{const x=new URL(j);return x.pathname+=`${s}${p}`,x.toString()}catch(x){throw new Error(`Invalid sprite URL "${j}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function he(j){const{userImage:s}=j;return!!(s&&s.render&&s.render())&&(j.data.replace(new Uint8Array(s.data.buffer)),!0)}class pe extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:p,promiseResolve:x}of this.requestors)x(this._getImagesForIds(p));this.requestors=[]}}getImage(s){const p=this.images[s];if(p&&!p.data&&p.spriteData){const x=p.spriteData;p.data=new a.R({width:x.width,height:x.height},x.context.getImageData(x.x,x.y,x.width,x.height).data),p.spriteData=null}return p}addImage(s,p){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,p)&&(this.images[s]=p)}_validate(s,p){let x=!0;const w=p.data||p.spriteData;return this._validateStretch(p.stretchX,w&&w.width)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchX" value`))),x=!1),this._validateStretch(p.stretchY,w&&w.height)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchY" value`))),x=!1),this._validateContent(p.content,p)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "content" value`))),x=!1),x}_validateStretch(s,p){if(!s)return!0;let x=0;for(const w of s){if(w[0]<x||w[1]<w[0]||p<w[1])return!1;x=w[1]}return!0}_validateContent(s,p){if(!s)return!0;if(s.length!==4)return!1;const x=p.spriteData,w=x&&x.width||p.data.width,T=x&&x.height||p.data.height;return!(s[0]<0||w<s[0]||s[1]<0||T<s[1]||s[2]<0||w<s[2]||s[3]<0||T<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,p,x=!0){const w=this.getImage(s);if(x&&(w.data.width!==p.data.width||w.data.height!==p.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=w.version+1,this.images[s]=p,this.updatedImages[s]=!0}removeImage(s){const p=this.images[s];delete this.images[s],delete this.patterns[s],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((p,x)=>{let w=!0;if(!this.isLoaded())for(const T of s)this.images[T]||(w=!1);this.isLoaded()||w?p(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:p})})}_getImagesForIds(s){const p={};for(const x of s){let w=this.getImage(x);w||(this.fire(new a.l("styleimagemissing",{id:x})),w=this.getImage(x)),w?p[x]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,textFitWidth:w.textFitWidth,textFitHeight:w.textFitHeight,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:a.w(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:s,height:p}=this.atlasImage;return{width:s,height:p}}getPattern(s){const p=this.patterns[s],x=this.getImage(s);if(!x)return null;if(p&&p.position.version===x.version)return p.position;if(p)p.position.version=x.version;else{const w={w:x.data.width+2,h:x.data.height+2,x:0,y:0},T=new a.I(w,x);this.patterns[s]={bin:w,position:T}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const p=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(s,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const T in this.patterns)s.push(this.patterns[T].bin);const{w:p,h:x}=a.p(s),w=this.atlasImage;w.resize({width:p||1,height:x||1});for(const T in this.patterns){const{bin:P}=this.patterns[T],O=P.x+1,F=P.y+1,G=this.getImage(T).data,Y=G.width,ne=G.height;a.R.copy(G,w,{x:0,y:0},{x:O,y:F},{width:Y,height:ne}),a.R.copy(G,w,{x:0,y:ne-1},{x:O,y:F-1},{width:Y,height:1}),a.R.copy(G,w,{x:0,y:0},{x:O,y:F+ne},{width:Y,height:1}),a.R.copy(G,w,{x:Y-1,y:0},{x:O-1,y:F},{width:1,height:ne}),a.R.copy(G,w,{x:0,y:0},{x:O+Y,y:F},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const p of s){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const x=this.getImage(p);x||a.w(`Image with ID: "${p}" was not found`),he(x)&&this.updateImage(p,x)}}}const Ie=1e20;function He(j,s,p,x,w,T,P,O,F){for(let G=s;G<s+x;G++)Ye(j,p*T+G,T,w,P,O,F);for(let G=p;G<p+w;G++)Ye(j,G*T+s,1,x,P,O,F)}function Ye(j,s,p,x,w,T,P){T[0]=0,P[0]=-1e20,P[1]=Ie,w[0]=j[s];for(let O=1,F=0,G=0;O<x;O++){w[O]=j[s+O*p];const Y=O*O;do{const ne=T[F];G=(w[O]-w[ne]+Y-ne*ne)/(O-ne)/2}while(G<=P[F]&&--F>-1);F++,T[F]=O,P[F]=G,P[F+1]=Ie}for(let O=0,F=0;O<x;O++){for(;P[F+1]<O;)F++;const G=T[F],Y=O-G;j[s+O*p]=w[G]+Y*Y}}class rt{constructor(s,p,x){this.requestManager=s,this.localIdeographFontFamily=p,this.entries={},this.lang=x}setURL(s){this.url=s}getGlyphs(s){return a._(this,void 0,void 0,function*(){const p=[];for(const T in s)for(const P of s[T])p.push(this._getAndCacheGlyphsPromise(T,P));const x=yield Promise.all(p),w={};for(const{stack:T,id:P,glyph:O}of x)w[T]||(w[T]={}),w[T][P]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return w})}_getAndCacheGlyphsPromise(s,p){return a._(this,void 0,void 0,function*(){let x=this.entries[s];x||(x=this.entries[s]={glyphs:{},requests:{},ranges:{}});let w=x.glyphs[p];if(w!==void 0)return{stack:s,id:p,glyph:w};if(w=this._tinySDF(x,s,p),w)return x.glyphs[p]=w,{stack:s,id:p,glyph:w};const T=Math.floor(p/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(x.ranges[T])return{stack:s,id:p,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!x.requests[T]){const O=rt.loadGlyphRange(s,T,this.url,this.requestManager);x.requests[T]=O}const P=yield x.requests[T];for(const O in P)this._doesCharSupportLocalGlyph(+O)||(x.glyphs[+O]=P[+O]);return x.ranges[T]=!0,{stack:s,id:p,glyph:P[p]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||a.u["CJK Unified Ideographs"](s)||a.u["Hangul Syllables"](s)||a.u.Hiragana(s)||a.u.Katakana(s)||a.u["CJK Symbols and Punctuation"](s)||a.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,p,x){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(x))return;let T=s.tinySDF;if(!T){let O="400";/bold/i.test(p)?O="900":/medium/i.test(p)?O="500":/light/i.test(p)&&(O="200"),T=s.tinySDF=new rt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:w,fontWeight:O})}const P=T.draw(String.fromCharCode(x));return{id:x,bitmap:new a.q({width:P.width||60,height:P.height||60},P.data),metrics:{width:P.glyphWidth/2||24,height:P.glyphHeight/2||24,left:P.glyphLeft/2+.5||0,top:P.glyphTop/2-27.5||-8,advance:P.glyphAdvance/2||24,isDoubleResolution:!0}}}}rt.loadGlyphRange=function(j,s,p,x){return a._(this,void 0,void 0,function*(){const w=256*s,T=w+255,P=x.transformRequest(p.replace("{fontstack}",j).replace("{range}",`${w}-${T}`),"Glyphs"),O=yield a.n(P,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${s}, ${w}-${T}`);const F={};for(const G of a.o(O.data))F[G.id]=G;return F})},rt.TinySDF=class{constructor({fontSize:j=24,buffer:s=3,radius:p=8,cutoff:x=.25,fontFamily:w="sans-serif",fontWeight:T="normal",fontStyle:P="normal",lang:O=null}={}){this.buffer=s,this.cutoff=x,this.radius=p,this.lang=O;const F=this.size=j+4*s,G=this._createCanvas(F),Y=this.ctx=G.getContext("2d",{willReadFrequently:!0});Y.font=`${P} ${T} ${j}px ${w}`,Y.textBaseline="alphabetic",Y.textAlign="left",Y.fillStyle="black",this.gridOuter=new Float64Array(F*F),this.gridInner=new Float64Array(F*F),this.f=new Float64Array(F),this.z=new Float64Array(F+1),this.v=new Uint16Array(F)}_createCanvas(j){const s=document.createElement("canvas");return s.width=s.height=j,s}draw(j){const{width:s,actualBoundingBoxAscent:p,actualBoundingBoxDescent:x,actualBoundingBoxLeft:w,actualBoundingBoxRight:T}=this.ctx.measureText(j),P=Math.ceil(p),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-w))),F=Math.min(this.size-this.buffer,P+Math.ceil(x)),G=O+2*this.buffer,Y=F+2*this.buffer,ne=Math.max(G*Y,0),ee=new Uint8ClampedArray(ne),ce={data:ee,width:G,height:Y,glyphWidth:O,glyphHeight:F,glyphTop:P,glyphLeft:0,glyphAdvance:s};if(O===0||F===0)return ce;const{ctx:ye,buffer:Se,gridInner:we,gridOuter:Te}=this;this.lang&&(ye.lang=this.lang),ye.clearRect(Se,Se,O,F),ye.fillText(j,Se,Se+P);const ze=ye.getImageData(Se,Se,O,F);Te.fill(Ie,0,ne),we.fill(0,0,ne);for(let Le=0;Le<F;Le++)for(let Oe=0;Oe<O;Oe++){const qe=ze.data[4*(Le*O+Oe)+3]/255;if(qe===0)continue;const Ke=(Le+Se)*G+Oe+Se;if(qe===1)Te[Ke]=0,we[Ke]=Ie;else{const Fe=.5-qe;Te[Ke]=Fe>0?Fe*Fe:0,we[Ke]=Fe<0?Fe*Fe:0}}He(Te,0,0,G,Y,G,this.f,this.v,this.z),He(we,Se,Se,O,F,G,this.f,this.v,this.z);for(let Le=0;Le<ne;Le++){const Oe=Math.sqrt(Te[Le])-Math.sqrt(we[Le]);ee[Le]=Math.round(255-255*(Oe/this.radius+this.cutoff))}return ce}};class Rt{constructor(){this.specification=a.v.light.position}possiblyEvaluate(s,p){return a.B(s.expression.evaluate(p))}interpolate(s,p,x){return{x:a.C.number(s.x,p.x,x),y:a.C.number(s.y,p.y,x),z:a.C.number(s.z,p.z,x)}}}let St;class De extends a.E{constructor(s){super(),St=St||new a.r({anchor:new a.D(a.v.light.anchor),position:new Rt,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(St,void 0),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,p={}){if(!this._validate(a.x,s,p))for(const x in s){const w=s[x];x.endsWith("-transition")?this._transitionable.setTransition(x.slice(0,-11),w):this._transitionable.setValue(x,w)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,p,x){return(!x||x.validate!==!1)&&a.y(this,s.call(a.z,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Qe=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class et extends a.E{constructor(s){super(),this._transitionable=new a.t(Qe,void 0),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(s,p={}){if(!this._validate(a.G,s,p)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const x in s){const w=s[x];x.endsWith("-transition")?this._transitionable.setTransition(x.slice(0,-11),w):this._transitionable.setValue(x,w)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,p,x={}){return(x==null?void 0:x.validate)!==!1&&a.y(this,s.call(a.z,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Nt{constructor(s,p){this.width=s,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,p){const x=s.join(",")+String(p);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(s,p)),this.dashEntry[x]}getDashRanges(s,p,x){const w=[];let T=s.length%2==1?-s[s.length-1]*x:0,P=s[0]*x,O=!0;w.push({left:T,right:P,isDash:O,zeroLength:s[0]===0});let F=s[0];for(let G=1;G<s.length;G++){O=!O;const Y=s[G];T=F*x,F+=Y,P=F*x,w.push({left:T,right:P,isDash:O,zeroLength:Y===0})}return w}addRoundDash(s,p,x){const w=p/2;for(let T=-x;T<=x;T++){const P=this.width*(this.nextRow+x+T);let O=0,F=s[O];for(let G=0;G<this.width;G++){G/F.right>1&&(F=s[++O]);const Y=Math.abs(G-F.left),ne=Math.abs(G-F.right),ee=Math.min(Y,ne);let ce;const ye=T/x*(w+1);if(F.isDash){const Se=w-Math.abs(ye);ce=Math.sqrt(ee*ee+Se*Se)}else ce=w-Math.sqrt(ee*ee+ye*ye);this.data[P+G]=Math.max(0,Math.min(255,ce+128))}}}addRegularDash(s){for(let O=s.length-1;O>=0;--O){const F=s[O],G=s[O+1];F.zeroLength?s.splice(O,1):G&&G.isDash===F.isDash&&(G.left=F.left,s.splice(O,1))}const p=s[0],x=s[s.length-1];p.isDash===x.isDash&&(p.left=x.left-this.width,x.right=p.right+this.width);const w=this.width*this.nextRow;let T=0,P=s[T];for(let O=0;O<this.width;O++){O/P.right>1&&(P=s[++T]);const F=Math.abs(O-P.left),G=Math.abs(O-P.right),Y=Math.min(F,G);this.data[w+O]=Math.max(0,Math.min(255,(P.isDash?Y:-Y)+128))}}addDash(s,p){const x=p?7:0,w=2*x+1;if(this.nextRow+w>this.height)return a.w("LineAtlas out of space"),null;let T=0;for(let O=0;O<s.length;O++)T+=s[O];if(T!==0){const O=this.width/T,F=this.getDashRanges(s,this.width,O);p?this.addRoundDash(F,O,x):this.addRegularDash(F)}const P={y:this.nextRow+x,height:2*x,width:T};return this.nextRow+=w,this.dirty=!0,P}bind(s){const p=s.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const fe="maplibre_preloaded_worker_pool";class Xe{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Xe.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[fe]}numActive(){return Object.keys(this.active).length}}const tt=Math.floor(A.hardwareConcurrency/2);let Me,ot;function ut(){return Me||(Me=new Xe),Me}Xe.workerCount=a.H(globalThis)?Math.max(Math.min(tt,3),1):1;class dt{constructor(s,p){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=p;const x=this.workerPool.acquire(p);for(let w=0;w<x.length;w++){const T=new a.J(x[w],p);T.name=`Worker ${w}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,p){const x=[];for(const w of this.actors)x.push(w.sendAsync({type:s,data:p}));return Promise.all(x)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,p){for(const x of this.actors)x.registerMessageHandler(s,p)}}function pt(){return ot||(ot=new dt(ut(),a.K),ot.registerMessageHandler("GR",(j,s,p)=>a.m(s,p))),ot}function Ve(j,s){const p=a.L();return a.M(p,p,[1,1,0]),a.N(p,p,[.5*j.width,.5*j.height,1]),j.calculatePosMatrix?a.O(p,p,j.calculatePosMatrix(s.toUnwrapped())):p}function Ge(j,s,p,x,w,T,P){var O;const F=function(ee,ce,ye){if(ee)for(const Se of ee){const we=ce[Se];if(we&&we.source===ye&&we.type==="fill-extrusion")return!0}else for(const Se in ce){const we=ce[Se];if(we.source===ye&&we.type==="fill-extrusion")return!0}return!1}((O=w==null?void 0:w.layers)!==null&&O!==void 0?O:null,s,j.id),G=T.maxPitchScaleFactor(),Y=j.tilesIn(x,G,F);Y.sort(Dt);const ne=[];for(const ee of Y)ne.push({wrappedTileID:ee.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(s,p,j._state,ee.queryGeometry,ee.cameraQueryGeometry,ee.scale,w,T,G,Ve(j.transform,ee.tileID),P?(ce,ye)=>P(ee.tileID,ce,ye):void 0)});return function(ee,ce){for(const ye in ee)for(const Se of ee[ye])Lt(Se,ce);return ee}(function(ee){const ce={},ye={};for(const Se of ee){const we=Se.queryResults,Te=Se.wrappedTileID,ze=ye[Te]=ye[Te]||{};for(const Le in we){const Oe=we[Le],qe=ze[Le]=ze[Le]||{},Ke=ce[Le]=ce[Le]||[];for(const Fe of Oe)qe[Fe.featureIndex]||(qe[Fe.featureIndex]=!0,Ke.push(Fe))}}return ce}(ne),j)}function Dt(j,s){const p=j.tileID,x=s.tileID;return p.overscaledZ-x.overscaledZ||p.canonical.y-x.canonical.y||p.wrap-x.wrap||p.canonical.x-x.canonical.x}function Lt(j,s){const p=j.feature,x=s.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=x}function It(j,s,p){return a._(this,void 0,void 0,function*(){let x=j;if(j.url?x=(yield a.j(s.transformRequest(j.url,"Source"),p)).data:yield A.frameAsync(p),!x)return null;const w=a.Q(a.e(x,j),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in x&&x.vector_layers&&(w.vectorLayerIds=x.vector_layers.map(T=>T.id)),w})}class Ot{constructor(s,p){s&&(p?this.setSouthWest(s).setNorthEast(p):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}extend(s){const p=this._sw,x=this._ne;let w,T;if(s instanceof a.S)w=s,T=s;else{if(!(s instanceof Ot))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Ot.convert(s)):this.extend(a.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(a.S.convert(s)):this;if(w=s._sw,T=s._ne,!w||!T)return this}return p||x?(p.lng=Math.min(w.lng,p.lng),p.lat=Math.min(w.lat,p.lat),x.lng=Math.max(T.lng,x.lng),x.lat=Math.max(T.lat,x.lat)):(this._sw=new a.S(w.lng,w.lat),this._ne=new a.S(T.lng,T.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:p,lat:x}=a.S.convert(s);let w=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&w}static convert(s){return s instanceof Ot?s:s&&new Ot(s)}static fromLngLat(s,p=0){const x=360*p/40075017,w=x/Math.cos(Math.PI/180*s.lat);return new Ot(new a.S(s.lng-w,s.lat-x),new a.S(s.lng+w,s.lat+x))}adjustAntiMeridian(){const s=new a.S(this._sw.lng,this._sw.lat),p=new a.S(this._ne.lng,this._ne.lat);return new Ot(s,s.lng>p.lng?new a.S(p.lng+360,p.lat):p)}}class en{constructor(s,p,x){this.bounds=Ot.convert(this.validateBounds(s)),this.minzoom=p||0,this.maxzoom=x||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const p=Math.pow(2,s.z),x=Math.floor(a.V(this.bounds.getWest())*p),w=Math.floor(a.U(this.bounds.getNorth())*p),T=Math.ceil(a.V(this.bounds.getEast())*p),P=Math.ceil(a.U(this.bounds.getSouth())*p);return s.x>=x&&s.x<T&&s.y>=w&&s.y<P}}class _n extends a.E{constructor(s,p,x,w){if(super(),this.id=s,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(a.e(this,s),s.bounds&&(this.tileBounds=new en(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(s){return a._(this,void 0,void 0,function*(){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x={request:this.map._requestManager.transformRequest(p,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};x.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((T,P)=>{s.reloadPromise={resolve:T,reject:P}})}else s.actor=this.dispatcher.getActor(),w="LT";s.abortController=new AbortController;try{const T=yield s.actor.sendAsync({type:w,data:x},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,T)}catch(T){if(delete s.abortController,s.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,p){if(p&&p.resourceTiming&&(s.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&s.setExpiryData(p),s.loadVectorData(p,this.map.painter),s.reloadPromise){const x=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(x.resolve).catch(x.reject)}}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Yn extends a.E{constructor(s,p,x,w){super(),this.id=s,this.dispatcher=x,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.Q(p,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(s=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(a.e(this,p),p.bounds&&(this.tileBounds=new en(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(p){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(p))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return a.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return a._(this,void 0,void 0,function*(){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const x=yield Z.getImage(this.map._requestManager.transformRequest(p,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(x&&x.data){this.map._refreshExpiredTiles&&(x.cacheControl||x.expires)&&s.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});const w=this.map.painter.context,T=w.gl,P=x.data;s.texture=this.map.painter.getTileTexture(P.width),s.texture?s.texture.update(P,{useMipmap:!0}):(s.texture=new a.T(w,P,T.RGBA,{useMipmap:!0}),s.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(x){if(delete s.abortController,s.aborted)s.state="unloaded";else if(x)throw s.state="errored",x}})}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class Hn extends Yn{constructor(s,p,x,w){super(s,p,x,w),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(s){return a._(this,void 0,void 0,function*(){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x=this.map._requestManager.transformRequest(p,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const w=yield Z.getImage(x,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(w&&w.data){const T=w.data;this.map._refreshExpiredTiles&&(w.cacheControl||w.expires)&&s.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const P=a.b(T)&&a.W()?T:yield this.readImageNow(T),O={type:this.type,uid:s.uid,source:this.id,rawImageData:P,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const F=yield s.actor.sendAsync({type:"LDT",data:O});s.dem=F,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(w){if(delete s.abortController,s.aborted)s.state="unloaded";else if(w)throw s.state="errored",w}})}readImageNow(s){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&a.X()){const p=s.width+2,x=s.height+2;try{return new a.R({width:p,height:x},yield a.Y(s,-1,-1,p,x))}catch(w){}}return A.getImageData(s,1)})}_getNeighboringTiles(s){const p=s.canonical,x=Math.pow(2,p.z),w=(p.x-1+x)%x,T=p.x===0?s.wrap-1:s.wrap,P=(p.x+1+x)%x,O=p.x+1===x?s.wrap+1:s.wrap,F={};return F[new a.Z(s.overscaledZ,T,p.z,w,p.y).key]={backfilled:!1},F[new a.Z(s.overscaledZ,O,p.z,P,p.y).key]={backfilled:!1},p.y>0&&(F[new a.Z(s.overscaledZ,T,p.z,w,p.y-1).key]={backfilled:!1},F[new a.Z(s.overscaledZ,s.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},F[new a.Z(s.overscaledZ,O,p.z,P,p.y-1).key]={backfilled:!1}),p.y+1<x&&(F[new a.Z(s.overscaledZ,T,p.z,w,p.y+1).key]={backfilled:!1},F[new a.Z(s.overscaledZ,s.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},F[new a.Z(s.overscaledZ,O,p.z,P,p.y+1).key]={backfilled:!1}),F}unloadTile(s){return a._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class hn extends a.E{constructor(s,p,x,w){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:p.data},this.actor=x.getActor(),this.setEventedParent(w),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(p.clusterMaxZoom),minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(a.$/this.tileSize)}_getClusterMaxZoom(s){const p=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${p}"`),p}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._pendingWorkerUpdate={data:s},this._updateWorkerData(),this}updateData(s){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,s),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,function*(){const s=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map(p=>p.coordinates).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const s=new Ot,p=yield this.getData();let x;switch(p.type){case"FeatureCollection":x=p.features.map(w=>this.getCoordinatesFromGeometry(w.geometry)).flat(1/0);break;case"Feature":x=this.getCoordinatesFromGeometry(p.geometry);break;default:x=this.getCoordinatesFromGeometry(p)}if(x.length==0)return s;for(let w=0;w<x.length-1;w+=2)s.extend([x[w],x[w+1]]);return s})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,p,x){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:p,offset:x}})}_updateWorkerData(){return a._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:s,diff:p}=this._pendingWorkerUpdate;if(!s&&!p)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const x=a.e({type:this.type},this.workerOptions);s?(typeof s=="string"?(x.request=this.map._requestManager.transformRequest(A.resolveURL(s),"Source"),x.request.collectResourceTiming=this._collectResourceTiming):x.data=JSON.stringify(s),this._pendingWorkerUpdate.data=void 0):p&&(x.dataDiff=p,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const w=yield this.actor.sendAsync({type:"LD",data:x});if(this._isUpdatingWorker=!1,this._removed||w.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=w.data;let T=null;w.resourceTiming&&w.resourceTiming[this.id]&&(T=w.resourceTiming[this.id].slice(0));const P={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&a.e(P,{resourceTiming:T}),this.fire(new a.l("data",Object.assign(Object.assign({},P),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},P),{sourceDataType:"content"})))}catch(w){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(w))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(s){return a._(this,void 0,void 0,function*(){const p=s.actor?"RT":"LT";s.actor=this.actor;const x={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};s.abortController=new AbortController;const w=yield this.actor.sendAsync({type:p,data:x},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(w,this.map.painter,p==="RT")})}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class on extends a.E{constructor(s,p,x,w){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=x,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=p}load(s){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield Z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,s&&(this.coordinates=s),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new a.k(p))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const p=s.map(a.a1.fromLngLat);var x;return this.tileID=function(w){const T=a.a2.fromPoints(w),P=T.width(),O=T.height(),F=Math.max(P,O),G=Math.max(0,Math.floor(-Math.log(F)/Math.LN2)),Y=Math.pow(2,G);return new a.a4(G,Math.floor((T.minX+T.maxX)/2*Y),Math.floor((T.minY+T.maxY)/2*Y))}(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map(w=>this.tileID.getTilePoint(w)._round()),this.flippedWindingOrder=((x=this.tileCoords)[1].x-x[0].x)*(x[2].y-x[0].y)-(x[1].y-x[0].y)*(x[2].x-x[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,p=s.gl;this.texture||(this.texture=new a.T(s,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let x=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,x=!0)}x&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){const{minX:p,minY:x,maxX:w,maxY:T}=a.a2.fromPoints(s),P={};for(let O=0;O<=a.a3;O++){const F=Math.pow(2,O),G=Math.floor(p*F),Y=Math.floor(x*F),ne=Math.floor(w*F),ee=Math.floor(T*F);P[O]={minTileX:G,minTileY:Y,maxTileX:ne,maxTileY:ee}}return P}}class Ue extends on{constructor(s,p,x,w){super(s,p,x,w),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const p of s.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.a5(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.k(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const p=this.video.seekable;s<p.start(0)||s>p.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,p=s.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(s,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let x=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,x=!0)}x&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class We extends on{constructor(s,p,x,w){super(s,p,x,w),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(P=>typeof P!="number"))||this.fire(new a.k(new a.a6(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${s}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${s}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,x=p.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(p,this.canvas,x.RGBA,{premultiply:!0});let w=!1;for(const T in this.tiles){const P=this.tiles[T];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,w=!0)}w&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const Pe={},Bt=j=>{switch(j){case"geojson":return hn;case"image":return on;case"raster":return Yn;case"raster-dem":return Hn;case"vector":return _n;case"video":return Ue;case"canvas":return We}return Pe[j]},Et="RTLPluginLoaded";class nn extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=pt()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return a._(this,arguments,void 0,function*(p,x=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!x)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Et))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let yn=null;function ln(){return yn||(yn=new nn),yn}var At,ke;(function(j){j[j.Base=0]="Base",j[j.Parent=1]="Parent"})(At||(At={})),function(j){j[j.Departing=0]="Departing",j[j.Incoming=1]="Incoming"}(ke||(ke={}));class ae{constructor(s,p){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=s,this.uid=a.a7(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(s){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(s||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:s,fadingDirection:p,fadingParentID:x,fadeEndTime:w}){this.resetFadeLogic(),this.fadingRole=s,this.fadingDirection=p,this.fadingParentID=x,this.fadeEndTime=w}setSelfFadeLogic(s){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=s}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=A.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,p,x){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(w,T){const P={};if(!T)return P;for(const O of w){const F=O.layerIds.map(G=>T.getLayer(G)).filter(Boolean);if(F.length!==0){O.layers=F,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(G=>F.filter(Y=>Y.id===G)[0]));for(const G of F)P[G.id]=O}}return P}(s.buckets,p==null?void 0:p.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const T=this.buckets[w];if(T instanceof a.a9){if(this.hasSymbolBuckets=!0,!x)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const T=this.buckets[w];if(T instanceof a.a9&&T.hasRTLText){this.hasRTLText=!0,ln().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const T=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(w).queryRadius(T))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage),this.dashPositions=s.dashPositions}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const x in this.buckets){const w=this.buckets[x];w.uploadPending()&&w.upload(s)}const p=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(s,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(s,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,p,x,w,T,P,O,F,G,Y,ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:T,scale:P,tileSize:this.tileSize,pixelPosMatrix:Y,transform:F,params:O,queryPadding:this.queryPadding*G,getElevation:ne},s,p,x):{}}querySourceFeatures(s,p){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const w=x.loadVTLayers(),T=p&&p.sourceLayer?p.sourceLayer:"",P=w._geojsonTileLayer||w[T];if(!P)return;const O=a.aa(p==null?void 0:p.filter,p==null?void 0:p.globalState),{z:F,x:G,y:Y}=this.tileID.canonical,ne={z:F,x:G,y:Y};for(let ee=0;ee<P.length;ee++){const ce=P.feature(ee);if(O.needGeometry){const we=a.ab(ce,!0);if(!O.filter(new a.F(this.tileID.overscaledZ),we,this.tileID.canonical))continue}else if(!O.filter(new a.F(this.tileID.overscaledZ),ce))continue;const ye=x.getId(ce,T),Se=new a.ac(ce,F,G,Y,ye);Se.tile=ne,s.push(Se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const p=this.expirationTime;if(s.cacheControl){const x=a.ad(s.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const x=Date.now();let w=!1;if(this.expirationTime>x)w=!1;else if(p)if(this.expirationTime<p)w=!0;else{const T=this.expirationTime-p;T?this.expirationTime=x+Math.max(T,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const x=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!p.style.hasLayer(w))continue;const T=this.buckets[w],P=T.layers[0].sourceLayer||"_geojsonTileLayer",O=x[P],F=s[P];if(!O||!F||Object.keys(F).length===0)continue;T.update(F,O,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const G=p&&p.style&&p.style.getLayer(w);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(T)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(s){this.symbolFadeHoldUntil=A.now()+s}setDependencies(s,p){const x={};for(const w of p)x[w]=!0;this.dependencies[s]=x}hasDependency(s,p){for(const x of s){const w=this.dependencies[x];if(w){for(const T of p)if(w[T])return!0}}return!1}}class ue{constructor(s,p){this.max=s,this.onRemove=p,this.reset()}reset(){for(const s in this.data)for(const p of this.data[s])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(s,p,x){const w=s.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const T={value:p,timeout:void 0};if(x!==void 0&&(T.timeout=setTimeout(()=>{this.remove(s,T)},x)),this.data[w].push(T),this.order.push(w),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const p=this.data[s].shift();return p.timeout&&clearTimeout(p.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),p.value}getByKey(s){const p=this.data[s];return p?p[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,p){if(!this.has(s))return this;const x=s.wrapped().key,w=p===void 0?0:this.data[x].indexOf(p),T=this.data[x][w];return this.data[x].splice(w,1),T.timeout&&clearTimeout(T.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(T.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(s){const p=[];for(const x in this.data)for(const w of this.data[x])s(w.value)||p.push(w);for(const x of p)this.remove(x.value.tileID,x)}}class _e{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,p,x){const w=String(p);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][w]=this.stateChanges[s][w]||{},a.e(this.stateChanges[s][w],x),this.deletedStates[s]===null){this.deletedStates[s]={};for(const T in this.state[s])T!==w&&(this.deletedStates[s][T]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][w]===null){this.deletedStates[s][w]={};for(const T in this.state[s][w])x[T]||(this.deletedStates[s][w][T]=null)}else for(const T in x)this.deletedStates[s]&&this.deletedStates[s][w]&&this.deletedStates[s][w][T]===null&&delete this.deletedStates[s][w][T]}removeFeatureState(s,p,x){if(this.deletedStates[s]===null)return;const w=String(p);if(this.deletedStates[s]=this.deletedStates[s]||{},x&&p!==void 0)this.deletedStates[s][w]!==null&&(this.deletedStates[s][w]=this.deletedStates[s][w]||{},this.deletedStates[s][w][x]=null);else if(p!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][w])for(x in this.deletedStates[s][w]={},this.stateChanges[s][w])this.deletedStates[s][w][x]=null;else this.deletedStates[s][w]=null;else this.deletedStates[s]=null}getState(s,p){const x=String(p),w=a.e({},(this.state[s]||{})[x],(this.stateChanges[s]||{})[x]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const T=this.deletedStates[s][p];if(T===null)return{};for(const P in T)delete w[P]}return w}initializeTileState(s,p){s.setFeatureState(this.state,p)}coalesceChanges(s,p){const x={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const T={};for(const P in this.stateChanges[w])this.state[w][P]||(this.state[w][P]={}),a.e(this.state[w][P],this.stateChanges[w][P]),T[P]=this.state[w][P];x[w]=T}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const T={};if(this.deletedStates[w]===null)for(const P in this.state[w])T[P]={},this.state[w][P]={};else for(const P in this.deletedStates[w]){if(this.deletedStates[w][P]===null)this.state[w][P]={};else for(const O of Object.keys(this.deletedStates[w][P]))delete this.state[w][P][O];T[P]=this.state[w][P]}x[w]=x[w]||{},a.e(x[w],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(x).length!==0)for(const w in s)s[w].setFeatureState(x,p)}}const Ce=89.25;function Ae(j,s){const p=a.ah(s.lat,-a.ai,a.ai);return new a.P(a.V(s.lng)*j,a.U(p)*j)}function J(j,s){return new a.a1(s.x/j,s.y/j).toLngLat()}function nt(j){return j.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-j.pitch)),Math.tan(a.ae(Ce-j.pitch)))}function Je(j,s){const p=j.canonical,x=s/a.af(p.z),w=p.x+Math.pow(2,p.z)*j.wrap,T=a.ag(new Float64Array(16));return a.M(T,T,[w*x,p.y*x,0]),a.N(T,T,[x/a.$,x/a.$,1]),T}function jt(j,s,p,x,w){const T=a.a1.fromLngLat(j,s),P=w*a.aj(1,j.lat),O=P*Math.cos(a.ae(p)),F=Math.sqrt(P*P-O*O),G=F*Math.sin(a.ae(-x)),Y=F*Math.cos(a.ae(-x));return new a.a1(T.x+G,T.y+Y,T.z+O)}function qt(j,s,p){const x=s.intersectsFrustum(j);if(!p||x===0)return x;const w=s.intersectsPlane(p);return w===0?0:x===2&&w===2?2:1}function Ft(j,s,p){let x=0;const w=(p-s)/10;for(let T=0;T<10;T++)x+=w*Math.pow(Math.cos(s+(T+.5)/10*(p-s)),j);return x}function bn(j,s){return function(p,x,w,T,P){const O=2*((j-1)/a.ak(Math.cos(a.ae(Ce-P))/Math.cos(a.ae(Ce)))-1),F=Math.acos(w/T),G=2*Ft(O-1,0,a.ae(P/2)),Y=Math.min(a.ae(Ce),F+a.ae(P/2)),ne=Ft(O-1,Math.min(Y,F-a.ae(P/2)),Y),ee=Math.atan(x/w),ce=Math.hypot(x,w);let ye=p;return ye+=a.ak(T/ce/Math.max(.5,Math.cos(a.ae(P/2)))),ye+=O*a.ak(Math.cos(ee))/2,ye-=a.ak(Math.max(1,ne/G/s))/2,ye}}const Tn=bn(9.314,3);function ct(j,s){const p=(s.roundZoom?Math.round:Math.floor)(j.zoom+a.ak(j.tileSize/s.tileSize));return Math.max(0,p)}function wt(j,s){const p=j.getCameraFrustum(),x=j.getClippingPlane(),w=j.screenPointToMercatorCoordinate(j.getCameraPoint()),T=a.a1.fromLngLat(j.center,j.elevation);w.z=T.z+Math.cos(j.pitchInRadians)*j.cameraToCenterDistance/j.worldSize;const P=j.getCoveringTilesDetailsProvider(),O=P.allowVariableZoom(j,s),F=ct(j,s),G=s.minzoom||0,Y=s.maxzoom!==void 0?s.maxzoom:j.maxZoom,ne=Math.min(Math.max(0,F),Y),ee=Math.pow(2,ne),ce=[ee*w.x,ee*w.y,0],ye=[ee*T.x,ee*T.y,0],Se=Math.hypot(T.x-w.x,T.y-w.y),we=Math.abs(T.z-w.z),Te=Math.hypot(Se,we),ze=qe=>({zoom:0,x:0,y:0,wrap:qe,fullyVisible:!1}),Le=[],Oe=[];if(j.renderWorldCopies&&P.allowWorldCopies())for(let qe=1;qe<=3;qe++)Le.push(ze(-qe)),Le.push(ze(qe));for(Le.push(ze(0));Le.length>0;){const qe=Le.pop(),Ke=qe.x,Fe=qe.y;let it=qe.fullyVisible;const kt={x:Ke,y:Fe,z:qe.zoom},yt=P.getTileBoundingVolume(kt,qe.wrap,j.elevation,s);if(!it){const rn=qt(p,yt,x);if(rn===0)continue;it=rn===2}const _t=P.distanceToTile2d(w.x,w.y,kt,yt);let bt=F;O&&(bt=(s.calculateTileZoom||Tn)(j.zoom+a.ak(j.tileSize/s.tileSize),_t,we,Te,j.fov)),bt=(s.roundZoom?Math.round:Math.floor)(bt),bt=Math.max(0,bt);const sn=Math.min(bt,Y);if(qe.wrap=P.getWrap(T,kt,qe.wrap),qe.zoom>=sn){if(qe.zoom<G)continue;const rn=ne-qe.zoom,Yt=ce[0]-.5-(Ke<<rn),Mn=ce[1]-.5-(Fe<<rn),ni=s.reparseOverscaled?Math.max(qe.zoom,bt):qe.zoom;Oe.push({tileID:new a.Z(qe.zoom===Y?ni:qe.zoom,qe.wrap,qe.zoom,Ke,Fe),distanceSq:a.al([ye[0]-.5-Ke,ye[1]-.5-Fe]),tileDistanceToCamera:Math.sqrt(Yt*Yt+Mn*Mn)})}else for(let rn=0;rn<4;rn++)Le.push({zoom:qe.zoom+1,x:(Ke<<1)+rn%2,y:(Fe<<1)+(rn>>1),wrap:qe.wrap,fullyVisible:it})}return Oe.sort((qe,Ke)=>qe.distanceSq-Ke.distanceSq).map(qe=>qe.tileID)}const Wt=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Ut extends a.E{constructor(s,p,x){super(),this.id=s,this.dispatcher=x,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,T,P,O)=>{const F=new(Bt(T.type))(w,T,P,O);if(F.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${F.id}`);return F})(s,p,x,this),this._tiles={},this._cache=new ue(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new _e,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const p=this._tiles[s];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,p,x){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,p,x)}catch(w){s.state="errored",w.status!==404?this._source.fire(new a.k(w,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new a.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const x=this._tiles[p];x.upload(s),x.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(vn).map(s=>s.key)}getRenderableIds(s){const p=[];for(const x in this._tiles)this._isIdRenderable(x,s)&&p.push(this._tiles[x]);return s?p.sort((x,w)=>{const T=x.tileID,P=w.tileID,O=new a.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),F=new a.P(P.canonical.x,P.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-P.overscaledZ||F.y-O.y||F.x-O.x}).map(x=>x.tileID.key):p.map(x=>x.tileID).sort(vn).map(x=>x.key)}hasRenderableParent(s){const p=s.overscaledZ-1;if(p>=this._source.minzoom){const x=this._getLoadedTile(s.scaledTo(p));if(x)return this._isIdRenderable(x.tileID.key)}return!1}_isIdRenderable(s,p=!1){var x;return(x=this._tiles[s])===null||x===void 0?void 0:x.isRenderable(p)}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const p in this._tiles)s?this._reloadTile(p,"expired"):this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")}}_reloadTile(s,p){return a._(this,void 0,void 0,function*(){const x=this._tiles[s];x&&(x.state!=="loading"&&(x.state=p),yield this._loadTile(x,s,p))})}_tileLoaded(s,p,x){s.timeAdded=A.now(),x==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(p,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const p=this.getRenderableIds();for(let w=0;w<p.length;w++){const T=p[w];if(s.neighboringTiles&&s.neighboringTiles[T]){const P=this.getTileByID(T);x(s,P),x(P,s)}}function x(w,T){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let P=T.tileID.canonical.x-w.tileID.canonical.x;const O=T.tileID.canonical.y-w.tileID.canonical.y,F=Math.pow(2,w.tileID.canonical.z),G=T.tileID.key;P===0&&O===0||Math.abs(O)>1||(Math.abs(P)>1&&(Math.abs(P+F)===1?P+=F:Math.abs(P-F)===1&&(P-=F)),T.dem&&w.dem&&(w.dem.backfillBorder(T.dem,P,O),w.neighboringTiles&&w.neighboringTiles[G]&&(w.neighboringTiles[G].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,p){const x=Object.values(s),w=this._getLoadedDescendents(x),T={};for(const P of x){const O=w[P.key];if(!(O!=null&&O.length)){T[P.key]=P;continue}const F=P.overscaledZ+Ut.maxUnderzooming,G=O.filter(ee=>ee.tileID.overscaledZ<=F);if(!G.length){T[P.key]=P;continue}const Y=Math.min(...G.map(ee=>ee.tileID.overscaledZ)),ne=G.filter(ee=>ee.tileID.overscaledZ===Y).map(ee=>ee.tileID);for(const ee of ne)p[ee.key]=ee;this._areDescendentsComplete(ne,Y,P.overscaledZ)||(T[P.key]=P)}return T}_getLoadedDescendents(s){var p;const x={};for(const w in this._tiles){const T=this._tiles[w];if(T.hasData())for(const P of s)T.tileID.isChildOf(P)&&(x[p=P.key]||(x[p]=[])).push(T)}return x}_areDescendentsComplete(s,p,x){return s.length===1&&s[0].isOverscaled()?s[0].overscaledZ===p:Math.pow(4,p-x)===s.length}_getLoadedTile(s){const p=this._tiles[s.key];return p!=null&&p.hasData()?p:null}updateCacheSize(s){const p=Math.ceil(s.width/this._source.tileSize)+1,x=Math.ceil(s.height/this._source.tileSize)+1,w=Math.floor(p*x*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(T)}handleWrapJump(s){const p=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,p){const x={};for(const w in this._tiles){const T=this._tiles[w];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+p),x[T.tileID.key]=T}this._tiles=x;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(s,p){if(!this._sourceLoaded||this._paused)return;let x;this.transform=s,this.terrain=p,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?x=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new a.Z(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(x=wt(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(x=x.filter(F=>this._source.hasTile(F)))):x=[],this.usedForTerrain&&(x=this._addTerrainIdealTiles(x));const w=x.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,w&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=ct(s,this._source),P=this._updateRetainedTiles(x,T),O=Gi(this._source.type);O&&this._rasterFadeDuration>0&&!p&&this._updateFadingTiles(x,P),O?this._cleanUpRasterTiles(P):this._cleanUpVectorTiles(P)}_cleanUpRasterTiles(s){for(const p in this._tiles)s[p]||this._removeTile(p)}_cleanUpVectorTiles(s){for(const p in this._tiles){const x=this._tiles[p];s[p]?x.clearSymbolFadeHold():x.hasSymbolBuckets?x.holdingForSymbolFade()?x.symbolFadeFinished()&&this._removeTile(p):x.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(p)}}_addTerrainIdealTiles(s){const p=[];for(const x of s)if(x.canonical.z>this._source.minzoom){const w=x.scaledTo(x.canonical.z-1);p.push(w);const T=x.scaledTo(Math.max(this._source.minzoom,Math.min(x.canonical.z,5)));p.push(T)}return s.concat(p)}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForSymbolFade()&&this._removeTile(s)}_updateRetainedTiles(s,p){var x;const w={},T={},P=Math.max(p-Ut.maxOverzooming,this._source.minzoom);let O={};for(const F of s){const G=this._addTile(F);w[F.key]=F,G.hasData()||(O[F.key]=F)}O=this._retainLoadedChildren(O,w);for(const F in O){const G=O[F];let Y=this._tiles[F],ne=Y==null?void 0:Y.wasRequested();for(let ee=G.overscaledZ-1;ee>=P;--ee){const ce=G.scaledTo(ee);if(T[ce.key])break;if(T[ce.key]=!0,Y=this.getTile(ce),!Y&&ne&&(Y=this._addTile(ce)),Y){const ye=Y.hasData();if((ye||!(!((x=this.map)===null||x===void 0)&&x.cancelPendingTileRequestsWhileZooming)||ne)&&(w[ce.key]=ce),ne=Y.wasRequested(),ye)break}}}return w}_updateFadingTiles(s,p){const x=A.now(),w=a.am(s);for(const T of s){const P=this._tiles[T.key];P.fadingDirection!==ke.Departing&&P.fadeOpacity!==0||P.resetFadeLogic(),this._updateFadingAncestor(P,p,x)||this._updateFadingDescendents(P,p,x)||this._updateFadingEdge(P,w,x)||P.resetFadeLogic()}}_updateFadingAncestor(s,p,x){if(!s.hasData())return!1;const{tileID:w,fadingRole:T,fadingDirection:P,fadingParentID:O}=s;if(T===At.Base&&P===ke.Incoming&&O)return p[O.key]=O,!0;const F=Math.max(w.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let G=w.overscaledZ-1;G>=F;G--){const Y=w.scaledTo(G),ne=this._getLoadedTile(Y);if(ne)return s.setCrossFadeLogic({fadingRole:At.Base,fadingDirection:ke.Incoming,fadingParentID:ne.tileID,fadeEndTime:x+this._rasterFadeDuration}),ne.setCrossFadeLogic({fadingRole:At.Parent,fadingDirection:ke.Departing,fadeEndTime:x+this._rasterFadeDuration}),p[Y.key]=Y,!0}return!1}_updateFadingDescendents(s,p,x){if(!s.hasData())return!1;const w=s.tileID.children(this._source.maxzoom);let T=this._updateFadingChildren(s,w,p,x);if(T)return!0;for(const P of w){const O=P.children(this._source.maxzoom);this._updateFadingChildren(s,O,p,x)&&(T=!0)}return T}_updateFadingChildren(s,p,x,w){if(p[0].overscaledZ>=this._source.maxzoom)return!1;let T=!1;for(const P of p){const O=this._getLoadedTile(P);if(!O)continue;const{fadingRole:F,fadingDirection:G,fadingParentID:Y}=O;F===At.Base&&G===ke.Departing&&Y||(O.setCrossFadeLogic({fadingRole:At.Base,fadingDirection:ke.Departing,fadingParentID:s.tileID,fadeEndTime:w+this._rasterFadeDuration}),s.setCrossFadeLogic({fadingRole:At.Parent,fadingDirection:ke.Incoming,fadeEndTime:w+this._rasterFadeDuration})),x[P.key]=P,T=!0}return T}_updateFadingEdge(s,p,x){const w=s.tileID;return!!s.selfFading||!s.hasData()&&!!p.has(w)&&(s.setSelfFadeLogic(x+this._rasterFadeDuration),!0)}_addTile(s){let p=this._tiles[s.key];if(p)return p;p=this._cache.getAndRemove(s),p&&(p.resetFadeLogic(),this._setTileReloadTimer(s.key,p),p.tileID=s,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,p)));const x=p;return p||(p=new ae(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(p,s.key,p.state)),p.uses++,this._tiles[s.key]=p,x||this._source.fire(new a.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(s,p){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const x=p.getExpiryTimeout();x&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},x))}refreshTiles(s){for(const p in this._tiles)(this._isIdRenderable(p)||this._tiles[p].state=="errored")&&s.some(x=>x.equals(this._tiles[p].tileID.canonical))&&this._reloadTile(p,"expired")}_removeTile(s){const p=this._tiles[s];p&&(p.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(s){s.dataType==="source"&&(s.sourceDataType!=="metadata"?s.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,p,x){const w=[],T=this.transform;if(!T)return w;const P=T.getCoveringTilesDetailsProvider().allowWorldCopies(),O=x?T.getCameraQueryGeometry(s):s,F=ce=>T.screenPointToMercatorCoordinate(ce,this.terrain),G=this.transformBbox(s,F,!P),Y=this.transformBbox(O,F,!P),ne=this.getIds(),ee=a.a2.fromPoints(Y);for(let ce=0;ce<ne.length;ce++){const ye=this._tiles[ne[ce]];if(ye.holdingForSymbolFade())continue;const Se=P?[ye.tileID]:[ye.tileID.unwrapTo(-1),ye.tileID.unwrapTo(0)],we=Math.pow(2,T.zoom-ye.tileID.overscaledZ),Te=p*ye.queryPadding*a.$/ye.tileSize/we;for(const ze of Se){const Le=ee.map(Oe=>ze.getTilePoint(new a.a1(Oe.x,Oe.y)));if(Le.expandBy(Te),Le.intersects(Wt)){const Oe=G.map(Ke=>ze.getTilePoint(Ke)),qe=Y.map(Ke=>ze.getTilePoint(Ke));w.push({tile:ye,tileID:P?ze:ze.unwrapTo(0),queryGeometry:Oe,cameraQueryGeometry:qe,scale:we})}}}return w}transformBbox(s,p,x){let w=s.map(p);if(x){const T=a.a2.fromPoints(s);T.shrinkBy(.001*Math.min(T.width(),T.height()));const P=T.map(p);a.a2.fromPoints(w).covers(P)||(w=w.map(O=>O.x>.5?new a.a1(O.x-1,O.y,O.z):O))}return w}getVisibleCoordinates(s){const p=this.getRenderableIds(s).map(x=>this._tiles[x].tileID);return this.transform&&this.transform.populateCache(p),p}hasTransition(){if(this._source.hasTransition())return!0;if(Gi(this._source.type)&&this._rasterFadeDuration>0){const s=A.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=s)return!0}return!1}setRasterFadeDuration(s){this._rasterFadeDuration=s}setFeatureState(s,p,x){this._state.updateState(s=s||"_geojsonTileLayer",p,x)}removeFeatureState(s,p,x){this._state.removeFeatureState(s=s||"_geojsonTileLayer",p,x)}getFeatureState(s,p){return this._state.getState(s=s||"_geojsonTileLayer",p)}setDependencies(s,p,x){const w=this._tiles[s];w&&w.setDependencies(p,x)}reloadTilesForDependencies(s,p){for(const x in this._tiles)this._tiles[x].hasDependency(s,p)&&this._reloadTile(x,"reloading");this._cache.filter(x=>!x.hasDependency(s,p))}}function vn(j,s){const p=Math.abs(2*j.wrap)-+(j.wrap<0),x=Math.abs(2*s.wrap)-+(s.wrap<0);return j.overscaledZ-s.overscaledZ||x-p||s.canonical.y-j.canonical.y||s.canonical.x-j.canonical.x}function Gi(j){return j==="raster"||j==="image"||j==="video"}Ut.maxOverzooming=10,Ut.maxUnderzooming=3;class Jn{constructor(s,p){this.reset(s,p)}reset(s,p){this.points=s||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.ah(s,0,1);let p=1,x=this._distances[p];const w=s*this.paddedLength+this.padding;for(;x<w&&p<this._distances.length;)x=this._distances[++p];const T=p-1,P=this._distances[T],O=x-P,F=O>0?(w-P)/O:0;return this.points[T].mult(1-F).add(this.points[p].mult(F))}}function ai(j,s){let p=!0;return j==="always"||j!=="never"&&s!=="never"||(p=!1),p}class qn{constructor(s,p,x){const w=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(s/x),this.yCellCount=Math.ceil(p/x);for(let P=0;P<this.xCellCount*this.yCellCount;P++)w.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=p,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,p,x,w,T){this._forEachCell(p,x,w,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(p),this.bboxes.push(x),this.bboxes.push(w),this.bboxes.push(T)}insertCircle(s,p,x,w){this._forEachCell(p-w,x-w,p+w,x+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(p),this.circles.push(x),this.circles.push(w)}_insertBoxCell(s,p,x,w,T,P){this.boxCells[T].push(P)}_insertCircleCell(s,p,x,w,T,P){this.circleCells[T].push(P)}_query(s,p,x,w,T,P,O){if(x<0||s>this.width||w<0||p>this.height)return[];const F=[];if(s<=0&&p<=0&&this.width<=x&&this.height<=w){if(T)return[{key:null,x1:s,y1:p,x2:x,y2:w}];for(let G=0;G<this.boxKeys.length;G++)F.push({key:this.boxKeys[G],x1:this.bboxes[4*G],y1:this.bboxes[4*G+1],x2:this.bboxes[4*G+2],y2:this.bboxes[4*G+3]});for(let G=0;G<this.circleKeys.length;G++){const Y=this.circles[3*G],ne=this.circles[3*G+1],ee=this.circles[3*G+2];F.push({key:this.circleKeys[G],x1:Y-ee,y1:ne-ee,x2:Y+ee,y2:ne+ee})}}else this._forEachCell(s,p,x,w,this._queryCell,F,{hitTest:T,overlapMode:P,seenUids:{box:{},circle:{}}},O);return F}query(s,p,x,w){return this._query(s,p,x,w,!1,null)}hitTest(s,p,x,w,T,P){return this._query(s,p,x,w,!0,T,P).length>0}hitTestCircle(s,p,x,w,T){const P=s-x,O=s+x,F=p-x,G=p+x;if(O<0||P>this.width||G<0||F>this.height)return!1;const Y=[];return this._forEachCell(P,F,O,G,this._queryCellCircle,Y,{hitTest:!0,overlapMode:w,circle:{x:s,y:p,radius:x},seenUids:{box:{},circle:{}}},T),Y.length>0}_queryCell(s,p,x,w,T,P,O,F){const{seenUids:G,hitTest:Y,overlapMode:ne}=O,ee=this.boxCells[T];if(ee!==null){const ye=this.bboxes;for(const Se of ee)if(!G.box[Se]){G.box[Se]=!0;const we=4*Se,Te=this.boxKeys[Se];if(s<=ye[we+2]&&p<=ye[we+3]&&x>=ye[we+0]&&w>=ye[we+1]&&(!F||F(Te))&&(!Y||!ai(ne,Te.overlapMode))&&(P.push({key:Te,x1:ye[we],y1:ye[we+1],x2:ye[we+2],y2:ye[we+3]}),Y))return!0}}const ce=this.circleCells[T];if(ce!==null){const ye=this.circles;for(const Se of ce)if(!G.circle[Se]){G.circle[Se]=!0;const we=3*Se,Te=this.circleKeys[Se];if(this._circleAndRectCollide(ye[we],ye[we+1],ye[we+2],s,p,x,w)&&(!F||F(Te))&&(!Y||!ai(ne,Te.overlapMode))){const ze=ye[we],Le=ye[we+1],Oe=ye[we+2];if(P.push({key:Te,x1:ze-Oe,y1:Le-Oe,x2:ze+Oe,y2:Le+Oe}),Y)return!0}}}return!1}_queryCellCircle(s,p,x,w,T,P,O,F){const{circle:G,seenUids:Y,overlapMode:ne}=O,ee=this.boxCells[T];if(ee!==null){const ye=this.bboxes;for(const Se of ee)if(!Y.box[Se]){Y.box[Se]=!0;const we=4*Se,Te=this.boxKeys[Se];if(this._circleAndRectCollide(G.x,G.y,G.radius,ye[we+0],ye[we+1],ye[we+2],ye[we+3])&&(!F||F(Te))&&!ai(ne,Te.overlapMode))return P.push(!0),!0}}const ce=this.circleCells[T];if(ce!==null){const ye=this.circles;for(const Se of ce)if(!Y.circle[Se]){Y.circle[Se]=!0;const we=3*Se,Te=this.circleKeys[Se];if(this._circlesCollide(ye[we],ye[we+1],ye[we+2],G.x,G.y,G.radius)&&(!F||F(Te))&&!ai(ne,Te.overlapMode))return P.push(!0),!0}}}_forEachCell(s,p,x,w,T,P,O,F){const G=this._convertToXCellCoord(s),Y=this._convertToYCellCoord(p),ne=this._convertToXCellCoord(x),ee=this._convertToYCellCoord(w);for(let ce=G;ce<=ne;ce++)for(let ye=Y;ye<=ee;ye++)if(T.call(this,s,p,x,w,this.xCellCount*ye+ce,P,O,F))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,p,x,w,T,P){const O=w-s,F=T-p,G=x+P;return G*G>O*O+F*F}_circleAndRectCollide(s,p,x,w,T,P,O){const F=(P-w)/2,G=Math.abs(s-(w+F));if(G>F+x)return!1;const Y=(O-T)/2,ne=Math.abs(p-(T+Y));if(ne>Y+x)return!1;if(G<=F||ne<=Y)return!0;const ee=G-F,ce=ne-Y;return ee*ee+ce*ce<=x*x}}function Bn(j,s,p){const x=a.L();if(!j){const{vecSouth:ne,vecEast:ee}=Xt(s),ce=_();ce[0]=ee[0],ce[1]=ee[1],ce[2]=ne[0],ce[3]=ne[1],w=ce,(Y=(P=(T=ce)[0])*(G=T[3])-(F=T[2])*(O=T[1]))&&(w[0]=G*(Y=1/Y),w[1]=-O*Y,w[2]=-F*Y,w[3]=P*Y),x[0]=ce[0],x[1]=ce[1],x[4]=ce[2],x[5]=ce[3]}var w,T,P,O,F,G,Y;return a.N(x,x,[1/p,1/p,1]),x}function yi(j,s,p,x){if(j){const w=a.L();if(!s){const{vecSouth:T,vecEast:P}=Xt(p);w[0]=P[0],w[1]=P[1],w[4]=T[0],w[5]=T[1]}return a.N(w,w,[x,x,1]),w}return p.pixelsToClipSpaceMatrix}function Xt(j){const s=Math.cos(j.rollInRadians),p=Math.sin(j.rollInRadians),x=Math.cos(j.pitchInRadians),w=Math.cos(j.bearingInRadians),T=Math.sin(j.bearingInRadians),P=a.ar();P[0]=-w*x*p-T*s,P[1]=-T*x*p+w*s;const O=a.as(P);O<1e-9?a.at(P):a.au(P,P,1/O);const F=a.ar();F[0]=w*x*s-T*p,F[1]=T*x*s+w*p;const G=a.as(F);return G<1e-9?a.at(F):a.au(F,F,1/G),{vecEast:F,vecSouth:P}}function lt(j,s,p,x){let w;x?(w=[j,s,x(j,s),1],a.aw(w,w,p)):(w=[j,s,0,1],ka(w,w,p));const T=w[3];return{point:new a.P(w[0]/T,w[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function Ri(j,s){return .5+j/s*.5}function li(j,s){return j.x>=-s[0]&&j.x<=s[0]&&j.y>=-s[1]&&j.y<=s[1]}function Wi(j,s,p,x,w,T,P,O,F,G,Y,ne,ee){const ce=p?j.textSizeData:j.iconSizeData,ye=a.an(ce,s.transform.zoom),Se=[256/s.width*2+1,256/s.height*2+1],we=p?j.text.dynamicLayoutVertexArray:j.icon.dynamicLayoutVertexArray;we.clear();const Te=j.lineVertexArray,ze=p?j.text.placedSymbolArray:j.icon.placedSymbolArray,Le=s.transform.width/s.transform.height;let Oe=!1;for(let qe=0;qe<ze.length;qe++){const Ke=ze.get(qe);if(Ke.hidden||Ke.writingMode===a.ao.vertical&&!Oe){Qr(Ke.numGlyphs,we);continue}Oe=!1;const Fe=new a.P(Ke.anchorX,Ke.anchorY),it={getElevation:ee,pitchedLabelPlaneMatrix:x,lineVertexArray:Te,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Fe,unwrappedTileID:F,width:G,height:Y,translation:ne},kt=Vn(Ke.anchorX,Ke.anchorY,it);if(!li(kt.point,Se)){Qr(Ke.numGlyphs,we);continue}const yt=Ri(s.transform.cameraToCenterDistance,kt.signedDistanceFromCamera),_t=a.ap(ce,ye,Ke),bt=T?_t*s.transform.getPitchedTextCorrection(Ke.anchorX,Ke.anchorY,F)/yt:_t*yt,sn=ei({projectionContext:it,pitchedLabelPlaneMatrixInverse:w,symbol:Ke,fontSize:bt,flip:!1,keepUpright:P,glyphOffsetArray:j.glyphOffsetArray,dynamicLayoutVertexArray:we,aspectRatio:Le,rotateToLine:O});Oe=sn.useVertical,(sn.notEnoughRoom||Oe||sn.needsFlipping&&ei({projectionContext:it,pitchedLabelPlaneMatrixInverse:w,symbol:Ke,fontSize:bt,flip:!0,keepUpright:P,glyphOffsetArray:j.glyphOffsetArray,dynamicLayoutVertexArray:we,aspectRatio:Le,rotateToLine:O}).notEnoughRoom)&&Qr(Ke.numGlyphs,we)}p?j.text.dynamicLayoutVertexBuffer.updateData(we):j.icon.dynamicLayoutVertexBuffer.updateData(we)}function ds(j,s,p,x,w,T,P,O){const F=T.glyphStartIndex+T.numGlyphs,G=T.lineStartIndex,Y=T.lineStartIndex+T.lineLength,ne=s.getoffsetX(T.glyphStartIndex),ee=s.getoffsetX(F-1),ce=da(j*ne,p,x,w,T.segment,G,Y,O,P);if(!ce)return null;const ye=da(j*ee,p,x,w,T.segment,G,Y,O,P);return ye?O.projectionCache.anyProjectionOccluded?null:{first:ce,last:ye}:null}function tn(j,s,p,x){return j===a.ao.horizontal&&Math.abs(p.y-s.y)>Math.abs(p.x-s.x)*x?{useVertical:!0}:(j===a.ao.vertical?s.y<p.y:s.x>p.x)?{needsFlipping:!0}:null}function ei(j){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:p,symbol:x,fontSize:w,flip:T,keepUpright:P,glyphOffsetArray:O,dynamicLayoutVertexArray:F,aspectRatio:G,rotateToLine:Y}=j,ne=w/24,ee=x.lineOffsetX*ne,ce=x.lineOffsetY*ne;let ye;if(x.numGlyphs>1){const Se=x.glyphStartIndex+x.numGlyphs,we=x.lineStartIndex,Te=x.lineStartIndex+x.lineLength,ze=ds(ne,O,ee,ce,T,x,Y,s);if(!ze)return{notEnoughRoom:!0};const Le=Xr(ze.first.point.x,ze.first.point.y,s,p),Oe=Xr(ze.last.point.x,ze.last.point.y,s,p);if(P&&!T){const qe=tn(x.writingMode,Le,Oe,G);if(qe)return qe}ye=[ze.first];for(let qe=x.glyphStartIndex+1;qe<Se-1;qe++){const Ke=da(ne*O.getoffsetX(qe),ee,ce,T,x.segment,we,Te,s,Y);if(!Ke)return{notEnoughRoom:!0};ye.push(Ke)}ye.push(ze.last)}else{if(P&&!T){const we=Ii(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,Te=x.lineStartIndex+x.segment+1,ze=new a.P(s.lineVertexArray.getx(Te),s.lineVertexArray.gety(Te)),Le=Ii(ze.x,ze.y,s),Oe=Le.signedDistanceFromCamera>0?Le.point:On(s.tileAnchorPoint,ze,we,1,s),qe=Xr(we.x,we.y,s,p),Ke=Xr(Oe.x,Oe.y,s,p),Fe=tn(x.writingMode,qe,Ke,G);if(Fe)return Fe}const Se=da(ne*O.getoffsetX(x.glyphStartIndex),ee,ce,T,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,s,Y);if(!Se||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ye=[Se]}for(const Se of ye)a.av(F,Se.point,Se.angle);return{}}function On(j,s,p,x,w){const T=j.add(j.sub(s)._unit()),P=Ii(T.x,T.y,w).point,O=p.sub(P);return p.add(O._mult(x/O.mag()))}function ws(j,s,p){const x=s.projectionCache;if(x.projections[j])return x.projections[j];const w=new a.P(s.lineVertexArray.getx(j),s.lineVertexArray.gety(j)),T=Ii(w.x,w.y,s);if(T.signedDistanceFromCamera>0)return x.projections[j]=T.point,x.anyProjectionOccluded=x.anyProjectionOccluded||T.isOccluded,T.point;const P=j-p.direction;return On(p.distanceFromAnchor===0?s.tileAnchorPoint:new a.P(s.lineVertexArray.getx(P),s.lineVertexArray.gety(P)),w,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,s)}function Ii(j,s,p){const x=j+p.translation[0],w=s+p.translation[1];let T;return p.pitchWithMap?(T=lt(x,w,p.pitchedLabelPlaneMatrix,p.getElevation),T.isOccluded=!1):(T=p.transform.projectTileCoordinates(x,w,p.unwrappedTileID,p.getElevation),T.point.x=(.5*T.point.x+.5)*p.width,T.point.y=(.5*-T.point.y+.5)*p.height),T}function Xr(j,s,p,x){if(p.pitchWithMap){const w=[j,s,0,1];return a.aw(w,w,x),p.transform.projectTileCoordinates(w[0]/w[3],w[1]/w[3],p.unwrappedTileID,p.getElevation).point}return{x:j/p.width*2-1,y:1-s/p.height*2}}function Vn(j,s,p){return p.transform.projectTileCoordinates(j,s,p.unwrappedTileID,p.getElevation)}function Kr(j,s,p){return j._unit()._perp()._mult(s*p)}function Rr(j,s,p,x,w,T,P,O,F){if(O.projectionCache.offsets[j])return O.projectionCache.offsets[j];const G=p.add(s);if(j+F.direction<x||j+F.direction>=w)return O.projectionCache.offsets[j]=G,G;const Y=ws(j+F.direction,O,F),ne=Kr(Y.sub(p),P,F.direction),ee=p.add(ne),ce=Y.add(ne);return O.projectionCache.offsets[j]=a.ax(T,G,ee,ce)||G,O.projectionCache.offsets[j]}function da(j,s,p,x,w,T,P,O,F){const G=x?j-s:j+s;let Y=G>0?1:-1,ne=0;x&&(Y*=-1,ne=Math.PI),Y<0&&(ne+=Math.PI);let ee,ce=Y>0?T+w:T+w+1;O.projectionCache.cachedAnchorPoint?ee=O.projectionCache.cachedAnchorPoint:(ee=Ii(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=ee);let ye,Se,we=ee,Te=ee,ze=0,Le=0;const Oe=Math.abs(G),qe=[];let Ke;for(;ze+Le<=Oe;){if(ce+=Y,ce<T||ce>=P)return null;ze+=Le,Te=we,Se=ye;const kt={absOffsetX:Oe,direction:Y,distanceFromAnchor:ze,previousVertex:Te};if(we=ws(ce,O,kt),p===0)qe.push(Te),Ke=we.sub(Te);else{let yt;const _t=we.sub(Te);yt=_t.mag()===0?Kr(ws(ce+Y,O,kt).sub(we),p,Y):Kr(_t,p,Y),Se||(Se=Te.add(yt)),ye=Rr(ce,yt,we,T,P,Se,p,O,kt),qe.push(Se),Ke=ye.sub(Se)}Le=Ke.mag()}const Fe=Ke._mult((Oe-ze)/Le)._add(Se||Te),it=ne+Math.atan2(we.y-Te.y,we.x-Te.x);return qe.push(Fe),{point:Fe,angle:F?it:0,path:qe}}const hs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Qr(j,s){for(let p=0;p<j;p++){const x=s.length;s.resize(x+4),s.float32.set(hs,3*x)}}function ka(j,s,p){const x=s[0],w=s[1];return j[0]=p[0]*x+p[4]*w+p[12],j[1]=p[1]*x+p[5]*w+p[13],j[3]=p[3]*x+p[7]*w+p[15],j}const Di=100;class ts{constructor(s,p=new qn(s.width+200,s.height+200,25),x=new qn(s.width+200,s.height+200,25)){this.transform=s,this.grid=p,this.ignoredGrid=x,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Di,this.screenBottomBoundary=s.height+Di,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,p,x,w,T,P,O,F,G,Y,ne,ee){const ce=this.projectAndGetPerspectiveRatio(s.anchorPointX+F[0],s.anchorPointY+F[1],T,Y,ee),ye=x*ce.perspectiveRatio;let Se;if(P||O)Se=this._projectCollisionBox(s,ye,w,T,P,O,F,ce,Y,ne,ee);else{const Ke=ce.x+(ne?ne.x*ye:0),Fe=ce.y+(ne?ne.y*ye:0);Se={allPointsOccluded:!1,box:[Ke+s.x1*ye,Fe+s.y1*ye,Ke+s.x2*ye,Fe+s.y2*ye]}}const[we,Te,ze,Le]=Se.box,Oe=P?Se.allPointsOccluded:ce.isOccluded;let qe=Oe;return qe||(qe=ce.perspectiveRatio<this.perspectiveRatioCutoff),qe||(qe=!this.isInsideGrid(we,Te,ze,Le)),qe||p!=="always"&&this.grid.hitTest(we,Te,ze,Le,p,G)?{box:[we,Te,ze,Le],placeable:!1,offscreen:!1,occluded:Oe}:{box:[we,Te,ze,Le],placeable:!0,offscreen:this.isOffscreen(we,Te,ze,Le),occluded:Oe}}placeCollisionCircles(s,p,x,w,T,P,O,F,G,Y,ne,ee,ce,ye){const Se=[],we=new a.P(p.anchorX,p.anchorY),Te=this.getPerspectiveRatio(we.x,we.y,P,ye),ze=(G?T*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,P)/Te:T*Te)/a.aB,Le={getElevation:ye,pitchedLabelPlaneMatrix:O,lineVertexArray:x,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:we,unwrappedTileID:P,width:this.transform.width,height:this.transform.height,translation:ce},Oe=ds(ze,w,p.lineOffsetX*ze,p.lineOffsetY*ze,!1,p,!1,Le);let qe=!1,Ke=!1,Fe=!0;if(Oe){const it=.5*ne*Te+ee,kt=new a.P(-100,-100),yt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),_t=new Jn,bt=Oe.first,sn=Oe.last;let rn=[];for(let ni=bt.path.length-1;ni>=1;ni--)rn.push(bt.path[ni]);for(let ni=1;ni<sn.path.length;ni++)rn.push(sn.path[ni]);const Yt=2.5*it;if(G){const ni=this.projectPathToScreenSpace(rn,Le);rn=ni.some(Li=>Li.signedDistanceFromCamera<=0)?[]:ni.map(Li=>Li.point)}let Mn=[];if(rn.length>0){const ni=rn[0].clone(),Li=rn[0].clone();for(let Bi=1;Bi<rn.length;Bi++)ni.x=Math.min(ni.x,rn[Bi].x),ni.y=Math.min(ni.y,rn[Bi].y),Li.x=Math.max(Li.x,rn[Bi].x),Li.y=Math.max(Li.y,rn[Bi].y);Mn=ni.x>=kt.x&&Li.x<=yt.x&&ni.y>=kt.y&&Li.y<=yt.y?[rn]:Li.x<kt.x||ni.x>yt.x||Li.y<kt.y||ni.y>yt.y?[]:a.ay([rn],kt.x,kt.y,yt.x,yt.y)}for(const ni of Mn){_t.reset(ni,.25*it);let Li=0;Li=_t.length<=.5*it?1:Math.ceil(_t.paddedLength/Yt)+1;for(let Bi=0;Bi<Li;Bi++){const Ji=Bi/Math.max(Li-1,1),ks=_t.lerp(Ji),is=ks.x+Di,gi=ks.y+Di;Se.push(is,gi,it,0);const as=is-it,er=gi-it,Bs=is+it,Vs=gi+it;if(Fe=Fe&&this.isOffscreen(as,er,Bs,Vs),Ke=Ke||this.isInsideGrid(as,er,Bs,Vs),s!=="always"&&this.grid.hitTestCircle(is,gi,it,s,Y)&&(qe=!0,!F))return{circles:[],offscreen:!1,collisionDetected:qe}}}}return{circles:!F&&qe||!Ke||Te<this.perspectiveRatioCutoff?[]:Se,offscreen:Fe,collisionDetected:qe}}projectPathToScreenSpace(s,p){const x=function(w,T){const P=a.L();return a.aq(P,T.pitchedLabelPlaneMatrix),w.map(O=>{const F=lt(O.x,O.y,P,T.getElevation),G=T.transform.projectTileCoordinates(F.point.x,F.point.y,T.unwrappedTileID,T.getElevation);return G.point.x=(.5*G.point.x+.5)*T.width,G.point.y=(.5*-G.point.y+.5)*T.height,G})}(s,p);return function(w){let T=0,P=0,O=0,F=0;for(let G=0;G<w.length;G++)w[G].isOccluded?(O=G+1,F=0):(F++,F>P&&(P=F,T=O));return w.slice(T,T+P)}(x)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[],x=new a.a2;for(const ne of s){const ee=new a.P(ne.x+Di,ne.y+Di);x.extend(ee),p.push(ee)}const{minX:w,minY:T,maxX:P,maxY:O}=x,F=this.grid.query(w,T,P,O).concat(this.ignoredGrid.query(w,T,P,O)),G={},Y={};for(const ne of F){const ee=ne.key;if(G[ee.bucketInstanceId]===void 0&&(G[ee.bucketInstanceId]={}),G[ee.bucketInstanceId][ee.featureIndex])continue;const ce=[new a.P(ne.x1,ne.y1),new a.P(ne.x2,ne.y1),new a.P(ne.x2,ne.y2),new a.P(ne.x1,ne.y2)];a.az(p,ce)&&(G[ee.bucketInstanceId][ee.featureIndex]=!0,Y[ee.bucketInstanceId]===void 0&&(Y[ee.bucketInstanceId]=[]),Y[ee.bucketInstanceId].push(ee.featureIndex))}return Y}insertCollisionBox(s,p,x,w,T,P){(x?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:T,collisionGroupID:P,overlapMode:p},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,p,x,w,T,P){const O=x?this.ignoredGrid:this.grid,F={bucketInstanceId:w,featureIndex:T,collisionGroupID:P,overlapMode:p};for(let G=0;G<s.length;G+=4)O.insertCircle(F,s[G],s[G+1],s[G+2])}projectAndGetPerspectiveRatio(s,p,x,w,T){if(T){let P;w?(P=[s,p,w(s,p),1],a.aw(P,P,T)):(P=[s,p,0,1],ka(P,P,T));const O=P[3];return{x:(P[0]/O+1)/2*this.transform.width+Di,y:(-P[1]/O+1)/2*this.transform.height+Di,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const P=this.transform.projectTileCoordinates(s,p,x,w);return{x:(P.point.x+1)/2*this.transform.width+Di,y:(1-P.point.y)/2*this.transform.height+Di,perspectiveRatio:.5+this.transform.cameraToCenterDistance/P.signedDistanceFromCamera*.5,isOccluded:P.isOccluded,signedDistanceFromCamera:P.signedDistanceFromCamera}}}getPerspectiveRatio(s,p,x,w){const T=this.transform.projectTileCoordinates(s,p,x,w);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(s,p,x,w){return x<Di||s>=this.screenRightBoundary||w<Di||p>this.screenBottomBoundary}isInsideGrid(s,p,x,w){return x>=0&&s<this.gridRightBoundary&&w>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const s=a.ag([]);return a.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,p,x,w,T,P,O,F,G,Y,ne){let ee=1,ce=0,ye=0,Se=1;const we=s.anchorPointX+O[0],Te=s.anchorPointY+O[1];if(P&&!T){const rn=this.projectAndGetPerspectiveRatio(we+1,Te,w,G,ne),Yt=rn.x-F.x,Mn=Math.atan((rn.y-F.y)/Yt)+(Yt<0?Math.PI:0),ni=Math.sin(Mn),Li=Math.cos(Mn);ee=Li,ce=ni,ye=-ni,Se=Li}else if(!P&&T){const rn=Xt(this.transform);ee=rn.vecEast[0],ce=rn.vecEast[1],ye=rn.vecSouth[0],Se=rn.vecSouth[1]}let ze=F.x,Le=F.y,Oe=p;T&&(ze=we,Le=Te,Oe=Math.pow(2,-(this.transform.zoom-x.overscaledZ)),Oe*=this.transform.getPitchedTextCorrection(we,Te,w),Y||(Oe*=a.ah(.5+F.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Y&&(ze+=ee*Y.x*Oe+ye*Y.y*Oe,Le+=ce*Y.x*Oe+Se*Y.y*Oe);const qe=s.x1*Oe,Ke=s.x2*Oe,Fe=(qe+Ke)/2,it=s.y1*Oe,kt=s.y2*Oe,yt=(it+kt)/2,_t=[{offsetX:qe,offsetY:it},{offsetX:Fe,offsetY:it},{offsetX:Ke,offsetY:it},{offsetX:Ke,offsetY:yt},{offsetX:Ke,offsetY:kt},{offsetX:Fe,offsetY:kt},{offsetX:qe,offsetY:kt},{offsetX:qe,offsetY:yt}];let bt=[];for(const{offsetX:rn,offsetY:Yt}of _t)bt.push(new a.P(ze+ee*rn+ye*Yt,Le+ce*rn+Se*Yt));let sn=!1;if(T){const rn=bt.map(Yt=>this.projectAndGetPerspectiveRatio(Yt.x,Yt.y,w,G,ne));sn=rn.some(Yt=>!Yt.isOccluded),bt=rn.map(Yt=>new a.P(Yt.x,Yt.y))}else sn=!0;return{box:a.aA(bt),allPointsOccluded:!sn}}}class ti{constructor(s,p,x,w){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?p:-p))):w&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class ml{constructor(s,p,x,w,T){this.text=new ti(s?s.text:null,p,x,T),this.icon=new ti(s?s.icon:null,p,w,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gl{constructor(s,p,x){this.text=s,this.icon=p,this.skipFade=x}}class Ea{constructor(s,p,x,w,T){this.bucketInstanceId=s,this.featureIndex=p,this.sourceLayerIndex=x,this.bucketIndex=w,this.tileID=T}}class Ha{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const p=++this.maxGroupID;this.collisionGroups[s]={ID:p,predicate:x=>x.collisionGroupID===p}}return this.collisionGroups[s]}}function ha(j,s,p,x,w){const{horizontalAlign:T,verticalAlign:P}=a.aH(j);return new a.P(-(T-.5)*s+x[0]*w,-(P-.5)*p+x[1]*w)}class Ph{constructor(s,p,x,w,T){this.transform=s.clone(),this.terrain=p,this.collisionIndex=new ts(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=x,this.retainedQueryData={},this.collisionGroups=new Ha(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const p=this.terrain;return p?(x,w)=>p.getElevation(s,x,w):null}getBucketParts(s,p,x,w){const T=x.getBucket(p),P=x.latestFeatureIndex;if(!T||!P||p.id!==T.layerIds[0])return;const O=x.collisionBoxArray,F=T.layers[0].layout,G=T.layers[0].paint,Y=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),ne=x.tileSize/a.$,ee=x.tileID.toUnwrapped(),ce=F.get("text-rotation-alignment")==="map",ye=a.aC(x,1,this.transform.zoom),Se=a.aD(this.collisionIndex.transform,x,G.get("text-translate"),G.get("text-translate-anchor")),we=a.aD(this.collisionIndex.transform,x,G.get("icon-translate"),G.get("icon-translate-anchor")),Te=Bn(ce,this.transform,ye);this.retainedQueryData[T.bucketInstanceId]=new Ea(T.bucketInstanceId,P,T.sourceLayerIndex,T.index,x.tileID);const ze={bucket:T,layout:F,translationText:Se,translationIcon:we,unwrappedTileID:ee,pitchedLabelPlaneMatrix:Te,scale:Y,textPixelRatio:ne,holdingForFade:x.holdingForSymbolFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:a.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(w)for(const Le of T.sortKeyRanges){const{sortKey:Oe,symbolInstanceStart:qe,symbolInstanceEnd:Ke}=Le;s.push({sortKey:Oe,symbolInstanceStart:qe,symbolInstanceEnd:Ke,parameters:ze})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:ze})}attemptAnchorPlacement(s,p,x,w,T,P,O,F,G,Y,ne,ee,ce,ye,Se,we,Te,ze,Le,Oe){const qe=a.aE[s.textAnchor],Ke=[s.textOffset0,s.textOffset1],Fe=ha(qe,x,w,Ke,T),it=this.collisionIndex.placeCollisionBox(p,ee,F,G,Y,O,P,we,ne.predicate,Le,Fe,Oe);if((!ze||this.collisionIndex.placeCollisionBox(ze,ee,F,G,Y,O,P,Te,ne.predicate,Le,Fe,Oe).placeable)&&it.placeable){let kt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ce.crossTileID]&&this.prevPlacement.placements[ce.crossTileID]&&this.prevPlacement.placements[ce.crossTileID].text&&(kt=this.prevPlacement.variableOffsets[ce.crossTileID].anchor),ce.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ce.crossTileID]={textOffset:Ke,width:x,height:w,anchor:qe,textBoxScale:T,prevAnchor:kt},this.markUsedJustification(ye,qe,ce,Se),ye.allowVerticalPlacement&&(this.markUsedOrientation(ye,Se,ce),this.placedOrientations[ce.crossTileID]=Se),{shift:Fe,placedGlyphBoxes:it}}}placeLayerBucketPart(s,p,x){const{bucket:w,layout:T,translationText:P,translationIcon:O,unwrappedTileID:F,pitchedLabelPlaneMatrix:G,textPixelRatio:Y,holdingForFade:ne,collisionBoxArray:ee,partiallyEvaluatedTextSize:ce,collisionGroup:ye}=s.parameters,Se=T.get("text-optional"),we=T.get("icon-optional"),Te=a.aF(T,"text-overlap","text-allow-overlap"),ze=Te==="always",Le=a.aF(T,"icon-overlap","icon-allow-overlap"),Oe=Le==="always",qe=T.get("text-rotation-alignment")==="map",Ke=T.get("text-pitch-alignment")==="map",Fe=T.get("icon-text-fit")!=="none",it=T.get("symbol-z-order")==="viewport-y",kt=ze&&(Oe||!w.hasIconData()||we),yt=Oe&&(ze||!w.hasTextData()||Se);!w.collisionArrays&&ee&&w.deserializeCollisionBoxes(ee);const _t=this.retainedQueryData[w.bucketInstanceId].tileID,bt=this._getTerrainElevationFunc(_t),sn=this.transform.getFastPathSimpleProjectionMatrix(_t),rn=(Yt,Mn,ni)=>{var Li,Bi;if(p[Yt.crossTileID])return;if(ne)return void(this.placements[Yt.crossTileID]=new gl(!1,!1,!1));let Ji=!1,ks=!1,is=!0,gi=null,as={box:null,placeable:!1,offscreen:null,occluded:!1},er={placeable:!1},Bs=null,Vs=null,yr=null,Al=0,so=0,ic=0;Mn.textFeatureIndex?Al=Mn.textFeatureIndex:Yt.useRuntimeCollisionCircles&&(Al=Yt.featureIndex),Mn.verticalTextFeatureIndex&&(so=Mn.verticalTextFeatureIndex);const ro=Mn.textBox;if(ro){const Br=Ds=>{let Ki=a.ao.horizontal;if(w.allowVerticalPlacement&&!Ds&&this.prevPlacement){const Us=this.prevPlacement.placedOrientations[Yt.crossTileID];Us&&(this.placedOrientations[Yt.crossTileID]=Us,Ki=Us,this.markUsedOrientation(w,Ki,Yt))}return Ki},Po=(Ds,Ki)=>{if(w.allowVerticalPlacement&&Yt.numVerticalGlyphVertices>0&&Mn.verticalTextBox){for(const Us of w.writingModes)if(Us===a.ao.vertical?(as=Ki(),er=as):as=Ds(),as&&as.placeable)break}else as=Ds()},Ro=Yt.textAnchorOffsetStartIndex,xr=Yt.textAnchorOffsetEndIndex;if(xr===Ro){const Ds=(Ki,Us)=>{const xs=this.collisionIndex.placeCollisionBox(Ki,Te,Y,_t,F,Ke,qe,P,ye.predicate,bt,void 0,sn);return xs&&xs.placeable&&(this.markUsedOrientation(w,Us,Yt),this.placedOrientations[Yt.crossTileID]=Us),xs};Po(()=>Ds(ro,a.ao.horizontal),()=>{const Ki=Mn.verticalTextBox;return w.allowVerticalPlacement&&Yt.numVerticalGlyphVertices>0&&Ki?Ds(Ki,a.ao.vertical):{box:null,offscreen:null}}),Br(as&&as.placeable)}else{let Ds=a.aE[(Bi=(Li=this.prevPlacement)===null||Li===void 0?void 0:Li.variableOffsets[Yt.crossTileID])===null||Bi===void 0?void 0:Bi.anchor];const Ki=(xs,tf,ao)=>{const ia=xs.x2-xs.x1,os=xs.y2-xs.y1,va=Yt.textBoxScale,Ko=Fe&&Le==="never"?tf:null;let Qo=null,nf=Te==="never"?1:2,sf="never";Ds&&nf++;for(let wa=0;wa<nf;wa++){for(let Yu=Ro;Yu<xr;Yu++){const rf=w.textAnchorOffsets.get(Yu);if(Ds&&rf.textAnchor!==Ds)continue;const Xu=this.attemptAnchorPlacement(rf,xs,ia,os,va,qe,Ke,Y,_t,F,ye,sf,Yt,w,ao,P,O,Ko,bt);if(Xu&&(Qo=Xu.placedGlyphBoxes,Qo&&Qo.placeable))return Ji=!0,gi=Xu.shift,Qo}Ds?Ds=null:sf=Te}return x&&!Qo&&(Qo={box:this.collisionIndex.placeCollisionBox(ro,"always",Y,_t,F,Ke,qe,P,ye.predicate,bt,void 0,sn).box,offscreen:!1,placeable:!1,occluded:!1}),Qo};Po(()=>Ki(ro,Mn.iconBox,a.ao.horizontal),()=>{const xs=Mn.verticalTextBox;return w.allowVerticalPlacement&&(!as||!as.placeable)&&Yt.numVerticalGlyphVertices>0&&xs?Ki(xs,Mn.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}}),as&&(Ji=as.placeable,is=as.offscreen);const Us=Br(as&&as.placeable);if(!Ji&&this.prevPlacement){const xs=this.prevPlacement.variableOffsets[Yt.crossTileID];xs&&(this.variableOffsets[Yt.crossTileID]=xs,this.markUsedJustification(w,xs.anchor,Yt,Us))}}}if(Bs=as,Ji=Bs&&Bs.placeable,is=Bs&&Bs.offscreen,Yt.useRuntimeCollisionCircles&&Yt.centerJustifiedTextSymbolIndex>=0){const Br=w.text.placedSymbolArray.get(Yt.centerJustifiedTextSymbolIndex),Po=a.ap(w.textSizeData,ce,Br),Ro=T.get("text-padding");Vs=this.collisionIndex.placeCollisionCircles(Te,Br,w.lineVertexArray,w.glyphOffsetArray,Po,F,G,x,Ke,ye.predicate,Yt.collisionCircleDiameter,Ro,P,bt),Vs.circles.length&&Vs.collisionDetected&&!x&&a.w("Collisions detected, but collision boxes are not shown"),Ji=ze||Vs.circles.length>0&&!Vs.collisionDetected,is=is&&Vs.offscreen}if(Mn.iconFeatureIndex&&(ic=Mn.iconFeatureIndex),Mn.iconBox){const Br=Po=>this.collisionIndex.placeCollisionBox(Po,Le,Y,_t,F,Ke,qe,O,ye.predicate,bt,Fe&&gi?gi:void 0,sn);er&&er.placeable&&Mn.verticalIconBox?(yr=Br(Mn.verticalIconBox),ks=yr.placeable):(yr=Br(Mn.iconBox),ks=yr.placeable),is=is&&yr.offscreen}const sc=Se||Yt.numHorizontalGlyphVertices===0&&Yt.numVerticalGlyphVertices===0,Pl=we||Yt.numIconVertices===0;sc||Pl?Pl?sc||(ks=ks&&Ji):Ji=ks&&Ji:ks=Ji=ks&&Ji;const Fa=ks&&yr.placeable;if(Ji&&Bs.placeable&&this.collisionIndex.insertCollisionBox(Bs.box,Te,T.get("text-ignore-placement"),w.bucketInstanceId,er&&er.placeable&&so?so:Al,ye.ID),Fa&&this.collisionIndex.insertCollisionBox(yr.box,Le,T.get("icon-ignore-placement"),w.bucketInstanceId,ic,ye.ID),Vs&&Ji&&this.collisionIndex.insertCollisionCircles(Vs.circles,Te,T.get("text-ignore-placement"),w.bucketInstanceId,Al,ye.ID),x&&this.storeCollisionData(w.bucketInstanceId,ni,Mn,Bs,yr,Vs),Yt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Yt.crossTileID]=new gl((Ji||kt)&&!(Bs!=null&&Bs.occluded),(ks||yt)&&!(yr!=null&&yr.occluded),is||w.justReloaded),p[Yt.crossTileID]=!0};if(it){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Yt=w.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Mn=Yt.length-1;Mn>=0;--Mn){const ni=Yt[Mn];rn(w.symbolInstances.get(ni),w.collisionArrays[ni],ni)}}else for(let Yt=s.symbolInstanceStart;Yt<s.symbolInstanceEnd;Yt++)rn(w.symbolInstances.get(Yt),w.collisionArrays[Yt],Yt);w.justReloaded=!1}storeCollisionData(s,p,x,w,T,P){if(x.textBox||x.iconBox){let O,F;this.collisionBoxArrays.has(s)?O=this.collisionBoxArrays.get(s):(O=new Map,this.collisionBoxArrays.set(s,O)),O.has(p)?F=O.get(p):(F={text:null,icon:null},O.set(p,F)),x.textBox&&(F.text=w.box),x.iconBox&&(F.icon=T.box)}if(P){let O=this.collisionCircleArrays[s];O===void 0&&(O=this.collisionCircleArrays[s]=[]);for(let F=0;F<P.circles.length;F+=4)O.push(P.circles[F+0]-Di),O.push(P.circles[F+1]-Di),O.push(P.circles[F+2]),O.push(P.collisionDetected?1:0)}}markUsedJustification(s,p,x,w){let T;T=w===a.ao.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[a.aG(p)];const P=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];for(const O of P)O>=0&&(s.text.placedSymbolArray.get(O).crossTileID=T>=0&&O!==T?0:x.crossTileID)}markUsedOrientation(s,p,x){const w=p===a.ao.horizontal||p===a.ao.horizontalOnly?p:0,T=p===a.ao.vertical?p:0,P=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];for(const O of P)s.text.placedSymbolArray.get(O).placedOrientation=w;x.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let x=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const w=p?p.symbolFadeChange(s):1,T=p?p.opacities:{},P=p?p.variableOffsets:{},O=p?p.placedOrientations:{};for(const F in this.placements){const G=this.placements[F],Y=T[F];Y?(this.opacities[F]=new ml(Y,w,G.text,G.icon),x=x||G.text!==Y.text.placed||G.icon!==Y.icon.placed):(this.opacities[F]=new ml(null,w,G.text,G.icon,G.skipFade),x=x||G.text||G.icon)}for(const F in T){const G=T[F];if(!this.opacities[F]){const Y=new ml(G,w,!1,!1);Y.isHidden()||(this.opacities[F]=Y,x=x||G.text.placed||G.icon.placed)}}for(const F in P)this.variableOffsets[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.variableOffsets[F]=P[F]);for(const F in O)this.placedOrientations[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.placedOrientations[F]=O[F]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");x?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:s)}updateLayerOpacities(s,p){const x={};for(const w of p){const T=w.getBucket(s);T&&w.latestFeatureIndex&&s.id===T.layerIds[0]&&this.updateBucketOpacities(T,w.tileID,x,w.collisionBoxArray)}}updateBucketOpacities(s,p,x,w){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const T=s.layers[0],P=T.layout,O=new ml(null,0,!1,!1,!0),F=P.get("text-allow-overlap"),G=P.get("icon-allow-overlap"),Y=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ne=P.get("text-rotation-alignment")==="map",ee=P.get("text-pitch-alignment")==="map",ce=P.get("icon-text-fit")!=="none",ye=new ml(null,0,F&&(G||!s.hasIconData()||P.get("icon-optional")),G&&(F||!s.hasTextData()||P.get("text-optional")),!0);!s.collisionArrays&&w&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(w);const Se=(Te,ze,Le)=>{for(let Oe=0;Oe<ze/4;Oe++)Te.opacityVertexArray.emplaceBack(Le);Te.hasVisibleVertices=Te.hasVisibleVertices||Le!==vo},we=this.collisionBoxArrays.get(s.bucketInstanceId);for(let Te=0;Te<s.symbolInstances.length;Te++){const ze=s.symbolInstances.get(Te),{numHorizontalGlyphVertices:Le,numVerticalGlyphVertices:Oe,crossTileID:qe}=ze;let Ke=this.opacities[qe];x[qe]?Ke=O:Ke||(Ke=ye,this.opacities[qe]=Ke),x[qe]=!0;const Fe=ze.numIconVertices>0,it=this.placedOrientations[ze.crossTileID],kt=it===a.ao.vertical,yt=it===a.ao.horizontal||it===a.ao.horizontalOnly;if(Le>0||Oe>0){const bt=Dr(Ke.text);Se(s.text,Le,kt?vo:bt),Se(s.text,Oe,yt?vo:bt);const sn=Ke.text.isHidden();[ze.rightJustifiedTextSymbolIndex,ze.centerJustifiedTextSymbolIndex,ze.leftJustifiedTextSymbolIndex].forEach(Mn=>{Mn>=0&&(s.text.placedSymbolArray.get(Mn).hidden=sn||kt?1:0)}),ze.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(ze.verticalPlacedTextSymbolIndex).hidden=sn||yt?1:0);const rn=this.variableOffsets[ze.crossTileID];rn&&this.markUsedJustification(s,rn.anchor,ze,it);const Yt=this.placedOrientations[ze.crossTileID];Yt&&(this.markUsedJustification(s,"left",ze,Yt),this.markUsedOrientation(s,Yt,ze))}if(Fe){const bt=Dr(Ke.icon),sn=!(ce&&ze.verticalPlacedIconSymbolIndex&&kt);ze.placedIconSymbolIndex>=0&&(Se(s.icon,ze.numIconVertices,sn?bt:vo),s.icon.placedSymbolArray.get(ze.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),ze.verticalPlacedIconSymbolIndex>=0&&(Se(s.icon,ze.numVerticalIconVertices,sn?vo:bt),s.icon.placedSymbolArray.get(ze.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}const _t=we&&we.has(Te)?we.get(Te):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const bt=s.collisionArrays[Te];if(bt){let sn=new a.P(0,0);if(bt.textBox||bt.verticalTextBox){let rn=!0;if(Y){const Yt=this.variableOffsets[qe];Yt?(sn=ha(Yt.anchor,Yt.width,Yt.height,Yt.textOffset,Yt.textBoxScale),ne&&sn._rotate(ee?-this.transform.bearingInRadians:this.transform.bearingInRadians)):rn=!1}if(bt.textBox||bt.verticalTextBox){let Yt;bt.textBox&&(Yt=kt),bt.verticalTextBox&&(Yt=yt),Cu(s.textCollisionBox.collisionVertexArray,Ke.text.placed,!rn||Yt,_t.text,sn.x,sn.y)}}if(bt.iconBox||bt.verticalIconBox){const rn=!!(!yt&&bt.verticalIconBox);let Yt;bt.iconBox&&(Yt=rn),bt.verticalIconBox&&(Yt=!rn),Cu(s.iconCollisionBox.collisionVertexArray,Ke.icon.placed,Yt,_t.icon,ce?sn.x:0,ce?sn.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,p){const x=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*x>s}setStale(){this.stale=!0}}function Cu(j,s,p,x,w,T){x&&x.length!==0||(x=[0,0,0,0]);const P=x[0]-Di,O=x[1]-Di,F=x[2]-Di,G=x[3]-Di;j.emplaceBack(s?1:0,p?1:0,w||0,T||0,P,O),j.emplaceBack(s?1:0,p?1:0,w||0,T||0,F,O),j.emplaceBack(s?1:0,p?1:0,w||0,T||0,F,G),j.emplaceBack(s?1:0,p?1:0,w||0,T||0,P,G)}const Jr=Math.pow(2,25),yl=Math.pow(2,24),jd=Math.pow(2,17),Sc=Math.pow(2,16),Bo=Math.pow(2,9),jc=Math.pow(2,8),Rh=Math.pow(2,1);function Dr(j){if(j.opacity===0&&!j.placed)return 0;if(j.opacity===1&&j.placed)return 4294967295;const s=j.placed?1:0,p=Math.floor(127*j.opacity);return p*Jr+s*yl+p*jd+s*Sc+p*Bo+s*jc+p*Rh+s}const vo=0;class Tu{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,p,x,w,T){const P=this._bucketParts;for(;this._currentTileIndex<s.length;)if(p.getBucketParts(P,w,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((O,F)=>O.sortKey-F.sortKey));this._currentPartIndex<P.length;)if(p.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,T())return!0;return!1}}class ku{constructor(s,p,x,w,T,P,O,F){this.placement=new Ph(s,p,P,O,F),this._currentPlacementIndex=x.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(s,p,x){const w=A.now(),T=()=>!this._forceFullPlacement&&A.now()-w>2;for(;this._currentPlacementIndex>=0;){const P=p[s[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=O)&&(!P.maxzoom||P.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new Tu(P)),this._inProgressLayer.continuePlacement(x[P.source],this.placement,this._showCollisionBoxes,P,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const ea=512/a.$/2;class xl{constructor(s,p,x){this.tileID=s,this.bucketInstanceId=x,this._symbolsByKey={};const w=new Map;for(let T=0;T<p.length;T++){const P=p.get(T),O=P.key,F=w.get(O);F?F.push(P):w.set(O,[P])}for(const[T,P]of w){const O={positions:P.map(F=>({x:Math.floor(F.anchorX*ea),y:Math.floor(F.anchorY*ea)})),crossTileIDs:P.map(F=>F.crossTileID)};if(O.positions.length>128){const F=new a.aI(O.positions.length,16,Uint16Array);for(const{x:G,y:Y}of O.positions)F.add(G,Y);F.finish(),delete O.positions,O.index=F}this._symbolsByKey[T]=O}}getScaledCoordinates(s,p){const{x,y:w,z:T}=this.tileID.canonical,{x:P,y:O,z:F}=p.canonical,G=ea/Math.pow(2,F-T),Y=(O*a.$+s.anchorY)*G,ne=w*a.$*ea;return{x:Math.floor((P*a.$+s.anchorX)*G-x*a.$*ea),y:Math.floor(Y-ne)}}findMatches(s,p,x){const w=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let T=0;T<s.length;T++){const P=s.get(T);if(P.crossTileID)continue;const O=this._symbolsByKey[P.key];if(!O)continue;const F=this.getScaledCoordinates(P,p);if(O.index){const G=O.index.range(F.x-w,F.y-w,F.x+w,F.y+w).sort();for(const Y of G){const ne=O.crossTileIDs[Y];if(!x[ne]){x[ne]=!0,P.crossTileID=ne;break}}}else if(O.positions)for(let G=0;G<O.positions.length;G++){const Y=O.positions[G],ne=O.crossTileIDs[G];if(Math.abs(Y.x-F.x)<=w&&Math.abs(Y.y-F.y)<=w&&!x[ne]){x[ne]=!0,P.crossTileID=ne;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Cd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const p=Math.round((s-this.lng)/360);if(p!==0)for(const x in this.indexes){const w=this.indexes[x],T={};for(const P in w){const O=w[P];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+p),T[O.tileID.key]=O}this.indexes[x]=T}this.lng=s}addBucket(s,p,x){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let T=0;T<p.symbolInstances.length;T++)p.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const w=this.usedCrossTileIDs[s.overscaledZ];for(const T in this.indexes){const P=this.indexes[T];if(Number(T)>s.overscaledZ)for(const O in P){const F=P[O];F.tileID.isChildOf(s)&&F.findMatches(p.symbolInstances,s,w)}else{const O=P[s.scaledTo(Number(T)).key];O&&O.findMatches(p.symbolInstances,s,w)}}for(let T=0;T<p.symbolInstances.length;T++){const P=p.symbolInstances.get(T);P.crossTileID||(P.crossTileID=x.generate(),w[P.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new xl(s,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(s,p){for(const x of p.getCrossTileIDsLists())for(const w of x)delete this.usedCrossTileIDs[s][w]}removeStaleBuckets(s){let p=!1;for(const x in this.indexes){const w=this.indexes[x];for(const T in w)s[w[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,w[T]),delete w[T],p=!0)}return p}}class Vl{constructor(){this.layerIndexes={},this.crossTileIDs=new Cd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,p,x){let w=this.layerIndexes[s.id];w===void 0&&(w=this.layerIndexes[s.id]=new qa);let T=!1;const P={};w.handleWrapJump(x);for(const O of p){const F=O.getBucket(s);F&&s.id===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(O.tileID,F,this.crossTileIDs)&&(T=!0),P[F.bucketInstanceId]=!0)}return w.removeStaleBuckets(P)&&(T=!0),T}pruneUnusedLayers(s){const p={};s.forEach(x=>{p[x]=!0});for(const x in this.layerIndexes)p[x]||delete this.layerIndexes[x]}}var Eu="void main() {fragColor=vec4(1.0);}";const or={prelude:ci(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ci("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ci("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ci(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ci(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ci(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ci(Eu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ci(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ci(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ci("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ci("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:ci("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ci(Eu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ci(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ci(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ci(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ci(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ci(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ci(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ci(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ci(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ci(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:ci(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:ci(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ci(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ci(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ci(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ci("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ci("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ci("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ci("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ci(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ci("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ci(j,s){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=s.match(/in ([\w]+) ([\w]+)/g),w=j.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=T?T.concat(w):w,O={};return{fragmentSource:j=j.replace(p,(F,G,Y,ne,ee)=>(O[ee]=!0,G==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
in ${Y} ${ne} ${ee};
#else
uniform ${Y} ${ne} u_${ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ee}
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`)),vertexSource:s=s.replace(p,(F,G,Y,ne,ee)=>{const ce=ne==="float"?"vec2":"vec4",ye=ee.match(/color/)?"color":ce;return O[ee]?G==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${Y} ${ce} a_${ee};
out ${Y} ${ne} ${ee};
#else
uniform ${Y} ${ne} u_${ee};
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${ye}(a_${ee}, u_${ee}_t);
#else
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`:G==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${Y} ${ce} a_${ee};
#else
uniform ${Y} ${ne} u_${ee};
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${Y} ${ne} ${ee} = a_${ee};
#else
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${Y} ${ne} ${ee} = unpack_mix_${ye}(a_${ee}, u_${ee}_t);
#else
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`}),staticAttributes:x,staticUniforms:P}}class wo{constructor(s,p,x){this.vertexBuffer=s,this.indexBuffer=p,this.segments=x}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Sr=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const Ga="#define PROJECTION_MERCATOR",ui="mercator";class So{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ui}get shaderDefine(){return Ga}get shaderPreludeCode(){return or.projectionMercator}get vertexShaderPreludeCode(){return or.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,p,x,w,T){if(this._cachedMesh)return this._cachedMesh;const P=new a.aL;P.emplaceBack(0,0),P.emplaceBack(a.$,0),P.emplaceBack(0,a.$),P.emplaceBack(a.$,a.$);const O=s.createVertexBuffer(P,Sr.members),F=a.aM.simpleSegment(0,0,4,2),G=new a.aN;G.emplaceBack(1,0,2),G.emplaceBack(1,2,3);const Y=s.createIndexBuffer(G);return this._cachedMesh=new wo(O,Y,F),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class Ma{constructor(s=0,p=0,x=0,w=0){if(isNaN(s)||s<0||isNaN(p)||p<0||isNaN(x)||x<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=p,this.left=x,this.right=w}interpolate(s,p,x){return p.top!=null&&s.top!=null&&(this.top=a.C.number(s.top,p.top,x)),p.bottom!=null&&s.bottom!=null&&(this.bottom=a.C.number(s.bottom,p.bottom,x)),p.left!=null&&s.left!=null&&(this.left=a.C.number(s.left,p.left,x)),p.right!=null&&s.right!=null&&(this.right=a.C.number(s.right,p.right,x)),this}getCenter(s,p){const x=a.ah((this.left+s-this.right)/2,0,s),w=a.ah((this.top+p-this.bottom)/2,0,p);return new a.P(x,w)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Ma(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Na(j,s){if(!j.renderWorldCopies||j.lngRange)return;const p=s.lng-j.center.lng;s.lng+=p>180?-360:p<-180?360:0}function fr(j){return Math.max(0,Math.floor(j))}class Ns{constructor(s,p,x,w,T,P){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=P===void 0||!!P,this._minZoom=p||0,this._maxZoom=x||22,this._minPitch=w==null?0:w,this._maxPitch=T==null?60:T,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=fr(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ma,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,p,x){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=fr(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new Ma(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!x&&s.autoCalculateNearFarZ,p&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const p=a.aO(s,-180,180)*Math.PI/180;var x,w,T,P,O,F,G,Y,ne;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=_(),x=this._rotationMatrix,T=-this._bearingInRadians,P=(w=this._rotationMatrix)[0],O=w[1],F=w[2],G=w[3],Y=Math.sin(T),ne=Math.cos(T),x[0]=P*ne+F*Y,x[1]=O*ne+G*Y,x[2]=P*-Y+F*ne,x[3]=O*-Y+G*ne)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const p=a.ah(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const p=s/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(s){s=a.ah(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=a.ae(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const p=this.getConstrained(this._center,s).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=a.af(p),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,p){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,p,x){this._unmodified=!1,this._edgeInsets.interpolate(s,p,x),this._constrain(),this._calcMatrices()}resize(s,p,x=!0){this._width=s,this._height=p,x&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ot([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(s,p){return this._callbacks.getConstrained(s,p)}getCameraQueryGeometry(s,p){if(p.length===1)return[p[0],s];{const{minX:x,minY:w,maxX:T,maxY:P}=a.a2.fromPoints(p).extend(s);return[new a.P(x,w),new a.P(T,w),new a.P(T,P),new a.P(x,P),new a.P(x,w)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:p,zoom:x}=this.getConstrained(this.center,this.zoom);this.setCenter(p),this.setZoom(x),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=a.ag(new Float64Array(16));a.N(s,s,[this._width/2,-this._height/2,1]),a.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=a.ag(new Float64Array(16)),a.N(s,s,[1,-1,1]),a.M(s,s,[-1,-1,0]),a.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,p,x,w){const T=x!==void 0?x:this.bearing,P=w=w!==void 0?w:this.pitch,O=a.a1.fromLngLat(s,p),F=-Math.cos(a.ae(P)),G=Math.sin(a.ae(P)),Y=G*Math.sin(a.ae(T)),ne=-G*Math.cos(a.ae(T));let ee=this.elevation;const ce=p-ee;let ye;F*ce>=0||Math.abs(F)<.1?(ye=1e4,ee=p+ye*F):ye=-ce/F;let Se,we,Te=a.aQ(1,O.y),ze=0;do{if(ze+=1,ze>10)break;we=ye/Te,Se=new a.a1(O.x+Y*we,O.y+ne*we),Te=1/Se.meterInMercatorCoordinateUnits()}while(Math.abs(ye-we*Te)>1e-12);return{center:Se.toLngLat(),elevation:ee,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/we/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const p=a.aj(1,this.center.lat)*this.worldSize,x=this.cameraToCenterDistance/p,w=a.a1.fromLngLat(this.center,this.elevation),T=jt(this.center,this.elevation,this.pitch,this.bearing,x);this._elevation=s;const P=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),a.aQ(T.z,w.y),this.bearing,this.pitch);this._elevation=P.elevation,this._center=P.center,this.setZoom(P.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=a.aj(1,this.center.lat)*this.worldSize;return jt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const p=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/p,s.canonical.y/p,1/p/a.$,1/p/a.$]}}class Fs{constructor(s,p){this.min=s,this.max=p,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(s){const p=[s%2==0,s<2],x=a.aT(this.min),w=a.aT(this.max);for(let T=0;T<p.length;T++)x[T]=p[T]?this.min[T]:this.center[T],w[T]=p[T]?this.center[T]:this.max[T];return w[2]=this.max[2],new Fs(x,w)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let p=!0;for(let x=0;x<s.planes.length;x++){const w=this.intersectsPlane(s.planes[x]);if(w===0)return 0;w===1&&(p=!1)}return p?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let p=s[3],x=s[3];for(let w=0;w<3;w++)s[w]>0?(p+=s[w]*this.min[w],x+=s[w]*this.max[w]):(x+=s[w]*this.min[w],p+=s[w]*this.max[w]);return p>=0?2:x<0?0:1}}class Ss{distanceToTile2d(s,p,x,w){const T=w.distanceX([s,p]),P=w.distanceY([s,p]);return Math.hypot(T,P)}getWrap(s,p,x){return x}getTileBoundingVolume(s,p,x,w){var T,P;let O=0,F=0;if(w!=null&&w.terrain){const Y=new a.Z(s.z,p,s.z,s.x,s.y),ne=w.terrain.getMinMaxElevation(Y);O=(T=ne.minElevation)!==null&&T!==void 0?T:Math.min(0,x),F=(P=ne.maxElevation)!==null&&P!==void 0?P:Math.max(0,x)}const G=1<<s.z;return new Fs([p+s.x/G,s.y/G,O],[p+(s.x+1)/G,(s.y+1)/G,F])}allowVariableZoom(s,p){const x=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,w=a.ah(78.5-x/2,0,60);return!!p.terrain||s.pitch>w}allowWorldCopies(){return!0}prepareNextFrame(){}}class vi{constructor(s,p,x){this.points=s,this.planes=p,this.aabb=x}static fromInvProjectionMatrix(s,p=1,x=0,w,T){const P=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,x),F=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ee=>function(ce,ye,Se,we){const Te=a.aw([],ce,ye),ze=1/Te[3]/Se*we;return a.aY(Te,Te,[ze,ze,1/Te[3],ze])}(ee,s,p,O));w&&function(ee,ce,ye,Se){const we=Se?4:0,Te=Se?0:4;let ze=0;const Le=[],Oe=[];for(let Fe=0;Fe<4;Fe++){const it=a.aU([],ee[Fe+Te],ee[Fe+we]),kt=a.aZ(it);a.aR(it,it,1/kt),Le.push(kt),Oe.push(it)}for(let Fe=0;Fe<4;Fe++){const it=a.a_(ee[Fe+we],Oe[Fe],ye);ze=it!==null&&it>=0?Math.max(ze,it):Math.max(ze,Le[Fe])}const qe=function(Fe,it){const kt=a.aU([],Fe[it[0]],Fe[it[1]]),yt=a.aU([],Fe[it[2]],Fe[it[1]]),_t=[0,0,0,0];return a.aV(_t,a.aW([],kt,yt)),_t[3]=-a.aX(_t,Fe[it[0]]),_t}(ee,ce),Ke=function(Fe,it){const kt=a.a$(Fe),yt=a.b0([],Fe,1/kt),_t=a.aU([],it,a.aR([],yt,a.aX(it,yt))),bt=a.a$(_t);if(bt>0){const sn=Math.sqrt(1-yt[3]*yt[3]),rn=a.aR([],yt,-yt[3]),Yt=a.aS([],rn,a.aR([],_t,sn/bt));return a.b1(it,Yt)}return null}(ye,qe);if(Ke!==null){const Fe=Ke/a.aX(Oe[0],qe);ze=Math.min(ze,Fe)}for(let Fe=0;Fe<4;Fe++){const it=Math.min(ze,Le[Fe]);ee[Fe+Te]=[ee[Fe+we][0]+Oe[Fe][0]*it,ee[Fe+we][1]+Oe[Fe][1]*it,ee[Fe+we][2]+Oe[Fe][2]*it,1]}}(F,P[0],w,T);const G=P.map(ee=>{const ce=a.aU([],F[ee[0]],F[ee[1]]),ye=a.aU([],F[ee[2]],F[ee[1]]),Se=a.aV([],a.aW([],ce,ye)),we=-a.aX(Se,F[ee[1]]);return Se.concat(we)}),Y=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ne=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ee of F)for(let ce=0;ce<3;ce++)Y[ce]=Math.min(Y[ce],ee[ce]),ne[ce]=Math.max(ne[ce],ee[ce]);return new vi(F,G,new Fs(Y,ne))}}class jo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,p,x){return this._helper.interpolatePadding(s,p,x)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,p,x=!0){this._helper.resize(s,p,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,p){this._helper.overrideNearFarZ(s,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,p){}constructor(s,p,x,w,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ns({calcMatrices:()=>{this._calcMatrices()},getConstrained:(P,O)=>this.getConstrained(P,O)},s,p,x,w,T),this._coveringTilesDetailsProvider=new Ss}clone(){const s=new jo;return s.apply(this),s}apply(s,p,x){this._helper.apply(s,p,x)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const p=[new a.b2(0,s)];if(this._helper._renderWorldCopies){const x=this.screenPointToMercatorCoordinate(new a.P(0,0)),w=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),P=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),O=Math.floor(Math.min(x.x,w.x,T.x,P.x)),F=Math.floor(Math.max(x.x,w.x,T.x,P.x)),G=1;for(let Y=O-G;Y<=F+G;Y++)Y!==0&&p.push(new a.b2(Y,s))}return p}getCameraFrustum(){return vi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const p=this.screenPointToLocation(this.centerPoint,s),x=s?s.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(x)}setLocationAtPoint(s,p){const x=a.aj(this.elevation,this.center.lat),w=this.screenPointToMercatorCoordinateAtZ(p,x),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,x),P=a.a1.fromLngLat(s),O=new a.a1(P.x-(w.x-T.x),P.y-(w.y-T.y));this.setCenter(O==null?void 0:O.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,p){return p?this.coordinatePoint(a.a1.fromLngLat(s),p.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(s))}screenPointToLocation(s,p){var x;return(x=this.screenPointToMercatorCoordinate(s,p))===null||x===void 0?void 0:x.toLngLat()}screenPointToMercatorCoordinate(s,p){if(p){const x=p.pointCoordinate(s);if(x!=null)return x}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,p){const x=p||0,w=[s.x,s.y,0,1],T=[s.x,s.y,1,1];a.aw(w,w,this._pixelMatrixInverse),a.aw(T,T,this._pixelMatrixInverse);const P=w[3],O=T[3],F=w[1]/P,G=T[1]/O,Y=w[2]/P,ne=T[2]/O,ee=Y===ne?0:(x-Y)/(ne-Y);return new a.a1(a.C.number(w[0]/P,T[0]/O,ee)/this.worldSize,a.C.number(F,G,ee)/this.worldSize,x)}coordinatePoint(s,p=0,x=this._pixelMatrix){const w=[s.x*this.worldSize,s.y*this.worldSize,p,1];return a.aw(w,w,x),new a.P(w[0]/w[3],w[1]/w[3])}getBounds(){const s=Math.max(0,this._helper._height/2-nt(this));return new Ot().extend(this.screenPointToLocation(new a.P(0,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(s,p){return p?p.pointCoordinate(s)!=null:s.y>this.height/2-nt(this)}calculatePosMatrix(s,p=!1,x){var w;const T=(w=s.key)!==null&&w!==void 0?w:a.b3(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),P=p?this._alignedPosMatrixCache:this._posMatrixCache;if(P.has(T)){const G=P.get(T);return x?G.f32:G.f64}const O=Je(s,this.worldSize);a.O(O,p?this._alignedProjMatrix:this._viewProjMatrix,O);const F={f64:O,f32:new Float32Array(O)};return P.set(T,F),x?F.f32:F.f64}calculateFogMatrix(s){const p=s.key,x=this._fogMatrixCacheF32;if(x.has(p))return x.get(p);const w=Je(s,this.worldSize);return a.O(w,this._fogMatrix,w),x.set(p,new Float32Array(w)),x.get(p)}getConstrained(s,p){p=a.ah(+p,this.minZoom,this.maxZoom);const x={center:new a.S(s.lng,s.lat),zoom:p};let w=this._helper._lngRange;!this._helper._renderWorldCopies&&w===null&&(w=[-179.9999999999,179.9999999999]);const T=this.tileSize*a.af(x.zoom);let P=0,O=T,F=0,G=T,Y=0,ne=0;const{x:ee,y:ce}=this.size;if(this._helper._latRange){const Le=this._helper._latRange;P=a.U(Le[1])*T,O=a.U(Le[0])*T,O-P<ce&&(Y=ce/(O-P))}w&&(F=a.aO(a.V(w[0])*T,0,T),G=a.aO(a.V(w[1])*T,0,T),G<F&&(G+=T),G-F<ee&&(ne=ee/(G-F)));const{x:ye,y:Se}=Ae(T,s);let we,Te;const ze=Math.max(ne||0,Y||0);if(ze){const Le=new a.P(ne?(G+F)/2:ye,Y?(O+P)/2:Se);return x.center=J(T,Le).wrap(),x.zoom+=a.ak(ze),x}if(this._helper._latRange){const Le=ce/2;Se-Le<P&&(Te=P+Le),Se+Le>O&&(Te=O-Le)}if(w){const Le=(F+G)/2;let Oe=ye;this._helper._renderWorldCopies&&(Oe=a.aO(ye,Le-T/2,Le+T/2));const qe=ee/2;Oe-qe<F&&(we=F+qe),Oe+qe>G&&(we=G-qe)}if(we!==void 0||Te!==void 0){const Le=new a.P(we!=null?we:ye,Te!=null?Te:Se);x.center=J(T,Le).wrap()}return x}calculateCenterFromCameraLngLatAlt(s,p,x,w){return this._helper.calculateCenterFromCameraLngLatAlt(s,p,x,w)}_calculateNearFarZIfNeeded(s,p,x){if(!this._helper.autoCalculateNearFarZ)return;const w=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=s-w*this._helper._pixelPerMeter/Math.cos(p),P=w<0?T:s,O=Math.PI/2+this.pitchInRadians,F=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+x.y/this.height),G=Math.sin(F)*P/Math.sin(a.ah(Math.PI-O-F,.01,Math.PI-.01)),Y=nt(this),ne=Math.atan(Y/this._helper.cameraToCenterDistance),ee=a.ae(.75),ce=ne>ee?2*ne*(.5+x.y/(2*Y)):ee,ye=Math.sin(ce)*P/Math.sin(a.ah(Math.PI-O-ce,.01,Math.PI-.01)),Se=Math.min(G,ye);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*Se+P),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,p=Ae(this.worldSize,this.center),x=p.x,w=p.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const T=a.ae(Math.min(this.pitch,Ce)),P=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let O;this._calculateNearFarZIfNeeded(P,T,s),O=new Float64Array(16),a.b4(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,O),O[8]=2*-s.x/this._helper._width,O[9]=2*s.y/this._helper._height,this._projectionMatrix=a.b5(O),a.N(O,O,[1,-1,1]),a.M(O,O,[0,0,-this._helper.cameraToCenterDistance]),a.b6(O,O,-this.rollInRadians),a.b7(O,O,this.pitchInRadians),a.b6(O,O,-this.bearingInRadians),a.M(O,O,[-x,-w,0]),this._mercatorMatrix=a.N([],O,[this.worldSize,this.worldSize,this.worldSize]),a.N(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),a.M(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=a.aq([],O);const F=[0,0,-1,1];a.aw(F,F,this._invViewProjMatrix),this._cameraPosition=[F[0]/F[3],F[1]/F[3],F[2]/F[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,P,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-x,-w,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const G=this._helper._width%2/2,Y=this._helper._height%2/2,ne=Math.cos(this.bearingInRadians),ee=Math.sin(-this.bearingInRadians),ce=x-Math.round(x)+ne*G+ee*Y,ye=w-Math.round(w)+ne*Y+ee*G,Se=new Float64Array(O);if(a.M(Se,Se,[ce>.5?ce-1:ce,ye>.5?ye-1:ye,0]),this._alignedProjMatrix=Se,O=a.aq(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=[s.x*this.worldSize,s.y*this.worldSize,0,1];return a.aw(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=a.aj(1,this.center.lat)*this.worldSize;return jt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,p){const x=a.a1.fromLngLat(s),w=[x.x*this.worldSize,x.y*this.worldSize,p,1];return a.aw(w,w,this._viewProjMatrix),w[2]/w[3]}getProjectionData(s){const{overscaledTileID:p,aligned:x,applyTerrainMatrix:w}=s,T=this._helper.getMercatorTileCoordinates(p),P=p?this.calculatePosMatrix(p,x,!0):null;let O;return O=p&&p.terrainRttPosMatrix32f&&w?p.terrainRttPosMatrix32f:P||a.b8(),{mainMatrix:O,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,p,x){return 1}transformLightDirection(s){return a.aT(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,p,x,w){const T=this.calculatePosMatrix(x);let P;w?(P=[s,p,w(s,p),1],a.aw(P,P,T)):(P=[s,p,0,1],ka(P,P,T));const O=P[3];return{point:new a.P(P[0]/O,P[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(s){for(const p of s)this.calculatePosMatrix(p)}getMatrixForModel(s,p){const x=a.a1.fromLngLat(s,p),w=x.meterInMercatorCoordinateUnits(),T=a.b9();return a.M(T,T,[x.x,x.y,x.z]),a.b6(T,T,Math.PI),a.b7(T,T,Math.PI/2),a.N(T,T,[-w,w,w]),T}getProjectionDataForCustomLayer(s=!0){const p=new a.Z(0,0,0,0,0),x=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:s}),w=Je(p,this.worldSize);a.O(w,this._viewProjMatrix,w),x.tileMercatorCoords=[0,0,1,1];const T=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],P=a.ba();return a.N(P,w,T),x.fallbackMatrix=P,x.mainMatrix=P,x}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function Zs(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ys(j){if(j.useSlerp)if(j.k<1){const s=a.bb(j.startEulerAngles.roll,j.startEulerAngles.pitch,j.startEulerAngles.bearing),p=a.bb(j.endEulerAngles.roll,j.endEulerAngles.pitch,j.endEulerAngles.bearing),x=new Float64Array(4);a.bc(x,s,p,j.k);const w=a.bd(x);j.tr.setRoll(w.roll),j.tr.setPitch(w.pitch),j.tr.setBearing(w.bearing)}else j.tr.setRoll(j.endEulerAngles.roll),j.tr.setPitch(j.endEulerAngles.pitch),j.tr.setBearing(j.endEulerAngles.bearing);else j.tr.setRoll(a.C.number(j.startEulerAngles.roll,j.endEulerAngles.roll,j.k)),j.tr.setPitch(a.C.number(j.startEulerAngles.pitch,j.endEulerAngles.pitch,j.k)),j.tr.setBearing(a.C.number(j.startEulerAngles.bearing,j.endEulerAngles.bearing,j.k))}function rs(j,s,p,x,w){const T=w.padding,P=Ae(w.worldSize,p.getNorthWest()),O=Ae(w.worldSize,p.getNorthEast()),F=Ae(w.worldSize,p.getSouthEast()),G=Ae(w.worldSize,p.getSouthWest()),Y=a.ae(-x),ne=P.rotate(Y),ee=O.rotate(Y),ce=F.rotate(Y),ye=G.rotate(Y),Se=new a.P(Math.max(ne.x,ee.x,ye.x,ce.x),Math.max(ne.y,ee.y,ye.y,ce.y)),we=new a.P(Math.min(ne.x,ee.x,ye.x,ce.x),Math.min(ne.y,ee.y,ye.y,ce.y)),Te=Se.sub(we),ze=(w.width-(T.left+T.right+s.left+s.right))/Te.x,Le=(w.height-(T.top+T.bottom+s.top+s.bottom))/Te.y;if(Le<0||ze<0)return void Zs();const Oe=Math.min(a.ak(w.scale*Math.min(ze,Le)),j.maxZoom),qe=a.P.convert(j.offset),Ke=new a.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(a.ae(x)),Fe=qe.add(Ke).mult(w.scale/a.af(Oe));return{center:J(w.worldSize,P.add(F).div(2).sub(Fe)),zoom:Oe,bearing:x}}class Aa{get useGlobeControls(){return!1}handlePanInertia(s,p){const x=s.mag(),w=Math.abs(nt(p));return{easingOffset:s.mult(Math.min(.75*w/x,1)),easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(s,p){s.bearingDelta&&p.setBearing(p.bearing+s.bearingDelta),s.pitchDelta&&p.setPitch(p.pitch+s.pitchDelta),s.rollDelta&&p.setRoll(p.roll+s.rollDelta),s.zoomDelta&&p.setZoom(p.zoom+s.zoomDelta)}handleMapControlsPan(s,p,x){s.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(x,s.around)}cameraForBoxAndBearing(s,p,x,w,T){return rs(s,p,x,w,T)}handleJumpToCenterZoom(s,p){s.zoom!==(p.zoom!==void 0?+p.zoom:s.zoom)&&s.setZoom(+p.zoom),p.center!==void 0&&s.setCenter(a.S.convert(p.center))}handleEaseTo(s,p){const x=s.zoom,w=s.padding,T={roll:s.roll,pitch:s.pitch,bearing:s.bearing},P={roll:p.roll===void 0?s.roll:p.roll,pitch:p.pitch===void 0?s.pitch:p.pitch,bearing:p.bearing===void 0?s.bearing:p.bearing},O=p.zoom!==void 0,F=!s.isPaddingEqual(p.padding);let G=!1;const Y=O?+p.zoom:s.zoom;let ne=s.centerPoint.add(p.offsetAsPoint);const ee=s.screenPointToLocation(ne),{center:ce,zoom:ye}=s.getConstrained(a.S.convert(p.center||ee),Y!=null?Y:x);Na(s,ce);const Se=Ae(s.worldSize,ee),we=Ae(s.worldSize,ce).sub(Se),Te=a.af(ye-x);return G=ye!==x,{easeFunc:ze=>{if(G&&s.setZoom(a.C.number(x,ye,ze)),a.be(T,P)||ys({startEulerAngles:T,endEulerAngles:P,tr:s,k:ze,useSlerp:T.roll!=P.roll}),F&&(s.interpolatePadding(w,p.padding,ze),ne=s.centerPoint.add(p.offsetAsPoint)),p.around)s.setLocationAtPoint(p.around,p.aroundPoint);else{const Le=a.af(s.zoom-x),Oe=ye>x?Math.min(2,Te):Math.max(.5,Te),qe=Math.pow(Oe,1-ze),Ke=J(s.worldSize,Se.add(we.mult(ze*qe)).mult(Le));s.setLocationAtPoint(s.renderWorldCopies?Ke.wrap():Ke,ne)}},isZooming:G,elevationCenter:ce}}handleFlyTo(s,p){const x=p.zoom!==void 0,w=s.zoom,T=s.getConstrained(a.S.convert(p.center||p.locationAtOffset),x?+p.zoom:w),P=T.center,O=T.zoom;Na(s,P);const F=Ae(s.worldSize,p.locationAtOffset),G=Ae(s.worldSize,P).sub(F),Y=G.mag(),ne=a.af(O-w);let ee;if(p.minZoom!==void 0){const ce=Math.min(+p.minZoom,w,O),ye=s.getConstrained(P,ce).zoom;ee=a.af(ye-w)}return{easeFunc:(ce,ye,Se,we)=>{s.setZoom(ce===1?O:w+a.ak(ye));const Te=ce===1?P:J(s.worldSize,F.add(G.mult(Se)).mult(ye));s.setLocationAtPoint(s.renderWorldCopies?Te.wrap():Te,we)},scaleOfZoom:ne,targetCenter:P,scaleOfMinZoom:ee,pixelPathLength:Y}}}class Mi{constructor(s,p,x){this.blendFunction=s,this.blendColor=p,this.mask=x}}Mi.Replace=[1,0],Mi.disabled=new Mi(Mi.Replace,a.bf.transparent,[!1,!1,!1,!1]),Mi.unblended=new Mi(Mi.Replace,a.bf.transparent,[!0,!0,!0,!0]),Mi.alphaBlended=new Mi([1,771],a.bf.transparent,[!0,!0,!0,!0]);const Zi=2305;class di{constructor(s,p,x){this.enable=s,this.mode=p,this.frontFace=x}}di.disabled=new di(!1,1029,Zi),di.backCCW=new di(!0,1029,Zi),di.frontCCW=new di(!0,1028,Zi);class Kn{constructor(s,p,x){this.func=s,this.mask=p,this.range=x}}Kn.ReadOnly=!1,Kn.ReadWrite=!0,Kn.disabled=new Kn(519,Kn.ReadOnly,[0,1]);const Ys=7680;class Xn{constructor(s,p,x,w,T,P){this.test=s,this.ref=p,this.mask=x,this.fail=w,this.depthFail=T,this.pass=P}}Xn.disabled=new Xn({func:519,mask:0},0,0,Ys,Ys,Ys);const _l=new WeakMap;function As(j){var s;if(_l.has(j))return _l.get(j);{const p=(s=j.getParameter(j.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return _l.set(j,p),p}}class js{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const p=s.context,x=p.gl;this._texFormat=x.RGBA,this._texType=x.UNSIGNED_BYTE;const w=new a.aL;w.emplaceBack(-1,-1),w.emplaceBack(2,-1),w.emplaceBack(-1,2);const T=new a.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new wo(p.createVertexBuffer(w,Sr.members),p.createIndexBuffer(T),a.aM.simpleSegment(0,0,w.length,T.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(x.TEXTURE1);const P=x.createTexture();x.bindTexture(x.TEXTURE_2D,P),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texImage2D(x.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(P),As(x)&&(this._pbo=x.createBuffer(),x.bindBuffer(x.PIXEL_PACK_BUFFER,this._pbo),x.bufferData(x.PIXEL_PACK_BUFFER,4,x.STREAM_READ),x.bindBuffer(x.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,p){const x=this._updateCount;return this._readbackQueue?x>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():x>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,p=s.gl;s.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,p){const x=this._cachedRenderContext.context,w=x.gl;if(this._bindFramebuffer(),x.viewport.set([0,0,this._texWidth,this._texHeight]),x.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(x,w.TRIANGLES,Kn.disabled,Xn.disabled,Mi.unblended,di.disabled,((T,P)=>({u_input:T,u_output_expected:P}))(s,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&As(w)){w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.readBuffer(w.COLOR_ATTACHMENT0),w.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),w.bindBuffer(w.PIXEL_PACK_BUFFER,null);const T=w.fenceSync(w.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&As(s)){const p=s.clientWaitSync(this._readbackQueue.sync,0,0);if(p===s.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=js._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let p=0;return p+=s[0]/256,p+=s[1]/65536,p+=s[2]/16777216,s[3]<127&&(p=-p),p/128}}const se=a.$/128;function me(j,s){const p=j.granularity!==void 0?Math.max(j.granularity,1):1,x=p+(j.generateBorders?2:0),w=p+(j.extendToNorthPole||j.generateBorders?1:0)+(j.extendToSouthPole||j.generateBorders?1:0),T=x+1,P=w+1,O=j.generateBorders?-1:0,F=j.generateBorders||j.extendToNorthPole?-1:0,G=p+(j.generateBorders?1:0),Y=p+(j.generateBorders||j.extendToSouthPole?1:0),ne=T*P,ee=x*w*6,ce=T*P>65536;if(ce&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ye=ce||s==="32bit",Se=new Int16Array(2*ne);let we=0;for(let Le=F;Le<=Y;Le++)for(let Oe=O;Oe<=G;Oe++){let qe=Oe/p*a.$;Oe===-1&&(qe=-se),Oe===p+1&&(qe=a.$+se);let Ke=Le/p*a.$;Le===-1&&(Ke=j.extendToNorthPole?a.bh:-se),Le===p+1&&(Ke=j.extendToSouthPole?a.bi:a.$+se),Se[we++]=qe,Se[we++]=Ke}const Te=ye?new Uint32Array(ee):new Uint16Array(ee);let ze=0;for(let Le=0;Le<w;Le++)for(let Oe=0;Oe<x;Oe++){const qe=Oe+1+Le*T,Ke=Oe+(Le+1)*T,Fe=Oe+1+(Le+1)*T;Te[ze++]=Oe+Le*T,Te[ze++]=Ke,Te[ze++]=qe,Te[ze++]=qe,Te[ze++]=Ke,Te[ze++]=Fe}return{vertices:Se.buffer.slice(0),indices:Te.buffer.slice(0),uses32bitIndices:ye}}const je=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class Ne{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return or.projectionGlobe}get vertexShaderPreludeCode(){return or.projectionMercator.vertexSource}get subdivisionGranularity(){return je}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new js(s));const p=a.U(this._errorQueryLatitudeDegrees),x=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,w=this._errorMeasurement.updateErrorLoop(p,x),T=A.now();w!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=w,this._errorMeasurementLastChangeTime=T);const P=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(P))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,p,x,w,T){const P=(T==="stencil"?je.stencil:je.tile).getGranularityForZoomLevel(p.z);return this._getMesh(s,{granularity:P,generateBorders:x,extendToNorthPole:p.y===0&&w,extendToSouthPole:p.y===(1<<p.z)-1&&w})}_getMesh(s,p){const x=this._getMeshKey(p);if(x in this._tileMeshCache)return this._tileMeshCache[x];const w=function(T,P){const O=me(P,"16bit"),F=a.aL.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),G=a.aN.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new wo(T.createVertexBuffer(F,Sr.members),T.createIndexBuffer(G),a.aM.simpleSegment(0,0,F.length,G.length))}(s,p);return this._tileMeshCache[x]=w,w}recalculate(s){}hasTransition(){const s=A.now();let p=!1;return p=p||(s-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const ht=new a.r({type:new a.D(a.v.projection.type)});class gt extends a.E{constructor(s){super(),this._transitionable=new a.t(ht,void 0),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new So,this._verticalPerspectiveProjection=new Ne}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof a.bm){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,p,x,w,T){return this.currentProjection.getMeshFromTileID(s,p,x,w,T)}setProjection(s){this._transitionable.setValue("type",(s==null?void 0:s.type)||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function Ct(j){const s=mn(j.worldSize,j.center.lat);return 2*Math.PI*s}function un(j,s,p,x,w){const T=1/(1<<w),P=s/a.$*T+x*T,O=a.bo((j/a.$*T+p*T)*Math.PI*2+Math.PI,2*Math.PI),F=2*Math.atan(Math.exp(Math.PI-P*Math.PI*2))-.5*Math.PI,G=Math.cos(F),Y=new Float64Array(3);return Y[0]=Math.sin(O)*G,Y[1]=Math.sin(F),Y[2]=Math.cos(O)*G,Y}function kn(j){return function(s,p){const x=Math.cos(p),w=new Float64Array(3);return w[0]=Math.sin(s)*x,w[1]=Math.sin(p),w[2]=Math.cos(s)*x,w}(j.lng*Math.PI/180,j.lat*Math.PI/180)}function mn(j,s){return j/(2*Math.PI)/Math.cos(s*Math.PI/180)}function Cn(j){const s=Math.asin(j[1])/Math.PI*180,p=Math.sqrt(j[0]*j[0]+j[2]*j[2]);if(p>1e-6){const x=j[0]/p,w=Math.acos(j[2]/p),T=(x>0?w:-w)/Math.PI*180;return new a.S(a.aO(T,-180,180),s)}return new a.S(0,s)}function Un(j){return Math.cos(j*Math.PI/180)}function oi(j,s){const p=Un(j),x=Un(s);return a.ak(x/p)}function ri(j,s){const p=j.rotate(s.bearingInRadians),x=s.zoom+oi(s.center.lat,0),w=a.bk(1/Un(s.center.lat),1/Un(Math.min(Math.abs(s.center.lat),60)),a.bn(x,7,3,0,1)),T=360/Ct({worldSize:s.worldSize,center:{lat:s.center.lat}});return new a.S(s.center.lng-p.x*T*w,a.ah(s.center.lat+p.y*T,-a.ai,a.ai))}function Gn(j){const s=.5*j,p=Math.sin(s),x=Math.cos(s);return Math.log(p+x)-Math.log(x-p)}function Dn(j,s,p,x){const w=j.lat+p*x;if(Math.abs(p)>1){const T=(Math.sign(j.lat+p)!==Math.sign(j.lat)?-Math.abs(j.lat):Math.abs(j.lat))*Math.PI/180,P=Math.abs(j.lat+p)*Math.PI/180,O=Gn(T+x*(P-T)),F=Gn(T),G=Gn(P);return new a.S(j.lng+s*((O-F)/(G-F)),w)}return new a.S(j.lng+s*x,w)}class pr{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,p,x,w){const T=`${s.z}_${s.x}_${s.y}_${w!=null&&w.terrain?"t":""}`,P=this._cache.get(T);if(P)return P;const O=this._cachePrevious.get(T);if(O)return this._cache.set(T,O),O;const F=this._boundingVolumeFactory(s,p,x,w);return this._cache.set(T,F),this._hadAnyChanges=!0,F}}class Si{constructor(s,p,x,w){this.min=x,this.max=w,this.points=s,this.planes=p}static fromAabb(s,p){const x=[];for(let w=0;w<8;w++)x.push([1&~w?s[0]:p[0],(w>>1&1)==1?p[1]:s[1],(w>>2&1)==1?p[2]:s[2]]);return new Si(x,[[-1,0,0,p[0]],[1,0,0,-s[0]],[0,-1,0,p[1]],[0,1,0,-s[1]],[0,0,-1,p[2]],[0,0,1,-s[2]]],s,p)}static fromCenterSizeAngles(s,p,x){const w=a.br([],x[0],x[1],x[2]),T=a.bs([],[p[0],0,0],w),P=a.bs([],[0,p[1],0],w),O=a.bs([],[0,0,p[2]],w),F=[...s],G=[...s];for(let ne=0;ne<8;ne++)for(let ee=0;ee<3;ee++){const ce=s[ee]+T[ee]*(1&~ne?-1:1)+P[ee]*((ne>>1&1)==1?1:-1)+O[ee]*((ne>>2&1)==1?1:-1);F[ee]=Math.min(F[ee],ce),G[ee]=Math.max(G[ee],ce)}const Y=[];for(let ne=0;ne<8;ne++){const ee=[...s];a.aS(ee,ee,a.aR([],T,1&~ne?-1:1)),a.aS(ee,ee,a.aR([],P,(ne>>1&1)==1?1:-1)),a.aS(ee,ee,a.aR([],O,(ne>>2&1)==1?1:-1)),Y.push(ee)}return new Si(Y,[[...T,-a.aX(T,Y[0])],[...P,-a.aX(P,Y[0])],[...O,-a.aX(O,Y[0])],[-T[0],-T[1],-T[2],-a.aX(T,Y[7])],[-P[0],-P[1],-P[2],-a.aX(P,Y[7])],[-O[0],-O[1],-O[2],-a.aX(O,Y[7])]],F,G)}intersectsFrustum(s){let p=!0;const x=this.points.length,w=this.planes.length,T=s.planes.length,P=s.points.length;for(let O=0;O<T;O++){const F=s.planes[O];let G=0;for(let Y=0;Y<x;Y++){const ne=this.points[Y];F[0]*ne[0]+F[1]*ne[1]+F[2]*ne[2]+F[3]>=0&&G++}if(G===0)return 0;G<x&&(p=!1)}if(p)return 2;for(let O=0;O<w;O++){const F=this.planes[O];let G=0;for(let Y=0;Y<P;Y++){const ne=s.points[Y];F[0]*ne[0]+F[1]*ne[1]+F[2]*ne[2]+F[3]>=0&&G++}if(G===0)return 0}return 1}intersectsPlane(s){const p=this.points.length;let x=0;for(let w=0;w<p;w++){const T=this.points[w];s[0]*T[0]+s[1]*T[1]+s[2]*T[2]+s[3]>=0&&x++}return x===p?2:x===0?0:1}}function ns(j,s,p){const x=j-s;return x<0?-x:Math.max(0,x-p)}function Ps(j,s,p,x,w){const T=j-p;let P;return P=T<0?Math.min(-T,1+T-w):T>1?Math.min(Math.max(T-w,0),1-T):0,Math.max(P,ns(s,x,w))}class Vo{constructor(){this._boundingVolumeCache=new pr(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,p,x,w){const T=1<<x.z,P=1/T,O=x.x/T,F=x.y/T;let G=2;return G=Math.min(G,Ps(s,p,O,F,P)),G=Math.min(G,Ps(s,p,O+.5,-F-P,P)),G=Math.min(G,Ps(s,p,O+.5,2-F-P,P)),G}getWrap(s,p,x){const w=1<<p.z,T=1/w,P=p.x/w,O=ns(s.x,P,T),F=ns(s.x,P-1,T),G=ns(s.x,P+1,T),Y=Math.min(O,F,G);return Y===G?1:Y===F?-1:0}allowVariableZoom(s,p){return ct(s,p)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,p,x,w){return this._boundingVolumeCache.getTileBoundingVolume(s,p,x,w)}_computeTileBoundingVolume(s,p,x,w){var T,P;let O=0,F=0;if(w!=null&&w.terrain){const G=new a.Z(s.z,p,s.z,s.x,s.y),Y=w.terrain.getMinMaxElevation(G);O=(T=Y.minElevation)!==null&&T!==void 0?T:Math.min(0,x),F=(P=Y.maxElevation)!==null&&P!==void 0?P:Math.max(0,x)}if(O/=a.bu,F/=a.bu,O+=1,F+=1,s.z<=0)return Si.fromAabb([-F,-F,-F],[F,F,F]);if(s.z===1)return Si.fromAabb([s.x===0?-F:0,s.y===0?0:-F,-F],[s.x===0?0:F,s.y===0?F:0,F]);{const G=[un(0,0,s.x,s.y,s.z),un(a.$,0,s.x,s.y,s.z),un(a.$,a.$,s.x,s.y,s.z),un(0,a.$,s.x,s.y,s.z)],Y=[];for(const _t of G)Y.push(a.aR([],_t,F));if(F!==O)for(const _t of G)Y.push(a.aR([],_t,O));s.y===0&&Y.push([0,1,0]),s.y===(1<<s.z)-1&&Y.push([0,-1,0]);const ne=[1,1,1],ee=[-1,-1,-1];for(const _t of Y)for(let bt=0;bt<3;bt++)ne[bt]=Math.min(ne[bt],_t[bt]),ee[bt]=Math.max(ee[bt],_t[bt]);const ce=un(a.$/2,a.$/2,s.x,s.y,s.z),ye=a.aW([],[0,1,0],ce);a.aV(ye,ye);const Se=a.aW([],ce,ye);a.aV(Se,Se);const we=a.aW([],G[2],G[1]);a.aV(we,we);const Te=a.aW([],G[0],G[3]);a.aV(Te,Te),Y.push(a.aR([],ce,F)),s.y>=(1<<s.z)/2&&Y.push(a.aR([],un(a.$/2,0,s.x,s.y,s.z),F)),s.y<(1<<s.z)/2&&Y.push(a.aR([],un(a.$/2,a.$,s.x,s.y,s.z),F));const ze=Wa(ce,Y),Le=Wa(Se,Y),Oe=[-ce[0],-ce[1],-ce[2],ze.max],qe=[ce[0],ce[1],ce[2],-ze.min],Ke=[-Se[0],-Se[1],-Se[2],Le.max],Fe=[Se[0],Se[1],Se[2],-Le.min],it=[...we,0],kt=[...Te,0],yt=[];return s.y===0?yt.push(a.bt(kt,it,Oe),a.bt(kt,it,qe)):yt.push(a.bt(Ke,it,Oe),a.bt(Ke,it,qe),a.bt(Ke,kt,Oe),a.bt(Ke,kt,qe)),s.y===(1<<s.z)-1?yt.push(a.bt(kt,it,Oe),a.bt(kt,it,qe)):yt.push(a.bt(Fe,it,Oe),a.bt(Fe,it,qe),a.bt(Fe,kt,Oe),a.bt(Fe,kt,qe)),new Si(yt,[Oe,qe,Ke,Fe,it,kt],ne,ee)}}}function Wa(j,s){let p=1/0,x=-1/0;for(const w of s){const T=a.aX(j,w);p=Math.min(p,T),x=Math.max(x,T)}return{min:p,max:x}}class Za{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,p,x){return this._helper.interpolatePadding(s,p,x)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,p){this._helper.resize(s,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,p){this._helper.overrideNearFarZ(s,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ns({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,p)=>this.getConstrained(s,p)}),this._coveringTilesDetailsProvider=new Vo}clone(){const s=new Za;return s.apply(this),s}apply(s,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=a.bp();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:p,applyGlobeMatrix:x}=s,w=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:w,clippingPlane:this._cachedClippingPlane,projectionTransition:x?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const p=this.pitchInRadians,x=this.cameraToCenterDistance/s,w=Math.sin(p)*x,T=Math.cos(p)*x+1,P=1/Math.sqrt(w*w+T*T)*1;let O=-w,F=T;const G=Math.sqrt(O*O+F*F);O/=G,F/=G;const Y=[0,O,F];a.bw(Y,Y,[0,0,0],-this.bearingInRadians),a.bx(Y,Y,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(Y,Y,[0,0,0],this.center.lng*Math.PI/180);const ne=1/a.aZ(Y);return a.aR(Y,Y,ne),[...Y,-P*ne]}isLocationOccluded(s){return!this.isSurfacePointVisible(kn(s))}transformLightDirection(s){const p=this._helper._center.lng*Math.PI/180,x=this._helper._center.lat*Math.PI/180,w=Math.cos(x),T=[Math.sin(p)*w,Math.sin(x),Math.cos(p)*w],P=[T[2],0,-T[0]],O=[0,0,0];a.aW(O,P,T),a.aV(P,P),a.aV(O,O);const F=[0,0,0];return a.aV(F,[P[0]*s[0]+O[0]*s[1]+T[0]*s[2],P[1]*s[0]+O[1]*s[1]+T[1]*s[2],P[2]*s[0]+O[2]*s[1]+T[2]*s[2]]),F}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,p,x){const w=function(O,F,G){const Y=1/(1<<G.z);return new a.a1(O/a.$*Y+G.x*Y,F/a.$*Y+G.y*Y)}(s,p,x.canonical),T=(P=w.y,[a.bo(w.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-P*Math.PI*2))-.5*Math.PI]);var P;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(s,p,x,w){const T=x.canonical,P=un(s,p,T.x,T.y,T.z),O=1+(w?w(s,p):0)/a.bu,F=[P[0]*O,P[1]*O,P[2]*O,1];a.aw(F,F,this._globeViewProjMatrixNoCorrection);const G=this._cachedClippingPlane,Y=G[0]*P[0]+G[1]*P[1]+G[2]*P[2]+G[3]<0;return{point:new a.P(F[0]/F[3],F[1]/F[3]),signedDistanceFromCamera:F[3],isOccluded:Y}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=mn(this.worldSize,this.center.lat),p=a.ba(),x=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),a.b4(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const w=this.centerOffset;p[8]=2*-w.x/this._helper._width,p[9]=2*w.y/this._helper._height,this._projectionMatrix=a.b5(p),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,p),a.M(p,p,[0,0,-this.cameraToCenterDistance]),a.b6(p,p,this.rollInRadians),a.b7(p,p,-this.pitchInRadians),a.b6(p,p,this.bearingInRadians),a.M(p,p,[0,0,-s]);const T=a.bp();T[0]=s,T[1]=s,T[2]=s,a.b7(x,p,this.center.lat*Math.PI/180),a.bz(x,x,-this.center.lng*Math.PI/180),a.N(x,x,T),this._globeViewProjMatrixNoCorrection=x,a.b7(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(p,p,-this.center.lng*Math.PI/180),a.N(p,p,T),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,x);const P=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/s,a.bw(this._cameraPosition,this._cameraPosition,P,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,P,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,P,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,P,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,P,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const O=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(O,O,[1,1,-1]),this._cachedFrustum=vi.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){a.w("calculateFogMatrix is not supported on globe projection.");const p=a.ba();return a.ag(p),p}getVisibleUnwrappedCoordinates(s){return[new a.b2(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const x=kn(s);a.aR(x,x,1+p/a.bu);const w=a.bv();return a.aw(w,[x[0],x[1],x[2],1],this._globeViewProjMatrixNoCorrection),w[2]/w[3]}populateCache(s){}getBounds(){const s=.5*this.width,p=.5*this.height,x=[new a.P(0,0),new a.P(s,0),new a.P(this.width,0),new a.P(this.width,p),new a.P(this.width,this.height),new a.P(s,this.height),new a.P(0,this.height),new a.P(0,p)],w=[];for(const ne of x)w.push(this.unprojectScreenPoint(ne));let T=0,P=0,O=0,F=0;const G=this.center;for(const ne of w){const ee=a.bA(G.lng,ne.lng),ce=a.bA(G.lat,ne.lat);ee<P&&(P=ee),ee>T&&(T=ee),ce<F&&(F=ce),ce>O&&(O=ce)}const Y=[G.lng+P,G.lat+F,G.lng+T,G.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&(Y[3]=90,Y[0]=-180,Y[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Y[1]=-90,Y[0]=-180,Y[2]=180),new Ot(Y)}getConstrained(s,p){const x=a.ah(s.lat,-a.ai,a.ai),w=a.ah(+p,this.minZoom+oi(0,x),this.maxZoom);return{center:new a.S(s.lng,x),zoom:w}}calculateCenterFromCameraLngLatAlt(s,p,x,w){return this._helper.calculateCenterFromCameraLngLatAlt(s,p,x,w)}setLocationAtPoint(s,p){const x=kn(this.unprojectScreenPoint(p)),w=kn(s),T=a.bp();a.bB(T);const P=a.bp();a.by(P,x,T,-this.center.lng*Math.PI/180),a.bx(P,P,T,this.center.lat*Math.PI/180);const O=w[0]*w[0]+w[2]*w[2],F=P[0]*P[0];if(O<F)return;const G=Math.sqrt(O-F),Y=-G,ne=a.bC(w[0],w[2],P[0],G),ee=a.bC(w[0],w[2],P[0],Y),ce=a.bp();a.by(ce,w,T,-ne);const ye=a.bC(ce[1],ce[2],P[1],P[2]),Se=a.bp();a.by(Se,w,T,-ee);const we=a.bC(Se[1],Se[2],P[1],P[2]),Te=.5*Math.PI,ze=ye>=-Te&&ye<=Te,Le=we>=-Te&&we<=Te;let Oe,qe;if(ze&&Le){const kt=this.center.lng*Math.PI/180,yt=this.center.lat*Math.PI/180;a.bD(ne,kt)+a.bD(ye,yt)<a.bD(ee,kt)+a.bD(we,yt)?(Oe=ne,qe=ye):(Oe=ee,qe=we)}else if(ze)Oe=ne,qe=ye;else{if(!Le)return;Oe=ee,qe=we}const Ke=Oe/Math.PI*180,Fe=qe/Math.PI*180,it=this.center.lat;this.setCenter(new a.S(Ke,a.ah(Fe,-90,90))),this.setZoom(this.zoom+oi(it,this.center.lat))}locationToScreenPoint(s,p){const x=kn(s);if(p){const w=p.getElevationForLngLatZoom(s,this._helper._tileZoom);a.aR(x,x,1+w/a.bu)}return this._projectSurfacePointToScreen(x)}_projectSurfacePointToScreen(s){const p=a.bv();return a.aw(p,[...s,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new a.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,p){if(p){const x=p.pointCoordinate(s);if(x)return x}return a.a1.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,p){var x;return(x=this.screenPointToMercatorCoordinate(s,p))===null||x===void 0?void 0:x.toLngLat()}isPointOnMapSurface(s,p){const x=this._cameraPosition,w=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(x,w)}getRayDirectionFromPixel(s){const p=a.bv();p[0]=s.x/this.width*2-1,p[1]=-1*(s.y/this.height*2-1),p[2]=1,p[3]=1,a.aw(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const x=a.bp();x[0]=p[0]-this._cameraPosition[0],x[1]=p[1]-this._cameraPosition[1],x[2]=p[2]-this._cameraPosition[2];const w=a.bp();return a.aV(w,x),w}isSurfacePointVisible(s){const p=this._cachedClippingPlane;return p[0]*s[0]+p[1]*s[1]+p[2]*s[2]+p[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const p=a.bv();return a.aw(p,[...s,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(s,p){const x=a.aX(s,p),w=a.bp(),T=a.bp();a.aR(T,p,x),a.aU(w,s,T);const P=1-a.aX(w,w);if(P<0)return null;const O=a.aX(s,s)-1,F=-x+(x<0?1:-1)*Math.sqrt(P),G=O/F,Y=F;return{tMin:Math.min(G,Y),tMax:Math.max(G,Y)}}unprojectScreenPoint(s){const p=this._cameraPosition,x=this.getRayDirectionFromPixel(s),w=this.rayPlanetIntersection(p,x);if(w){const Y=a.bp();a.aS(Y,p,[x[0]*w.tMin,x[1]*w.tMin,x[2]*w.tMin]);const ne=a.bp();return a.aV(ne,Y),Cn(ne)}const T=this._cachedClippingPlane,P=T[0]*x[0]+T[1]*x[1]+T[2]*x[2],O=-a.b1(T,p)/P,F=a.bp();if(O>0)a.aS(F,p,[x[0]*O,x[1]*O,x[2]*O]);else{const Y=a.bp();a.aS(Y,p,[2*x[0],2*x[1],2*x[2]]);const ne=a.b1(this._cachedClippingPlane,Y);a.aU(F,Y,[this._cachedClippingPlane[0]*ne,this._cachedClippingPlane[1]*ne,this._cachedClippingPlane[2]*ne])}const G=function(Y){const ne=a.bp();return ne[0]=Y[0]*-Y[3],ne[1]=Y[1]*-Y[3],ne[2]=Y[2]*-Y[3],{center:ne,radius:Math.sqrt(1-Y[3]*Y[3])}}(T);return Cn(function(Y,ne,ee){const ce=a.bp();a.aU(ce,ee,Y);const ye=a.bp();return a.bq(ye,Y,ce,ne/a.a$(ce)),ye}(G.center,G.radius,F))}getMatrixForModel(s,p){const x=a.S.convert(s),w=1/a.bu,T=a.b9();return a.bz(T,T,x.lng/180*Math.PI),a.b7(T,T,-x.lat/180*Math.PI),a.M(T,T,[0,0,1+p/a.bu]),a.b7(T,T,.5*Math.PI),a.N(T,T,[w,w,w]),T}getProjectionDataForCustomLayer(s=!0){const p=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:s});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(s){}}class fa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,p,x){return this._helper.interpolatePadding(s,p,x)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,p,x=!0){this._helper.resize(s,p,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,p){this._helper.overrideNearFarZ(s,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,p){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ns({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,p)=>this.getConstrained(s,p)}),this._globeness=1,this._mercatorTransform=new jo,this._verticalPerspectiveTransform=new Za}clone(){const s=new fa;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const p=this._mercatorTransform.getProjectionData(s),x=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?x.mainMatrix:p.mainMatrix,clippingPlane:x.clippingPlane,tileMercatorCoords:x.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,p,x){const w=this._mercatorTransform.getPitchedTextCorrection(s,p,x),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,p,x);return a.bk(w,T,this._globeness)}projectTileCoordinates(s,p,x,w){return this.currentTransform.projectTileCoordinates(s,p,x,w)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,p){return this.currentTransform.lngLatToCameraDepth(s,p)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,p){return this.currentTransform.getConstrained(s,p)}calculateCenterFromCameraLngLatAlt(s,p,x,w){return this._helper.calculateCenterFromCameraLngLatAlt(s,p,x,w)}setLocationAtPoint(s,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,p){return this.currentTransform.locationToScreenPoint(s,p)}screenPointToMercatorCoordinate(s,p){return this.currentTransform.screenPointToMercatorCoordinate(s,p)}screenPointToLocation(s,p){return this.currentTransform.screenPointToLocation(s,p)}isPointOnMapSurface(s,p){return this.currentTransform.isPointOnMapSurface(s,p)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,p){return this.currentTransform.getMatrixForModel(s,p)}getProjectionDataForCustomLayer(s=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return p;const x=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return x.fallbackMatrix=p.mainMatrix,x}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class zr{get useGlobeControls(){return!0}handlePanInertia(s,p){const x=ri(s,p);return Math.abs(x.lng-p.center.lng)>180&&(x.lng=p.center.lng+179.5*Math.sign(x.lng-p.center.lng)),{easingCenter:x,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,p){const x=s.around,w=p.screenPointToLocation(x);s.bearingDelta&&p.setBearing(p.bearing+s.bearingDelta),s.pitchDelta&&p.setPitch(p.pitch+s.pitchDelta),s.rollDelta&&p.setRoll(p.roll+s.rollDelta);const T=p.zoom;s.zoomDelta&&p.setZoom(p.zoom+s.zoomDelta);const P=p.zoom-T;if(P===0)return;const O=a.bA(p.center.lng,w.lng),F=O/(Math.abs(O/180)+1),G=a.bA(p.center.lat,w.lat),Y=p.getRayDirectionFromPixel(x),ne=p.cameraPosition,ee=-1*a.aX(ne,Y),ce=a.bp();a.aS(ce,ne,[Y[0]*ee,Y[1]*ee,Y[2]*ee]);const ye=a.aZ(ce)-1,Se=Math.exp(.5*-Math.max(ye-.3,0)),we=mn(p.worldSize,p.center.lat)/Math.min(p.width,p.height),Te=a.bn(we,.9,.5,1,.25),ze=(1-a.af(-P))*Math.min(Se,Te),Le=p.center.lat,Oe=p.zoom,qe=new a.S(p.center.lng+F*ze,a.ah(p.center.lat+G*ze,-a.ai,a.ai));p.setLocationAtPoint(w,x);const Ke=p.center,Fe=a.bn(Math.abs(O),45,85,0,1),it=a.bn(we,.75,.35,0,1),kt=Math.pow(Math.max(Fe,it),.25),yt=a.bA(Ke.lng,qe.lng),_t=a.bA(Ke.lat,qe.lat);p.setCenter(new a.S(Ke.lng+yt*kt,Ke.lat+_t*kt).wrap()),p.setZoom(Oe+oi(Le,p.center.lat))}handleMapControlsPan(s,p,x){if(!s.panDelta)return;const w=p.center.lat,T=p.zoom;p.setCenter(ri(s.panDelta,p).wrap()),p.setZoom(T+oi(w,p.center.lat))}cameraForBoxAndBearing(s,p,x,w,T){const P=rs(s,p,x,w,T),O=p.left/T.width*2-1,F=(T.width-p.right)/T.width*2-1,G=p.top/T.height*-2+1,Y=(T.height-p.bottom)/T.height*-2+1,ne=a.bA(x.getWest(),x.getEast())<0,ee=ne?x.getEast():x.getWest(),ce=ne?x.getWest():x.getEast(),ye=Math.max(x.getNorth(),x.getSouth()),Se=Math.min(x.getNorth(),x.getSouth()),we=ee+.5*a.bA(ee,ce),Te=ye+.5*a.bA(ye,Se),ze=T.clone();ze.setCenter(P.center),ze.setBearing(P.bearing),ze.setPitch(0),ze.setRoll(0),ze.setZoom(P.zoom);const Le=ze.modelViewProjectionMatrix,Oe=[kn(x.getNorthWest()),kn(x.getNorthEast()),kn(x.getSouthWest()),kn(x.getSouthEast()),kn(new a.S(ce,Te)),kn(new a.S(ee,Te)),kn(new a.S(we,ye)),kn(new a.S(we,Se))],qe=kn(P.center);let Ke=Number.POSITIVE_INFINITY;for(const Fe of Oe)O<0&&(Ke=zr.getLesserNonNegativeNonNull(Ke,zr.solveVectorScale(Fe,qe,Le,"x",O))),F>0&&(Ke=zr.getLesserNonNegativeNonNull(Ke,zr.solveVectorScale(Fe,qe,Le,"x",F))),G>0&&(Ke=zr.getLesserNonNegativeNonNull(Ke,zr.solveVectorScale(Fe,qe,Le,"y",G))),Y<0&&(Ke=zr.getLesserNonNegativeNonNull(Ke,zr.solveVectorScale(Fe,qe,Le,"y",Y)));if(Number.isFinite(Ke)&&Ke!==0)return P.zoom=ze.zoom+a.ak(Ke),P;Zs()}handleJumpToCenterZoom(s,p){const x=s.center.lat,w=s.getConstrained(p.center?a.S.convert(p.center):s.center,s.zoom).center;s.setCenter(w.wrap());const T=p.zoom!==void 0?+p.zoom:s.zoom+oi(x,w.lat);s.zoom!==T&&s.setZoom(T)}handleEaseTo(s,p){const x=s.zoom,w=s.center,T=s.padding,P={roll:s.roll,pitch:s.pitch,bearing:s.bearing},O={roll:p.roll===void 0?s.roll:p.roll,pitch:p.pitch===void 0?s.pitch:p.pitch,bearing:p.bearing===void 0?s.bearing:p.bearing},F=p.zoom!==void 0,G=!s.isPaddingEqual(p.padding);let Y=!1;const ne=p.center?a.S.convert(p.center):w,ee=s.getConstrained(ne,x).center;Na(s,ee);const ce=s.clone();ce.setCenter(ee),ce.setZoom(F?+p.zoom:x+oi(w.lat,ne.lat)),ce.setBearing(p.bearing);const ye=new a.P(a.ah(s.centerPoint.x+p.offsetAsPoint.x,0,s.width),a.ah(s.centerPoint.y+p.offsetAsPoint.y,0,s.height));ce.setLocationAtPoint(ee,ye);const Se=(p.offset&&p.offsetAsPoint.mag())>0?ce.center:ee,we=F?+p.zoom:x+oi(w.lat,Se.lat),Te=x+oi(w.lat,0),ze=we+oi(Se.lat,0),Le=a.bA(w.lng,Se.lng),Oe=a.bA(w.lat,Se.lat),qe=a.af(ze-Te);return Y=we!==x,{easeFunc:Ke=>{if(a.be(P,O)||ys({startEulerAngles:P,endEulerAngles:O,tr:s,k:Ke,useSlerp:P.roll!=O.roll}),G&&s.interpolatePadding(T,p.padding,Ke),p.around)a.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(p.around,p.aroundPoint);else{const Fe=ze>Te?Math.min(2,qe):Math.max(.5,qe),it=Math.pow(Fe,1-Ke),kt=Dn(w,Le,Oe,Ke*it);s.setCenter(kt.wrap())}if(Y){const Fe=a.C.number(Te,ze,Ke)+oi(0,s.center.lat);s.setZoom(Fe)}},isZooming:Y,elevationCenter:Se}}handleFlyTo(s,p){const x=p.zoom!==void 0,w=s.center,T=s.zoom,P=s.padding,O=!s.isPaddingEqual(p.padding),F=s.getConstrained(a.S.convert(p.center||p.locationAtOffset),T).center,G=x?+p.zoom:s.zoom+oi(s.center.lat,F.lat),Y=s.clone();Y.setCenter(F),Y.setZoom(G),Y.setBearing(p.bearing);const ne=new a.P(a.ah(s.centerPoint.x+p.offsetAsPoint.x,0,s.width),a.ah(s.centerPoint.y+p.offsetAsPoint.y,0,s.height));Y.setLocationAtPoint(F,ne);const ee=Y.center;Na(s,ee);const ce=function(Oe,qe,Ke){const Fe=kn(qe),it=kn(Ke),kt=a.aX(Fe,it),yt=Math.acos(kt),_t=Ct(Oe);return yt/(2*Math.PI)*_t}(s,w,ee),ye=T+oi(w.lat,0),Se=G+oi(ee.lat,0),we=a.af(Se-ye);let Te;if(typeof p.minZoom=="number"){const Oe=+p.minZoom+oi(ee.lat,0),qe=Math.min(Oe,ye,Se)+oi(0,ee.lat),Ke=s.getConstrained(ee,qe).zoom+oi(ee.lat,0);Te=a.af(Ke-ye)}const ze=a.bA(w.lng,ee.lng),Le=a.bA(w.lat,ee.lat);return{easeFunc:(Oe,qe,Ke,Fe)=>{const it=Dn(w,ze,Le,Ke);O&&s.interpolatePadding(P,p.padding,Oe);const kt=Oe===1?ee:it;s.setCenter(kt.wrap());const yt=ye+a.ak(qe);s.setZoom(Oe===1?G:yt+oi(0,kt.lat))},scaleOfZoom:we,targetCenter:ee,scaleOfMinZoom:Te,pixelPathLength:ce}}static solveVectorScale(s,p,x,w,T){const P=w==="x"?[x[0],x[4],x[8],x[12]]:[x[1],x[5],x[9],x[13]],O=[x[3],x[7],x[11],x[15]],F=s[0]*P[0]+s[1]*P[1]+s[2]*P[2],G=s[0]*O[0]+s[1]*O[1]+s[2]*O[2],Y=p[0]*P[0]+p[1]*P[1]+p[2]*P[2],ne=p[0]*O[0]+p[1]*O[1]+p[2]*O[2];return Y+T*G===F+T*ne||O[3]*(F-Y)+P[3]*(ne-G)+F*ne==Y*G?null:(Y+P[3]-T*ne-T*O[3])/(Y-F-T*ne+T*G)}static getLesserNonNegativeNonNull(s,p){return p!==null&&p>=0&&p<s?p:s}}class Td{constructor(s){this._globe=s,this._mercatorCameraHelper=new Aa,this._verticalPerspectiveCameraHelper=new zr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,p){return this.currentHelper.handlePanInertia(s,p)}handleMapControlsRollPitchBearingZoom(s,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,p)}handleMapControlsPan(s,p,x){this.currentHelper.handleMapControlsPan(s,p,x)}cameraForBoxAndBearing(s,p,x,w,T){return this.currentHelper.cameraForBoxAndBearing(s,p,x,w,T)}handleJumpToCenterZoom(s,p){this.currentHelper.handleJumpToCenterZoom(s,p)}handleEaseTo(s,p){return this.currentHelper.handleEaseTo(s,p)}handleFlyTo(s,p){return this.currentHelper.handleFlyTo(s,p)}}const Dh=(j,s)=>a.y(j,s&&s.filter(p=>p.identifier!=="source.canvas")),Oy=a.bE();class tp extends a.E{constructor(s,p={}){var x,w;super(),this._rtlPluginLoaded=()=>{for(const P in this.sourceCaches){const O=this.sourceCaches[P].getSource().type;O!=="vector"&&O!=="geojson"||this.sourceCaches[P].reload()}},this.map=s,this.dispatcher=new dt(ut(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(P,O)=>this.getGlyphs(P,O)),this.dispatcher.registerMessageHandler("GI",(P,O)=>this.getImages(P,O)),this.dispatcher.registerMessageHandler("GDA",(P,O)=>this.getDashes(P,O)),this.imageManager=new pe,this.imageManager.setEventedParent(this);const T=((x=s._container)===null||x===void 0?void 0:x.lang)||typeof document!="undefined"&&((w=document.documentElement)===null||w===void 0?void 0:w.lang)||void 0;this.glyphManager=new rt(s._requestManager,p.localIdeographFontFamily,T),this.lineAtlas=new Nt(256,512),this.crossTileSymbolIndex=new Vl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),ln().on(Et,this._rtlPluginLoaded),this.on("data",P=>{if(P.dataType!=="source"||P.sourceDataType!=="metadata")return;const O=this.sourceCaches[P.sourceId];if(!O)return;const F=O.getSource();if(F&&F.vectorLayerIds)for(const G in this._layers){const Y=this._layers[G];Y.source===F.id&&this._validateLayer(Y)}})}setGlobalStateProperty(s,p){var x,w,T;this._checkLoaded();const P=p===null?(T=(w=(x=this.stylesheet.state)===null||x===void 0?void 0:x[s])===null||w===void 0?void 0:w.default)!==null&&T!==void 0?T:null:p;if(a.bH(P,this._globalState[s]))return this;this._globalState[s]=P,this._applyGlobalStateChanges([s])}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();const p=[];for(const x in s)!a.bH(this._globalState[x],s[x].default)&&(p.push(x),this._globalState[x]=s[x].default);this._applyGlobalStateChanges(p)}_applyGlobalStateChanges(s){if(s.length===0)return;const p=new Set,x={};for(const w of s){x[w]=this._globalState[w];for(const T in this._layers){const P=this._layers[T],O=P.getLayoutAffectingGlobalStateRefs(),F=P.getPaintAffectingGlobalStateRefs();if(O.has(w)&&p.add(P.source),F.has(w))for(const{name:G,value:Y}of F.get(w))this._updatePaintProperty(P,G,Y)}}this.dispatcher.broadcast("UGS",x);for(const w in this.sourceCaches)p.has(w)&&(this._reloadSource(w),this._changed=!0)}loadURL(s,p={},x){this.fire(new a.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const w=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;a.j(w,this._loadStyleRequest).then(P=>{this._loadStyleRequest=null,this._load(P.data,p,x)}).catch(P=>{this._loadStyleRequest=null,P&&!T.signal.aborted&&this.fire(new a.k(P))})}loadJSON(s,p={},x){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(s,p,x)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Oy,{validate:!1})}_load(s,p,x){var w,T;let P=p.transformStyle?p.transformStyle(x,s):s;if(!p.validate||!Dh(this,a.z(P))){P=Object.assign({},P),this._loaded=!0,this.stylesheet=P;for(const O in P.sources)this.addSource(O,P.sources[O],{validate:!1});P.sprite?this._loadSprite(P.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(P.glyphs),this._createLayers(),this.light=new De(this.stylesheet.light),this._setProjectionInternal(((w=this.stylesheet.projection)===null||w===void 0?void 0:w.type)||"mercator"),this.sky=new et(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var s,p,x;const w=a.bI(this.stylesheet.layers);this.setGlobalState((s=this.stylesheet.state)!==null&&s!==void 0?s:null),this.dispatcher.broadcast("SL",w),this._order=w.map(T=>T.id),this._layers={},this._serializedLayers=null;for(const T of w){const P=a.bJ(T,this._globalState);if(P.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=P,a.bK(P)&&this.sourceCaches[P.source]){const O=(x=(p=T.paint)===null||p===void 0?void 0:p["raster-fade-duration"])!==null&&x!==void 0?x:P.paint.get("raster-fade-duration");this.sourceCaches[P.source].setRasterFadeDuration(O)}}}_loadSprite(s,p=!1,x=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,P,O,F){return a._(this,void 0,void 0,function*(){const G=le(T),Y=O>1?"@2x":"",ne={},ee={};for(const{id:ce,url:ye}of G){const Se=P.transformRequest(ge(ye,Y,".json"),"SpriteJSON");ne[ce]=a.j(Se,F);const we=P.transformRequest(ge(ye,Y,".png"),"SpriteImage");ee[ce]=Z.getImage(we,F)}return yield Promise.all([...Object.values(ne),...Object.values(ee)]),function(ce,ye){return a._(this,void 0,void 0,function*(){const Se={};for(const we in ce){Se[we]={};const Te=A.getImageCanvasContext((yield ye[we]).data),ze=(yield ce[we]).data;for(const Le in ze){const{width:Oe,height:qe,x:Ke,y:Fe,sdf:it,pixelRatio:kt,stretchX:yt,stretchY:_t,content:bt,textFitWidth:sn,textFitHeight:rn}=ze[Le];Se[we][Le]={data:null,pixelRatio:kt,sdf:it,stretchX:yt,stretchY:_t,content:bt,textFitWidth:sn,textFitHeight:rn,spriteData:{width:Oe,height:qe,x:Ke,y:Fe,context:Te}}}}return Se})}(ne,ee)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(const P in T){this._spritesImagesIds[P]=[];const O=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(F=>!(F in T)):[];for(const F of O)this.imageManager.removeImage(F),this._changedImages[F]=!0;for(const F in T[P]){const G=P==="default"?F:`${P}:${F}`;this._spritesImagesIds[P].push(G),G in this.imageManager.images?this.imageManager.updateImage(G,T[P][F],!1):this.imageManager.addImage(G,T[P][F]),p&&(this._changedImages[G]=!0)}}}).catch(T=>{this._spriteRequest=null,w=T,this.fire(new a.k(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),x&&x(w)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(s){const p=this.sourceCaches[s.source];if(!p)return;const x=s.sourceLayer;if(!x)return;const w=p.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(x)===-1)&&this.fire(new a.k(new Error(`Source layer "${x}" does not exist on source "${w.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,p=!1){const x=this._serializedAllLayers();if(!s||s.length===0)return Object.values(p?a.bL(x):x);const w=[];for(const T of s)if(x[T]){const P=p?a.bL(x[T]):x[T];w.push(P)}return w}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const p=Object.keys(this._layers);for(const x of p){const w=this._layers[x];w.type!=="custom"&&(s[x]=w.serialize())}return s}hasTransitions(){var s,p,x;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((x=this.projection)===null||x===void 0)&&x.hasTransition())return!0;for(const w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(const w in this._layers)if(this._layers[w].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const p=this._changed;if(p){const w=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(w.length||T.length)&&this._updateWorkerLayers(w,T);for(const P in this._updatedSources){const O=this._updatedSources[P];if(O==="reload")this._reloadSource(P);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const x={};for(const w in this.sourceCaches){const T=this.sourceCaches[w];x[w]=T.used,T.used=!1}for(const w of this._order){const T=this._layers[w];T.recalculate(s,this._availableImages),!T.isHidden(s.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const w in x){const T=this.sourceCaches[w];!!x[w]!=!!T.used&&T.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,p&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,p={}){var x;this._checkLoaded();const w=this.serialize();if(s=p.transformStyle?p.transformStyle(w,s):s,((x=p.validate)===null||x===void 0||x)&&Dh(this,a.z(s)))return!1;(s=a.bL(s)).layers=a.bI(s.layers);const T=a.bM(w,s),P=this._getOperationsToPerform(T);if(P.unimplemented.length>0)throw new Error(`Unimplemented: ${P.unimplemented.join(", ")}.`);if(P.operations.length===0)return!1;for(const O of P.operations)O();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const p=[],x=[];for(const w of s)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":p.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":p.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setSky":p.push(()=>this.setSky.apply(this,w.args));break;case"setProjection":this.setProjection.apply(this,w.args);break;case"setGlobalState":p.push(()=>this.setGlobalState.apply(this,w.args));break;case"setTransition":p.push(()=>{});break;default:x.push(w.command)}return{operations:p,unimplemented:x}}addImage(s,p){if(this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,p),this._afterImageUpdated(s)}updateImage(s,p){this.imageManager.updateImage(s,p)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,p,x={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.z.source,`sources.${s}`,p,null,x))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const w=this.sourceCaches[s]=new Ut(s,p,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:s})),w.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===s)return this.fire(new a.k(new Error(`Source "${s}" cannot be removed while layer "${x}" is using it.`)));const p=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],p.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,p){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const x=this.sourceCaches[s].getSource();if(x.type!=="geojson")throw new Error(`geojsonSource.type is ${x.type}, which is !== 'geojson`);x.setData(p),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,p,x={}){this._checkLoaded();const w=s.id;if(this.getLayer(w))return void this.fire(new a.k(new Error(`Layer "${w}" already exists on this map.`)));let T;if(s.type==="custom"){if(Dh(this,a.bN(s)))return;T=a.bJ(s,this._globalState)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(w,s.source),s=a.bL(s),s=a.e(s,{source:w})),this._validate(a.z.layer,`layers.${w}`,s,{arrayIndex:-1},x))return;T=a.bJ(s,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:w}})}const P=p?this._order.indexOf(p):this._order.length;if(p&&P===-1)this.fire(new a.k(new Error(`Cannot add layer "${w}" before non-existing layer "${p}".`)));else{if(this._order.splice(P,0,w),this._layerOrderChanged=!0,this._layers[w]=T,this._removedLayers[w]&&T.source&&T.type!=="custom"){const O=this._removedLayers[w];delete this._removedLayers[w],O.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(s,p){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===p)return;const x=this._order.indexOf(s);this._order.splice(x,1);const w=p?this._order.indexOf(p):this._order.length;p&&w===-1?this.fire(new a.k(new Error(`Cannot move layer "${s}" before non-existing layer "${p}".`))):(this._order.splice(w,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const p=this._layers[s];if(!p)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${s}".`)));p.setEventedParent(null);const x=this._order.indexOf(s);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=p,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],p.onRemove&&p.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,p,x){this._checkLoaded();const w=this.getLayer(s);w?w.minzoom===p&&w.maxzoom===x||(p!=null&&(w.minzoom=p),x!=null&&(w.maxzoom=x),this._updateLayer(w)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,p,x={}){this._checkLoaded();const w=this.getLayer(s);if(w){if(!a.bH(w.filter,p))return p==null?(w.setFilter(void 0),void this._updateLayer(w)):void(this._validate(a.z.filter,`layers.${w.id}.filter`,p,null,x)||(w.setFilter(a.bL(p)),this._updateLayer(w)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return a.bL(this.getLayer(s).filter)}setLayoutProperty(s,p,x,w={}){this._checkLoaded();const T=this.getLayer(s);T?a.bH(T.getLayoutProperty(p),x)||(T.setLayoutProperty(p,x,w),this._updateLayer(T)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,p){const x=this.getLayer(s);if(x)return x.getLayoutProperty(p);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,p,x,w={}){this._checkLoaded();const T=this.getLayer(s);T?a.bH(T.getPaintProperty(p),x)||this._updatePaintProperty(T,p,x,w):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}_updatePaintProperty(s,p,x,w={}){s.setPaintProperty(p,x,w)&&this._updateLayer(s),a.bK(s)&&p==="raster-fade-duration"&&this.sourceCaches[s.source].setRasterFadeDuration(x),this._changed=!0,this._updatedPaintProps[s.id]=!0,this._serializedLayers=null}getPaintProperty(s,p){return this.getLayer(s).getPaintProperty(p)}setFeatureState(s,p){this._checkLoaded();const x=s.source,w=s.sourceLayer,T=this.sourceCaches[x];if(T===void 0)return void this.fire(new a.k(new Error(`The source '${x}' does not exist in the map's style.`)));const P=T.getSource().type;P==="geojson"&&w?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||w?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(w,s.id,p)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,p){this._checkLoaded();const x=s.source,w=this.sourceCaches[x];if(w===void 0)return void this.fire(new a.k(new Error(`The source '${x}' does not exist in the map's style.`)));const T=w.getSource().type,P=T==="vector"?s.sourceLayer:void 0;T!=="vector"||P?p&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(P,s.id,p):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const p=s.source,x=s.sourceLayer,w=this.sourceCaches[p];if(w!==void 0)return w.getSource().type!=="vector"||x?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),w.getFeatureState(x,s.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=a.bO(this.sourceCaches,T=>T.serialize()),p=this._serializeByIds(this._order,!0),x=this.map.getTerrain()||void 0,w=this.stylesheet;return a.bP({version:w.version,name:w.name,metadata:w.metadata,light:w.light,sky:w.sky,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,projection:w.projection,sources:s,layers:p,terrain:x},T=>T!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const p=P=>this._layers[P].type==="fill-extrusion",x={},w=[];for(let P=this._order.length-1;P>=0;P--){const O=this._order[P];if(p(O)){x[O]=P;for(const F of s){const G=F[O];if(G)for(const Y of G)w.push(Y)}}}w.sort((P,O)=>O.intersectionZ-P.intersectionZ);const T=[];for(let P=this._order.length-1;P>=0;P--){const O=this._order[P];if(p(O))for(let F=w.length-1;F>=0;F--){const G=w[F].feature;if(x[G.layer.id]<P)break;T.push(G),w.pop()}else for(const F of s){const G=F[O];if(G)for(const Y of G)T.push(Y.feature)}}return T}queryRenderedFeatures(s,p,x){p&&p.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",p.filter,null,p);const w={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const G of p.layers){const Y=this._layers[G];if(!Y)return this.fire(new a.k(new Error(`The layer '${G}' does not exist in the map's style and cannot be queried for features.`))),[];w[Y.source]=!0}}const T=[];p.availableImages=this._availableImages;const P=this._serializedAllLayers(),O=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,F=Object.assign(Object.assign({},p),{layers:O,globalState:this._globalState});for(const G in this.sourceCaches)p.layers&&!w[G]||T.push(Ge(this.sourceCaches[G],this._layers,P,s,F,x,this.map.terrain?(Y,ne,ee)=>this.map.terrain.getElevation(Y,ne,ee):void 0));return this.placement&&T.push(function(G,Y,ne,ee,ce,ye,Se){const we={},Te=ye.queryRenderedSymbols(ee),ze=[];for(const Le of Object.keys(Te).map(Number))ze.push(Se[Le]);ze.sort(Dt);for(const Le of ze){const Oe=Le.featureIndex.lookupSymbolFeatures(Te[Le.bucketInstanceId],Y,Le.bucketIndex,Le.sourceLayerIndex,{filterSpec:ce.filter,globalState:ce.globalState},ce.layers,ce.availableImages,G);for(const qe in Oe){const Ke=we[qe]=we[qe]||[],Fe=Oe[qe];Fe.sort((it,kt)=>{const yt=Le.featureSortOrder;if(yt){const _t=yt.indexOf(it.featureIndex);return yt.indexOf(kt.featureIndex)-_t}return kt.featureIndex-it.featureIndex});for(const it of Fe)Ke.push(it)}}return function(Le,Oe,qe){for(const Ke in Le)for(const Fe of Le[Ke])Lt(Fe,qe[Oe[Ke].source]);return Le}(we,G,ne)}(this._layers,P,this.sourceCaches,s,F,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(s,p){p!=null&&p.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",p.filter,null,p);const x=this.sourceCaches[s];return x?function(w,T){const P=w.getRenderableIds().map(G=>w.getTileByID(G)),O=[],F={};for(let G=0;G<P.length;G++){const Y=P[G],ne=Y.tileID.canonical.key;F[ne]||(F[ne]=!0,Y.querySourceFeatures(O,T))}return O}(x,p?Object.assign(Object.assign({},p),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(s,p={}){this._checkLoaded();const x=this.light.getLight();let w=!1;for(const P in s)if(!a.bH(s[P],x[P])){w=!0;break}if(!w)return;const T={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,p),this.light.updateTransitions(T)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,p={}){this._checkLoaded();const x=this.getSky();let w=!1;if(!s&&!x)return;if(s&&!x)w=!0;else if(!s&&x)w=!0;else for(const P in s)if(!a.bH(s[P],x[P])){w=!0;break}if(!w)return;const T={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,p),this.sky.updateTransitions(T)}_setProjectionInternal(s){const p=function(x){if(Array.isArray(x)){const w=new gt({type:x});return{projection:w,transform:new fa,cameraHelper:new Td(w)}}switch(x){case"mercator":return{projection:new So,transform:new jo,cameraHelper:new Aa};case"globe":{const w=new gt({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new fa,cameraHelper:new Td(w)}}case"vertical-perspective":return{projection:new Ne,transform:new Za,cameraHelper:new zr};default:return a.w(`Unknown projection name: ${x}. Falling back to mercator projection.`),{projection:new So,transform:new jo,cameraHelper:new Aa}}}(s);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const x in this.sourceCaches)this.sourceCaches[x].reload()}_validate(s,p,x,w,T={}){return(!T||T.validate!==!1)&&Dh(this,s.call(a.z,a.e({key:p,style:this.serialize(),value:x,styleSpec:a.v},w)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ln().off(Et,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const x=this.sourceCaches[p];x.setEventedParent(null),x.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const p in this.sourceCaches)this.sourceCaches[p].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,p,x,w,T=!1){let P=!1,O=!1;const F={};for(const G of this._order){const Y=this._layers[G];if(Y.type!=="symbol")continue;if(!F[Y.source]){const ee=this.sourceCaches[Y.source];F[Y.source]=ee.getRenderableIds(!0).map(ce=>ee.getTileByID(ce)).sort((ce,ye)=>ye.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(ye.tileID)?-1:1))}const ne=this.crossTileSymbolIndex.addLayer(Y,F[Y.source],s.center.lng);P=P||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||x===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),s.zoom))&&(this.pauseablePlacement=new ku(s,this.map.terrain,this._order,T,p,x,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,F),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),O=!0),P&&this.pauseablePlacement.placement.setStale()),O||P)for(const G of this._order){const Y=this._layers[G];Y.type==="symbol"&&this.placement.updateLayerOpacities(Y,F[Y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,p){return a._(this,void 0,void 0,function*(){const x=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[p.source];return w&&w.setDependencies(p.tileID.key,p.type,p.icons),x})}getGlyphs(s,p){return a._(this,void 0,void 0,function*(){const x=yield this.glyphManager.getGlyphs(p.stacks),w=this.sourceCaches[p.source];return w&&w.setDependencies(p.tileID.key,p.type,[""]),x})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,p={}){this._checkLoaded(),s&&this._validate(a.z.glyphs,"glyphs",s,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}getDashes(s,p){return a._(this,void 0,void 0,function*(){const x={};for(const[w,T]of Object.entries(p.dashes))x[w]=this.lineAtlas.getDash(T.dasharray,T.round);return x})}addSprite(s,p,x={},w){this._checkLoaded();const T=[{id:s,url:p}],P=[...le(this.stylesheet.sprite),...T];this._validate(a.z.sprite,"sprite",P,null,x)||(this.stylesheet.sprite=P,this._loadSprite(T,!0,w))}removeSprite(s){this._checkLoaded();const p=le(this.stylesheet.sprite);if(p.find(x=>x.id===s)){if(this._spritesImagesIds[s])for(const x of this._spritesImagesIds[s])this.imageManager.removeImage(x),this._changedImages[x]=!0;p.splice(p.findIndex(x=>x.id===s),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return le(this.stylesheet.sprite)}setSprite(s,p={},x){this._checkLoaded(),s&&this._validate(a.z.sprite,"sprite",s,null,p)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,x):(this._unloadSprite(),x&&x(null)))}}var Fy=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class zh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,p,x,w,T,P,O,F,G){this.context=s;let Y=this.boundPaintVertexBuffers.length!==w.length;for(let ne=0;!Y&&ne<w.length;ne++)this.boundPaintVertexBuffers[ne]!==w[ne]&&(Y=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==x||Y||this.boundIndexBuffer!==T||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==F||this.boundDynamicVertexBuffer3!==G?this.freshBind(p,x,w,T,P,O,F,G):(s.bindVertexArray.set(this.vao),O&&O.bind(),T&&T.dynamicDraw&&T.bind(),F&&F.bind(),G&&G.bind())}freshBind(s,p,x,w,T,P,O,F){const G=s.numAttributes,Y=this.context,ne=Y.gl;this.vao&&this.destroy(),this.vao=Y.createVertexArray(),Y.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=w,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=F,p.enableAttributes(ne,s);for(const ee of x)ee.enableAttributes(ne,s);P&&P.enableAttributes(ne,s),O&&O.enableAttributes(ne,s),F&&F.enableAttributes(ne,s),p.bind(),p.setVertexAttribPointers(ne,s,T);for(const ee of x)ee.bind(),ee.setVertexAttribPointers(ne,s,T);P&&(P.bind(),P.setVertexAttribPointers(ne,s,T)),w&&w.bind(),O&&(O.bind(),O.setVertexAttribPointers(ne,s,T)),F&&(F.bind(),F.setVertexAttribPointers(ne,s,T)),Y.currentNumAttributes=G}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const np=(j,s,p,x,w)=>({u_texture:0,u_ele_delta:j,u_fog_matrix:s,u_fog_color:p?p.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?0:p?p.calculateFogBlendOpacity(x):0,u_horizon_color:p?p.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:w?1:0}),Ih={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ul(j){const s=[];for(let p=0;p<j.length;p++){if(j[p]===null)continue;const x=j[p].split(" ");s.push(x.pop())}return s}class Cc{constructor(s,p,x,w,T,P,O,F,G=[]){const Y=s.gl;this.program=Y.createProgram();const ne=Ul(p.staticAttributes),ee=x?x.getBinderAttributes():[],ce=ne.concat(ee),ye=or.prelude.staticUniforms?Ul(or.prelude.staticUniforms):[],Se=O.staticUniforms?Ul(O.staticUniforms):[],we=p.staticUniforms?Ul(p.staticUniforms):[],Te=x?x.getBinderUniforms():[],ze=ye.concat(Se).concat(we).concat(Te),Le=[];for(const yt of ze)Le.indexOf(yt)<0&&Le.push(yt);const Oe=x?x.defines():[];As(Y)&&Oe.unshift("#version 300 es"),T&&Oe.push("#define OVERDRAW_INSPECTOR;"),P&&Oe.push("#define TERRAIN3D;"),F&&Oe.push(F),G&&Oe.push(...G);let qe=Oe.concat(or.prelude.fragmentSource,O.fragmentSource,p.fragmentSource).join(`
`),Ke=Oe.concat(or.prelude.vertexSource,O.vertexSource,p.vertexSource).join(`
`);As(Y)||(qe=function(yt){return yt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(qe),Ke=function(yt){return yt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ke));const Fe=Y.createShader(Y.FRAGMENT_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(Fe,qe),Y.compileShader(Fe),!Y.getShaderParameter(Fe,Y.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${Y.getShaderInfoLog(Fe)}`);Y.attachShader(this.program,Fe);const it=Y.createShader(Y.VERTEX_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(it,Ke),Y.compileShader(it),!Y.getShaderParameter(it,Y.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${Y.getShaderInfoLog(it)}`);Y.attachShader(this.program,it),this.attributes={};const kt={};this.numAttributes=ce.length;for(let yt=0;yt<this.numAttributes;yt++)ce[yt]&&(Y.bindAttribLocation(this.program,yt,ce[yt]),this.attributes[ce[yt]]=yt);if(Y.linkProgram(this.program),!Y.getProgramParameter(this.program,Y.LINK_STATUS))throw new Error(`Program failed to link: ${Y.getProgramInfoLog(this.program)}`);Y.deleteShader(it),Y.deleteShader(Fe);for(let yt=0;yt<Le.length;yt++){const _t=Le[yt];if(_t&&!kt[_t]){const bt=Y.getUniformLocation(this.program,_t);bt&&(kt[_t]=bt)}}this.fixedUniforms=w(s,kt),this.terrainUniforms=((yt,_t)=>({u_depth:new a.bQ(yt,_t.u_depth),u_terrain:new a.bQ(yt,_t.u_terrain),u_terrain_dim:new a.bg(yt,_t.u_terrain_dim),u_terrain_matrix:new a.bS(yt,_t.u_terrain_matrix),u_terrain_unpack:new a.bT(yt,_t.u_terrain_unpack),u_terrain_exaggeration:new a.bg(yt,_t.u_terrain_exaggeration)}))(s,kt),this.projectionUniforms=((yt,_t)=>({u_projection_matrix:new a.bS(yt,_t.u_projection_matrix),u_projection_tile_mercator_coords:new a.bT(yt,_t.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bT(yt,_t.u_projection_clipping_plane),u_projection_transition:new a.bg(yt,_t.u_projection_transition),u_projection_fallback_matrix:new a.bS(yt,_t.u_projection_fallback_matrix)}))(s,kt),this.binderUniforms=x?x.getUniforms(s,kt):[]}draw(s,p,x,w,T,P,O,F,G,Y,ne,ee,ce,ye,Se,we,Te,ze,Le){const Oe=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(x),s.setStencilMode(w),s.setColorMode(T),s.setCullFace(P),F){s.activeTexture.set(Oe.TEXTURE2),Oe.bindTexture(Oe.TEXTURE_2D,F.depthTexture),s.activeTexture.set(Oe.TEXTURE3),Oe.bindTexture(Oe.TEXTURE_2D,F.texture);for(const Ke in this.terrainUniforms)this.terrainUniforms[Ke].set(F[Ke])}if(G)for(const Ke in G)this.projectionUniforms[Ih[Ke]].set(G[Ke]);if(O)for(const Ke in this.fixedUniforms)this.fixedUniforms[Ke].set(O[Ke]);we&&we.setUniforms(s,this.binderUniforms,ye,{zoom:Se});let qe=0;switch(p){case Oe.LINES:qe=2;break;case Oe.TRIANGLES:qe=3;break;case Oe.LINE_STRIP:qe=1}for(const Ke of ce.get()){const Fe=Ke.vaos||(Ke.vaos={});(Fe[Y]||(Fe[Y]=new zh)).bind(s,this,ne,we?we.getPaintVertexBuffers():[],ee,Ke.vertexOffset,Te,ze,Le),Oe.drawElements(p,Ke.primitiveLength*qe,Oe.UNSIGNED_SHORT,Ke.primitiveOffset*qe*2)}}}function Co(j,s,p){const x=1/a.aC(p,1,s.transform.tileZoom),w=Math.pow(2,p.tileID.overscaledZ),T=p.tileSize*Math.pow(2,s.transform.tileZoom)/w,P=T*(p.tileID.canonical.x+p.tileID.wrap*w),O=T*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[x,j.fromScale,j.toScale],u_fade:j.t,u_pixel_coord_upper:[P>>16,O>>16],u_pixel_coord_lower:[65535&P,65535&O]}}const ip=(j,s,p,x)=>{const w=j.style.light,T=w.properties.get("position"),P=[T.x,T.y,T.z],O=a.bW();w.properties.get("anchor")==="viewport"&&a.bX(O,j.transform.bearingInRadians),a.bY(P,P,O);const F=j.transform.transformLightDirection(P),G=w.properties.get("color");return{u_lightpos:P,u_lightpos_globe:F,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[G.r,G.g,G.b],u_vertical_gradient:+s,u_opacity:p,u_fill_translate:x}},Oh=(j,s,p,x,w,T,P)=>a.e(ip(j,s,p,x),Co(T,j,P),{u_height_factor:-Math.pow(2,w.overscaledZ)/P.tileSize/8}),Tc=(j,s,p,x)=>a.e(Co(s,j,p),{u_fill_translate:x}),Mu=(j,s)=>({u_world:j,u_fill_translate:s}),Fm=(j,s,p,x,w)=>a.e(Tc(j,s,p,w),{u_world:x}),bl=(j,s,p,x,w)=>{const T=j.transform;let P,O,F=0;if(p.paint.get("circle-pitch-alignment")==="map"){const G=a.aC(s,1,T.zoom);P=!0,O=[G,G],F=G/(a.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*w}else P=!1,O=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+P,u_device_pixel_ratio:j.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:F,u_translate:x}},Ly=j=>({u_pixel_extrude_scale:[1/j.width,1/j.height]}),Nu=j=>({u_viewport_size:[j.width,j.height]}),Lm=(j,s=1)=>({u_color:j,u_overlay:0,u_overlay_scale:s}),Fh=(j,s,p,x)=>{const w=a.aC(j,1,s)/(a.$*Math.pow(2,j.tileID.overscaledZ))*2*Math.PI*x;return{u_extrude_scale:a.aC(j,1,s),u_intensity:p,u_globe_extrude_scale:w}},sp=(j,s,p,x)=>{const w=a.L();a.bZ(w,0,j.width,j.height,0,0,1);const T=j.context.gl;return{u_matrix:w,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:p,u_color_ramp:x,u_opacity:s.paint.get("heatmap-opacity")}},Au=(j,s,p)=>{const x=p.paint.get("hillshade-accent-color");let w;switch(p.paint.get("hillshade-method")){case"basic":w=4;break;case"combined":w=1;break;case"igor":w=2;break;case"multidirectional":w=3;break;default:w=0}const T=p.getIlluminationProperties();for(let P=0;P<T.directionRadians.length;P++)p.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[P]+=j.transform.bearingInRadians);return{u_image:0,u_latrange:Bm(0,s.tileID),u_exaggeration:p.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:x,u_method:w,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},kc=(j,s)=>{const p=s.stride,x=a.L();return a.bZ(x,0,a.$,-a.$,0,0,1),a.M(x,x,[0,-a.$,0]),{u_matrix:x,u_image:1,u_dimension:[p,p],u_zoom:j.overscaledZ,u_unpack:s.getUnpackVector()}};function Bm(j,s){const p=Math.pow(2,s.canonical.z),x=s.canonical.y;return[new a.a1(0,x/p).toLngLat().lat,new a.a1(0,(x+1)/p).toLngLat().lat]}const kd=(j,s,p=0)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:p,u_opacity:j.paint.get("color-relief-opacity")}),Pu=(j,s,p,x)=>{const w=j.transform;return{u_translation:op(j,s,p),u_ratio:x/a.aC(s,1,w.zoom),u_device_pixel_ratio:j.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},rp=(j,s,p,x,w)=>a.e(Pu(j,s,p,x),{u_image:0,u_image_height:w}),vl=(j,s,p,x,w)=>{const T=j.transform,P=$l(s,T);return{u_translation:op(j,s,p),u_texsize:s.imageAtlasTexture.size,u_ratio:x/a.aC(s,1,T.zoom),u_device_pixel_ratio:j.pixelRatio,u_image:0,u_scale:[P,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Lh=(j,s,p,x,w)=>{const T=$l(s,j.transform);return a.e(Pu(j,s,p,x),{u_tileratio:T,u_crossfade_from:w.fromScale,u_crossfade_to:w.toScale,u_image:0,u_mix:w.t,u_lineatlas_width:j.lineAtlas.width,u_lineatlas_height:j.lineAtlas.height})},ap=(j,s,p,x,w,T)=>{const P=$l(s,j.transform);return a.e(Pu(j,s,p,x),{u_image:0,u_image_height:T,u_tileratio:P,u_crossfade_from:w.fromScale,u_crossfade_to:w.toScale,u_image_dash:1,u_mix:w.t,u_lineatlas_width:j.lineAtlas.width,u_lineatlas_height:j.lineAtlas.height})};function $l(j,s){return 1/a.aC(j,1,s.tileZoom)}function op(j,s,p){return a.aD(j.transform,s,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Bh=(j,s,p,x,w)=>{return{u_tl_parent:j,u_scale_parent:s,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(P=x.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(T=x.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:By(x.paint.get("raster-hue-rotate")),u_coords_top:[w[0].x,w[0].y,w[1].x,w[1].y],u_coords_bottom:[w[3].x,w[3].y,w[2].x,w[2].y]};var T,P};function By(j){j*=Math.PI/180;const s=Math.sin(j),p=Math.cos(j);return[(2*p+1)/3,(-Math.sqrt(3)*s-p+1)/3,(Math.sqrt(3)*s-p+1)/3]}const Vm=(j,s,p,x,w,T,P,O,F,G,Y,ne,ee)=>{const ce=P.transform;return{u_is_size_zoom_constant:+(j==="constant"||j==="source"),u_is_size_feature_constant:+(j==="constant"||j==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:ce.cameraToCenterDistance,u_pitch:ce.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:ce.width/ce.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:F,u_is_text:+Y,u_pitch_with_map:+x,u_is_along_line:w,u_is_variable_anchor:T,u_texsize:ne,u_texture:0,u_translation:G,u_pitched_scale:ee}},lp=(j,s,p,x,w,T,P,O,F,G,Y,ne,ee,ce)=>{const ye=P.transform;return a.e(Vm(j,s,p,x,w,T,P,O,F,G,Y,ne,ce),{u_gamma_scale:x?Math.cos(ye.pitch*Math.PI/180)*ye.cameraToCenterDistance:1,u_device_pixel_ratio:P.pixelRatio,u_is_halo:1})},Um=(j,s,p,x,w,T,P,O,F,G,Y,ne,ee)=>a.e(lp(j,s,p,x,w,T,P,O,F,G,!0,Y,0,ee),{u_texsize_icon:ne,u_texture_icon:1}),pa=(j,s)=>({u_opacity:j,u_color:s}),Ec=(j,s,p,x,w)=>a.e(function(T,P,O,F){const G=O.imageManager.getPattern(T.from.toString()),Y=O.imageManager.getPattern(T.to.toString()),{width:ne,height:ee}=O.imageManager.getPixelSize(),ce=Math.pow(2,F.tileID.overscaledZ),ye=F.tileSize*Math.pow(2,O.transform.tileZoom)/ce,Se=ye*(F.tileID.canonical.x+F.tileID.wrap*ce),we=ye*F.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[ne,ee],u_mix:P.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/a.aC(F,1,O.transform.tileZoom),u_pixel_coord_upper:[Se>>16,we>>16],u_pixel_coord_lower:[65535&Se,65535&we]}}(p,w,s,x),{u_opacity:j}),Vh=(j,s)=>{},Ed={fillExtrusion:(j,s)=>({u_lightpos:new a.bU(j,s.u_lightpos),u_lightpos_globe:new a.bU(j,s.u_lightpos_globe),u_lightintensity:new a.bg(j,s.u_lightintensity),u_lightcolor:new a.bU(j,s.u_lightcolor),u_vertical_gradient:new a.bg(j,s.u_vertical_gradient),u_opacity:new a.bg(j,s.u_opacity),u_fill_translate:new a.bV(j,s.u_fill_translate)}),fillExtrusionPattern:(j,s)=>({u_lightpos:new a.bU(j,s.u_lightpos),u_lightpos_globe:new a.bU(j,s.u_lightpos_globe),u_lightintensity:new a.bg(j,s.u_lightintensity),u_lightcolor:new a.bU(j,s.u_lightcolor),u_vertical_gradient:new a.bg(j,s.u_vertical_gradient),u_height_factor:new a.bg(j,s.u_height_factor),u_opacity:new a.bg(j,s.u_opacity),u_fill_translate:new a.bV(j,s.u_fill_translate),u_image:new a.bQ(j,s.u_image),u_texsize:new a.bV(j,s.u_texsize),u_pixel_coord_upper:new a.bV(j,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(j,s.u_pixel_coord_lower),u_scale:new a.bU(j,s.u_scale),u_fade:new a.bg(j,s.u_fade)}),fill:(j,s)=>({u_fill_translate:new a.bV(j,s.u_fill_translate)}),fillPattern:(j,s)=>({u_image:new a.bQ(j,s.u_image),u_texsize:new a.bV(j,s.u_texsize),u_pixel_coord_upper:new a.bV(j,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(j,s.u_pixel_coord_lower),u_scale:new a.bU(j,s.u_scale),u_fade:new a.bg(j,s.u_fade),u_fill_translate:new a.bV(j,s.u_fill_translate)}),fillOutline:(j,s)=>({u_world:new a.bV(j,s.u_world),u_fill_translate:new a.bV(j,s.u_fill_translate)}),fillOutlinePattern:(j,s)=>({u_world:new a.bV(j,s.u_world),u_image:new a.bQ(j,s.u_image),u_texsize:new a.bV(j,s.u_texsize),u_pixel_coord_upper:new a.bV(j,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(j,s.u_pixel_coord_lower),u_scale:new a.bU(j,s.u_scale),u_fade:new a.bg(j,s.u_fade),u_fill_translate:new a.bV(j,s.u_fill_translate)}),circle:(j,s)=>({u_camera_to_center_distance:new a.bg(j,s.u_camera_to_center_distance),u_scale_with_map:new a.bQ(j,s.u_scale_with_map),u_pitch_with_map:new a.bQ(j,s.u_pitch_with_map),u_extrude_scale:new a.bV(j,s.u_extrude_scale),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(j,s.u_globe_extrude_scale),u_translate:new a.bV(j,s.u_translate)}),collisionBox:(j,s)=>({u_pixel_extrude_scale:new a.bV(j,s.u_pixel_extrude_scale)}),collisionCircle:(j,s)=>({u_viewport_size:new a.bV(j,s.u_viewport_size)}),debug:(j,s)=>({u_color:new a.bR(j,s.u_color),u_overlay:new a.bQ(j,s.u_overlay),u_overlay_scale:new a.bg(j,s.u_overlay_scale)}),depth:Vh,clippingMask:Vh,heatmap:(j,s)=>({u_extrude_scale:new a.bg(j,s.u_extrude_scale),u_intensity:new a.bg(j,s.u_intensity),u_globe_extrude_scale:new a.bg(j,s.u_globe_extrude_scale)}),heatmapTexture:(j,s)=>({u_matrix:new a.bS(j,s.u_matrix),u_world:new a.bV(j,s.u_world),u_image:new a.bQ(j,s.u_image),u_color_ramp:new a.bQ(j,s.u_color_ramp),u_opacity:new a.bg(j,s.u_opacity)}),hillshade:(j,s)=>({u_image:new a.bQ(j,s.u_image),u_latrange:new a.bV(j,s.u_latrange),u_exaggeration:new a.bg(j,s.u_exaggeration),u_altitudes:new a.b$(j,s.u_altitudes),u_azimuths:new a.b$(j,s.u_azimuths),u_accent:new a.bR(j,s.u_accent),u_method:new a.bQ(j,s.u_method),u_shadows:new a.b_(j,s.u_shadows),u_highlights:new a.b_(j,s.u_highlights)}),hillshadePrepare:(j,s)=>({u_matrix:new a.bS(j,s.u_matrix),u_image:new a.bQ(j,s.u_image),u_dimension:new a.bV(j,s.u_dimension),u_zoom:new a.bg(j,s.u_zoom),u_unpack:new a.bT(j,s.u_unpack)}),colorRelief:(j,s)=>({u_image:new a.bQ(j,s.u_image),u_unpack:new a.bT(j,s.u_unpack),u_dimension:new a.bV(j,s.u_dimension),u_elevation_stops:new a.bQ(j,s.u_elevation_stops),u_color_stops:new a.bQ(j,s.u_color_stops),u_color_ramp_size:new a.bQ(j,s.u_color_ramp_size),u_opacity:new a.bg(j,s.u_opacity)}),line:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels)}),lineGradient:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels),u_image:new a.bQ(j,s.u_image),u_image_height:new a.bg(j,s.u_image_height)}),linePattern:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_texsize:new a.bV(j,s.u_texsize),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_image:new a.bQ(j,s.u_image),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels),u_scale:new a.bU(j,s.u_scale),u_fade:new a.bg(j,s.u_fade)}),lineSDF:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels),u_image:new a.bQ(j,s.u_image),u_mix:new a.bg(j,s.u_mix),u_tileratio:new a.bg(j,s.u_tileratio),u_crossfade_from:new a.bg(j,s.u_crossfade_from),u_crossfade_to:new a.bg(j,s.u_crossfade_to),u_lineatlas_width:new a.bg(j,s.u_lineatlas_width),u_lineatlas_height:new a.bg(j,s.u_lineatlas_height)}),lineGradientSDF:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels),u_image:new a.bQ(j,s.u_image),u_image_height:new a.bg(j,s.u_image_height),u_tileratio:new a.bg(j,s.u_tileratio),u_crossfade_from:new a.bg(j,s.u_crossfade_from),u_crossfade_to:new a.bg(j,s.u_crossfade_to),u_image_dash:new a.bQ(j,s.u_image_dash),u_mix:new a.bg(j,s.u_mix),u_lineatlas_width:new a.bg(j,s.u_lineatlas_width),u_lineatlas_height:new a.bg(j,s.u_lineatlas_height)}),raster:(j,s)=>({u_tl_parent:new a.bV(j,s.u_tl_parent),u_scale_parent:new a.bg(j,s.u_scale_parent),u_buffer_scale:new a.bg(j,s.u_buffer_scale),u_fade_t:new a.bg(j,s.u_fade_t),u_opacity:new a.bg(j,s.u_opacity),u_image0:new a.bQ(j,s.u_image0),u_image1:new a.bQ(j,s.u_image1),u_brightness_low:new a.bg(j,s.u_brightness_low),u_brightness_high:new a.bg(j,s.u_brightness_high),u_saturation_factor:new a.bg(j,s.u_saturation_factor),u_contrast_factor:new a.bg(j,s.u_contrast_factor),u_spin_weights:new a.bU(j,s.u_spin_weights),u_coords_top:new a.bT(j,s.u_coords_top),u_coords_bottom:new a.bT(j,s.u_coords_bottom)}),symbolIcon:(j,s)=>({u_is_size_zoom_constant:new a.bQ(j,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(j,s.u_is_size_feature_constant),u_size_t:new a.bg(j,s.u_size_t),u_size:new a.bg(j,s.u_size),u_camera_to_center_distance:new a.bg(j,s.u_camera_to_center_distance),u_pitch:new a.bg(j,s.u_pitch),u_rotate_symbol:new a.bQ(j,s.u_rotate_symbol),u_aspect_ratio:new a.bg(j,s.u_aspect_ratio),u_fade_change:new a.bg(j,s.u_fade_change),u_label_plane_matrix:new a.bS(j,s.u_label_plane_matrix),u_coord_matrix:new a.bS(j,s.u_coord_matrix),u_is_text:new a.bQ(j,s.u_is_text),u_pitch_with_map:new a.bQ(j,s.u_pitch_with_map),u_is_along_line:new a.bQ(j,s.u_is_along_line),u_is_variable_anchor:new a.bQ(j,s.u_is_variable_anchor),u_texsize:new a.bV(j,s.u_texsize),u_texture:new a.bQ(j,s.u_texture),u_translation:new a.bV(j,s.u_translation),u_pitched_scale:new a.bg(j,s.u_pitched_scale)}),symbolSDF:(j,s)=>({u_is_size_zoom_constant:new a.bQ(j,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(j,s.u_is_size_feature_constant),u_size_t:new a.bg(j,s.u_size_t),u_size:new a.bg(j,s.u_size),u_camera_to_center_distance:new a.bg(j,s.u_camera_to_center_distance),u_pitch:new a.bg(j,s.u_pitch),u_rotate_symbol:new a.bQ(j,s.u_rotate_symbol),u_aspect_ratio:new a.bg(j,s.u_aspect_ratio),u_fade_change:new a.bg(j,s.u_fade_change),u_label_plane_matrix:new a.bS(j,s.u_label_plane_matrix),u_coord_matrix:new a.bS(j,s.u_coord_matrix),u_is_text:new a.bQ(j,s.u_is_text),u_pitch_with_map:new a.bQ(j,s.u_pitch_with_map),u_is_along_line:new a.bQ(j,s.u_is_along_line),u_is_variable_anchor:new a.bQ(j,s.u_is_variable_anchor),u_texsize:new a.bV(j,s.u_texsize),u_texture:new a.bQ(j,s.u_texture),u_gamma_scale:new a.bg(j,s.u_gamma_scale),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_is_halo:new a.bQ(j,s.u_is_halo),u_translation:new a.bV(j,s.u_translation),u_pitched_scale:new a.bg(j,s.u_pitched_scale)}),symbolTextAndIcon:(j,s)=>({u_is_size_zoom_constant:new a.bQ(j,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(j,s.u_is_size_feature_constant),u_size_t:new a.bg(j,s.u_size_t),u_size:new a.bg(j,s.u_size),u_camera_to_center_distance:new a.bg(j,s.u_camera_to_center_distance),u_pitch:new a.bg(j,s.u_pitch),u_rotate_symbol:new a.bQ(j,s.u_rotate_symbol),u_aspect_ratio:new a.bg(j,s.u_aspect_ratio),u_fade_change:new a.bg(j,s.u_fade_change),u_label_plane_matrix:new a.bS(j,s.u_label_plane_matrix),u_coord_matrix:new a.bS(j,s.u_coord_matrix),u_is_text:new a.bQ(j,s.u_is_text),u_pitch_with_map:new a.bQ(j,s.u_pitch_with_map),u_is_along_line:new a.bQ(j,s.u_is_along_line),u_is_variable_anchor:new a.bQ(j,s.u_is_variable_anchor),u_texsize:new a.bV(j,s.u_texsize),u_texsize_icon:new a.bV(j,s.u_texsize_icon),u_texture:new a.bQ(j,s.u_texture),u_texture_icon:new a.bQ(j,s.u_texture_icon),u_gamma_scale:new a.bg(j,s.u_gamma_scale),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_is_halo:new a.bQ(j,s.u_is_halo),u_translation:new a.bV(j,s.u_translation),u_pitched_scale:new a.bg(j,s.u_pitched_scale)}),background:(j,s)=>({u_opacity:new a.bg(j,s.u_opacity),u_color:new a.bR(j,s.u_color)}),backgroundPattern:(j,s)=>({u_opacity:new a.bg(j,s.u_opacity),u_image:new a.bQ(j,s.u_image),u_pattern_tl_a:new a.bV(j,s.u_pattern_tl_a),u_pattern_br_a:new a.bV(j,s.u_pattern_br_a),u_pattern_tl_b:new a.bV(j,s.u_pattern_tl_b),u_pattern_br_b:new a.bV(j,s.u_pattern_br_b),u_texsize:new a.bV(j,s.u_texsize),u_mix:new a.bg(j,s.u_mix),u_pattern_size_a:new a.bV(j,s.u_pattern_size_a),u_pattern_size_b:new a.bV(j,s.u_pattern_size_b),u_scale_a:new a.bg(j,s.u_scale_a),u_scale_b:new a.bg(j,s.u_scale_b),u_pixel_coord_upper:new a.bV(j,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(j,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(j,s.u_tile_units_to_pixels)}),terrain:(j,s)=>({u_texture:new a.bQ(j,s.u_texture),u_ele_delta:new a.bg(j,s.u_ele_delta),u_fog_matrix:new a.bS(j,s.u_fog_matrix),u_fog_color:new a.bR(j,s.u_fog_color),u_fog_ground_blend:new a.bg(j,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(j,s.u_fog_ground_blend_opacity),u_horizon_color:new a.bR(j,s.u_horizon_color),u_horizon_fog_blend:new a.bg(j,s.u_horizon_fog_blend),u_is_globe_mode:new a.bg(j,s.u_is_globe_mode)}),terrainDepth:(j,s)=>({u_ele_delta:new a.bg(j,s.u_ele_delta)}),terrainCoords:(j,s)=>({u_texture:new a.bQ(j,s.u_texture),u_terrain_coords_id:new a.bg(j,s.u_terrain_coords_id),u_ele_delta:new a.bg(j,s.u_ele_delta)}),projectionErrorMeasurement:(j,s)=>({u_input:new a.bg(j,s.u_input),u_output_expected:new a.bg(j,s.u_output_expected)}),atmosphere:(j,s)=>({u_sun_pos:new a.bU(j,s.u_sun_pos),u_atmosphere_blend:new a.bg(j,s.u_atmosphere_blend),u_globe_position:new a.bU(j,s.u_globe_position),u_globe_radius:new a.bg(j,s.u_globe_radius),u_inv_proj_matrix:new a.bS(j,s.u_inv_proj_matrix)}),sky:(j,s)=>({u_sky_color:new a.bR(j,s.u_sky_color),u_horizon_color:new a.bR(j,s.u_horizon_color),u_horizon:new a.bV(j,s.u_horizon),u_horizon_normal:new a.bV(j,s.u_horizon_normal),u_sky_horizon_blend:new a.bg(j,s.u_sky_horizon_blend),u_sky_blend:new a.bg(j,s.u_sky_blend)})};class Uo{constructor(s,p,x){this.context=s;const w=s.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Uh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Md{constructor(s,p,x,w){this.length=p.length,this.attributes=x,this.itemSize=p.bytesPerElement,this.dynamicDraw=w,this.context=s;const T=s.gl;this.buffer=T.createBuffer(),s.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,p){for(let x=0;x<this.attributes.length;x++){const w=p.attributes[this.attributes[x].name];w!==void 0&&s.enableVertexAttribArray(w)}}setVertexAttribPointers(s,p,x){for(let w=0;w<this.attributes.length;w++){const T=this.attributes[w],P=p.attributes[T.name];P!==void 0&&s.vertexAttribPointer(P,T.components,s[Uh[T.type]],!1,this.itemSize,T.offset+this.itemSize*(x||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zi{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Mc extends zi{getDefault(){return a.bf.transparent}set(s){const p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Nd extends zi{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class To extends zi{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Ad extends zi{getDefault(){return[!0,!0,!0,!0]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class $m extends zi{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Nc extends zi{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Ru extends zi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const p=this.current;(s.func!==p.func||s.ref!==p.ref||s.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class cp extends zi{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class up extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=s,this.dirty=!1}}class Ac extends zi{getDefault(){return[0,1]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class dp extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=s,this.dirty=!1}}class Pd extends zi{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Rd extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.BLEND):p.disable(p.BLEND),this.current=s,this.dirty=!1}}class $h extends zi{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class hp extends zi{getDefault(){return a.bf.transparent}set(s){const p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Pc extends zi{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Du extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=s,this.dirty=!1}}class Rc extends zi{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class ma extends zi{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Ya extends zi{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class fp extends zi{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class ga extends zi{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class mr extends zi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class wl extends zi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class zu extends zi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Hl extends zi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Dc extends zi{getDefault(){return null}set(s){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Hh extends zi{getDefault(){return null}set(s){var p;if(s===this.current&&!this.dirty)return;const x=this.gl;As(x)?x.bindVertexArray(s):(p=x.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class ko extends zi{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class zc extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Dd extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class $o extends zi{constructor(s,p){super(s),this.context=s,this.parent=p}getDefault(){return null}}class _i extends $o{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Ir extends $o{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class pp extends $o{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const Eo="Framebuffer is not complete";class Iu{constructor(s,p,x,w,T){this.context=s,this.width=p,this.height=x;const P=s.gl,O=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new _i(s,O),w)this.depthAttachment=T?new pp(s,O):new Ir(s,O);else if(T)throw new Error("Stencil cannot be set without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error(Eo)}destroy(){const s=this.context.gl,p=this.colorAttachment.get();if(p&&s.deleteTexture(p),this.depthAttachment){const x=this.depthAttachment.get();x&&s.deleteRenderbuffer(x)}s.deleteFramebuffer(this.framebuffer)}}class qh{constructor(s){var p,x;if(this.gl=s,this.clearColor=new Mc(this),this.clearDepth=new Nd(this),this.clearStencil=new To(this),this.colorMask=new Ad(this),this.depthMask=new $m(this),this.stencilMask=new Nc(this),this.stencilFunc=new Ru(this),this.stencilOp=new cp(this),this.stencilTest=new up(this),this.depthRange=new Ac(this),this.depthTest=new dp(this),this.depthFunc=new Pd(this),this.blend=new Rd(this),this.blendFunc=new $h(this),this.blendColor=new hp(this),this.blendEquation=new Pc(this),this.cullFace=new Du(this),this.cullFaceSide=new Rc(this),this.frontFace=new ma(this),this.program=new Ya(this),this.activeTexture=new fp(this),this.viewport=new ga(this),this.bindFramebuffer=new mr(this),this.bindRenderbuffer=new wl(this),this.bindTexture=new zu(this),this.bindVertexBuffer=new Hl(this),this.bindElementBuffer=new Dc(this),this.bindVertexArray=new Hh(this),this.pixelStoreUnpack=new ko(this),this.pixelStoreUnpackPremultiplyAlpha=new zc(this),this.pixelStoreUnpackFlipY=new Dd(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),As(s)){this.HALF_FLOAT=s.HALF_FLOAT;const w=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=s.RGBA16F)!==null&&p!==void 0?p:w==null?void 0:w.RGBA16F_EXT,this.RGB16F=(x=s.RGB16F)!==null&&x!==void 0?x:w==null?void 0:w.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const w=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=w==null?void 0:w.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,p){return new Uo(this,s,p)}createVertexBuffer(s,p,x){return new Md(this,s,p,x)}createRenderbuffer(s,p,x){const w=this.gl,T=w.createRenderbuffer();return this.bindRenderbuffer.set(T),w.renderbufferStorage(w.RENDERBUFFER,s,p,x),this.bindRenderbuffer.set(null),T}createFramebuffer(s,p,x,w){return new Iu(this,s,p,x,w)}clear({color:s,depth:p,stencil:x}){const w=this.gl;let T=0;s&&(T|=w.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(T|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),x!==void 0&&(T|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),w.clear(T)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){a.bH(s.blendFunction,Mi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return As(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var p;return As(this.gl)?this.gl.deleteVertexArray(s):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let Ho;function zd(j,s,p,x,w){const T=j.context,P=j.transform,O=T.gl,F=j.useProgram("collisionBox"),G=[];let Y=0,ne=0;for(let Te=0;Te<x.length;Te++){const ze=x[Te],Le=s.getTile(ze).getBucket(p);if(!Le)continue;const Oe=w?Le.textCollisionBox:Le.iconCollisionBox,qe=Le.collisionCircleArray;qe.length>0&&(G.push({circleArray:qe,circleOffset:ne,coord:ze}),Y+=qe.length/4,ne=Y),Oe&&F.draw(T,O.LINES,Kn.disabled,Xn.disabled,j.colorModeForRenderPass(),di.disabled,Ly(j.transform),j.style.map.terrain&&j.style.map.terrain.getTerrainData(ze),P.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,null,j.transform.zoom,null,null,Oe.collisionVertexBuffer)}if(!w||!G.length)return;const ee=j.useProgram("collisionCircle"),ce=new a.c0;ce.resize(4*Y),ce._trim();let ye=0;for(const Te of G)for(let ze=0;ze<Te.circleArray.length/4;ze++){const Le=4*ze,Oe=Te.circleArray[Le+0],qe=Te.circleArray[Le+1],Ke=Te.circleArray[Le+2],Fe=Te.circleArray[Le+3];ce.emplace(ye++,Oe,qe,Ke,Fe,0),ce.emplace(ye++,Oe,qe,Ke,Fe,1),ce.emplace(ye++,Oe,qe,Ke,Fe,2),ce.emplace(ye++,Oe,qe,Ke,Fe,3)}(!Ho||Ho.length<2*Y)&&(Ho=function(Te){const ze=2*Te,Le=new a.c2;Le.resize(ze),Le._trim();for(let Oe=0;Oe<ze;Oe++){const qe=6*Oe;Le.uint16[qe+0]=4*Oe+0,Le.uint16[qe+1]=4*Oe+1,Le.uint16[qe+2]=4*Oe+2,Le.uint16[qe+3]=4*Oe+2,Le.uint16[qe+4]=4*Oe+3,Le.uint16[qe+5]=4*Oe+0}return Le}(Y));const Se=T.createIndexBuffer(Ho,!0),we=T.createVertexBuffer(ce,a.c1.members,!0);for(const Te of G){const ze=Nu(j.transform);ee.draw(T,O.TRIANGLES,Kn.disabled,Xn.disabled,j.colorModeForRenderPass(),di.disabled,ze,j.style.map.terrain&&j.style.map.terrain.getTerrainData(Te.coord),null,p.id,we,Se,a.aM.simpleSegment(0,2*Te.circleOffset,Te.circleArray.length,Te.circleArray.length/2),null,j.transform.zoom,null,null,null)}we.destroy(),Se.destroy()}const mp=a.ag(new Float32Array(16));function ql(j,s,p,x,w,T){const{horizontalAlign:P,verticalAlign:O}=a.aH(j);return new a.P((-(P-.5)*s/w+x[0])*T,(-(O-.5)*p/w+x[1])*T)}function Sl(j,s,p,x,w,T){const P=s.tileAnchorPoint.add(new a.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let O=x.mult(T);p||(O=O.rotate(-w));const F=P.add(O);return lt(F.x,F.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(p){const O=Ii(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(j),F=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return j.add(x.rotate(F))}return j.add(x)}function Ic(j,s,p,x,w,T,P,O,F,G,Y,ne){const ee=j.text.placedSymbolArray,ce=j.text.dynamicLayoutVertexArray,ye=j.icon.dynamicLayoutVertexArray,Se={};ce.clear();for(let we=0;we<ee.length;we++){const Te=ee.get(we),ze=Te.hidden||!Te.crossTileID||j.allowVerticalPlacement&&!Te.placedOrientation?null:x[Te.crossTileID];if(ze){const Le=new a.P(Te.anchorX,Te.anchorY),Oe={getElevation:ne,width:w.width,height:w.height,pitchedLabelPlaneMatrix:T,pitchWithMap:p,transform:w,tileAnchorPoint:Le,translation:G,unwrappedTileID:Y},qe=p?Vn(Le.x,Le.y,Oe):Ii(Le.x,Le.y,Oe),Ke=Ri(w.cameraToCenterDistance,qe.signedDistanceFromCamera);let Fe=a.ap(j.textSizeData,O,Te)*Ke/a.aB;p&&(Fe*=j.tilePixelRatio/P);const{width:it,height:kt,anchor:yt,textOffset:_t,textBoxScale:bt}=ze,sn=ql(yt,it,kt,_t,bt,Fe),rn=w.getPitchedTextCorrection(Le.x+G[0],Le.y+G[1],Y),Yt=Sl(qe.point,Oe,s,sn,-w.bearingInRadians,rn),Mn=j.allowVerticalPlacement&&Te.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let ni=0;ni<Te.numGlyphs;ni++)a.av(ce,Yt,Mn);F&&Te.associatedIconIndex>=0&&(Se[Te.associatedIconIndex]={shiftedAnchor:Yt,angle:Mn})}else Qr(Te.numGlyphs,ce)}if(F){ye.clear();const we=j.icon.placedSymbolArray;for(let Te=0;Te<we.length;Te++){const ze=we.get(Te);if(ze.hidden)Qr(ze.numGlyphs,ye);else{const Le=Se[Te];if(Le)for(let Oe=0;Oe<ze.numGlyphs;Oe++)a.av(ye,Le.shiftedAnchor,Le.angle);else Qr(ze.numGlyphs,ye)}}j.icon.dynamicLayoutVertexBuffer.updateData(ye)}j.text.dynamicLayoutVertexBuffer.updateData(ce)}function Oc(j,s,p){return p.iconsInText&&s?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"}function ta(j,s,p,x,w,T,P,O,F,G,Y,ne,ee){const ce=j.context,ye=ce.gl,Se=j.transform,we=O==="map",Te=F==="map",ze=O!=="viewport"&&p.layout.get("symbol-placement")!=="point",Le=we&&!Te&&!ze,Oe=!p.layout.get("symbol-sort-key").isConstant();let qe=!1;const Ke=j.getDepthModeForSublayer(0,Kn.ReadOnly),Fe=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=[],kt=Se.getCircleRadiusCorrection();for(const yt of x){const _t=s.getTile(yt),bt=_t.getBucket(p);if(!bt)continue;const sn=w?bt.text:bt.icon;if(!sn||!sn.segments.get().length||!sn.hasVisibleVertices)continue;const rn=sn.programConfigurations.get(p.id),Yt=w||bt.sdfIcons,Mn=w?bt.textSizeData:bt.iconSizeData,ni=Te||Se.pitch!==0,Li=j.useProgram(Oc(Yt,w,bt),rn),Bi=a.an(Mn,Se.zoom),Ji=j.style.map.terrain&&j.style.map.terrain.getTerrainData(yt);let ks,is,gi,as,er=[0,0],Bs=null;if(w)is=_t.glyphAtlasTexture,gi=ye.LINEAR,ks=_t.glyphAtlasTexture.size,bt.iconsInText&&(er=_t.imageAtlasTexture.size,Bs=_t.imageAtlasTexture,as=ni||j.options.rotating||j.options.zooming||Mn.kind==="composite"||Mn.kind==="camera"?ye.LINEAR:ye.NEAREST);else{const Ds=p.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear;is=_t.imageAtlasTexture,gi=Yt||j.options.rotating||j.options.zooming||Ds||ni?ye.LINEAR:ye.NEAREST,ks=_t.imageAtlasTexture.size}const Vs=a.aC(_t,1,j.transform.zoom),yr=Bn(we,j.transform,Vs),Al=a.L();a.aq(Al,yr);const so=yi(Te,we,j.transform,Vs),ic=a.aD(Se,_t,T,P),ro=Se.getProjectionData({overscaledTileID:yt,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),sc=Fe&&bt.hasTextData(),Pl=p.layout.get("icon-text-fit")!=="none"&&sc&&bt.hasIconData();if(ze){const Ds=j.style.map.terrain?(Us,xs)=>j.style.map.terrain.getElevation(yt,Us,xs):null,Ki=p.layout.get("text-rotation-alignment")==="map";Wi(bt,j,w,yr,Al,Te,G,Ki,yt.toUnwrapped(),Se.width,Se.height,ic,Ds)}const Fa=w&&Fe||Pl,Br=ze||Fa?mp:Te?yr:j.transform.clipSpaceToPixelsMatrix,Po=Yt&&p.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ro;Ro=Yt?bt.iconsInText?Um(Mn.kind,Bi,Le,Te,ze,Fa,j,Br,so,ic,ks,er,kt):lp(Mn.kind,Bi,Le,Te,ze,Fa,j,Br,so,ic,w,ks,0,kt):Vm(Mn.kind,Bi,Le,Te,ze,Fa,j,Br,so,ic,w,ks,kt);const xr={program:Li,buffers:sn,uniformValues:Ro,projectionData:ro,atlasTexture:is,atlasTextureIcon:Bs,atlasInterpolation:gi,atlasInterpolationIcon:as,isSDF:Yt,hasHalo:Po};if(Oe&&bt.canOverlap){qe=!0;const Ds=sn.segments.get();for(const Ki of Ds)it.push({segments:new a.aM([Ki]),sortKey:Ki.sortKey,state:xr,terrainData:Ji})}else it.push({segments:sn.segments,sortKey:0,state:xr,terrainData:Ji})}qe&&it.sort((yt,_t)=>yt.sortKey-_t.sortKey);for(const yt of it){const _t=yt.state;if(ce.activeTexture.set(ye.TEXTURE0),_t.atlasTexture.bind(_t.atlasInterpolation,ye.CLAMP_TO_EDGE),_t.atlasTextureIcon&&(ce.activeTexture.set(ye.TEXTURE1),_t.atlasTextureIcon&&_t.atlasTextureIcon.bind(_t.atlasInterpolationIcon,ye.CLAMP_TO_EDGE)),_t.isSDF){const bt=_t.uniformValues;_t.hasHalo&&(bt.u_is_halo=1,ya(_t.buffers,yt.segments,p,j,_t.program,Ke,Y,ne,bt,_t.projectionData,yt.terrainData)),bt.u_is_halo=0}ya(_t.buffers,yt.segments,p,j,_t.program,Ke,Y,ne,_t.uniformValues,_t.projectionData,yt.terrainData)}}function ya(j,s,p,x,w,T,P,O,F,G,Y){const ne=x.context;w.draw(ne,ne.gl.TRIANGLES,T,P,O,di.backCCW,F,Y,G,p.id,j.layoutVertexBuffer,j.indexBuffer,s,p.paint,x.transform.zoom,j.programConfigurations.get(p.id),j.dynamicLayoutVertexBuffer,j.opacityVertexBuffer)}function qo(j,s,p,x,w){const T=j.context,P=T.gl,O=Xn.disabled,F=new Mi([P.ONE,P.ONE],a.bf.transparent,[!0,!0,!0,!0]),G=s.getBucket(p);if(!G)return;const Y=x.key;let ne=p.heatmapFbos.get(Y);ne||(ne=Pa(T,s.tileSize,s.tileSize),p.heatmapFbos.set(Y,ne)),T.bindFramebuffer.set(ne.framebuffer),T.viewport.set([0,0,s.tileSize,s.tileSize]),T.clear({color:a.bf.transparent});const ee=G.programConfigurations.get(p.id),ce=j.useProgram("heatmap",ee,!w),ye=j.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Se=j.style.map.terrain.getTerrainData(x);ce.draw(T,P.TRIANGLES,Kn.disabled,O,F,di.disabled,Fh(s,j.transform.zoom,p.paint.get("heatmap-intensity"),1),Se,ye,p.id,G.layoutVertexBuffer,G.indexBuffer,G.segments,p.paint,j.transform.zoom,ee)}function Xa(j,s,p,x,w){const T=j.context,P=T.gl,O=j.transform;T.setColorMode(j.colorModeForRenderPass());const F=Ra(T,s),G=p.key,Y=s.heatmapFbos.get(G);if(!Y)return;T.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,Y.colorAttachment.get()),T.activeTexture.set(P.TEXTURE1),F.bind(P.LINEAR,P.CLAMP_TO_EDGE);const ne=O.getProjectionData({overscaledTileID:p,applyTerrainMatrix:w,applyGlobeMatrix:!x});j.useProgram("heatmapTexture").draw(T,P.TRIANGLES,Kn.disabled,Xn.disabled,j.colorModeForRenderPass(),di.disabled,sp(j,s,0,1),null,ne,s.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments,s.paint,O.zoom),Y.destroy(),s.heatmapFbos.delete(G)}function Pa(j,s,p){var x,w;const T=j.gl,P=T.createTexture();T.bindTexture(T.TEXTURE_2D,P),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const O=(x=j.HALF_FLOAT)!==null&&x!==void 0?x:T.UNSIGNED_BYTE,F=(w=j.RGBA16F)!==null&&w!==void 0?w:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,F,s,p,0,T.RGBA,O,null);const G=j.createFramebuffer(s,p,!1,!1);return G.colorAttachment.set(P),G}function Ra(j,s){return s.colorRampTexture||(s.colorRampTexture=new a.T(j,s.colorRamp,j.gl.RGBA)),s.colorRampTexture}function Id(j,s,p,x,w,T,P,O){let F=256;if(w.stepInterpolant){const G=s.getSource().maxzoom,Y=P.canonical.z===G?Math.ceil(1<<j.transform.maxZoom-P.canonical.z):1;F=a.ah(a.c4(T.maxLineLength/a.$*1024*Y),256,p.maxTextureSize)}return O.gradient=a.c5({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:F,image:O.gradient||void 0,clips:T.lineClipsArray}),O.texture?O.texture.update(O.gradient):O.texture=new a.T(p,O.gradient,x.RGBA),O.version=w.gradientVersion,O.texture}function gp(j,s,p,x,w){j.activeTexture.set(s.TEXTURE0),p.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),x.updatePaintBuffers(w)}function Fc(j,s,p,x,w,T){(w||j.lineAtlas.dirty)&&(s.activeTexture.set(p.TEXTURE0),j.lineAtlas.bind(s)),x.updatePaintBuffers(T)}function na(j,s,p,x,w,T,P){const O=T.gradients[w.id];let F=O.texture;w.gradientVersion!==O.version&&(F=Id(j,s,p,x,w,T,P,O)),p.activeTexture.set(x.TEXTURE0),F.bind(w.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE)}function Rs(j,s,p,x,w,T,P,O,F){const G=T.gradients[w.id];let Y=G.texture;w.gradientVersion!==G.version&&(Y=Id(j,s,p,x,w,T,P,G)),p.activeTexture.set(x.TEXTURE0),Y.bind(w.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE),p.activeTexture.set(x.TEXTURE1),j.lineAtlas.bind(p),O.updatePaintBuffers(F)}function Ni(j,s,p,x,w){if(!p||!x||!x.imageAtlas)return;const T=x.imageAtlas.patternPositions;let P=T[p.to.toString()],O=T[p.from.toString()];if(!P&&O&&(P=O),!O&&P&&(O=P),!P||!O){const F=w.getPaintProperty(s);P=T[F],O=T[F]}P&&O&&j.setConstantPatternPositions(P,O)}function Go(j,s,p,x,w,T,P,O){const F=j.context.gl,G="fill-pattern",Y=p.paint.get(G),ne=Y&&Y.constantOr(1),ee=p.getCrossfadeParameters();let ce,ye,Se,we,Te;const ze=j.transform,Le=p.paint.get("fill-translate"),Oe=p.paint.get("fill-translate-anchor");P?(ye=ne&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ce=F.LINES):(ye=ne?"fillPattern":"fill",ce=F.TRIANGLES);const qe=Y.constantOr(null);for(const Ke of x){const Fe=s.getTile(Ke);if(ne&&!Fe.patternsLoaded())continue;const it=Fe.getBucket(p);if(!it)continue;const kt=it.programConfigurations.get(p.id),yt=j.useProgram(ye,kt),_t=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Ke);ne&&(j.context.activeTexture.set(F.TEXTURE0),Fe.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),kt.updatePaintBuffers(ee)),Ni(kt,G,qe,Fe,p);const bt=ze.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),sn=a.aD(ze,Fe,Le,Oe);if(P){we=it.indexBuffer2,Te=it.segments2;const Yt=[F.drawingBufferWidth,F.drawingBufferHeight];Se=ye==="fillOutlinePattern"&&ne?Fm(j,ee,Fe,Yt,sn):Mu(Yt,sn)}else we=it.indexBuffer,Te=it.segments,Se=ne?Tc(j,ee,Fe,sn):{u_fill_translate:sn};const rn=j.stencilModeForClipping(Ke);yt.draw(j.context,ce,w,rn,T,di.backCCW,Se,_t,bt,p.id,it.layoutVertexBuffer,we,Te,p.paint,j.transform.zoom,kt)}}function Da(j,s,p,x,w,T,P,O){const F=j.context,G=F.gl,Y="fill-extrusion-pattern",ne=p.paint.get(Y),ee=ne.constantOr(1),ce=p.getCrossfadeParameters(),ye=p.paint.get("fill-extrusion-opacity"),Se=ne.constantOr(null),we=j.transform;for(const Te of x){const ze=s.getTile(Te),Le=ze.getBucket(p);if(!Le)continue;const Oe=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Te),qe=Le.programConfigurations.get(p.id),Ke=j.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",qe);ee&&(j.context.activeTexture.set(G.TEXTURE0),ze.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),qe.updatePaintBuffers(ce));const Fe=we.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!O,applyTerrainMatrix:!0});Ni(qe,Y,Se,ze,p);const it=a.aD(we,ze,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),kt=p.paint.get("fill-extrusion-vertical-gradient"),yt=ee?Oh(j,kt,ye,it,Te,ce,ze):ip(j,kt,ye,it);Ke.draw(F,F.gl.TRIANGLES,w,T,P,di.backCCW,yt,Oe,Fe,p.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,p.paint,j.transform.zoom,qe,j.style.map.terrain&&Le.centroidVertexBuffer)}}function Ou(j,s,p,x,w,T,P,O,F){var G;const Y=j.style.projection,ne=j.context,ee=j.transform,ce=ne.gl,ye=[`#define NUM_ILLUMINATION_SOURCES ${p.paint.get("hillshade-highlight-color").values.length}`],Se=j.useProgram("hillshade",null,!1,ye),we=!j.options.moving;for(const Te of x){const ze=s.getTile(Te),Le=ze.fbo;if(!Le)continue;const Oe=Y.getMeshFromTileID(ne,Te.canonical,O,!0,"raster"),qe=(G=j.style.map.terrain)===null||G===void 0?void 0:G.getTerrainData(Te);ne.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,Le.colorAttachment.get());const Ke=ee.getProjectionData({overscaledTileID:Te,aligned:we,applyGlobeMatrix:!F,applyTerrainMatrix:!0});Se.draw(ne,ce.TRIANGLES,T,w[Te.overscaledZ],P,di.backCCW,Au(j,ze,p),qe,Ke,p.id,Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}}function Ka(j,s,p,x,w,T,P,O,F){var G;const Y=j.style.projection,ne=j.context,ee=j.transform,ce=ne.gl,ye=j.useProgram("colorRelief"),Se=!j.options.moving;let we=!0,Te=0;for(const ze of x){const Le=s.getTile(ze),Oe=Le.dem;if(we){const yt=ce.getParameter(ce.MAX_TEXTURE_SIZE),{elevationTexture:_t,colorTexture:bt}=p.getColorRampTextures(ne,yt,Oe.getUnpackVector());ne.activeTexture.set(ce.TEXTURE1),_t.bind(ce.NEAREST,ce.CLAMP_TO_EDGE),ne.activeTexture.set(ce.TEXTURE4),bt.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),we=!1,Te=_t.size[0]}if(!Oe||!Oe.data)continue;const qe=Oe.stride,Ke=Oe.getPixels();if(ne.activeTexture.set(ce.TEXTURE0),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),Le.demTexture=Le.demTexture||j.getTileTexture(qe),Le.demTexture){const yt=Le.demTexture;yt.update(Ke,{premultiply:!1}),yt.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}else Le.demTexture=new a.T(ne,Ke,ce.RGBA,{premultiply:!1}),Le.demTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const Fe=Y.getMeshFromTileID(ne,ze.canonical,O,!0,"raster"),it=(G=j.style.map.terrain)===null||G===void 0?void 0:G.getTerrainData(ze),kt=ee.getProjectionData({overscaledTileID:ze,aligned:Se,applyGlobeMatrix:!F,applyTerrainMatrix:!0});ye.draw(ne,ce.TRIANGLES,T,w[ze.overscaledZ],P,di.backCCW,kd(p,Le.dem,Te),it,kt,p.id,Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}}const Fu=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Od(j,s,p,x,w,T,P,O,F=!1,G=!1){const Y=x[x.length-1].overscaledZ,ne=j.context,ee=ne.gl,ce=j.useProgram("raster"),ye=j.transform,Se=j.style.projection,we=j.colorModeForRenderPass(),Te=!j.options.moving,ze=p.paint.get("raster-opacity"),Le=p.paint.get("raster-resampling"),Oe=p.paint.get("raster-fade-duration"),qe=!!j.style.map.terrain;for(const Ke of x){const Fe=j.getDepthModeForSublayer(Ke.overscaledZ-Y,ze===1?Kn.ReadWrite:Kn.ReadOnly,ee.LESS),it=s.getTile(Ke),kt=Le==="nearest"?ee.NEAREST:ee.LINEAR;ne.activeTexture.set(ee.TEXTURE0),it.texture.bind(kt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),ne.activeTexture.set(ee.TEXTURE1);const{parentTile:yt,parentScaleBy:_t,parentTopLeft:bt,fadeValues:sn}=Lu(it,s,Oe,qe);it.fadeOpacity=sn.tileOpacity,yt?(yt.fadeOpacity=sn.parentTileOpacity,yt.texture.bind(kt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST)):it.texture.bind(kt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),it.texture.useMipmap&&ne.extTextureFilterAnisotropic&&j.transform.pitch>20&&ee.texParameterf(ee.TEXTURE_2D,ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ne.extTextureFilterAnisotropicMax);const rn=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Ke),Yt=ye.getProjectionData({overscaledTileID:Ke,aligned:Te,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Mn=Bh(bt,_t,sn.fadeMix,p,O),ni=Se.getMeshFromTileID(ne,Ke.canonical,T,P,"raster");ce.draw(ne,ee.TRIANGLES,Fe,w?w[Ke.overscaledZ]:Xn.disabled,we,F?di.frontCCW:di.backCCW,Mn,rn,Yt,p.id,ni.vertexBuffer,ni.indexBuffer,ni.segments)}}function Lu(j,s,p,x){const w={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(p===0||x)return w;if(j.fadingParentID){const T=s._getLoadedTile(j.fadingParentID);if(!T)return w;const P=Math.pow(2,T.tileID.overscaledZ-j.tileID.overscaledZ),O=[j.tileID.canonical.x*P%1,j.tileID.canonical.y*P%1],F=function(G,Y,ne){const ee=A.now(),ce=(ee-Y.timeAdded)/ne,ye=G.fadingDirection===ke.Incoming,Se=a.ah((ee-G.timeAdded)/ne,0,1),we=a.ah(1-ce,0,1),Te=ye?Se:we;return{tileOpacity:Te,parentTileOpacity:ye?we:Se,fadeMix:{opacity:1,mix:1-Te}}}(j,T,p);return{parentTile:T,parentScaleBy:P,parentTopLeft:O,fadeValues:F}}if(j.selfFading){const T=function(P,O){const F=A.now(),G=a.ah((F-P.timeAdded)/O,0,1);return{tileOpacity:G,fadeMix:{opacity:G,mix:0}}}(j,p);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:T}}return w}const fs=new a.bf(1,0,0,1),Gl=new a.bf(0,1,0,1),Or=new a.bf(0,0,1,1),Fd=new a.bf(1,0,1,1),Wo=new a.bf(0,1,1,1);function Mo(j,s,p,x){_a(j,0,s+p/2,j.transform.width,p,x)}function xa(j,s,p,x){_a(j,s-p/2,0,p,j.transform.height,x)}function _a(j,s,p,x,w,T){const P=j.context,O=P.gl;O.enable(O.SCISSOR_TEST),O.scissor(s*j.pixelRatio,p*j.pixelRatio,x*j.pixelRatio,w*j.pixelRatio),P.clear({color:T}),O.disable(O.SCISSOR_TEST)}function Lc(j,s,p){const x=j.context,w=x.gl,T=j.useProgram("debug"),P=Kn.disabled,O=Xn.disabled,F=j.colorModeForRenderPass(),G="$debug",Y=j.style.map.terrain&&j.style.map.terrain.getTerrainData(p);x.activeTexture.set(w.TEXTURE0);const ne=s.getTileByID(p.key).latestRawTileData,ee=Math.floor((ne&&ne.byteLength||0)/1024),ce=s.getTile(p).tileSize,ye=512/Math.min(ce,512)*(p.overscaledZ/j.transform.zoom)*.5;let Se=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Se+=` => ${p.overscaledZ}`),function(Te,ze){Te.initDebugOverlayCanvas();const Le=Te.debugOverlayCanvas,Oe=Te.context.gl,qe=Te.debugOverlayCanvas.getContext("2d");qe.clearRect(0,0,Le.width,Le.height),qe.shadowColor="white",qe.shadowBlur=2,qe.lineWidth=1.5,qe.strokeStyle="white",qe.textBaseline="top",qe.font="bold 36px Open Sans, sans-serif",qe.fillText(ze,5,5),qe.strokeText(ze,5,5),Te.debugOverlayTexture.update(Le),Te.debugOverlayTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE)}(j,`${Se} ${ee}kB`);const we=j.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(x,w.TRIANGLES,P,O,Mi.alphaBlended,di.disabled,Lm(a.bf.transparent,ye),null,we,G,j.debugBuffer,j.quadTriangleIndexBuffer,j.debugSegments),T.draw(x,w.LINE_STRIP,P,O,F,di.disabled,Lm(a.bf.red),Y,we,G,j.debugBuffer,j.tileBorderIndexBuffer,j.debugSegments)}function Bu(j,s,p,x){const{isRenderingGlobe:w}=x,T=j.context,P=T.gl,O=j.transform,F=j.colorModeForRenderPass(),G=j.getDepthModeFor3D(),Y=j.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,j.width,j.height]);for(const ne of p){const ee=s.getTerrainMesh(ne.tileID),ce=j.renderToTexture.getTexture(ne),ye=s.getTerrainData(ne.tileID);T.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,ce.texture);const Se=s.getMeshFrameDelta(O.zoom),we=O.calculateFogMatrix(ne.tileID.toUnwrapped()),Te=np(Se,we,j.style.sky,O.pitch,w),ze=O.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Y.draw(T,P.TRIANGLES,G,Xn.disabled,F,di.backCCW,Te,ye,ze,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}function Bc(j,s){if(!s.mesh){const p=new a.aL;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const x=new a.aN;x.emplaceBack(0,1,2),x.emplaceBack(0,2,3),s.mesh=new wo(j.createVertexBuffer(p,Sr.members),j.createIndexBuffer(x),a.aM.simpleSegment(0,0,p.length,x.length))}return s.mesh}class Ld{constructor(s,p){this.context=new qh(s),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ut.maxUnderzooming+Ut.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vl}resize(s,p,x){if(this.width=Math.floor(s*x),this.height=Math.floor(p*x),this.pixelRatio=x,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const s=this.context,p=new a.aL;p.emplaceBack(0,0),p.emplaceBack(a.$,0),p.emplaceBack(0,a.$),p.emplaceBack(a.$,a.$),this.tileExtentBuffer=s.createVertexBuffer(p,Sr.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const x=new a.aL;x.emplaceBack(0,0),x.emplaceBack(a.$,0),x.emplaceBack(0,a.$),x.emplaceBack(a.$,a.$),this.debugBuffer=s.createVertexBuffer(x,Sr.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const w=new a.c7;w.emplaceBack(0,0,0,0),w.emplaceBack(a.$,0,a.$,0),w.emplaceBack(0,a.$,0,a.$),w.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=s.createVertexBuffer(w,Fy.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const T=new a.aL;T.emplaceBack(0,0),T.emplaceBack(a.$,0),T.emplaceBack(0,a.$),T.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(T,Sr.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const P=new a.aL;P.emplaceBack(0,0),P.emplaceBack(1,0),P.emplaceBack(0,1),P.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(P,Sr.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const O=new a.c8;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(O);const F=new a.aN;F.emplaceBack(1,0,2),F.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(F);const G=this.context.gl;this.stencilClearMode=new Xn({func:G.ALWAYS,mask:0},0,255,G.ZERO,G.ZERO,G.ZERO),this.tileExtentMesh=new wo(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,p=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const x=a.L();a.bZ(x,0,this.width,this.height,0,0,1),a.N(x,x,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const w={mainMatrix:x,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:x};this.useProgram("clippingMask",null,!0).draw(s,p.TRIANGLES,Kn.disabled,this.stencilClearMode,Mi.disabled,di.disabled,null,null,w,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,p,x){if(this.currentStencilSource===s.source||!s.isTileClipped()||!p||!p.length)return;this.currentStencilSource=s.source,this.nextStencilID+p.length>256&&this.clearStencil();const w=this.context;w.setColorMode(Mi.disabled),w.setDepthMode(Kn.disabled);const T={};for(const P of p)T[P.key]=this.nextStencilID++;this._renderTileMasks(T,p,x,!0),this._renderTileMasks(T,p,x,!1),this._tileClippingMaskIDs=T}_renderTileMasks(s,p,x,w){const T=this.context,P=T.gl,O=this.style.projection,F=this.transform,G=this.useProgram("clippingMask");for(const Y of p){const ne=s[Y.key],ee=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Y),ce=O.getMeshFromTileID(this.context,Y.canonical,w,!0,"stencil"),ye=F.getProjectionData({overscaledTileID:Y,applyGlobeMatrix:!x,applyTerrainMatrix:!0});G.draw(T,P.TRIANGLES,Kn.disabled,new Xn({func:P.ALWAYS,mask:0},ne,255,P.KEEP,P.KEEP,P.REPLACE),Mi.disabled,x?di.disabled:di.backCCW,null,ee,ye,"$clipping",ce.vertexBuffer,ce.indexBuffer,ce.segments)}}_renderTilesDepthBuffer(){const s=this.context,p=s.gl,x=this.style.projection,w=this.transform,T=this.useProgram("depth"),P=this.getDepthModeFor3D(),O=wt(w,{tileSize:w.tileSize});for(const F of O){const G=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F),Y=x.getMeshFromTileID(this.context,F.canonical,!0,!0,"raster"),ne=w.getProjectionData({overscaledTileID:F,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(s,p.TRIANGLES,P,Xn.disabled,Mi.disabled,di.backCCW,null,G,ne,"$clipping",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,p=this.context.gl;return new Xn({func:p.NOTEQUAL,mask:255},s,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(s){const p=this.context.gl;return new Xn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const p=this.context.gl,x=s.sort((P,O)=>O.overscaledZ-P.overscaledZ),w=x[x.length-1].overscaledZ,T=x[0].overscaledZ-w+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const P={};for(let O=0;O<T;O++)P[O+w]=new Xn({func:p.GEQUAL,mask:255},O+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=T,[P,x]}return[{[w]:Xn.disabled},x]}stencilConfigForOverlapTwoPass(s){const p=this.context.gl,x=s.sort((P,O)=>O.overscaledZ-P.overscaledZ),w=x[x.length-1].overscaledZ,T=x[0].overscaledZ-w+1;if(this.clearStencil(),T>1){const P={},O={};for(let F=0;F<T;F++)P[F+w]=new Xn({func:p.GREATER,mask:255},T+1+F,255,p.KEEP,p.KEEP,p.REPLACE),O[F+w]=new Xn({func:p.GREATER,mask:255},1+F,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*T+1,[P,O,x]}return this.nextStencilID=3,[{[w]:new Xn({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[w]:new Xn({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},x]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Mi([s.CONSTANT_COLOR,s.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Mi.unblended:Mi.alphaBlended}getDepthModeForSublayer(s,p,x){if(!this.opaquePassEnabledForLayer())return Kn.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Kn(x||this.context.gl.LEQUAL,p,[w,w])}getDepthModeFor3D(){return new Kn(this.context.gl.LEQUAL,Kn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,p){var x,w;this.style=s,this.options=p,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const T=this.style._order,P=this.style.sourceCaches,O={},F={},G={},Y={isRenderingToTexture:!1,isRenderingGlobe:((x=s.projection)===null||x===void 0?void 0:x.transitionState)>0};for(const ee in P){const ce=P[ee];ce.used&&ce.prepare(this.context),O[ee]=ce.getVisibleCoordinates(!1),F[ee]=O[ee].slice().reverse(),G[ee]=ce.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ee=0;ee<T.length;ee++)if(this.style._layers[T[ee]].is3D()){this.opaquePassCutoff=ee;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ee of T){const ce=this.style._layers[ee];if(!ce.hasOffscreenPass()||ce.isHidden(this.transform.zoom))continue;const ye=F[ce.source];(ce.type==="custom"||ye.length)&&this.renderLayer(this,P[ce.source],ce,ye,Y)}if((w=this.style.projection)===null||w===void 0||w.updateGPUdependent({context:this.context,useProgram:ee=>this.useProgram(ee)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(ee,ce){const ye=ee.context,Se=ye.gl,we=((Ke,Fe,it)=>{const kt=Math.cos(Fe.rollInRadians),yt=Math.sin(Fe.rollInRadians),_t=nt(Fe),bt=Fe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ke.properties.get("sky-color"),u_horizon_color:Ke.properties.get("horizon-color"),u_horizon:[(Fe.width/2-_t*yt)*it,(Fe.height/2+_t*kt)*it],u_horizon_normal:[-yt,kt],u_sky_horizon_blend:Ke.properties.get("sky-horizon-blend")*Fe.height/2*it,u_sky_blend:bt}})(ce,ee.style.map.transform,ee.pixelRatio),Te=new Kn(Se.LEQUAL,Kn.ReadWrite,[0,1]),ze=Xn.disabled,Le=ee.colorModeForRenderPass(),Oe=ee.useProgram("sky"),qe=Bc(ye,ce);Oe.draw(ye,Se.TRIANGLES,Te,ze,Le,di.disabled,we,null,void 0,"sky",qe.vertexBuffer,qe.indexBuffer,qe.segments)}(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const ee=this.style._layers[T[this.currentLayer]],ce=P[ee.source],ye=O[ee.source];this._renderTileClippingMasks(ee,ye,!1),this.renderLayer(this,ce,ee,ye,Y)}this.renderPass="translucent";let ne=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const ee=this.style._layers[T[this.currentLayer]],ce=P[ee.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ee,Y))continue;this.opaquePassEnabledForLayer()||ne||(ne=!0,Y.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ye=(ee.type==="symbol"?G:F)[ee.source];this._renderTileClippingMasks(ee,O[ee.source],!!this.renderToTexture),this.renderLayer(this,ce,ee,ye,Y)}if(Y.isRenderingGlobe&&function(ee,ce,ye){const Se=ee.context,we=Se.gl,Te=ee.useProgram("atmosphere"),ze=new Kn(we.LEQUAL,Kn.ReadOnly,[0,1]),Le=ee.transform,Oe=function(bt,sn){const rn=bt.properties.get("position"),Yt=[-rn.x,-rn.y,-rn.z],Mn=a.ag(new Float64Array(16));return bt.properties.get("anchor")==="map"&&(a.b6(Mn,Mn,sn.rollInRadians),a.b7(Mn,Mn,-sn.pitchInRadians),a.b6(Mn,Mn,sn.bearingInRadians),a.b7(Mn,Mn,sn.center.lat*Math.PI/180),a.bz(Mn,Mn,-sn.center.lng*Math.PI/180)),a.c6(Yt,Yt,Mn),Yt}(ye,ee.transform),qe=Le.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ke=ce.properties.get("atmosphere-blend")*qe.projectionTransition;if(Ke===0)return;const Fe=mn(Le.worldSize,Le.center.lat),it=Le.inverseProjectionMatrix,kt=new Float64Array(4);kt[3]=1,a.aw(kt,kt,Le.modelViewProjectionMatrix),kt[0]/=kt[3],kt[1]/=kt[3],kt[2]/=kt[3],kt[3]=1,a.aw(kt,kt,it),kt[0]/=kt[3],kt[1]/=kt[3],kt[2]/=kt[3],kt[3]=1;const yt=((bt,sn,rn,Yt,Mn)=>({u_sun_pos:bt,u_atmosphere_blend:sn,u_globe_position:rn,u_globe_radius:Yt,u_inv_proj_matrix:Mn}))(Oe,Ke,[kt[0],kt[1],kt[2]],Fe,it),_t=Bc(Se,ce);Te.draw(Se,we.TRIANGLES,ze,Xn.disabled,Mi.alphaBlended,di.disabled,yt,null,null,"atmosphere",_t.vertexBuffer,_t.indexBuffer,_t.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ee=function(ce,ye){let Se=null;const we=Object.values(ce._layers).flatMap(Oe=>Oe.source&&!Oe.isHidden(ye)?[ce.sourceCaches[Oe.source]]:[]),Te=we.filter(Oe=>Oe.getSource().type==="vector"),ze=we.filter(Oe=>Oe.getSource().type!=="vector"),Le=Oe=>{(!Se||Se.getSource().maxzoom<Oe.getSource().maxzoom)&&(Se=Oe)};return Te.forEach(Oe=>Le(Oe)),Se||ze.forEach(Oe=>Le(Oe)),Se}(this.style,this.transform.zoom);ee&&function(ce,ye,Se){for(let we=0;we<Se.length;we++)Lc(ce,ye,Se[we])}(this,ee,ee.getVisibleCoordinates())}this.options.showPadding&&function(ee){const ce=ee.transform.padding;Mo(ee,ee.transform.height-(ce.top||0),3,fs),Mo(ee,ce.bottom||0,3,Gl),xa(ee,ce.left||0,3,Or),xa(ee,ee.transform.width-(ce.right||0),3,Fd);const ye=ee.transform.centerPoint;(function(Se,we,Te,ze){_a(Se,we-1,Te-10,2,20,ze),_a(Se,we-10,Te-1,20,2,ze)})(ee,ye.x,ee.transform.height-ye.y,Wo)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,x=this.transform.modelViewProjectionMatrix;let w=this.terrainFacilitator.dirty;w||(w=s?!a.c9(p,x):!a.ca(p,x)),w||(w=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),w&&(a.cb(p,x),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,P){const O=T.context,F=O.gl,G=T.transform,Y=Mi.unblended,ne=new Kn(F.LEQUAL,Kn.ReadWrite,[0,1]),ee=P.sourceCache.getRenderableTiles(),ce=T.useProgram("terrainDepth");O.bindFramebuffer.set(P.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:a.bf.transparent,depth:1});for(const ye of ee){const Se=P.getTerrainMesh(ye.tileID),we=P.getTerrainData(ye.tileID),Te=G.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ze={u_ele_delta:P.getMeshFrameDelta(G.zoom)};ce.draw(O,F.TRIANGLES,ne,Xn.disabled,Y,di.backCCW,ze,we,Te,"terrain",Se.vertexBuffer,Se.indexBuffer,Se.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,P){const O=T.context,F=O.gl,G=T.transform,Y=Mi.unblended,ne=new Kn(F.LEQUAL,Kn.ReadWrite,[0,1]),ee=P.getCoordsTexture(),ce=P.sourceCache.getRenderableTiles(),ye=T.useProgram("terrainCoords");O.bindFramebuffer.set(P.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:a.bf.transparent,depth:1}),P.coordsIndex=[];for(const Se of ce){const we=P.getTerrainMesh(Se.tileID),Te=P.getTerrainData(Se.tileID);O.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,ee.texture);const ze={u_terrain_coords_id:(255-P.coordsIndex.length)/255,u_texture:0,u_ele_delta:P.getMeshFrameDelta(G.zoom)},Le=G.getProjectionData({overscaledTileID:Se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ye.draw(O,F.TRIANGLES,ne,Xn.disabled,Y,di.backCCW,ze,Te,Le,"terrain",we.vertexBuffer,we.indexBuffer,we.segments),P.coordsIndex.push(Se.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(s,p,x,w,T){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="custom"||(w||[]).length)&&(this.id=x.id,a.cc(x)?function(P,O,F,G,Y,ne){if(P.renderPass!=="translucent")return;const{isRenderingToTexture:ee}=ne,ce=Xn.disabled,ye=P.colorModeForRenderPass();(F._unevaluatedLayout.hasValue("text-variable-anchor")||F._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Se,we,Te,ze,Le,Oe,qe,Ke,Fe){const it=we.transform,kt=we.style.map.terrain,yt=Le==="map",_t=Oe==="map";for(const bt of Se){const sn=ze.getTile(bt),rn=sn.getBucket(Te);if(!rn||!rn.text||!rn.text.segments.get().length)continue;const Yt=a.an(rn.textSizeData,it.zoom),Mn=a.aC(sn,1,we.transform.zoom),ni=Bn(yt,we.transform,Mn),Li=Te.layout.get("icon-text-fit")!=="none"&&rn.hasIconData();if(Yt){const Bi=Math.pow(2,it.zoom-sn.tileID.overscaledZ),Ji=kt?(ks,is)=>kt.getElevation(bt,ks,is):null;Ic(rn,yt,_t,Fe,it,ni,Bi,Yt,Li,a.aD(it,sn,qe,Ke),bt.toUnwrapped(),Ji)}}}(G,P,F,O,F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),Y),F.paint.get("icon-opacity").constantOr(1)!==0&&ta(P,O,F,G,!1,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),F.layout.get("icon-rotation-alignment"),F.layout.get("icon-pitch-alignment"),F.layout.get("icon-keep-upright"),ce,ye,ee),F.paint.get("text-opacity").constantOr(1)!==0&&ta(P,O,F,G,!0,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),F.layout.get("text-keep-upright"),ce,ye,ee),O.map.showCollisionBoxes&&(zd(P,O,F,G,!0),zd(P,O,F,G,!1))}(s,p,x,w,this.style.placement.variableOffsets,T):a.cd(x)?function(P,O,F,G,Y){if(P.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=Y,ee=F.paint.get("circle-opacity"),ce=F.paint.get("circle-stroke-width"),ye=F.paint.get("circle-stroke-opacity"),Se=!F.layout.get("circle-sort-key").isConstant();if(ee.constantOr(1)===0&&(ce.constantOr(1)===0||ye.constantOr(1)===0))return;const we=P.context,Te=we.gl,ze=P.transform,Le=P.getDepthModeForSublayer(0,Kn.ReadOnly),Oe=Xn.disabled,qe=P.colorModeForRenderPass(),Ke=[],Fe=ze.getCircleRadiusCorrection();for(let it=0;it<G.length;it++){const kt=G[it],yt=O.getTile(kt),_t=yt.getBucket(F);if(!_t)continue;const bt=F.paint.get("circle-translate"),sn=F.paint.get("circle-translate-anchor"),rn=a.aD(ze,yt,bt,sn),Yt=_t.programConfigurations.get(F.id),Mn=P.useProgram("circle",Yt),ni=_t.layoutVertexBuffer,Li=_t.indexBuffer,Bi=P.style.map.terrain&&P.style.map.terrain.getTerrainData(kt),Ji={programConfiguration:Yt,program:Mn,layoutVertexBuffer:ni,indexBuffer:Li,uniformValues:bl(P,yt,F,rn,Fe),terrainData:Bi,projectionData:ze.getProjectionData({overscaledTileID:kt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0})};if(Se){const ks=_t.segments.get();for(const is of ks)Ke.push({segments:new a.aM([is]),sortKey:is.sortKey,state:Ji})}else Ke.push({segments:_t.segments,sortKey:0,state:Ji})}Se&&Ke.sort((it,kt)=>it.sortKey-kt.sortKey);for(const it of Ke){const{programConfiguration:kt,program:yt,layoutVertexBuffer:_t,indexBuffer:bt,uniformValues:sn,terrainData:rn,projectionData:Yt}=it.state;yt.draw(we,Te.TRIANGLES,Le,Oe,qe,di.backCCW,sn,rn,Yt,F.id,_t,bt,it.segments,F.paint,P.transform.zoom,kt)}}(s,p,x,w,T):a.ce(x)?function(P,O,F,G,Y){if(F.paint.get("heatmap-opacity")===0)return;const ne=P.context,{isRenderingToTexture:ee,isRenderingGlobe:ce}=Y;if(P.style.map.terrain){for(const ye of G){const Se=O.getTile(ye);O.hasRenderableParent(ye)||(P.renderPass==="offscreen"?qo(P,Se,F,ye,ce):P.renderPass==="translucent"&&Xa(P,F,ye,ee,ce))}ne.viewport.set([0,0,P.width,P.height])}else P.renderPass==="offscreen"?function(ye,Se,we,Te){const ze=ye.context,Le=ze.gl,Oe=ye.transform,qe=Xn.disabled,Ke=new Mi([Le.ONE,Le.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(Fe,it,kt){const yt=Fe.gl;Fe.activeTexture.set(yt.TEXTURE1),Fe.viewport.set([0,0,it.width/4,it.height/4]);let _t=kt.heatmapFbos.get(a.c3);_t?(yt.bindTexture(yt.TEXTURE_2D,_t.colorAttachment.get()),Fe.bindFramebuffer.set(_t.framebuffer)):(_t=Pa(Fe,it.width/4,it.height/4),kt.heatmapFbos.set(a.c3,_t))})(ze,ye,we),ze.clear({color:a.bf.transparent});for(let Fe=0;Fe<Te.length;Fe++){const it=Te[Fe];if(Se.hasRenderableParent(it))continue;const kt=Se.getTile(it),yt=kt.getBucket(we);if(!yt)continue;const _t=yt.programConfigurations.get(we.id),bt=ye.useProgram("heatmap",_t),sn=Oe.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),rn=Oe.getCircleRadiusCorrection();bt.draw(ze,Le.TRIANGLES,Kn.disabled,qe,Ke,di.backCCW,Fh(kt,Oe.zoom,we.paint.get("heatmap-intensity"),rn),null,sn,we.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,we.paint,Oe.zoom,_t)}ze.viewport.set([0,0,ye.width,ye.height])}(P,O,F,G):P.renderPass==="translucent"&&function(ye,Se){const we=ye.context,Te=we.gl;we.setColorMode(ye.colorModeForRenderPass());const ze=Se.heatmapFbos.get(a.c3);ze&&(we.activeTexture.set(Te.TEXTURE0),Te.bindTexture(Te.TEXTURE_2D,ze.colorAttachment.get()),we.activeTexture.set(Te.TEXTURE1),Ra(we,Se).bind(Te.LINEAR,Te.CLAMP_TO_EDGE),ye.useProgram("heatmapTexture").draw(we,Te.TRIANGLES,Kn.disabled,Xn.disabled,ye.colorModeForRenderPass(),di.disabled,sp(ye,Se,0,1),null,null,Se.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments,Se.paint,ye.transform.zoom))}(P,F)}(s,p,x,w,T):a.cf(x)?function(P,O,F,G,Y){if(P.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=Y,ee=F.paint.get("line-opacity"),ce=F.paint.get("line-width");if(ee.constantOr(1)===0||ce.constantOr(1)===0)return;const ye=P.getDepthModeForSublayer(0,Kn.ReadOnly),Se=P.colorModeForRenderPass(),we=F.paint.get("line-dasharray"),Te=we.constantOr(1),ze=F.paint.get("line-pattern"),Le=ze.constantOr(1),Oe=F.paint.get("line-gradient"),qe=F.getCrossfadeParameters();let Ke;Ke=Le?"linePattern":Te&&Oe?"lineGradientSDF":Te?"lineSDF":Oe?"lineGradient":"line";const Fe=P.context,it=Fe.gl,kt=P.transform;let yt=!0;for(const _t of G){const bt=O.getTile(_t);if(Le&&!bt.patternsLoaded())continue;const sn=bt.getBucket(F);if(!sn)continue;const rn=sn.programConfigurations.get(F.id),Yt=P.context.program.get(),Mn=P.useProgram(Ke,rn),ni=yt||Mn.program!==Yt,Li=P.style.map.terrain&&P.style.map.terrain.getTerrainData(_t),Bi=ze.constantOr(null),Ji=we&&we.constantOr(null);if(Bi&&bt.imageAtlas){const er=bt.imageAtlas,Bs=er.patternPositions[Bi.to.toString()],Vs=er.patternPositions[Bi.from.toString()];Bs&&Vs&&rn.setConstantPatternPositions(Bs,Vs)}else if(Ji){const er=F.layout.get("line-cap")==="round",Bs=P.lineAtlas.getDash(Ji.to,er),Vs=P.lineAtlas.getDash(Ji.from,er);rn.setConstantDashPositions(Bs,Vs)}const ks=kt.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!ne,applyTerrainMatrix:!0}),is=kt.getPixelScale();let gi;Le?(gi=vl(P,bt,F,is,qe),gp(Fe,it,bt,rn,qe)):Te&&Oe?(gi=ap(P,bt,F,is,qe,sn.lineClipsArray.length),Rs(P,O,Fe,it,F,sn,_t,rn,qe)):Te?(gi=Lh(P,bt,F,is,qe),Fc(P,Fe,it,rn,ni,qe)):Oe?(gi=rp(P,bt,F,is,sn.lineClipsArray.length),na(P,O,Fe,it,F,sn,_t)):gi=Pu(P,bt,F,is);const as=P.stencilModeForClipping(_t);Mn.draw(Fe,it.TRIANGLES,ye,as,Se,di.disabled,gi,Li,ks,F.id,sn.layoutVertexBuffer,sn.indexBuffer,sn.segments,F.paint,P.transform.zoom,rn,sn.layoutVertexBuffer2),yt=!1}}(s,p,x,w,T):a.cg(x)?function(P,O,F,G,Y){const ne=F.paint.get("fill-color"),ee=F.paint.get("fill-opacity");if(ee.constantOr(1)===0)return;const{isRenderingToTexture:ce}=Y,ye=P.colorModeForRenderPass(),Se=F.paint.get("fill-pattern"),we=P.opaquePassEnabledForLayer()&&!Se.constantOr(1)&&ne.constantOr(a.bf.transparent).a===1&&ee.constantOr(0)===1?"opaque":"translucent";if(P.renderPass===we){const Te=P.getDepthModeForSublayer(1,P.renderPass==="opaque"?Kn.ReadWrite:Kn.ReadOnly);Go(P,O,F,G,Te,ye,!1,ce)}if(P.renderPass==="translucent"&&F.paint.get("fill-antialias")){const Te=P.getDepthModeForSublayer(F.getPaintProperty("fill-outline-color")?2:0,Kn.ReadOnly);Go(P,O,F,G,Te,ye,!0,ce)}}(s,p,x,w,T):a.ch(x)?function(P,O,F,G,Y){const ne=F.paint.get("fill-extrusion-opacity");if(ne===0)return;const{isRenderingToTexture:ee}=Y;if(P.renderPass==="translucent"){const ce=new Kn(P.context.gl.LEQUAL,Kn.ReadWrite,P.depthRangeFor3D);if(ne!==1||F.paint.get("fill-extrusion-pattern").constantOr(1))Da(P,O,F,G,ce,Xn.disabled,Mi.disabled,ee),Da(P,O,F,G,ce,P.stencilModeFor3D(),P.colorModeForRenderPass(),ee);else{const ye=P.colorModeForRenderPass();Da(P,O,F,G,ce,Xn.disabled,ye,ee)}}}(s,p,x,w,T):a.ci(x)?function(P,O,F,G,Y){if(P.renderPass!=="offscreen"&&P.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=Y,ee=P.context,ce=P.style.projection.useSubdivision,ye=P.getDepthModeForSublayer(0,Kn.ReadOnly),Se=P.colorModeForRenderPass();if(P.renderPass==="offscreen")(function(we,Te,ze,Le,Oe,qe,Ke){const Fe=we.context,it=Fe.gl;for(const kt of ze){const yt=Te.getTile(kt),_t=yt.dem;if(!_t||!_t.data||!yt.needsHillshadePrepare)continue;const bt=_t.dim,sn=_t.stride,rn=_t.getPixels();if(Fe.activeTexture.set(it.TEXTURE1),Fe.pixelStoreUnpackPremultiplyAlpha.set(!1),yt.demTexture=yt.demTexture||we.getTileTexture(sn),yt.demTexture){const Mn=yt.demTexture;Mn.update(rn,{premultiply:!1}),Mn.bind(it.NEAREST,it.CLAMP_TO_EDGE)}else yt.demTexture=new a.T(Fe,rn,it.RGBA,{premultiply:!1}),yt.demTexture.bind(it.NEAREST,it.CLAMP_TO_EDGE);Fe.activeTexture.set(it.TEXTURE0);let Yt=yt.fbo;if(!Yt){const Mn=new a.T(Fe,{width:bt,height:bt,data:null},it.RGBA);Mn.bind(it.LINEAR,it.CLAMP_TO_EDGE),Yt=yt.fbo=Fe.createFramebuffer(bt,bt,!0,!1),Yt.colorAttachment.set(Mn.texture)}Fe.bindFramebuffer.set(Yt.framebuffer),Fe.viewport.set([0,0,bt,bt]),we.useProgram("hillshadePrepare").draw(Fe,it.TRIANGLES,Oe,qe,Ke,di.disabled,kc(yt.tileID,_t),null,null,Le.id,we.rasterBoundsBuffer,we.quadTriangleIndexBuffer,we.rasterBoundsSegments),yt.needsHillshadePrepare=!1}})(P,O,G,F,ye,Xn.disabled,Se),ee.viewport.set([0,0,P.width,P.height]);else if(P.renderPass==="translucent")if(ce){const[we,Te,ze]=P.stencilConfigForOverlapTwoPass(G);Ou(P,O,F,ze,we,ye,Se,!1,ne),Ou(P,O,F,ze,Te,ye,Se,!0,ne)}else{const[we,Te]=P.getStencilConfigForOverlapAndUpdateStencilID(G);Ou(P,O,F,Te,we,ye,Se,!1,ne)}}(s,p,x,w,T):a.cj(x)?function(P,O,F,G,Y){if(P.renderPass!=="translucent"||!G.length)return;const{isRenderingToTexture:ne}=Y,ee=P.style.projection.useSubdivision,ce=P.getDepthModeForSublayer(0,Kn.ReadOnly),ye=P.colorModeForRenderPass();if(ee){const[Se,we,Te]=P.stencilConfigForOverlapTwoPass(G);Ka(P,O,F,Te,Se,ce,ye,!1,ne),Ka(P,O,F,Te,we,ce,ye,!0,ne)}else{const[Se,we]=P.getStencilConfigForOverlapAndUpdateStencilID(G);Ka(P,O,F,we,Se,ce,ye,!1,ne)}}(s,p,x,w,T):a.bK(x)?function(P,O,F,G,Y){if(P.renderPass!=="translucent"||F.paint.get("raster-opacity")===0||!G.length)return;const{isRenderingToTexture:ne}=Y,ee=O.getSource(),ce=P.style.projection.useSubdivision;if(ee instanceof on)Od(P,O,F,G,null,!1,!1,ee.tileCoords,ee.flippedWindingOrder,ne);else if(ce){const[ye,Se,we]=P.stencilConfigForOverlapTwoPass(G);Od(P,O,F,we,ye,!1,!0,Fu,!1,ne),Od(P,O,F,we,Se,!0,!0,Fu,!1,ne)}else{const[ye,Se]=P.getStencilConfigForOverlapAndUpdateStencilID(G);Od(P,O,F,Se,ye,!1,!0,Fu,!1,ne)}}(s,p,x,w,T):a.ck(x)?function(P,O,F,G,Y){const ne=F.paint.get("background-color"),ee=F.paint.get("background-opacity");if(ee===0)return;const{isRenderingToTexture:ce}=Y,ye=P.context,Se=ye.gl,we=P.style.projection,Te=P.transform,ze=Te.tileSize,Le=F.paint.get("background-pattern");if(P.isPatternMissing(Le))return;const Oe=!Le&&ne.a===1&&ee===1&&P.opaquePassEnabledForLayer()?"opaque":"translucent";if(P.renderPass!==Oe)return;const qe=Xn.disabled,Ke=P.getDepthModeForSublayer(0,Oe==="opaque"?Kn.ReadWrite:Kn.ReadOnly),Fe=P.colorModeForRenderPass(),it=P.useProgram(Le?"backgroundPattern":"background"),kt=G||wt(Te,{tileSize:ze,terrain:P.style.map.terrain});Le&&(ye.activeTexture.set(Se.TEXTURE0),P.imageManager.bind(P.context));const yt=F.getCrossfadeParameters();for(const _t of kt){const bt=Te.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!ce,applyTerrainMatrix:!0}),sn=Le?Ec(ee,P,Le,{tileID:_t,tileSize:ze},yt):pa(ee,ne),rn=P.style.map.terrain&&P.style.map.terrain.getTerrainData(_t),Yt=we.getMeshFromTileID(ye,_t.canonical,!1,!0,"raster");it.draw(ye,Se.TRIANGLES,Ke,qe,Fe,di.backCCW,sn,rn,bt,F.id,Yt.vertexBuffer,Yt.indexBuffer,Yt.segments)}}(s,0,x,w,T):a.cl(x)&&function(P,O,F,G){const{isRenderingGlobe:Y}=G,ne=P.context,ee=F.implementation,ce=P.style.projection,ye=P.transform,Se=ye.getProjectionDataForCustomLayer(Y),we={farZ:ye.farZ,nearZ:ye.nearZ,fov:ye.fov*Math.PI/180,modelViewProjectionMatrix:ye.modelViewProjectionMatrix,projectionMatrix:ye.projectionMatrix,shaderData:{variantName:ce.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ce.shaderPreludeCode.vertexSource}`,define:ce.shaderDefine},defaultProjectionData:Se},Te=ee.renderingMode?ee.renderingMode:"2d";if(P.renderPass==="offscreen"){const ze=ee.prerender;ze&&(P.setCustomLayerDefaults(),ne.setColorMode(P.colorModeForRenderPass()),ze.call(ee,ne.gl,we),ne.setDirty(),P.setBaseState())}else if(P.renderPass==="translucent"){P.setCustomLayerDefaults(),ne.setColorMode(P.colorModeForRenderPass()),ne.setStencilMode(Xn.disabled);const ze=Te==="3d"?P.getDepthModeFor3D():P.getDepthModeForSublayer(0,Kn.ReadOnly);ne.setDepthMode(ze),ee.render(ne.gl,we),ne.setDirty(),P.setBaseState(),ne.bindFramebuffer.set(null)}}(s,0,x,T))}saveTileTexture(s){const p=this._tileTextures[s.size[0]];p?p.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const p=this._tileTextures[s];return p&&p.length>0?p.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const p=this.imageManager.getPattern(s.from.toString()),x=this.imageManager.getPattern(s.to.toString());return!p||!x}useProgram(s,p,x=!1,w=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,P=this.style.projection,O=x?or.projectionMercator:P.shaderPreludeCode,F=x?Ga:P.shaderDefine,G=s+(p?p.cacheKey:"")+`/${x?ui:P.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(w?`/${w.join("/")}`:"");return this.cache[G]||(this.cache[G]=new Cc(this.context,or[s],p,Ed[s],this._showOverdrawInspector,T,O,F,w)),this.cache[G]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:p}=this.context.gl;return this.width!==s||this.height!==p}}function jl(j,s){let p,x=!1,w=null,T=null;const P=()=>{w=null,x&&(j.apply(T,p),w=setTimeout(P,s),x=!1)};return(...O)=>(x=!0,T=this,p=O,w||P(),w)}class gr{constructor(s){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let x;return p.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(x=w)}),(x&&x[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const x=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:x,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const x=p.join("/");let w=x;w.split("&").length>0&&(w=w.split("&")[0]),this._hashName&&(w=`${this._hashName}=${x}`);let T=window.location.hash.replace(w,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let P=window.location.href.replace(/(#.+)?$/,T);P=P.replace("&&","&"),window.history.replaceState(window.history.state,null,P)},this._updateHash=jl(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const p=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,w=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,w),P=Math.round(p.lng*T)/T,O=Math.round(p.lat*T)/T,F=this._map.getBearing(),G=this._map.getPitch();let Y="";if(Y+=s?`/${P}/${O}/${x}`:`${x}/${O}/${P}`,(F||G)&&(Y+="/"+Math.round(10*F)/10),G&&(Y+=`/${Math.round(G)}`),this._hashName){const ne=this._hashName;let ee=!1;const ce=window.location.hash.slice(1).split("&").map(ye=>{const Se=ye.split("=")[0];return Se===ne?(ee=!0,`${Se}=${Y}`):ye}).filter(ye=>ye);return ee||ce.push(`${ne}=${Y}`),`#${ce.join("&")}`}return`#${Y}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new a.S(+s[2],+s[1])}catch(T){return!1}const p=+s[0],x=+(s[3]||0),w=+(s[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&x>=-180&&x<=180&&w>=this._map.getMinPitch()&&w<=this._map.getMaxPitch()}}const Cl={linearity:.3,easing:a.cm(0,0,.3,1)},Wl=a.e({deceleration:2500,maxSpeed:1400},Cl),Hm=a.e({deceleration:20,maxSpeed:1400},Cl),qm=a.e({deceleration:1e3,maxSpeed:360},Cl),Gm=a.e({deceleration:1e3,maxSpeed:90},Cl),Js=a.e({deceleration:1e3,maxSpeed:360},Cl);class Gh{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,p=A.now();for(;s.length>0&&p-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)p.zoom+=T.zoomDelta||0,p.bearing+=T.bearingDelta||0,p.pitch+=T.pitchDelta||0,p.roll+=T.rollDelta||0,T.panDelta&&p.pan._add(T.panDelta),T.around&&(p.around=T.around),T.pinchAround&&(p.pinchAround=T.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(p.pan.mag()){const T=Yo(p.pan.mag(),x,a.e({},Wl,s||{})),P=p.pan.mult(T.amount/p.pan.mag()),O=this._map.cameraHelper.handlePanInertia(P,this._map.transform);w.center=O.easingCenter,w.offset=O.easingOffset,Zo(w,T)}if(p.zoom){const T=Yo(p.zoom,x,Hm);w.zoom=this._map.transform.zoom+T.amount,Zo(w,T)}if(p.bearing){const T=Yo(p.bearing,x,qm);w.bearing=this._map.transform.bearing+a.ah(T.amount,-179,179),Zo(w,T)}if(p.pitch){const T=Yo(p.pitch,x,Gm);w.pitch=this._map.transform.pitch+T.amount,Zo(w,T)}if(p.roll){const T=Yo(p.roll,x,Js);w.roll=this._map.transform.roll+a.ah(T.amount,-179,179),Zo(w,T)}if(w.zoom||w.bearing){const T=p.pinchAround===void 0?p.around:p.pinchAround;w.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),a.e(w,{noMoveStart:!0})}}function Zo(j,s){(!j.duration||j.duration<s.duration)&&(j.duration=s.duration,j.easing=s.easing)}function Yo(j,s,p){const{maxSpeed:x,linearity:w,deceleration:T}=p,P=a.ah(j*w/(s/1e3),-x,x),O=Math.abs(P)/(T*w);return{easing:p.easing,duration:1e3*O,amount:P*(O/2)}}class Fr extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,x,w={}){x=x instanceof MouseEvent?x:new MouseEvent(s,x);const T=N.mousePos(p.getCanvas(),x),P=p.unproject(T);super(s,a.e({point:T,lngLat:P,originalEvent:x},w)),this._defaultPrevented=!1,this.target=p}}class za extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,x){const w=s==="touchend"?x.changedTouches:x.touches,T=N.touchPos(p.getCanvasContainer(),w),P=T.map(F=>p.unproject(F)),O=T.reduce((F,G,Y,ne)=>F.add(G.div(ne.length)),new a.P(0,0));super(s,{points:T,point:O,lngLats:P,lngLat:p.unproject(O),originalEvent:x}),this._defaultPrevented=!1}}class Zl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,x){super(s,{originalEvent:x}),this._defaultPrevented=!1}}class Qa{constructor(s,p){this._map=s,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Zl(s.type,this._map,s))}mousedown(s,p){return this._mousedownPos=p,this._firePreventable(new Fr(s.type,this._map,s))}mouseup(s){this._map.fire(new Fr(s.type,this._map,s))}click(s,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Fr(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Fr(s.type,this._map,s))}mouseover(s){this._map.fire(new Fr(s.type,this._map,s))}mouseout(s){this._map.fire(new Fr(s.type,this._map,s))}touchstart(s){return this._firePreventable(new za(s.type,this._map,s))}touchmove(s){this._map.fire(new za(s.type,this._map,s))}touchend(s){this._map.fire(new za(s.type,this._map,s))}touchcancel(s){this._map.fire(new za(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ja{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Fr(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Fr(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vu{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(a.P.convert(s),this._map.terrain)}}class Ia{constructor(s,p){this._map=s,this._tr=new Vu(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,p){this.isEnabled()&&s.shiftKey&&s.button===0&&(N.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(s,p){if(!this._active)return;const x=p;if(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=x,this._box||(this._box=N.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const T=Math.min(w.x,x.x),P=Math.max(w.x,x.x),O=Math.min(w.y,x.y),F=Math.max(w.y,x.y);N.setTransform(this._box,`translate(${T}px,${O}px)`),this._box.style.width=P-T+"px",this._box.style.height=F-O+"px"}mouseupWindow(s,p){if(!this._active||s.button!==0)return;const x=this._startPos,w=p;if(this.reset(),N.suppressClick(),x.x!==w.x||x.y!==w.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:s})),{cameraAnimation:T=>T.fitScreenCoordinates(x,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,p){return this._map.fire(new a.l(s,{originalEvent:p}))}}function ba(j,s){if(j.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${j.length}, points ${s.length}`);const p={};for(let x=0;x<j.length;x++)p[j[x].identifier]=s[x];return p}class yp{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,p,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),x.length===this.numTouches&&(this.centroid=function(w){const T=new a.P(0,0);for(const P of w)T._add(P);return T.div(w.length)}(p),this.touches=ba(x,p)))}touchmove(s,p,x){if(this.aborted||!this.centroid)return;const w=ba(x,p);for(const T in this.touches){const P=w[T];(!P||P.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(s,p,x){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class Uu{constructor(s){this.singleTap=new yp(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,p,x){this.singleTap.touchstart(s,p,x)}touchmove(s,p,x){this.singleTap.touchmove(s,p,x)}touchend(s,p,x){const w=this.singleTap.touchend(s,p,x);if(w){const T=s.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(w)<30;if(T&&P||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class Wm{constructor(s){this._tr=new Vu(s),this._zoomIn=new Uu({numTouches:1,numTaps:2}),this._zoomOut=new Uu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,p,x){this._zoomIn.touchstart(s,p,x),this._zoomOut.touchstart(s,p,x)}touchmove(s,p,x){this._zoomIn.touchmove(s,p,x),this._zoomOut.touchmove(s,p,x)}touchend(s,p,x){const w=this._zoomIn.touchend(s,p,x),T=this._zoomOut.touchend(s,p,x),P=this._tr;return w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(w)},{originalEvent:s})}):T?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(T)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tl{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const p=this._moveFunction(...s);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(s,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,p){if(!this.isEnabled())return;const x=this._lastPoint;if(!x)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const w=Array.isArray(p)?p[0]:p;return!this._moved&&w.dist(x)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(x,w))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&N.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const xp=0,Yl=2,No={[xp]:1,[Yl]:2};class xn{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const p=N.mouseButton(s);this._eventButton=p}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(p,x){const w=No[x];return p.buttons===void 0||(p.buttons&w)!==w}(s,this._eventButton)}isValidEndEvent(s){return N.mouseButton(s)===this._eventButton}}class Bd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class Wh{constructor(s=new xn({checkCorrectEvent:()=>!0}),p=new Bd){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(s,p,x){return s instanceof MouseEvent?p(s):typeof TouchEvent!="undefined"&&s instanceof TouchEvent?x(s):void 0}startMove(s){this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.startMove(p),p=>this.oneFingerTouchMoveStateManager.startMove(p))}endMove(s){this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.endMove(p),p=>this.oneFingerTouchMoveStateManager.endMove(p))}isValidStartEvent(s){return this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.isValidStartEvent(p),p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p))}isValidMoveEvent(s){return this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.isValidMoveEvent(p),p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p))}isValidEndEvent(s){return this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.isValidEndEvent(p),p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p))}}const kl=j=>{j.mousedown=j.dragStart,j.mousemoveWindow=j.dragMove,j.mouseup=j.dragEnd,j.contextmenu=s=>{s.preventDefault()}};class $u{constructor(s,p){this._clickTolerance=s.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,p,x){return this._calculateTransform(s,p,x)}touchmove(s,p,x){if(this._active){if(!this._shouldBePrevented(x.length))return s.preventDefault(),this._calculateTransform(s,p,x);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,p,x){this._calculateTransform(s,p,x),this._active&&this._shouldBePrevented(x.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,p,x){x.length>0&&(this._active=!0);const w=ba(x,p),T=new a.P(0,0),P=new a.P(0,0);let O=0;for(const G in w){const Y=w[G],ne=this._touches[G];ne&&(T._add(Y),P._add(Y.sub(ne)),O++,w[G]=Y)}if(this._touches=w,this._shouldBePrevented(O)||!P.mag())return;const F=P.div(O);return this._sum._add(F),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(O),panDelta:F}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,p,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([p[0],p[1]]))}touchmove(s,p,x){if(!this._firstTwoTouches)return;s.preventDefault();const[w,T]=this._firstTwoTouches,P=Oa(x,p,w),O=Oa(x,p,T);if(!P||!O)return;const F=this._aroundCenter?null:P.add(O).div(2);return this._move([P,O],F,s)}touchend(s,p,x){if(!this._firstTwoTouches)return;const[w,T]=this._firstTwoTouches,P=Oa(x,p,w),O=Oa(x,p,T);P&&O||(this._active&&N.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Oa(j,s,p){for(let x=0;x<j.length;x++)if(j[x].identifier===p)return s[x]}function pi(j,s){return Math.log(j/s)/Math.LN2}class Hu extends Xl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,p){const x=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(pi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:pi(this._distance,x),pinchAround:p}}}function El(j,s){return 180*j.angleWith(s)/Math.PI}class Ao extends Xl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,p,x){const w=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:El(this._vector,w),pinchAround:p}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const p=25/(Math.PI*this._minDiameter)*360,x=El(s,this._startVector);return Math.abs(x)<p}}function Vc(j){return Math.abs(j.y)>Math.abs(j.x)}class Zh extends Xl{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,p,x){super.touchstart(s,p,x),this._currentTouchCount=x.length}_start(s){this._lastPoints=s,Vc(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,p,x){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=s[0].sub(this._lastPoints[0]),T=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,T,x.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(w.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(s,p,x){if(this._valid!==void 0)return this._valid;const w=s.mag()>=2,T=p.mag()>=2;if(!w&&!T)return;if(!w||!T)return this._firstMove===void 0&&(this._firstMove=x),x-this._firstMove<100&&void 0;const P=s.y>0==p.y>0;return Vc(s)&&Vc(p)&&P}}const Yh={panStep:100,bearingStep:15,pitchStep:10};class Kl{constructor(s){this._tr=new Vu(s);const p=Yh;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let p=0,x=0,w=0,T=0,P=0;switch(s.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:s.shiftKey?x=-1:(s.preventDefault(),T=-1);break;case 39:s.shiftKey?x=1:(s.preventDefault(),T=1);break;case 38:s.shiftKey?w=1:(s.preventDefault(),P=-1);break;case 40:s.shiftKey?w=-1:(s.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(x=0,w=0),{cameraAnimation:O=>{const F=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:qu,zoom:p?Math.round(F.zoom)+p*(s.shiftKey?2:1):F.zoom,bearing:F.bearing+x*this._bearingStep,pitch:F.pitch+w*this._pitchStep,offset:[-T*this._panStep,-P*this._panStep],center:F.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function qu(j){return j*(2-j)}const _p=4.000244140625,bp=1/450;class Uc{constructor(s,p){this._onTimeout=x=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(x)},this._map=s,this._tr=new Vu(s),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=bp}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let p=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const x=A.now(),w=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,p!==0&&p%_p==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(w*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),s.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=s,this._delta-=p,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=N.mousePos(this._map.getCanvas(),s),x=this._tr;this._aroundPoint=this._aroundCenter?x.transform.locationToScreenPoint(a.S.convert(x.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>_p?this._wheelZoomRate:this._defaultZoomRate;let F=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&F!==0&&(F=1/F);const G=typeof this._targetZoom!="number"?s.scale:a.af(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),a.ak(G*F)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,x=this._startZoom,w=this._easing;let T,P=!1;if(this._type==="wheel"&&x&&w){const O=A.now()-this._lastWheelEventTime,F=Math.min((O+5)/200,1),G=w(F);T=a.C.number(x,p,G),F<1?this._frameId||(this._frameId=!0):P=!0}else T=p,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!P,zoomDelta:T-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let p=a.co;if(this._prevEase){const x=this._prevEase,w=(A.now()-x.start)/x.duration,T=x.easing(w+.01)-x.easing(w),P=.27/Math.sqrt(T*T+1e-4)*.01,O=Math.sqrt(.0729-P*P);p=a.cm(P,O,.25,1)}return this._prevEase={start:A.now(),duration:s,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Vd{constructor(s,p){this._clickZoom=s,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ml{constructor(s){this._tr=new Vu(s),this.reset()}reset(){this._active=!1}dblclick(s,p){return s.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yi{constructor(){this._tap=new Uu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,p,x){if(!this._swipePoint)if(this._tapTime){const w=p[0],T=s.timeStamp-this._tapTime<500,P=this._tapPoint.dist(w)<30;T&&P?x.length>0&&(this._swipePoint=w,this._swipeTouch=x[0].identifier):this.reset()}else this._tap.touchstart(s,p,x)}touchmove(s,p,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const w=p[0],T=w.y-this._swipePoint.y;return this._swipePoint=w,s.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(s,p,x)}touchend(s,p,x){if(this._tapTime)this._swipePoint&&x.length===0&&this.reset();else{const w=this._tap.touchend(s,p,x);w&&(this._tapTime=s.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xh{constructor(s,p,x){this._el=s,this._mousePan=p,this._touchPan=x}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class eo{constructor(s,p,x,w){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=p,this._mousePitch=x,this._mouseRoll=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class mi{constructor(s,p,x,w){this._el=s,this._touchZoom=p,this._touchRotate=x,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Xi{constructor(s,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=N.create("div","maplibregl-cooperative-gesture-screen",s);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const x=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=p,this._container.appendChild(w);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=x,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(N.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,p){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:s,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Cs=j=>j.zoom||j.drag||j.roll||j.pitch||j.rotate;class Ud extends a.l{}function Ql(j){return j.panDelta&&j.panDelta.mag()||j.zoomDelta||j.bearingDelta||j.pitchDelta||j.rollDelta}class Lr{constructor(s,p){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,T)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=w.type==="renderFrame"?void 0:w,O={needsRenderFrame:!1},F={},G={};for(const{handlerName:ee,handler:ce,allowed:ye}of this._handlers){if(!ce.isEnabled())continue;let Se;if(this._blockedByActive(G,ye,ee))ce.reset();else if(ce[T||w.type]){if(a.cp(w,T||w.type)){const we=N.mousePos(this._map.getCanvas(),w);Se=ce[T||w.type](w,we)}else if(a.cq(w,T||w.type)){const we=this._getMapTouches(w.touches),Te=N.touchPos(this._map.getCanvas(),we);Se=ce[T||w.type](w,Te,we)}else a.cr(T||w.type)||(Se=ce[T||w.type](w));this.mergeHandlerResult(O,F,Se,ee,P),Se&&Se.needsRenderFrame&&this._triggerRenderFrame()}(Se||ce.isActive())&&(G[ee]=ce)}const Y={};for(const ee in this._previousActiveHandlers)G[ee]||(Y[ee]=P);this._previousActiveHandlers=G,(Object.keys(Y).length||Ql(O))&&(this._changes.push([O,F,Y]),this._triggerRenderFrame()),(Object.keys(G).length||Ql(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=O;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Gh(s),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,T,P]of this._listeners)N.addEventListener(w,T,w===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[s,p,x]of this._listeners)N.removeEventListener(s,p,s===document?this.handleWindowEvent:this.handleEvent,x)}_addDefaultHandlers(s){const p=this._map,x=p.getCanvasContainer();this._add("mapEvent",new Qa(p,s));const w=p.boxZoom=new Ia(p,s);this._add("boxZoom",w),s.interactive&&s.boxZoom&&w.enable();const T=p.cooperativeGestures=new Xi(p,s.cooperativeGestures);this._add("cooperativeGestures",T),s.cooperativeGestures&&T.enable();const P=new Wm(p),O=new Ml(p);p.doubleClickZoom=new Vd(O,P),this._add("tapZoom",P),this._add("clickZoom",O),s.interactive&&s.doubleClickZoom&&p.doubleClickZoom.enable();const F=new Yi;this._add("tapDragZoom",F);const G=p.touchPitch=new Zh(p);this._add("touchPitch",G),s.interactive&&s.touchPitch&&p.touchPitch.enable(s.touchPitch);const Y=()=>p.project(p.getCenter()),ne=function({enable:Oe,clickTolerance:qe,aroundCenter:Ke=!0,minPixelCenterThreshold:Fe=100,rotateDegreesPerPixelMoved:it=.8},kt){const yt=new xn({checkCorrectEvent:_t=>N.mouseButton(_t)===0&&_t.ctrlKey||N.mouseButton(_t)===2&&!_t.ctrlKey});return new Tl({clickTolerance:qe,move:(_t,bt)=>{const sn=kt();if(Ke&&Math.abs(sn.y-_t.y)>Fe)return{bearingDelta:a.cn(new a.P(_t.x,bt.y),bt,sn)};let rn=(bt.x-_t.x)*it;return Ke&&bt.y<sn.y&&(rn=-rn),{bearingDelta:rn}},moveStateManager:yt,enable:Oe,assignEvents:kl})}(s,Y),ee=function({enable:Oe,clickTolerance:qe,pitchDegreesPerPixelMoved:Ke=-.5}){const Fe=new xn({checkCorrectEvent:it=>N.mouseButton(it)===0&&it.ctrlKey||N.mouseButton(it)===2});return new Tl({clickTolerance:qe,move:(it,kt)=>({pitchDelta:(kt.y-it.y)*Ke}),moveStateManager:Fe,enable:Oe,assignEvents:kl})}(s),ce=function({enable:Oe,clickTolerance:qe,rollDegreesPerPixelMoved:Ke=.3},Fe){const it=new xn({checkCorrectEvent:kt=>N.mouseButton(kt)===2&&kt.ctrlKey});return new Tl({clickTolerance:qe,move:(kt,yt)=>{const _t=Fe();let bt=(yt.x-kt.x)*Ke;return yt.y<_t.y&&(bt=-bt),{rollDelta:bt}},moveStateManager:it,enable:Oe,assignEvents:kl})}(s,Y);p.dragRotate=new eo(s,ne,ee,ce),this._add("mouseRotate",ne,["mousePitch"]),this._add("mousePitch",ee,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ce,["mousePitch"]),s.interactive&&s.dragRotate&&p.dragRotate.enable();const ye=function({enable:Oe,clickTolerance:qe}){const Ke=new xn({checkCorrectEvent:Fe=>N.mouseButton(Fe)===0&&!Fe.ctrlKey});return new Tl({clickTolerance:qe,move:(Fe,it)=>({around:it,panDelta:it.sub(Fe)}),activateOnStart:!0,moveStateManager:Ke,enable:Oe,assignEvents:kl})}(s),Se=new $u(s,p);p.dragPan=new Xh(x,ye,Se),this._add("mousePan",ye),this._add("touchPan",Se,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&p.dragPan.enable(s.dragPan);const we=new Ao,Te=new Hu;p.touchZoomRotate=new mi(x,Te,we,F),this._add("touchRotate",we,["touchPan","touchZoom"]),this._add("touchZoom",Te,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&p.touchZoomRotate.enable(s.touchZoomRotate);const ze=p.scrollZoom=new Uc(p,()=>this._triggerRenderFrame());this._add("scrollZoom",ze,["mousePan"]),s.interactive&&s.scrollZoom&&p.scrollZoom.enable(s.scrollZoom);const Le=p.keyboard=new Kl(p);this._add("keyboard",Le),s.interactive&&s.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new Ja(p))}_add(s,p,x){this._handlers.push({handlerName:s,handler:p,allowed:x}),this._handlersById[s]=p}stop(s){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Cs(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,p,x){for(const w in s)if(w!==x&&(!p||p.indexOf(w)<0))return!0;return!1}_getMapTouches(s){const p=[];for(const x of s)this._el.contains(x.target)&&p.push(x);return p}mergeHandlerResult(s,p,x,w,T){if(!x)return;a.e(s,x);const P={handlerName:w,originalEvent:x.originalEvent||T};x.zoomDelta!==void 0&&(p.zoom=P),x.panDelta!==void 0&&(p.drag=P),x.rollDelta!==void 0&&(p.roll=P),x.pitchDelta!==void 0&&(p.pitch=P),x.bearingDelta!==void 0&&(p.rotate=P)}_applyChanges(){const s={},p={},x={};for(const[w,T,P]of this._changes)w.panDelta&&(s.panDelta=(s.panDelta||new a.P(0,0))._add(w.panDelta)),w.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+w.pitchDelta),w.rollDelta&&(s.rollDelta=(s.rollDelta||0)+w.rollDelta),w.around!==void 0&&(s.around=w.around),w.pinchAround!==void 0&&(s.pinchAround=w.pinchAround),w.noInertia&&(s.noInertia=w.noInertia),a.e(p,T),a.e(x,P);this._updateMapTransform(s,p,x),this._changes=[]}_updateMapTransform(s,p,x){const w=this._map,T=w._getTransformForUpdate(),P=w.terrain;if(!(Ql(s)||P&&this._terrainMovement))return this._fireEvents(p,x,!0);w._stop(!0);let{panDelta:O,zoomDelta:F,bearingDelta:G,pitchDelta:Y,rollDelta:ne,around:ee,pinchAround:ce}=s;ce!==void 0&&(ee=ce),ee=ee||w.transform.centerPoint,P&&!T.isPointOnMapSurface(ee)&&(ee=T.centerPoint);const ye={panDelta:O,zoomDelta:F,rollDelta:ne,pitchDelta:Y,bearingDelta:G,around:ee};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(ee)&&(ee=T.centerPoint);const Se=ee.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(O?ee.sub(O):ee);this._handleMapControls({terrain:P,tr:T,deltasForHelper:ye,preZoomAroundLoc:Se,combinedEventsInProgress:p,panDelta:O}),w._applyUpdatedTransform(T),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(p,x,!0)}_handleMapControls({terrain:s,tr:p,deltasForHelper:x,preZoomAroundLoc:w,combinedEventsInProgress:T,panDelta:P}){const O=this._map.cameraHelper;if(O.handleMapControlsRollPitchBearingZoom(x,p),s)return O.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void O.handleMapControlsPan(x,p,w)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&P?p.setCenter(p.screenPointToLocation(p.centerPoint.sub(P))):O.handleMapControlsPan(x,p,w)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void O.handleMapControlsPan(x,p,w));O.handleMapControlsPan(x,p,w)}_fireEvents(s,p,x){const w=Cs(this._eventsInProgress),T=Cs(s),P={};for(const ne in s){const{originalEvent:ee}=s[ne];this._eventsInProgress[ne]||(P[`${ne}start`]=ee),this._eventsInProgress[ne]=s[ne]}!w&&T&&this._fireEvent("movestart",T.originalEvent);for(const ne in P)this._fireEvent(ne,P[ne]);T&&this._fireEvent("move",T.originalEvent);for(const ne in s){const{originalEvent:ee}=s[ne];this._fireEvent(ne,ee)}const O={};let F;for(const ne in this._eventsInProgress){const{handlerName:ee,originalEvent:ce}=this._eventsInProgress[ne];this._handlersById[ee].isActive()||(delete this._eventsInProgress[ne],F=p[ee]||ce,O[`${ne}end`]=F)}for(const ne in O)this._fireEvent(ne,O[ne]);const G=Cs(this._eventsInProgress),Y=(w||T)&&!G;if(Y&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ne=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ne.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ne)}if(x&&Y){this._updatingCamera=!0;const ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=ce=>ce!==0&&-this._bearingSnap<ce&&ce<this._bearingSnap;!ne||!ne.essential&&A.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:F})),ee(this._map.getBearing())&&this._map.resetNorth()):(ee(ne.bearing||this._map.getBearing())&&(ne.bearing=0),ne.freezeElevation=!0,this._map.easeTo(ne,{originalEvent:F})),this._updatingCamera=!1}}_fireEvent(s,p){this._map.fire(new a.l(s,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new Ud("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class $c extends a.E{constructor(s,p,x){super(),this._renderFrameCallback=()=>{const w=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=x.bearingSnap,this.cameraHelper=p,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(s,p){s.apply(this.transform),this.transform=s,this.cameraHelper=p}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,p){return this.jumpTo({center:s},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,p){return this.jumpTo({elevation:s},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,p,x){return s=a.P.convert(s).mult(-1),this.panTo(this.transform.center,a.e({offset:s},p),x)}panTo(s,p,x){return this.easeTo(a.e({center:s},p),x)}getZoom(){return this.transform.zoom}setZoom(s,p){return this.jumpTo({zoom:s},p),this}zoomTo(s,p,x){return this.easeTo(a.e({zoom:s},p),x)}zoomIn(s,p){return this.zoomTo(this.getZoom()+1,s,p),this}zoomOut(s,p){return this.zoomTo(this.getZoom()-1,s,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,p){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)).fire(new a.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(s,p){return this.jumpTo({bearing:s},p),this}getPadding(){return this.transform.padding}setPadding(s,p){return this.jumpTo({padding:s},p),this}rotateTo(s,p,x){return this.easeTo(a.e({bearing:s},p),x)}resetNorth(s,p){return this.rotateTo(0,a.e({duration:1e3},s),p),this}resetNorthPitch(s,p){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},s),p),this}snapToNorth(s,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,p):this}getPitch(){return this.transform.pitch}setPitch(s,p){return this.jumpTo({pitch:s},p),this}getRoll(){return this.transform.roll}setRoll(s,p){return this.jumpTo({roll:s},p),this}cameraForBounds(s,p){s=Ot.convert(s).adjustAntiMeridian();const x=p&&p.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),x,p)}_cameraForBoxAndBearing(s,p,x,w){const T={top:0,bottom:0,right:0,left:0};if(typeof(w=a.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const G=w.padding;w.padding={top:G,bottom:G,right:G,left:G}}const P=a.e(T,w.padding);w.padding=P;const O=this.transform,F=new Ot(s,p);return this.cameraHelper.cameraForBoxAndBearing(w,P,F,x,O)}fitBounds(s,p,x){return this._fitInternal(this.cameraForBounds(s,p),p,x)}fitScreenCoordinates(s,p,x,w,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(s)),this.transform.screenPointToLocation(a.P.convert(p)),x,w),w,T)}_fitInternal(s,p,x){return s?(delete(p=a.e(s,p)).padding,p.linear?this.easeTo(p,x):this.flyTo(p,x)):this}jumpTo(s,p){this.stop();const x=this._getTransformForUpdate();let w=!1,T=!1,P=!1;const O=x.zoom;this.cameraHelper.handleJumpToCenterZoom(x,s);const F=x.zoom!==O;return"elevation"in s&&x.elevation!==+s.elevation&&x.setElevation(+s.elevation),"bearing"in s&&x.bearing!==+s.bearing&&(w=!0,x.setBearing(+s.bearing)),"pitch"in s&&x.pitch!==+s.pitch&&(T=!0,x.setPitch(+s.pitch)),"roll"in s&&x.roll!==+s.roll&&(P=!0,x.setRoll(+s.roll)),s.padding==null||x.isPaddingEqual(s.padding)||x.setPadding(s.padding),this._applyUpdatedTransform(x),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)),F&&this.fire(new a.l("zoomstart",p)).fire(new a.l("zoom",p)).fire(new a.l("zoomend",p)),w&&this.fire(new a.l("rotatestart",p)).fire(new a.l("rotate",p)).fire(new a.l("rotateend",p)),T&&this.fire(new a.l("pitchstart",p)).fire(new a.l("pitch",p)).fire(new a.l("pitchend",p)),P&&this.fire(new a.l("rollstart",p)).fire(new a.l("roll",p)).fire(new a.l("rollend",p)),this.fire(new a.l("moveend",p))}calculateCameraOptionsFromTo(s,p,x,w=0){const T=a.a1.fromLngLat(s,p),P=a.a1.fromLngLat(x,w),O=P.x-T.x,F=P.y-T.y,G=P.z-T.z,Y=Math.hypot(O,F,G);if(Y===0)throw new Error("Can't calculate camera options with same From and To");const ne=Math.hypot(O,F),ee=a.ak(this.transform.cameraToCenterDistance/Y/this.transform.tileSize),ce=180*Math.atan2(O,-F)/Math.PI;let ye=180*Math.acos(ne/Y)/Math.PI;return ye=G<0?90-ye:90+ye,{center:P.toLngLat(),elevation:w,zoom:ee,pitch:ye,bearing:ce}}calculateCameraOptionsFromCameraLngLatAltRotation(s,p,x,w,T){const P=this.transform.calculateCenterFromCameraLngLatAlt(s,p,x,w);return{center:P.center,elevation:P.elevation,zoom:P.zoom,bearing:x,pitch:w,roll:T}}easeTo(s,p){this._stop(!1,s.easeId),((s=a.e({offset:[0,0],duration:500,easing:a.co},s)).animate===!1||!s.essential&&A.prefersReducedMotion)&&(s.duration=0);const x=this._getTransformForUpdate(),w=this.getBearing(),T=x.pitch,P=x.roll,O="bearing"in s?this._normalizeBearing(s.bearing,w):w,F="pitch"in s?+s.pitch:T,G="roll"in s?this._normalizeBearing(s.roll,P):P,Y="padding"in s?s.padding:x.padding,ne=a.P.convert(s.offset);let ee,ce;s.around&&(ee=a.S.convert(s.around),ce=x.locationToScreenPoint(ee));const ye={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Se=this.cameraHelper.handleEaseTo(x,{bearing:O,pitch:F,roll:G,padding:Y,around:ee,aroundPoint:ce,offsetAsPoint:ne,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||w!==O,this._pitching=this._pitching||F!==T,this._rolling=this._rolling||G!==P,this._padding=!x.isPaddingEqual(Y),this._zooming=this._zooming||Se.isZooming,this._easeId=s.easeId,this._prepareEase(p,s.noMoveStart,ye),this.terrain&&this._prepareElevation(Se.elevationCenter),this._ease(we=>{Se.easeFunc(we),this.terrain&&!s.freezeElevation&&this._updateElevation(we),this._applyUpdatedTransform(x),this._fireMoveEvents(p)},we=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(p,we)},s),this}_prepareEase(s,p,x={}){this._moving=!0,p||x.moving||this.fire(new a.l("movestart",s)),this._zooming&&!x.zooming&&this.fire(new a.l("zoomstart",s)),this._rotating&&!x.rotating&&this.fire(new a.l("rotatestart",s)),this._pitching&&!x.pitching&&this.fire(new a.l("pitchstart",s)),this._rolling&&!x.rolling&&this.fire(new a.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&p!==this._elevationTarget){const x=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(x-(p-(x*s+this._elevationStart))/(1-s)),this._elevationTarget=p}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const p=s.getCameraLngLat(),x=s.getCameraAltitude(),w=this.terrain?this.terrain.getElevationForLngLatZoom(p,s.zoom):0;if(x<w){const T=this.calculateCameraOptionsFromTo(p,w,s.center,s.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(s){const p=[];if(p.push(w=>this._elevateCameraIfInsideTerrain(w)),this.transformCameraUpdate&&p.push(w=>this.transformCameraUpdate(w)),!p.length)return;const x=s.clone();for(const w of p){const T=x.clone(),{center:P,zoom:O,roll:F,pitch:G,bearing:Y,elevation:ne}=w(T);P&&T.setCenter(P),ne!==void 0&&T.setElevation(ne),O!==void 0&&T.setZoom(O),F!==void 0&&T.setRoll(F),G!==void 0&&T.setPitch(G),Y!==void 0&&T.setBearing(Y),x.apply(T)}this.transform.apply(x)}_fireMoveEvents(s){this.fire(new a.l("move",s)),this._zooming&&this.fire(new a.l("zoom",s)),this._rotating&&this.fire(new a.l("rotate",s)),this._pitching&&this.fire(new a.l("pitch",s)),this._rolling&&this.fire(new a.l("roll",s))}_afterEase(s,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const x=this._zooming,w=this._rotating,T=this._pitching,P=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,x&&this.fire(new a.l("zoomend",s)),w&&this.fire(new a.l("rotateend",s)),T&&this.fire(new a.l("pitchend",s)),P&&this.fire(new a.l("rollend",s)),this.fire(new a.l("moveend",s))}flyTo(s,p){if(!s.essential&&A.prefersReducedMotion){const bt=a.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(bt,p)}this.stop(),s=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},s);const x=this._getTransformForUpdate(),w=x.bearing,T=x.pitch,P=x.roll,O=x.padding,F="bearing"in s?this._normalizeBearing(s.bearing,w):w,G="pitch"in s?+s.pitch:T,Y="roll"in s?this._normalizeBearing(s.roll,P):P,ne="padding"in s?s.padding:x.padding,ee=a.P.convert(s.offset);let ce=x.centerPoint.add(ee);const ye=x.screenPointToLocation(ce),Se=this.cameraHelper.handleFlyTo(x,{bearing:F,pitch:G,roll:Y,padding:ne,locationAtOffset:ye,offsetAsPoint:ee,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let we=s.curve;const Te=Math.max(x.width,x.height),ze=Te/Se.scaleOfZoom,Le=Se.pixelPathLength;typeof Se.scaleOfMinZoom=="number"&&(we=Math.sqrt(Te/Se.scaleOfMinZoom/Le*2));const Oe=we*we;function qe(bt){const sn=(ze*ze-Te*Te+(bt?-1:1)*Oe*Oe*Le*Le)/(2*(bt?ze:Te)*Oe*Le);return Math.log(Math.sqrt(sn*sn+1)-sn)}function Ke(bt){return(Math.exp(bt)-Math.exp(-bt))/2}function Fe(bt){return(Math.exp(bt)+Math.exp(-bt))/2}const it=qe(!1);let kt=function(bt){return Fe(it)/Fe(it+we*bt)},yt=function(bt){return Te*((Fe(it)*(Ke(sn=it+we*bt)/Fe(sn))-Ke(it))/Oe)/Le;var sn},_t=(qe(!0)-it)/we;if(Math.abs(Le)<2e-6||!isFinite(_t)){if(Math.abs(Te-ze)<1e-6)return this.easeTo(s,p);const bt=ze<Te?-1:1;_t=Math.abs(Math.log(ze/Te))/we,yt=()=>0,kt=sn=>Math.exp(bt*we*sn)}return s.duration="duration"in s?+s.duration:1e3*_t/("screenSpeed"in s?+s.screenSpeed/we:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=w!==F,this._pitching=G!==T,this._rolling=Y!==P,this._padding=!x.isPaddingEqual(ne),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Se.targetCenter),this._ease(bt=>{const sn=bt*_t,rn=1/kt(sn),Yt=yt(sn);this._rotating&&x.setBearing(a.C.number(w,F,bt)),this._pitching&&x.setPitch(a.C.number(T,G,bt)),this._rolling&&x.setRoll(a.C.number(P,Y,bt)),this._padding&&(x.interpolatePadding(O,ne,bt),ce=x.centerPoint.add(ee)),Se.easeFunc(bt,rn,Yt,ce),this.terrain&&!s.freezeElevation&&this._updateElevation(bt),this._applyUpdatedTransform(x),this._fireMoveEvents(p)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(p)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,p){var x;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,p)}return s||(x=this.handlers)===null||x===void 0||x.stop(!1),this}_ease(s,p,x){x.animate===!1||x.duration===0?(s(1),p()):(this._easeStart=A.now(),this._easeOptions=x,this._onEaseFrame=s,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,p){s=a.aO(s,-180,180);const x=Math.abs(s-p);return Math.abs(s-360-p)<x&&(s-=360),Math.abs(s+360-p)<x&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(s),this.transform.tileZoom):null}}const En={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class zn{constructor(s=En){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=N.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=N.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,p){const x=this._map._getUIString(`AttributionControl.${p}`);s.title=x,s.setAttribute("aria-label",x)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const p=this._map.style.sourceCaches;for(const w in p){const T=p[w];if(T.used||T.usedForTerrain){const P=T.getSource();P.attribution&&s.indexOf(P.attribution)<0&&s.push(P.attribution)}}s=s.filter(w=>String(w).trim()),s.sort((w,T)=>w.length-T.length),s=s.filter((w,T)=>{for(let P=T+1;P<s.length;P++)if(s[P].indexOf(w)>=0)return!1;return!0});const x=s.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,s.length?(this._innerContainer.innerHTML=N.sanitize(x),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Gu{constructor(s={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const x=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&x.classList.add("maplibregl-compact"):x.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=N.create("div","maplibregl-ctrl");const p=N.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){N.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ls{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const p=++this._id;return this._queue.push({callback:s,id:p,cancelled:!1}),p}remove(s){const p=this._currentlyRunning,x=p?this._queue.concat(p):this._queue;for(const w of x)if(w.id===s)return void(w.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const x of p)if(!x.cancelled&&(x.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Wu=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class jr extends a.E{constructor(s){super(),this._lastTilesetChange=A.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*Dg(2,this.deltaZoom),s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,p){this.sourceCache.update(s,p),this._renderableTilesKeys=[];const x={};for(const w of wt(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))x[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.terrainRttPosMatrix32f=new Float64Array(16),a.bZ(w.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[w.key]=new ae(w,this.tileSize),this._lastTilesetChange=A.now());for(const w in this._tiles)x[w]||delete this._tiles[w]}freeRtt(s){for(const p in this._tiles){const x=this._tiles[p];(!s||x.tileID.equals(s)||x.tileID.isChildOf(s)||s.isChildOf(x.tileID))&&(x.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,p){return p?this._getTerrainCoordsForTileRanges(s,p):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){const p={};for(const x of this._renderableTilesKeys){const w=this._tiles[x].tileID,T=s.clone(),P=a.ba();if(w.canonical.equals(s.canonical))a.bZ(P,0,a.$,a.$,0,0,1);else if(w.canonical.isChildOf(s.canonical)){const O=w.canonical.z-s.canonical.z,F=w.canonical.x-(w.canonical.x>>O<<O),G=w.canonical.y-(w.canonical.y>>O<<O),Y=a.$>>O;a.bZ(P,0,Y,Y,0,0,1),a.M(P,P,[-F*Y,-G*Y,0])}else{if(!s.canonical.isChildOf(w.canonical))continue;{const O=s.canonical.z-w.canonical.z,F=s.canonical.x-(s.canonical.x>>O<<O),G=s.canonical.y-(s.canonical.y>>O<<O),Y=a.$>>O;a.bZ(P,0,a.$,a.$,0,0,1),a.M(P,P,[F*Y,G*Y,0]),a.N(P,P,[1/Dg(2,O),1/Dg(2,O),0])}}T.terrainRttPosMatrix32f=new Float32Array(P),p[x]=T}return p}_getTerrainCoordsForTileRanges(s,p){const x={};for(const w of this._renderableTilesKeys){const T=this._tiles[w].tileID;if(!this._isWithinTileRanges(T,p))continue;const P=s.clone(),O=a.ba();if(T.canonical.z===s.canonical.z){const F=s.canonical.x-T.canonical.x,G=s.canonical.y-T.canonical.y;a.bZ(O,0,a.$,a.$,0,0,1),a.M(O,O,[F*a.$,G*a.$,0])}else if(T.canonical.z>s.canonical.z){const F=T.canonical.z-s.canonical.z,G=T.canonical.x-(T.canonical.x>>F<<F),Y=T.canonical.y-(T.canonical.y>>F<<F),ne=s.canonical.x-(T.canonical.x>>F),ee=s.canonical.y-(T.canonical.y>>F),ce=a.$>>F;a.bZ(O,0,ce,ce,0,0,1),a.M(O,O,[-G*ce+ne*a.$,-Y*ce+ee*a.$,0])}else{const F=s.canonical.z-T.canonical.z,G=s.canonical.x-(s.canonical.x>>F<<F),Y=s.canonical.y-(s.canonical.y>>F<<F),ne=(s.canonical.x>>F)-T.canonical.x,ee=(s.canonical.y>>F)-T.canonical.y,ce=a.$<<F;a.bZ(O,0,ce,ce,0,0,1),a.M(O,O,[G*a.$+ne*ce,Y*a.$+ee*ce,0])}P.terrainRttPosMatrix32f=new Float32Array(O),x[w]=P}return x}getSourceTile(s,p){const x=this.sourceCache._source;let w=s.overscaledZ-this.deltaZoom;if(w>x.maxzoom&&(w=x.maxzoom),w<x.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(w).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!T||!T.dem)&&p)for(;w>=x.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(s.scaledTo(w--).key);return T}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,p){return p[s.canonical.z]&&s.canonical.x>=p[s.canonical.z].minTileX&&s.canonical.x<=p[s.canonical.z].maxTileX&&s.canonical.y>=p[s.canonical.z].minTileY&&s.canonical.y<=p[s.canonical.z].maxTileY}}class vp{constructor(s,p,x){this._meshCache={},this.painter=s,this.sourceCache=new jr(p),this.options=x,this.exaggeration=typeof x.exaggeration=="number"?x.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,p,x,w=a.$){var T;if(!(p>=0&&p<w&&x>=0&&x<w))return 0;const P=this.getTerrainData(s),O=(T=P.tile)===null||T===void 0?void 0:T.dem;if(!O)return 0;const F=a.cs([],[p/w*a.$,x/w*a.$],P.u_terrain_matrix),G=[F[0]*O.dim,F[1]*O.dim],Y=Math.floor(G[0]),ne=Math.floor(G[1]),ee=G[0]-Y,ce=G[1]-ne;return O.get(Y,ne)*(1-ee)*(1-ce)+O.get(Y+1,ne)*ee*(1-ce)+O.get(Y,ne+1)*(1-ee)*ce+O.get(Y+1,ne+1)*ee*ce}getElevationForLngLatZoom(s,p){if(!a.ct(p,s.wrap()))return 0;const{tileID:x,mercatorX:w,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(s,p);return this.getElevation(x,w%a.$,T%a.$,a.$)}getElevation(s,p,x,w=a.$){return this.getDEMElevation(s,p,x,w)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const w=this.painter.context,T=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(w,T,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(w,new a.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}const p=this.sourceCache.getSourceTile(s,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const w=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new a.T(w,p.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),p.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const x=p&&p+p.tileID.key+s.key;if(x&&!this._demMatrixCache[x]){const w=this.sourceCache.sourceCache._source.maxzoom;let T=s.canonical.z-p.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=w?T=s.canonical.z-w:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=s.canonical.x-(s.canonical.x>>T<<T),O=s.canonical.y-(s.canonical.y>>T<<T),F=a.cu(new Float64Array(16),[1/(a.$<<T),1/(a.$<<T),0]);a.M(F,F,[P*a.$,O*a.$,0]),this._demMatrixCache[s.key]={matrix:F,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:x?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(s){const p=this.painter,x=p.width/devicePixelRatio,w=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===x&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(p.context,{width:x,height:w,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(p.context,{width:x,height:w,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(x,w,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,x,w))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,P=0;T<this._coordsTextureSize;T++)for(let O=0;O<this._coordsTextureSize;O++,P+=4)p[P+0]=255&O,p[P+1]=255&T,p[P+2]=O>>8<<4|T>>8,p[P+3]=0;const x=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),w=new a.T(s,x,s.gl.RGBA,{premultiply:!1});return w.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),x=this.painter.context,w=x.gl,T=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),P=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);x.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(T,O-P-1,1,1,w.RGBA,w.UNSIGNED_BYTE,p),x.bindFramebuffer.set(null);const F=p[0]+(p[2]>>4<<8),G=p[1]+((15&p[2])<<8),Y=this.coordsIndex[255-p[3]],ne=Y&&this.sourceCache.getTileByID(Y);if(!ne)return null;const ee=this._coordsTextureSize,ce=(1<<ne.tileID.canonical.z)*ee;return new a.a1((ne.tileID.canonical.x*ee+F)/ce+ne.tileID.wrap,(ne.tileID.canonical.y*ee+G)/ce,this.getElevation(ne.tileID,F,G,ee))}depthAtPoint(s){const p=new Uint8Array(4),x=this.painter.context,w=x.gl;return x.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,p),x.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(s){var p;const x=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,w=x&&s.canonical.y===0,T=x&&s.canonical.y===(1<<s.canonical.z)-1,P=`m_${w?"n":""}_${T?"s":""}`;if(this._meshCache[P])return this._meshCache[P];const O=this.painter.context,F=new a.cv,G=new a.aN,Y=this.meshSize,ne=a.$/Y,ee=Y*Y;for(let Fe=0;Fe<=Y;Fe++)for(let it=0;it<=Y;it++)F.emplaceBack(it*ne,Fe*ne,0);for(let Fe=0;Fe<ee;Fe+=Y+1)for(let it=0;it<Y;it++)G.emplaceBack(it+Fe,Y+it+Fe+1,Y+it+Fe+2),G.emplaceBack(it+Fe,Y+it+Fe+2,it+Fe+1);const ce=F.length,ye=ce+(Y+1),Se=(Y+1)*Y,we=w?a.bh:0,Te=w?0:1,ze=T?a.bi:a.$,Le=T?0:1;for(let Fe=0;Fe<=Y;Fe++)F.emplaceBack(Fe*ne,we,Te);for(let Fe=0;Fe<=Y;Fe++)F.emplaceBack(Fe*ne,ze,Le);for(let Fe=0;Fe<Y;Fe++)G.emplaceBack(Se+Fe,ye+Fe,ye+Fe+1),G.emplaceBack(Se+Fe,ye+Fe+1,Se+Fe+1),G.emplaceBack(0+Fe,ce+Fe+1,ce+Fe),G.emplaceBack(0+Fe,0+Fe+1,ce+Fe+1);const Oe=F.length,qe=Oe+2*(Y+1);for(const Fe of[0,1])for(let it=0;it<=Y;it++)for(const kt of[0,1])F.emplaceBack(Fe*a.$,it*ne,kt);for(let Fe=0;Fe<2*Y;Fe+=2)G.emplaceBack(Oe+Fe,Oe+Fe+1,Oe+Fe+3),G.emplaceBack(Oe+Fe,Oe+Fe+3,Oe+Fe+2),G.emplaceBack(qe+Fe,qe+Fe+3,qe+Fe+1),G.emplaceBack(qe+Fe,qe+Fe+2,qe+Fe+3);const Ke=new wo(O.createVertexBuffer(F,Wu.members),O.createIndexBuffer(G),a.aM.simpleSegment(0,0,F.length,G.length));return this._meshCache[P]=Ke,Ke}getMeshFrameDelta(s){return 2*Math.PI*a.bu/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,p){var x;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(s,p);return(x=this.getMinMaxElevation(w).minElevation)!==null&&x!==void 0?x:0}getMinMaxElevation(s){const p=this.getTerrainData(s).tile,x={minElevation:null,maxElevation:null};return p&&p.dem&&(x.minElevation=p.dem.min*this.exaggeration,x.maxElevation=p.dem.max*this.exaggeration),x}_getOverscaledTileIDFromLngLatZoom(s,p){const x=a.a1.fromLngLat(s.wrap()),w=(1<<p)*a.$,T=x.x*w,P=x.y*w,O=Math.floor(T/a.$),F=Math.floor(P/a.$);return{tileID:new a.Z(p,0,p,O,F),mercatorX:T,mercatorY:P}}}class to{constructor(s,p,x){this._context=s,this._size=p,this._tileSize=x,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),x=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return x.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(x.texture),{id:s,fbo:p,texture:x,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>s.id!==p),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}const Hc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class wp{constructor(s,p){this.painter=s,this.terrain=p,this.pool=new to(s.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(x=>!s._layers[x].isHidden(p)),this._coordsAscending={};for(const x in s.sourceCaches){this._coordsAscending[x]={};const w=s.sourceCaches[x].getVisibleCoordinates(),T=s.sourceCaches[x].getSource(),P=T instanceof on?T.terrainTileRanges:null;for(const O of w){const F=this.terrain.sourceCache.getTerrainCoords(O,P);for(const G in F)this._coordsAscending[x][G]||(this._coordsAscending[x][G]=[]),this._coordsAscending[x][G].push(F[G])}}this._coordsAscendingStr={};for(const x of s._order){const w=s._layers[x],T=w.source;if(Hc[w.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const P in this._coordsAscending[T])this._coordsAscendingStr[T][P]=this._coordsAscending[T][P].map(O=>O.key).sort().join()}}for(const x of this._renderableTiles)for(const w in this._coordsAscendingStr){const T=this._coordsAscendingStr[w][x.tileID.key];T&&T!==x.rttCoords[w]&&(x.rtt=[])}}renderLayer(s,p){if(s.isHidden(this.painter.transform.zoom))return!1;const x=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),w=s.type,T=this.painter,P=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Hc[w]&&(this._prevType&&Hc[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(s.id),!P))return!0;if(Hc[this._prevType]||Hc[w]&&P){this._prevType=w;const O=this._stacks.length-1,F=this._stacks[O]||[];for(const G of this._renderableTiles){if(this.pool.isFull()&&(Bu(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(G),G.rtt[O]){const ne=this.pool.getObjectForId(G.rtt[O].id);if(ne.stamp===G.rtt[O].stamp){this.pool.useObject(ne);continue}}const Y=this.pool.getOrCreateFreeObject();this.pool.useObject(Y),this.pool.stampObject(Y),G.rtt[O]={id:Y.id,stamp:Y.stamp},T.context.bindFramebuffer.set(Y.fbo.framebuffer),T.context.clear({color:a.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let ne=0;ne<F.length;ne++){const ee=T.style._layers[F[ne]],ce=ee.source?this._coordsAscending[ee.source][G.tileID.key]:[G.tileID];T.context.viewport.set([0,0,Y.fbo.width,Y.fbo.height]),T._renderTileClippingMasks(ee,ce,!0),T.renderLayer(T,T.style.sourceCaches[ee.source],ee,ce,x),ee.source&&(G.rttCoords[ee.source]=this._coordsAscendingStr[ee.source][G.tileID.key])}}return Bu(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects(),Hc[w]}return!1}}const Sp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},jp=g,lr={hash:!1,interactive:!0,bearingSnap:7,attributionControl:En,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},fi={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ts{constructor(s,p,x=!1){this.mousedown=T=>{this.startMove(T,N.mousePos(this.element,T)),N.addEventListener(window,"mousemove",this.mousemove),N.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,N.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),N.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=N.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const w=new Wh;this._rotatePitchHandler=new Tl({clickTolerance:3,move:(T,P)=>{const O=p.getBoundingClientRect(),F=new a.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:a.cn(new a.P(T.x,P.y),P,F),pitchDelta:x?-.5*(P.y-T.y):void 0}},moveStateManager:w,enable:!0,assignEvents:()=>{}}),this.map=s,N.addEventListener(p,"mousedown",this.mousedown),N.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(p,"touchcancel",this.reset)}startMove(s,p){this._rotatePitchHandler.dragStart(s,p),N.disableDrag()}move(s,p){const x=this.map,{bearingDelta:w,pitchDelta:T}=this._rotatePitchHandler.dragMove(s,p)||{};w&&x.setBearing(x.getBearing()+w),T&&x.setPitch(x.getPitch()+T)}off(){const s=this.element;N.removeEventListener(s,"mousedown",this.mousedown),N.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend),N.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){N.enableDrag(),N.removeEventListener(window,"mousemove",this.mousemove),N.removeEventListener(window,"mouseup",this.mouseup),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend)}}let no;function Nl(j,s,p,x=!1){if(x||!p.getCoveringTilesDetailsProvider().allowWorldCopies())return j==null?void 0:j.wrap();const w=new a.S(j.lng,j.lat);if(j=new a.S(j.lng,j.lat),s){const T=new a.S(j.lng-360,j.lat),P=new a.S(j.lng+360,j.lat),O=p.locationToScreenPoint(j).distSqr(s);p.locationToScreenPoint(T).distSqr(s)<O?j=T:p.locationToScreenPoint(P).distSqr(s)<O&&(j=P)}for(;Math.abs(j.lng-p.center.lng)>180;){const T=p.locationToScreenPoint(j);if(T.x>=0&&T.y>=0&&T.x<=p.width&&T.y<=p.height)break;j.lng>p.center.lng?j.lng-=360:j.lng+=360}return j.lng!==w.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(j))?j:w}const Jl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function io(j,s,p){const x=j.classList;for(const w in Jl)x.remove(`maplibregl-${p}-anchor-${w}`);x.add(`maplibregl-${p}-anchor-${s}`)}class ec extends a.E{constructor(s){if(super(),this._onKeyPress=p=>{const x=p.code,w=p.charCode||p.keyCode;x!=="Space"&&x!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=p=>{const x=p.originalEvent.target,w=this._element;this._popup&&(x===w||w.contains(x))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const x=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!x)&&this._map.once("render",this._update),this._lngLat=Nl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),N.setTransform(this._element,`${Jl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${w}`),A.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){const x=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=x}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=a.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div");const p=N.createNS("http://www.w3.org/2000/svg","svg"),x=41,w=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${x}px`),p.setAttributeNS(null,"width",`${w}px`),p.setAttributeNS(null,"viewBox",`0 0 ${w} ${x}`);const T=N.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const P=N.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const O=N.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const F=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Te of F){const ze=N.createNS("http://www.w3.org/2000/svg","ellipse");ze.setAttributeNS(null,"opacity","0.04"),ze.setAttributeNS(null,"cx","10.5"),ze.setAttributeNS(null,"cy","5.80029008"),ze.setAttributeNS(null,"rx",Te.rx),ze.setAttributeNS(null,"ry",Te.ry),O.appendChild(ze)}const G=N.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"fill",this._color);const Y=N.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),G.appendChild(Y);const ne=N.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"fill","#000000");const ee=N.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ne.appendChild(ee);const ce=N.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ce.setAttributeNS(null,"fill","#FFFFFF");const ye=N.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Se=N.createNS("http://www.w3.org/2000/svg","circle");Se.setAttributeNS(null,"fill","#000000"),Se.setAttributeNS(null,"opacity","0.25"),Se.setAttributeNS(null,"cx","5.5"),Se.setAttributeNS(null,"cy","5.5"),Se.setAttributeNS(null,"r","5.4999962");const we=N.createNS("http://www.w3.org/2000/svg","circle");we.setAttributeNS(null,"fill","#FFFFFF"),we.setAttributeNS(null,"cx","5.5"),we.setAttributeNS(null,"cy","5.5"),we.setAttributeNS(null,"r","5.4999962"),ye.appendChild(Se),ye.appendChild(we),P.appendChild(O),P.appendChild(G),P.appendChild(ne),P.appendChild(ce),P.appendChild(ye),p.appendChild(P),p.setAttributeNS(null,"height",x*this._scale+"px"),p.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),io(this._element,this._anchor,"marker"),s&&s.className)for(const p of s.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const w=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var p,x;const w=(p=this._map)===null||p===void 0?void 0:p.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!w||T){const ce=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ce&&(this._element.style.opacity=ce))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const P=this._map,O=P.terrain.depthAtPoint(this._pos),F=P.terrain.getElevationForLngLatZoom(this._lngLat,P.transform.tileZoom);if(P.transform.lngLatToCameraDepth(this._lngLat,F)-O<.006)return void(this._element.style.opacity=this._opacity);const G=-this._offset.y/P.transform.pixelsPerMeter,Y=Math.sin(P.getPitch()*Math.PI/180)*G,ne=P.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),ee=P.transform.lngLatToCameraDepth(this._lngLat,F+Y)-ne>.006;!((x=this._popup)===null||x===void 0)&&x.isOpen()&&ee&&this._popup.remove(),this._element.style.opacity=ee?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=a.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,p){return(this._opacity===void 0||s===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const $d={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Xo=0,tc=!1;const Kh={maxWidth:100,unit:"metric"};function Hd(j,s,p){const x=p&&p.maxWidth||100,w=j._container.clientHeight/2,T=j._container.clientWidth/2,P=j.unproject([T-x/2,w]),O=j.unproject([T+x/2,w]),F=Math.round(j.project(O).x-j.project(P).x),G=Math.min(x,F,j._container.clientWidth),Y=P.distanceTo(O);if(p&&p.unit==="imperial"){const ne=3.2808*Y;ne>5280?nc(s,G,ne/5280,j._getUIString("ScaleControl.Miles")):nc(s,G,ne,j._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?nc(s,G,Y/1852,j._getUIString("ScaleControl.NauticalMiles")):Y>=1e3?nc(s,G,Y/1e3,j._getUIString("ScaleControl.Kilometers")):nc(s,G,Y,j._getUIString("ScaleControl.Meters"))}function nc(j,s,p,x){const w=function(T){const P=Math.pow(10,`${Math.floor(T)}`.length-1);let O=T/P;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(F){const G=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*G)/G}(O),P*O}(p);j.style.width=s*(w/p)+"px",j.innerHTML=`${w}&nbsp;${x}`}const Qh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Jh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Zu(j){if(j){if(typeof j=="number"){const s=Math.round(Math.abs(j)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,j),"top-left":new a.P(s,s),"top-right":new a.P(-s,s),bottom:new a.P(0,-j),"bottom-left":new a.P(s,-s),"bottom-right":new a.P(-s,-s),left:new a.P(j,0),right:new a.P(-j,0)}}if(j instanceof a.P||Array.isArray(j)){const s=a.P.convert(j);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:a.P.convert(j.center||[0,0]),top:a.P.convert(j.top||[0,0]),"top-left":a.P.convert(j["top-left"]||[0,0]),"top-right":a.P.convert(j["top-right"]||[0,0]),bottom:a.P.convert(j.bottom||[0,0]),"bottom-left":a.P.convert(j["bottom-left"]||[0,0]),"bottom-right":a.P.convert(j["bottom-right"]||[0,0]),left:a.P.convert(j.left||[0,0]),right:a.P.convert(j.right||[0,0])}}return Zu(new a.P(0,0))}const ef=g;c.AJAXError=a.cz,c.Event=a.l,c.Evented=a.E,c.LngLat=a.S,c.MercatorCoordinate=a.a1,c.Point=a.P,c.addProtocol=a.cA,c.config=a.a,c.removeProtocol=a.cB,c.AttributionControl=zn,c.BoxZoomHandler=Ia,c.CanvasSource=We,c.CooperativeGesturesHandler=Xi,c.DoubleClickZoomHandler=Vd,c.DragPanHandler=Xh,c.DragRotateHandler=eo,c.EdgeInsets=Ma,c.FullscreenControl=class extends a.E{constructor(j={}){super(),this._onFullscreenChange=()=>{var s;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=p==null?void 0:p.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,j&&j.container&&(j.container instanceof HTMLElement?this._container=j.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(j){return this._map=j,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){N.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const j=this._fullscreenButton=N.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);N.create("span","maplibregl-ctrl-icon",j).setAttribute("aria-hidden","true"),j.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const j=this._getTitle();this._fullscreenButton.setAttribute("aria-label",j),this._fullscreenButton.title=j}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=hn,c.GeolocateControl=class extends a.E{constructor(j){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const p=new a.S(s.coords.longitude,s.coords.latitude),x=s.coords.accuracy,w=this._map.getBearing(),T=a.e({bearing:w},this.options.fitBoundsOptions),P=Ot.fromLngLat(p,x);this._map.fitBounds(P,T,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const p=new a.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=s.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&tc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=N.create("button","maplibregl-ctrl-geolocate",this._container),N.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ec({element:this._dotElement}),this._circleElement=N.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ec({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{const x=(p==null?void 0:p[0])instanceof ResizeObserverEntry;p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||x||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},$d,j)}onAdd(j){return this._map=j,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(s=!1){if(no!==void 0&&!s)return no;if(window.navigator.permissions===void 0)return no=!!window.navigator.geolocation,no;try{no=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(p){no=!!window.navigator.geolocation}return no})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Xo=0,tc=!1}_isOutOfMapMaxBounds(j){const s=this._map.getMaxBounds(),p=j.coords;return s&&(p.longitude<s.getWest()||p.longitude>s.getEast()||p.latitude<s.getSouth()||p.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const j=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&j))return;const s=this._map.project(j),p=this._map.unproject([s.x+100,s.y]),x=j.distanceTo(p)/100,w=2*this._accuracy/x;this._circleElement.style.width=`${w.toFixed(2)}px`,this._circleElement.style.height=`${w.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Xo--,tc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let j;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Xo++,Xo>1?(j={maximumAge:6e5,timeout:0},tc=!0):(j=this.options.positionOptions,tc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,j)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var j;const s=(j=this._map.getProjection())===null||j===void 0?void 0:j.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var j;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((j=this._map.getProjection())===null||j===void 0?void 0:j.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(j){return this._map=j,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=N.create("button","maplibregl-ctrl-globe",this._container),N.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=gr,c.ImageSource=on,c.KeyboardHandler=Kl,c.LngLatBounds=Ot,c.LogoControl=Gu,c.Map=class extends $c{constructor(j){var s,p;a.cw.mark(a.cx.create);const x=Object.assign(Object.assign(Object.assign({},lr),j),{canvasContextAttributes:Object.assign(Object.assign({},lr.canvasContextAttributes),j.canvasContextAttributes)});if(x.minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const w=new jo,T=new Aa;if(x.minZoom!==void 0&&w.setMinZoom(x.minZoom),x.maxZoom!==void 0&&w.setMaxZoom(x.maxZoom),x.minPitch!==void 0&&w.setMinPitch(x.minPitch),x.maxPitch!==void 0&&w.setMaxPitch(x.maxPitch),x.renderWorldCopies!==void 0&&w.setRenderWorldCopies(x.renderWorldCopies),super(w,T,{bearingSnap:x.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ls,this._controls=[],this._mapId=a.a7(),this._contextLost=O=>{O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=x.interactive,this._maxTileCacheSize=x.maxTileCacheSize,this._maxTileCacheZoomLevels=x.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},x.canvasContextAttributes),this._trackResize=x.trackResize===!0,this._bearingSnap=x.bearingSnap,this._centerClampedToGround=x.centerClampedToGround,this._refreshExpiredTiles=x.refreshExpiredTiles===!0,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions===!0,this._collectResourceTiming=x.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Sp),x.locale),this._clickTolerance=x.clickTolerance,this._overridePixelRatio=x.pixelRatio,this._maxCanvasSize=x.maxCanvasSize,this.transformCameraUpdate=x.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=x.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Z.addThrottleControl(()=>this.isMoving()),this._requestManager=new K(x.transformRequest),typeof x.container=="string"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let O=!1;const F=jl(G=>{this._trackResize&&!this._removed&&(this.resize(G),this.redraw())},50);this._resizeObserver=new ResizeObserver(G=>{O?F(G):O=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Lr(this,x),this._hash=x.hash&&new gr(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,elevation:x.elevation,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,roll:x.roll}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,a.e({},x.fitBoundsOptions,{duration:0}))));const P=typeof x.style=="string"||((p=(s=x.style)===null||s===void 0?void 0:s.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,P),this._localIdeographFontFamily=x.localIdeographFontFamily,this._validateStyle=x.validateStyle,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new zn(typeof x.attributionControl=="boolean"?void 0:x.attributionControl)),x.maplibreLogo&&this.addControl(new Gu,x.logoPosition),this.on("style.load",()=>{if(P||this._resizeTransform(),this.transform.unmodified){const O=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}}),this.on("data",O=>{this._update(O.dataType==="style"),this.fire(new a.l(`${O.dataType}data`,O))}),this.on("dataloading",O=>{this.fire(new a.l(`${O.dataType}dataloading`,O))}),this.on("dataabort",O=>{this.fire(new a.l("sourcedataabort",O))})}_getMapId(){return this._mapId}setGlobalStateProperty(j,s){return this.style.setGlobalStateProperty(j,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(j,s){if(s===void 0&&(s=j.getDefaultPosition?j.getDefaultPosition():"top-right"),!j||!j.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=j.onAdd(this);this._controls.push(j);const x=this._controlPositions[s];return s.indexOf("bottom")!==-1?x.insertBefore(p,x.firstChild):x.appendChild(p),this}removeControl(j){if(!j||!j.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(j);return s>-1&&this._controls.splice(s,1),j.onRemove(this),this}hasControl(j){return this._controls.indexOf(j)>-1}coveringTiles(j){return wt(this.transform,j)}calculateCameraOptionsFromTo(j,s,p,x){return x==null&&this.terrain&&(x=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(j,s,p,x)}resize(j,s=!0){const[p,x]=this._containerDimensions(),w=this._getClampedPixelRatio(p,x);if(this._resizeCanvas(p,x,w),this.painter.resize(p,x,w),this.painter.overLimit()){const P=this.painter.context.gl;this._maxCanvasSize=[P.drawingBufferWidth,P.drawingBufferHeight];const O=this._getClampedPixelRatio(p,x);this._resizeCanvas(p,x,O),this.painter.resize(p,x,O)}this._resizeTransform(s);const T=!this._moving;return T&&(this.stop(),this.fire(new a.l("movestart",j)).fire(new a.l("move",j))),this.fire(new a.l("resize",j)),T&&this.fire(new a.l("moveend",j)),this}_resizeTransform(j=!0){var s;const[p,x]=this._containerDimensions();this.transform.resize(p,x,j),(s=this._requestedCameraState)===null||s===void 0||s.resize(p,x,j)}_getClampedPixelRatio(j,s){const{0:p,1:x}=this._maxCanvasSize,w=this.getPixelRatio(),T=j*w,P=s*w;return Math.min(T>p?p/T:1,P>x?x/P:1)*w}getPixelRatio(){var j;return(j=this._overridePixelRatio)!==null&&j!==void 0?j:devicePixelRatio}setPixelRatio(j){this._overridePixelRatio=j,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(j){return this.transform.setMaxBounds(Ot.convert(j)),this._update()}setMinZoom(j){if((j=j==null?-2:j)>=-2&&j<=this.transform.maxZoom)return this.transform.setMinZoom(j),this._update(),this.getZoom()<j&&this.setZoom(j),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(j){if((j=j==null?22:j)>=this.transform.minZoom)return this.transform.setMaxZoom(j),this._update(),this.getZoom()>j&&this.setZoom(j),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(j){if((j=j==null?0:j)<0)throw new Error("minPitch must be greater than or equal to 0");if(j>=0&&j<=this.transform.maxPitch)return this.transform.setMinPitch(j),this._update(),this.getPitch()<j&&this.setPitch(j),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(j){if((j=j==null?60:j)>180)throw new Error("maxPitch must be less than or equal to 180");if(j>=this.transform.minPitch)return this.transform.setMaxPitch(j),this._update(),this.getPitch()>j&&this.setPitch(j),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(j){return this.transform.setRenderWorldCopies(j),this._update()}project(j){return this.transform.locationToScreenPoint(a.S.convert(j),this.style&&this.terrain)}unproject(j){return this.transform.screenPointToLocation(a.P.convert(j),this.terrain)}isMoving(){var j;return this._moving||((j=this.handlers)===null||j===void 0?void 0:j.isMoving())}isZooming(){var j;return this._zooming||((j=this.handlers)===null||j===void 0?void 0:j.isZooming())}isRotating(){var j;return this._rotating||((j=this.handlers)===null||j===void 0?void 0:j.isRotating())}_createDelegatedListener(j,s,p){if(j==="mouseenter"||j==="mouseover"){let x=!1;return{layers:s,listener:p,delegates:{mousemove:T=>{const P=s.filter(F=>this.getLayer(F)),O=P.length!==0?this.queryRenderedFeatures(T.point,{layers:P}):[];O.length?x||(x=!0,p.call(this,new Fr(j,this,T.originalEvent,{features:O}))):x=!1},mouseout:()=>{x=!1}}}}if(j==="mouseleave"||j==="mouseout"){let x=!1;return{layers:s,listener:p,delegates:{mousemove:P=>{const O=s.filter(F=>this.getLayer(F));(O.length!==0?this.queryRenderedFeatures(P.point,{layers:O}):[]).length?x=!0:x&&(x=!1,p.call(this,new Fr(j,this,P.originalEvent)))},mouseout:P=>{x&&(x=!1,p.call(this,new Fr(j,this,P.originalEvent)))}}}}{const x=w=>{const T=s.filter(O=>this.getLayer(O)),P=T.length!==0?this.queryRenderedFeatures(w.point,{layers:T}):[];P.length&&(w.features=P,p.call(this,w),delete w.features)};return{layers:s,listener:p,delegates:{[j]:x}}}}_saveDelegatedListener(j,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[j]=this._delegatedListeners[j]||[],this._delegatedListeners[j].push(s)}_removeDelegatedListener(j,s,p){if(!this._delegatedListeners||!this._delegatedListeners[j])return;const x=this._delegatedListeners[j];for(let w=0;w<x.length;w++){const T=x[w];if(T.listener===p&&T.layers.length===s.length&&T.layers.every(P=>s.includes(P))){for(const P in T.delegates)this.off(P,T.delegates[P]);return void x.splice(w,1)}}}on(j,s,p){if(p===void 0)return super.on(j,s);const x=typeof s=="string"?[s]:s,w=this._createDelegatedListener(j,x,p);this._saveDelegatedListener(j,w);for(const T in w.delegates)this.on(T,w.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(j,x,p)}}}once(j,s,p){if(p===void 0)return super.once(j,s);const x=typeof s=="string"?[s]:s,w=this._createDelegatedListener(j,x,p);for(const T in w.delegates){const P=w.delegates[T];w.delegates[T]=(...O)=>{this._removeDelegatedListener(j,x,p),P(...O)}}this._saveDelegatedListener(j,w);for(const T in w.delegates)this.once(T,w.delegates[T]);return this}off(j,s,p){return p===void 0?super.off(j,s):(this._removeDelegatedListener(j,typeof s=="string"?[s]:s,p),this)}queryRenderedFeatures(j,s){if(!this.style)return[];let p;const x=j instanceof a.P||Array.isArray(j),w=x?j:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(x?{}:j)||{},w instanceof a.P||typeof w[0]=="number")p=[a.P.convert(w)];else{const T=a.P.convert(w[0]),P=a.P.convert(w[1]);p=[T,new a.P(P.x,T.y),P,new a.P(T.x,P.y),T]}return this.style.queryRenderedFeatures(p,s,this.transform)}querySourceFeatures(j,s){return this.style.querySourceFeatures(j,s)}setStyle(j,s){return(s=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&j?(this._diffStyle(j,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(j,s))}setTransformRequest(j){return this._requestManager.setTransformRequest(j),this}_getUIString(j){const s=this._locale[j];if(s==null)throw new Error(`Missing UI string '${j}'`);return s}_updateStyle(j,s){var p,x;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(j,s));const w=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!j)),j?(this.style=new tp(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof j=="string"?this.style.loadURL(j,s,w):this.style.loadJSON(j,s,w),this):((x=(p=this.style)===null||p===void 0?void 0:p.projection)===null||x===void 0||x.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new tp(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(j,s){if(typeof j=="string"){const p=this._requestManager.transformRequest(j,"Style");a.j(p,new AbortController).then(x=>{this._updateDiff(x.data,s)}).catch(x=>{x&&this.fire(new a.k(x))})}else typeof j=="object"&&this._updateDiff(j,s)}_updateDiff(j,s){try{this.style.setState(j,s)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(j,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(j,s){return this._lazyInitEmptyStyle(),this.style.addSource(j,s),this._update(!0)}isSourceLoaded(j){const s=this.style&&this.style.sourceCaches[j];if(s!==void 0)return s.loaded();this.fire(new a.k(new Error(`There is no source with ID '${j}'`)))}setTerrain(j){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),j){const s=this.style.sourceCaches[j.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${j.source}`);this.terrain===null&&s.reload();for(const p in this.style._layers){const x=this.style._layers[p];x.type==="hillshade"&&x.source===j.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),x.type==="color-relief"&&x.source===j.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new vp(this.painter,s,j),this.painter.renderToTexture=new wp(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var x;p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==j.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((x=p.source)===null||x===void 0?void 0:x.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:j})),this}getTerrain(){var j,s;return(s=(j=this.terrain)===null||j===void 0?void 0:j.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const j=this.style&&this.style.sourceCaches;for(const s in j){const p=j[s]._tiles;for(const x in p){const w=p[x];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(j){return this.style.removeSource(j),this._update(!0)}getSource(j){return this.style.getSource(j)}setSourceTileLodParams(j,s,p){if(p){const x=this.getSource(p);if(!x)throw new Error(`There is no source with ID "${p}", cannot set LOD parameters`);x.calculateTileZoom=bn(Math.max(1,j),Math.max(1,s))}else for(const x in this.style.sourceCaches)this.style.sourceCaches[x].getSource().calculateTileZoom=bn(Math.max(1,j),Math.max(1,s));return this._update(!0),this}refreshTiles(j,s){const p=this.style.sourceCaches[j];if(!p)throw new Error(`There is no source cache with ID "${j}", cannot refresh tile`);s===void 0?p.reload(!0):p.refreshTiles(s.map(x=>new a.a4(x.z,x.x,x.y)))}addImage(j,s,p={}){const{pixelRatio:x=1,sdf:w=!1,stretchX:T,stretchY:P,content:O,textFitWidth:F,textFitHeight:G}=p;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||a.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Y,height:ne,data:ee}=s,ce=s;return this.style.addImage(j,{data:new a.R({width:Y,height:ne},new Uint8Array(ee)),pixelRatio:x,stretchX:T,stretchY:P,content:O,textFitWidth:F,textFitHeight:G,sdf:w,version:0,userImage:ce}),ce.onAdd&&ce.onAdd(this,j),this}}{const{width:Y,height:ne,data:ee}=A.getImageData(s);this.style.addImage(j,{data:new a.R({width:Y,height:ne},ee),pixelRatio:x,stretchX:T,stretchY:P,content:O,textFitWidth:F,textFitHeight:G,sdf:w,version:0})}}updateImage(j,s){const p=this.style.getImage(j);if(!p)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=s instanceof HTMLImageElement||a.b(s)?A.getImageData(s):s,{width:w,height:T,data:P}=x;if(w===void 0||T===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==p.data.width||T!==p.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(s instanceof HTMLImageElement||a.b(s));return p.data.replace(P,O),this.style.updateImage(j,p),this}getImage(j){return this.style.getImage(j)}hasImage(j){return j?!!this.style.getImage(j):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(j){this.style.removeImage(j)}loadImage(j){return Z.getImage(this._requestManager.transformRequest(j,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(j,s){return this._lazyInitEmptyStyle(),this.style.addLayer(j,s),this._update(!0)}moveLayer(j,s){return this.style.moveLayer(j,s),this._update(!0)}removeLayer(j){return this.style.removeLayer(j),this._update(!0)}getLayer(j){return this.style.getLayer(j)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(j,s,p){return this.style.setLayerZoomRange(j,s,p),this._update(!0)}setFilter(j,s,p={}){return this.style.setFilter(j,s,p),this._update(!0)}getFilter(j){return this.style.getFilter(j)}setPaintProperty(j,s,p,x={}){return this.style.setPaintProperty(j,s,p,x),this._update(!0)}getPaintProperty(j,s){return this.style.getPaintProperty(j,s)}setLayoutProperty(j,s,p,x={}){return this.style.setLayoutProperty(j,s,p,x),this._update(!0)}getLayoutProperty(j,s){return this.style.getLayoutProperty(j,s)}setGlyphs(j,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(j,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(j,s,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(j,s,p,x=>{x||this._update(!0)}),this}removeSprite(j){return this._lazyInitEmptyStyle(),this.style.removeSprite(j),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(j,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(j,s,p=>{p||this._update(!0)}),this}setLight(j,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(j,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(j,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(j,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(j,s){return this.style.setFeatureState(j,s),this._update()}removeFeatureState(j,s){return this.style.removeFeatureState(j,s),this._update()}getFeatureState(j){return this.style.getFeatureState(j)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let j=0,s=0;return this._container&&(j=this._container.clientWidth||400,s=this._container.clientHeight||300),[j,s]}_setupContainer(){const j=this._container;j.classList.add("maplibregl-map");const s=this._canvasContainer=N.create("div","maplibregl-canvas-container",j);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=N.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),x=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],x);const w=this._controlContainer=N.create("div","maplibregl-control-container",j),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{T[P]=N.create("div",`maplibregl-ctrl-${P} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(j,s,p){this._canvas.width=Math.floor(p*j),this._canvas.height=Math.floor(p*s),this._canvas.style.width=`${j}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const j=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",x=>{s={requestedAttributes:j},x&&(s.statusMessage=x.statusMessage,s.type=x.type)},{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,j):this._canvas.getContext("webgl2",j)||this._canvas.getContext("webgl",j),!p){const x="Failed to initialize WebGL";throw s?(s.message=x,new Error(JSON.stringify(s))):new Error(x)}this.painter=new Ld(p,this.transform),z.testSupport(p)}migrateProjection(j,s){super.migrateProjection(j,s),this.painter.transform=j,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(j){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||j,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(j){return this._update(),this._renderTaskQueue.add(j)}_cancelRenderFrame(j){this._renderTaskQueue.remove(j)}_render(j){var s,p,x,w,T;const P=this._idleTriggered?this._fadeDuration:0,O=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(j),this._removed)return;let F=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,ee=A.now();this.style.zoomHistory.update(ne,ee);const ce=new a.F(ne,{now:ee,fadeDuration:P,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ye=ce.crossFadingFactor();ye===1&&ye===this._crossFadingFactor||(F=!0,this._crossFadingFactor=ye),this.style.update(ce)}const G=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==O;(x=this.style.projection)===null||x===void 0||x.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((w=this.style.projection)===null||w===void 0?void 0:w.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||G)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,P,this._crossSourceCollisions,G),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:P,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||F)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const Y=this._sourcesDirty||this._styleDirty||this._placementDirty;return Y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||Y||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var j;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(j=this._resizeObserver)===null||j===void 0||j.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),N.remove(this._canvasContainer),N.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frame(this._frameRequest,j=>{a.cw.frame(j),this._frameRequest=null;try{this._render(j)}catch(s){if(!a.cy(s)&&!function(p){return p.message===Eo}(s))throw s}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(j){this._showTileBoundaries!==j&&(this._showTileBoundaries=j,this._update())}get showPadding(){return!!this._showPadding}set showPadding(j){this._showPadding!==j&&(this._showPadding=j,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(j){this._showCollisionBoxes!==j&&(this._showCollisionBoxes=j,j?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(j){this._showOverdrawInspector!==j&&(this._showOverdrawInspector=j,this._update())}get repaint(){return!!this._repaint}set repaint(j){this._repaint!==j&&(this._repaint=j,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(j){this._vertices=j,this._update()}get version(){return jp}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(j){return this._lazyInitEmptyStyle(),this.style.setProjection(j),this._update(!0)}},c.MapMouseEvent=Fr,c.MapTouchEvent=za,c.MapWheelEvent=Zl,c.Marker=ec,c.NavigationControl=class{constructor(j){this._updateZoomButtons=()=>{const s=this._map.getZoom(),p=s===this._map.getMaxZoom(),x=s===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,p)=>{const x=this._map._getUIString(`NavigationControl.${p}`);s.title=x,s.setAttribute("aria-label",x)},this.options=a.e({},fi,j),this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),N.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),N.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=N.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(j){return this._map=j,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ts(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(j,s){const p=N.create("button",j,this._container);return p.type="button",p.addEventListener("click",s),p}},c.Popup=class extends a.E{constructor(j){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=N.create("div","maplibregl-popup",this._map.getContainer()),this._tip=N.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Nl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;const p=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let x=this.options.anchor;const w=Zu(this.options.offset);if(!x){const P=this._container.offsetWidth,O=this._container.offsetHeight;let F;F=p.y+w.bottom.y<O?["top"]:p.y>this._map.transform.height-O?["bottom"]:[],p.x<P/2?F.push("left"):p.x>this._map.transform.width-P/2&&F.push("right"),x=F.length===0?"bottom":F.join("-")}let T=p.add(w[x]);this.options.subpixelPositioning||(T=T.round()),N.setTransform(this._container,`${Jl[x]} translate(${T.x}px,${T.y}px)`),io(this._container,x,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Qh),j)}addTo(j){return this._map&&this.remove(),this._map=j,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(j){return this._lngLat=a.S.convert(j),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(j){return this.setDOMContent(document.createTextNode(j))}setHTML(j){const s=document.createDocumentFragment(),p=document.createElement("body");let x;for(p.innerHTML=j;x=p.firstChild,x;)s.appendChild(x);return this.setDOMContent(s)}getMaxWidth(){var j;return(j=this._container)===null||j===void 0?void 0:j.style.maxWidth}setMaxWidth(j){return this.options.maxWidth=j,this._update(),this}setDOMContent(j){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(j),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(j){return this._container&&this._container.classList.add(j),this}removeClassName(j){return this._container&&this._container.classList.remove(j),this}setOffset(j){return this.options.offset=j,this._update(),this}toggleClassName(j){if(this._container)return this._container.classList.toggle(j)}setSubpixelPositioning(j){this.options.subpixelPositioning=j}_createCloseButton(){this.options.closeButton&&(this._closeButton=N.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const j=this._container.querySelector(Jh);j&&j.focus()}},c.RasterDEMTileSource=Hn,c.RasterTileSource=Yn,c.ScaleControl=class{constructor(j){this._onMove=()=>{Hd(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,Hd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Kh),j)}getDefaultPosition(){return"bottom-left"}onAdd(j){return this._map=j,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-scale",j.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=Uc,c.Style=tp,c.TerrainControl=class{constructor(j){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=j}onAdd(j){return this._map=j,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=N.create("button","maplibregl-ctrl-terrain",this._container),N.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){N.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=Zh,c.TwoFingersTouchRotateHandler=Ao,c.TwoFingersTouchZoomHandler=Hu,c.TwoFingersTouchZoomRotateHandler=mi,c.VectorTileSource=_n,c.VideoSource=Ue,c.addSourceType=(j,s)=>a._(void 0,void 0,void 0,function*(){if(Bt(j))throw new Error(`A source type called "${j}" already exists.`);((p,x)=>{Pe[p]=x})(j,s)}),c.clearPrewarmedResources=function(){const j=Me;j&&(j.isPreloaded()&&j.numActive()===1?(j.release(fe),Me=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=me,c.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return ln().getRTLTextPluginStatus()},c.getVersion=function(){return ef},c.getWorkerCount=function(){return Xe.workerCount},c.getWorkerUrl=function(){return a.a.WORKER_URL},c.importScriptInWorkers=function(j){return pt().broadcast("IS",j)},c.prewarm=function(){ut().acquire(fe)},c.setMaxParallelImageRequests=function(j){a.a.MAX_PARALLEL_IMAGE_REQUESTS=j},c.setRTLTextPlugin=function(j,s){return ln().setRTLTextPlugin(j,s)},c.setWorkerCount=function(j){Xe.workerCount=j},c.setWorkerUrl=function(j){a.a.WORKER_URL=j}});var u=n;return u})}(hv)),hv.exports}var pJ=fJ();const jb=G0(pJ);function mJ(){const[e,t]=L.useState(null),[n,i]=L.useState(null),[o,u]=L.useState(null),[c,a]=L.useState(null),[g,_]=L.useState(null),S=L.useRef(null),E=L.useRef(null),A=L.useRef([]),N=[{id:1,name:"Aspen Medical Harbour City",distance:"0.6 km",address:"345 Champion Parade Suite A, Ground Floor Downtown, Port Moresby, National Capital District",hours:"0:00 AM - 12:00 PM",status:"Open Now",phone:"675 321 0202",lat:147.149695,lng:-9.477393},{id:2,name:"Chemcare Pharmacies",distance:"0.7 km",address:"Lae, Mangola St Lae, Postal Address: PO Box 349 Lae MP",hours:"7:00 AM - 9:00 PM",status:"Open Now",phone:"675 472 3730",lat:146.990083,lng:-6.734794},{id:3,name:"Ela Medical Centre",distance:"1.1 km",address:"Carpenters House, Waigani Drive, Port Moresby, Postal Address: PO Box 863 Boroko, NCD",hours:"8:00 AM - 10:00 PM",status:"Open Now",phone:"675 325 3664",lat:147.180183,lng:-9.435229},{id:4,name:"GM Flores Hospital",distance:"1.2 km",address:"Lae, Section 2, Lot 38, Microbank Haus, 5th Street, Top Town, Postal Address: PO Box 675 Lae, MP",hours:"24 Hours",status:"Open Now",phone:"7596028456",lat:147.002688,lng:-6.729797}];L.useEffect(()=>{if(!S.current)return;const W="9a0dd25b5e3645f59c8db86fac99a495",Q="https://maps.geoapify.com/v1/styles/osm-carto/style.json",Z=new jb.Map({container:S.current,style:`${Q}?apiKey=${W}`,center:[147.1867241,-9.43409997],zoom:13});return E.current=Z,()=>{Z.remove()}},[]),L.useEffect(()=>{if(!E.current||!n)return;A.current.forEach(K=>K.remove()),A.current=[];const W=document.createElement("div");W.className="user-marker",W.style.cssText=`
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background-color: #4F46E5;
      border: 3px solid white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    `;const Q=new jb.Marker({element:W}).setLngLat([n.longitude,n.latitude]).addTo(E.current);A.current.push(Q),N.forEach(K=>{const le=document.createElement("div");le.className="pharmacy-marker",le.style.cssText=`
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: #0D9488;
        border: 2px solid white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      `,le.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>',le.addEventListener("click",()=>{u(K),E.current.flyTo({center:[K.lng,K.lat],zoom:15})});const ge=new jb.Marker({element:le}).setLngLat([K.lng,K.lat]).addTo(E.current);A.current.push(ge)});const Z=new jb.LngLatBounds;Z.extend([n.longitude,n.latitude]),N.forEach(K=>Z.extend([K.lng,K.lat])),E.current.fitBounds(Z,{padding:50,maxZoom:14})},[n]);const z=W=>{const{latitude:Q,longitude:Z}=W.coords;console.log("User location:",Q,Z),t(`Lat: ${Q.toFixed(4)}, Lng: ${Z.toFixed(4)}`),i({latitude:Q,longitude:Z}),E.current&&E.current.flyTo({center:[Z,Q],zoom:14})},B=W=>{console.error("Geolocation error:",W.message),t("Permission denied or unavailable")},$=()=>{if(!navigator.geolocation){t("Geolocation not supported");return}navigator.permissions.query({name:"geolocation"}).then(W=>{console.log("Permission state:",W.state),a(W.state),W.state==="granted"||W.state==="prompt"?navigator.geolocation.getCurrentPosition(z,B):W.state==="denied"&&t("Permission denied"),W.addEventListener("change",()=>{console.log("Permission changed to:",W.state),a(W.state)})}).catch(W=>console.error("Permission API error:",W))};L.useEffect(()=>{$()},[]);const q=W=>{if(console.log(`userCoords: ${n}, destination: ${W}`),n){const Q=`https://www.google.com/maps/dir/?api=1&origin=${n.latitude},${n.longitude}&destination=${W.lat},${W.lng}`;window.open(Q,"_blank")}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[l.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Home > ",l.jsx("span",{className:"text-teal-700",children:"Pharmacy Nearby"})]}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Pharmacies Near You"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-6 shadow-md border border-orange-200",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[l.jsx(fm,{className:"text-teal-700 w-6 h-6 flex-shrink-0 mt-1"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Find Pharmacies Near You"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Locate the nearest pharmacy and check availability"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(cy,{className:"text-teal-700 w-6 h-6 flex-shrink-0 mt-1"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Check for item availability at nearby Pharmacies"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Real-time stock information"})]})]}),l.jsxs("div",{className:"mt-6 bg-white rounded-lg p-4 shadow-sm",children:[l.jsx("div",{className:"h-12 mb-3 flex items-center justify-center bg-teal-700 text-white rounded font-bold text-xl",children:"PHARMACY 24/7"}),l.jsx("div",{className:"bg-orange-500 text-white rounded-lg px-4 py-2 text-center mb-2",children:l.jsx("p",{className:"text-sm font-semibold",children:"Unlock 10% Cashback on your Store Purchase"})}),l.jsx("button",{className:"w-full bg-gray-900 text-white py-2 rounded-lg text-sm font-semibold hover:bg-gray-800 transition",children:"Download Now"})]})]})}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(fm,{className:"text-teal-700 w-5 h-5"}),l.jsx("span",{className:"font-semibold text-gray-800",children:e||"Detecting location..."})]}),l.jsx("button",{onClick:$,className:"text-teal-700 font-semibold text-sm hover:text-teal-800",children:"Refresh"})]}),l.jsxs("div",{className:"relative h-64 w-full",children:[l.jsx("div",{className:"absolute inset-0 w-full h-full",ref:S}),l.jsx("div",{className:"absolute bottom-2 right-2 bg-white px-3 py-1 rounded shadow text-xs text-gray-600 z-10",children:"Map data 2025"})]})]}),l.jsx("div",{className:"space-y-4 flex gap-5 flex-wrap",children:N.map(W=>l.jsxs("div",{className:`bg-white rounded-lg shadow-md p-5 hover:shadow-lg transition w-full lg:w-[calc(50%-0.625rem)] ${(o==null?void 0:o.id)===W.id?"ring-2 ring-teal-700":""}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:W.name}),l.jsxs("div",{className:"flex items-start gap-2 text-gray-600 text-sm",children:[l.jsx(fm,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),l.jsx("p",{children:W.address})]})]}),l.jsx("div",{className:"text-right ml-2",children:l.jsx("span",{className:"text-2xl font-bold text-teal-700",children:W.distance})})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(cy,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:W.hours}),l.jsx("span",{className:"text-green-600 font-semibold text-sm ml-2",children:W.status})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>q(W),className:"flex-1 border-2 border-teal-700 text-teal-700 py-2 rounded-lg font-semibold hover:bg-teal-50 transition flex items-center justify-center gap-2",children:[l.jsx(dB,{className:"w-4 h-4"}),"Get Directions"]}),l.jsxs("a",{href:`tel:${W.phone}`,className:"flex-1 bg-teal-700 text-white py-2 rounded-lg font-semibold hover:bg-teal-800 transition flex items-center justify-center gap-2",children:[l.jsx(uC,{className:"w-4 h-4"}),W.phone]})]}),l.jsxs("button",{className:"w-full mt-3 text-sm text-gray-600 hover:text-gray-800 flex items-center justify-center gap-1",children:[l.jsx(FB,{className:"w-4 h-4"}),"Report an issue with this pharmacy"]})]},W.id))})]})]})]}),e==="Permission denied"&&l.jsx(dJ,{city:g,setCity:_})]})}function am(){const[e,t]=L.useState({days:0,hours:0,minutes:0,seconds:0}),[n,i]=L.useState(""),[o,u]=L.useState(!1),[c,a]=L.useState({x:0,y:0}),g=new Date("2025-03-15T09:00:00");L.useEffect(()=>{const E=setInterval(()=>{const A=new Date().getTime(),N=g.getTime()-A;N>0&&t({days:Math.floor(N/864e5),hours:Math.floor(N%864e5/36e5),minutes:Math.floor(N%36e5/6e4),seconds:Math.floor(N%6e4/1e3)})},1e3);return()=>clearInterval(E)},[]),L.useEffect(()=>{const E=A=>{a({x:A.clientX,y:A.clientY})};return window.addEventListener("mousemove",E),()=>window.removeEventListener("mousemove",E)},[]);const _=()=>{n&&n.includes("@")&&(u(!0),i(""),setTimeout(()=>u(!1),4e3))},S=E=>{E.key==="Enter"&&_()};return l.jsxs("div",{className:"min-h-screen bg-slate-50 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:`radial-gradient(circle at ${c.x*.1}px ${c.y*.1}px, rgba(79, 70, 229, 0.1) 0%, transparent 50%)`}}),l.jsx("div",{className:"absolute top-20 right-20 w-4 h-4 bg-orange-300 rounded-full opacity-60",style:{transform:`translate(${c.x*.02}px, ${c.y*.01}px)`}}),l.jsx("div",{className:"absolute bottom-32 left-16 w-6 h-6 bg-blue-200 rounded-full opacity-40",style:{transform:`translate(${c.x*-.01}px, ${c.y*.02}px)`}}),l.jsx("div",{className:"absolute top-1/2 left-10 w-3 h-3 bg-green-300 rounded-full opacity-50",style:{transform:`translate(${c.x*.015}px, ${c.y*-.01}px)`}}),l.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-6 py-16",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 bg-white rounded-full px-4 py-2 shadow-sm border mb-8",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Currently in development"})]}),l.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 mb-6 leading-tight",children:["Something great is",l.jsx("span",{className:"text-indigo-600 block mt-2",children:"coming soon"})]}),l.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"We're putting the finishing touches on our new platform. It's going to change how you think about productivity forever."})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-16 max-w-2xl mx-auto",children:[{label:"Days",value:e.days,color:"bg-red-500"},{label:"Hours",value:e.hours,color:"bg-blue-500"},{label:"Minutes",value:e.minutes,color:"bg-green-500"},{label:"Seconds",value:e.seconds,color:"bg-orange-500"}].map(E=>l.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:`w-4 h-1 ${E.color} rounded-full mb-4`}),l.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:E.value.toString().padStart(2,"0")}),l.jsx("div",{className:"text-sm text-gray-500 uppercase tracking-wide font-medium",children:E.label})]},E.label))}),l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Want early access?"}),l.jsx("p",{className:"text-gray-600 mb-8",children:"Join 2,847 others who'll get first dibs when we launch"}),l.jsxs("div",{className:"max-w-md mx-auto",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(vP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"email",value:n,onChange:E=>i(E.target.value),onKeyPress:S,placeholder:"your@email.com",className:"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 text-gray-900"})]}),l.jsxs("button",{onClick:_,className:"px-6 py-4 bg-indigo-600 text-white font-medium rounded-xl hover:bg-indigo-700 transition-colors duration-200 flex items-center gap-2 group",children:["Get notified",l.jsx(X8,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),o&&l.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-xl text-green-800",children:"Perfect! You're on the list. We'll email you as soon as we're ready."})]})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:l.jsx(YB,{className:"w-6 h-6 text-blue-600"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Lightning Fast"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Built from the ground up for speed. No more waiting around."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:l.jsx($B,{className:"w-6 h-6 text-green-600"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Team First"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Designed for teams who actually want to work together."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:l.jsx(NL,{className:"w-6 h-6 text-orange-600"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Simple & Clean"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"No clutter. No confusion. Just the tools you need."})]})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100 mb-16",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Development Progress"}),l.jsx("span",{className:"text-sm text-gray-500",children:"85% Complete"})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-blue-600 h-3 rounded-full transition-all duration-1000 ease-out",style:{width:"85%"}})}),l.jsx("p",{className:"text-sm text-gray-600 mt-3",children:"Currently working on final testing and polish. Almost there! "})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Have questions? Drop us a line at ",l.jsx("a",{href:"mailto:hello@yourapp.com",className:"text-indigo-600 hover:underline",children:"hello@yourapp.com"})]}),l.jsx("p",{className:"text-gray-400 text-xs",children:" 2025 YourApp Inc. Made with care in San Francisco."})]})]})]})}const gJ=()=>{const[e,t]=L.useState(!1),[n,i]=L.useState("appointments"),[o,u]=L.useState("Total Appointments"),[c,a]=L.useState(!1),[g,_]=L.useState(null),[S,E]=L.useState(null),[A,N]=L.useState(null),[z,B]=L.useState(!1),[$,q]=L.useState(null),[W,Q]=L.useState(!1),[Z,K]=L.useState([]),[le,ge]=L.useState([]),[he,pe]=L.useState([]),[Ie,He]=L.useState([]),[Ye,rt]=L.useState([]),[Rt,St]=L.useState(!1),[De,Qe]=L.useState(null),et=Qi.get("full_name")||"Guest User",Nt=Qi.get("user_id")||"USER-GUEST-001",fe=Qi.get("user_image")||"",Xe=Nt,tt=()=>Gt(null,null,function*(){try{St(!0);const At=new Headers;At.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),At.append("Content-Type","application/json");const ue=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.get_medical_department_list",{method:"GET",headers:At,redirect:"follow"});if(!ue.ok)throw new Error(`HTTP error! status: ${ue.status}`);const _e=yield ue.json();console.log("API Response for medical department:",_e),St(!1),K(_e.message)}catch(At){}}),Me=()=>Gt(null,null,function*(){try{const At=new Headers;At.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),At.append("Content-Type","application/json");const ue=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.appointment_type",{method:"GET",headers:At,redirect:"follow"});if(!ue.ok)throw new Error(`HTTP error! status: ${ue.status}`);const _e=yield ue.json();console.log("API Response for Appointment TYpe:",_e),ge(_e.message)}catch(At){}}),ot=()=>Gt(null,null,function*(){try{const At=new Headers;At.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),At.append("Content-Type","application/json");const ue=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.healthcare_practitioner",{method:"GET",headers:At,redirect:"follow"});if(!ue.ok)throw new Error(`HTTP error! status: ${ue.status}`);const _e=yield ue.json();console.log("API Response forPractitioner Data......:",_e),pe(_e.message)}catch(At){}});L.useEffect(()=>{Gt(null,null,function*(){if(!(W||Xe==="USER-GUEST-001")){console.log("Fetching user data for:",Xe);try{const ke=new Headers;ke.append("Content-Type","application/json");const ae=`/api/resource/User/${Xe}?fields=["card_blo_me_number","full_name","email"]`,_e=yield fetch(ae,{method:"GET",headers:ke,redirect:"follow"});if(_e.ok){const Ce=yield _e.json();if(Ce.data&&Ce.data.card_blo_me_number){const Ae=Ce.data.card_blo_me_number;_(Ae),console.log("Found Card Blo Me Number:",Ae),Ve(Ae)}else console.log("No card_blo_me_number found for user"),q("No Card Blo Me Number assigned to your account. Please contact support.")}else console.error("Failed to fetch user data:",_e.status),console.log("Attempting fallback with Frappe SDK...")}catch(ke){console.error("Error fetching user card number:",ke);const ae=Qi.get("card_blo_me_number")||localStorage.getItem("card_blo_me_number");ae&&(console.log("Found stored Card Blo Me Number:",ae),_(ae),Ve(ae))}finally{Q(!0)}}})},[Xe,W]);const{data:ut,isLoading:dt,error:pt}=jh("User",Xe,{enabled:!W&&Xe!=="USER-GUEST-001"});L.useEffect(()=>{if(ut&&ut.card_blo_me_number&&!g){const At=ut.card_blo_me_number;_(At),console.log("Got Card Blo Me Number from Frappe SDK:",At),Qi.set("card_blo_me_number",At,{expires:7}),Ve(At),tt(),Me(),ot()}},[ut,g]);const Ve=At=>Gt(null,null,function*(){if(!At){console.error("No card number provided");return}B(!0),q(null);try{console.log("Fetching patient with card:",At);const ke=new Headers;ke.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),ke.append("Content-Type","application/json"),ke.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ae=JSON.stringify({card_blo_me_number:At}),Ce=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.healthcare.doctype.patient.get_list.get_patients_by_card_number",{method:"POST",headers:ke,body:ae,redirect:"follow"});if(!Ce.ok)throw new Error(`HTTP error! status: ${Ce.status}`);const Ae=yield Ce.text(),J=JSON.parse(Ae);if(console.log("API Response:",J),J.message&&Array.isArray(J.message)&&J.message.length>0){const nt=J.message[0];console.log("Patient found:",{id:nt.name,name:nt.patient_name,cardNumber:nt.card_blo_me_number}),N([nt]),E(nt.name),q(null),localStorage.setItem("current_patient_id",nt.name)}else console.warn("No patient found with card:",At),q({message:`No patient record found for Card Number: ${At}`,type:"not_found"}),N(null),E(null)}catch(ke){console.error("Error fetching patient:",ke),q({message:`Failed to fetch patient data: ${ke.message}`,type:"error"}),N(null),E(null)}finally{B(!1)}}),[Ge,Dt]=L.useState(null),[Lt,It]=L.useState(!1),[Ot,en]=L.useState(null),[_n,Yn]=L.useState(!1);L.useEffect(()=>{S&&(console.log("Loading medical records for patient:",S),Hn(S),Ue(S),hn(S),on(S))},[S]);const Hn=At=>Gt(null,null,function*(){if(At){It(!0);try{const ke=new Headers;ke.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),ke.append("Content-Type","application/json"),ke.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ae=JSON.stringify({patientId:At}),Ce=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.get_labtest",{method:"POST",headers:ke,body:ae,redirect:"follow"});if(!Ce.ok)throw new Error(`HTTP error! status: ${Ce.status}`);if(Ce.ok){const Ae=yield Ce.json();console.log("API Response for Lab Test...:",Ae),Dt(Ae.message||[])}else console.error("Failed to fetch lab tests:",Ce.status),Dt([])}catch(ke){console.error("Error fetching lab tests:",ke.message),Dt([])}finally{It(!1)}}}),hn=At=>Gt(null,null,function*(){if(At){It(!0);try{const ke=new Headers;ke.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),ke.append("Content-Type","application/json"),ke.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ae=JSON.stringify({patientId:At}),Ce=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.get_medication_details",{method:"POST",headers:ke,body:ae,redirect:"follow"});if(!Ce.ok)throw new Error(`HTTP error! status: ${Ce.status}`);if(Ce.ok){const Ae=yield Ce.json();console.log("API Response for Medication Details...:",Ae),He(Ae.message||[])}else console.error("Failed to fetch lab tests:",Ce.status),Dt([])}catch(ke){console.error("Error fetching lab tests:",ke.message),Dt([])}finally{It(!1)}}}),on=At=>Gt(null,null,function*(){if(At){It(!0);try{const ke=new Headers;ke.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),ke.append("Content-Type","application/json"),ke.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ae=JSON.stringify({patientId:At}),Ce=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.vital_sin",{method:"POST",headers:ke,body:ae,redirect:"follow"});if(!Ce.ok)throw new Error(`HTTP error! status: ${Ce.status}`);if(Ce.ok){const Ae=yield Ce.json();console.log("API Response for Vital Signs...:",Ae),rt(Ae.message||[])}else console.error("Failed to fetch lab tests:",Ce.status),Dt([])}catch(ke){console.error("Error fetching lab tests:",ke.message),Dt([])}finally{It(!1)}}}),Ue=At=>Gt(null,null,function*(){var ke;if(console.log("patient id....",At),!!At){Yn(!0);try{const ae=new Headers;ae.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),ae.append("Content-Type","application/json"),ae.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ue=JSON.stringify({patientId:At}),Ae=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.get_appointment",{method:"POST",headers:ae,body:ue,redirect:"follow"});if(!Ae.ok)throw new Error(`HTTP error! status: ${Ae.status}`);const J=yield Ae.text(),nt=JSON.parse(J);if(console.log("API Response for appointment...:",nt),nt.message&&Array.isArray(nt.message)&&nt.message.length>0){const Je=nt.message[0];en(nt.message||[]),console.log("Appointments loaded:",((ke=nt.data)==null?void 0:ke.length)||0,"appointments")}else console.error("Failed to fetch appointments:",Ae.status),en([])}catch(ae){console.error("Error fetching appointments:",ae.message),en([])}finally{Yn(!1)}}}),We=L.useCallback(()=>{S&&(console.log("Refreshing appointments..."),Ue(S))},[S]),Pe=L.useMemo(()=>Ge?Ge.map((At,ke)=>({id:ke+1,testName:At.lab_test_name||At.template,date:At.result_date?new Date(At.result_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Pending",doctor:At.practitioner_name||"Not specified",status:At.status==="Completed"?"Completed":At.status==="Approved"?"Normal":"Pending",downloadable:At.status==="Completed"||At.status==="Approved",labTestId:At.name,invoiced:At.invoiced,department:At.department||"Laboratory"})):[],[Ge]),Bt=L.useMemo(()=>Ot?Ot.map((At,ke)=>({id:ke+1,doctor:At.practitioner_name,specialty:At.department,date:new Date(At.appointment_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),rawDate:At.appointment_date,time:At.appointment_time?new Date(`2000-01-01 ${At.appointment_time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"TBD",status:At.status,location:At.service_unit||`${At.department} Department`,appointmentId:At.name,appointmentType:At.appointment_type||"Consultation",duration:At.duration,invoiced:At.invoiced,refInvoice:At.ref_sales_invoice,serviceUnit:At.service_unit})).sort((At,ke)=>new Date(ke.rawDate)-new Date(At.rawDate)):[],[Ot]),Et=Ot?Ot.length:0,nn=Ge?Ge.length:0,yn=Ge?Ge.filter(At=>At.status==="Completed"||At.status==="Approved").length:0;L.useMemo(()=>Bt.filter(At=>At.status==="Closed"||new Date(At.rawDate)<new Date),[Bt]);const ln=L.useMemo(()=>Pe.slice(0,3).map(At=>({name:At.testName,date:At.date,status:At.status==="Completed"?"completed":"pending",result:At.status==="Completed"?"Normal":"-",labTestId:At.labTestId})),[Pe]);return dt&&!W?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading user data..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[c&&Z&&l.jsx(cJ,{showModal:c,setShowModal:a,patientData:A,patientId:S,user_name:et,cardBloMeNumber:g,refreshAppointments:We,departmentsData:Z,departmentsLoading:!0,appointmentTypesData:le,practitionersData:he}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Health Blo Me"}),l.jsx("p",{className:"text-gray-600",children:"Manage your health records, appointments, and medical history"}),g&&l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Card Number: ",g]})]}),$&&$.type==="not_found"&&l.jsxs("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[l.jsx("h3",{className:"text-yellow-800 font-medium mb-2",children:"Patient Registration Required"}),l.jsx("p",{className:"text-yellow-700 text-sm",children:$.message}),l.jsx("p",{className:"text-yellow-700 text-sm mt-2",children:"Please visit the registration desk or contact support to complete your patient registration."})]}),l.jsx(tJ,{totalAppointments:Et,pastAppointments:Ie,totalLabReports:nn,completedLabTests:yn,activeMainTab:o,setActiveMainTab:u}),o==="Total Appointments"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx(nJ,{showPatientDetails:e,setShowPatientDetails:t,patientData:A,patientLoading:z,patientError:$,userImage:fe,user_name:et}),l.jsx(iJ,{allAppointments:Bt,appointmentLoading:_n,setShowAppointmentModal:a}),l.jsx(sJ,{activeTab:n,setActiveTab:i,appointmentData:Ot,appointmentLoading:_n,labReports:Pe,labTestLoading:Lt,patientData:A,allAppointments:Bt})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(rJ,{vitalSignData:Ye}),l.jsx(aJ,{recentLabTests:ln,labTestLoading:Lt,setActiveTab:i}),l.jsx(oJ,{}),l.jsx(lJ,{})]})]}),o==="Prescriptions"&&l.jsx(uJ,{selectedPrescription:De,setSelectedPrescription:Qe,prescriptions:Ie}),o==="Get Medicine"&&l.jsx(am,{}),o==="Lab Reports"&&l.jsx(am,{})]})},TN=L.memo(({formData:e,handleChange:t,countries:n,formErrors:i={},profilePicture:o,profileUrl:u,handleProfilePictureChange:c,uploadProfilePicture:a})=>{L.useEffect(()=>{console.log("formData:",e,"formErrors:",i)},[e,i]);const g=(A,N="field-input required")=>`${N} ${i[A]?"field-error-animate":""}`,_=(A,N="field-select required")=>`${N} ${i[A]?"field-error-animate":""}`,S=A=>i[A]?l.jsx("div",{className:"error-message",children:"This field is required."}):null,E=(A,N,z)=>{A?(z("portion_lot_no",N.portion_nolot_no),z("village_street",N.village),z("town1",N.town),z("district1",N.district),z("province1",N.province),z("country1",N.country),z("po_box1",N.po_box),z("postal_code1",N.postal_code),z("location1",N.location)):(z("portion_lot_no",""),z("village_street",""),z("town1",""),z("district1",""),z("province1",""),z("country1","Papua New Guinea"),z("po_box1",""),z("postal_code1",""),z("location1",""))};return l.jsxs("div",{children:[l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Profile Picture"})]}),l.jsxs("div",{className:"flex items-center gap-4 w-full mt-4",children:[u&&l.jsx("div",{className:"h-16 w-16 flex items-center justify-center rounded-lg bg-white shadow",children:l.jsx("img",{src:u,alt:"Profile preview",className:"object-cover h-14 w-14 rounded-lg"})}),l.jsx("label",{className:"file-label flex-1 max-w-xl",children:l.jsxs("span",{className:`flex items-center gap-2 w-full px-6 py-3 bg-white border-2 border-dashed border-blue-300 text-blue-600 \r
      font-medium rounded-lg shadow-sm cursor-pointer transition-all duration-200 ease-in-out\r
      hover:bg-blue-50 hover:border-blue-500 hover:text-blue-700\r
      focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 active:scale-95`,tabIndex:0,children:[l.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24","aria-hidden":"true",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16v-4m0 0V8m0 4h4m-4 0H8m8 8H8a2 2 0 01-2-2V6a2 2 0 012-2h2l2-2 2 2h2a2 2 0 012 2v10a2 2 0 01-2 2z"})}),l.jsx("span",{children:"Select Image"}),l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c})]})}),l.jsxs("button",{type:"button",onClick:a,disabled:!o,className:`group px-6 py-3 font-semibold rounded-lg shadow transition-all duration-300
      flex items-center gap-2
      focus:outline-none focus:ring-2 focus:ring-blue-400
      ${o?"bg-blue-600 text-white hover:bg-blue-700 active:scale-95":"bg-gray-100 text-gray-400 border border-gray-300 opacity-50 cursor-not-allowed"}`,children:["Upload",l.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"transition-transform group-hover:-translate-y-1 group-active:translate-y-0",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M16 8l-4-4m0 0L8 8m4-4v12"})})]})]})]}),l.jsxs("div",{className:"section-card",style:{display:"none"},children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Basic Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Card Blo Me ID"}),l.jsx("select",{required:!0,className:_("naming_series"),value:e.naming_series,onChange:A=>t("naming_series",A.target.value),children:l.jsx("option",{value:"CBM-",children:"CBM-"})})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Status"}),l.jsxs("select",{className:_("status"),value:e.status,onChange:A=>t("status",A.target.value),children:[l.jsx("option",{children:"Active"}),l.jsx("option",{children:"Inactive"}),l.jsx("option",{children:"Suspended"}),l.jsx("option",{children:"Rejected"})]})]}),e.status==="Inactive"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Inactive Date"}),l.jsx("input",{type:"date",className:g("inactive_date"),value:e.inactive_date,onChange:A=>t("inactive_date",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Inactive Reason"}),l.jsx("textarea",{className:g("inactive_reason","field-textarea"),value:e.inactive_reason,onChange:A=>t("inactive_reason",A.target.value)})]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Personal Health Declaration"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Server Location"}),l.jsxs("select",{required:!0,className:_("server_location"),value:e.server_location,onChange:A=>t("server_location",A.target.value),children:[l.jsx("option",{value:"Others",children:"Others"}),l.jsx("option",{value:"POM",children:"POM"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Title"}),l.jsxs("select",{className:_("title"),value:e.title,onChange:A=>t("title",A.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Mr."}),l.jsx("option",{children:"Mrs."}),l.jsx("option",{children:"Miss"})]}),S("title")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"First Name"}),l.jsx("input",{type:"text",className:g("first_name"),value:e.first_name,onChange:A=>t("first_name",A.target.value)}),S("first_name")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:g("middle_name","field-input"),value:e.middle_name,onChange:A=>t("middle_name",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Last Name"}),l.jsx("input",{type:"text",className:g("last_name"),value:e.last_name,onChange:A=>t("last_name",A.target.value)}),S("last_name")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Gender"}),l.jsxs("select",{className:_("gender"),value:e.gender,onChange:A=>t("gender",A.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Male"}),l.jsx("option",{children:"Female"}),l.jsx("option",{children:"Other"})]}),S("gender")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Date Of Birth"}),l.jsx("input",{type:"date",className:g("date_of_birth"),value:e.date_of_birth,onChange:A=>{t("date_of_birth",A.target.value)}}),S("date_of_birth")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blood Group"}),l.jsxs("select",{className:_("blood_group"),value:e.blood_group,onChange:A=>t("blood_group",A.target.value),children:[l.jsx("option",{value:"",disabled:!0,children:"Select"}),l.jsx("option",{value:""}),l.jsx("option",{value:"A Positive",children:"A Positive"}),l.jsx("option",{value:"A Negative",children:"A Negative"}),l.jsx("option",{value:"B Positive",children:"B Positive"}),l.jsx("option",{value:"B Negative",children:"B Negative"}),l.jsx("option",{value:"AB Positive",children:"AB Positive"}),l.jsx("option",{value:"AB Negative",children:"AB Negative"}),l.jsx("option",{value:"O Positive",children:"O Positive"}),l.jsx("option",{value:"O Negative",children:"O Negative"})]}),S("blood_group")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Resident Status"}),l.jsxs("select",{className:_("resident_status"),value:e.resident_status,onChange:A=>t("resident_status",A.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Resident"}),l.jsx("option",{children:"Non-Resident"})]}),S("resident_status")]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Current Address"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Number"}),l.jsx("input",{type:"text",className:g("portion_nolot_no","field-input"),value:e.portion_nolot_no,onChange:A=>t("portion_nolot_no",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Village"}),l.jsx("input",{type:"text",className:g("village","field-input"),value:e.village,onChange:A=>t("village",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Town"}),l.jsx("input",{type:"text",className:g("town","field-input"),value:e.town,onChange:A=>t("town",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:g("district","field-input"),value:e.district,onChange:A=>t("district",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:g("province","field-input"),value:e.province,onChange:A=>t("province",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Country"}),l.jsx("select",{className:_("country","field-select"),value:e.country,onChange:A=>t("country",A.target.value),children:n.map((A,N)=>l.jsx("option",{value:A.name,children:A.name},N))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"PO Box"}),l.jsx("input",{type:"text",className:g("po_box","field-input"),value:e.po_box,onChange:A=>t("po_box",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Postal Code"}),l.jsx("input",{type:"text",className:g("postal_code"),value:e.postal_code,onChange:A=>t("postal_code",A.target.value),required:!0}),S("postal_code")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Location"}),l.jsx("input",{type:"text",className:g("location","field-input"),value:e.location,onChange:A=>t("location",A.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Physical Address"})]}),l.jsxs("div",{className:"checkbox-wrapper",children:[l.jsx("input",{type:"checkbox",className:"checkbox-input",checked:e.same_as_current||!1,onChange:A=>{t("same_as_current",A.target.checked),E(A.target.checked,e,t)}}),l.jsx("label",{className:"checkbox-label",children:"Physical Address is same as your current address"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Number"}),l.jsx("input",{type:"text",className:g("portion_lot_no","field-input"),value:e.portion_lot_no,onChange:A=>t("portion_lot_no",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Street/Village"}),l.jsx("input",{type:"text",className:g("village_street","field-input"),value:e.village_street,onChange:A=>t("village_street",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Town"}),l.jsx("input",{type:"text",className:g("town1","field-input"),value:e.town1,onChange:A=>t("town1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:g("district1","field-input"),value:e.district1,onChange:A=>t("district1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:g("province1","field-input"),value:e.province1,onChange:A=>t("province1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Country"}),l.jsx("select",{className:_("country1","field-select"),value:e.country1,onChange:A=>t("country1",A.target.value),children:n.map((A,N)=>l.jsx("option",{value:A.name,children:A.name},N))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"PO Box"}),l.jsx("input",{type:"text",className:g("po_box1","field-input"),value:e.po_box1,onChange:A=>t("po_box1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Postal Code"}),l.jsx("input",{type:"text",className:g("postal_code1"),value:e.postal_code1,onChange:A=>t("postal_code1",A.target.value)}),S("postal_code1")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Location"}),l.jsx("input",{type:"text",className:g("location1","field-input"),value:e.location1,onChange:A=>t("location1",A.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Contact Details"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Country Code"}),l.jsx("select",{className:_("personal_country_code","field-select"),value:e.personal_country_code,onChange:A=>t("personal_country_code",A.target.value),children:n.map((A,N)=>l.jsxs("option",{value:A.code,children:[A.code," (",A.name,")"]},N))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Phone Number"}),l.jsx("input",{type:"tel",className:g("phone_no","field-input"),value:e.phone_no,onChange:A=>t("phone_no",A.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Email Address"}),l.jsx("input",{type:"email",className:g("personal_email_address","field-input"),value:e.personal_email_address,onChange:A=>t("personal_email_address",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Country Code"}),l.jsx("select",{className:_("office_country_code","field-select"),value:e.office_country_code,onChange:A=>t("office_country_code",A.target.value),children:n.map((A,N)=>l.jsxs("option",{value:A.code,children:[A.code," (",A.name,")"]},N))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Phone Number"}),l.jsx("input",{type:"tel",className:g("mobile_no","field-input"),value:e.mobile_no,onChange:A=>t("mobile_no",A.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Email Address"}),l.jsx("input",{type:"email",className:g("office_email","field-input"),value:e.office_email,onChange:A=>t("office_email",A.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Origin"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Place of Birth"}),l.jsxs("select",{className:_("place_of_birth"),value:e.place_of_birth,onChange:A=>t("place_of_birth",A.target.value),children:[l.jsx("option",{value:"Hospital",children:"Hospital"}),l.jsx("option",{value:"Home Delivery",children:"Home Delivery"})]})]}),e.place_of_birth==="Hospital"&&l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Hospital Name"}),l.jsx("input",{type:"text",className:g("hospital_name","field-input"),value:e.hospital_name,onChange:A=>t("hospital_name",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Village"}),l.jsx("input",{type:"text",className:g("village1","field-input"),value:e.village1,onChange:A=>t("village1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:g("district2","field-input"),value:e.district2,onChange:A=>t("district2",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:g("province2","field-input"),value:e.province2,onChange:A=>t("province2",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Country"}),l.jsxs("select",{className:_("country2","field-select"),value:e.country2,onChange:A=>t("country2",A.target.value),children:[l.jsx("option",{value:"",children:"Select Country"}),n.map((A,N)=>l.jsx("option",{value:A.name,children:A.name},N))]})]})]})]})]})}),yJ=L.memo(({formData:e,handleChange:t,countries:n,spouseData:i,setSpouseData:o,childrenData:u,setChildrenData:c})=>{const a=()=>{const N={name1:"",crm_no:"",age:""};o([...i,N])},g=(N,z,B)=>{const $=[...i];$[N][z]=B,o($)},_=N=>{const z=i.filter((B,$)=>$!==N);o(z)},S=()=>{const N={children_name:"",spouse_name:"",crm_no:"",age:""};c([...u,N])},E=(N,z,B)=>{const $=[...u];$[N][z]=B,c($)},A=N=>{const z=u.filter((B,$)=>$!==N);c(z)};return l.jsxs("div",{children:[l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Health Declaration"})]}),l.jsx("div",{className:"info-box",children:l.jsx("p",{className:"info-text",children:"To address your health condition better, we request you to provide your family tree details below."})}),l.jsxs("div",{className:"checkbox-wrapper",children:[l.jsx("input",{type:"checkbox",className:"checkbox-input",checked:e.check_the_box_if_you_willing_to_provide_your_family_details,onChange:N=>t("check_the_box_if_you_willing_to_provide_your_family_details",N.target.checked)}),l.jsxs("label",{className:"checkbox-label",children:["Check the box if you are willing to provide your family details ",l.jsx("span",{style:{color:"#ef4444"},children:"*"})]})]}),e.check_the_box_if_you_willing_to_provide_your_family_details&&l.jsxs("div",{className:"parent-details",children:[l.jsx("h4",{className:"parent-details-title",children:"Details of Parents"}),l.jsxs("div",{className:"parent-details-grid",children:[l.jsxs("div",{className:"parent-section",children:[l.jsx("h5",{className:"parent-section-title",children:"Mother's Details"}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Mother's First Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.mothers_full_name,onChange:N=>t("mothers_full_name",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_middle_name,onChange:N=>t("mother_middle_name",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Last Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_last_name,onChange:N=>t("mother_last_name",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Mother's origin village"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_origin_village,onChange:N=>t("mother_origin_village",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_district,onChange:N=>t("mother_district",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_province,onChange:N=>t("mother_province",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Country"}),l.jsx("select",{className:"field-select required",value:e.mother_country,onChange:N=>t("mother_country",N.target.value),children:n.map((N,z)=>l.jsx("option",{value:N.name,children:N.name},z))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Mother Alive"}),l.jsxs("select",{className:"field-select required",value:e.mother_alive,onChange:N=>t("mother_alive",N.target.value),children:[l.jsx("option",{children:"Yes"}),l.jsx("option",{children:"No"})]})]}),e.mother_alive==="Yes"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Mother's Contact No"}),l.jsx("input",{type:"text",className:"field-input",value:e.mothers_contact_no,onChange:N=>t("mothers_contact_no",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Mother's Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.mothers_email,onChange:N=>t("mothers_email",N.target.value)})]})]}):l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Cause of Death"}),l.jsx("input",{type:"text",className:"field-input",value:e.cause_of_death,onChange:N=>t("cause_of_death",N.target.value)})]})]}),l.jsxs("div",{className:"parent-section",children:[l.jsx("h5",{className:"parent-section-title",children:"Father's Details"}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Father's First Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.fathers_full_name,onChange:N=>t("fathers_full_name",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_middle_name,onChange:N=>t("father_middle_name",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Last Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_last_name,onChange:N=>t("father_last_name",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Father's origin village"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_origin_village,onChange:N=>t("father_origin_village",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_district,onChange:N=>t("father_district",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_province,onChange:N=>t("father_province",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Country"}),l.jsxs("select",{className:"field-select required",value:e.father_country,onChange:N=>t("father_country",N.target.value),children:[l.jsx("option",{value:"",children:"Select Country"}),n.map((N,z)=>l.jsx("option",{value:N.name,children:N.name},z))]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Father Alive"}),l.jsxs("select",{className:"field-select required",value:e.father_alive,onChange:N=>t("father_alive",N.target.value),children:[l.jsx("option",{children:"Yes"}),l.jsx("option",{children:"No"})]})]}),e.father_alive==="Yes"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Father's Contact No"}),l.jsx("input",{type:"text",className:"field-input",value:e.fathers_contact_no,onChange:N=>t("fathers_contact_no",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Father's Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.fathers_email,onChange:N=>t("fathers_email",N.target.value)})]})]}):l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Cause of Death"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_cause_of_death,onChange:N=>t("father_cause_of_death",N.target.value)})]})]})]})]}),l.jsx("div",{style:{marginTop:"2rem"},children:l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Marital Status"}),l.jsxs("select",{className:"field-select",style:{maxWidth:"300px"},value:e.marital_status,onChange:N=>t("marital_status",N.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Married"}),l.jsx("option",{children:"Single"})]})]})}),e.marital_status==="Married"&&l.jsxs("div",{style:{marginTop:"2rem"},children:[l.jsxs("div",{className:"table-section",children:[l.jsxs("div",{className:"table-header",children:[l.jsx("h4",{children:"Spouse Details"}),l.jsx("button",{type:"button",onClick:a,className:"btn btn-add-row",style:{background:"#059669",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"+ Add Spouse"})]}),i.length>0&&l.jsx("div",{className:"table-container",style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"CBM ID"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Age"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"center"},children:"Action"})]})}),l.jsx("tbody",{children:i.map((N,z)=>l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:N.name1,onChange:B=>g(z,"name1",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:N.crm_no,onChange:B=>g(z,"crm_no",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:N.age,onChange:B=>g(z,"age",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>_(z),style:{background:"#ef4444",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},children:"Remove"})})]},z))})]})})]}),l.jsxs("div",{className:"table-section",style:{marginTop:"2rem"},children:[l.jsxs("div",{className:"table-header",children:[l.jsx("h4",{children:"Children Details"}),l.jsx("button",{type:"button",onClick:S,className:"btn btn-add-row",style:{background:"#059669",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"+ Add Child"})]}),u.length>0&&l.jsx("div",{className:"table-container",style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Children Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Father's/Mother's Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"CBM ID"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Age"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"center"},children:"Action"})]})}),l.jsx("tbody",{children:u.map((N,z)=>l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:N.children_name,onChange:B=>E(z,"children_name",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:N.spouse_name,onChange:B=>E(z,"spouse_name",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:N.crm_no,onChange:B=>E(z,"crm_no",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:N.age,onChange:B=>E(z,"age",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>A(z),style:{background:"#ef4444",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},children:"Remove"})})]},z))})]})})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Basic Health Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Date"}),l.jsx("input",{type:"date",className:"field-input",value:e.BH_date,onChange:N=>t("BH_date",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blome No."}),l.jsx("input",{type:"text",className:"field-input",value:e.blome_no,onChange:N=>t("blome_no",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Age"}),l.jsx("input",{type:"number",className:"field-input",value:e.age,onChange:N=>t("age",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Height"}),l.jsx("input",{type:"text",placeholder:"e.g., 175 cm",className:"field-input",value:e.height,onChange:N=>t("height",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Weight"}),l.jsx("input",{type:"text",placeholder:"e.g., 70 kg",className:"field-input",value:e.weight,onChange:N=>t("weight",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"BMI"}),l.jsx("input",{type:"text",className:"field-input",value:e.bmi,onChange:N=>t("bmi",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Abdominal Circumference"}),l.jsx("input",{type:"text",className:"field-input",value:e.abdominal_circumference,onChange:N=>t("abdominal_circumference",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Hip Circumference"}),l.jsx("input",{type:"text",className:"field-input",value:e.hip_circumference,onChange:N=>t("hip_circumference",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blood Sugar"}),l.jsx("input",{type:"text",className:"field-input",value:e.blood_sugar,onChange:N=>t("blood_sugar",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"BP-Systolic"}),l.jsx("input",{type:"text",className:"field-input",value:e.bp_systolic,onChange:N=>t("bp_systolic",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Diastolic"}),l.jsx("input",{type:"text",className:"field-input",value:e.diastolic,onChange:N=>t("diastolic",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Pulse Rate"}),l.jsx("input",{type:"text",className:"field-input",value:e.pulse_rate,onChange:N=>t("pulse_rate",N.target.value)})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginTop:"1.5rem"},children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Prevailing Medical Conditions/Diseases"}),l.jsx("textarea",{rows:4,className:"field-textarea",value:e.prevailing_medical_conditions,onChange:N=>t("prevailing_medical_conditions",N.target.value)})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Are Surgical Operations Done in the Past"}),l.jsxs("select",{className:"field-select",value:e.are_surgical_operation_done_in_the_past,onChange:N=>t("are_surgical_operation_done_in_the_past",N.target.value),children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]}),e.are_surgical_operation_done_in_the_past==="Yes"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Type of Operation"}),l.jsx("input",{type:"text",className:"field-input",value:e.type_of_operation,onChange:N=>t("type_of_operation",N.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Date"}),l.jsx("input",{type:"date",className:"field-input",value:e.operation_date,onChange:N=>t("operation_date",N.target.value)})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Are You Taking any Medications"}),l.jsxs("select",{className:"field-select",value:e.are_you_taking_medications,onChange:N=>t("are_you_taking_medications",N.target.value),children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]})]})]})]}),l.jsx("input",{type:"hidden",value:JSON.stringify(i),onChange:()=>{},"data-spouse-data":"true"}),l.jsx("input",{type:"hidden",value:JSON.stringify(u),onChange:()=>{},"data-children-data":"true"})]})}),xJ=L.memo(({formData:e,handleChange:t,countries:n,bankData:i,setBankData:o})=>{const u=i.map(_=>te({account_no:_.account_no||_.accountNo||"",bank_name:_.bank_name||_.bankName||"",branch:_.branch||_.branchName||""},_)),c=()=>{const _={account_no:"",bank_name:"",branch:""};o([...i,_]),console.log("Added new bank row:",_)},a=(_,S,E)=>{const A=i.map((N,z)=>z===_?Ee(te({},N),{[S]:E}):N);o(A)},g=_=>{o(i.filter((S,E)=>E!==_))};return l.jsxs("div",{children:[l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Emergency Contact Person"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"First Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_first_name,onChange:_=>t("emergency_first_name",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_middle_name,onChange:_=>t("emergency_middle_name",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Last Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_last_name,onChange:_=>t("emergency_last_name",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Gender"}),l.jsxs("select",{className:"field-select",value:e.emergency_gender,onChange:_=>t("emergency_gender",_.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Male"}),l.jsx("option",{children:"Female"}),l.jsx("option",{children:"Other"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Date of Birth"}),l.jsx("input",{type:"date",className:"field-input",value:e.emergency_date_of_birth,onChange:_=>t("emergency_date_of_birth",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blood Group"}),l.jsxs("select",{className:"field-select",value:e.emergency_blood_group,onChange:_=>t("emergency_blood_group",_.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"A+"}),l.jsx("option",{children:"A-"}),l.jsx("option",{children:"B+"}),l.jsx("option",{children:"B-"}),l.jsx("option",{children:"AB+"}),l.jsx("option",{children:"AB-"}),l.jsx("option",{children:"O+"}),l.jsx("option",{children:"O-"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Number"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_number,onChange:_=>t("emergency_number",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Village"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_village,onChange:_=>t("emergency_village",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_district,onChange:_=>t("emergency_district",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_province,onChange:_=>t("emergency_province",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Country"}),l.jsx("select",{className:"field-select",value:e.emergency_country,onChange:_=>t("emergency_country",_.target.value),children:n.map((_,S)=>l.jsx("option",{value:_.name,children:_.name},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Country Code"}),l.jsx("select",{className:"field-select",value:e.emergency_personal_country_code,onChange:_=>t("emergency_personal_country_code",_.target.value),children:n.map((_,S)=>l.jsxs("option",{value:_.code,children:[_.code," (",_.name,")"]},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Phone No"}),l.jsx("input",{type:"tel",className:"field-input",value:e.emergency_phone_no,onChange:_=>t("emergency_phone_no",_.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Country Code"}),l.jsx("select",{className:"field-select",value:e.emergency_office_country_code,onChange:_=>t("emergency_office_country_code",_.target.value),children:n.map((_,S)=>l.jsxs("option",{value:_.code,children:[_.code," (",_.name,")"]},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Phone No"}),l.jsx("input",{type:"tel",className:"field-input",value:e.emergency_phone_no1,onChange:_=>t("emergency_phone_no1",_.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.emergency_personal_email,onChange:_=>t("emergency_personal_email",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.emergency_office_email,onChange:_=>t("emergency_office_email",_.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Next of Kin"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"First Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_firstname,onChange:_=>t("kin_firstname",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_middlename,onChange:_=>t("kin_middlename",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Last Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_lastname,onChange:_=>t("kin_lastname",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Gender"}),l.jsxs("select",{className:"field-select",value:e.kin_gender,onChange:_=>t("kin_gender",_.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Male"}),l.jsx("option",{children:"Female"}),l.jsx("option",{children:"Other"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Date of Birth"}),l.jsx("input",{type:"date",className:"field-input",value:e.kin_date_of_birth,onChange:_=>t("kin_date_of_birth",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blood Group"}),l.jsxs("select",{className:"field-select",value:e.kin_blood_group,onChange:_=>t("kin_blood_group",_.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"A+"}),l.jsx("option",{children:"A-"}),l.jsx("option",{children:"B+"}),l.jsx("option",{children:"B-"}),l.jsx("option",{children:"AB+"}),l.jsx("option",{children:"AB-"}),l.jsx("option",{children:"O+"}),l.jsx("option",{children:"O-"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Number"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_number,onChange:_=>t("kin_number",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Village"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_village,onChange:_=>t("kin_village",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_district,onChange:_=>t("kin_district",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_province,onChange:_=>t("kin_province",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Country"}),l.jsx("select",{className:"field-select",value:e.kin_country,onChange:_=>t("kin_country",_.target.value),children:n.map((_,S)=>l.jsx("option",{value:_.name,children:_.name},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Country Code"}),l.jsx("select",{className:"field-select",value:e.kin_personal_country_code,onChange:_=>t("kin_personal_country_code",_.target.value),children:n.map((_,S)=>l.jsxs("option",{value:_.code,children:[_.code," (",_.name,")"]},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Phone No"}),l.jsx("input",{type:"tel",className:"field-input",value:e.kin_phone_no,onChange:_=>t("kin_phone_no",_.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Country Code"}),l.jsx("select",{className:"field-select",value:e.kin_office_country_code,onChange:_=>t("kin_office_country_code",_.target.value),children:n.map((_,S)=>l.jsxs("option",{value:_.code,children:[_.code," (",_.name,")"]},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Phone No"}),l.jsx("input",{type:"tel",className:"field-input",value:e.kin_office_phone_no,onChange:_=>t("kin_office_phone_no",_.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.kin_personal_email,onChange:_=>t("kin_personal_email",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.kin_office_email,onChange:_=>t("kin_office_email",_.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Bank Details"})]}),l.jsx("div",{style:{marginTop:"2rem"},children:l.jsxs("div",{className:"table-section",children:[l.jsxs("div",{className:"table-header",children:[l.jsx("h4",{children:"Bank Details"}),l.jsx("button",{type:"button",onClick:c,className:"btn btn-add-row",style:{background:"#059669",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"+ Add Bank"})]}),u.length>0&&l.jsx("div",{className:"table-container",style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd"},children:"Account Number"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd"},children:"Bank Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd"},children:"Branch Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"center"},children:"Action"})]})}),l.jsx("tbody",{children:u.map((_,S)=>l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:_.account_no,onChange:E=>a(S,"account_no",E.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:_.bank_name,onChange:E=>a(S,"bank_name",E.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:_.branch,onChange:E=>a(S,"branch",E.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>g(S),style:{background:"#ef4444",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},children:"Remove"})})]},S))})]})}),l.jsx("input",{type:"hidden",value:JSON.stringify(i),readOnly:!0,"data-bank-data":"true"})]})})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Declaration"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsx("div",{className:"field-wrapper",style:{border:"1px solid #ccc",padding:"10px",borderRadius:"5px",backgroundColor:"#f9f9f9"},children:l.jsx("label",{className:"field-label",children:"I sincerely declare that the information provided in this Health Declaration Form is true and correct to the best of my knowledge. I hereby give permission to Western Medicare Ltd. to use the information provided by me to evaluate my health status and for research purposes as required. I further release Western Medicare Ltd. from any future litigation in relation to the information I have provided."})}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Digital Signature"}),l.jsx("input",{type:"text",className:"field-input",value:e.signature,onChange:_=>t("signature",_.target.value),placeholder:"Type your full name as digital signature"})]})]})]})]})}),_J=L.memo(({formData:e,handleChange:t})=>l.jsxs("div",{children:[l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Company Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label ",children:"Company"}),l.jsx("input",{type:"text",className:"field-input",value:e.company,onChange:n=>t("company",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label ",children:"Department"}),l.jsx("input",{type:"text",className:"field-input",value:e.department,onChange:n=>t("department",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Company Physical Address"}),l.jsx("input",{type:"text",className:"field-input",value:e.company_physical_address,onChange:n=>t("company_physical_address",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"PO Box Address"}),l.jsx("input",{type:"text",className:"field-input",value:e.po_box_address,onChange:n=>t("po_box_address",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Employee Type (Casual/Permanent)"}),l.jsxs("select",{className:"field-select",value:e.employee_type_emailwebsite,onChange:n=>t("employee_type_emailwebsite",n.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Casual"}),l.jsx("option",{children:"Permanent"})]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Supervisor Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Supervisor Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.supervisor_name,onChange:n=>t("supervisor_name",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Supervisor Position"}),l.jsx("input",{type:"text",className:"field-input",value:e.supervisor_position,onChange:n=>t("supervisor_position",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Supervisor Contact"}),l.jsx("input",{type:"text",className:"field-input",value:e.supervisor_contact,onChange:n=>t("supervisor_contact",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Supervisor Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.supervisor_email,onChange:n=>t("supervisor_email",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"HR Manager Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.hr_manager_name,onChange:n=>t("hr_manager_name",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"HR Manager Contact"}),l.jsx("input",{type:"text",className:"field-input",value:e.hr_manager_contact,onChange:n=>t("hr_manager_contact",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"HR Manager Email Address"}),l.jsx("input",{type:"email",className:"field-input",value:e.hr_manager_email_address,onChange:n=>t("hr_manager_email_address",n.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Work Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Nature of Work"}),l.jsx("input",{type:"text",className:"field-input",value:e.nature_of_work,onChange:n=>t("nature_of_work",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Workplace Hazards"}),l.jsx("input",{type:"text",className:"field-input",value:e.workplace_hazards,onChange:n=>t("workplace_hazards",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Work Risk Type"}),l.jsxs("select",{className:"field-select",value:e.work_risk_type,onChange:n=>t("work_risk_type",n.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"High"}),l.jsx("option",{children:"Medium"}),l.jsx("option",{children:"Low"})]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Lifestyle Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Alcohol"}),l.jsxs("select",{className:"field-select",value:e.alcohol,onChange:n=>t("alcohol",n.target.value),required:!0,children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Frequency of Taking Alcohol"}),l.jsxs("select",{className:"field-select",value:e.frequency_of_taking_alcohol,onChange:n=>t("frequency_of_taking_alcohol",n.target.value),required:!0,children:[l.jsx("option",{children:"Never"}),l.jsx("option",{children:"Less than Monthly"}),l.jsx("option",{children:"Monthly"}),l.jsx("option",{children:"Weekly"}),l.jsx("option",{children:"almost daily"}),l.jsx("option",{children:"Daily"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Smoking"}),l.jsxs("select",{className:"field-select",value:e.smoking,onChange:n=>t("smoking",n.target.value),required:!0,children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Frequency of Smoking"}),l.jsxs("select",{className:"field-select",value:e.frequency_of_smoking,onChange:n=>t("frequency_of_smoking",n.target.value),required:!0,children:[l.jsx("option",{children:"Never"}),l.jsx("option",{children:"Less than Monthly"}),l.jsx("option",{children:"Monthly"}),l.jsx("option",{children:"Weekly"}),l.jsx("option",{children:"almost daily"}),l.jsx("option",{children:"Daily"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Betel nut"}),l.jsxs("select",{className:"field-select",value:e.beteinut,onChange:n=>t("beteinut",n.target.value),children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Frequency of Betel nut"}),l.jsxs("select",{className:"field-select",value:e.frequency_of_beteinut,onChange:n=>t("frequency_of_beteinut",n.target.value),children:[l.jsx("option",{children:"Never"}),l.jsx("option",{children:"Less than Monthly"}),l.jsx("option",{children:"Monthly"}),l.jsx("option",{children:"Weekly"}),l.jsx("option",{children:"almost daily"}),l.jsx("option",{children:"Daily"})]})]})]})]})]})),bJ=L.memo(({formData:e})=>{var n;const t=i=>i?new Date(i).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return l.jsx("div",{children:l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:""}),l.jsx("h3",{className:"section-title",children:"Application Summary"})]}),l.jsxs("div",{className:"review-summary",children:[l.jsx("h4",{className:"review-section-title",children:"Personal Information"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Full Name:"}),l.jsx("span",{className:"review-value",children:`${e.first_name} ${e.middle_name} ${e.last_name}`.trim()||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Gender:"}),l.jsx("span",{className:"review-value",children:e.gender||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Date of Birth:"}),l.jsx("span",{className:"review-value",children:t(e.date_of_birth)||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Blood Group:"}),l.jsx("span",{className:"review-value",children:e.blood_group||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Country:"}),l.jsx("span",{className:"review-value",children:e.country||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Email:"}),l.jsx("span",{className:"review-value",children:e.personal_email_address||"Not provided"})]})]}),l.jsx("h4",{className:"review-section-title",children:"Health Information"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Age:"}),l.jsx("span",{className:"review-value",children:e.age||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Height:"}),l.jsx("span",{className:"review-value",children:e.height||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Weight:"}),l.jsx("span",{className:"review-value",children:e.weight||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"BMI:"}),l.jsx("span",{className:"review-value",children:e.bmi||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Blood Pressure:"}),l.jsx("span",{className:"review-value",children:`${e.bp_systolic}/${e.diastolic}`.replace("/","")?`${e.bp_systolic}/${e.diastolic}`:"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Blood Sugar:"}),l.jsx("span",{className:"review-value",children:e.blood_sugar||"Not provided"})]})]}),l.jsx("h4",{className:"review-section-title",children:"Emergency Contact"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Emergency Contact:"}),l.jsx("span",{className:"review-value",children:`${e.emergency_first_name} ${e.emergency_middle_name} ${e.emergency_last_name}`.trim()||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Emergency Phone:"}),l.jsx("span",{className:"review-value",children:e.emergency_phone_no?`${e.emergency_personal_country_code} ${e.emergency_phone_no}`:"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Next of Kin:"}),l.jsx("span",{className:"review-value",children:`${e.kin_firstname} ${e.kin_middlename} ${e.kin_lastname}`.trim()||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Kin Phone:"}),l.jsx("span",{className:"review-value",children:e.kin_phone_no?`${e.kin_personal_country_code} ${e.kin_phone_no}`:"Not provided"})]})]}),l.jsx("h4",{className:"review-section-title",children:"Employment Information"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Company:"}),l.jsx("span",{className:"review-value",children:e.company||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Department:"}),l.jsx("span",{className:"review-value",children:e.department||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Supervisor:"}),l.jsx("span",{className:"review-value",children:e.supervisor_name||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Work Risk Type:"}),l.jsx("span",{className:"review-value",children:e.work_risk_type||"Not provided"})]})]}),l.jsx("h4",{className:"review-section-title",children:"Lifestyle Information"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Alcohol:"}),l.jsxs("span",{className:"review-value",children:[e.alcohol," - ",e.frequency_of_taking_alcohol]})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Smoking:"}),l.jsxs("span",{className:"review-value",children:[e.smoking," - ",e.frequency_of_smoking]})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Beteinut:"}),l.jsxs("span",{className:"review-value",children:[e.beteinut," - ",e.frequency_of_beteinut]})]})]}),l.jsx("h4",{className:"review-section-title",children:"Bank Information"}),l.jsx("div",{className:"review-grid",children:(n=e==null?void 0:e.bank_details)==null?void 0:n.map((i,o)=>l.jsxs("div",{className:"review-item",children:[l.jsxs("span",{className:"review-label",children:["Bank ",o+1,":"]}),l.jsx("span",{className:"review-value",children:`${i.bank_name} - ${i.branch} - ${i.account_no}`})]},o))}),l.jsxs("div",{className:"review-declaration",children:[l.jsx("h4",{className:"review-section-title",children:"Declaration"}),l.jsxs("div",{className:"declaration-box",children:[l.jsx("p",{children:"I sincerely declare that the information provided in this Health Declaration Form is true and correct to the best of my knowledge. I hereby give permission to Western Medicare Ltd. to use the information provided by me to evaluate my health status and for research purposes as required. I further release Western Medicare Ltd. from any future litigation in relation to the information Ihaveprovided."}),l.jsxs("div",{className:"signature-section",children:[l.jsx("div",{className:"signature-line",children:l.jsxs("span",{children:["Name: ",l.jsx("strong",{children:e.signature||"Not provided"})]})}),l.jsx("div",{className:"signature-line",children:l.jsxs("span",{children:["Date: ",l.jsx("strong",{children:new Date().toLocaleDateString()})]})})]})]})]})]})]})})}),vJ=({visible:e,onClose:t,title:n,message:i,type:o})=>{if(!e)return null;const u={success:"#D1FAE5",error:"#FEE2E2"},c={success:"#10B981",error:"#EF4444"};return l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:t,children:l.jsxs("div",{onClick:a=>a.stopPropagation(),style:{maxWidth:"400px",width:"90%",padding:"20px",backgroundColor:u[o]||"white",borderRadius:"8px",border:`2px solid ${c[o]||"black"}`,boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center",fontFamily:"Arial, sans-serif"},children:[l.jsx("h2",{style:{color:c[o],marginBottom:"10px"},children:n}),l.jsx("p",{style:{fontSize:"14px",marginBottom:"20px",color:"#333"},children:i}),l.jsx("button",{onClick:t,style:{cursor:"pointer",backgroundColor:c[o],color:"#fff",border:"none",padding:"10px 20px",borderRadius:"5px",fontWeight:"bold"},children:"Close"})]})})};function wJ(e,t,n,i,o,u){console.log("form data in get print html....",e);const c=t&&t.length>0?`<table>
        <thead>
          <tr>
            <th>Name</th>
            <th>CRM No</th>
            <th>Age</th>
          </tr>
        </thead>
        <tbody>
          ${t.map(E=>`
            <tr>
              <td>${E.name1||""}</td>
              <td>${E.crm_no||""}</td>
              <td>${E.age||""}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>`:'<div class="field-value empty">No spouse details provided.</div>',a=n&&n.length>0?`<table>
        <thead>
          <tr>
            <th>Children Name</th>
            <th>Parent Name</th>
            <th>CRM No</th>
            <th>Age</th>
          </tr>
        </thead>
        <tbody>
          ${n.map(E=>`
            <tr>
              <td>${E.children_name||""}</td>
              <td>${E.spouse_name||""}</td>
              <td>${E.crm_no||""}</td>
              <td>${E.age||""}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>`:'<div class="field-value empty">No children details provided.</div>',g=e!=null&&e.bank_details&&(e==null?void 0:e.bank_details.length)>0?`<table>
        <thead>
          <tr>
            
            <th>Account Number</th>
            <th>Bank Name</th>
            <th>Branch Name</th>
          </tr>
        </thead>
        <tbody>
          ${e==null?void 0:e.bank_details.map(E=>`
            <tr>
             
              <td>${E.account_no||""}</td>
              <td>${E.bank_name||""}</td>
              <td>${E.branch||""}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>`:'<div class="field-value empty">No spouse bank details provided.</div>';Math.floor(Math.random()*1e4).toString().padStart(4,"0");const _=e.mother_alive==="Yes",S=e.father_alive==="Yes";return`
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Card Blo Me Registration - ${e.first_name||""} ${e.last_name||""}</title>
  <style>
    @media print {
      @page {
        margin: 0.5in;
        size: A4;
      }
      body {
        font-family: 'Arial', sans-serif;
        font-size: 12px;
        color: #000;
        margin: 0;
        padding: 0;
      }
      .no-print {
        display: none !important;
      }
    }

    body {
      font-family: 'Arial', sans-serif;
      font-size: 12px;
      line-height: 1.4;
      color: #000;
      margin: 0;
      padding: 20px;
      background: white;
    }

    .section {
      margin-bottom: 25px;
      page-break-inside: avoid;
    }

    .section-title {
      background: #f3f4f6;
      color: #1f2937;
      font-size: 14px;
      font-weight: bold;
      padding: 8px 12px;
      margin-bottom: 12px;
      border-left: 4px solid #2563eb;
    }

    .field-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 12px;
    }

    .field {
      flex: 1;
      min-width: 200px;
    }

    .field-label {
      font-weight: 600;
      color: #374151;
      margin-bottom: 2px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .field-value {
      padding: 6px 8px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      border-radius: 3px;
      min-height: 16px;
      font-size: 12px;
      word-break: break-word;
    }

    .field-value.empty {
      color: #9ca3af;
      font-style: italic;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      margin-bottom: 20px;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      font-size: 12px;
      word-break: break-word;
    }

    th {
      background-color: #f5f5f5;
      text-align: left;
    }

    .card-container {
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
      width: 532px;
      height: 337px;
      padding: 26px;
      position: relative;
      border: 1px solid #ccc;
      border-radius: 10px;
      background-image: url('/assets/erpnext/images/cardbg1.png');
      background-size: 532px 337px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      margin: 40px auto 0 auto;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    .card-decoration {
      position: absolute;
      top: 0;
      right: 0;
      width: 200px;
      height: 200px;
      opacity: 0.7;
      transform: rotate(180deg);
      z-index: 2;
      overflow: hidden;
      box-sizing: border-box;
    }

    .card-decoration img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .logo-section {
      position: absolute;
      top: 26px;
      left: 26px;
      display: flex;
      align-items: center;
      z-index: 2;
    }

    .card-details {
      position: absolute;
      top: 36px;
      left: 140px;
      right: 26px;
      z-index: 2;
      width: 350px;
    }

    .detail-row {
      display: flex;
      margin-bottom: 4px;
    }

    .detail-label {
      width: 128px;
      font-weight: bold;
      font-size: 13px;
      text-align: left;
    }

    .detail-value {
      font-size: 13px;
      text-align: left;
      flex: 1;
      word-break: break-word;
    }

    .profile-section {
      position: absolute;
      top: 120px;
      left: 26px;
      display: flex;
      gap: 20px;
      z-index: 2;
      right: 150px;
    }

    .profile-image {
      width: 124px;
      height: 150px;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .profile-details {
      width: 160px;
      overflow: hidden;
      word-break: break-word;
    }

    .profile-label {
      font-weight: bold;
      font-size: 12px;
      margin-bottom: 1px;
    }

    .profile-value {
      margin-top: 0;
      margin-bottom: 8px;
      font-size: 12px;
      word-break: break-word;
    }

    .qr-code {
      position: absolute;
      bottom: 26px;
      right: 26px;
      width: 100px;
      height: 100px;
      z-index: 2;
      background: #fff;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .qr-code img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .decorative-pattern img {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      width: 430px;
    }

    .declaration-text {
      position: absolute;
      top: 154px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      text-align: center;
      font-style: italic;
      font-size: 10px;
      line-height: 1.4;
    }

    .signature-section {
      background-color: transparent;
      position: absolute;
      top: 316px;
      left: 0;
      right: 0;
      text-align: center;
    }

    .signature-line {
      width: 300px;
      border-top: 1px dotted #000;
      height: 1px;
      margin: 0 auto 5px auto;
    }

    .signature-label {
      font-weight: bold;
      font-size: 14px;
    }

    .contact-info-text {
      width: 401px;
      position: absolute;
      top: 345px;
      left: 95px;
      right: 50px;
      text-align: center;
      font-size: 10px;
      line-height: 1.4;
    }

    .contact-details {
      position: absolute;
      bottom: 20px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 20px;
      font-size: 9px;
    }

    .contact-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .contact-icon {
      width: 16px;
      height: 16px;
    }
  </style>
</head>

<body>
  <!-- Personal Information -->
  <div class="section">
    <div class="section-title"> Personal Information</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">First Name</div>
        <div class="field-value">${e.first_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Middle Name</div>
        <div class="field-value">${e.middle_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Last Name</div>
        <div class="field-value">${e.last_name||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Title</div>
        <div class="field-value">${e.title||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Gender</div>
        <div class="field-value">${e.gender||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Date of Birth</div>
        <div class="field-value">${e.date_of_birth||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Blood Group</div>
        <div class="field-value">${e.blood_group||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Resident Status</div>
        <div class="field-value">${e.resident_status||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Current Address -->
  <div class="section">
    <div class="section-title"> Current Address</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Number</div>
        <div class="field-value">${e.portion_nolot_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Village</div>
        <div class="field-value">${e.village||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Town</div>
        <div class="field-value">${e.town||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.district||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.province||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.country||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">PO Box</div>
        <div class="field-value">${e.po_box||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Postal Code</div>
        <div class="field-value">${e.postal_code||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Location</div>
        <div class="field-value">${e.location||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Physical Address -->
  <div class="section">
    <div class="section-title"> Physical Address</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Number</div>
        <div class="field-value">${e.portion_lot_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Street/Village</div>
        <div class="field-value">${e.village_street||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Town</div>
        <div class="field-value">${e.town1||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.district1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.province1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.country1||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">PO Box</div>
        <div class="field-value">${e.po_box1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Postal Code</div>
        <div class="field-value">${e.postal_code1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Location</div>
        <div class="field-value">${e.location1||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Contact Details -->
  <div class="section">
    <div class="section-title"> Contact Details</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Personal Phone</div>
        <div class="field-value">${e.personal_country_code||""} ${e.phone_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Phone</div>
        <div class="field-value">${e.office_country_code||""} ${e.mobile_no||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Personal Email</div>
        <div class="field-value">${e.personal_email_address||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Email</div>
        <div class="field-value">${e.office_email||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Origin Information -->
  <div class="section">
    <div class="section-title"> Origin</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Place of Birth</div>
        <div class="field-value">${e.place_of_birth||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Hospital Name</div>
        <div class="field-value">${e.hospital_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Village</div>
        <div class="field-value">${e.village1||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.district2||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.province2||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.country2||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Parents Details -->
  <div class="section">
    <div class="section-title"> Parents Details</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Mother's First Name</div>
        <div class="field-value">${e.mothers_full_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Mother's Middle Name</div>
        <div class="field-value">${e.mother_middle_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Mother's Last Name</div>
        <div class="field-value">${e.mother_last_name||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Mother's Origin Village</div>
        <div class="field-value">${e.mother_origin_village||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.mother_district||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.mother_province||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.mother_country||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Mother Alive</div>
        <div class="field-value">${e.mother_alive||"Not provided"}</div>
      </div>
      ${_?`
      <div class="field">
        <div class="field-label">Mother Contact No</div>
        <div class="field-value">${e.mothers_contact_no||"Not provided"}</div>
      </div>
      `:""}
    </div>
    ${_?`
    <div class="field-group">
      <div class="field">
        <div class="field-label">Mother Email</div>
        <div class="field-value">${e.mothers_email||"Not provided"}</div>
      </div>
    </div>
    `:`
    <div class="field-group">
      <div class="field">
        <div class="field-label">Cause of Death</div>
        <div class="field-value">${e.cause_of_death||"Not provided"}</div>
      </div>
    </div>
    `}

    <div class="field-group">
      <div class="field">
        <div class="field-label">Father's First Name</div>
        <div class="field-value">${e.fathers_full_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Father's Middle Name</div>
        <div class="field-value">${e.father_middle_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Father's Last Name</div>
        <div class="field-value">${e.father_last_name||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Father's Origin Village</div>
        <div class="field-value">${e.father_origin_village||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.father_district||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.father_province||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.father_country||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Father Alive</div>
        <div class="field-value">${e.father_alive||"Not provided"}</div>
      </div>
      ${S?`
      <div class="field">
        <div class="field-label">Father Contact No</div>
        <div class="field-value">${e.fathers_contact_no||"Not provided"}</div>
      </div>
      `:""}
    </div>
    ${S?`
    <div class="field-group">
      <div class="field">
        <div class="field-label">Father Email</div>
        <div class="field-value">${e.fathers_email||"Not provided"}</div>
      </div>
    </div>
    `:`
    <div class="field-group">
      <div class="field">
        <div class="field-label">Cause of Death</div>
        <div class="field-value">${e.father_cause_of_death||"Not provided"}</div>
      </div>
    </div>
    `}
  </div>

  <!-- Marital Status -->
  <div class="section">
    <div class="section-title"> Marital Status</div>
    <div class="field-value">${e.marital_status||"Not provided"}</div>
  </div>

  <!-- Spouse Details -->
  <div class="section">
    <div class="section-title"> Spouse Details</div>
    ${c}
  </div>

  <!-- Children Details -->
  <div class="section">
    <div class="section-title"> Children Details</div>
    ${a}
  </div>

  <!-- Basic Health Information -->
  <div class="section">
    <div class="section-title"> Basic Health Information</div>
    <div class="field-group">
      <div class="field"><div class="field-label">Date</div><div class="field-value">${e.BH_date||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Blome No.</div><div class="field-value">${e.blome_no||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Age</div><div class="field-value">${e.age||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Height</div><div class="field-value">${e.height||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Weight</div><div class="field-value">${e.weight||"Not provided"}</div></div>
      <div class="field"><div class="field-label">BMI</div><div class="field-value">${e.bmi||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Abdominal Circumference</div><div class="field-value">${e.abdominal_circumference||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Hip Circumference</div><div class="field-value">${e.hip_circumference||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Blood Sugar</div><div class="field-value">${e.blood_sugar||"Not provided"}</div></div>
      <div class="field"><div class="field-label">BP-Systolic</div><div class="field-value">${e.bp_systolic||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Diastolic</div><div class="field-value">${e.diastolic||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Pulse Rate</div><div class="field-value">${e.pulse_rate||"Not provided"}</div></div>
    </div>
    <div class="field-group">
      <div class="field"><div class="field-label">Prevailing Medical Conditions/Diseases</div><div class="field-value">${e.prevailing_medical_conditions||"Not provided"}</div></div>
    </div>
    <div class="field-group">
      <div class="field"><div class="field-label">Are Surgical Operations Done in the Past</div><div class="field-value">${e.are_surgical_operation_done_in_the_past||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Type of Operation</div><div class="field-value">${e.type_of_operation||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Date</div><div class="field-value">${e.operation_date||"Not provided"}</div></div>
    </div>
    <div class="field-group">
      <div class="field"><div class="field-label">Are You Taking any Medications</div><div class="field-value">${e.are_you_taking_medications||"Not provided"}</div></div>
    </div>
  </div>

  <!-- Emergency Contact Person -->
  <div class="section">
    <div class="section-title"> Emergency Contact Person</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">First Name</div>
        <div class="field-value">${e.emergency_first_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Middle Name</div>
        <div class="field-value">${e.emergency_middle_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Last Name</div>
        <div class="field-value">${e.emergency_last_name||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Gender</div>
        <div class="field-value">${e.emergency_gender||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Date of Birth</div>
        <div class="field-value">${e.emergency_date_of_birth||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Blood Group</div>
        <div class="field-value">${e.emergency_blood_group||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Phone Number</div>
        <div class="field-value">${e.emergency_personal_country_code||""} ${e.emergency_phone_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Email</div>
        <div class="field-value">${e.emergency_personal_email||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Office Phone</div>
        <div class="field-value">${e.emergency_office_country_code||""} ${e.emergency_phone_no1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Email</div>
        <div class="field-value">${e.emergency_office_email||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Next of Kin -->
  <div class="section">
    <div class="section-title"> Next of Kin</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">First Name</div>
        <div class="field-value">${e.kin_firstname||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Middle Name</div>
        <div class="field-value">${e.kin_middlename||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Last Name</div>
        <div class="field-value">${e.kin_lastname||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Gender</div>
        <div class="field-value">${e.kin_gender||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Date of Birth</div>
        <div class="field-value">${e.kin_date_of_birth||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Blood Group</div>
        <div class="field-value">${e.kin_blood_group||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Phone No</div>
        <div class="field-value">${e.kin_personal_country_code||""} ${e.kin_phone_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Phone</div>
        <div class="field-value">${e.kin_office_country_code||""} ${e.kin_office_phone_no||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Personal Email</div>
        <div class="field-value">${e.kin_personal_email||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Email</div>
        <div class="field-value">${e.kin_office_email||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Employment Information -->
  <div class="section">
    <div class="section-title"> Employment Information</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Company</div>
        <div class="field-value">${e.company||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Department</div>
        <div class="field-value">${e.department||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Supervisor Name</div>
        <div class="field-value">${e.supervisor_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Supervisor Position</div>
        <div class="field-value">${e.supervisor_position||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Supervisor Contact</div>
        <div class="field-value">${e.supervisor_contact||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Supervisor Email</div>
        <div class="field-value">${e.supervisor_email||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">HR Manager Name</div>
        <div class="field-value">${e.hr_manager_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">HR Manager Contact</div>
        <div class="field-value">${e.hr_manager_contact||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">HR Manager Email</div>
        <div class="field-value">${e.hr_manager_email_address||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Nature of Work</div>
        <div class="field-value">${e.nature_of_work||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Workplace Hazards</div>
        <div class="field-value">${e.workplace_hazards||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Work Risk Type</div>
        <div class="field-value">${e.work_risk_type||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Lifestyle Information -->
  <div class="section">
    <div class="section-title"> Lifestyle Information</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Alcohol</div>
        <div class="field-value">${e.alcohol||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Frequency of Taking Alcohol</div>
        <div class="field-value">${e.frequency_of_taking_alcohol||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Smoking</div>
        <div class="field-value">${e.smoking||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Frequency of Smoking</div>
        <div class="field-value">${e.frequency_of_smoking||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Betel Nut</div>
        <div class="field-value">${e.beteinut||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Frequency of Betel Nut</div>
        <div class="field-value">${e.frequency_of_beteinut||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Spouse Bank Details -->
  <div class="section">
    <div class="section-title"> Spouse Bank Details</div>
    ${g}
  </div>

  

</body>
</html>
  `}function SJ(e,t,n,i,o,u,c){return`
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Card - ${e.first_name||""} ${e.last_name||""}</title>
  <style>
    @media print {
      @page {
        margin: 0.5in;
        size: A4;
      }
      body {
        font-family: 'Arial', sans-serif;
        font-size: 12px;
        color: #000;
        margin: 0;
        padding: 0;
      }
      .no-print {
        display: none !important;
      }
    }

    body {
      font-family: 'Arial', sans-serif;
      font-size: 12px;
      line-height: 1.4;
      color: #000;
      margin: 0;
      padding: 20px;
      background: white;
    }

    .cards-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      min-height: 100vh;
      flex-wrap: wrap;
    }

    .card-container {
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
      width: 338px;
      height: 213px;
      padding: 10px;
      position: relative;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-image: url('/assets/erpnext/images/cardbg1.png');
      background-size: 338px 213px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    .card-decoration {
      position: absolute;
      top: -10px;
      right: -10px;
      width: 120px;
      height: 120px;
      opacity: 0.3;
      transform: rotate(180deg);
      z-index: 1;
      overflow: hidden;
      box-sizing: border-box;
    }

    .card-decoration img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .logo-section {
      position: absolute;
      top: 15px;
      left: 15px;
      display: flex;
      align-items: center;
      z-index: 2;
    }

    .card-details {
      position: absolute;
      top: 15px;
      left: 120px;
      z-index: 2;
      width: 180px;
    }

    .detail-row {
      display: flex;
      gap: 5px;
      margin-bottom: 2px;
      align-items: baseline;
    }

    .detail-label {
      font-weight: bold;
      font-size: 8px;
      color: #000;
      text-transform: uppercase;
    }

    .detail-value {
      font-size: 8px;
      font-weight: 600;
      color: #000;
    }

    .profile-section {
      position: absolute;
      top: 60px;
      left: 15px;
      right: 80px;
      display: flex;
      gap: 15px;
      z-index: 2;
      align-items: flex-start;
    }

    .profile-image {
      width: 80px;
      height: 100px;
      border-radius: 6px;
      object-fit: cover;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
      border: 2px solid #fff;
      flex-shrink: 0;
    }

    .profile-details {
      flex: 1;
      padding-top: 3px;
    }

    .profile-item {
      margin-bottom: 8px;
    }

    .profile-label {
      font-weight: bold;
      font-size: 8px;
      margin-bottom: 2px;
      color: #000;
      text-transform: uppercase;
      line-height: 1;
    }

    .profile-value {
      margin: 0;
      font-size: 9px;
      color: #000;
      font-weight: 500;
      line-height: 1.2;
    }

    .qr-code {
      position: absolute;
      bottom: 25px;
      right: 25px;
      width: 65px;
      height: 65px;
      z-index: 2;
      background: #fff;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .qr-code img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .decorative-pattern img {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      width: 200px;
    }

    .declaration-text {
      position: absolute;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      width: 85%;
      text-align: center;
      font-style: italic;
      font-size: 6px;
      line-height: 1.2;
    }

    .signature-section {
      background-color: transparent;
      position: absolute;
      top: 160px;
      left: 0;
      right: 0;
      text-align: center;
    }

    .signature-line {
      width: 150px;
      border-top: 1px dotted #000;
      height: 1px;
      margin: 0 auto 3px auto;
    }

    .signature-label {
      font-weight: bold;
      font-size: 7px;
    }

    .contact-info-text {
      width: 280px;
      position: absolute;
      top: 180px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      font-size: 5px;
      line-height: 1.2;
    }

    .contact-details {
      position: absolute;
      bottom: 8px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      font-size: 5px;
      flex-wrap: wrap;
    }

    .contact-item {
      display: flex;
      align-items: center;
      gap: 2px;
    }

    .contact-icon {
      width: 8px;
      height: 8px;
    }

    /* Responsive design for smaller screens */
    @media (max-width: 1200px) {
      .cards-wrapper {
        flex-direction: column;
        gap: 20px;
      }
    }
  </style>
</head>

<body>
  <div class="cards-wrapper">
    <!-- Card front panel -->
    <div class="card-container">
      <div class="card-decoration">
        <img src="/assets/erpnext/images/design1.png" alt="Decorative Pattern" />
      </div>
      <div class="logo-section">
        <img style="height: 30px" src="/assets/erpnext/images/mycard-logo.png" />
      </div>
      <div class="card-details">
        <div class="detail-row">
          <div class="detail-label">CARD NUMBER: </div>
          <div class="detail-value">${c}</div>
        </div>
        <div class="detail-row">
          <div class="detail-label">DATE OF ISSUE: </div>
          <div class="detail-value">${o||""}</div>
        </div>
      </div>
      <div class="profile-section">
        <img class="profile-image" src="${u||""}" alt="Profile Picture" />
        <div class="profile-details">
          <div class="profile-item">
            <p class="profile-label">NAME</p>
            <p class="profile-value">${e.title||""} ${e.first_name||""} ${e.last_name||""}</p>
          </div>
          <div class="profile-item">
            <p class="profile-label">DATE OF BIRTH</p>
            <p class="profile-value">${e.date_of_birth||""}</p>
          </div>
          <div class="profile-item">
            <p class="profile-label">ORIGIN</p>
            <p class="profile-value">${e.country||"Not provided"}</p>
          </div>
          <div class="profile-item">
            <p class="profile-label">NATIONALITY</p>
            <p class="profile-value">${e.country||"Not provided"}</p>
          </div>
        </div>
      </div>
      <div class="qr-code">
        <img src="${e.qr_code||""}" alt="QR Code" />
      </div>
    </div>

    <!-- Card back panel -->
    <div class="card-container">
      <div class="logo-section">
        <img style="height: 25px" src="/assets/erpnext/images/mycard-logo.png" />
      </div>
      <div class="decorative-pattern">
        <img style="transform: scaleX(-1);" src="/assets/erpnext/images/design2.png" alt="Decorative Pattern with Bird" />
      </div>
      <div class="declaration-text">
        I, the undersigned, hereby declare that all information and biometric data provided by me through this personal identification card are true, accurate, and correct to the best of my knowledge. I acknowledge that such information has been duly verified by LOT ICT Solutions Limited.
        <br /><br />
        This card remains the exclusive property of LOT ICT Solutions Limited. In the event that this card is found please notify the below given contact details through email or message.
      </div>
      <div class="signature-section">
        <div class="signature-line"></div>
        <div class="signature-label">Declared owner's Signature</div>
      </div>
      <div class="contact-info-text">
        To access or verify the details given in this Personal Identification Card please contact <a href="mailto:Info@mycardpng.com">Info@mycardpng.com</a> to release the information after obtaining approval from the declared owner of the Card.
      </div>
      <div class="contact-details">
        <div class="contact-item"> +675 7190 2850</div>
        <div class="contact-item"> +675 8223 4447</div>
        <div class="contact-item"> info@mycardpng.com</div>
        <div class="contact-item"> mycardpng.com</div>
      </div>
    </div>
  </div>

</body>
</html>
  `}const kN=()=>{const[e,t]=L.useState(1),[n,i]=L.useState(!1),[o,u]=L.useState(!1),[c,a]=L.useState({1:!1,2:!1,3:!1,4:!1}),[g,_]=L.useState(!1),[S,E]=L.useState(!1),[A,N]=L.useState(null),[z,B]=L.useState(""),[$,q]=L.useState([]),[W,Q]=L.useState([]),[Z,K]=L.useState([]),[le,ge]=L.useState(!1),he=Qi.get("user_id"),{data:pe}=jh("User",he),[Ie,He]=L.useState();L.useEffect(()=>{console.log("User deatils............",pe),(pe==null?void 0:pe.is_submitted)===1&&(_(!0),t(5))},[pe]);const Ye=!!(pe!=null&&pe.card_blo_me_number||pe!=null&&pe.card_blo_me_page_2||pe!=null&&pe.card_blo_me_page_3||pe!=null&&pe.card_blo_me_page_4),rt=L.useMemo(()=>({page1:pe==null?void 0:pe.card_blo_me_number,page2:pe==null?void 0:pe.card_blo_me_page_2,page3:pe==null?void 0:pe.card_blo_me_page_3,page4:pe==null?void 0:pe.card_blo_me_page_4}),[pe]),Rt=Xt=>{const lt=Xt.target.files[0];lt&&(N(lt),B(URL.createObjectURL(lt))),console.log("profile picture changed",A,z)},{upload:St,reset:De}=Kj(),{updateDoc:Qe}=LA(),et=()=>Gt(null,null,function*(){if(A)try{const Xt=ae.name||Qi.get("user_id"),lt=yield St(A,{isPrivate:!0,doctype:"User",docname:Xt,fieldname:"user_image"});lt!=null&&lt.file_url&&(B(lt.file_url),N(null),yield Qe("User",Xt,{user_image:lt.file_url}),Qi.set("user_image",lt.file_url,{expires:30,secure:!0,sameSite:"strict"}),alert("Profile picture uploaded successfully!")),De()}catch(Xt){throw alert("Upload failed. Please try again."),console.error(Xt),He(Xt),new Error(Xt)}}),Nt=L.useMemo(()=>[{name:"Afghanistan",code:"+93"},{name:"Albania",code:"+355"},{name:"Algeria",code:"+213"},{name:"Andorra",code:"+376"},{name:"Angola",code:"+244"},{name:"Argentina",code:"+54"},{name:"Armenia",code:"+374"},{name:"Australia",code:"+61"},{name:"Austria",code:"+43"},{name:"Azerbaijan",code:"+994"},{name:"Bahrain",code:"+973"},{name:"Bangladesh",code:"+880"},{name:"Belarus",code:"+375"},{name:"Belgium",code:"+32"},{name:"Belize",code:"+501"},{name:"Benin",code:"+229"},{name:"Bhutan",code:"+975"},{name:"Bolivia",code:"+591"},{name:"Bosnia and Herzegovina",code:"+387"},{name:"Botswana",code:"+267"},{name:"Brazil",code:"+55"},{name:"Brunei",code:"+673"},{name:"Bulgaria",code:"+359"},{name:"Burkina Faso",code:"+226"},{name:"Burundi",code:"+257"},{name:"Cambodia",code:"+855"},{name:"Cameroon",code:"+237"},{name:"Canada",code:"+1"},{name:"Cape Verde",code:"+238"},{name:"Chad",code:"+235"},{name:"Chile",code:"+56"},{name:"China",code:"+86"},{name:"Colombia",code:"+57"},{name:"Comoros",code:"+269"},{name:"Congo",code:"+242"},{name:"Costa Rica",code:"+506"},{name:"Croatia",code:"+385"},{name:"Cuba",code:"+53"},{name:"Cyprus",code:"+357"},{name:"Czech Republic",code:"+420"},{name:"Denmark",code:"+45"},{name:"Djibouti",code:"+253"},{name:"Dominican Republic",code:"+1809"},{name:"Ecuador",code:"+593"},{name:"Egypt",code:"+20"},{name:"El Salvador",code:"+503"},{name:"Estonia",code:"+372"},{name:"Ethiopia",code:"+251"},{name:"Fiji",code:"+679"},{name:"Finland",code:"+358"},{name:"France",code:"+33"},{name:"Gabon",code:"+241"},{name:"Gambia",code:"+220"},{name:"Georgia",code:"+995"},{name:"Germany",code:"+49"},{name:"Ghana",code:"+233"},{name:"Greece",code:"+30"},{name:"Guatemala",code:"+502"},{name:"Guinea",code:"+224"},{name:"Guyana",code:"+592"},{name:"Haiti",code:"+509"},{name:"Honduras",code:"+504"},{name:"Hungary",code:"+36"},{name:"Iceland",code:"+354"},{name:"India",code:"+91"},{name:"Indonesia",code:"+62"},{name:"Iran",code:"+98"},{name:"Iraq",code:"+964"},{name:"Ireland",code:"+353"},{name:"Israel",code:"+972"},{name:"Italy",code:"+39"},{name:"Jamaica",code:"+1876"},{name:"Japan",code:"+81"},{name:"Jordan",code:"+962"},{name:"Kazakhstan",code:"+7"},{name:"Kenya",code:"+254"},{name:"Kuwait",code:"+965"},{name:"Kyrgyzstan",code:"+996"},{name:"Laos",code:"+856"},{name:"Latvia",code:"+371"},{name:"Lebanon",code:"+961"},{name:"Lesotho",code:"+266"},{name:"Liberia",code:"+231"},{name:"Libya",code:"+218"},{name:"Lithuania",code:"+370"},{name:"Luxembourg",code:"+352"},{name:"Madagascar",code:"+261"},{name:"Malawi",code:"+265"},{name:"Malaysia",code:"+60"},{name:"Maldives",code:"+960"},{name:"Mali",code:"+223"},{name:"Malta",code:"+356"},{name:"Mauritania",code:"+222"},{name:"Mauritius",code:"+230"},{name:"Mexico",code:"+52"},{name:"Moldova",code:"+373"},{name:"Monaco",code:"+377"},{name:"Mongolia",code:"+976"},{name:"Montenegro",code:"+382"},{name:"Morocco",code:"+212"},{name:"Mozambique",code:"+258"},{name:"Myanmar",code:"+95"},{name:"Namibia",code:"+264"},{name:"Nepal",code:"+977"},{name:"Netherlands",code:"+31"},{name:"New Zealand",code:"+64"},{name:"Nicaragua",code:"+505"},{name:"Niger",code:"+227"},{name:"Nigeria",code:"+234"},{name:"North Korea",code:"+850"},{name:"Norway",code:"+47"},{name:"Oman",code:"+968"},{name:"Pakistan",code:"+92"},{name:"Panama",code:"+507"},{name:"Papua New Guinea",code:"+675"},{name:"Paraguay",code:"+595"},{name:"Peru",code:"+51"},{name:"Philippines",code:"+63"},{name:"Poland",code:"+48"},{name:"Portugal",code:"+351"},{name:"Qatar",code:"+974"},{name:"Romania",code:"+40"},{name:"Russia",code:"+7"},{name:"Rwanda",code:"+250"},{name:"Saudi Arabia",code:"+966"},{name:"Senegal",code:"+221"},{name:"Serbia",code:"+381"},{name:"Singapore",code:"+65"},{name:"Slovakia",code:"+421"},{name:"Slovenia",code:"+386"},{name:"Solomon Islands",code:"+677"},{name:"Somalia",code:"+252"},{name:"South Africa",code:"+27"},{name:"South Korea",code:"+82"},{name:"Spain",code:"+34"},{name:"Sri Lanka",code:"+94"},{name:"Sudan",code:"+249"},{name:"Suriname",code:"+597"},{name:"Sweden",code:"+46"},{name:"Switzerland",code:"+41"},{name:"Syria",code:"+963"},{name:"Taiwan",code:"+886"},{name:"Tajikistan",code:"+992"},{name:"Tanzania",code:"+255"},{name:"Thailand",code:"+66"},{name:"Togo",code:"+228"},{name:"Tunisia",code:"+216"},{name:"Turkey",code:"+90"},{name:"Turkmenistan",code:"+993"},{name:"Uganda",code:"+256"},{name:"Ukraine",code:"+380"},{name:"United Arab Emirates",code:"+971"},{name:"United Kingdom",code:"+44"},{name:"United States",code:"+1"},{name:"Uruguay",code:"+598"},{name:"Uzbekistan",code:"+998"},{name:"Vanuatu",code:"+678"},{name:"Venezuela",code:"+58"},{name:"Vietnam",code:"+84"},{name:"Yemen",code:"+967"},{name:"Zambia",code:"+260"},{name:"Zimbabwe",code:"+263"}],[]),[fe,Xe]=L.useState(!1),[tt,Me]=L.useState(""),[ot,ut]=L.useState(""),[dt,pt]=L.useState("success"),Ve=Qi.get("user_image"),[Ge,Dt]=L.useState(null),[Lt,It]=L.useState(null),[Ot,en]=L.useState({}),_n=["title","first_name","last_name","gender","date_of_birth","blood_group","resident_status"],Yn=()=>{const Xt={};return _n.forEach(lt=>{(!J[lt]||typeof J[lt]=="string"&&!J[lt].trim())&&(Xt[lt]=!0)}),en(Xt),Object.keys(Xt).length===0},Hn=Im(),{data:hn,loading:on,error:Ue}=hd(Xt=>Xt.cardBloMePage1),{data:We,loading:Pe,error:Bt}=hd(Xt=>Xt.cardBloMePage2),{data:Et,loading:nn,error:yn}=hd(Xt=>Xt.cardBloMePage3),{data:ln,loading:At,error:ke}=hd(Xt=>Xt.cardBloMePage4),{currentUser:ae,loading:ue,error:_e}=hd(Xt=>Xt.user),[Ce,Ae]=L.useState({page1:null,page2:null,page3:null,page4:null});L.useMemo(()=>({page1:ae==null?void 0:ae.card_blo_me_number,page2:ae==null?void 0:ae.card_blo_me_page_2,page3:ae==null?void 0:ae.card_blo_me_page_3,page4:ae==null?void 0:ae.card_blo_me_page_4}),[ae]),L.useEffect(()=>{console.log("Current User from Redux:",ae),console.log("Has Existing Documents:",Ye),Ye&&rt.page1&&Hn(u0(rt.page1)),Ye&&rt.page2&&Hn(ev(rt.page2)),Ye&&rt.page3&&Hn(tv(rt.page3)),Ye&&rt.page4&&Hn(nv(rt.page4))},[ae,Ye,rt,Hn]),L.useEffect(()=>{Ae(Xt=>Ee(te({},Xt),{page1:hn,page2:We,page3:Et,page4:ln})),hn&&It(hn)},[hn,We,Et,ln]),L.useEffect(()=>{We&&(We.table_31&&q(We.table_31),We.table_32&&Q(We.table_32))},[We]),L.useEffect(()=>{Et&&Et.bank_details&&K(Et.bank_details)},[Et]);const[J,nt]=L.useState({naming_series:"CBM-",status:"Drafted",inactive_date:"",inactive_reason:"",title:"",first_name:"",middle_name:"",last_name:"",gender:"",date_of_birth:"",blood_group:"",resident_status:"",portion_nolot_no:"",village:"",town:"",district:"",province:"",country:"Papua New Guinea",po_box:"",postal_code:"",portion_lot_no:"",village_street:"",town1:"",same_as_current:!1,district1:"",province1:"",country1:"Papua New Guinea",po_box1:"",postal_code1:"",personal_country_code:"+675",phone_no:"",personal_email_address:"",office_country_code:"+675",mobile_no:"",office_email:"",place_of_birth:"Hospital",hospital_name:"",village1:"",district2:"",province2:"",qr_code:"",country2:"",location:"",location1:"",check_the_box_if_you_willing_to_provide_your_family_details:!1,mothers_full_name:"",mother_middle_name:"",mother_last_name:"",mother_origin_village:"",mother_district:"",mother_province:"",mother_country:"Papua New Guinea",mother_alive:"Yes",mothers_contact_no:"",mothers_email:"",cause_of_death:"",fathers_full_name:"",father_middle_name:"",father_last_name:"",father_origin_village:"",father_district:"",father_province:"",father_country:"Papua New Guinea",father_alive:"Yes",fathers_contact_no:"",fathers_email:"",father_cause_of_death:"",marital_status:"Married",date:new Date().toISOString().split("T")[0],age:"",height:"",weight:"",bmi:"",abdominal_circumference:"",hip_circumference:"",bp_systolic:"",diastolic:"",pulse_rate:"",blood_sugar:"",prevailing_medical_conditions:"",are_surgical_operation_done_in_the_past:"No",type_of_operation:"",operation_date:"",are_you_taking_medications:"No",blo_me_no:"",emergency_first_name:"",emergency_middle_name:"",emergency_last_name:"",emergency_gender:"",emergency_date_of_birth:"",emergency_blood_group:"",emergency_number:"",emergency_village:"",emergency_district:"",emergency_province:"",emergency_country:"Papua New Guinea",emergency_personal_country_code:"+675",emergency_phone_no:"",emergency_office_country_code:"+675",emergency_phone_no1:"",emergency_personal_email:"",emergency_office_email:"",kin_firstname:"",kin_middlename:"",kin_lastname:"",kin_gender:"",kin_date_of_birth:"",kin_blood_group:"",kin_number:"",kin_village:"",kin_district:"",kin_province:"",kin_country:"Papua New Guinea",kin_personal_country_code:"+675",kin_phone_no:"",kin_office_country_code:"+675",kin_office_phone_no:"",kin_personal_email:"",kin_office_email:"",bank_name:"",branch:"",BH_date:"",blome_no:"",account_no:"",declaration_name:"",signature:"",company:"",department:"",company_physical_address:"",po_box_address:"",employee_type_emailwebsite:"",supervisor_name:"",supervisor_position:"",supervisor_contact:"",supervisor_email:"",server_location:"Others",hr_manager_name:"",hr_manager_contact:"",hr_manager_email_address:"",nature_of_work:"",workplace_hazards:"",work_risk_type:"",alcohol:"No",frequency_of_taking_alcohol:"Never",smoking:"No",frequency_of_smoking:"Never",beteinut:"No",frequency_of_beteinut:"Never"}),Je=L.useCallback((Xt,lt)=>{nt(Ri=>Ee(te({},Ri),{[Xt]:lt}))},[]);L.useEffect(()=>{(hn||We||Et||ln)&&(()=>{let lt=te({},J);hn&&(lt=Ee(te({},lt),{first_name:hn.first_name||"",middle_name:hn.middle_name||"",last_name:hn.last_name||"",gender:hn.gender||"",date_of_birth:hn.date_of_birth||"",blood_group:hn.blood_group||"",district:hn.district||"",district1:hn.district1||"",mobile_no:hn.mobile_no||"",hospital_name:hn.hospital_name||"",district2:hn.district2||"",location:hn.location||"",qr_code:hn.qr_code||"",title:hn.title||"",resident_status:hn.resident_status||"",province:hn.province||"",province1:hn.province1||"",province2:hn.province2||"",postal_code:hn.postal_code||"",postal_code1:hn.postal_code1||"",country:hn.country||"Papua New Guinea",country1:hn.country1||"Papua New Guinea",country2:hn.country2||"Papua New Guinea",office_contact_no_country_code:hn.office_contact_no_country_code?`+${hn.office_contact_no_country_code}`:"+675",personal_contact_no_country_code:hn.personal_contact_no_country_code?`+${hn.personal_contact_no_country_code}`:"+675",personal_email_address:hn.personal_email_address||"",phone_no:hn.phone_no||"",town:hn.town||"",town1:hn.town1||"",village:hn.village||"",village_street:hn.village_street||"",portion_nolot_no:hn.portion_nolot_no||"",portion_lot_no:hn.portion_lot_no||"",po_box:hn.po_box||"",po_box1:hn.po_box1||"",server_location:(hn==null?void 0:hn.server_location)||"",office_email:hn.office_email||"",place_of_birth:hn.place_of_birth||"Hospital",village1:hn.village1||"",location1:hn.location1||""})),We&&(lt=Ee(te({},lt),{check_the_box_if_you_willing_to_provide_your_family_details:We.check_the_box_if_you_willing_to_provide_your_family_details||!1,mothers_full_name:We.mothers_full_name||"",mother_middle_name:We.middle_name||"",mother_last_name:We.last_name||"",mother_origin_village:We.mother_origin_village||"",mother_district:We.district||"",mother_province:We.province||"",mother_country:We.country||"Papua New Guinea",mother_alive:We.mother_alive||"Yes",mothers_contact_no:We.mothers_contact_no||"",mothers_email:We.mothers_email||"",cause_of_death:We.cause_of_death||"",fathers_full_name:We.fathers_full_name||"",father_middle_name:We.middle_name_1||"",father_last_name:We.last_name_1||"",father_origin_village:We.father_origin_village||"",father_district:We.district1||"",father_province:We.province1||"",father_country:We.country1||"Papua New Guinea",father_alive:We.father_alive||"Yes",fathers_contact_no:We.fathers_contact_no||"",fathers_email:We.fathers_email||"",father_cause_of_death:We.cause_ofdeath||"",marital_status:We.marital_status||"Married",date:We.date||new Date().toISOString().split("T")[0],age:We.age?We.age.toString():"",height:We.height||"",weight:We.weight||"",bmi:We.bmi||"",abdominal_circumference:We.abdominal_circumference||"",hip_circumference:We.hip_circumference||"",bp_systolic:We.bp_systolic||"",diastolic:We.diastolic||"",pulse_rate:We.pulse_rate||"",blood_sugar:We.blood_sugar||"",prevailing_medical_conditions:We.prevailing_medical_conditionsdiseases||"",are_surgical_operation_done_in_the_past:We.are_surgical_operation_done_in_the_past||"No",type_of_operation:We.type_of_operation||"",operation_date:We.date1||"",are_you_taking_medications:We.are_you_taking_any_medications_describe||"No",blo_me_no:We.blo_me_no||""})),Et&&(lt=Ee(te({},lt),{bank_details:Et.bank_details||[],emergency_first_name:Et.emergency_first_name||"",emergency_middle_name:Et.emergency_middle_name||"",emergency_last_name:Et.emergency_last_name||"",emergency_gender:Et.emergency_gender||"",emergency_date_of_birth:Et.emergency_date_of_birth||"",emergency_blood_group:Et.emergency_blood_group||"",emergency_number:Et.emergency_number||"",emergency_village:Et.emergency_village||"",emergency_district:Et.emergency_district||"",emergency_province:Et.emergency_province||"",emergency_country:Et.emergency_country||"Papua New Guinea",emergency_personal_country_code:Et.emergency_personal_country_code||"+675",emergency_phone_no:Et.emergency_phone_no||"",emergency_office_country_code:Et.emergency_office_country_code||"+675",emergency_phone_no1:Et.emergency_phone_no1||"",emergency_personal_email:Et.emergency_personal_email||"",emergency_office_email:Et.emergency_office_email||"",kin_firstname:Et.kin_firstname||"",kin_middlename:Et.kin_middlename||"",kin_lastname:Et.kin_lastname||"",kin_gender:Et.kin_gender||"",kin_date_of_birth:Et.kin_date_of_birth||"",kin_blood_group:Et.kin_blood_group||"",kin_number:Et.kin_number||"",kin_village:Et.kin_village||"",kin_district:Et.kin_district||"",kin_province:Et.kin_province||"",kin_country:Et.kin_country||"Papua New Guinea",kin_personal_country_code:Et.kin_personal_country_code||"+675",kin_phone_no:Et.kin_phone_no||"",kin_office_country_code:Et.kin_office_country_code||"+675",kin_office_phone_no:Et.kin_office_phone_no||"",kin_personal_email:Et.kin_personal_email||"",kin_office_email:Et.kin_office_email||"",declaration_name:Et.declaration_name||"",signature:Et.signature||""})),ln&&(lt=Ee(te({},lt),{company:ln.company||"",department:ln.department||"",company_physical_address:ln.company_physical_address||"",po_box_address:ln.po_box_address||"",employee_type_emailwebsite:ln.employee_type_emailwebsite||"",supervisor_name:ln.supervisor_name||"",supervisor_position:ln.supervisor_position||"",supervisor_contact:ln.supervisor_contact||"",supervisor_email:ln.supervisor_email||"",hr_manager_name:ln.hr_manager_name||"",hr_manager_contact:ln.hr_manager_contact||"",hr_manager_email_address:ln.hr_manager_email_address||"",nature_of_work:ln.nature_of_work||"",workplace_hazards:ln.workplace_hazards||"",work_risk_type:ln.work_risk_type||"",alcohol:ln.alcohol||"No",frequency_of_taking_alcohol:ln.frequency_of_taking_alcohol||"Never",smoking:ln.smoking||"No",frequency_of_smoking:ln.frequency_of_smoking||"Never",beteinut:ln.beteinut||"No",frequency_of_beteinut:ln.frequency_of_beteinut||"Never"})),nt(lt),console.log("Form data populated from existing documents:",hn,We,Et,ln,lt)})()},[hn,We,Et,ln]);const jt=L.useMemo(()=>[{id:1,name:"Personal Info",icon:""},{id:2,name:"Health Declaration",icon:""},{id:3,name:"Emergency & Bank",icon:""},{id:4,name:"Employment & Lifestyle",icon:""},{id:5,name:"Final Review",icon:""}],[]),qt=L.useCallback(Xt=>{var lt,Ri,li;switch(Xt){case 1:return((lt=J==null?void 0:J.title)==null?void 0:lt.trim())&&((Ri=J==null?void 0:J.first_name)==null?void 0:Ri.trim())&&((li=J==null?void 0:J.last_name)==null?void 0:li.trim())&&(J==null?void 0:J.gender)&&(J==null?void 0:J.date_of_birth)&&(J==null?void 0:J.resident_status);case 2:return J.check_the_box_if_you_willing_to_provide_your_family_details?J.mother_alive&&J.father_alive&&J.marital_status:J.marital_status;case 3:return J.signature.trim();case 4:return J.alcohol&&J.smoking&&J.frequency_of_smoking&&J.frequency_of_taking_alcohol;default:return!0}},[J]),Ft=(Xt,lt)=>{localStorage.setItem(`cardBloMeForm${Xt}`,JSON.stringify(lt))},bn=L.useCallback(()=>Gt(null,null,function*(){if(!qt(e)||!Yn())return;const Xt=Ee(te({},J),{spouseData:$,childrenData:W,bankData:Z});try{i(!0),Ft(e,Xt),yield new Promise(lt=>setTimeout(lt,1500)),a(lt=>Ee(te({},lt),{[e]:!0})),$a.success(`Form ${e} saved successfully!`),e<5&&t(lt=>Math.min(5,lt+1))}catch(lt){$a.error("Error saving form. Please try again.")}finally{i(!1)}}),[e,J,$,Z,W,qt]),Tn=L.useCallback(Xt=>Gt(null,null,function*(){Xt.preventDefault();try{u(!0);const lt=Ye;lt?(console.log("Updating existing documents..."),yield ct()):(console.log("Creating new documents..."),yield Ut());const Ri={is_submitted:1},li=Qi.get("user_id"),Wi=yield fetch(`/api/resource/User/${li}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Ri)});Me("Application Processed"),ut(lt?"Application Updated Successfully":"Application Created Successfully"),pt("success"),Xe(!0),_(!0)}catch(lt){throw console.error("Submission error:",lt),alert(lt),He(`Error ${Ye?"updating":"creating"} application: ${lt.message}`),new Error(`Error ${Ye?"updating":"creating"} application: ${lt.message}`)}finally{u(!1)}}),[J,Ye]),ct=()=>Gt(null,null,function*(){const Xt={naming_series:J.naming_series,status:J.status,inactive_date:J.inactive_date,inactive_reason:J.inactive_reason,title:J.title,first_name:J.first_name,middle_name:J.middle_name,last_name:J.last_name,gender:J.gender,date_of_birth:J.date_of_birth,blood_group:J.blood_group,resident_status:J.resident_status,portion_nolot_no:J.portion_nolot_no,village:J.village,town:J.town,district:J.district,province:J.province,country:J.country,po_box:J.po_box,postal_code:J.postal_code,portion_lot_no:J.portion_lot_no,village_street:J.village_street,town1:J.town1,district1:J.district1,province1:J.province1,country1:J.country1,po_box1:J.po_box1,postal_code1:J.postal_code1,personal_contact_no_country_code:parseInt(J.personal_country_code.replace("+",""),10),phone_no:J.phone_no,personal_email_address:J.personal_email_address,office_contact_no_country_code:parseInt(J.office_country_code.replace("+",""),10),mobile_no:J.mobile_no,office_email:J.office_email,place_of_birth:J.place_of_birth,hospital_name:J.hospital_name,village1:J.village1,district2:J.district2,province2:J.province2,country2:J.country2,location:J.location,location1:J.location1,server_location:J==null?void 0:J.server_location},lt=yield fetch(`/api/resource/Card Blo Me Page1/${rt.page1}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Xt)});if(!lt.ok)throw He(`Failed to update Page1: ${lt.statusText}`),new Error(`Failed to update Page1: ${lt.statusText}`);const Ri=Ee(te({from1:rt.page1,check_the_box_if_you_willing_to_provide_your_family_details:J.check_the_box_if_you_willing_to_provide_your_family_details?1:0,mothers_full_name:J.mothers_full_name,middle_name:J.mother_middle_name,last_name:J.mother_last_name,mother_origin_village:J.mother_origin_village,district:J.mother_district,province:J.mother_province,country:J.mother_country,mother_alive:J.mother_alive,mothers_contact_no:J.mothers_contact_no,mothers_email:J.mothers_email,cause_of_death:J.cause_of_death,fathers_full_name:J.fathers_full_name,middle_name_1:J.father_middle_name,last_name_1:J.father_last_name,father_origin_village:J.father_origin_village,district1:J.father_district,province1:J.father_province,country1:J.father_country,father_alive:J.father_alive,fathers_contact_no:J.fathers_contact_no,fathers_email:J.fathers_email,cause_ofdeath:J.father_cause_of_death,marital_status:J.marital_status},J.marital_status==="Married"&&{table_31:$,table_32:W}),{date:J.date,age:parseInt(J.age)||0,height:J.height,weight:J.weight,bmi:J.bmi,abdominal_circumference:J.abdominal_circumference,hip_circumference:J.hip_circumference,bp_systolic:J.bp_systolic,diastolic:J.diastolic,pulse_rate:J.pulse_rate,blood_sugar:J.blood_sugar,prevailing_medical_conditionsdiseases:J.prevailing_medical_conditions,are_surgical_operation_done_in_the_past:J.are_surgical_operation_done_in_the_past,type_of_operation:J.type_of_operation,date1:J.operation_date,are_you_taking_any_medications_describe:J.are_you_taking_medications,blo_me_no:J.blo_me_no}),li=yield fetch(`/api/resource/Card Blo Me Page2/${rt.page2}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Ri)});if(!li.ok)throw He(`Failed to update Page2: ${li.statusText}`),new Error(`Failed to update Page2: ${li.statusText}`);console.log("bankData before update call:",Z),yield wt(),yield Wt()}),wt=()=>Gt(null,null,function*(){let Xt=localStorage.getItem("cardBloMeForm3");const lt={from2:rt.page2,from1:rt.page1,bank_details:Xt?JSON.parse(Xt).bankData:Z,emergency_first_name:J.emergency_first_name,emergency_middle_name:J.emergency_middle_name,emergency_last_name:J.emergency_last_name,emergency_gender:J.emergency_gender,emergency_date_of_birth:J.emergency_date_of_birth,emergency_blood_group:J.emergency_blood_group,emergency_number:J.emergency_number,emergency_village:J.emergency_village,emergency_district:J.emergency_district,emergency_province:J.emergency_province,emergency_country:J.emergency_country,emergency_personal_country_code:J.emergency_personal_country_code,emergency_phone_no:J.emergency_phone_no,emergency_office_country_code:J.emergency_office_country_code,emergency_phone_no1:J.emergency_phone_no1,emergency_personal_email:J.emergency_personal_email,emergency_office_email:J.emergency_office_email,kin_firstname:J.kin_firstname,kin_middlename:J.kin_middlename,kin_lastname:J.kin_lastname,kin_gender:J.kin_gender,kin_date_of_birth:J.kin_date_of_birth,kin_blood_group:J.kin_blood_group,kin_number:J.kin_number,kin_village:J.kin_village,kin_district:J.kin_district,kin_province:J.kin_province,kin_country:J.kin_country,kin_personal_country_code:J.kin_personal_country_code,kin_phone_no:J.kin_phone_no,kin_office_country_code:J.kin_office_country_code,kin_office_phone_no:J.kin_office_phone_no,kin_personal_email:J.kin_personal_email,kin_office_email:J.kin_office_email,declaration_name:J.declaration_name,signature:J.signature};console.log("form data..............",Z);const Ri=yield fetch(`/api/resource/Card Blo Me Page3/${rt.page3}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(lt)});let li=yield Ri.json();if(console.log("Update Page3 response:",li),!Ri.ok)throw He(`Failed to update Page3: ${Ri.statusText}`),new Error(`Failed to update Page3: ${Ri.statusText}`)}),Wt=()=>Gt(null,null,function*(){const Xt={from3:rt.page3,from1:rt.page1,company:J.company,department:J.department,company_physical_address:J.company_physical_address,po_box_address:J.po_box_address,employee_type_emailwebsite:J.employee_type_emailwebsite,supervisor_name:J.supervisor_name,supervisor_position:J.supervisor_position,supervisor_contact:J.supervisor_contact,supervisor_email:J.supervisor_email,hr_manager_contact:J.hr_manager_contact,hr_manager_email_address:J.hr_manager_email_address,nature_of_work:J.nature_of_work,workplace_hazards:J.workplace_hazards,work_risk_type:J.work_risk_type,alcohol:J.alcohol,frequency_of_taking_alcohol:J.frequency_of_taking_alcohol,smoking:J.smoking,frequency_of_smoking:J.frequency_of_smoking,beteinut:J.beteinut,frequency_of_beteinut:J.frequency_of_beteinut},lt=yield fetch(`/api/resource/Card Blo Me Page 4/${rt.page4}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Xt)});if(!lt.ok)throw He(`Failed to update Page4: ${lt.statusText}`),new Error(`Failed to update Page4: ${lt.statusText}`)}),Ut=()=>Gt(null,null,function*(){const Xt=localStorage.getItem("cardBloMeForm1"),lt=JSON.parse(Xt);console.warn("PArsed Data",lt);const Ri={naming_series:J.naming_series,status:J.status,inactive_date:J.inactive_date,inactive_reason:J.inactive_reason,title:J.title,first_name:J.first_name,middle_name:J.middle_name,last_name:J.last_name,gender:J.gender,date_of_birth:J.date_of_birth,blood_group:J.blood_group,resident_status:J.resident_status,portion_nolot_no:J.portion_nolot_no,village:J.village,town:J.town,district:J.district,province:J.province,country:J.country,po_box:J.po_box,postal_code:J.postal_code,portion_lot_no:J.portion_lot_no,village_street:J.village_street,town1:J.town1,district1:J.district1,province1:J.province1,country1:J.country1,po_box1:J.po_box1,postal_code1:J.postal_code1,personal_contact_no_country_code:parseInt(J.personal_country_code.replace("+",""),10),phone_no:J.phone_no,personal_email_address:J.personal_email_address,office_contact_no_country_code:parseInt(J.office_country_code.replace("+",""),10),mobile_no:J.mobile_no,office_email:J.office_email,place_of_birth:J.place_of_birth,hospital_name:J.hospital_name,village1:J.village1,district2:J.district2,province2:J.province2,country2:J.country2,location:J.location,location1:J.location1,server_location:J.server_location},li=Qi.get("user_id"),Wi=yield fetch("/api/resource/Card Blo Me Page1",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Ri)});if(!Wi.ok){const ti=yield Wi.text();throw He(`Step 1 failed: ${Wi.status} ${Wi.statusText} - ${ti}`),new Error(`Step 1 failed: ${Wi.status} ${Wi.statusText} - ${ti}`)}const ds=yield Wi.json(),tn=ds.data.name;console.log("Result from Step 1:",tn);const ei=Ee(te({from1:tn,check_the_box_if_you_willing_to_provide_your_family_details:J.check_the_box_if_you_willing_to_provide_your_family_details?1:0,mothers_full_name:J.mothers_full_name,middle_name:J.mother_middle_name,last_name:J.mother_last_name,mother_origin_village:J.mother_origin_village,district:J.mother_district,province:J.mother_province,country:J.mother_country,mother_alive:J.mother_alive,mothers_contact_no:J.mothers_contact_no,mothers_email:J.mothers_email,cause_of_death:J.cause_of_death,fathers_full_name:J.fathers_full_name,middle_name_1:J.father_middle_name,last_name_1:J.father_last_name,father_origin_village:J.father_origin_village,district1:J.father_district,province1:J.father_province,country1:J.father_country,father_alive:J.father_alive,fathers_contact_no:J.fathers_contact_no,fathers_email:J.fathers_email,cause_ofdeath:J.father_cause_of_death,marital_status:J.marital_status},J.marital_status==="Married"&&{table_31:$,table_32:W}),{date:J.date,age:parseInt(J.age)||0,height:J.height,weight:J.weight,bmi:J.bmi,abdominal_circumference:J.abdominal_circumference,hip_circumference:J.hip_circumference,bp_systolic:J.bp_systolic,diastolic:J.diastolic,pulse_rate:J.pulse_rate,blood_sugar:J.blood_sugar,prevailing_medical_conditionsdiseases:J.prevailing_medical_conditions,are_surgical_operation_done_in_the_past:J.are_surgical_operation_done_in_the_past,type_of_operation:J.type_of_operation,date1:J.operation_date,are_you_taking_any_medications_describe:J.are_you_taking_medications,blo_me_no:J.blo_me_no}),On=yield fetch("/api/resource/Card Blo Me Page2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(ei)});if(!On.ok){const ti=yield On.text();throw He(`Step 2 failed: ${On.status} ${On.statusText} - ${ti}`),new Error(`Step 2 failed: ${On.status} ${On.statusText} - ${ti}`)}const Ii=(yield On.json()).data.name,Xr={from2:Ii,from1:tn,emergency_first_name:J.emergency_first_name,emergency_middle_name:J.emergency_middle_name,emergency_last_name:J.emergency_last_name,emergency_gender:J.emergency_gender,emergency_date_of_birth:J.emergency_date_of_birth,emergency_blood_group:J.emergency_blood_group,emergency_number:J.emergency_number,emergency_village:J.emergency_village,emergency_district:J.emergency_district,emergency_province:J.emergency_province,emergency_country:J.emergency_country,emergency_personal_country_code:J.emergency_personal_country_code,emergency_phone_no:J.emergency_phone_no,emergency_office_country_code:J.emergency_office_country_code,emergency_phone_no1:J.emergency_phone_no1,emergency_personal_email:J.emergency_personal_email,emergency_office_email:J.emergency_office_email,kin_firstname:J.kin_firstname,kin_middlename:J.kin_middlename,kin_lastname:J.kin_lastname,kin_gender:J.kin_gender,kin_date_of_birth:J.kin_date_of_birth,kin_blood_group:J.kin_blood_group,kin_number:J.kin_number,kin_village:J.kin_village,kin_district:J.kin_district,kin_province:J.kin_province,kin_country:J.kin_country,kin_personal_country_code:J.kin_personal_country_code,kin_phone_no:J.kin_phone_no,kin_office_country_code:J.kin_office_country_code,kin_office_phone_no:J.kin_office_phone_no,kin_personal_email:J.kin_personal_email,kin_office_email:J.kin_office_email,bank_details:Z,declaration_name:J.declaration_name,signature:J.signature},Vn=yield fetch("/api/resource/Card Blo Me Page3",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Xr)});if(!Vn.ok){const ti=yield Vn.text();throw He(`Step 3 failed: ${Vn.status} ${Vn.statusText} - ${ti}`),new Error(`Step 3 failed: ${Vn.status} ${Vn.statusText} - ${ti}`)}const Rr=(yield Vn.json()).data.name,da={from3:Rr,from1:tn,company:J.company,department:J.department,company_physical_address:J.company_physical_address,po_box_address:J.po_box_address,employee_type_emailwebsite:J.employee_type_emailwebsite,supervisor_name:J.supervisor_name,supervisor_position:J.supervisor_position,supervisor_contact:J.supervisor_contact,supervisor_email:J.supervisor_email,hr_manager_contact:J.hr_manager_contact,hr_manager_email_address:J.hr_manager_email_address,nature_of_work:J.nature_of_work,workplace_hazards:J.workplace_hazards,work_risk_type:J.work_risk_type,alcohol:J.alcohol,frequency_of_taking_alcohol:J.frequency_of_taking_alcohol,smoking:J.smoking,frequency_of_smoking:J.frequency_of_smoking,beteinut:J.beteinut,frequency_of_beteinut:J.frequency_of_beteinut},hs=yield fetch("/api/resource/Card Blo Me Page 4",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(da)});if(!hs.ok){const ti=yield hs.text();throw He(`Step 4 failed: ${hs.status} ${hs.statusText} - ${ti}`),new Error(`Step 4 failed: ${hs.status} ${hs.statusText} - ${ti}`)}const ka=(yield hs.json()).data.name;Hn(u0(tn)),console.log("All submissions completed successfully!"),console.log("Document IDs created:",{page1:tn,page2:Ii,page3:Rr,page4:ka});const Di={card_blo_me_number:tn,card_blo_me_page_2:Ii,card_blo_me_page_3:Rr,card_blo_me_page_4:ka,is_submitted:1};console.log("Updating User with Card Blo Me Number:",Di);const ts=yield fetch(`/api/resource/User/${li}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Di)});if(ts.ok)console.log("User updated with Card Blo Me Number:",ds.data.name);else{const ti=yield ts.text();throw He(`Failed to update user: ${ts.status} ${ts.statusText} - ${ti}`),console.error(`Failed to update user: ${ts.status} ${ts.statusText} - ${ti}`),new Error(`Failed to update user: ${ts.status} ${ts.statusText} - ${ti}`)}}),vn=L.useCallback(()=>{const Xt=window.open("","_blank");new Date().toLocaleDateString();const lt=wJ(J,$,W);Xt.document.write(lt),Xt.document.close(),Xt.onload=function(){Xt.print(),Xt.close()}},[J]),Gi=L.useCallback(()=>{const Xt=window.open("","_blank"),lt=new Date().toLocaleDateString(),Ri=SJ(J,[],[],[],lt,Ve,ae==null?void 0:ae.card_blo_me_number);Xt.document.write(Ri),Xt.document.close(),Xt.onload=function(){Xt.print(),Xt.close()}},[J]),Jn=L.useMemo(()=>({formData:J,handleChange:Je,countries:Nt,formErrors:Ot,profilePicture:A,profileUrl:z,handleProfilePictureChange:Rt,uploadProfilePicture:et,spouseData:$,setSpouseData:q,childrenData:W,setChildrenData:Q,bankData:Z,setBankData:K}),[J,Je,Nt,Ot,A,z,$,W,Z,K]),ai=L.useCallback(()=>{switch(console.log("Rendering form:",e),e){case 1:return l.jsx(TN,te({},Jn));case 2:return l.jsx(yJ,Ee(te({},Jn),{spouseData:$,setSpouseData:q,childrenData:W,setChildrenData:Q}));case 3:return l.jsx(xJ,Ee(te({},Jn),{bankData:Z,setBankData:K}));case 4:return l.jsx(_J,te({},Jn));case 5:return l.jsx(bJ,te({},Jn));default:return l.jsx(TN,te({},Jn))}},[e,Jn]),qn=Xt=>Gt(null,null,function*(){try{const lt=new Headers;lt.append("Authorization","token 508b6fa8bc5d7b1:2b6e1c5b9eedebe");const Ri={method:"GET",headers:lt,redirect:"follow"};fetch(`/api/resource/Card Blo Me Page1/${Xt}`,Ri).then(li=>li.json()).then(li=>{It(li==null?void 0:li.data),console.log("Fetched Card Blo Me data:",li==null?void 0:li.data)}).catch(li=>{throw He(li),new Error(li);console.error(li)})}catch(lt){throw He(`Error fetching Card Blo Me data: ${lt}`),console.error("Error fetching Card Blo Me data:",lt),new Error(`Error fetching Card Blo Me data: ${lt}`)}});L.useEffect(()=>{Ge!=null&&Ge.card_blo_me_number&&(console.log("card number",Ge.card_blo_me_number),qn(Ge.card_blo_me_number))},[Ge]),L.useEffect(()=>{Et!=null&&Et.bankdetails&&!le&&(K(Et.bankdetails),ge(!0))},[Et,le]),console.log("bankData in parent:",Z);const Bn=()=>Gt(null,null,function*(){try{const Xt={is_submitted:0},lt=Qi.get("user_id");(yield fetch(`/api/resource/User/${lt}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Xt)}))&&_(!1)}catch(Xt){throw console.log(Xt),He(Xt),new Error(Xt)}}),yi=on||Pe||nn||At;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"main-container",children:[l.jsx("div",{className:"form-navigation",children:jt.filter(Xt=>g?Xt.id===5:!0).map(Xt=>l.jsxs("button",{onClick:()=>{console.log("page id:",Xt.id)},className:`form-nav-btn ${e===Xt.id?"active":"inactive"}`,children:[l.jsx("span",{style:{fontSize:"1.1rem"},children:Xt.icon}),l.jsx("span",{children:Xt.name})]},Xt.id))}),l.jsxs("div",{className:"progress-container",children:[l.jsxs("div",{className:"progress-header",children:[l.jsx("span",{className:"progress-text",children:"Progress"}),l.jsxs("span",{className:"progress-text",children:[e,"/5"]})]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-fill",style:{width:`${e/5*100}%`}})})]}),yi&&l.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"20px"},children:l.jsx("div",{children:"Loading form data..."})}),l.jsxs("form",{onSubmit:e===5?Tn:Xt=>Xt.preventDefault(),children:[!yi&&ai(),l.jsxs("div",{className:"navigation-buttons",children:[!g&&l.jsx("button",{type:"button",onClick:()=>t(Xt=>Math.max(1,Xt-1)),disabled:e===1,className:"btn btn-previous",children:" Previous"}),g&&l.jsx("button",{type:"button",className:"btn btn-edit",onClick:()=>{_(!1),t(1),Bn()},children:" Edit"}),e<5?l.jsxs("div",{className:"action-buttons",children:[l.jsx("button",{type:"button",onClick:bn,disabled:n||!qt(e),className:"btn btn-save",children:n?"Saving...":" Save Progress"}),l.jsx("button",{type:"button",onClick:()=>t(Xt=>Math.min(5,Xt+1)),disabled:!c[e],className:"btn btn-next",style:{opacity:c[e]?1:.5,cursor:c[e]?"pointer":"not-allowed"},children:"Next "})]}):l.jsxs("div",{className:"action-buttons",children:[g&&l.jsx("button",{type:"button",onClick:vn,className:"btn btn-print",children:" Print Application"}),g&&l.jsx("button",{type:"button",onClick:Gi,className:"btn btn-print",children:" Print Card"}),!g&&l.jsx("button",{type:"submit",disabled:o,className:"btn btn-submit",children:o?"Submitting...":" Submit Application"})]})]}),e<5&&!c[e]&&l.jsx("p",{style:{color:"red",marginTop:"1rem"},children:"Please complete all required fields before saving."})]}),!1]}),l.jsx(vJ,{visible:fe,onClose:()=>Xe(!1),title:tt,message:ot.split(`
`).map((Xt,lt)=>l.jsxs(Pt.Fragment,{children:[Xt,l.jsx("br",{})]},lt)),type:dt})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function h_(e){return e+.5|0}const If=(e,t,n)=>Math.max(Math.min(e,n),t);function n0(e){return If(h_(e*2.55),0,255)}function Bf(e){return If(h_(e*255),0,255)}function mh(e){return If(h_(e/2.55)/100,0,1)}function EN(e){return If(h_(e*100),0,100)}const mc={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bj=[..."0123456789ABCDEF"],jJ=e=>bj[e&15],CJ=e=>bj[(e&240)>>4]+bj[e&15],Cb=e=>(e&240)>>4===(e&15),TJ=e=>Cb(e.r)&&Cb(e.g)&&Cb(e.b)&&Cb(e.a);function kJ(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&mc[e[1]]*17,g:255&mc[e[2]]*17,b:255&mc[e[3]]*17,a:t===5?mc[e[4]]*17:255}:(t===7||t===9)&&(n={r:mc[e[1]]<<4|mc[e[2]],g:mc[e[3]]<<4|mc[e[4]],b:mc[e[5]]<<4|mc[e[6]],a:t===9?mc[e[7]]<<4|mc[e[8]]:255})),n}const EJ=(e,t)=>e<255?t(e):"";function MJ(e){var t=TJ(e)?jJ:CJ;return e?"#"+t(e.r)+t(e.g)+t(e.b)+EJ(e.a,t):void 0}const NJ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fD(e,t,n){const i=t*Math.min(n,1-n),o=(u,c=(u+e/30)%12)=>n-i*Math.max(Math.min(c-3,9-c,1),-1);return[o(0),o(8),o(4)]}function AJ(e,t,n){const i=(o,u=(o+e/60)%6)=>n-n*t*Math.max(Math.min(u,4-u,1),0);return[i(5),i(3),i(1)]}function PJ(e,t,n){const i=fD(e,1,.5);let o;for(t+n>1&&(o=1/(t+n),t*=o,n*=o),o=0;o<3;o++)i[o]*=1-t-n,i[o]+=t;return i}function RJ(e,t,n,i,o){return e===o?(t-n)/i+(t<n?6:0):t===o?(n-e)/i+2:(e-t)/i+4}function jT(e){const n=e.r/255,i=e.g/255,o=e.b/255,u=Math.max(n,i,o),c=Math.min(n,i,o),a=(u+c)/2;let g,_,S;return u!==c&&(S=u-c,_=a>.5?S/(2-u-c):S/(u+c),g=RJ(n,i,o,S,u),g=g*60+.5),[g|0,_||0,a]}function CT(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Bf)}function TT(e,t,n){return CT(fD,e,t,n)}function DJ(e,t,n){return CT(PJ,e,t,n)}function zJ(e,t,n){return CT(AJ,e,t,n)}function pD(e){return(e%360+360)%360}function IJ(e){const t=NJ.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?n0(+t[5]):Bf(+t[5]));const o=pD(+t[2]),u=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=DJ(o,u,c):t[1]==="hsv"?i=zJ(o,u,c):i=TT(o,u,c),{r:i[0],g:i[1],b:i[2],a:n}}function OJ(e,t){var n=jT(e);n[0]=pD(n[0]+t),n=TT(n),e.r=n[0],e.g=n[1],e.b=n[2]}function FJ(e){if(!e)return;const t=jT(e),n=t[0],i=EN(t[1]),o=EN(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${o}%, ${mh(e.a)})`:`hsl(${n}, ${i}%, ${o}%)`}const MN={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},NN={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function LJ(){const e={},t=Object.keys(NN),n=Object.keys(MN);let i,o,u,c,a;for(i=0;i<t.length;i++){for(c=a=t[i],o=0;o<n.length;o++)u=n[o],a=a.replace(u,MN[u]);u=parseInt(NN[c],16),e[a]=[u>>16&255,u>>8&255,u&255]}return e}let Tb;function BJ(e){Tb||(Tb=LJ(),Tb.transparent=[0,0,0,0]);const t=Tb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const VJ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function UJ(e){const t=VJ.exec(e);let n=255,i,o,u;if(t){if(t[7]!==i){const c=+t[7];n=t[8]?n0(c):If(c*255,0,255)}return i=+t[1],o=+t[3],u=+t[5],i=255&(t[2]?n0(i):If(i,0,255)),o=255&(t[4]?n0(o):If(o,0,255)),u=255&(t[6]?n0(u):If(u,0,255)),{r:i,g:o,b:u,a:n}}}function $J(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${mh(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const O2=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,$g=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function HJ(e,t,n){const i=$g(mh(e.r)),o=$g(mh(e.g)),u=$g(mh(e.b));return{r:Bf(O2(i+n*($g(mh(t.r))-i))),g:Bf(O2(o+n*($g(mh(t.g))-o))),b:Bf(O2(u+n*($g(mh(t.b))-u))),a:e.a+n*(t.a-e.a)}}function kb(e,t,n){if(e){let i=jT(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=TT(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function mD(e,t){return e&&Object.assign(t||{},e)}function AN(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Bf(e[3]))):(t=mD(e,{r:0,g:0,b:0,a:1}),t.a=Bf(t.a)),t}function qJ(e){return e.charAt(0)==="r"?UJ(e):IJ(e)}class F0{constructor(t){if(t instanceof F0)return t;const n=typeof t;let i;n==="object"?i=AN(t):n==="string"&&(i=kJ(t)||BJ(t)||qJ(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=mD(this._rgb);return t&&(t.a=mh(t.a)),t}set rgb(t){this._rgb=AN(t)}rgbString(){return this._valid?$J(this._rgb):void 0}hexString(){return this._valid?MJ(this._rgb):void 0}hslString(){return this._valid?FJ(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,o=t.rgb;let u;const c=n===u?.5:n,a=2*c-1,g=i.a-o.a,_=((a*g===-1?a:(a+g)/(1+a*g))+1)/2;u=1-_,i.r=255&_*i.r+u*o.r+.5,i.g=255&_*i.g+u*o.g+.5,i.b=255&_*i.b+u*o.b+.5,i.a=c*i.a+(1-c)*o.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=HJ(this._rgb,t._rgb,n)),this}clone(){return new F0(this.rgb)}alpha(t){return this._rgb.a=Bf(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=h_(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return kb(this._rgb,2,t),this}darken(t){return kb(this._rgb,2,-t),this}saturate(t){return kb(this._rgb,1,t),this}desaturate(t){return kb(this._rgb,1,-t),this}rotate(t){return OJ(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function dh(){}const GJ=(()=>{let e=0;return()=>e++})();function Fi(e){return e==null}function ir(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Vi(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function vr(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function zl(e,t){return vr(e)?e:t}function bi(e,t){return typeof e=="undefined"?t:e}const WJ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,gD=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ws(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function vs(e,t,n,i){let o,u,c;if(ir(e))for(u=e.length,o=0;o<u;o++)t.call(n,e[o],o);else if(Vi(e))for(c=Object.keys(e),u=c.length,o=0;o<u;o++)t.call(n,e[c[o]],c[o])}function i1(e,t){let n,i,o,u;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(o=e[n],u=t[n],o.datasetIndex!==u.datasetIndex||o.index!==u.index)return!1;return!0}function s1(e){if(ir(e))return e.map(s1);if(Vi(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let o=0;for(;o<i;++o)t[n[o]]=s1(e[n[o]]);return t}return e}function yD(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function ZJ(e,t,n,i){if(!yD(e))return;const o=t[e],u=n[e];Vi(o)&&Vi(u)?L0(o,u,i):t[e]=s1(u)}function L0(e,t,n){const i=ir(t)?t:[t],o=i.length;if(!Vi(e))return e;n=n||{};const u=n.merger||ZJ;let c;for(let a=0;a<o;++a){if(c=i[a],!Vi(c))continue;const g=Object.keys(c);for(let _=0,S=g.length;_<S;++_)u(g[_],e,c,n)}return e}function y0(e,t){return L0(e,t,{merger:YJ})}function YJ(e,t,n){if(!yD(e))return;const i=t[e],o=n[e];Vi(i)&&Vi(o)?y0(i,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=s1(o))}const PN={"":e=>e,x:e=>e.x,y:e=>e.y};function XJ(e){const t=e.split("."),n=[];let i="";for(const o of t)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function KJ(e){const t=XJ(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function Wf(e,t){return(PN[t]||(PN[t]=KJ(t)))(e)}function kT(e){return e.charAt(0).toUpperCase()+e.slice(1)}const B0=e=>typeof e!="undefined",Zf=e=>typeof e=="function",RN=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function QJ(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ss=Math.PI,Qs=2*ss,JJ=Qs+ss,r1=Number.POSITIVE_INFINITY,eee=ss/180,Nr=ss/2,Qp=ss/4,DN=ss*2/3,Of=Math.log10,bd=Math.sign;function x0(e,t,n){return Math.abs(e-t)<n}function zN(e){const t=Math.round(e);e=x0(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Of(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function tee(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((o,u)=>o-u).pop(),t}function nee(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function my(e){return!nee(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function iee(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function xD(e,t,n){let i,o,u;for(i=0,o=e.length;i<o;i++)u=e[i][n],isNaN(u)||(t.min=Math.min(t.min,u),t.max=Math.max(t.max,u))}function yu(e){return e*(ss/180)}function ET(e){return e*(180/ss)}function IN(e){if(!vr(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function _D(e,t){const n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);let u=Math.atan2(i,n);return u<-.5*ss&&(u+=Qs),{angle:u,distance:o}}function vj(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function see(e,t){return(e-t+JJ)%Qs-ss}function po(e){return(e%Qs+Qs)%Qs}function V0(e,t,n,i){const o=po(e),u=po(t),c=po(n),a=po(u-o),g=po(c-o),_=po(o-u),S=po(o-c);return o===u||o===c||i&&u===c||a>g&&_<S}function Ta(e,t,n){return Math.max(t,Math.min(n,e))}function ree(e){return Ta(e,-32768,32767)}function yh(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function MT(e,t,n){n=n||(c=>e[c]<t);let i=e.length-1,o=0,u;for(;i-o>1;)u=o+i>>1,n(u)?o=u:i=u;return{lo:o,hi:i}}const xh=(e,t,n,i)=>MT(e,n,i?o=>{const u=e[o][t];return u<n||u===n&&e[o+1][t]===n}:o=>e[o][t]<n),aee=(e,t,n)=>MT(e,n,i=>e[i][t]>=n);function oee(e,t,n){let i=0,o=e.length;for(;i<o&&e[i]<t;)i++;for(;o>i&&e[o-1]>n;)o--;return i>0||o<e.length?e.slice(i,o):e}const bD=["push","pop","shift","splice","unshift"];function lee(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),bD.forEach(n=>{const i="_onData"+kT(n),o=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...u){const c=o.apply(this,u);return e._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...u)}),c}})})}function ON(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,o=i.indexOf(t);o!==-1&&i.splice(o,1),!(i.length>0)&&(bD.forEach(u=>{delete e[u]}),delete e._chartjs)}function vD(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const wD=function(){return typeof window=="undefined"?function(e){return e()}:window.requestAnimationFrame}();function SD(e,t){let n=[],i=!1;return function(...o){n=o,i||(i=!0,wD.call(window,()=>{i=!1,e.apply(t,n)}))}}function cee(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const NT=e=>e==="start"?"left":e==="end"?"right":"center",ho=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,uee=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function jD(e,t,n){const i=t.length;let o=0,u=i;if(e._sorted){const{iScale:c,vScale:a,_parsed:g}=e,_=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,S=c.axis,{min:E,max:A,minDefined:N,maxDefined:z}=c.getUserBounds();if(N){if(o=Math.min(xh(g,S,E).lo,n?i:xh(t,S,c.getPixelForValue(E)).lo),_){const B=g.slice(0,o+1).reverse().findIndex($=>!Fi($[a.axis]));o-=Math.max(0,B)}o=Ta(o,0,i-1)}if(z){let B=Math.max(xh(g,c.axis,A,!0).hi+1,n?0:xh(t,S,c.getPixelForValue(A),!0).hi+1);if(_){const $=g.slice(B-1).findIndex(q=>!Fi(q[a.axis]));B+=Math.max(0,$)}u=Ta(B,o,i)-o}else u=i-o}return{start:o,count:u}}function CD(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,o={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=o,!0;const u=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,o),u}const Eb=e=>e===0||e===1,FN=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Qs/n)),LN=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Qs/n)+1,_0={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Nr)+1,easeOutSine:e=>Math.sin(e*Nr),easeInOutSine:e=>-.5*(Math.cos(ss*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Eb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Eb(e)?e:FN(e,.075,.3),easeOutElastic:e=>Eb(e)?e:LN(e,.075,.3),easeInOutElastic(e){return Eb(e)?e:e<.5?.5*FN(e*2,.1125,.45):.5+.5*LN(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-_0.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?_0.easeInBounce(e*2)*.5:_0.easeOutBounce(e*2-1)*.5+.5};function AT(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function BN(e){return AT(e)?e:new F0(e)}function F2(e){return AT(e)?e:new F0(e).saturate(.5).darken(.1).hexString()}const dee=["x","y","borderWidth","radius","tension"],hee=["color","borderColor","backgroundColor"];function fee(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:hee},numbers:{type:"number",properties:dee}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function pee(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const VN=new Map;function mee(e,t){t=t||{};const n=e+JSON.stringify(t);let i=VN.get(n);return i||(i=new Intl.NumberFormat(e,t),VN.set(n,i)),i}function f_(e,t,n){return mee(t,n).format(e)}const TD={values(e){return ir(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let o,u=e;if(n.length>1){const _=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(_<1e-4||_>1e15)&&(o="scientific"),u=gee(e,n)}const c=Of(Math.abs(u)),a=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),g={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(g,this.options.ticks.format),f_(e,i,g)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Of(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?TD.numeric.call(this,e,t,n):""}};function gee(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var W1={formatters:TD};function yee(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:W1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Am=Object.create(null),wj=Object.create(null);function b0(e,t){if(!t)return e;const n=t.split(".");for(let i=0,o=n.length;i<o;++i){const u=n[i];e=e[u]||(e[u]=Object.create(null))}return e}function L2(e,t,n){return typeof t=="string"?L0(b0(e,t),n):L0(b0(e,""),t)}class xee{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,o)=>F2(o.backgroundColor),this.hoverBorderColor=(i,o)=>F2(o.borderColor),this.hoverColor=(i,o)=>F2(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return L2(this,t,n)}get(t){return b0(this,t)}describe(t,n){return L2(wj,t,n)}override(t,n){return L2(Am,t,n)}route(t,n,i,o){const u=b0(this,t),c=b0(this,i),a="_"+n;Object.defineProperties(u,{[a]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const g=this[a],_=c[o];return Vi(g)?Object.assign({},_,g):bi(g,_)},set(g){this[a]=g}}})}apply(t){t.forEach(n=>n(this))}}var rr=new xee({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[fee,pee,yee]);function _ee(e){return!e||Fi(e.size)||Fi(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function a1(e,t,n,i,o){let u=t[o];return u||(u=t[o]=e.measureText(o).width,n.push(o)),u>i&&(i=u),i}function bee(e,t,n,i){i=i||{};let o=i.data=i.data||{},u=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(o=i.data={},u=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let c=0;const a=n.length;let g,_,S,E,A;for(g=0;g<a;g++)if(E=n[g],E!=null&&!ir(E))c=a1(e,o,u,c,E);else if(ir(E))for(_=0,S=E.length;_<S;_++)A=E[_],A!=null&&!ir(A)&&(c=a1(e,o,u,c,A));e.restore();const N=u.length/2;if(N>n.length){for(g=0;g<N;g++)delete o[u[g]];u.splice(0,N)}return c}function Jp(e,t,n){const i=e.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((t-o)*i)/i+o}function UN(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Sj(e,t,n,i){kD(e,t,n,i,null)}function kD(e,t,n,i,o){let u,c,a,g,_,S,E,A;const N=t.pointStyle,z=t.rotation,B=t.radius;let $=(z||0)*eee;if(N&&typeof N=="object"&&(u=N.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate($),e.drawImage(N,-N.width/2,-N.height/2,N.width,N.height),e.restore();return}if(!(isNaN(B)||B<=0)){switch(e.beginPath(),N){default:o?e.ellipse(n,i,o/2,B,0,0,Qs):e.arc(n,i,B,0,Qs),e.closePath();break;case"triangle":S=o?o/2:B,e.moveTo(n+Math.sin($)*S,i-Math.cos($)*B),$+=DN,e.lineTo(n+Math.sin($)*S,i-Math.cos($)*B),$+=DN,e.lineTo(n+Math.sin($)*S,i-Math.cos($)*B),e.closePath();break;case"rectRounded":_=B*.516,g=B-_,c=Math.cos($+Qp)*g,E=Math.cos($+Qp)*(o?o/2-_:g),a=Math.sin($+Qp)*g,A=Math.sin($+Qp)*(o?o/2-_:g),e.arc(n-E,i-a,_,$-ss,$-Nr),e.arc(n+A,i-c,_,$-Nr,$),e.arc(n+E,i+a,_,$,$+Nr),e.arc(n-A,i+c,_,$+Nr,$+ss),e.closePath();break;case"rect":if(!z){g=Math.SQRT1_2*B,S=o?o/2:g,e.rect(n-S,i-g,2*S,2*g);break}$+=Qp;case"rectRot":E=Math.cos($)*(o?o/2:B),c=Math.cos($)*B,a=Math.sin($)*B,A=Math.sin($)*(o?o/2:B),e.moveTo(n-E,i-a),e.lineTo(n+A,i-c),e.lineTo(n+E,i+a),e.lineTo(n-A,i+c),e.closePath();break;case"crossRot":$+=Qp;case"cross":E=Math.cos($)*(o?o/2:B),c=Math.cos($)*B,a=Math.sin($)*B,A=Math.sin($)*(o?o/2:B),e.moveTo(n-E,i-a),e.lineTo(n+E,i+a),e.moveTo(n+A,i-c),e.lineTo(n-A,i+c);break;case"star":E=Math.cos($)*(o?o/2:B),c=Math.cos($)*B,a=Math.sin($)*B,A=Math.sin($)*(o?o/2:B),e.moveTo(n-E,i-a),e.lineTo(n+E,i+a),e.moveTo(n+A,i-c),e.lineTo(n-A,i+c),$+=Qp,E=Math.cos($)*(o?o/2:B),c=Math.cos($)*B,a=Math.sin($)*B,A=Math.sin($)*(o?o/2:B),e.moveTo(n-E,i-a),e.lineTo(n+E,i+a),e.moveTo(n+A,i-c),e.lineTo(n-A,i+c);break;case"line":c=o?o/2:Math.cos($)*B,a=Math.sin($)*B,e.moveTo(n-c,i-a),e.lineTo(n+c,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos($)*(o?o/2:B),i+Math.sin($)*B);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function _h(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Z1(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Y1(e){e.restore()}function vee(e,t,n,i,o){if(!t)return e.lineTo(n.x,n.y);if(o==="middle"){const u=(t.x+n.x)/2;e.lineTo(u,t.y),e.lineTo(u,n.y)}else o==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function wee(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function See(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Fi(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function jee(e,t,n,i,o){if(o.strikethrough||o.underline){const u=e.measureText(i),c=t-u.actualBoundingBoxLeft,a=t+u.actualBoundingBoxRight,g=n-u.actualBoundingBoxAscent,_=n+u.actualBoundingBoxDescent,S=o.strikethrough?(g+_)/2:_;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(c,S),e.lineTo(a,S),e.stroke()}}function Cee(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Pm(e,t,n,i,o,u={}){const c=ir(t)?t:[t],a=u.strokeWidth>0&&u.strokeColor!=="";let g,_;for(e.save(),e.font=o.string,See(e,u),g=0;g<c.length;++g)_=c[g],u.backdrop&&Cee(e,u.backdrop),a&&(u.strokeColor&&(e.strokeStyle=u.strokeColor),Fi(u.strokeWidth)||(e.lineWidth=u.strokeWidth),e.strokeText(_,n,i,u.maxWidth)),e.fillText(_,n,i,u.maxWidth),jee(e,n,i,_,u),i+=Number(o.lineHeight);e.restore()}function U0(e,t){const{x:n,y:i,w:o,h:u,radius:c}=t;e.arc(n+c.topLeft,i+c.topLeft,c.topLeft,1.5*ss,ss,!0),e.lineTo(n,i+u-c.bottomLeft),e.arc(n+c.bottomLeft,i+u-c.bottomLeft,c.bottomLeft,ss,Nr,!0),e.lineTo(n+o-c.bottomRight,i+u),e.arc(n+o-c.bottomRight,i+u-c.bottomRight,c.bottomRight,Nr,0,!0),e.lineTo(n+o,i+c.topRight),e.arc(n+o-c.topRight,i+c.topRight,c.topRight,0,-Nr,!0),e.lineTo(n+c.topLeft,i)}const Tee=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,kee=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Eee(e,t){const n=(""+e).match(Tee);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Mee=e=>+e||0;function PT(e,t){const n={},i=Vi(t),o=i?Object.keys(t):t,u=Vi(e)?i?c=>bi(e[c],e[t[c]]):c=>e[c]:()=>e;for(const c of o)n[c]=Mee(u(c));return n}function ED(e){return PT(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ym(e){return PT(e,["topLeft","topRight","bottomLeft","bottomRight"])}function bo(e){const t=ED(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ua(e,t){e=e||{},t=t||rr.font;let n=bi(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=bi(e.style,t.style);i&&!(""+i).match(kee)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:bi(e.family,t.family),lineHeight:Eee(bi(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:bi(e.weight,t.weight),string:""};return o.string=_ee(o),o}function i0(e,t,n,i){let o,u,c;for(o=0,u=e.length;o<u;++o)if(c=e[o],c!==void 0&&c!==void 0)return c}function Nee(e,t,n){const{min:i,max:o}=e,u=gD(t,(o-i)/2),c=(a,g)=>n&&a===0?0:a+g;return{min:c(i,-Math.abs(u)),max:c(o,u)}}function ep(e,t){return Object.assign(Object.create(e),t)}function RT(e,t=[""],n,i,o=()=>e[0]){const u=n||e;typeof i=="undefined"&&(i=PD("_fallback",e));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:u,_fallback:i,_getTarget:o,override:a=>RT([a,...e],t,u,i)};return new Proxy(c,{deleteProperty(a,g){return delete a[g],delete a._keys,delete e[0][g],!0},get(a,g){return ND(a,g,()=>Fee(g,t,e,a))},getOwnPropertyDescriptor(a,g){return Reflect.getOwnPropertyDescriptor(a._scopes[0],g)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,g){return HN(a).includes(g)},ownKeys(a){return HN(a)},set(a,g,_){const S=a._storage||(a._storage=o());return a[g]=S[g]=_,delete a._keys,!0}})}function gy(e,t,n,i){const o={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:MD(e,i),setContext:u=>gy(e,u,n,i),override:u=>gy(e.override(u),t,n,i)};return new Proxy(o,{deleteProperty(u,c){return delete u[c],delete e[c],!0},get(u,c,a){return ND(u,c,()=>Pee(u,c,a))},getOwnPropertyDescriptor(u,c){return u._descriptors.allKeys?Reflect.has(e,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,c)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(u,c){return Reflect.has(e,c)},ownKeys(){return Reflect.ownKeys(e)},set(u,c,a){return e[c]=a,delete u[c],!0}})}function MD(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:n,indexable:i,isScriptable:Zf(n)?n:()=>n,isIndexable:Zf(i)?i:()=>i}}const Aee=(e,t)=>e?e+kT(t):t,DT=(e,t)=>Vi(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ND(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function Pee(e,t,n){const{_proxy:i,_context:o,_subProxy:u,_descriptors:c}=e;let a=i[t];return Zf(a)&&c.isScriptable(t)&&(a=Ree(t,a,e,n)),ir(a)&&a.length&&(a=Dee(t,a,e,c.isIndexable)),DT(t,a)&&(a=gy(a,o,u&&u[t],c)),a}function Ree(e,t,n,i){const{_proxy:o,_context:u,_subProxy:c,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let g=t(u,c||i);return a.delete(e),DT(e,g)&&(g=zT(o._scopes,o,e,g)),g}function Dee(e,t,n,i){const{_proxy:o,_context:u,_subProxy:c,_descriptors:a}=n;if(typeof u.index!="undefined"&&i(e))return t[u.index%t.length];if(Vi(t[0])){const g=t,_=o._scopes.filter(S=>S!==g);t=[];for(const S of g){const E=zT(_,o,e,S);t.push(gy(E,u,c&&c[e],a))}}return t}function AD(e,t,n){return Zf(e)?e(t,n):e}const zee=(e,t)=>e===!0?t:typeof e=="string"?Wf(t,e):void 0;function Iee(e,t,n,i,o){for(const u of t){const c=zee(n,u);if(c){e.add(c);const a=AD(c._fallback,n,o);if(typeof a!="undefined"&&a!==n&&a!==i)return a}else if(c===!1&&typeof i!="undefined"&&n!==i)return null}return!1}function zT(e,t,n,i){const o=t._rootScopes,u=AD(t._fallback,n,i),c=[...e,...o],a=new Set;a.add(i);let g=$N(a,c,n,u||n,i);return g===null||typeof u!="undefined"&&u!==n&&(g=$N(a,c,u,g,i),g===null)?!1:RT(Array.from(a),[""],o,u,()=>Oee(t,n,i))}function $N(e,t,n,i,o){for(;n;)n=Iee(e,t,n,i,o);return n}function Oee(e,t,n){const i=e._getTarget();t in i||(i[t]={});const o=i[t];return ir(o)&&Vi(n)?n:o||{}}function Fee(e,t,n,i){let o;for(const u of t)if(o=PD(Aee(u,e),n),typeof o!="undefined")return DT(e,o)?zT(n,i,e,o):o}function PD(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i!="undefined")return i}}function HN(e){let t=e._keys;return t||(t=e._keys=Lee(e._scopes)),t}function Lee(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(o=>!o.startsWith("_")))t.add(i);return Array.from(t)}function RD(e,t,n,i){const{iScale:o}=e,{key:u="r"}=this._parsing,c=new Array(i);let a,g,_,S;for(a=0,g=i;a<g;++a)_=a+n,S=t[_],c[a]={r:o.parse(Wf(S,u),_)};return c}const Bee=Number.EPSILON||1e-14,yy=(e,t)=>t<e.length&&!e[t].skip&&e[t],DD=e=>e==="x"?"y":"x";function Vee(e,t,n,i){const o=e.skip?t:e,u=t,c=n.skip?t:n,a=vj(u,o),g=vj(c,u);let _=a/(a+g),S=g/(a+g);_=isNaN(_)?0:_,S=isNaN(S)?0:S;const E=i*_,A=i*S;return{previous:{x:u.x-E*(c.x-o.x),y:u.y-E*(c.y-o.y)},next:{x:u.x+A*(c.x-o.x),y:u.y+A*(c.y-o.y)}}}function Uee(e,t,n){const i=e.length;let o,u,c,a,g,_=yy(e,0);for(let S=0;S<i-1;++S)if(g=_,_=yy(e,S+1),!(!g||!_)){if(x0(t[S],0,Bee)){n[S]=n[S+1]=0;continue}o=n[S]/t[S],u=n[S+1]/t[S],a=Math.pow(o,2)+Math.pow(u,2),!(a<=9)&&(c=3/Math.sqrt(a),n[S]=o*c*t[S],n[S+1]=u*c*t[S])}}function $ee(e,t,n="x"){const i=DD(n),o=e.length;let u,c,a,g=yy(e,0);for(let _=0;_<o;++_){if(c=a,a=g,g=yy(e,_+1),!a)continue;const S=a[n],E=a[i];c&&(u=(S-c[n])/3,a[`cp1${n}`]=S-u,a[`cp1${i}`]=E-u*t[_]),g&&(u=(g[n]-S)/3,a[`cp2${n}`]=S+u,a[`cp2${i}`]=E+u*t[_])}}function Hee(e,t="x"){const n=DD(t),i=e.length,o=Array(i).fill(0),u=Array(i);let c,a,g,_=yy(e,0);for(c=0;c<i;++c)if(a=g,g=_,_=yy(e,c+1),!!g){if(_){const S=_[t]-g[t];o[c]=S!==0?(_[n]-g[n])/S:0}u[c]=a?_?bd(o[c-1])!==bd(o[c])?0:(o[c-1]+o[c])/2:o[c-1]:o[c]}Uee(e,o,u),$ee(e,u,t)}function Mb(e,t,n){return Math.max(Math.min(e,n),t)}function qee(e,t){let n,i,o,u,c,a=_h(e[0],t);for(n=0,i=e.length;n<i;++n)c=u,u=a,a=n<i-1&&_h(e[n+1],t),u&&(o=e[n],c&&(o.cp1x=Mb(o.cp1x,t.left,t.right),o.cp1y=Mb(o.cp1y,t.top,t.bottom)),a&&(o.cp2x=Mb(o.cp2x,t.left,t.right),o.cp2y=Mb(o.cp2y,t.top,t.bottom)))}function Gee(e,t,n,i,o){let u,c,a,g;if(t.spanGaps&&(e=e.filter(_=>!_.skip)),t.cubicInterpolationMode==="monotone")Hee(e,o);else{let _=i?e[e.length-1]:e[0];for(u=0,c=e.length;u<c;++u)a=e[u],g=Vee(_,a,e[Math.min(u+1,c-(i?0:1))%c],t.tension),a.cp1x=g.previous.x,a.cp1y=g.previous.y,a.cp2x=g.next.x,a.cp2y=g.next.y,_=a}t.capBezierPoints&&qee(e,n)}function IT(){return typeof window!="undefined"&&typeof document!="undefined"}function OT(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function o1(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const X1=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Wee(e,t){return X1(e).getPropertyValue(t)}const Zee=["top","right","bottom","left"];function xm(e,t,n){const i={};n=n?"-"+n:"";for(let o=0;o<4;o++){const u=Zee[o];i[u]=parseFloat(e[t+"-"+u+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Yee=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Xee(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:o,offsetY:u}=i;let c=!1,a,g;if(Yee(o,u,e.target))a=o,g=u;else{const _=t.getBoundingClientRect();a=i.clientX-_.left,g=i.clientY-_.top,c=!0}return{x:a,y:g,box:c}}function sm(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,o=X1(n),u=o.boxSizing==="border-box",c=xm(o,"padding"),a=xm(o,"border","width"),{x:g,y:_,box:S}=Xee(e,n),E=c.left+(S&&a.left),A=c.top+(S&&a.top);let{width:N,height:z}=t;return u&&(N-=c.width+a.width,z-=c.height+a.height),{x:Math.round((g-E)/N*n.width/i),y:Math.round((_-A)/z*n.height/i)}}function Kee(e,t,n){let i,o;if(t===void 0||n===void 0){const u=e&&OT(e);if(!u)t=e.clientWidth,n=e.clientHeight;else{const c=u.getBoundingClientRect(),a=X1(u),g=xm(a,"border","width"),_=xm(a,"padding");t=c.width-_.width-g.width,n=c.height-_.height-g.height,i=o1(a.maxWidth,u,"clientWidth"),o=o1(a.maxHeight,u,"clientHeight")}}return{width:t,height:n,maxWidth:i||r1,maxHeight:o||r1}}const Nb=e=>Math.round(e*10)/10;function Qee(e,t,n,i){const o=X1(e),u=xm(o,"margin"),c=o1(o.maxWidth,e,"clientWidth")||r1,a=o1(o.maxHeight,e,"clientHeight")||r1,g=Kee(e,t,n);let{width:_,height:S}=g;if(o.boxSizing==="content-box"){const A=xm(o,"border","width"),N=xm(o,"padding");_-=N.width+A.width,S-=N.height+A.height}return _=Math.max(0,_-u.width),S=Math.max(0,i?_/i:S-u.height),_=Nb(Math.min(_,c,g.maxWidth)),S=Nb(Math.min(S,a,g.maxHeight)),_&&!S&&(S=Nb(_/2)),(t!==void 0||n!==void 0)&&i&&g.height&&S>g.height&&(S=g.height,_=Nb(Math.floor(S*i))),{width:_,height:S}}function qN(e,t,n){const i=t||1,o=Math.floor(e.height*i),u=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const c=e.canvas;return c.style&&(n||!c.style.height&&!c.style.width)&&(c.style.height=`${e.height}px`,c.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||c.height!==o||c.width!==u?(e.currentDevicePixelRatio=i,c.height=o,c.width=u,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Jee=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};IT()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function GN(e,t){const n=Wee(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function rm(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function ete(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function tte(e,t,n,i){const o={x:e.cp2x,y:e.cp2y},u={x:t.cp1x,y:t.cp1y},c=rm(e,o,n),a=rm(o,u,n),g=rm(u,t,n),_=rm(c,a,n),S=rm(a,g,n);return rm(_,S,n)}const nte=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},ite=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ay(e,t,n){return e?nte(t,n):ite()}function zD(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function ID(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function OD(e){return e==="angle"?{between:V0,compare:see,normalize:po}:{between:yh,compare:(t,n)=>t-n,normalize:t=>t}}function WN({start:e,end:t,count:n,loop:i,style:o}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:o}}function ste(e,t,n){const{property:i,start:o,end:u}=n,{between:c,normalize:a}=OD(i),g=t.length;let{start:_,end:S,loop:E}=e,A,N;if(E){for(_+=g,S+=g,A=0,N=g;A<N&&c(a(t[_%g][i]),o,u);++A)_--,S--;_%=g,S%=g}return S<_&&(S+=g),{start:_,end:S,loop:E,style:e.style}}function FD(e,t,n){if(!n)return[e];const{property:i,start:o,end:u}=n,c=t.length,{compare:a,between:g,normalize:_}=OD(i),{start:S,end:E,loop:A,style:N}=ste(e,t,n),z=[];let B=!1,$=null,q,W,Q;const Z=()=>g(o,Q,q)&&a(o,Q)!==0,K=()=>a(u,q)===0||g(u,Q,q),le=()=>B||Z(),ge=()=>!B||K();for(let he=S,pe=S;he<=E;++he)W=t[he%c],!W.skip&&(q=_(W[i]),q!==Q&&(B=g(q,o,u),$===null&&le()&&($=a(q,o)===0?he:pe),$!==null&&ge()&&(z.push(WN({start:$,end:he,loop:A,count:c,style:N})),$=null),pe=he,Q=q));return $!==null&&z.push(WN({start:$,end:E,loop:A,count:c,style:N})),z}function LD(e,t){const n=[],i=e.segments;for(let o=0;o<i.length;o++){const u=FD(i[o],e.points,t);u.length&&n.push(...u)}return n}function rte(e,t,n,i){let o=0,u=t-1;if(n&&!i)for(;o<t&&!e[o].skip;)o++;for(;o<t&&e[o].skip;)o++;for(o%=t,n&&(u+=o);u>o&&e[u%t].skip;)u--;return u%=t,{start:o,end:u}}function ate(e,t,n,i){const o=e.length,u=[];let c=t,a=e[t],g;for(g=t+1;g<=n;++g){const _=e[g%o];_.skip||_.stop?a.skip||(i=!1,u.push({start:t%o,end:(g-1)%o,loop:i}),t=c=_.stop?g:null):(c=g,a.skip&&(t=g)),a=_}return c!==null&&u.push({start:t%o,end:c%o,loop:i}),u}function ote(e,t){const n=e.points,i=e.options.spanGaps,o=n.length;if(!o)return[];const u=!!e._loop,{start:c,end:a}=rte(n,o,u,i);if(i===!0)return ZN(e,[{start:c,end:a,loop:u}],n,t);const g=a<c?a+o:a,_=!!e._fullLoop&&c===0&&a===o-1;return ZN(e,ate(n,c,g,_),n,t)}function ZN(e,t,n,i){return!i||!i.setContext||!n?t:lte(e,t,n,i)}function lte(e,t,n,i){const o=e._chart.getContext(),u=YN(e.options),{_datasetIndex:c,options:{spanGaps:a}}=e,g=n.length,_=[];let S=u,E=t[0].start,A=E;function N(z,B,$,q){const W=a?-1:1;if(z!==B){for(z+=g;n[z%g].skip;)z-=W;for(;n[B%g].skip;)B+=W;z%g!==B%g&&(_.push({start:z%g,end:B%g,loop:$,style:q}),S=q,E=B%g)}}for(const z of t){E=a?E:z.start;let B=n[E%g],$;for(A=E+1;A<=z.end;A++){const q=n[A%g];$=YN(i.setContext(ep(o,{type:"segment",p0:B,p1:q,p0DataIndex:(A-1)%g,p1DataIndex:A%g,datasetIndex:c}))),cte($,S)&&N(E,A-1,z.loop,S),B=q,S=$}E<A-1&&N(E,A-1,z.loop,S)}return _}function YN(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function cte(e,t){if(!t)return!1;const n=[],i=function(o,u){return AT(u)?(n.includes(u)||n.push(u),n.indexOf(u)):u};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function Ab(e,t,n){return e.options.clip?e[n]:t[n]}function ute(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Ab(n,t,"left"),right:Ab(n,t,"right"),top:Ab(i,t,"top"),bottom:Ab(i,t,"bottom")}:t}function BD(e,t){const n=t._clip;if(n.disabled)return!1;const i=ute(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class dte{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,o){const u=n.listeners[o],c=n.duration;u.forEach(a=>a({chart:t,initial:n.initial,numSteps:c,currentStep:Math.min(i-n.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=wD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,o)=>{if(!i.running||!i.items.length)return;const u=i.items;let c=u.length-1,a=!1,g;for(;c>=0;--c)g=u[c],g._active?(g._total>i.duration&&(i.duration=g._total),g.tick(t),a=!0):(u[c]=u[u.length-1],u.pop());a&&(o.draw(),this._notify(o,i,t,"progress")),u.length||(i.running=!1,this._notify(o,i,t,"complete"),i.initial=!1),n+=u.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,o)=>Math.max(i,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let o=i.length-1;for(;o>=0;--o)i[o].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var fh=new dte;const XN="transparent",hte={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=BN(e||XN),o=i.valid&&BN(t||XN);return o&&o.valid?o.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class fte{constructor(t,n,i,o){const u=n[i];o=i0([t.to,o,u,t.from]);const c=i0([t.from,u,o]);this._active=!0,this._fn=t.fn||hte[t.type||typeof c],this._easing=_0[t.easing]||_0.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=c,this._to=o,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const o=this._target[this._prop],u=i-this._start,c=this._duration-u;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=u,this._loop=!!t.loop,this._to=i0([t.to,n,o,t.from]),this._from=i0([t.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,o=this._prop,u=this._from,c=this._loop,a=this._to;let g;if(this._active=u!==a&&(c||n<i),!this._active){this._target[o]=a,this._notify(!0);return}if(n<0){this._target[o]=u;return}g=n/i%2,g=c&&g>1?2-g:g,g=this._easing(Math.min(1,Math.max(0,g))),this._target[o]=this._fn(u,a,g)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let o=0;o<i.length;o++)i[o][n]()}}class VD{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Vi(t))return;const n=Object.keys(rr.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{const u=t[o];if(!Vi(u))return;const c={};for(const a of n)c[a]=u[a];(ir(u.properties)&&u.properties||[o]).forEach(a=>{(a===o||!i.has(a))&&i.set(a,c)})})}_animateOptions(t,n){const i=n.options,o=mte(t,i);if(!o)return[];const u=this._createAnimations(o,i);return i.$shared&&pte(t.options.$animations,i).then(()=>{t.options=i},()=>{}),u}_createAnimations(t,n){const i=this._properties,o=[],u=t.$animations||(t.$animations={}),c=Object.keys(n),a=Date.now();let g;for(g=c.length-1;g>=0;--g){const _=c[g];if(_.charAt(0)==="$")continue;if(_==="options"){o.push(...this._animateOptions(t,n));continue}const S=n[_];let E=u[_];const A=i.get(_);if(E)if(A&&E.active()){E.update(A,S,a);continue}else E.cancel();if(!A||!A.duration){t[_]=S;continue}u[_]=E=new fte(A,t,_,S),o.push(E)}return o}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return fh.add(this._chart,i),!0}}function pte(e,t){const n=[],i=Object.keys(t);for(let o=0;o<i.length;o++){const u=e[i[o]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function mte(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function KN(e,t){const n=e&&e.options||{},i=n.reverse,o=n.min===void 0?t:0,u=n.max===void 0?t:0;return{start:i?u:o,end:i?o:u}}function gte(e,t,n){if(n===!1)return!1;const i=KN(e,n),o=KN(t,n);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function yte(e){let t,n,i,o;return Vi(e)?(t=e.top,n=e.right,i=e.bottom,o=e.left):t=n=i=o=e,{top:t,right:n,bottom:i,left:o,disabled:e===!1}}function UD(e,t){const n=[],i=e._getSortedDatasetMetas(t);let o,u;for(o=0,u=i.length;o<u;++o)n.push(i[o].index);return n}function QN(e,t,n,i={}){const o=e.keys,u=i.mode==="single";let c,a,g,_;if(t===null)return;let S=!1;for(c=0,a=o.length;c<a;++c){if(g=+o[c],g===n){if(S=!0,i.all)continue;break}_=e.values[g],vr(_)&&(u||t===0||bd(t)===bd(_))&&(t+=_)}return!S&&!i.all?0:t}function xte(e,t){const{iScale:n,vScale:i}=t,o=n.axis==="x"?"x":"y",u=i.axis==="x"?"x":"y",c=Object.keys(e),a=new Array(c.length);let g,_,S;for(g=0,_=c.length;g<_;++g)S=c[g],a[g]={[o]:S,[u]:e[S]};return a}function B2(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function _te(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function bte(e){const{min:t,max:n,minDefined:i,maxDefined:o}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function vte(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function JN(e,t,n,i){for(const o of t.getMatchingVisibleMetas(i).reverse()){const u=e[o.index];if(n&&u>0||!n&&u<0)return o.index}return null}function e4(e,t){const{chart:n,_cachedMeta:i}=e,o=n._stacks||(n._stacks={}),{iScale:u,vScale:c,index:a}=i,g=u.axis,_=c.axis,S=_te(u,c,i),E=t.length;let A;for(let N=0;N<E;++N){const z=t[N],{[g]:B,[_]:$}=z,q=z._stacks||(z._stacks={});A=q[_]=vte(o,S,B),A[a]=$,A._top=JN(A,c,!0,i.type),A._bottom=JN(A,c,!1,i.type);const W=A._visualValues||(A._visualValues={});W[a]=$}}function V2(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function wte(e,t){return ep(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Ste(e,t,n){return ep(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Gx(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const o of t){const u=o._stacks;if(!u||u[i]===void 0||u[i][n]===void 0)return;delete u[i][n],u[i]._visualValues!==void 0&&u[i]._visualValues[n]!==void 0&&delete u[i]._visualValues[n]}}}const U2=e=>e==="reset"||e==="none",t4=(e,t)=>t?e:Object.assign({},e),jte=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:UD(n,!0),values:null};class xu{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=B2(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Gx(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),o=(E,A,N,z)=>E==="x"?A:E==="r"?z:N,u=n.xAxisID=bi(i.xAxisID,V2(t,"x")),c=n.yAxisID=bi(i.yAxisID,V2(t,"y")),a=n.rAxisID=bi(i.rAxisID,V2(t,"r")),g=n.indexAxis,_=n.iAxisID=o(g,u,c,a),S=n.vAxisID=o(g,c,u,a);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(c),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(_),n.vScale=this.getScaleForId(S)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ON(this._data,this),t._stacked&&Gx(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Vi(n)){const o=this._cachedMeta;this._data=xte(n,o)}else if(i!==n){if(i){ON(i,this);const o=this._cachedMeta;Gx(o),o._parsed=[]}n&&Object.isExtensible(n)&&lee(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let o=!1;this._dataCheck();const u=n._stacked;n._stacked=B2(n.vScale,n),n.stack!==i.stack&&(o=!0,Gx(n),n.stack=i.stack),this._resyncElements(t),(o||u!==n._stacked)&&(e4(this,n._parsed),n._stacked=B2(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:o}=this,{iScale:u,_stacked:c}=i,a=u.axis;let g=t===0&&n===o.length?!0:i._sorted,_=t>0&&i._parsed[t-1],S,E,A;if(this._parsing===!1)i._parsed=o,i._sorted=!0,A=o;else{ir(o[t])?A=this.parseArrayData(i,o,t,n):Vi(o[t])?A=this.parseObjectData(i,o,t,n):A=this.parsePrimitiveData(i,o,t,n);const N=()=>E[a]===null||_&&E[a]<_[a];for(S=0;S<n;++S)i._parsed[S+t]=E=A[S],g&&(N()&&(g=!1),_=E);i._sorted=g}c&&e4(this,A)}parsePrimitiveData(t,n,i,o){const{iScale:u,vScale:c}=t,a=u.axis,g=c.axis,_=u.getLabels(),S=u===c,E=new Array(o);let A,N,z;for(A=0,N=o;A<N;++A)z=A+i,E[A]={[a]:S||u.parse(_[z],z),[g]:c.parse(n[z],z)};return E}parseArrayData(t,n,i,o){const{xScale:u,yScale:c}=t,a=new Array(o);let g,_,S,E;for(g=0,_=o;g<_;++g)S=g+i,E=n[S],a[g]={x:u.parse(E[0],S),y:c.parse(E[1],S)};return a}parseObjectData(t,n,i,o){const{xScale:u,yScale:c}=t,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,_=new Array(o);let S,E,A,N;for(S=0,E=o;S<E;++S)A=S+i,N=n[A],_[S]={x:u.parse(Wf(N,a),A),y:c.parse(Wf(N,g),A)};return _}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const o=this.chart,u=this._cachedMeta,c=n[t.axis],a={keys:UD(o,!0),values:n._stacks[t.axis]._visualValues};return QN(a,c,u.index,{mode:i})}updateRangeFromParsed(t,n,i,o){const u=i[n.axis];let c=u===null?NaN:u;const a=o&&i._stacks[n.axis];o&&a&&(o.values=a,c=QN(o,u,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,n){const i=this._cachedMeta,o=i._parsed,u=i._sorted&&t===i.iScale,c=o.length,a=this._getOtherScale(t),g=jte(n,i,this.chart),_={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:S,max:E}=bte(a);let A,N;function z(){N=o[A];const B=N[a.axis];return!vr(N[t.axis])||S>B||E<B}for(A=0;A<c&&!(!z()&&(this.updateRangeFromParsed(_,t,N,g),u));++A);if(u){for(A=c-1;A>=0;--A)if(!z()){this.updateRangeFromParsed(_,t,N,g);break}}return _}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let o,u,c;for(o=0,u=n.length;o<u;++o)c=n[o][t.axis],vr(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,o=n.vScale,u=this.getParsed(t);return{label:i?""+i.getLabelForValue(u[i.axis]):"",value:o?""+o.getLabelForValue(u[o.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=yte(bi(this.options.clip,gte(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,o=i.data||[],u=n.chartArea,c=[],a=this._drawStart||0,g=this._drawCount||o.length-a,_=this.options.drawActiveElementsOnTop;let S;for(i.dataset&&i.dataset.draw(t,u,a,g),S=a;S<a+g;++S){const E=o[S];E.hidden||(E.active&&_?c.push(E):E.draw(t,u))}for(S=0;S<c.length;++S)c[S].draw(t,u)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const o=this.getDataset();let u;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];u=c.$context||(c.$context=Ste(this.getContext(),t,c)),u.parsed=this.getParsed(t),u.raw=o.data[t],u.index=u.dataIndex=t}else u=this.$context||(this.$context=wte(this.chart.getContext(),this.index)),u.dataset=o,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=i,u}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const o=n==="active",u=this._cachedDataOpts,c=t+"-"+n,a=u[c],g=this.enableOptionSharing&&B0(i);if(a)return t4(a,g);const _=this.chart.config,S=_.datasetElementScopeKeys(this._type,t),E=o?[`${t}Hover`,"hover",t,""]:[t,""],A=_.getOptionScopes(this.getDataset(),S),N=Object.keys(rr.elements[t]),z=()=>this.getContext(i,o,n),B=_.resolveNamedOptions(A,N,z,E);return B.$shared&&(B.$shared=g,u[c]=Object.freeze(t4(B,g))),B}_resolveAnimations(t,n,i){const o=this.chart,u=this._cachedDataOpts,c=`animation-${n}`,a=u[c];if(a)return a;let g;if(o.options.animation!==!1){const S=this.chart.config,E=S.datasetAnimationScopeKeys(this._type,n),A=S.getOptionScopes(this.getDataset(),E);g=S.createResolver(A,this.getContext(t,i,n))}const _=new VD(o,g&&g.animations);return g&&g._cacheable&&(u[c]=Object.freeze(_)),_}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||U2(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),o=this._sharedOptions,u=this.getSharedOptions(i),c=this.includeOptions(n,u)||u!==o;return this.updateSharedOptions(u,n,i),{sharedOptions:u,includeOptions:c}}updateElement(t,n,i,o){U2(o)?Object.assign(t,i):this._resolveAnimations(n,o).update(t,i)}updateSharedOptions(t,n,i){t&&!U2(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,o){t.active=o;const u=this.getStyle(n,o);this._resolveAnimations(n,i,o).update(t,{options:!o&&this.getSharedOptions(u)||u})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[a,g,_]of this._syncList)this[a](g,_);this._syncList=[];const o=i.length,u=n.length,c=Math.min(u,o);c&&this.parse(0,c),u>o?this._insertElements(o,u-o,t):u<o&&this._removeElements(u,o-u)}_insertElements(t,n,i=!0){const o=this._cachedMeta,u=o.data,c=t+n;let a;const g=_=>{for(_.length+=n,a=_.length-1;a>=c;a--)_[a]=_[a-n]};for(g(u),a=t;a<c;++a)u[a]=new this.dataElementType;this._parsing&&g(o._parsed),this.parse(t,n),i&&this.updateElements(u,t,n,"reset")}updateElements(t,n,i,o){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const o=i._parsed.splice(t,n);i._stacked&&Gx(i,o)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,o]=t;this[n](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}wn(xu,"defaults",{}),wn(xu,"datasetElementType",null),wn(xu,"dataElementType",null);function Cte(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let o=0,u=n.length;o<u;o++)i=i.concat(n[o].controller.getAllParsedValues(e));e._cache.$bar=vD(i.sort((o,u)=>o-u))}return e._cache.$bar}function Tte(e){const t=e.iScale,n=Cte(t,e.type);let i=t._length,o,u,c,a;const g=()=>{c===32767||c===-32768||(B0(a)&&(i=Math.min(i,Math.abs(c-a)||i)),a=c)};for(o=0,u=n.length;o<u;++o)c=t.getPixelForValue(n[o]),g();for(a=void 0,o=0,u=t.ticks.length;o<u;++o)c=t.getPixelForTick(o),g();return i}function kte(e,t,n,i){const o=n.barThickness;let u,c;return Fi(o)?(u=t.min*n.categoryPercentage,c=n.barPercentage):(u=o*i,c=1),{chunk:u/i,ratio:c,start:t.pixels[e]-u/2}}function Ete(e,t,n,i){const o=t.pixels,u=o[e];let c=e>0?o[e-1]:null,a=e<o.length-1?o[e+1]:null;const g=n.categoryPercentage;c===null&&(c=u-(a===null?t.end-t.start:a-u)),a===null&&(a=u+u-c);const _=u-(u-Math.min(c,a))/2*g;return{chunk:Math.abs(a-c)/2*g/i,ratio:n.barPercentage,start:_}}function Mte(e,t,n,i){const o=n.parse(e[0],i),u=n.parse(e[1],i),c=Math.min(o,u),a=Math.max(o,u);let g=c,_=a;Math.abs(c)>Math.abs(a)&&(g=a,_=c),t[n.axis]=_,t._custom={barStart:g,barEnd:_,start:o,end:u,min:c,max:a}}function $D(e,t,n,i){return ir(e)?Mte(e,t,n,i):t[n.axis]=n.parse(e,i),t}function n4(e,t,n,i){const o=e.iScale,u=e.vScale,c=o.getLabels(),a=o===u,g=[];let _,S,E,A;for(_=n,S=n+i;_<S;++_)A=t[_],E={},E[o.axis]=a||o.parse(c[_],_),g.push($D(A,E,u,_));return g}function $2(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Nte(e,t,n){return e!==0?bd(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Ate(e){let t,n,i,o,u;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(o="end",u="start"):(o="start",u="end"),{start:n,end:i,reverse:t,top:o,bottom:u}}function Pte(e,t,n,i){let o=t.borderSkipped;const u={};if(!o){e.borderSkipped=u;return}if(o===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:a,reverse:g,top:_,bottom:S}=Ate(e);o==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?o=_:(n._bottom||0)===i?o=S:(u[i4(S,c,a,g)]=!0,o=_)),u[i4(o,c,a,g)]=!0,e.borderSkipped=u}function i4(e,t,n,i){return i?(e=Rte(e,t,n),e=s4(e,n,t)):e=s4(e,t,n),e}function Rte(e,t,n){return e===t?n:e===n?t:e}function s4(e,t,n){return e==="start"?t:e==="end"?n:e}function Dte(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class v0 extends xu{parsePrimitiveData(t,n,i,o){return n4(t,n,i,o)}parseArrayData(t,n,i,o){return n4(t,n,i,o)}parseObjectData(t,n,i,o){const{iScale:u,vScale:c}=t,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,_=u.axis==="x"?a:g,S=c.axis==="x"?a:g,E=[];let A,N,z,B;for(A=i,N=i+o;A<N;++A)B=n[A],z={},z[u.axis]=u.parse(Wf(B,_),A),E.push($D(Wf(B,S),z,c,A));return E}updateRangeFromParsed(t,n,i,o){super.updateRangeFromParsed(t,n,i,o);const u=i._custom;u&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,u.min),t.max=Math.max(t.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:o}=n,u=this.getParsed(t),c=u._custom,a=$2(c)?"["+c.start+", "+c.end+"]":""+o.getLabelForValue(u[o.axis]);return{label:""+i.getLabelForValue(u[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,o){const u=o==="reset",{index:c,_cachedMeta:{vScale:a}}=this,g=a.getBasePixel(),_=a.isHorizontal(),S=this._getRuler(),{sharedOptions:E,includeOptions:A}=this._getSharedOptions(n,o);for(let N=n;N<n+i;N++){const z=this.getParsed(N),B=u||Fi(z[a.axis])?{base:g,head:g}:this._calculateBarValuePixels(N),$=this._calculateBarIndexPixels(N,S),q=(z._stacks||{})[a.axis],W={horizontal:_,base:B.base,enableBorderRadius:!q||$2(z._custom)||c===q._top||c===q._bottom,x:_?B.head:$.center,y:_?$.center:B.head,height:_?$.size:Math.abs(B.size),width:_?Math.abs(B.size):$.size};A&&(W.options=E||this.resolveDataElementOptions(N,t[N].active?"active":o));const Q=W.options||t[N].options;Pte(W,Q,q,c),Dte(W,Q,S.ratio),this.updateElement(t[N],N,W,o)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(S=>S.controller.options.grouped),u=i.options.stacked,c=[],a=this._cachedMeta.controller.getParsed(n),g=a&&a[i.axis],_=S=>{const E=S._parsed.find(N=>N[i.axis]===g),A=E&&E[S.vScale.axis];if(Fi(A)||isNaN(A))return!0};for(const S of o)if(!(n!==void 0&&_(S))&&((u===!1||c.indexOf(S.stack)===-1||u===void 0&&S.stack===void 0)&&c.push(S.stack),S.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[bi(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,i){const o=this._getStacks(t,i),u=n!==void 0?o.indexOf(n):-1;return u===-1?o.length-1:u}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,o=[];let u,c;for(u=0,c=n.data.length;u<c;++u)o.push(i.getPixelForValue(this.getParsed(u)[i.axis],u));const a=t.barThickness;return{min:a||Tte(n),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:o},options:{base:u,minBarLength:c}}=this,a=u||0,g=this.getParsed(t),_=g._custom,S=$2(_);let E=g[n.axis],A=0,N=i?this.applyStack(n,g,i):E,z,B;N!==E&&(A=N-E,N=E),S&&(E=_.barStart,N=_.barEnd-_.barStart,E!==0&&bd(E)!==bd(_.barEnd)&&(A=0),A+=E);const $=!Fi(u)&&!S?u:A;let q=n.getPixelForValue($);if(this.chart.getDataVisibility(t)?z=n.getPixelForValue(A+N):z=q,B=z-q,Math.abs(B)<c){B=Nte(B,n,a)*c,E===a&&(q-=B/2);const W=n.getPixelForDecimal(0),Q=n.getPixelForDecimal(1),Z=Math.min(W,Q),K=Math.max(W,Q);q=Math.max(Math.min(q,K),Z),z=q+B,i&&!S&&(g._stacks[n.axis]._visualValues[o]=n.getValueForPixel(z)-n.getValueForPixel(q))}if(q===n.getPixelForValue(a)){const W=bd(B)*n.getLineWidthForValue(a)/2;q+=W,B-=W}return{size:B,base:q,head:z,center:z+B/2}}_calculateBarIndexPixels(t,n){const i=n.scale,o=this.options,u=o.skipNull,c=bi(o.maxBarThickness,1/0);let a,g;const _=this._getAxisCount();if(n.grouped){const S=u?this._getStackCount(t):n.stackCount,E=o.barThickness==="flex"?Ete(t,n,o,S*_):kte(t,n,o,S*_),A=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,N=this._getAxis().indexOf(bi(A,this.getFirstScaleIdForIndexAxis())),z=this._getStackIndex(this.index,this._cachedMeta.stack,u?t:void 0)+N;a=E.start+E.chunk*z+E.chunk/2,g=Math.min(c,E.chunk*E.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),g=Math.min(c,n.min*n.ratio);return{base:a-g/2,head:a+g/2,center:a,size:g}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,o=i.length;let u=0;for(;u<o;++u)this.getParsed(u)[n.axis]!==null&&!i[u].hidden&&i[u].draw(this._ctx)}}wn(v0,"id","bar"),wn(v0,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),wn(v0,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class fv extends xu{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,o){const u=super.parsePrimitiveData(t,n,i,o);for(let c=0;c<u.length;c++)u[c]._custom=this.resolveDataElementOptions(c+i).radius;return u}parseArrayData(t,n,i,o){const u=super.parseArrayData(t,n,i,o);for(let c=0;c<u.length;c++){const a=n[i+c];u[c]._custom=bi(a[2],this.resolveDataElementOptions(c+i).radius)}return u}parseObjectData(t,n,i,o){const u=super.parseObjectData(t,n,i,o);for(let c=0;c<u.length;c++){const a=n[i+c];u[c]._custom=bi(a&&a.r&&+a.r,this.resolveDataElementOptions(c+i).radius)}return u}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:u}=n,c=this.getParsed(t),a=o.getLabelForValue(c.x),g=u.getLabelForValue(c.y),_=c._custom;return{label:i[t]||"",value:"("+a+", "+g+(_?", "+_:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,o){const u=o==="reset",{iScale:c,vScale:a}=this._cachedMeta,{sharedOptions:g,includeOptions:_}=this._getSharedOptions(n,o),S=c.axis,E=a.axis;for(let A=n;A<n+i;A++){const N=t[A],z=!u&&this.getParsed(A),B={},$=B[S]=u?c.getPixelForDecimal(.5):c.getPixelForValue(z[S]),q=B[E]=u?a.getBasePixel():a.getPixelForValue(z[E]);B.skip=isNaN($)||isNaN(q),_&&(B.options=g||this.resolveDataElementOptions(A,N.active?"active":o),u&&(B.options.radius=0)),this.updateElement(N,A,B,o)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let o=super.resolveDataElementOptions(t,n);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const u=o.radius;return n!=="active"&&(o.radius=0),o.radius+=bi(i&&i._custom,u),o}}wn(fv,"id","bubble"),wn(fv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),wn(fv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function zte(e,t,n){let i=1,o=1,u=0,c=0;if(t<Qs){const a=e,g=a+t,_=Math.cos(a),S=Math.sin(a),E=Math.cos(g),A=Math.sin(g),N=(Q,Z,K)=>V0(Q,a,g,!0)?1:Math.max(Z,Z*n,K,K*n),z=(Q,Z,K)=>V0(Q,a,g,!0)?-1:Math.min(Z,Z*n,K,K*n),B=N(0,_,E),$=N(Nr,S,A),q=z(ss,_,E),W=z(ss+Nr,S,A);i=(B-q)/2,o=($-W)/2,u=-(B+q)/2,c=-($+W)/2}return{ratioX:i,ratioY:o,offsetX:u,offsetY:c}}class dm extends xu{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let u=g=>+i[g];if(Vi(i[t])){const{key:g="value"}=this._parsing;u=_=>+Wf(i[_],g)}let c,a;for(c=t,a=t+n;c<a;++c)o._parsed[c]=u(c)}}_getRotation(){return yu(this.options.rotation-90)}_getCircumference(){return yu(this.options.circumference)}_getRotationExtents(){let t=Qs,n=-Qs;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const o=this.chart.getDatasetMeta(i).controller,u=o._getRotation(),c=o._getCircumference();t=Math.min(t,u),n=Math.max(n,u+c)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,o=this._cachedMeta,u=o.data,c=this.getMaxBorderWidth()+this.getMaxOffset(u)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-c)/2,0),g=Math.min(WJ(this.options.cutout,a),1),_=this._getRingWeight(this.index),{circumference:S,rotation:E}=this._getRotationExtents(),{ratioX:A,ratioY:N,offsetX:z,offsetY:B}=zte(E,S,g),$=(i.width-c)/A,q=(i.height-c)/N,W=Math.max(Math.min($,q)/2,0),Q=gD(this.options.radius,W),Z=Math.max(Q*g,0),K=(Q-Z)/this._getVisibleDatasetWeightTotal();this.offsetX=z*Q,this.offsetY=B*Q,o.total=this.calculateTotal(),this.outerRadius=Q-K*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-K*_,0),this.updateElements(u,0,u.length,t)}_circumference(t,n){const i=this.options,o=this._cachedMeta,u=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*u/Qs)}updateElements(t,n,i,o){const u=o==="reset",c=this.chart,a=c.chartArea,_=c.options.animation,S=(a.left+a.right)/2,E=(a.top+a.bottom)/2,A=u&&_.animateScale,N=A?0:this.innerRadius,z=A?0:this.outerRadius,{sharedOptions:B,includeOptions:$}=this._getSharedOptions(n,o);let q=this._getRotation(),W;for(W=0;W<n;++W)q+=this._circumference(W,u);for(W=n;W<n+i;++W){const Q=this._circumference(W,u),Z=t[W],K={x:S+this.offsetX,y:E+this.offsetY,startAngle:q,endAngle:q+Q,circumference:Q,outerRadius:z,innerRadius:N};$&&(K.options=B||this.resolveDataElementOptions(W,Z.active?"active":o)),q+=Q,this.updateElement(Z,W,K,o)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,o;for(o=0;o<n.length;o++){const u=t._parsed[o];u!==null&&!isNaN(u)&&this.chart.getDataVisibility(o)&&!n[o].hidden&&(i+=Math.abs(u))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Qs*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,o=i.data.labels||[],u=f_(n._parsed[t],i.options.locale);return{label:o[t]||"",value:u}}getMaxBorderWidth(t){let n=0;const i=this.chart;let o,u,c,a,g;if(!t){for(o=0,u=i.data.datasets.length;o<u;++o)if(i.isDatasetVisible(o)){c=i.getDatasetMeta(o),t=c.data,a=c.controller;break}}if(!t)return 0;for(o=0,u=t.length;o<u;++o)g=a.resolveDataElementOptions(o),g.borderAlign!=="inner"&&(n=Math.max(n,g.borderWidth||0,g.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,o=t.length;i<o;++i){const u=this.resolveDataElementOptions(i);n=Math.max(n,u.offset||0,u.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(bi(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}wn(dm,"id","doughnut"),wn(dm,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),wn(dm,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),wn(dm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:o}}=t.legend.options;return n.labels.map((u,c)=>{const g=t.getDatasetMeta(0).controller.getStyle(c);return{text:u,fillStyle:g.backgroundColor,strokeStyle:g.borderColor,fontColor:o,lineWidth:g.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class pv extends xu{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:o=[],_dataset:u}=n,c=this.chart._animationsDisabled;let{start:a,count:g}=jD(n,o,c);this._drawStart=a,this._drawCount=g,CD(n)&&(a=0,g=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!u._decimated,i.points=o;const _=this.resolveDatasetElementOptions(t);this.options.showLine||(_.borderWidth=0),_.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:_},t),this.updateElements(o,a,g,t)}updateElements(t,n,i,o){const u=o==="reset",{iScale:c,vScale:a,_stacked:g,_dataset:_}=this._cachedMeta,{sharedOptions:S,includeOptions:E}=this._getSharedOptions(n,o),A=c.axis,N=a.axis,{spanGaps:z,segment:B}=this.options,$=my(z)?z:Number.POSITIVE_INFINITY,q=this.chart._animationsDisabled||u||o==="none",W=n+i,Q=t.length;let Z=n>0&&this.getParsed(n-1);for(let K=0;K<Q;++K){const le=t[K],ge=q?le:{};if(K<n||K>=W){ge.skip=!0;continue}const he=this.getParsed(K),pe=Fi(he[N]),Ie=ge[A]=c.getPixelForValue(he[A],K),He=ge[N]=u||pe?a.getBasePixel():a.getPixelForValue(g?this.applyStack(a,he,g):he[N],K);ge.skip=isNaN(Ie)||isNaN(He)||pe,ge.stop=K>0&&Math.abs(he[A]-Z[A])>$,B&&(ge.parsed=he,ge.raw=_.data[K]),E&&(ge.options=S||this.resolveDataElementOptions(K,le.active?"active":o)),q||this.updateElement(le,K,ge,o),Z=he}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,o=t.data||[];if(!o.length)return i;const u=o[0].size(this.resolveDataElementOptions(0)),c=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,u,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}wn(pv,"id","line"),wn(pv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),wn(pv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class w0 extends xu{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,o=i.data.labels||[],u=f_(n._parsed[t].r,i.options.locale);return{label:o[t]||"",value:u}}parseObjectData(t,n,i,o){return RD.bind(this)(t,n,i,o)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,o)=>{const u=this.getParsed(o).r;!isNaN(u)&&this.chart.getDataVisibility(o)&&(u<n.min&&(n.min=u),u>n.max&&(n.max=u))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,o=Math.min(n.right-n.left,n.bottom-n.top),u=Math.max(o/2,0),c=Math.max(i.cutoutPercentage?u/100*i.cutoutPercentage:1,0),a=(u-c)/t.getVisibleDatasetCount();this.outerRadius=u-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,i,o){const u=o==="reset",c=this.chart,g=c.options.animation,_=this._cachedMeta.rScale,S=_.xCenter,E=_.yCenter,A=_.getIndexAngle(0)-.5*ss;let N=A,z;const B=360/this.countVisibleElements();for(z=0;z<n;++z)N+=this._computeAngle(z,o,B);for(z=n;z<n+i;z++){const $=t[z];let q=N,W=N+this._computeAngle(z,o,B),Q=c.getDataVisibility(z)?_.getDistanceFromCenterForValue(this.getParsed(z).r):0;N=W,u&&(g.animateScale&&(Q=0),g.animateRotate&&(q=W=A));const Z={x:S,y:E,innerRadius:0,outerRadius:Q,startAngle:q,endAngle:W,options:this.resolveDataElementOptions(z,$.active?"active":o)};this.updateElement($,z,Z,o)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?yu(this.resolveDataElementOptions(t,n).angle||i):0}}wn(w0,"id","polarArea"),wn(w0,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),wn(w0,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:o}}=t.legend.options;return n.labels.map((u,c)=>{const g=t.getDatasetMeta(0).controller.getStyle(c);return{text:u,fillStyle:g.backgroundColor,strokeStyle:g.borderColor,fontColor:o,lineWidth:g.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class jj extends dm{}wn(jj,"id","pie"),wn(jj,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class mv extends xu{getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,o){return RD.bind(this)(t,n,i,o)}update(t){const n=this._cachedMeta,i=n.dataset,o=n.data||[],u=n.iScale.getLabels();if(i.points=o,t!=="resize"){const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0);const a={_loop:!0,_fullLoop:u.length===o.length,options:c};this.updateElement(i,void 0,a,t)}this.updateElements(o,0,o.length,t)}updateElements(t,n,i,o){const u=this._cachedMeta.rScale,c=o==="reset";for(let a=n;a<n+i;a++){const g=t[a],_=this.resolveDataElementOptions(a,g.active?"active":o),S=u.getPointPositionForValue(a,this.getParsed(a).r),E=c?u.xCenter:S.x,A=c?u.yCenter:S.y,N={x:E,y:A,angle:S.angle,skip:isNaN(E)||isNaN(A),options:_};this.updateElement(g,a,N,o)}}}wn(mv,"id","radar"),wn(mv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),wn(mv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class gv extends xu{getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:u}=n,c=this.getParsed(t),a=o.getLabelForValue(c.x),g=u.getLabelForValue(c.y);return{label:i[t]||"",value:"("+a+", "+g+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,o=this.chart._animationsDisabled;let{start:u,count:c}=jD(n,i,o);if(this._drawStart=u,this._drawCount=c,CD(n)&&(u=0,c=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:g}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!g._decimated,a.points=i;const _=this.resolveDatasetElementOptions(t);_.segment=this.options.segment,this.updateElement(a,void 0,{animated:!o,options:_},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,u,c,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,o){const u=o==="reset",{iScale:c,vScale:a,_stacked:g,_dataset:_}=this._cachedMeta,S=this.resolveDataElementOptions(n,o),E=this.getSharedOptions(S),A=this.includeOptions(o,E),N=c.axis,z=a.axis,{spanGaps:B,segment:$}=this.options,q=my(B)?B:Number.POSITIVE_INFINITY,W=this.chart._animationsDisabled||u||o==="none";let Q=n>0&&this.getParsed(n-1);for(let Z=n;Z<n+i;++Z){const K=t[Z],le=this.getParsed(Z),ge=W?K:{},he=Fi(le[z]),pe=ge[N]=c.getPixelForValue(le[N],Z),Ie=ge[z]=u||he?a.getBasePixel():a.getPixelForValue(g?this.applyStack(a,le,g):le[z],Z);ge.skip=isNaN(pe)||isNaN(Ie)||he,ge.stop=Z>0&&Math.abs(le[N]-Q[N])>q,$&&(ge.parsed=le,ge.raw=_.data[Z]),A&&(ge.options=E||this.resolveDataElementOptions(Z,K.active?"active":o)),W||this.updateElement(K,Z,ge,o),Q=le}this.updateSharedOptions(E,o,S)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let a=0;for(let g=n.length-1;g>=0;--g)a=Math.max(a,n[g].size(this.resolveDataElementOptions(g))/2);return a>0&&a}const i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!n.length)return o;const u=n[0].size(this.resolveDataElementOptions(0)),c=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(o,u,c)/2}}wn(gv,"id","scatter"),wn(gv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),wn(gv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Ite=Object.freeze({__proto__:null,BarController:v0,BubbleController:fv,DoughnutController:dm,LineController:pv,PieController:jj,PolarAreaController:w0,RadarController:mv,ScatterController:gv});function em(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class FT{constructor(t){wn(this,"options");this.options=t||{}}static override(t){Object.assign(FT.prototype,t)}init(){}formats(){return em()}parse(){return em()}format(){return em()}add(){return em()}diff(){return em()}startOf(){return em()}endOf(){return em()}}var Ote={_date:FT};function Fte(e,t,n,i){const{controller:o,data:u,_sorted:c}=e,a=o._cachedMeta.iScale,g=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&c&&u.length){const _=a._reversePixels?aee:xh;if(i){if(o._sharedOptions){const S=u[0],E=typeof S.getRange=="function"&&S.getRange(t);if(E){const A=_(u,t,n-E),N=_(u,t,n+E);return{lo:A.lo,hi:N.hi}}}}else{const S=_(u,t,n);if(g){const{vScale:E}=o._cachedMeta,{_parsed:A}=e,N=A.slice(0,S.lo+1).reverse().findIndex(B=>!Fi(B[E.axis]));S.lo-=Math.max(0,N);const z=A.slice(S.hi).findIndex(B=>!Fi(B[E.axis]));S.hi+=Math.max(0,z)}return S}}return{lo:0,hi:u.length-1}}function K1(e,t,n,i,o){const u=e.getSortedVisibleDatasetMetas(),c=n[t];for(let a=0,g=u.length;a<g;++a){const{index:_,data:S}=u[a],{lo:E,hi:A}=Fte(u[a],t,c,o);for(let N=E;N<=A;++N){const z=S[N];z.skip||i(z,_,N)}}}function Lte(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,o){const u=t?Math.abs(i.x-o.x):0,c=n?Math.abs(i.y-o.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(c,2))}}function H2(e,t,n,i,o){const u=[];return!o&&!e.isPointInArea(t)||K1(e,n,t,function(a,g,_){!o&&!_h(a,e.chartArea,0)||a.inRange(t.x,t.y,i)&&u.push({element:a,datasetIndex:g,index:_})},!0),u}function Bte(e,t,n,i){let o=[];function u(c,a,g){const{startAngle:_,endAngle:S}=c.getProps(["startAngle","endAngle"],i),{angle:E}=_D(c,{x:t.x,y:t.y});V0(E,_,S)&&o.push({element:c,datasetIndex:a,index:g})}return K1(e,n,t,u),o}function Vte(e,t,n,i,o,u){let c=[];const a=Lte(n);let g=Number.POSITIVE_INFINITY;function _(S,E,A){const N=S.inRange(t.x,t.y,o);if(i&&!N)return;const z=S.getCenterPoint(o);if(!(!!u||e.isPointInArea(z))&&!N)return;const $=a(t,z);$<g?(c=[{element:S,datasetIndex:E,index:A}],g=$):$===g&&c.push({element:S,datasetIndex:E,index:A})}return K1(e,n,t,_),c}function q2(e,t,n,i,o,u){return!u&&!e.isPointInArea(t)?[]:n==="r"&&!i?Bte(e,t,n,o):Vte(e,t,n,i,o,u)}function r4(e,t,n,i,o){const u=[],c=n==="x"?"inXRange":"inYRange";let a=!1;return K1(e,n,t,(g,_,S)=>{g[c]&&g[c](t[n],o)&&(u.push({element:g,datasetIndex:_,index:S}),a=a||g.inRange(t.x,t.y,o))}),i&&!a?[]:u}var Ute={modes:{index(e,t,n,i){const o=sm(t,e),u=n.axis||"x",c=n.includeInvisible||!1,a=n.intersect?H2(e,o,u,i,c):q2(e,o,u,!1,i,c),g=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(_=>{const S=a[0].index,E=_.data[S];E&&!E.skip&&g.push({element:E,datasetIndex:_.index,index:S})}),g):[]},dataset(e,t,n,i){const o=sm(t,e),u=n.axis||"xy",c=n.includeInvisible||!1;let a=n.intersect?H2(e,o,u,i,c):q2(e,o,u,!1,i,c);if(a.length>0){const g=a[0].datasetIndex,_=e.getDatasetMeta(g).data;a=[];for(let S=0;S<_.length;++S)a.push({element:_[S],datasetIndex:g,index:S})}return a},point(e,t,n,i){const o=sm(t,e),u=n.axis||"xy",c=n.includeInvisible||!1;return H2(e,o,u,i,c)},nearest(e,t,n,i){const o=sm(t,e),u=n.axis||"xy",c=n.includeInvisible||!1;return q2(e,o,u,n.intersect,i,c)},x(e,t,n,i){const o=sm(t,e);return r4(e,o,"x",n.intersect,i)},y(e,t,n,i){const o=sm(t,e);return r4(e,o,"y",n.intersect,i)}}};const HD=["left","top","right","bottom"];function Wx(e,t){return e.filter(n=>n.pos===t)}function a4(e,t){return e.filter(n=>HD.indexOf(n.pos)===-1&&n.box.axis===t)}function Zx(e,t){return e.sort((n,i)=>{const o=t?i:n,u=t?n:i;return o.weight===u.weight?o.index-u.index:o.weight-u.weight})}function $te(e){const t=[];let n,i,o,u,c,a;for(n=0,i=(e||[]).length;n<i;++n)o=e[n],{position:u,options:{stack:c,stackWeight:a=1}}=o,t.push({index:n,box:o,pos:u,horizontal:o.isHorizontal(),weight:o.weight,stack:c&&u+c,stackWeight:a});return t}function Hte(e){const t={};for(const n of e){const{stack:i,pos:o,stackWeight:u}=n;if(!i||!HD.includes(o))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=u}return t}function qte(e,t){const n=Hte(e),{vBoxMaxWidth:i,hBoxMaxHeight:o}=t;let u,c,a;for(u=0,c=e.length;u<c;++u){a=e[u];const{fullSize:g}=a.box,_=n[a.stack],S=_&&a.stackWeight/_.weight;a.horizontal?(a.width=S?S*i:g&&t.availableWidth,a.height=o):(a.width=i,a.height=S?S*o:g&&t.availableHeight)}return n}function Gte(e){const t=$te(e),n=Zx(t.filter(_=>_.box.fullSize),!0),i=Zx(Wx(t,"left"),!0),o=Zx(Wx(t,"right")),u=Zx(Wx(t,"top"),!0),c=Zx(Wx(t,"bottom")),a=a4(t,"x"),g=a4(t,"y");return{fullSize:n,leftAndTop:i.concat(u),rightAndBottom:o.concat(g).concat(c).concat(a),chartArea:Wx(t,"chartArea"),vertical:i.concat(o).concat(g),horizontal:u.concat(c).concat(a)}}function o4(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function qD(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Wte(e,t,n,i){const{pos:o,box:u}=n,c=e.maxPadding;if(!Vi(o)){n.size&&(e[o]-=n.size);const E=i[n.stack]||{size:0,count:1};E.size=Math.max(E.size,n.horizontal?u.height:u.width),n.size=E.size/E.count,e[o]+=n.size}u.getPadding&&qD(c,u.getPadding());const a=Math.max(0,t.outerWidth-o4(c,e,"left","right")),g=Math.max(0,t.outerHeight-o4(c,e,"top","bottom")),_=a!==e.w,S=g!==e.h;return e.w=a,e.h=g,n.horizontal?{same:_,other:S}:{same:S,other:_}}function Zte(e){const t=e.maxPadding;function n(i){const o=Math.max(t[i]-e[i],0);return e[i]+=o,o}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Yte(e,t){const n=t.maxPadding;function i(o){const u={left:0,top:0,right:0,bottom:0};return o.forEach(c=>{u[c]=Math.max(t[c],n[c])}),u}return i(e?["left","right"]:["top","bottom"])}function s0(e,t,n,i){const o=[];let u,c,a,g,_,S;for(u=0,c=e.length,_=0;u<c;++u){a=e[u],g=a.box,g.update(a.width||t.w,a.height||t.h,Yte(a.horizontal,t));const{same:E,other:A}=Wte(t,n,a,i);_|=E&&o.length,S=S||A,g.fullSize||o.push(a)}return _&&s0(o,t,n,i)||S}function Pb(e,t,n,i,o){e.top=n,e.left=t,e.right=t+i,e.bottom=n+o,e.width=i,e.height=o}function l4(e,t,n,i){const o=n.padding;let{x:u,y:c}=t;for(const a of e){const g=a.box,_=i[a.stack]||{placed:0,weight:1},S=a.stackWeight/_.weight||1;if(a.horizontal){const E=t.w*S,A=_.size||g.height;B0(_.start)&&(c=_.start),g.fullSize?Pb(g,o.left,c,n.outerWidth-o.right-o.left,A):Pb(g,t.left+_.placed,c,E,A),_.start=c,_.placed+=E,c=g.bottom}else{const E=t.h*S,A=_.size||g.width;B0(_.start)&&(u=_.start),g.fullSize?Pb(g,u,o.top,A,n.outerHeight-o.bottom-o.top):Pb(g,u,t.top+_.placed,A,E),_.start=u,_.placed+=E,u=g.right}}t.x=u,t.y=c}var xo={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const o=bo(e.options.layout.padding),u=Math.max(t-o.width,0),c=Math.max(n-o.height,0),a=Gte(e.boxes),g=a.vertical,_=a.horizontal;vs(e.boxes,B=>{typeof B.beforeLayout=="function"&&B.beforeLayout()});const S=g.reduce((B,$)=>$.box.options&&$.box.options.display===!1?B:B+1,0)||1,E=Object.freeze({outerWidth:t,outerHeight:n,padding:o,availableWidth:u,availableHeight:c,vBoxMaxWidth:u/2/S,hBoxMaxHeight:c/2}),A=Object.assign({},o);qD(A,bo(i));const N=Object.assign({maxPadding:A,w:u,h:c,x:o.left,y:o.top},o),z=qte(g.concat(_),E);s0(a.fullSize,N,E,z),s0(g,N,E,z),s0(_,N,E,z)&&s0(g,N,E,z),Zte(N),l4(a.leftAndTop,N,E,z),N.x+=N.w,N.y+=N.h,l4(a.rightAndBottom,N,E,z),e.chartArea={left:N.left,top:N.top,right:N.left+N.w,bottom:N.top+N.h,height:N.h,width:N.w},vs(a.chartArea,B=>{const $=B.box;Object.assign($,e.chartArea),$.update(N.w,N.h,{left:0,top:0,right:0,bottom:0})})}};class GD{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,o){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,o?Math.floor(n/o):i)}}isAttached(t){return!0}updateConfig(t){}}class Xte extends GD{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const yv="$chartjs",Kte={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},c4=e=>e===null||e==="";function Qte(e,t){const n=e.style,i=e.getAttribute("height"),o=e.getAttribute("width");if(e[yv]={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",c4(o)){const u=GN(e,"width");u!==void 0&&(e.width=u)}if(c4(i))if(e.style.height==="")e.height=e.width/(t||2);else{const u=GN(e,"height");u!==void 0&&(e.height=u)}return e}const WD=Jee?{passive:!0}:!1;function Jte(e,t,n){e&&e.addEventListener(t,n,WD)}function ene(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,WD)}function tne(e,t){const n=Kte[e.type]||e.type,{x:i,y:o}=sm(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:o!==void 0?o:null}}function l1(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function nne(e,t,n){const i=e.canvas,o=new MutationObserver(u=>{let c=!1;for(const a of u)c=c||l1(a.addedNodes,i),c=c&&!l1(a.removedNodes,i);c&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function ine(e,t,n){const i=e.canvas,o=new MutationObserver(u=>{let c=!1;for(const a of u)c=c||l1(a.removedNodes,i),c=c&&!l1(a.addedNodes,i);c&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const $0=new Map;let u4=0;function ZD(){const e=window.devicePixelRatio;e!==u4&&(u4=e,$0.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function sne(e,t){$0.size||window.addEventListener("resize",ZD),$0.set(e,t)}function rne(e){$0.delete(e),$0.size||window.removeEventListener("resize",ZD)}function ane(e,t,n){const i=e.canvas,o=i&&OT(i);if(!o)return;const u=SD((a,g)=>{const _=o.clientWidth;n(a,g),_<o.clientWidth&&n()},window),c=new ResizeObserver(a=>{const g=a[0],_=g.contentRect.width,S=g.contentRect.height;_===0&&S===0||u(_,S)});return c.observe(o),sne(e,u),c}function G2(e,t,n){n&&n.disconnect(),t==="resize"&&rne(e)}function one(e,t,n){const i=e.canvas,o=SD(u=>{e.ctx!==null&&n(tne(u,e))},e);return Jte(i,t,o),o}class lne extends GD{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Qte(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[yv])return!1;const i=n[yv].initial;["height","width"].forEach(u=>{const c=i[u];Fi(c)?n.removeAttribute(u):n.setAttribute(u,c)});const o=i.style||{};return Object.keys(o).forEach(u=>{n.style[u]=o[u]}),n.width=n.width,delete n[yv],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const o=t.$proxies||(t.$proxies={}),c={attach:nne,detach:ine,resize:ane}[n]||one;o[n]=c(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),o=i[n];if(!o)return;({attach:G2,detach:G2,resize:G2}[n]||ene)(t,n,o),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,o){return Qee(t,n,i,o)}isAttached(t){const n=t&&OT(t);return!!(n&&n.isConnected)}}function cne(e){return!IT()||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas?Xte:lne}var Ub;let Ah=(Ub=class{constructor(){wn(this,"x");wn(this,"y");wn(this,"active",!1);wn(this,"options");wn(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return my(this.x)&&my(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const o={};return t.forEach(u=>{o[u]=i[u]&&i[u].active()?i[u]._to:this[u]}),o}},wn(Ub,"defaults",{}),wn(Ub,"defaultRoutes"),Ub);function une(e,t){const n=e.options.ticks,i=dne(e),o=Math.min(n.maxTicksLimit||i,i),u=n.major.enabled?fne(t):[],c=u.length,a=u[0],g=u[c-1],_=[];if(c>o)return pne(t,_,u,c/o),_;const S=hne(u,t,o);if(c>0){let E,A;const N=c>1?Math.round((g-a)/(c-1)):null;for(Rb(t,_,S,Fi(N)?0:a-N,a),E=0,A=c-1;E<A;E++)Rb(t,_,S,u[E],u[E+1]);return Rb(t,_,S,g,Fi(N)?t.length:g+N),_}return Rb(t,_,S),_}function dne(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),o=e._maxLength/n;return Math.floor(Math.min(i,o))}function hne(e,t,n){const i=mne(e),o=t.length/n;if(!i)return Math.max(o,1);const u=tee(i);for(let c=0,a=u.length-1;c<a;c++){const g=u[c];if(g>o)return g}return Math.max(o,1)}function fne(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function pne(e,t,n,i){let o=0,u=n[0],c;for(i=Math.ceil(i),c=0;c<e.length;c++)c===u&&(t.push(e[c]),o++,u=n[o*i])}function Rb(e,t,n,i,o){const u=bi(i,0),c=Math.min(bi(o,e.length),e.length);let a=0,g,_,S;for(n=Math.ceil(n),o&&(g=o-i,n=g/Math.floor(g/n)),S=u;S<0;)a++,S=Math.round(u+a*n);for(_=Math.max(u,0);_<c;_++)_===S&&(t.push(e[_]),a++,S=Math.round(u+a*n))}function mne(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const gne=e=>e==="left"?"right":e==="right"?"left":e,d4=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,h4=(e,t)=>Math.min(t||e,e);function f4(e,t){const n=[],i=e.length/t,o=e.length;let u=0;for(;u<o;u+=i)n.push(e[Math.floor(u)]);return n}function yne(e,t,n){const i=e.ticks.length,o=Math.min(t,i-1),u=e._startPixel,c=e._endPixel,a=1e-6;let g=e.getPixelForTick(o),_;if(!(n&&(i===1?_=Math.max(g-u,c-g):t===0?_=(e.getPixelForTick(1)-g)/2:_=(g-e.getPixelForTick(o-1))/2,g+=o<t?_:-_,g<u-a||g>c+a)))return g}function xne(e,t){vs(e,n=>{const i=n.gc,o=i.length/2;let u;if(o>t){for(u=0;u<o;++u)delete n.data[i[u]];i.splice(0,o)}})}function Yx(e){return e.drawTicks?e.tickLength:0}function p4(e,t){if(!e.display)return 0;const n=ua(e.font,t),i=bo(e.padding);return(ir(e.text)?e.text.length:1)*n.lineHeight+i.height}function _ne(e,t){return ep(e,{scale:t,type:"scale"})}function bne(e,t,n){return ep(e,{tick:n,index:t,type:"tick"})}function vne(e,t,n){let i=NT(e);return(n&&t!=="right"||!n&&t==="right")&&(i=gne(i)),i}function wne(e,t,n,i){const{top:o,left:u,bottom:c,right:a,chart:g}=e,{chartArea:_,scales:S}=g;let E=0,A,N,z;const B=c-o,$=a-u;if(e.isHorizontal()){if(N=ho(i,u,a),Vi(n)){const q=Object.keys(n)[0],W=n[q];z=S[q].getPixelForValue(W)+B-t}else n==="center"?z=(_.bottom+_.top)/2+B-t:z=d4(e,n,t);A=a-u}else{if(Vi(n)){const q=Object.keys(n)[0],W=n[q];N=S[q].getPixelForValue(W)-$+t}else n==="center"?N=(_.left+_.right)/2-$+t:N=d4(e,n,t);z=ho(i,c,o),E=n==="left"?-Nr:Nr}return{titleX:N,titleY:z,maxWidth:A,rotation:E}}class Om extends Ah{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:o}=this;return t=zl(t,Number.POSITIVE_INFINITY),n=zl(n,Number.NEGATIVE_INFINITY),i=zl(i,Number.POSITIVE_INFINITY),o=zl(o,Number.NEGATIVE_INFINITY),{min:zl(t,i),max:zl(n,o),minDefined:vr(t),maxDefined:vr(n)}}getMinMax(t){let{min:n,max:i,minDefined:o,maxDefined:u}=this.getUserBounds(),c;if(o&&u)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let g=0,_=a.length;g<_;++g)c=a[g].controller.getMinMax(this,t),o||(n=Math.min(n,c.min)),u||(i=Math.max(i,c.max));return n=u&&n>i?i:n,i=o&&n>i?n:i,{min:zl(n,zl(i,n)),max:zl(i,zl(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ws(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:o,grace:u,ticks:c}=this.options,a=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Nee(this,u,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const g=a<this.ticks.length;this._convertTicksToLabels(g?f4(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=une(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),g&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ws(this.options.afterUpdate,[this])}beforeSetDimensions(){Ws(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ws(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ws(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ws(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,o,u;for(i=0,o=t.length;i<o;i++)u=t[i],u.label=Ws(n.callback,[u.value,i,t],this)}afterTickToLabelConversion(){Ws(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ws(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=h4(this.ticks.length,t.ticks.maxTicksLimit),o=n.minRotation||0,u=n.maxRotation;let c=o,a,g,_;if(!this._isVisible()||!n.display||o>=u||i<=1||!this.isHorizontal()){this.labelRotation=o;return}const S=this._getLabelSizes(),E=S.widest.width,A=S.highest.height,N=Ta(this.chart.width-E,0,this.maxWidth);a=t.offset?this.maxWidth/i:N/(i-1),E+6>a&&(a=N/(i-(t.offset?.5:1)),g=this.maxHeight-Yx(t.grid)-n.padding-p4(t.title,this.chart.options.font),_=Math.sqrt(E*E+A*A),c=ET(Math.min(Math.asin(Ta((S.highest.height+6)/a,-1,1)),Math.asin(Ta(g/_,-1,1))-Math.asin(Ta(A/_,-1,1)))),c=Math.max(o,Math.min(u,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ws(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ws(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:o,grid:u}}=this,c=this._isVisible(),a=this.isHorizontal();if(c){const g=p4(o,n.options.font);if(a?(t.width=this.maxWidth,t.height=Yx(u)+g):(t.height=this.maxHeight,t.width=Yx(u)+g),i.display&&this.ticks.length){const{first:_,last:S,widest:E,highest:A}=this._getLabelSizes(),N=i.padding*2,z=yu(this.labelRotation),B=Math.cos(z),$=Math.sin(z);if(a){const q=i.mirror?0:$*E.width+B*A.height;t.height=Math.min(this.maxHeight,t.height+q+N)}else{const q=i.mirror?0:B*E.width+$*A.height;t.width=Math.min(this.maxWidth,t.width+q+N)}this._calculatePadding(_,S,$,B)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,o){const{ticks:{align:u,padding:c},position:a}=this.options,g=this.labelRotation!==0,_=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const S=this.getPixelForTick(0)-this.left,E=this.right-this.getPixelForTick(this.ticks.length-1);let A=0,N=0;g?_?(A=o*t.width,N=i*n.height):(A=i*t.height,N=o*n.width):u==="start"?N=n.width:u==="end"?A=t.width:u!=="inner"&&(A=t.width/2,N=n.width/2),this.paddingLeft=Math.max((A-S+c)*this.width/(this.width-S),0),this.paddingRight=Math.max((N-E+c)*this.width/(this.width-E),0)}else{let S=n.height/2,E=t.height/2;u==="start"?(S=0,E=t.height):u==="end"&&(S=n.height,E=0),this.paddingTop=S+c,this.paddingBottom=E+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ws(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Fi(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=f4(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:o,_longestTextCache:u}=this,c=[],a=[],g=Math.floor(n/h4(n,i));let _=0,S=0,E,A,N,z,B,$,q,W,Q,Z,K;for(E=0;E<n;E+=g){if(z=t[E].label,B=this._resolveTickFontOptions(E),o.font=$=B.string,q=u[$]=u[$]||{data:{},gc:[]},W=B.lineHeight,Q=Z=0,!Fi(z)&&!ir(z))Q=a1(o,q.data,q.gc,Q,z),Z=W;else if(ir(z))for(A=0,N=z.length;A<N;++A)K=z[A],!Fi(K)&&!ir(K)&&(Q=a1(o,q.data,q.gc,Q,K),Z+=W);c.push(Q),a.push(Z),_=Math.max(Q,_),S=Math.max(Z,S)}xne(u,n);const le=c.indexOf(_),ge=a.indexOf(S),he=pe=>({width:c[pe]||0,height:a[pe]||0});return{first:he(0),last:he(n-1),widest:he(le),highest:he(ge),widths:c,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return ree(this._alignToPixels?Jp(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=bne(this.getContext(),t,i))}return this.$context||(this.$context=_ne(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=yu(this.labelRotation),i=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),u=this._getLabelSizes(),c=t.autoSkipPadding||0,a=u?u.widest.width+c:0,g=u?u.highest.height+c:0;return this.isHorizontal()?g*i>a*o?a/i:g/o:g*o<a*i?g/i:a/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,o=this.options,{grid:u,position:c,border:a}=o,g=u.offset,_=this.isHorizontal(),E=this.ticks.length+(g?1:0),A=Yx(u),N=[],z=a.setContext(this.getContext()),B=z.display?z.width:0,$=B/2,q=function(De){return Jp(i,De,B)};let W,Q,Z,K,le,ge,he,pe,Ie,He,Ye,rt;if(c==="top")W=q(this.bottom),ge=this.bottom-A,pe=W-$,He=q(t.top)+$,rt=t.bottom;else if(c==="bottom")W=q(this.top),He=t.top,rt=q(t.bottom)-$,ge=W+$,pe=this.top+A;else if(c==="left")W=q(this.right),le=this.right-A,he=W-$,Ie=q(t.left)+$,Ye=t.right;else if(c==="right")W=q(this.left),Ie=t.left,Ye=q(t.right)-$,le=W+$,he=this.left+A;else if(n==="x"){if(c==="center")W=q((t.top+t.bottom)/2+.5);else if(Vi(c)){const De=Object.keys(c)[0],Qe=c[De];W=q(this.chart.scales[De].getPixelForValue(Qe))}He=t.top,rt=t.bottom,ge=W+$,pe=ge+A}else if(n==="y"){if(c==="center")W=q((t.left+t.right)/2);else if(Vi(c)){const De=Object.keys(c)[0],Qe=c[De];W=q(this.chart.scales[De].getPixelForValue(Qe))}le=W-$,he=le-A,Ie=t.left,Ye=t.right}const Rt=bi(o.ticks.maxTicksLimit,E),St=Math.max(1,Math.ceil(E/Rt));for(Q=0;Q<E;Q+=St){const De=this.getContext(Q),Qe=u.setContext(De),et=a.setContext(De),Nt=Qe.lineWidth,fe=Qe.color,Xe=et.dash||[],tt=et.dashOffset,Me=Qe.tickWidth,ot=Qe.tickColor,ut=Qe.tickBorderDash||[],dt=Qe.tickBorderDashOffset;Z=yne(this,Q,g),Z!==void 0&&(K=Jp(i,Z,Nt),_?le=he=Ie=Ye=K:ge=pe=He=rt=K,N.push({tx1:le,ty1:ge,tx2:he,ty2:pe,x1:Ie,y1:He,x2:Ye,y2:rt,width:Nt,color:fe,borderDash:Xe,borderDashOffset:tt,tickWidth:Me,tickColor:ot,tickBorderDash:ut,tickBorderDashOffset:dt}))}return this._ticksLength=E,this._borderValue=W,N}_computeLabelItems(t){const n=this.axis,i=this.options,{position:o,ticks:u}=i,c=this.isHorizontal(),a=this.ticks,{align:g,crossAlign:_,padding:S,mirror:E}=u,A=Yx(i.grid),N=A+S,z=E?-S:N,B=-yu(this.labelRotation),$=[];let q,W,Q,Z,K,le,ge,he,pe,Ie,He,Ye,rt="middle";if(o==="top")le=this.bottom-z,ge=this._getXAxisLabelAlignment();else if(o==="bottom")le=this.top+z,ge=this._getXAxisLabelAlignment();else if(o==="left"){const St=this._getYAxisLabelAlignment(A);ge=St.textAlign,K=St.x}else if(o==="right"){const St=this._getYAxisLabelAlignment(A);ge=St.textAlign,K=St.x}else if(n==="x"){if(o==="center")le=(t.top+t.bottom)/2+N;else if(Vi(o)){const St=Object.keys(o)[0],De=o[St];le=this.chart.scales[St].getPixelForValue(De)+N}ge=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")K=(t.left+t.right)/2-N;else if(Vi(o)){const St=Object.keys(o)[0],De=o[St];K=this.chart.scales[St].getPixelForValue(De)}ge=this._getYAxisLabelAlignment(A).textAlign}n==="y"&&(g==="start"?rt="top":g==="end"&&(rt="bottom"));const Rt=this._getLabelSizes();for(q=0,W=a.length;q<W;++q){Q=a[q],Z=Q.label;const St=u.setContext(this.getContext(q));he=this.getPixelForTick(q)+u.labelOffset,pe=this._resolveTickFontOptions(q),Ie=pe.lineHeight,He=ir(Z)?Z.length:1;const De=He/2,Qe=St.color,et=St.textStrokeColor,Nt=St.textStrokeWidth;let fe=ge;c?(K=he,ge==="inner"&&(q===W-1?fe=this.options.reverse?"left":"right":q===0?fe=this.options.reverse?"right":"left":fe="center"),o==="top"?_==="near"||B!==0?Ye=-He*Ie+Ie/2:_==="center"?Ye=-Rt.highest.height/2-De*Ie+Ie:Ye=-Rt.highest.height+Ie/2:_==="near"||B!==0?Ye=Ie/2:_==="center"?Ye=Rt.highest.height/2-De*Ie:Ye=Rt.highest.height-He*Ie,E&&(Ye*=-1),B!==0&&!St.showLabelBackdrop&&(K+=Ie/2*Math.sin(B))):(le=he,Ye=(1-He)*Ie/2);let Xe;if(St.showLabelBackdrop){const tt=bo(St.backdropPadding),Me=Rt.heights[q],ot=Rt.widths[q];let ut=Ye-tt.top,dt=0-tt.left;switch(rt){case"middle":ut-=Me/2;break;case"bottom":ut-=Me;break}switch(ge){case"center":dt-=ot/2;break;case"right":dt-=ot;break;case"inner":q===W-1?dt-=ot:q>0&&(dt-=ot/2);break}Xe={left:dt,top:ut,width:ot+tt.width,height:Me+tt.height,color:St.backdropColor}}$.push({label:Z,font:pe,textOffset:Ye,options:{rotation:B,color:Qe,strokeColor:et,strokeWidth:Nt,textAlign:fe,textBaseline:rt,translation:[K,le],backdrop:Xe}})}return $}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-yu(this.labelRotation))return t==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"?o="right":n.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:o,padding:u}}=this.options,c=this._getLabelSizes(),a=t+u,g=c.widest.width;let _,S;return n==="left"?o?(S=this.right+u,i==="near"?_="left":i==="center"?(_="center",S+=g/2):(_="right",S+=g)):(S=this.right-a,i==="near"?_="right":i==="center"?(_="center",S-=g/2):(_="left",S=this.left)):n==="right"?o?(S=this.left+u,i==="near"?_="right":i==="center"?(_="center",S-=g/2):(_="left",S-=g)):(S=this.left+a,i==="near"?_="left":i==="center"?(_="center",S+=g/2):(_="right",S=this.right)):_="right",{textAlign:_,x:S}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:o,width:u,height:c}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,o,u,c),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(u=>u.value===t);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let u,c;const a=(g,_,S)=>{!S.width||!S.color||(i.save(),i.lineWidth=S.width,i.strokeStyle=S.color,i.setLineDash(S.borderDash||[]),i.lineDashOffset=S.borderDashOffset,i.beginPath(),i.moveTo(g.x,g.y),i.lineTo(_.x,_.y),i.stroke(),i.restore())};if(n.display)for(u=0,c=o.length;u<c;++u){const g=o[u];n.drawOnChartArea&&a({x:g.x1,y:g.y1},{x:g.x2,y:g.y2},g),n.drawTicks&&a({x:g.tx1,y:g.ty1},{x:g.tx2,y:g.ty2},{color:g.tickColor,width:g.tickWidth,borderDash:g.tickBorderDash,borderDashOffset:g.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:o}}=this,u=i.setContext(this.getContext()),c=i.display?u.width:0;if(!c)return;const a=o.setContext(this.getContext(0)).lineWidth,g=this._borderValue;let _,S,E,A;this.isHorizontal()?(_=Jp(t,this.left,c)-c/2,S=Jp(t,this.right,a)+a/2,E=A=g):(E=Jp(t,this.top,c)-c/2,A=Jp(t,this.bottom,a)+a/2,_=S=g),n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.beginPath(),n.moveTo(_,E),n.lineTo(S,A),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,o=this._computeLabelArea();o&&Z1(i,o);const u=this.getLabelItems(t);for(const c of u){const a=c.options,g=c.font,_=c.label,S=c.textOffset;Pm(i,_,0,S,g,a)}o&&Y1(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:o}}=this;if(!i.display)return;const u=ua(i.font),c=bo(i.padding),a=i.align;let g=u.lineHeight/2;n==="bottom"||n==="center"||Vi(n)?(g+=c.bottom,ir(i.text)&&(g+=u.lineHeight*(i.text.length-1))):g+=c.top;const{titleX:_,titleY:S,maxWidth:E,rotation:A}=wne(this,g,n,a);Pm(t,i.text,0,0,u,{color:i.color,maxWidth:E,rotation:A,textAlign:vne(a,n,o),textBaseline:"middle",translation:[_,S]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=bi(t.grid&&t.grid.z,-1),o=bi(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Om.prototype.draw?[{z:n,draw:u=>{this.draw(u)}}]:[{z:i,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:n,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[];let u,c;for(u=0,c=n.length;u<c;++u){const a=n[u];a[i]===this.id&&(!t||a.type===t)&&o.push(a)}return o}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return ua(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Db{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;Cne(n)&&(i=this.register(n));const o=this.items,u=t.id,c=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+t);return u in o||(o[u]=t,Sne(t,c,i),this.override&&rr.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,o=this.scope;i in n&&delete n[i],o&&i in rr[o]&&(delete rr[o][i],this.override&&delete Am[i])}}function Sne(e,t,n){const i=L0(Object.create(null),[n?rr.get(n):{},rr.get(t),e.defaults]);rr.set(t,i),e.defaultRoutes&&jne(t,e.defaultRoutes),e.descriptors&&rr.describe(t,e.descriptors)}function jne(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),o=i.pop(),u=[e].concat(i).join("."),c=t[n].split("."),a=c.pop(),g=c.join(".");rr.route(u,o,g,a)})}function Cne(e){return"id"in e&&"defaults"in e}class Tne{constructor(){this.controllers=new Db(xu,"datasets",!0),this.elements=new Db(Ah,"elements"),this.plugins=new Db(Object,"plugins"),this.scales=new Db(Om,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(o=>{const u=i||this._getRegistryForType(o);i||u.isForType(o)||u===this.plugins&&o.id?this._exec(t,u,o):vs(o,c=>{const a=i||this._getRegistryForType(c);this._exec(t,a,c)})})}_exec(t,n,i){const o=kT(t);Ws(i["before"+o],[],i),n[t](i),Ws(i["after"+o],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const o=n.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return o}}var dd=new Tne;class kne{constructor(){this._init=[]}notify(t,n,i,o){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const u=o?this._descriptors(t).filter(o):this._descriptors(t),c=this._notify(u,t,n,i);return n==="afterDestroy"&&(this._notify(u,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,n,i,o){o=o||{};for(const u of t){const c=u.plugin,a=c[i],g=[n,o,u.options];if(Ws(a,g,c)===!1&&o.cancelable)return!1}return!0}invalidate(){Fi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,o=bi(i.options&&i.options.plugins,{}),u=Ene(i);return o===!1&&!n?[]:Nne(t,u,o,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,o=(u,c)=>u.filter(a=>!c.some(g=>a.plugin.id===g.plugin.id));this._notify(o(n,i),t,"stop"),this._notify(o(i,n),t,"start")}}function Ene(e){const t={},n=[],i=Object.keys(dd.plugins.items);for(let u=0;u<i.length;u++)n.push(dd.getPlugin(i[u]));const o=e.plugins||[];for(let u=0;u<o.length;u++){const c=o[u];n.indexOf(c)===-1&&(n.push(c),t[c.id]=!0)}return{plugins:n,localIds:t}}function Mne(e,t){return!t&&e===!1?null:e===!0?{}:e}function Nne(e,{plugins:t,localIds:n},i,o){const u=[],c=e.getContext();for(const a of t){const g=a.id,_=Mne(i[g],o);_!==null&&u.push({plugin:a,options:Ane(e.config,{plugin:a,local:n[g]},_,c)})}return u}function Ane(e,{plugin:t,local:n},i,o){const u=e.pluginScopeKeys(t),c=e.getOptionScopes(i,u);return n&&t.defaults&&c.push(t.defaults),e.createResolver(c,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cj(e,t){const n=rr.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Pne(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Rne(e,t){return e===t?"_index_":"_value_"}function m4(e){if(e==="x"||e==="y"||e==="r")return e}function Dne(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Tj(e,...t){if(m4(e))return e;for(const n of t){const i=n.axis||Dne(n.position)||e.length>1&&m4(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function g4(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function zne(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return g4(e,"x",n[0])||g4(e,"y",n[0])}return{}}function Ine(e,t){const n=Am[e.type]||{scales:{}},i=t.scales||{},o=Cj(e.type,t),u=Object.create(null);return Object.keys(i).forEach(c=>{const a=i[c];if(!Vi(a))return console.error(`Invalid scale configuration for scale: ${c}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const g=Tj(c,a,zne(c,e),rr.scales[a.type]),_=Rne(g,o),S=n.scales||{};u[c]=y0(Object.create(null),[{axis:g},a,S[g],S[_]])}),e.data.datasets.forEach(c=>{const a=c.type||e.type,g=c.indexAxis||Cj(a,t),S=(Am[a]||{}).scales||{};Object.keys(S).forEach(E=>{const A=Pne(E,g),N=c[A+"AxisID"]||A;u[N]=u[N]||Object.create(null),y0(u[N],[{axis:A},i[N],S[E]])})}),Object.keys(u).forEach(c=>{const a=u[c];y0(a,[rr.scales[a.type],rr.scale])}),u}function YD(e){const t=e.options||(e.options={});t.plugins=bi(t.plugins,{}),t.scales=Ine(e,t)}function XD(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function One(e){return e=e||{},e.data=XD(e.data),YD(e),e}const y4=new Map,KD=new Set;function zb(e,t){let n=y4.get(e);return n||(n=t(),y4.set(e,n),KD.add(n)),n}const Xx=(e,t,n)=>{const i=Wf(t,n);i!==void 0&&e.add(i)};class Fne{constructor(t){this._config=One(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=XD(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),YD(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return zb(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return zb(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return zb(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return zb(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let o=i.get(t);return(!o||n)&&(o=new Map,i.set(t,o)),o}getOptionScopes(t,n,i){const{options:o,type:u}=this,c=this._cachedScopes(t,i),a=c.get(n);if(a)return a;const g=new Set;n.forEach(S=>{t&&(g.add(t),S.forEach(E=>Xx(g,t,E))),S.forEach(E=>Xx(g,o,E)),S.forEach(E=>Xx(g,Am[u]||{},E)),S.forEach(E=>Xx(g,rr,E)),S.forEach(E=>Xx(g,wj,E))});const _=Array.from(g);return _.length===0&&_.push(Object.create(null)),KD.has(n)&&c.set(n,_),_}chartOptionScopes(){const{options:t,type:n}=this;return[t,Am[n]||{},rr.datasets[n]||{},{type:n},rr,wj]}resolveNamedOptions(t,n,i,o=[""]){const u={$shared:!0},{resolver:c,subPrefixes:a}=x4(this._resolverCache,t,o);let g=c;if(Bne(c,n)){u.$shared=!1,i=Zf(i)?i():i;const _=this.createResolver(t,i,a);g=gy(c,i,_)}for(const _ of n)u[_]=g[_];return u}createResolver(t,n,i=[""],o){const{resolver:u}=x4(this._resolverCache,t,i);return Vi(n)?gy(u,n,void 0,o):u}}function x4(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const o=n.join();let u=i.get(o);return u||(u={resolver:RT(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(o,u)),u}const Lne=e=>Vi(e)&&Object.getOwnPropertyNames(e).some(t=>Zf(e[t]));function Bne(e,t){const{isScriptable:n,isIndexable:i}=MD(e);for(const o of t){const u=n(o),c=i(o),a=(c||u)&&e[o];if(u&&(Zf(a)||Lne(a))||c&&ir(a))return!0}return!1}var Vne="4.5.0";const Une=["top","bottom","left","right","chartArea"];function _4(e,t){return e==="top"||e==="bottom"||Une.indexOf(e)===-1&&t==="x"}function b4(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function v4(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ws(n&&n.onComplete,[e],t)}function $ne(e){const t=e.chart,n=t.options.animation;Ws(n&&n.onProgress,[e],t)}function QD(e){return IT()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const xv={},w4=e=>{const t=QD(e);return Object.values(xv).filter(n=>n.canvas===t).pop()};function Hne(e,t,n){const i=Object.keys(e);for(const o of i){const u=+o;if(u>=t){const c=e[o];delete e[o],(n>0||u>t)&&(e[u+n]=c)}}}function qne(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}var Nf;let Q1=(Nf=class{static register(...t){dd.add(...t),S4()}static unregister(...t){dd.remove(...t),S4()}constructor(t,n){const i=this.config=new Fne(n),o=QD(t),u=w4(o);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||cne(o)),this.platform.updateConfig(i);const a=this.platform.acquireContext(o,c.aspectRatio),g=a&&a.canvas,_=g&&g.height,S=g&&g.width;if(this.id=GJ(),this.ctx=a,this.canvas=g,this.width=S,this.height=_,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new kne,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cee(E=>this.update(E),c.resizeDelay||0),this._dataChanges=[],xv[this.id]=this,!a||!g){console.error("Failed to create chart: can't acquire context from the given item");return}fh.listen(this,"complete",v4),fh.listen(this,"progress",$ne),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:o,_aspectRatio:u}=this;return Fi(t)?n&&u?u:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return dd}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qN(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return UN(this.canvas,this.ctx),this}stop(){return fh.stop(this),this}resize(t,n){fh.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,o=this.canvas,u=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(o,t,n,u),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),g=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,qN(this,a,!0)&&(this.notifyPlugins("resize",{size:c}),Ws(i.onResize,[this,c],this),this.attached&&this._doResize(g)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};vs(n,(i,o)=>{i.id=o})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,o=Object.keys(i).reduce((c,a)=>(c[a]=!1,c),{});let u=[];n&&(u=u.concat(Object.keys(n).map(c=>{const a=n[c],g=Tj(c,a),_=g==="r",S=g==="x";return{options:a,dposition:_?"chartArea":S?"bottom":"left",dtype:_?"radialLinear":S?"category":"linear"}}))),vs(u,c=>{const a=c.options,g=a.id,_=Tj(g,a),S=bi(a.type,c.dtype);(a.position===void 0||_4(a.position,_)!==_4(c.dposition))&&(a.position=c.dposition),o[g]=!0;let E=null;if(g in i&&i[g].type===S)E=i[g];else{const A=dd.getScale(S);E=new A({id:g,type:S,ctx:this.ctx,chart:this}),i[E.id]=E}E.init(a,t)}),vs(o,(c,a)=>{c||delete i[a]}),vs(i,c=>{xo.configure(this,c,c.options),xo.addBox(this,c)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((o,u)=>o.index-u.index),i>n){for(let o=n;o<i;++o)this._destroyDatasetMeta(o);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(b4("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,o)=>{n.filter(u=>u===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,o;for(this._removeUnreferencedMetasets(),i=0,o=n.length;i<o;i++){const u=n[i];let c=this.getDatasetMeta(i);const a=u.type||this.config.type;if(c.type&&c.type!==a&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=a,c.indexAxis=u.indexAxis||Cj(a,this.options),c.order=u.order||0,c.index=i,c.label=""+u.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const g=dd.getController(a),{datasetElementType:_,dataElementType:S}=rr.datasets[a];Object.assign(g,{dataElementType:dd.getElement(S),datasetElementType:_&&dd.getElement(_)}),c.controller=new g(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){vs(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let _=0,S=this.data.datasets.length;_<S;_++){const{controller:E}=this.getDatasetMeta(_),A=!o&&u.indexOf(E)===-1;E.buildOrUpdateElements(A),c=Math.max(+E.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),o||vs(u,_=>{_.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(b4("z","_idx"));const{_active:a,_lastEvent:g}=this;g?this._eventHandler(g,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){vs(this.scales,t=>{xo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!RN(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:o,count:u}of n){const c=i==="_removeElements"?-u:u;Hne(t,o,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=u=>new Set(t.filter(c=>c[0]===u).map((c,a)=>a+","+c.splice(1).join(","))),o=i(0);for(let u=1;u<n;u++)if(!RN(o,i(u)))return;return Array.from(o).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xo.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],vs(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,u)=>{o._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Zf(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),o={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fh.has(this)?this.attached&&!fh.running(this)&&fh.start(this):(this.draw(),v4({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let o,u;for(o=0,u=n.length;o<u;++o){const c=n[o];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},o=BD(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&Z1(n,o),t.controller.draw(),o&&Y1(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return _h(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,o){const u=Ute.modes[n];return typeof u=="function"?u(this,t,i,o):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let o=i.filter(u=>u&&u._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=ep(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const o=i?"show":"hide",u=this.getDatasetMeta(t),c=u.controller._resolveAnimations(void 0,o);B0(n)?(u.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(u,{visible:i}),this.update(a=>a.datasetIndex===t?o:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),fh.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),UN(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete xv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(u,c)=>{n.addEventListener(this,u,c),t[u]=c},o=(u,c,a)=>{u.offsetX=c,u.offsetY=a,this._eventHandler(u)};vs(this.options.events,u=>i(u,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(g,_)=>{n.addEventListener(this,g,_),t[g]=_},o=(g,_)=>{t[g]&&(n.removeEventListener(this,g,_),delete t[g])},u=(g,_)=>{this.canvas&&this.resize(g,_)};let c;const a=()=>{o("attach",a),this.attached=!0,this.resize(),i("resize",u),i("detach",c)};c=()=>{this.attached=!1,o("resize",u),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():c()}unbindEvents(){vs(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},vs(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const o=i?"set":"remove";let u,c,a,g;for(n==="dataset"&&(u=this.getDatasetMeta(t[0].datasetIndex),u.controller["_"+o+"DatasetHoverStyle"]()),a=0,g=t.length;a<g;++a){c=t[a];const _=c&&this.getDatasetMeta(c.datasetIndex).controller;_&&_[o+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:u,index:c})=>{const a=this.getDatasetMeta(u);if(!a)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:a.data[c],index:c}});!i1(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const o=this.options.hover,u=(g,_)=>g.filter(S=>!_.some(E=>S.datasetIndex===E.datasetIndex&&S.index===E.index)),c=u(n,t),a=i?t:u(t,n);c.length&&this.updateHoverStyle(c,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},o=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;const u=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(u||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:o=[],options:u}=this,c=n,a=this._getActiveElements(t,o,i,c),g=QJ(t),_=qne(t,this._lastEvent,i,g);i&&(this._lastEvent=null,Ws(u.onHover,[t,a,this],this),g&&Ws(u.onClick,[t,a,this],this));const S=!i1(a,o);return(S||n)&&(this._active=a,this._updateHoverStyles(a,o,n)),this._lastEvent=_,S}_getActiveElements(t,n,i,o){if(t.type==="mouseout")return[];if(!i)return n;const u=this.options.hover;return this.getElementsAtEventForMode(t,u.mode,u,o)}},wn(Nf,"defaults",rr),wn(Nf,"instances",xv),wn(Nf,"overrides",Am),wn(Nf,"registry",dd),wn(Nf,"version",Vne),wn(Nf,"getChart",w4),Nf);function S4(){return vs(Q1.instances,e=>e._plugins.invalidate())}function Gne(e,t,n){const{startAngle:i,x:o,y:u,outerRadius:c,innerRadius:a,options:g}=t,{borderWidth:_,borderJoinStyle:S}=g,E=Math.min(_/c,po(i-n));if(e.beginPath(),e.arc(o,u,c-_/2,i+E/2,n-E/2),a>0){const A=Math.min(_/a,po(i-n));e.arc(o,u,a+_/2,n-A/2,i+A/2,!0)}else{const A=Math.min(_/2,c*po(i-n));if(S==="round")e.arc(o,u,A,n-ss/2,i+ss/2,!0);else if(S==="bevel"){const N=2*A*A,z=-N*Math.cos(n+ss/2)+o,B=-N*Math.sin(n+ss/2)+u,$=N*Math.cos(i+ss/2)+o,q=N*Math.sin(i+ss/2)+u;e.lineTo(z,B),e.lineTo($,q)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Wne(e,t,n){const{startAngle:i,pixelMargin:o,x:u,y:c,outerRadius:a,innerRadius:g}=t;let _=o/a;e.beginPath(),e.arc(u,c,a,i-_,n+_),g>o?(_=o/g,e.arc(u,c,g,n+_,i-_,!0)):e.arc(u,c,o,n+Nr,i-Nr),e.closePath(),e.clip()}function Zne(e){return PT(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Yne(e,t,n,i){const o=Zne(e.options.borderRadius),u=(n-t)/2,c=Math.min(u,i*t/2),a=g=>{const _=(n-Math.min(u,g))*i/2;return Ta(g,0,Math.min(u,_))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:Ta(o.innerStart,0,c),innerEnd:Ta(o.innerEnd,0,c)}}function Hg(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function c1(e,t,n,i,o,u){const{x:c,y:a,startAngle:g,pixelMargin:_,innerRadius:S}=t,E=Math.max(t.outerRadius+i+n-_,0),A=S>0?S+i+n+_:0;let N=0;const z=o-g;if(i){const St=S>0?S-i:0,De=E>0?E-i:0,Qe=(St+De)/2,et=Qe!==0?z*Qe/(Qe+i):z;N=(z-et)/2}const B=Math.max(.001,z*E-n/ss)/E,$=(z-B)/2,q=g+$+N,W=o-$-N,{outerStart:Q,outerEnd:Z,innerStart:K,innerEnd:le}=Yne(t,A,E,W-q),ge=E-Q,he=E-Z,pe=q+Q/ge,Ie=W-Z/he,He=A+K,Ye=A+le,rt=q+K/He,Rt=W-le/Ye;if(e.beginPath(),u){const St=(pe+Ie)/2;if(e.arc(c,a,E,pe,St),e.arc(c,a,E,St,Ie),Z>0){const Nt=Hg(he,Ie,c,a);e.arc(Nt.x,Nt.y,Z,Ie,W+Nr)}const De=Hg(Ye,W,c,a);if(e.lineTo(De.x,De.y),le>0){const Nt=Hg(Ye,Rt,c,a);e.arc(Nt.x,Nt.y,le,W+Nr,Rt+Math.PI)}const Qe=(W-le/A+(q+K/A))/2;if(e.arc(c,a,A,W-le/A,Qe,!0),e.arc(c,a,A,Qe,q+K/A,!0),K>0){const Nt=Hg(He,rt,c,a);e.arc(Nt.x,Nt.y,K,rt+Math.PI,q-Nr)}const et=Hg(ge,q,c,a);if(e.lineTo(et.x,et.y),Q>0){const Nt=Hg(ge,pe,c,a);e.arc(Nt.x,Nt.y,Q,q-Nr,pe)}}else{e.moveTo(c,a);const St=Math.cos(pe)*E+c,De=Math.sin(pe)*E+a;e.lineTo(St,De);const Qe=Math.cos(Ie)*E+c,et=Math.sin(Ie)*E+a;e.lineTo(Qe,et)}e.closePath()}function Xne(e,t,n,i,o){const{fullCircles:u,startAngle:c,circumference:a}=t;let g=t.endAngle;if(u){c1(e,t,n,i,g,o);for(let _=0;_<u;++_)e.fill();isNaN(a)||(g=c+(a%Qs||Qs))}return c1(e,t,n,i,g,o),e.fill(),g}function Kne(e,t,n,i,o){const{fullCircles:u,startAngle:c,circumference:a,options:g}=t,{borderWidth:_,borderJoinStyle:S,borderDash:E,borderDashOffset:A,borderRadius:N}=g,z=g.borderAlign==="inner";if(!_)return;e.setLineDash(E||[]),e.lineDashOffset=A,z?(e.lineWidth=_*2,e.lineJoin=S||"round"):(e.lineWidth=_,e.lineJoin=S||"bevel");let B=t.endAngle;if(u){c1(e,t,n,i,B,o);for(let $=0;$<u;++$)e.stroke();isNaN(a)||(B=c+(a%Qs||Qs))}z&&Wne(e,t,B),g.selfJoin&&B-c>=ss&&N===0&&S!=="miter"&&Gne(e,t,B),u||(c1(e,t,n,i,B,o),e.stroke())}class r0 extends Ah{constructor(n){super();wn(this,"circumference");wn(this,"endAngle");wn(this,"fullCircles");wn(this,"innerRadius");wn(this,"outerRadius");wn(this,"pixelMargin");wn(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,o){const u=this.getProps(["x","y"],o),{angle:c,distance:a}=_D(u,{x:n,y:i}),{startAngle:g,endAngle:_,innerRadius:S,outerRadius:E,circumference:A}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),N=(this.options.spacing+this.options.borderWidth)/2,z=bi(A,_-g),B=V0(c,g,_)&&g!==_,$=z>=Qs||B,q=yh(a,S+N,E+N);return $&&q}getCenterPoint(n){const{x:i,y:o,startAngle:u,endAngle:c,innerRadius:a,outerRadius:g}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:_,spacing:S}=this.options,E=(u+c)/2,A=(a+g+S+_)/2;return{x:i+Math.cos(E)*A,y:o+Math.sin(E)*A}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:o}=this,u=(i.offset||0)/4,c=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=o>Qs?Math.floor(o/Qs):0,o===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const g=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(g)*u,Math.sin(g)*u);const _=1-Math.sin(Math.min(ss,o||0)),S=u*_;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,Xne(n,this,S,c,a),Kne(n,this,S,c,a),n.restore()}}wn(r0,"id","arc"),wn(r0,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),wn(r0,"defaultRoutes",{backgroundColor:"backgroundColor"}),wn(r0,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function JD(e,t,n=t){e.lineCap=bi(n.borderCapStyle,t.borderCapStyle),e.setLineDash(bi(n.borderDash,t.borderDash)),e.lineDashOffset=bi(n.borderDashOffset,t.borderDashOffset),e.lineJoin=bi(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=bi(n.borderWidth,t.borderWidth),e.strokeStyle=bi(n.borderColor,t.borderColor)}function Qne(e,t,n){e.lineTo(n.x,n.y)}function Jne(e){return e.stepped?vee:e.tension||e.cubicInterpolationMode==="monotone"?wee:Qne}function ez(e,t,n={}){const i=e.length,{start:o=0,end:u=i-1}=n,{start:c,end:a}=t,g=Math.max(o,c),_=Math.min(u,a),S=o<c&&u<c||o>a&&u>a;return{count:i,start:g,loop:t.loop,ilen:_<g&&!S?i+_-g:_-g}}function eie(e,t,n,i){const{points:o,options:u}=t,{count:c,start:a,loop:g,ilen:_}=ez(o,n,i),S=Jne(u);let{move:E=!0,reverse:A}=i||{},N,z,B;for(N=0;N<=_;++N)z=o[(a+(A?_-N:N))%c],!z.skip&&(E?(e.moveTo(z.x,z.y),E=!1):S(e,B,z,A,u.stepped),B=z);return g&&(z=o[(a+(A?_:0))%c],S(e,B,z,A,u.stepped)),!!g}function tie(e,t,n,i){const o=t.points,{count:u,start:c,ilen:a}=ez(o,n,i),{move:g=!0,reverse:_}=i||{};let S=0,E=0,A,N,z,B,$,q;const W=Z=>(c+(_?a-Z:Z))%u,Q=()=>{B!==$&&(e.lineTo(S,$),e.lineTo(S,B),e.lineTo(S,q))};for(g&&(N=o[W(0)],e.moveTo(N.x,N.y)),A=0;A<=a;++A){if(N=o[W(A)],N.skip)continue;const Z=N.x,K=N.y,le=Z|0;le===z?(K<B?B=K:K>$&&($=K),S=(E*S+Z)/++E):(Q(),e.lineTo(Z,K),z=le,E=0,B=$=K),q=K}Q()}function kj(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?tie:eie}function nie(e){return e.stepped?ete:e.tension||e.cubicInterpolationMode==="monotone"?tte:rm}function iie(e,t,n,i){let o=t._path;o||(o=t._path=new Path2D,t.path(o,n,i)&&o.closePath()),JD(e,t.options),e.stroke(o)}function sie(e,t,n,i){const{segments:o,options:u}=t,c=kj(t);for(const a of o)JD(e,u,a.style),e.beginPath(),c(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const rie=typeof Path2D=="function";function aie(e,t,n,i){rie&&!t.options.segment?iie(e,t,n,i):sie(e,t,n,i)}class Ff extends Ah{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const o=i.spanGaps?this._loop:this._fullLoop;Gee(this._points,i,t,o,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ote(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,o=t[n],u=this.points,c=LD(this,{property:n,start:o,end:o});if(!c.length)return;const a=[],g=nie(i);let _,S;for(_=0,S=c.length;_<S;++_){const{start:E,end:A}=c[_],N=u[E],z=u[A];if(N===z){a.push(N);continue}const B=Math.abs((o-N[n])/(z[n]-N[n])),$=g(N,z,B,i.stepped);$[n]=t[n],a.push($)}return a.length===1?a[0]:a}pathSegment(t,n,i){return kj(this)(t,this,n,i)}path(t,n,i){const o=this.segments,u=kj(this);let c=this._loop;n=n||0,i=i||this.points.length-n;for(const a of o)c&=u(t,this,a,{start:n,end:n+i-1});return!!c}draw(t,n,i,o){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(t.save(),aie(t,this,i,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}wn(Ff,"id","line"),wn(Ff,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),wn(Ff,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),wn(Ff,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function j4(e,t,n,i){const o=e.options,{[n]:u}=e.getProps([n],i);return Math.abs(t-u)<o.radius+o.hitRadius}class _v extends Ah{constructor(n){super();wn(this,"parsed");wn(this,"skip");wn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,o){const u=this.options,{x:c,y:a}=this.getProps(["x","y"],o);return Math.pow(n-c,2)+Math.pow(i-a,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(n,i){return j4(this,n,"x",i)}inYRange(n,i){return j4(this,n,"y",i)}getCenterPoint(n){const{x:i,y:o}=this.getProps(["x","y"],n);return{x:i,y:o}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const o=i&&n.borderWidth||0;return(i+o)*2}draw(n,i){const o=this.options;this.skip||o.radius<.1||!_h(this,i,this.size(o)/2)||(n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.fillStyle=o.backgroundColor,Sj(n,o,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}wn(_v,"id","point"),wn(_v,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),wn(_v,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function tz(e,t){const{x:n,y:i,base:o,width:u,height:c}=e.getProps(["x","y","base","width","height"],t);let a,g,_,S,E;return e.horizontal?(E=c/2,a=Math.min(n,o),g=Math.max(n,o),_=i-E,S=i+E):(E=u/2,a=n-E,g=n+E,_=Math.min(i,o),S=Math.max(i,o)),{left:a,top:_,right:g,bottom:S}}function Lf(e,t,n,i){return e?0:Ta(t,n,i)}function oie(e,t,n){const i=e.options.borderWidth,o=e.borderSkipped,u=ED(i);return{t:Lf(o.top,u.top,0,n),r:Lf(o.right,u.right,0,t),b:Lf(o.bottom,u.bottom,0,n),l:Lf(o.left,u.left,0,t)}}function lie(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),o=e.options.borderRadius,u=ym(o),c=Math.min(t,n),a=e.borderSkipped,g=i||Vi(o);return{topLeft:Lf(!g||a.top||a.left,u.topLeft,0,c),topRight:Lf(!g||a.top||a.right,u.topRight,0,c),bottomLeft:Lf(!g||a.bottom||a.left,u.bottomLeft,0,c),bottomRight:Lf(!g||a.bottom||a.right,u.bottomRight,0,c)}}function cie(e){const t=tz(e),n=t.right-t.left,i=t.bottom-t.top,o=oie(e,n/2,i/2),u=lie(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:u},inner:{x:t.left+o.l,y:t.top+o.t,w:n-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,u.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,u.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,u.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,u.bottomRight-Math.max(o.b,o.r))}}}}function W2(e,t,n,i){const o=t===null,u=n===null,a=e&&!(o&&u)&&tz(e,i);return a&&(o||yh(t,a.left,a.right))&&(u||yh(n,a.top,a.bottom))}function uie(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function die(e,t){e.rect(t.x,t.y,t.w,t.h)}function Z2(e,t,n={}){const i=e.x!==n.x?-t:0,o=e.y!==n.y?-t:0,u=(e.x+e.w!==n.x+n.w?t:0)-i,c=(e.y+e.h!==n.y+n.h?t:0)-o;return{x:e.x+i,y:e.y+o,w:e.w+u,h:e.h+c,radius:e.radius}}class bv extends Ah{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:o}}=this,{inner:u,outer:c}=cie(this),a=uie(c.radius)?U0:die;t.save(),(c.w!==u.w||c.h!==u.h)&&(t.beginPath(),a(t,Z2(c,n,u)),t.clip(),a(t,Z2(u,-n,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Z2(u,n)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,n,i){return W2(this,t,n,i)}inXRange(t,n){return W2(this,t,null,n)}inYRange(t,n){return W2(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:o,horizontal:u}=this.getProps(["x","y","base","horizontal"],t);return{x:u?(n+o)/2:n,y:u?i:(i+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}wn(bv,"id","bar"),wn(bv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),wn(bv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var hie=Object.freeze({__proto__:null,ArcElement:r0,BarElement:bv,LineElement:Ff,PointElement:_v});const Ej=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],C4=Ej.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function nz(e){return Ej[e%Ej.length]}function iz(e){return C4[e%C4.length]}function fie(e,t){return e.borderColor=nz(t),e.backgroundColor=iz(t),++t}function pie(e,t){return e.backgroundColor=e.data.map(()=>nz(t++)),t}function mie(e,t){return e.backgroundColor=e.data.map(()=>iz(t++)),t}function gie(e){let t=0;return(n,i)=>{const o=e.getDatasetMeta(i).controller;o instanceof dm?t=pie(n,t):o instanceof w0?t=mie(n,t):o&&(t=fie(n,t))}}function T4(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function yie(e){return e&&(e.borderColor||e.backgroundColor)}function xie(){return rr.borderColor!=="rgba(0,0,0,0.1)"||rr.backgroundColor!=="rgba(0,0,0,0.1)"}var _ie={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:o}=e.config,{elements:u}=o,c=T4(i)||yie(o)||u&&T4(u)||xie();if(!n.forceOverride&&c)return;const a=gie(e);i.forEach(a)}};function bie(e,t,n,i,o){const u=o.samples||i;if(u>=n)return e.slice(t,t+n);const c=[],a=(n-2)/(u-2);let g=0;const _=t+n-1;let S=t,E,A,N,z,B;for(c[g++]=e[S],E=0;E<u-2;E++){let $=0,q=0,W;const Q=Math.floor((E+1)*a)+1+t,Z=Math.min(Math.floor((E+2)*a)+1,n)+t,K=Z-Q;for(W=Q;W<Z;W++)$+=e[W].x,q+=e[W].y;$/=K,q/=K;const le=Math.floor(E*a)+1+t,ge=Math.min(Math.floor((E+1)*a)+1,n)+t,{x:he,y:pe}=e[S];for(N=z=-1,W=le;W<ge;W++)z=.5*Math.abs((he-$)*(e[W].y-pe)-(he-e[W].x)*(q-pe)),z>N&&(N=z,A=e[W],B=W);c[g++]=A,S=B}return c[g++]=e[_],c}function vie(e,t,n,i){let o=0,u=0,c,a,g,_,S,E,A,N,z,B;const $=[],q=t+n-1,W=e[t].x,Z=e[q].x-W;for(c=t;c<t+n;++c){a=e[c],g=(a.x-W)/Z*i,_=a.y;const K=g|0;if(K===S)_<z?(z=_,E=c):_>B&&(B=_,A=c),o=(u*o+a.x)/++u;else{const le=c-1;if(!Fi(E)&&!Fi(A)){const ge=Math.min(E,A),he=Math.max(E,A);ge!==N&&ge!==le&&$.push(Ee(te({},e[ge]),{x:o})),he!==N&&he!==le&&$.push(Ee(te({},e[he]),{x:o}))}c>0&&le!==N&&$.push(e[le]),$.push(a),S=K,u=0,z=B=_,E=A=N=c}}return $}function sz(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function k4(e){e.data.datasets.forEach(t=>{sz(t)})}function wie(e,t){const n=t.length;let i=0,o;const{iScale:u}=e,{min:c,max:a,minDefined:g,maxDefined:_}=u.getUserBounds();return g&&(i=Ta(xh(t,u.axis,c).lo,0,n-1)),_?o=Ta(xh(t,u.axis,a).hi+1,i,n)-i:o=n-i,{start:i,count:o}}var Sie={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){k4(e);return}const i=e.width;e.data.datasets.forEach((o,u)=>{const{_data:c,indexAxis:a}=o,g=e.getDatasetMeta(u),_=c||o.data;if(i0([a,e.options.indexAxis])==="y"||!g.controller.supportsDecimation)return;const S=e.scales[g.xAxisID];if(S.type!=="linear"&&S.type!=="time"||e.options.parsing)return;let{start:E,count:A}=wie(g,_);const N=n.threshold||4*i;if(A<=N){sz(o);return}Fi(c)&&(o._data=_,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(B){this._data=B}}));let z;switch(n.algorithm){case"lttb":z=bie(_,E,A,i,n);break;case"min-max":z=vie(_,E,A,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}o._decimated=z})},destroy(e){k4(e)}};function jie(e,t,n){const i=e.segments,o=e.points,u=t.points,c=[];for(const a of i){let{start:g,end:_}=a;_=J1(g,_,o);const S=Mj(n,o[g],o[_],a.loop);if(!t.segments){c.push({source:a,target:S,start:o[g],end:o[_]});continue}const E=LD(t,S);for(const A of E){const N=Mj(n,u[A.start],u[A.end],A.loop),z=FD(a,o,N);for(const B of z)c.push({source:B,target:A,start:{[n]:E4(S,N,"start",Math.max)},end:{[n]:E4(S,N,"end",Math.min)}})}}return c}function Mj(e,t,n,i){if(i)return;let o=t[e],u=n[e];return e==="angle"&&(o=po(o),u=po(u)),{property:e,start:o,end:u}}function Cie(e,t){const{x:n=null,y:i=null}=e||{},o=t.points,u=[];return t.segments.forEach(({start:c,end:a})=>{a=J1(c,a,o);const g=o[c],_=o[a];i!==null?(u.push({x:g.x,y:i}),u.push({x:_.x,y:i})):n!==null&&(u.push({x:n,y:g.y}),u.push({x:n,y:_.y}))}),u}function J1(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function E4(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function rz(e,t){let n=[],i=!1;return ir(e)?(i=!0,n=e):n=Cie(e,t),n.length?new Ff({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function M4(e){return e&&e.fill!==!1}function Tie(e,t,n){let o=e[t].fill;const u=[t];let c;if(!n)return o;for(;o!==!1&&u.indexOf(o)===-1;){if(!vr(o))return o;if(c=e[o],!c)return!1;if(c.visible)return o;u.push(o),o=c.fill}return!1}function kie(e,t,n){const i=Aie(e);if(Vi(i))return isNaN(i.value)?!1:i;let o=parseFloat(i);return vr(o)&&Math.floor(o)===o?Eie(i[0],t,o,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Eie(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function Mie(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Vi(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function Nie(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:Vi(e)?i=e.value:i=t.getBaseValue(),i}function Aie(e){const t=e.options,n=t.fill;let i=bi(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Pie(e){const{scale:t,index:n,line:i}=e,o=[],u=i.segments,c=i.points,a=Rie(t,n);a.push(rz({x:null,y:t.bottom},i));for(let g=0;g<u.length;g++){const _=u[g];for(let S=_.start;S<=_.end;S++)Die(o,c[S],a)}return new Ff({points:o,options:{}})}function Rie(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let o=0;o<i.length;o++){const u=i[o];if(u.index===t)break;u.hidden||n.unshift(u.dataset)}return n}function Die(e,t,n){const i=[];for(let o=0;o<n.length;o++){const u=n[o],{first:c,last:a,point:g}=zie(u,t,"x");if(!(!g||c&&a)){if(c)i.unshift(g);else if(e.push(g),!a)break}}e.push(...i)}function zie(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const o=i[n],u=e.segments,c=e.points;let a=!1,g=!1;for(let _=0;_<u.length;_++){const S=u[_],E=c[S.start][n],A=c[S.end][n];if(yh(o,E,A)){a=o===E,g=o===A;break}}return{first:a,last:g,point:i}}class az{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:o,y:u,radius:c}=this;return n=n||{start:0,end:Qs},t.arc(o,u,c,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:o}=this,u=t.angle;return{x:n+Math.cos(u)*o,y:i+Math.sin(u)*o,angle:u}}}function Iie(e){const{chart:t,fill:n,line:i}=e;if(vr(n))return Oie(t,n);if(n==="stack")return Pie(e);if(n==="shape")return!0;const o=Fie(e);return o instanceof az?o:rz(o,i)}function Oie(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function Fie(e){return(e.scale||{}).getPointPositionForValue?Bie(e):Lie(e)}function Lie(e){const{scale:t={},fill:n}=e,i=Mie(n,t);if(vr(i)){const o=t.isHorizontal();return{x:o?i:null,y:o?null:i}}return null}function Bie(e){const{scale:t,fill:n}=e,i=t.options,o=t.getLabels().length,u=i.reverse?t.max:t.min,c=Nie(n,t,u),a=[];if(i.grid.circular){const g=t.getPointPositionForValue(0,u);return new az({x:g.x,y:g.y,radius:t.getDistanceFromCenterForValue(c)})}for(let g=0;g<o;++g)a.push(t.getPointPositionForValue(g,c));return a}function Y2(e,t,n){const i=Iie(t),{chart:o,index:u,line:c,scale:a,axis:g}=t,_=c.options,S=_.fill,E=_.backgroundColor,{above:A=E,below:N=E}=S||{},z=o.getDatasetMeta(u),B=BD(o,z);i&&c.points.length&&(Z1(e,n),Vie(e,{line:c,target:i,above:A,below:N,area:n,scale:a,axis:g,clip:B}),Y1(e))}function Vie(e,t){const{line:n,target:i,above:o,below:u,area:c,scale:a,clip:g}=t,_=n._loop?"angle":t.axis;e.save();let S=u;u!==o&&(_==="x"?(N4(e,i,c.top),X2(e,{line:n,target:i,color:o,scale:a,property:_,clip:g}),e.restore(),e.save(),N4(e,i,c.bottom)):_==="y"&&(A4(e,i,c.left),X2(e,{line:n,target:i,color:u,scale:a,property:_,clip:g}),e.restore(),e.save(),A4(e,i,c.right),S=o)),X2(e,{line:n,target:i,color:S,scale:a,property:_,clip:g}),e.restore()}function N4(e,t,n){const{segments:i,points:o}=t;let u=!0,c=!1;e.beginPath();for(const a of i){const{start:g,end:_}=a,S=o[g],E=o[J1(g,_,o)];u?(e.moveTo(S.x,S.y),u=!1):(e.lineTo(S.x,n),e.lineTo(S.x,S.y)),c=!!t.pathSegment(e,a,{move:c}),c?e.closePath():e.lineTo(E.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function A4(e,t,n){const{segments:i,points:o}=t;let u=!0,c=!1;e.beginPath();for(const a of i){const{start:g,end:_}=a,S=o[g],E=o[J1(g,_,o)];u?(e.moveTo(S.x,S.y),u=!1):(e.lineTo(n,S.y),e.lineTo(S.x,S.y)),c=!!t.pathSegment(e,a,{move:c}),c?e.closePath():e.lineTo(n,E.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function X2(e,t){const{line:n,target:i,property:o,color:u,scale:c,clip:a}=t,g=jie(n,i,o);for(const{source:_,target:S,start:E,end:A}of g){const{style:{backgroundColor:N=u}={}}=_,z=i!==!0;e.save(),e.fillStyle=N,Uie(e,c,a,z&&Mj(o,E,A)),e.beginPath();const B=!!n.pathSegment(e,_);let $;if(z){B?e.closePath():P4(e,i,A,o);const q=!!i.pathSegment(e,S,{move:B,reverse:!0});$=B&&q,$||P4(e,i,E,o)}e.closePath(),e.fill($?"evenodd":"nonzero"),e.restore()}}function Uie(e,t,n,i){const o=t.chart.chartArea,{property:u,start:c,end:a}=i||{};if(u==="x"||u==="y"){let g,_,S,E;u==="x"?(g=c,_=o.top,S=a,E=o.bottom):(g=o.left,_=c,S=o.right,E=a),e.beginPath(),n&&(g=Math.max(g,n.left),S=Math.min(S,n.right),_=Math.max(_,n.top),E=Math.min(E,n.bottom)),e.rect(g,_,S-g,E-_),e.clip()}}function P4(e,t,n,i){const o=t.interpolate(n,i);o&&e.lineTo(o.x,o.y)}var $ie={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,o=[];let u,c,a,g;for(c=0;c<i;++c)u=e.getDatasetMeta(c),a=u.dataset,g=null,a&&a.options&&a instanceof Ff&&(g={visible:e.isDatasetVisible(c),index:c,fill:kie(a,c,i),chart:e,axis:u.controller.options.indexAxis,scale:u.vScale,line:a}),u.$filler=g,o.push(g);for(c=0;c<i;++c)g=o[c],!(!g||g.fill===!1)&&(g.fill=Tie(o,c,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",o=e.getSortedVisibleDatasetMetas(),u=e.chartArea;for(let c=o.length-1;c>=0;--c){const a=o[c].$filler;a&&(a.line.updateControlPoints(u,a.axis),i&&a.fill&&Y2(e.ctx,a,u))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o){const u=i[o].$filler;M4(u)&&Y2(e.ctx,u,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!M4(i)||n.drawTime!=="beforeDatasetDraw"||Y2(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const R4=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},Hie=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class D4 extends Ah{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Ws(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,o)=>t.sort(i,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,o=ua(i.font),u=o.size,c=this._computeTitleHeight(),{boxWidth:a,itemHeight:g}=R4(i,u);let _,S;n.font=o.string,this.isHorizontal()?(_=this.maxWidth,S=this._fitRows(c,u,a,g)+10):(S=this.maxHeight,_=this._fitCols(c,o,a,g)+10),this.width=Math.min(_,t.maxWidth||this.maxWidth),this.height=Math.min(S,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,o){const{ctx:u,maxWidth:c,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],_=this.lineWidths=[0],S=o+a;let E=t;u.textAlign="left",u.textBaseline="middle";let A=-1,N=-S;return this.legendItems.forEach((z,B)=>{const $=i+n/2+u.measureText(z.text).width;(B===0||_[_.length-1]+$+2*a>c)&&(E+=S,_[_.length-(B>0?0:1)]=0,N+=S,A++),g[B]={left:0,top:N,row:A,width:$,height:o},_[_.length-1]+=$+a}),E}_fitCols(t,n,i,o){const{ctx:u,maxHeight:c,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],_=this.columnSizes=[],S=c-t;let E=a,A=0,N=0,z=0,B=0;return this.legendItems.forEach(($,q)=>{const{itemWidth:W,itemHeight:Q}=qie(i,n,u,$,o);q>0&&N+Q+2*a>S&&(E+=A+a,_.push({width:A,height:N}),z+=A+a,B++,A=N=0),g[q]={left:z,top:N,col:B,width:W,height:Q},A=Math.max(A,W),N+=Q+a}),E+=A,_.push({width:A,height:N}),E}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:o},rtl:u}}=this,c=ay(u,this.left,this.width);if(this.isHorizontal()){let a=0,g=ho(i,this.left+o,this.right-this.lineWidths[a]);for(const _ of n)a!==_.row&&(a=_.row,g=ho(i,this.left+o,this.right-this.lineWidths[a])),_.top+=this.top+t+o,_.left=c.leftForLtr(c.x(g),_.width),g+=_.width+o}else{let a=0,g=ho(i,this.top+t+o,this.bottom-this.columnSizes[a].height);for(const _ of n)_.col!==a&&(a=_.col,g=ho(i,this.top+t+o,this.bottom-this.columnSizes[a].height)),_.top=g,_.left+=this.left+o,_.left=c.leftForLtr(c.x(_.left),_.width),g+=_.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Z1(t,this),this._draw(),Y1(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:o}=this,{align:u,labels:c}=t,a=rr.color,g=ay(t.rtl,this.left,this.width),_=ua(c.font),{padding:S}=c,E=_.size,A=E/2;let N;this.drawTitle(),o.textAlign=g.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=_.string;const{boxWidth:z,boxHeight:B,itemHeight:$}=R4(c,E),q=function(le,ge,he){if(isNaN(z)||z<=0||isNaN(B)||B<0)return;o.save();const pe=bi(he.lineWidth,1);if(o.fillStyle=bi(he.fillStyle,a),o.lineCap=bi(he.lineCap,"butt"),o.lineDashOffset=bi(he.lineDashOffset,0),o.lineJoin=bi(he.lineJoin,"miter"),o.lineWidth=pe,o.strokeStyle=bi(he.strokeStyle,a),o.setLineDash(bi(he.lineDash,[])),c.usePointStyle){const Ie={radius:B*Math.SQRT2/2,pointStyle:he.pointStyle,rotation:he.rotation,borderWidth:pe},He=g.xPlus(le,z/2),Ye=ge+A;kD(o,Ie,He,Ye,c.pointStyleWidth&&z)}else{const Ie=ge+Math.max((E-B)/2,0),He=g.leftForLtr(le,z),Ye=ym(he.borderRadius);o.beginPath(),Object.values(Ye).some(rt=>rt!==0)?U0(o,{x:He,y:Ie,w:z,h:B,radius:Ye}):o.rect(He,Ie,z,B),o.fill(),pe!==0&&o.stroke()}o.restore()},W=function(le,ge,he){Pm(o,he.text,le,ge+$/2,_,{strikethrough:he.hidden,textAlign:g.textAlign(he.textAlign)})},Q=this.isHorizontal(),Z=this._computeTitleHeight();Q?N={x:ho(u,this.left+S,this.right-i[0]),y:this.top+S+Z,line:0}:N={x:this.left+S,y:ho(u,this.top+Z+S,this.bottom-n[0].height),line:0},zD(this.ctx,t.textDirection);const K=$+S;this.legendItems.forEach((le,ge)=>{o.strokeStyle=le.fontColor,o.fillStyle=le.fontColor;const he=o.measureText(le.text).width,pe=g.textAlign(le.textAlign||(le.textAlign=c.textAlign)),Ie=z+A+he;let He=N.x,Ye=N.y;g.setWidth(this.width),Q?ge>0&&He+Ie+S>this.right&&(Ye=N.y+=K,N.line++,He=N.x=ho(u,this.left+S,this.right-i[N.line])):ge>0&&Ye+K>this.bottom&&(He=N.x=He+n[N.line].width+S,N.line++,Ye=N.y=ho(u,this.top+Z+S,this.bottom-n[N.line].height));const rt=g.x(He);if(q(rt,Ye,le),He=uee(pe,He+z+A,Q?He+Ie:this.right,t.rtl),W(g.x(He),Ye,le),Q)N.x+=Ie+S;else if(typeof le.text!="string"){const Rt=_.lineHeight;N.y+=oz(le,Rt)+S}else N.y+=K}),ID(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=ua(n.font),o=bo(n.padding);if(!n.display)return;const u=ay(t.rtl,this.left,this.width),c=this.ctx,a=n.position,g=i.size/2,_=o.top+g;let S,E=this.left,A=this.width;if(this.isHorizontal())A=Math.max(...this.lineWidths),S=this.top+_,E=ho(t.align,E,this.right-A);else{const z=this.columnSizes.reduce((B,$)=>Math.max(B,$.height),0);S=_+ho(t.align,this.top,this.bottom-z-t.labels.padding-this._computeTitleHeight())}const N=ho(a,E,E+A);c.textAlign=u.textAlign(NT(a)),c.textBaseline="middle",c.strokeStyle=n.color,c.fillStyle=n.color,c.font=i.string,Pm(c,n.text,N,S,i)}_computeTitleHeight(){const t=this.options.title,n=ua(t.font),i=bo(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,o,u;if(yh(t,this.left,this.right)&&yh(n,this.top,this.bottom)){for(u=this.legendHitBoxes,i=0;i<u.length;++i)if(o=u[i],yh(t,o.left,o.left+o.width)&&yh(n,o.top,o.top+o.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!Zie(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const o=this._hoveredItem,u=Hie(o,i);o&&!u&&Ws(n.onLeave,[t,o,this],this),this._hoveredItem=i,i&&!u&&Ws(n.onHover,[t,i,this],this)}else i&&Ws(n.onClick,[t,i,this],this)}}function qie(e,t,n,i,o){const u=Gie(i,e,t,n),c=Wie(o,i,t.lineHeight);return{itemWidth:u,itemHeight:c}}function Gie(e,t,n,i){let o=e.text;return o&&typeof o!="string"&&(o=o.reduce((u,c)=>u.length>c.length?u:c)),t+n.size/2+i.measureText(o).width}function Wie(e,t,n){let i=e;return typeof t.text!="string"&&(i=oz(t,n)),i}function oz(e,t){const n=e.text?e.text.length:0;return t*n}function Zie(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Yie={id:"legend",_element:D4,start(e,t,n){const i=e.legend=new D4({ctx:e.ctx,options:n,chart:e});xo.configure(e,i,n),xo.addBox(e,i)},stop(e){xo.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;xo.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,o=n.chart;o.isDatasetVisible(i)?(o.hide(i),t.hidden=!0):(o.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:o,color:u,useBorderRadius:c,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(g=>{const _=g.controller.getStyle(n?0:void 0),S=bo(_.borderWidth);return{text:t[g.index].label,fillStyle:_.backgroundColor,fontColor:u,hidden:!g.visible,lineCap:_.borderCapStyle,lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:(S.width+S.height)/4,strokeStyle:_.borderColor,pointStyle:i||_.pointStyle,rotation:_.rotation,textAlign:o||_.textAlign,borderRadius:c&&(a||_.borderRadius),datasetIndex:g.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class LT extends Ah{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const o=ir(i.text)?i.text.length:1;this._padding=bo(i.padding);const u=o*ua(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:o,right:u,options:c}=this,a=c.align;let g=0,_,S,E;return this.isHorizontal()?(S=ho(a,i,u),E=n+t,_=u-i):(c.position==="left"?(S=i+t,E=ho(a,o,n),g=ss*-.5):(S=u-t,E=ho(a,n,o),g=ss*.5),_=o-n),{titleX:S,titleY:E,maxWidth:_,rotation:g}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=ua(n.font),u=i.lineHeight/2+this._padding.top,{titleX:c,titleY:a,maxWidth:g,rotation:_}=this._drawArgs(u);Pm(t,n.text,0,0,i,{color:n.color,maxWidth:g,rotation:_,textAlign:NT(n.align),textBaseline:"middle",translation:[c,a]})}}function Xie(e,t){const n=new LT({ctx:e.ctx,options:t,chart:e});xo.configure(e,n,t),xo.addBox(e,n),e.titleBlock=n}var Kie={id:"title",_element:LT,start(e,t,n){Xie(e,n)},stop(e){const t=e.titleBlock;xo.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;xo.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ib=new WeakMap;var Qie={id:"subtitle",start(e,t,n){const i=new LT({ctx:e.ctx,options:n,chart:e});xo.configure(e,i,n),xo.addBox(e,i),Ib.set(e,i)},stop(e){xo.removeBox(e,Ib.get(e)),Ib.delete(e)},beforeUpdate(e,t,n){const i=Ib.get(e);xo.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const a0={average(e){if(!e.length)return!1;let t,n,i=new Set,o=0,u=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const g=a.tooltipPosition();i.add(g.x),o+=g.y,++u}}return u===0||i.size===0?!1:{x:[...i].reduce((a,g)=>a+g)/i.size,y:o/u}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,o=Number.POSITIVE_INFINITY,u,c,a;for(u=0,c=e.length;u<c;++u){const g=e[u].element;if(g&&g.hasValue()){const _=g.getCenterPoint(),S=vj(t,_);S<o&&(o=S,a=g)}}if(a){const g=a.tooltipPosition();n=g.x,i=g.y}return{x:n,y:i}}};function ud(e,t){return t&&(ir(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ph(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Jie(e,t){const{element:n,datasetIndex:i,index:o}=t,u=e.getDatasetMeta(i).controller,{label:c,value:a}=u.getLabelAndValue(o);return{chart:e,label:c,parsed:u.getParsed(o),raw:e.data.datasets[i].data[o],formattedValue:a,dataset:u.getDataset(),dataIndex:o,datasetIndex:i,element:n}}function z4(e,t){const n=e.chart.ctx,{body:i,footer:o,title:u}=e,{boxWidth:c,boxHeight:a}=t,g=ua(t.bodyFont),_=ua(t.titleFont),S=ua(t.footerFont),E=u.length,A=o.length,N=i.length,z=bo(t.padding);let B=z.height,$=0,q=i.reduce((Z,K)=>Z+K.before.length+K.lines.length+K.after.length,0);if(q+=e.beforeBody.length+e.afterBody.length,E&&(B+=E*_.lineHeight+(E-1)*t.titleSpacing+t.titleMarginBottom),q){const Z=t.displayColors?Math.max(a,g.lineHeight):g.lineHeight;B+=N*Z+(q-N)*g.lineHeight+(q-1)*t.bodySpacing}A&&(B+=t.footerMarginTop+A*S.lineHeight+(A-1)*t.footerSpacing);let W=0;const Q=function(Z){$=Math.max($,n.measureText(Z).width+W)};return n.save(),n.font=_.string,vs(e.title,Q),n.font=g.string,vs(e.beforeBody.concat(e.afterBody),Q),W=t.displayColors?c+2+t.boxPadding:0,vs(i,Z=>{vs(Z.before,Q),vs(Z.lines,Q),vs(Z.after,Q)}),W=0,n.font=S.string,vs(e.footer,Q),n.restore(),$+=z.width,{width:$,height:B}}function ese(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function tse(e,t,n,i){const{x:o,width:u}=i,c=n.caretSize+n.caretPadding;if(e==="left"&&o+u+c>t.width||e==="right"&&o-u-c<0)return!0}function nse(e,t,n,i){const{x:o,width:u}=n,{width:c,chartArea:{left:a,right:g}}=e;let _="center";return i==="center"?_=o<=(a+g)/2?"left":"right":o<=u/2?_="left":o>=c-u/2&&(_="right"),tse(_,e,t,n)&&(_="center"),_}function I4(e,t,n){const i=n.yAlign||t.yAlign||ese(e,n);return{xAlign:n.xAlign||t.xAlign||nse(e,t,n,i),yAlign:i}}function ise(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function sse(e,t,n){let{y:i,height:o}=e;return t==="top"?i+=n:t==="bottom"?i-=o+n:i-=o/2,i}function O4(e,t,n,i){const{caretSize:o,caretPadding:u,cornerRadius:c}=e,{xAlign:a,yAlign:g}=n,_=o+u,{topLeft:S,topRight:E,bottomLeft:A,bottomRight:N}=ym(c);let z=ise(t,a);const B=sse(t,g,_);return g==="center"?a==="left"?z+=_:a==="right"&&(z-=_):a==="left"?z-=Math.max(S,A)+o:a==="right"&&(z+=Math.max(E,N)+o),{x:Ta(z,0,i.width-t.width),y:Ta(B,0,i.height-t.height)}}function Ob(e,t,n){const i=bo(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function F4(e){return ud([],ph(e))}function rse(e,t,n){return ep(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function L4(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const lz={beforeTitle:dh,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:dh,beforeBody:dh,beforeLabel:dh,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Fi(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:dh,afterBody:dh,beforeFooter:dh,footer:dh,afterFooter:dh};function al(e,t,n,i){const o=e[t].call(n,i);return typeof o=="undefined"?lz[t].call(n,i):o}class Nj extends Ah{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&n.options.animation&&i.animations,u=new VD(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=rse(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,o=al(i,"beforeTitle",this,t),u=al(i,"title",this,t),c=al(i,"afterTitle",this,t);let a=[];return a=ud(a,ph(o)),a=ud(a,ph(u)),a=ud(a,ph(c)),a}getBeforeBody(t,n){return F4(al(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,o=[];return vs(t,u=>{const c={before:[],lines:[],after:[]},a=L4(i,u);ud(c.before,ph(al(a,"beforeLabel",this,u))),ud(c.lines,al(a,"label",this,u)),ud(c.after,ph(al(a,"afterLabel",this,u))),o.push(c)}),o}getAfterBody(t,n){return F4(al(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,o=al(i,"beforeFooter",this,t),u=al(i,"footer",this,t),c=al(i,"afterFooter",this,t);let a=[];return a=ud(a,ph(o)),a=ud(a,ph(u)),a=ud(a,ph(c)),a}_createItems(t){const n=this._active,i=this.chart.data,o=[],u=[],c=[];let a=[],g,_;for(g=0,_=n.length;g<_;++g)a.push(Jie(this.chart,n[g]));return t.filter&&(a=a.filter((S,E,A)=>t.filter(S,E,A,i))),t.itemSort&&(a=a.sort((S,E)=>t.itemSort(S,E,i))),vs(a,S=>{const E=L4(t.callbacks,S);o.push(al(E,"labelColor",this,S)),u.push(al(E,"labelPointStyle",this,S)),c.push(al(E,"labelTextColor",this,S))}),this.labelColors=o,this.labelPointStyles=u,this.labelTextColors=c,this.dataPoints=a,a}update(t,n){const i=this.options.setContext(this.getContext()),o=this._active;let u,c=[];if(!o.length)this.opacity!==0&&(u={opacity:0});else{const a=a0[i.position].call(this,o,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const g=this._size=z4(this,i),_=Object.assign({},a,g),S=I4(this.chart,i,_),E=O4(i,_,S,this.chart);this.xAlign=S.xAlign,this.yAlign=S.yAlign,u={opacity:1,x:E.x,y:E.y,width:g.width,height:g.height,caretX:a.x,caretY:a.y}}this._tooltipItems=c,this.$context=void 0,u&&this._resolveAnimations().update(this,u),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,o){const u=this.getCaretPosition(t,i,o);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(t,n,i){const{xAlign:o,yAlign:u}=this,{caretSize:c,cornerRadius:a}=i,{topLeft:g,topRight:_,bottomLeft:S,bottomRight:E}=ym(a),{x:A,y:N}=t,{width:z,height:B}=n;let $,q,W,Q,Z,K;return u==="center"?(Z=N+B/2,o==="left"?($=A,q=$-c,Q=Z+c,K=Z-c):($=A+z,q=$+c,Q=Z-c,K=Z+c),W=$):(o==="left"?q=A+Math.max(g,S)+c:o==="right"?q=A+z-Math.max(_,E)-c:q=this.caretX,u==="top"?(Q=N,Z=Q-c,$=q-c,W=q+c):(Q=N+B,Z=Q+c,$=q+c,W=q-c),K=Q),{x1:$,x2:q,x3:W,y1:Q,y2:Z,y3:K}}drawTitle(t,n,i){const o=this.title,u=o.length;let c,a,g;if(u){const _=ay(i.rtl,this.x,this.width);for(t.x=Ob(this,i.titleAlign,i),n.textAlign=_.textAlign(i.titleAlign),n.textBaseline="middle",c=ua(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=c.string,g=0;g<u;++g)n.fillText(o[g],_.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+a,g+1===u&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,n,i,o,u){const c=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:g,boxWidth:_}=u,S=ua(u.bodyFont),E=Ob(this,"left",u),A=o.x(E),N=g<S.lineHeight?(S.lineHeight-g)/2:0,z=n.y+N;if(u.usePointStyle){const B={radius:Math.min(_,g)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},$=o.leftForLtr(A,_)+_/2,q=z+g/2;t.strokeStyle=u.multiKeyBackground,t.fillStyle=u.multiKeyBackground,Sj(t,B,$,q),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,Sj(t,B,$,q)}else{t.lineWidth=Vi(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const B=o.leftForLtr(A,_),$=o.leftForLtr(o.xPlus(A,1),_-2),q=ym(c.borderRadius);Object.values(q).some(W=>W!==0)?(t.beginPath(),t.fillStyle=u.multiKeyBackground,U0(t,{x:B,y:z,w:_,h:g,radius:q}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),U0(t,{x:$,y:z+1,w:_-2,h:g-2,radius:q}),t.fill()):(t.fillStyle=u.multiKeyBackground,t.fillRect(B,z,_,g),t.strokeRect(B,z,_,g),t.fillStyle=c.backgroundColor,t.fillRect($,z+1,_-2,g-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:o}=this,{bodySpacing:u,bodyAlign:c,displayColors:a,boxHeight:g,boxWidth:_,boxPadding:S}=i,E=ua(i.bodyFont);let A=E.lineHeight,N=0;const z=ay(i.rtl,this.x,this.width),B=function(he){n.fillText(he,z.x(t.x+N),t.y+A/2),t.y+=A+u},$=z.textAlign(c);let q,W,Q,Z,K,le,ge;for(n.textAlign=c,n.textBaseline="middle",n.font=E.string,t.x=Ob(this,$,i),n.fillStyle=i.bodyColor,vs(this.beforeBody,B),N=a&&$!=="right"?c==="center"?_/2+S:_+2+S:0,Z=0,le=o.length;Z<le;++Z){for(q=o[Z],W=this.labelTextColors[Z],n.fillStyle=W,vs(q.before,B),Q=q.lines,a&&Q.length&&(this._drawColorBox(n,t,Z,z,i),A=Math.max(E.lineHeight,g)),K=0,ge=Q.length;K<ge;++K)B(Q[K]),A=E.lineHeight;vs(q.after,B)}N=0,A=E.lineHeight,vs(this.afterBody,B),t.y-=u}drawFooter(t,n,i){const o=this.footer,u=o.length;let c,a;if(u){const g=ay(i.rtl,this.x,this.width);for(t.x=Ob(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=g.textAlign(i.footerAlign),n.textBaseline="middle",c=ua(i.footerFont),n.fillStyle=i.footerColor,n.font=c.string,a=0;a<u;++a)n.fillText(o[a],g.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,n,i,o){const{xAlign:u,yAlign:c}=this,{x:a,y:g}=t,{width:_,height:S}=i,{topLeft:E,topRight:A,bottomLeft:N,bottomRight:z}=ym(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(a+E,g),c==="top"&&this.drawCaret(t,n,i,o),n.lineTo(a+_-A,g),n.quadraticCurveTo(a+_,g,a+_,g+A),c==="center"&&u==="right"&&this.drawCaret(t,n,i,o),n.lineTo(a+_,g+S-z),n.quadraticCurveTo(a+_,g+S,a+_-z,g+S),c==="bottom"&&this.drawCaret(t,n,i,o),n.lineTo(a+N,g+S),n.quadraticCurveTo(a,g+S,a,g+S-N),c==="center"&&u==="left"&&this.drawCaret(t,n,i,o),n.lineTo(a,g+E),n.quadraticCurveTo(a,g,a+E,g),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,o=i&&i.x,u=i&&i.y;if(o||u){const c=a0[t.position].call(this,this._active,this._eventPosition);if(!c)return;const a=this._size=z4(this,t),g=Object.assign({},c,this._size),_=I4(n,t,g),S=O4(t,g,_,n);(o._to!==S.x||u._to!==S.y)&&(this.xAlign=_.xAlign,this.yAlign=_.yAlign,this.width=a.width,this.height=a.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,S))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},u={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=bo(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(u,t,o,n),zD(t,n.textDirection),u.y+=c.top,this.drawTitle(u,t,n),this.drawBody(u,t,n),this.drawFooter(u,t,n),ID(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,o=t.map(({datasetIndex:a,index:g})=>{const _=this.chart.getDatasetMeta(a);if(!_)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:_.data[g],index:g}}),u=!i1(i,o),c=this._positionChanged(o,n);(u||c)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,u=this._active||[],c=this._getActiveElements(t,u,n,i),a=this._positionChanged(c,t),g=n||!i1(c,u)||a;return g&&(this._active=c,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),g}_getActiveElements(t,n,i,o){const u=this.options;if(t.type==="mouseout")return[];if(!o)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,u.mode,u,i);return u.reverse&&c.reverse(),c}_positionChanged(t,n){const{caretX:i,caretY:o,options:u}=this,c=a0[u.position].call(this,t,n);return c!==!1&&(i!==c.x||o!==c.y)}}wn(Nj,"positioners",a0);var ase={id:"tooltip",_element:Nj,positioners:a0,afterInit(e,t,n){n&&(e.tooltip=new Nj({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",Ee(te({},n),{cancelable:!0}))===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lz},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ose=Object.freeze({__proto__:null,Colors:_ie,Decimation:Sie,Filler:$ie,Legend:Yie,SubTitle:Qie,Title:Kie,Tooltip:ase});const lse=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function cse(e,t,n,i){const o=e.indexOf(t);if(o===-1)return lse(e,t,n,i);const u=e.lastIndexOf(t);return o!==u?n:o}const use=(e,t)=>e===null?null:Ta(Math.round(e),0,t);function B4(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Aj extends Om{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:o,label:u}of n)i[o]===u&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Fi(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:cse(i,t,bi(n,t),this._addedLabels),use(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,o=[];let u=this.getLabels();u=t===0&&n===u.length-1?u:u.slice(t,n+1),this._valueRange=Math.max(u.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=n;c++)o.push({value:c});return o}getLabelForValue(t){return B4.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}wn(Aj,"id","category"),wn(Aj,"defaults",{ticks:{callback:B4}});function dse(e,t){const n=[],{bounds:o,step:u,min:c,max:a,precision:g,count:_,maxTicks:S,maxDigits:E,includeBounds:A}=e,N=u||1,z=S-1,{min:B,max:$}=t,q=!Fi(c),W=!Fi(a),Q=!Fi(_),Z=($-B)/(E+1);let K=zN(($-B)/z/N)*N,le,ge,he,pe;if(K<1e-14&&!q&&!W)return[{value:B},{value:$}];pe=Math.ceil($/K)-Math.floor(B/K),pe>z&&(K=zN(pe*K/z/N)*N),Fi(g)||(le=Math.pow(10,g),K=Math.ceil(K*le)/le),o==="ticks"?(ge=Math.floor(B/K)*K,he=Math.ceil($/K)*K):(ge=B,he=$),q&&W&&u&&iee((a-c)/u,K/1e3)?(pe=Math.round(Math.min((a-c)/K,S)),K=(a-c)/pe,ge=c,he=a):Q?(ge=q?c:ge,he=W?a:he,pe=_-1,K=(he-ge)/pe):(pe=(he-ge)/K,x0(pe,Math.round(pe),K/1e3)?pe=Math.round(pe):pe=Math.ceil(pe));const Ie=Math.max(IN(K),IN(ge));le=Math.pow(10,Fi(g)?Ie:g),ge=Math.round(ge*le)/le,he=Math.round(he*le)/le;let He=0;for(q&&(A&&ge!==c?(n.push({value:c}),ge<c&&He++,x0(Math.round((ge+He*K)*le)/le,c,V4(c,Z,e))&&He++):ge<c&&He++);He<pe;++He){const Ye=Math.round((ge+He*K)*le)/le;if(W&&Ye>a)break;n.push({value:Ye})}return W&&A&&he!==a?n.length&&x0(n[n.length-1].value,a,V4(a,Z,e))?n[n.length-1].value=a:n.push({value:a}):(!W||he===a)&&n.push({value:he}),n}function V4(e,t,{horizontal:n,minRotation:i}){const o=yu(i),u=(n?Math.sin(o):Math.cos(o))||.001,c=.75*t*(""+e).length;return Math.min(t/u,c)}class u1 extends Om{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Fi(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:o,max:u}=this;const c=g=>o=n?o:g,a=g=>u=i?u:g;if(t){const g=bd(o),_=bd(u);g<0&&_<0?a(0):g>0&&_>0&&c(0)}if(o===u){let g=u===0?1:Math.abs(u*.05);a(u+g),t||c(o-g)}this.min=o,this.max=u}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,o;return i?(o=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,c=dse(o,u);return t.bounds==="ticks"&&xD(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const o=(i-n)/Math.max(t.length-1,1)/2;n-=o,i+=o}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return f_(t,this.chart.options.locale,this.options.ticks.format)}}class Pj extends u1{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=vr(t)?t:0,this.max=vr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=yu(this.options.ticks.minRotation),o=(t?Math.sin(i):Math.cos(i))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}wn(Pj,"id","linear"),wn(Pj,"defaults",{ticks:{callback:W1.formatters.numeric}});const H0=e=>Math.floor(Of(e)),tm=(e,t)=>Math.pow(10,H0(e)+t);function U4(e){return e/Math.pow(10,H0(e))===1}function $4(e,t,n){const i=Math.pow(10,n),o=Math.floor(e/i);return Math.ceil(t/i)-o}function hse(e,t){const n=t-e;let i=H0(n);for(;$4(e,t,i)>10;)i++;for(;$4(e,t,i)<10;)i--;return Math.min(i,H0(e))}function fse(e,{min:t,max:n}){t=zl(e.min,t);const i=[],o=H0(t);let u=hse(t,n),c=u<0?Math.pow(10,Math.abs(u)):1;const a=Math.pow(10,u),g=o>u?Math.pow(10,o):0,_=Math.round((t-g)*c)/c,S=Math.floor((t-g)/a/10)*a*10;let E=Math.floor((_-S)/Math.pow(10,u)),A=zl(e.min,Math.round((g+S+E*Math.pow(10,u))*c)/c);for(;A<n;)i.push({value:A,major:U4(A),significand:E}),E>=10?E=E<15?15:20:E++,E>=20&&(u++,E=2,c=u>=0?1:c),A=Math.round((g+S+E*Math.pow(10,u))*c)/c;const N=zl(e.max,A);return i.push({value:N,major:U4(N),significand:E}),i}class Rj extends Om{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=u1.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return vr(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=vr(t)?Math.max(0,t):null,this.max=vr(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!vr(this._userMin)&&(this.min=t===tm(this.min,0)?tm(this.min,-1):tm(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,o=this.max;const u=a=>i=t?i:a,c=a=>o=n?o:a;i===o&&(i<=0?(u(1),c(10)):(u(tm(i,-1)),c(tm(o,1)))),i<=0&&u(tm(o,-1)),o<=0&&c(tm(i,1)),this.min=i,this.max=o}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=fse(n,this);return t.bounds==="ticks"&&xD(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":f_(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Of(t),this._valueRange=Of(this.max)-Of(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Of(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}wn(Rj,"id","logarithmic"),wn(Rj,"defaults",{ticks:{callback:W1.formatters.logarithmic,major:{enabled:!0}}});function Dj(e){const t=e.ticks;if(t.display&&e.display){const n=bo(t.backdropPadding);return bi(t.font&&t.font.size,rr.font.size)+n.height}return 0}function pse(e,t,n){return n=ir(n)?n:[n],{w:bee(e,t.string,n),h:n.length*t.lineHeight}}function H4(e,t,n,i,o){return e===i||e===o?{start:t-n/2,end:t+n/2}:e<i||e>o?{start:t-n,end:t}:{start:t,end:t+n}}function mse(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],o=[],u=e._pointLabels.length,c=e.options.pointLabels,a=c.centerPointLabels?ss/u:0;for(let g=0;g<u;g++){const _=c.setContext(e.getPointLabelContext(g));o[g]=_.padding;const S=e.getPointPosition(g,e.drawingArea+o[g],a),E=ua(_.font),A=pse(e.ctx,E,e._pointLabels[g]);i[g]=A;const N=po(e.getIndexAngle(g)+a),z=Math.round(ET(N)),B=H4(z,S.x,A.w,0,180),$=H4(z,S.y,A.h,90,270);gse(n,t,N,B,$)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=_se(e,i,o)}function gse(e,t,n,i,o){const u=Math.abs(Math.sin(n)),c=Math.abs(Math.cos(n));let a=0,g=0;i.start<t.l?(a=(t.l-i.start)/u,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/u,e.r=Math.max(e.r,t.r+a)),o.start<t.t?(g=(t.t-o.start)/c,e.t=Math.min(e.t,t.t-g)):o.end>t.b&&(g=(o.end-t.b)/c,e.b=Math.max(e.b,t.b+g))}function yse(e,t,n){const i=e.drawingArea,{extra:o,additionalAngle:u,padding:c,size:a}=n,g=e.getPointPosition(t,i+o+c,u),_=Math.round(ET(po(g.angle+Nr))),S=wse(g.y,a.h,_),E=bse(_),A=vse(g.x,a.w,E);return{visible:!0,x:g.x,y:S,textAlign:E,left:A,top:S,right:A+a.w,bottom:S+a.h}}function xse(e,t){if(!t)return!0;const{left:n,top:i,right:o,bottom:u}=e;return!(_h({x:n,y:i},t)||_h({x:n,y:u},t)||_h({x:o,y:i},t)||_h({x:o,y:u},t))}function _se(e,t,n){const i=[],o=e._pointLabels.length,u=e.options,{centerPointLabels:c,display:a}=u.pointLabels,g={extra:Dj(u)/2,additionalAngle:c?ss/o:0};let _;for(let S=0;S<o;S++){g.padding=n[S],g.size=t[S];const E=yse(e,S,g);i.push(E),a==="auto"&&(E.visible=xse(E,_),E.visible&&(_=E))}return i}function bse(e){return e===0||e===180?"center":e<180?"left":"right"}function vse(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function wse(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function Sse(e,t,n){const{left:i,top:o,right:u,bottom:c}=n,{backdropColor:a}=t;if(!Fi(a)){const g=ym(t.borderRadius),_=bo(t.backdropPadding);e.fillStyle=a;const S=i-_.left,E=o-_.top,A=u-i+_.width,N=c-o+_.height;Object.values(g).some(z=>z!==0)?(e.beginPath(),U0(e,{x:S,y:E,w:A,h:N,radius:g}),e.fill()):e.fillRect(S,E,A,N)}}function jse(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let o=t-1;o>=0;o--){const u=e._pointLabelItems[o];if(!u.visible)continue;const c=i.setContext(e.getPointLabelContext(o));Sse(n,c,u);const a=ua(c.font),{x:g,y:_,textAlign:S}=u;Pm(n,e._pointLabels[o],g,_+a.lineHeight/2,a,{color:c.color,textAlign:S,textBaseline:"middle"})}}function cz(e,t,n,i){const{ctx:o}=e;if(n)o.arc(e.xCenter,e.yCenter,t,0,Qs);else{let u=e.getPointPosition(0,t);o.moveTo(u.x,u.y);for(let c=1;c<i;c++)u=e.getPointPosition(c,t),o.lineTo(u.x,u.y)}}function Cse(e,t,n,i,o){const u=e.ctx,c=t.circular,{color:a,lineWidth:g}=t;!c&&!i||!a||!g||n<0||(u.save(),u.strokeStyle=a,u.lineWidth=g,u.setLineDash(o.dash||[]),u.lineDashOffset=o.dashOffset,u.beginPath(),cz(e,n,c,i),u.closePath(),u.stroke(),u.restore())}function Tse(e,t,n){return ep(e,{label:n,index:t,type:"pointLabel"})}class o0 extends u1{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=bo(Dj(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=vr(t)&&!isNaN(t)?t:0,this.max=vr(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Dj(this.options))}generateTickLabels(t){u1.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const o=Ws(this.options.pointLabels.callback,[n,i],this);return o||o===0?o:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?mse(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,o){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,o))}getIndexAngle(t){const n=Qs/(this._pointLabels.length||1),i=this.options.startAngle||0;return po(t*n+yu(i))}getDistanceFromCenterForValue(t){if(Fi(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(Fi(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return Tse(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const o=this.getIndexAngle(t)-Nr+i;return{x:Math.cos(o)*n+this.xCenter,y:Math.sin(o)*n+this.yCenter,angle:o}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:o,bottom:u}=this._pointLabelItems[t];return{left:n,top:i,right:o,bottom:u}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),cz(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:o,border:u}=n,c=this._pointLabels.length;let a,g,_;if(n.pointLabels.display&&jse(this,c),o.display&&this.ticks.forEach((S,E)=>{if(E!==0||E===0&&this.min<0){g=this.getDistanceFromCenterForValue(S.value);const A=this.getContext(E),N=o.setContext(A),z=u.setContext(A);Cse(this,N,g,c,z)}}),i.display){for(t.save(),a=c-1;a>=0;a--){const S=i.setContext(this.getPointLabelContext(a)),{color:E,lineWidth:A}=S;!A||!E||(t.lineWidth=A,t.strokeStyle=E,t.setLineDash(S.borderDash),t.lineDashOffset=S.borderDashOffset,g=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),_=this.getPointPosition(a,g),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(_.x,_.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const o=this.getIndexAngle(0);let u,c;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,g)=>{if(g===0&&this.min>=0&&!n.reverse)return;const _=i.setContext(this.getContext(g)),S=ua(_.font);if(u=this.getDistanceFromCenterForValue(this.ticks[g].value),_.showLabelBackdrop){t.font=S.string,c=t.measureText(a.label).width,t.fillStyle=_.backdropColor;const E=bo(_.backdropPadding);t.fillRect(-c/2-E.left,-u-S.size/2-E.top,c+E.width,S.size+E.height)}Pm(t,a.label,0,-u,S,{color:_.color,strokeColor:_.textStrokeColor,strokeWidth:_.textStrokeWidth})}),t.restore()}drawTitle(){}}wn(o0,"id","radialLinear"),wn(o0,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:W1.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),wn(o0,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),wn(o0,"descriptors",{angleLines:{_fallback:"grid"}});const ew={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ll=Object.keys(ew);function q4(e,t){return e-t}function G4(e,t){if(Fi(t))return null;const n=e._adapter,{parser:i,round:o,isoWeekday:u}=e._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),vr(c)||(c=typeof i=="string"?n.parse(c,i):n.parse(c)),c===null?null:(o&&(c=o==="week"&&(my(u)||u===!0)?n.startOf(c,"isoWeek",u):n.startOf(c,o)),+c)}function W4(e,t,n,i){const o=ll.length;for(let u=ll.indexOf(e);u<o-1;++u){const c=ew[ll[u]],a=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((n-t)/(a*c.size))<=i)return ll[u]}return ll[o-1]}function kse(e,t,n,i,o){for(let u=ll.length-1;u>=ll.indexOf(n);u--){const c=ll[u];if(ew[c].common&&e._adapter.diff(o,i,c)>=t-1)return c}return ll[n?ll.indexOf(n):0]}function Ese(e){for(let t=ll.indexOf(e)+1,n=ll.length;t<n;++t)if(ew[ll[t]].common)return ll[t]}function Z4(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:o}=MT(n,t),u=n[i]>=t?n[i]:n[o];e[u]=!0}}function Mse(e,t,n,i){const o=e._adapter,u=+o.startOf(t[0].value,i),c=t[t.length-1].value;let a,g;for(a=u;a<=c;a=+o.add(a,1,i))g=n[a],g>=0&&(t[g].major=!0);return t}function Y4(e,t,n){const i=[],o={},u=t.length;let c,a;for(c=0;c<u;++c)a=t[c],o[a]=c,i.push({value:a,major:!1});return u===0||!n?i:Mse(e,i,o,n)}class q0 extends Om{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),o=this._adapter=new Ote._date(t.adapters.date);o.init(n),y0(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:G4(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:o,max:u,minDefined:c,maxDefined:a}=this.getUserBounds();function g(_){!c&&!isNaN(_.min)&&(o=Math.min(o,_.min)),!a&&!isNaN(_.max)&&(u=Math.max(u,_.max))}(!c||!a)&&(g(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&g(this.getMinMax(!1))),o=vr(o)&&!isNaN(o)?o:+n.startOf(Date.now(),i),u=vr(u)&&!isNaN(u)?u:+n.endOf(Date.now(),i)+1,this.min=Math.min(o,u-1),this.max=Math.max(o+1,u)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const u=this.min,c=this.max,a=oee(o,u,c);return this._unit=n.unit||(i.autoSkip?W4(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):kse(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Ese(this._unit),this.initOffsets(o),t.reverse&&a.reverse(),Y4(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,o,u;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?n=1-o:n=(this.getDecimalForValue(t[1])-o)/2,u=this.getDecimalForValue(t[t.length-1]),t.length===1?i=u:i=(u-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;n=Ta(n,0,c),i=Ta(i,0,c),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,o=this.options,u=o.time,c=u.unit||W4(u.minUnit,n,i,this._getLabelCapacity(n)),a=bi(o.ticks.stepSize,1),g=c==="week"?u.isoWeekday:!1,_=my(g)||g===!0,S={};let E=n,A,N;if(_&&(E=+t.startOf(E,"isoWeek",g)),E=+t.startOf(E,_?"day":c),t.diff(i,n,c)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+c);const z=o.ticks.source==="data"&&this.getDataTimestamps();for(A=E,N=0;A<i;A=+t.add(A,a,c),N++)Z4(S,A,z);return(A===i||o.bounds==="ticks"||N===1)&&Z4(S,A,z),Object.keys(S).sort(q4).map(B=>+B)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const o=this.options.time.displayFormats,u=this._unit,c=n||o[u];return this._adapter.format(t,c)}_tickFormatFunction(t,n,i,o){const u=this.options,c=u.ticks.callback;if(c)return Ws(c,[t,n,i],this);const a=u.time.displayFormats,g=this._unit,_=this._majorUnit,S=g&&a[g],E=_&&a[_],A=i[n],N=_&&E&&A&&A.major;return this._adapter.format(t,o||(N?E:S))}generateTickLabels(t){let n,i,o;for(n=0,i=t.length;n<i;++n)o=t[n],o.label=this._tickFormatFunction(o.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,o=yu(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(o),c=Math.sin(o),a=this._resolveTickFontOptions(0).size;return{w:i*u+a*c,h:i*c+a*u}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,o=i[n.unit]||i.millisecond,u=this._tickFormatFunction(t,0,Y4(this,[t],this._majorUnit),o),c=this._getLabelSize(u),a=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,i=o.length;n<i;++n)t=t.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const o=this.getLabels();for(n=0,i=o.length;n<i;++n)t.push(G4(this,o[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return vD(t.sort(q4))}}wn(q0,"id","time"),wn(q0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Fb(e,t,n){let i=0,o=e.length-1,u,c,a,g;n?(t>=e[i].pos&&t<=e[o].pos&&({lo:i,hi:o}=xh(e,"pos",t)),{pos:u,time:a}=e[i],{pos:c,time:g}=e[o]):(t>=e[i].time&&t<=e[o].time&&({lo:i,hi:o}=xh(e,"time",t)),{time:u,pos:a}=e[i],{time:c,pos:g}=e[o]);const _=c-u;return _?a+(g-a)*(t-u)/_:a}class zj extends q0{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Fb(n,this.min),this._tableRange=Fb(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,o=[],u=[];let c,a,g,_,S;for(c=0,a=t.length;c<a;++c)_=t[c],_>=n&&_<=i&&o.push(_);if(o.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(c=0,a=o.length;c<a;++c)S=o[c+1],g=o[c-1],_=o[c],Math.round((S+g)/2)!==_&&u.push({time:_,pos:c/(a-1)});return u}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((o,u)=>o-u)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Fb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return Fb(this._table,i*this._tableRange+this._minPos,!0)}}wn(zj,"id","timeseries"),wn(zj,"defaults",q0.defaults);var Nse=Object.freeze({__proto__:null,CategoryScale:Aj,LinearScale:Pj,LogarithmicScale:Rj,RadialLinearScale:o0,TimeScale:q0,TimeSeriesScale:zj});const Ase=[Ite,hie,ose,Nse],uz="label";function X4(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Pse(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function dz(e,t){e.labels=t}function hz(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uz;const i=[];e.datasets=t.map(o=>{const u=e.datasets.find(c=>c[n]===o[n]);return!u||!o.data||i.includes(u)?te({},o):(i.push(u),Object.assign(u,o),u)})}function Rse(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uz;const n={labels:[],datasets:[]};return dz(n,e.labels),hz(n,e.datasets,t),n}function Dse(e,t){const q=e,{height:n=150,width:i=300,redraw:o=!1,datasetIdKey:u,type:c,data:a,options:g,plugins:_=[],fallbackContent:S,updateMode:E}=q,A=Jt(q,["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"]),N=L.useRef(null),z=L.useRef(null),B=()=>{N.current&&(z.current=new Q1(N.current,{type:c,data:Rse(a,u),options:g&&te({},g),plugins:_}),X4(t,z.current))},$=()=>{X4(t,null),z.current&&(z.current.destroy(),z.current=null)};return L.useEffect(()=>{!o&&z.current&&g&&Pse(z.current,g)},[o,g]),L.useEffect(()=>{!o&&z.current&&dz(z.current.config.data,a.labels)},[o,a.labels]),L.useEffect(()=>{!o&&z.current&&a.datasets&&hz(z.current.config.data,a.datasets,u)},[o,a.datasets]),L.useEffect(()=>{z.current&&(o?($(),setTimeout(B)):z.current.update(E))},[o,g,a.labels,a.datasets,E]),L.useEffect(()=>{z.current&&($(),setTimeout(B))},[c]),L.useEffect(()=>(B(),()=>$()),[]),Pt.createElement("canvas",te({ref:N,role:"img",height:n,width:i},A),S)}const zse=L.forwardRef(Dse);function Ise(e,t){return Q1.register(t),L.forwardRef((n,i)=>Pt.createElement(zse,Ee(te({},n),{ref:i,type:e})))}const Ose=Ise("bar",v0);Q1.register(...Ase);const K2=(e,t)=>{const n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");switch(t){case"yyyy-MM-dd":return`${n}-${i}-${o}`;case"yyyy-MM":return`${n}-${i}`;case"yyyy":return`${n}`;default:return`${n}-${i}-${o}`}},fz=e=>{const t=new Date(e),n=t.getDay(),i=t.getDate()-n;return new Date(t.setDate(i))},Fse=e=>{const t=fz(e);return new Date(t.setDate(t.getDate()+6))},Lse=e=>new Date(e.getFullYear(),e.getMonth(),1),Bse=e=>new Date(e.getFullYear(),e.getMonth()+1,0),Vse=e=>new Date(e.getFullYear(),0,1),Use=e=>new Date(e.getFullYear(),11,31),$se=(e,t)=>e>=t.start&&e<=t.end,Hse=(e,t,n)=>{if(t==="all"||!n)return e;const i=new Date(n);let o=null;switch(t){case"day":o={start:i,end:i};break;case"week":o={start:fz(i),end:Fse(i)};break;case"month":o={start:Lse(i),end:Bse(i)};break;case"year":o={start:Vse(i),end:Use(i)};break;default:return e}return e.filter(u=>$se(new Date(u.posting_date),o))},qse=(e,t)=>{const n={};e.forEach(u=>{let c="";const a=new Date(u.posting_date);u.posting_date&&(t==="day"?c=K2(a,"yyyy-MM-dd"):t==="month"?c=K2(a,"yyyy-MM"):t==="year"&&(c=K2(a,"yyyy")),n[c]||(n[c]=0),n[c]+=u.loyalty_points||0)});const i=Object.keys(n).sort(),o=i.map(u=>n[u]);return{labels:i,dataPoints:o}},Gse=()=>{const{currentUser:e,loading:t,error:n}=hd($=>$.user),[i,o]=L.useState([]),[u,c]=L.useState("all"),[a,g]=L.useState(""),_=()=>Gt(null,null,function*(){if(e!=null&&e.full_name)try{const $=new Headers;$.append("Authorization","token e0723ce34466cea:79dca2f515d4e2c"),$.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const q={method:"GET",headers:$,redirect:"follow"},W=`https://lblerp.anantdv.com/api/resource/Loyalty Point Entry?fields=["*"]&filters=[["customer", "=", "${e.full_name}"]]`;fetch(W,q).then(Q=>Q.json()).then(Q=>{o(Q.data||[])}).catch(Q=>console.error("Error fetching loyalty data:",Q))}catch($){console.error("Error in getLoyaltyPointsEntryFromLbl:",$)}});console.log("loyalty data....",i),console.log("current user....",e),L.useEffect(()=>{!t&&(e!=null&&e.full_name)&&_()},[e,t]),L.useMemo(()=>[...new Set(i.map($=>$.customer))],[i]);const S=L.useMemo(()=>Hse(i,u,a),[i,u,a]),E=L.useMemo(()=>{const $=S.reduce((Q,Z)=>Q+(Z.loyalty_points||0),0),q=S.reduce((Q,Z)=>Q+(Z.purchase_amount||0),0),W=[...new Set(S.map(Q=>Q.loyalty_program))].length;return{totalPoints:$,totalPurchase:q,uniquePrograms:W,totalEntries:S.length}},[S]),{labels:A,dataPoints:N}=L.useMemo(()=>qse(S,u==="all"?"day":u),[S,u]),z={labels:A,datasets:[{label:"Loyalty Points",data:N,backgroundColor:"rgba(99, 102, 241, 0.7)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:1}]},B={responsive:!0,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Points"}},x:{title:{display:!0,text:"Date"}}}};return t?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading user data..."})]})}):n?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-red-600 mb-2",children:"Error loading user data"}),l.jsx("p",{className:"text-gray-600",children:n})]})}):!e||!e.full_name?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-600 mb-2",children:"Please log in to view your loyalty dashboard"})})}):l.jsx("div",{className:"min-h-screen bg-gray-50 py-6 px-4",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Loyalty Dashboard"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Company: LOTIC BIGE LTD"}),e&&l.jsxs("p",{className:"text-lg font-medium text-blue-600 mt-2",children:["Welcome, ",e.full_name]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{value:u,onChange:$=>c($.target.value),className:"border rounded px-3 py-2 text-gray-800 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"all",children:"All Dates (Day-wise chart)"}),l.jsx("option",{value:"day",children:"Day"}),l.jsx("option",{value:"week",children:"Week (date filter only)"}),l.jsx("option",{value:"month",children:"Month"}),l.jsx("option",{value:"year",children:"Year"})]}),u!=="all"&&l.jsx("input",{type:"date",value:a,onChange:$=>g($.target.value),className:"border rounded px-3 py-2 text-gray-800 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-lg p-6 shadow hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Gk,{className:"w-8 h-8 text-purple-500 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Total Points"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:E.totalPoints.toLocaleString()})]})}),l.jsx("div",{className:"bg-white rounded-lg p-6 shadow hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(lC,{className:"w-8 h-8 text-blue-500 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Total Purchases"}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["",E.totalPurchase.toLocaleString()]})]})}),l.jsx("div",{className:"bg-white rounded-lg p-6 shadow hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Q8,{className:"w-8 h-8 text-green-500 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Programs"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:E.uniquePrograms})]})}),l.jsx("div",{className:"bg-white rounded-lg p-6 shadow hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(xc,{className:"w-8 h-8 text-orange-500 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Total Entries"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:E.totalEntries})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 shadow mb-8",children:[l.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800",children:"Loyalty Points Trend"}),N.length>0?l.jsx(Ose,{data:z,options:B}):l.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:l.jsxs("div",{className:"text-center",children:[l.jsx(xc,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),l.jsx("p",{children:"No data available for the selected filters"})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"My Loyalty Entries"}),l.jsxs("span",{className:"text-sm text-gray-500",children:[S.length," ",S.length===1?"entry":"entries"]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purchase Amount"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.length>0?S.map(($,q)=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$.posting_date?new Date($.posting_date).toLocaleDateString():"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:$.loyalty_program||"N/A"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["+",$.loyalty_points||0]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$.invoice||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$.purchase_amount?`${$.purchase_amount.toLocaleString()}`:"-"})]},$.name||q)):l.jsx("tr",{children:l.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center",children:l.jsxs("div",{className:"text-gray-500",children:[l.jsx(Gk,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-lg font-medium mb-2",children:"No loyalty entries found"}),l.jsx("p",{className:"text-sm",children:u!=="all"?"Try adjusting your filter criteria to see more results.":"You haven't earned any loyalty points yet."})]})})})})]})})]})]})})},Mf=({user:e,children:t})=>{const n=pl();return console.log("ProtectedRoute user:",n),!e||e==="null"||e==="Guest"?l.jsx(yF,{to:"/login",state:{from:n.pathname},replace:!0}):t};function Yf(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function Wse(e){return xi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"},child:[]}]})(e)}function Zse(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"},child:[]}]})(e)}function Yse(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function Ij(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function Xse(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function Kse(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function pz(e){return xi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function Oj(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function Qse(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function oy(e){return xi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function Jse(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(e)}function BT(e){return xi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function ly(e){return xi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 256H96v64h192v-64zm89-151L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm256 304c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-200v96c0 8.84-7.16 16-16 16H80c-8.84 0-16-7.16-16-16v-96c0-8.84 7.16-16 16-16h224c8.84 0 16 7.16 16 16z"},child:[]}]})(e)}function ere(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 208c0-17.67-14.33-32-32-32h-16c-35.35 0-64 28.65-64 64v48c0 35.35 28.65 64 64 64h16c17.67 0 32-14.33 32-32V208zm176 144c35.35 0 64-28.65 64-64v-48c0-35.35-28.65-64-64-64h-16c-17.67 0-32 14.33-32 32v112c0 17.67 14.33 32 32 32h16zM256 0C113.18 0 4.58 118.83 0 256v16c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-16c0-114.69 93.31-208 208-208s208 93.31 208 208h-.12c.08 2.43.12 165.72.12 165.72 0 23.35-18.93 42.28-42.28 42.28H320c0-26.51-21.49-48-48-48h-32c-26.51 0-48 21.49-48 48s21.49 48 48 48h181.72c49.86 0 90.28-40.42 90.28-90.28V256C507.42 118.83 398.82 0 256 0z"},child:[]}]})(e)}function _m(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(e)}function tre(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M320.2 243.8l-49.7 99.4c-6 12.1-23.4 11.7-28.9-.6l-56.9-126.3-30 71.7H60.6l182.5 186.5c7.1 7.3 18.6 7.3 25.7 0L451.4 288H342.3l-22.1-44.2zM473.7 73.9l-2.4-2.5c-51.5-52.6-135.8-52.6-187.4 0L256 100l-27.9-28.5c-51.5-52.7-135.9-52.7-187.4 0l-2.4 2.4C-10.4 123.7-12.5 203 31 256h102.4l35.9-86.2c5.4-12.9 23.6-13.2 29.4-.4l58.2 129.3 49-97.9c5.9-11.8 22.7-11.8 28.6 0l27.6 55.2H481c43.5-53 41.4-132.3-7.3-182.1z"},child:[]}]})(e)}function nre(e){return xi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function ire(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(e)}function sre(e){return xi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function rre(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function are(e){return xi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function ore(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z"},child:[]}]})(e)}function lre(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function cre(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function ure(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function dre(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"},child:[]}]})(e)}function hre(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(e)}function fre(e){return xi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H112C85.5 0 64 21.5 64 48v48H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h272c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H40c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H64v128c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(e)}function d1(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(e)}function Rm(e){return xi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function dl(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(e)}function pre(e){return xi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function mre(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 32h192c13.255 0 24 10.745 24 24v160c0 13.255-10.745 24-24 24H296c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24zm-80 0H24C10.745 32 0 42.745 0 56v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zM0 296v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm296 184h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H296c-13.255 0-24 10.745-24 24v160c0 13.255 10.745 24 24 24z"},child:[]}]})(e)}function gre(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function yre(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(e)}function xre(e){return xi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function _re(e){return xi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function bre(e){return xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(e)}const vre="https://your-erpnext-site.com",K4=[{name:"wireless-earbuds-pro",item_name:"Premium Wireless Earbuds Pro",description:"Premium wireless earbuds with active noise cancellation, 30-hour battery life, and crystal-clear sound quality. Perfect for music lovers and professionals.",image:"https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=400&h=400&fit=crop",standard_rate:2999,item_group:"Electronics",stock_qty:50,brand:"SoundMax",weight:"50g",warranty:"1 Year"},{name:"nike-running-shoes",item_name:"Nike Air Max Running Shoes",description:"Lightweight and comfortable running shoes with advanced cushioning technology. Designed for performance and style with breathable mesh upper.",image:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400&h=400&fit=crop",standard_rate:4999,item_group:"Fashion",stock_qty:25,brand:"Nike",size:"US 8-12",material:"Mesh & Synthetic"},{name:"apple-watch-series",item_name:"Apple Watch Series 9",description:"Advanced smartwatch with health monitoring, GPS tracking, and seamless connectivity. Features include heart rate monitoring, sleep tracking, and 18-hour battery life.",image:"https://images.unsplash.com/photo-1434493789847-2f02dc6ca35d?w=400&h=400&fit=crop",standard_rate:39999,item_group:"Electronics",stock_qty:15,brand:"Apple",display:"45mm Retina",battery:"18 hours"},{name:"gaming-laptop-asus",item_name:"ASUS ROG Gaming Laptop",description:"High-performance gaming laptop with Intel i7 processor, 16GB RAM, RTX 4060 graphics card, and 1TB SSD. Perfect for gaming and professional work.",image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400&h=400&fit=crop",standard_rate:89999,item_group:"Electronics",stock_qty:10,brand:"ASUS",processor:"Intel i7",ram:"16GB DDR4"}],wre=[{name:"Electronics",item_group_name:"Electronics",image:"https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=200&h=200&fit=crop"},{name:"Fashion",item_group_name:"Fashion",image:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=200&h=200&fit=crop"},{name:"Home",item_group_name:"Home & Living",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=200&h=200&fit=crop"},{name:"Books",item_group_name:"Books",image:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=200&h=200&fit=crop"}],Sre=Os.create({baseURL:vre,timeout:1e4,headers:{"Content-Type":"application/json"}});Sre.interceptors.request.use(e=>Gt(null,null,function*(){const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e}));const Fj={login:(e,t)=>Gt(null,null,function*(){return{message:{api_key:"mock-token-123"}}}),getItems:(...t)=>Gt(null,[...t],function*(e={}){{let n=[...K4];return e.item_group&&(n=n.filter(i=>i.item_group.toLowerCase()===e.item_group.toLowerCase())),n}}),getItemDetails:e=>Gt(null,null,function*(){{const t=K4.find(n=>n.name===e);if(!t)throw new Error("Product not found");return t}}),getCategories:()=>Gt(null,null,function*(){return wre}),createSalesOrder:e=>Gt(null,null,function*(){return{name:`TBM-${Date.now()}`,status:"Draft",customer:e.customer,total_amount:e.total_amount}})},Pn={primary:"#837e70ff",primaryLight:"#3A3A3C",primaryDark:"#454441ff",secondary:"#be9d42ff",secondaryLight:"#AD974F",white:"#FFFFFF",lightGray:"#EAEAEA",textPrimary:"#231F20",textSecondary:"#3A3A3C",success:"#6B8E23",error:"#C62828"},Lb=e=>{e.totalItems=e.items.reduce((t,n)=>t+n.quantity,0),e.totalAmount=e.items.reduce((t,n)=>t+n.standard_rate*n.quantity,0)},mz=Ty({name:"cart",initialState:{items:[],wishlist:[],totalAmount:0,totalItems:0,wishlistCount:0},reducers:{addToCart:(e,t)=>{const n=e.items.find(i=>i.item_code===t.payload.item_code);n?n.quantity+=1:e.items.push(Ee(te({},t.payload),{quantity:1})),Lb(e)},removeFromCart:(e,t)=>{e.items=e.items.filter(n=>n.item_code!==t.payload),Lb(e)},updateQuantity:(e,t)=>{const{item_code:n,quantity:i}=t.payload,o=e.items.find(u=>u.item_code===n);o&&(o.quantity=i,i<=0&&(e.items=e.items.filter(u=>u.item_code!==n))),Lb(e)},addToWishlist:(e,t)=>{e.wishlist.find(i=>i.item_code===t.payload.item_code)||e.wishlist.push(t.payload)},removeFromWishlist:(e,t)=>{e.wishlist=e.wishlist.filter(n=>n.item_code!==t.payload)},toggleWishlist:(e,t)=>{const n=t.payload;e.wishlist.find(o=>o.item_code===n.item_code)?e.wishlist=e.wishlist.filter(o=>o.item_code!==n.item_code):e.wishlist.push(n)},clearCart:e=>{e.items=[],Lb(e)},clearAll:e=>{e.items=[],e.wishlist=[],e.totalAmount=0,e.totalItems=0},setWishlistCountRedux:(e,t)=>{e.wishlistCount=t.payload}}}),{addToCart:jre,removeFromCart:Kae,updateQuantity:Qae,addToWishlist:Jae,removeFromWishlist:eoe,toggleWishlist:toe,clearCart:Cre,clearAll:noe,setWishlistCountRedux:Q4}=mz.actions,Tre=mz.reducer,kre=({product:e})=>{console.log("Products......",e),Im();const{wishlist:t}=hd(u=>u.cart),n=t.some(u=>u.name===e.name),i=()=>Gt(null,null,function*(){try{console.log(` Adding 1 x ${e.item_name} to ERPNext cart...`);const u=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:e.item_code,qty:1})});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const c=yield u.json();if(console.log(" Add to Cart Response:",c),c.message)alert(` Added 1 x ${e.item_name} to cart!`);else throw new Error("Failed to add to cart")}catch(u){console.error(" Error adding to cart:",u),alert(" Error adding item to cart. Please try again.")}finally{}}),o=u=>Gt(null,null,function*(){u.preventDefault();const c=yield fetch("/api/method/webshop.webshop.doctype.wishlist.wishlist.add_to_wishlist",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:e.item_code||e.id})});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const a=yield c.json();console.log(" Add to Wishlist API Response:",a)});return l.jsx("div",{style:{textDecoration:"none",color:"inherit"},children:l.jsxs("div",{style:{backgroundColor:Pn.white,borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",overflow:"hidden",transition:"all 0.3s ease",cursor:"pointer",position:"relative",height:"400px",display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{position:"relative",height:"220px",overflow:"hidden"},children:[l.jsx("img",{src:e.image||"https://via.placeholder.com/300x220",alt:e.item_name,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onMouseOver:u=>u.target.style.transform="scale(1.05)",onMouseOut:u=>u.target.style.transform="scale(1)"}),l.jsx("button",{onClick:o,style:{position:"absolute",top:"12px",right:"12px",backgroundColor:Pn.white,border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"all 0.3s ease"},children:n?l.jsx(_m,{color:Pn.error,size:18}):l.jsx(bre,{color:Pn.gray,size:18})})]}),l.jsxs("div",{style:{padding:"16px",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"600",color:Pn.textPrimary,lineHeight:"1.4",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.item_name}),l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:Pn.success,padding:"2px 6px",borderRadius:"4px",marginRight:"8px"},children:[l.jsx(pre,{color:Pn.white,size:12}),l.jsx("span",{style:{color:Pn.white,fontSize:"12px",fontWeight:"bold",marginLeft:"4px"},children:"4.2"})]}),l.jsx("span",{style:{color:Pn.gray,fontSize:"12px"},children:"(150 reviews)"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",flexWrap:"wrap",gap:"8px"},children:l.jsxs("span",{style:{fontSize:"20px",fontWeight:"bold",color:Pn.textPrimary},children:["",e.standard_rate]})})]}),l.jsx("button",{onClick:i,style:{width:"100%",backgroundColor:Pn.primary,color:Pn.white,border:"none",borderRadius:"8px",padding:"12px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.3s ease"},onMouseOver:u=>u.target.style.backgroundColor=Pn.primaryDark,onMouseOut:u=>u.target.style.backgroundColor=Pn.primary,children:"Add to Cart"})]})]})})},Ere=()=>{pl();const[e,t]=ZF(),n=e.get("category"),i=e.get("search")||"",o=Im(),[u,c]=L.useState([]),[a,g]=L.useState([]),[_,S]=L.useState(!0),[E,A]=L.useState(n||""),[N,z]=L.useState("list"),[B,$]=L.useState("name"),[q,W]=L.useState({}),[Q,Z]=L.useState({}),[K,le]=L.useState(null),ge=L.useCallback((Ge,Dt="success")=>{le({message:Ge,type:Dt}),setTimeout(()=>le(null),3e3)},[]),[he,pe]=L.useState([]),[Ie,He]=L.useState(!1),[Ye,rt]=L.useState(!1),[Rt,St]=L.useState(0),[De,Qe]=L.useState(!1),[et,Nt]=L.useState(""),fe=L.useCallback((Ge,Dt)=>Gt(null,null,function*(){Dt&&(Dt.preventDefault(),Dt.stopPropagation());try{W(Ot=>Ee(te({},Ot),{[Ge.id]:!0})),console.log(` Adding ${Ge.item_name} to ERPNext cart...`);const Lt=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:Ge.item_code||Ge.id,qty:1})});if(!Lt.ok)throw new Error(`HTTP error! status: ${Lt.status}`);const It=yield Lt.json();if(console.log(" Add to Cart API Response:",It),It.message)return o(jre(Ee(te({},Ge),{quantity:1}))),ge(` ${Ge.item_name} added to cart!`,"success"),!0;throw new Error("Failed to add to cart")}catch(Lt){return console.error(" Error adding to cart:",Lt),ge(" Failed to add to cart. Please try again.","error"),!1}finally{W(Lt=>Ee(te({},Lt),{[Ge.id]:!1}))}}),[o,ge]),Xe=L.useCallback((Ge,Dt)=>Gt(null,null,function*(){Dt&&(Dt.preventDefault(),Dt.stopPropagation());try{Z(Ot=>Ee(te({},Ot),{[Ge.id]:!0})),console.log(` Adding ${Ge.item_name} to ERPNext wishlist...`);const Lt=yield fetch("/api/method/webshop.webshop.doctype.wishlist.wishlist.add_to_wishlist",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:Ge.item_code||Ge.id})});if(!Lt.ok)throw new Error(`HTTP error! status: ${Lt.status}`);const It=yield Lt.json();return console.log(" Add to Wishlist API Response:",It),ge(` ${Ge.item_name} added to wishlist!`,"success"),c(Ot=>Ot.map(en=>en.id===Ge.id?Ee(te({},en),{wished:!0}):en)),!0}catch(Lt){return console.error(" Error adding to wishlist:",Lt),ge(" Failed to add to wishlist. Please try again.","error"),!1}finally{Z(Lt=>Ee(te({},Lt),{[Ge.id]:!1}))}}),[ge]),tt=()=>{const Ge=[{name:"Electronics",subcategories:[{name:"Laptops",image:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=500&h=500&fit=crop&crop=center"},{name:"Headphones",image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&h=500&fit=crop&crop=center"},{name:"Tablets",image:"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=500&h=500&fit=crop&crop=center"},{name:"Smartwatches",image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&h=500&fit=crop&crop=center"},{name:"Monitors",image:"https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=500&h=500&fit=crop&crop=center"},{name:"Desktops",image:"https://images.unsplash.com/photo-1587831990711-23ca6441447b?w=500&h=500&fit=crop&crop=center"},{name:"Gaming Laptops",image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&h=500&fit=crop&crop=center"},{name:"Cameras",image:"https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=500&h=500&fit=crop&crop=center"}]},{name:"Fashion",subcategories:[{name:"Men's Clothing",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500&h=500&fit=crop&crop=center"},{name:"Women's Clothing",image:"https://images.unsplash.com/photo-1494790108755-2616c4f5d81c?w=500&h=500&fit=crop&crop=center"},{name:"Kids Fashion",image:"https://images.unsplash.com/photo-1519238263530-99bdd11df2ea?w=500&h=500&fit=crop&crop=center"},{name:"Footwear",image:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=500&h=500&fit=crop&crop=center"}]},{name:"Home & Living",subcategories:[{name:"Furniture",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=500&h=500&fit=crop&crop=center"},{name:"Kitchen Appliances",image:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=500&h=500&fit=crop&crop=center"},{name:"Home Decor",image:"https://images.unsplash.com/photo-1513694203232-719a280e022f?w=500&h=500&fit=crop&crop=center"},{name:"Bedding",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=500&h=500&fit=crop&crop=center"}]},{name:"Books",subcategories:[{name:"Fiction",image:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=500&h=500&fit=crop&crop=center"},{name:"Non-Fiction",image:"https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=500&h=500&fit=crop&crop=center"},{name:"Academic",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500&h=500&fit=crop&crop=center"},{name:"Comics & Manga",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=500&h=500&fit=crop&crop=center"}]},{name:"Sports",subcategories:[{name:"Fitness Equipment",image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=500&fit=crop&crop=center"},{name:"Cricket",image:"https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?w=500&h=500&fit=crop&crop=center"},{name:"Football",image:"https://images.unsplash.com/photo-1431324155629-1a6deb1dec8d?w=500&h=500&fit=crop&crop=center"},{name:"Tennis",image:"https://images.unsplash.com/photo-1622279457486-62dcc4a431d6?w=500&h=500&fit=crop&crop=center"}]}],Dt=[];let Lt=1;return Ge.forEach(It=>{It.subcategories.forEach(Ot=>{for(let en=1;en<=5;en++)Dt.push({id:Lt++,name:`${Ot.name.replace(/\s+/g,"-")}-${Lt}`,item_name:`${Ot.name} Product ${en}`,item_code:`ITEM-${Lt}`,image:Ot.image,standard_rate:Math.floor(Math.random()*5e4)+1e3,originalPrice:Math.floor(Math.random()*6e4)+55e3,discount:Math.floor(Math.random()*50)+10,rating:(Math.random()*2+3).toFixed(1),reviews:Math.floor(Math.random()*1e3)+100,category:It.name,subcategory:Ot.name,description:`Premium ${Ot.name} product with advanced features and high-quality materials.`,features:["High-quality materials and construction","Advanced technology and features","Professional grade performance","2-year comprehensive warranty","Fast and reliable delivery"],brand:["Samsung","Apple","Sony","LG","HP","Dell","Xiaomi","OnePlus"][Math.floor(Math.random()*8)],inStock:Math.random()>.1,wished:!1,in_cart:!1})})}),Dt};L.useEffect(()=>{Gt(null,null,function*(){try{S(!0);const Dt=tt(),Lt=[{name:"Electronics",item_group_name:"Electronics"},{name:"Fashion",item_group_name:"Fashion"},{name:"Home & Living",item_group_name:"Home & Living"},{name:"Books",item_group_name:"Books"},{name:"Sports",item_group_name:"Sports"}];try{const[It,Ot]=yield Promise.all([Fj.getItems(E?{item_group:E}:{}),Fj.getCategories()]);if(It&&It.length>0){const en=It.map((_n,Yn)=>Ee(te({},_n),{id:_n.id||_n.item_code||Yn+1,name:_n.name||`product-${Yn+1}`,item_code:_n.item_code||`ITEM-${Yn+1}`,wished:!1,in_cart:!1}));c(en)}else c(Dt);Ot&&Ot.length>0?g(Ot):g(Lt)}catch(It){console.log("API failed, using sample data:",It),c(Dt),g(Lt)}}catch(Dt){console.error("Error:",Dt),c(tt()),g([{name:"Electronics",item_group_name:"Electronics"},{name:"Fashion",item_group_name:"Fashion"},{name:"Home & Living",item_group_name:"Home & Living"},{name:"Books",item_group_name:"Books"},{name:"Sports",item_group_name:"Sports"}])}finally{S(!1)}})},[E]);const Me=Ge=>{A(Ge),t(Ge?{category:Ge}:{})},ot=Ge=>{pe(Dt=>Dt.includes(Ge)?Dt.filter(Lt=>Lt!==Ge):[...Dt,Ge])},dt=u.filter(Ge=>{var Ot;const Dt=i===""||Ge.item_name.toLowerCase().includes(i.toLowerCase())||((Ot=Ge.description)==null?void 0:Ot.toLowerCase().includes(i.toLowerCase())),Lt=he.length===0||he.some(en=>{var _n;return(_n=Ge.brand)==null?void 0:_n.toLowerCase().includes(en.toLowerCase())}),It=!E||Ge.category===E;return Dt&&Lt&&It}).sort((Ge,Dt)=>{switch(B){case"price_low":return Ge.standard_rate-Dt.standard_rate;case"price_high":return Dt.standard_rate-Ge.standard_rate;case"name":default:return Ge.item_name.localeCompare(Dt.item_name)}}),pt=({product:Ge})=>{var It,Ot;const Dt=q[Ge.id],Lt=Q[Ge.id];return l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"16px",borderBottom:"1px solid #E5E7EB",backgroundColor:"#FFFFFF",transition:"background-color 0.2s ease"},onMouseOver:en=>en.currentTarget.style.backgroundColor="#F9FAFB",onMouseOut:en=>en.currentTarget.style.backgroundColor="#FFFFFF",children:[l.jsx("div",{style:{marginRight:"12px"},children:l.jsx("button",{onClick:en=>Xe(Ge,en),disabled:Lt||Ge.wished,style:{background:"none",border:"none",cursor:Lt||Ge.wished?"not-allowed":"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:Lt?l.jsx(dl,{size:18,style:{animation:"spin 1s linear infinite",color:"#FF9900"}}):l.jsx(_m,{size:18,style:{color:Ge.wished?"#FF4444":"#DDD",transition:"color 0.2s ease"}})})}),l.jsx(Mr,{to:`/product/${Ge.id}`,style:{textDecoration:"none",flexShrink:0},children:l.jsx("div",{style:{width:"140px",height:"120px",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},children:l.jsx("img",{src:Ge.image||"https://via.placeholder.com/140x120",alt:Ge.item_name,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onMouseOver:en=>en.target.style.transform="scale(1.05)",onMouseOut:en=>en.target.style.transform="scale(1)"})})}),l.jsxs("div",{style:{flex:1,paddingLeft:"20px",paddingRight:"20px"},children:[l.jsx(Mr,{to:`/product/${Ge.id}`,style:{textDecoration:"none",color:"inherit"},children:l.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#0F1111",margin:"0 0 6px 0",lineHeight:"1.3",cursor:"pointer"},children:Ge.item_name})}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#00A652",color:"white",padding:"2px 6px",borderRadius:"3px",fontSize:"12px",fontWeight:"600"},children:[Ge.rating," "]}),l.jsxs("span",{style:{fontSize:"13px",color:"#878787"},children:[((It=Ge.reviews)==null?void 0:It.toLocaleString())||"0"," Ratings & Reviews"]})]}),l.jsx("div",{style:{fontSize:"13px",color:"#212121",lineHeight:"1.4"},children:((Ot=Ge.features)==null?void 0:Ot.slice(0,4).map((en,_n)=>l.jsxs("div",{children:[" ",en]},_n)))||l.jsxs(l.Fragment,{children:[l.jsx("div",{children:" High-quality materials and construction"}),l.jsx("div",{children:" Advanced technology and features"}),l.jsx("div",{children:" Professional grade performance"}),l.jsx("div",{children:" 2-year comprehensive warranty"})]})})]}),l.jsxs("div",{style:{width:"220px",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px",flexShrink:0},children:[l.jsxs("div",{style:{textAlign:"right"},children:[l.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#212121",marginBottom:"4px"},children:["",(Ge.standard_rate||29990).toLocaleString()]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"flex-end",marginBottom:"4px"},children:[l.jsxs("span",{style:{fontSize:"14px",color:"#878787",textDecoration:"line-through"},children:["",(Ge.originalPrice||49990).toLocaleString()]}),l.jsxs("span",{style:{fontSize:"14px",color:"#388E3C",fontWeight:"600"},children:[Ge.discount||40,"% off"]})]})]}),l.jsx("div",{style:{fontSize:"13px",color:"#388E3C",fontWeight:"500",textAlign:"right",marginBottom:"8px"},children:"Upto 2,420 Off on Exchange"}),l.jsx("div",{style:{backgroundColor:"#E8F5E8",color:"#2E7D32",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",marginBottom:"12px"},children:"Bank Offer"}),l.jsxs("button",{onClick:en=>fe(Ge,en),disabled:Dt||!Ge.inStock,style:{width:"100%",padding:"8px 12px",backgroundColor:Dt?"#F0F0F0":Ge.inStock?"#FFD814":"#CCCCCC",border:`1px solid ${Dt?"#D0D0D0":Ge.inStock?"#FCD200":"#AAAAAA"}`,borderRadius:"20px",fontSize:"13px",fontWeight:"600",cursor:Dt||!Ge.inStock?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",marginBottom:"8px",transition:"all 0.3s ease",opacity:Dt||!Ge.inStock?.7:1,color:Ge.inStock?"#000000":"#666666"},onMouseOver:en=>{!Dt&&Ge.inStock&&(en.target.style.backgroundColor="#F7CA00")},onMouseOut:en=>{!Dt&&Ge.inStock&&(en.target.style.backgroundColor="#FFD814")},children:[Dt?l.jsx(dl,{style:{animation:"spin 1s linear infinite"},size:12}):l.jsx(Rm,{size:12}),Dt?"Adding...":Ge.inStock?"Add to Cart":"Out of Stock"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#2874F0",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",style:{marginRight:"4px"}}),"Add to Compare"]})]})]})},Ve=()=>{if(!K)return null;const Ge=()=>{switch(K.type){case"success":return"#00A652";case"error":return"#B12704";case"warning":return"#FF9900";default:return"#007185"}};return l.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:Ge(),color:"white",padding:"12px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxWidth:"400px"},children:K.message})};return _?l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",fontSize:"18px",color:"#666666",backgroundColor:"#FFFFFF"},children:[l.jsx(dl,{size:40,color:"#FF9900",style:{animation:"spin 1s linear infinite",marginRight:"16px"}}),"Loading products..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Ve,{}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh"},children:[l.jsxs("div",{style:{display:"flex",maxWidth:"1400px",margin:"0 auto",gap:"24px",padding:"20px"},children:[l.jsxs("div",{style:{position:"sticky",top:"20px",alignSelf:"flex-start",width:"240px",height:"fit-content",maxHeight:"calc(100vh - 40px)",backgroundColor:"#FFFFFF",color:"#000000",padding:"16px 0 16px 16px",fontSize:"14px",lineHeight:"20px",flexShrink:0,overflowY:"auto",borderRight:"1px solid #E7E7E7",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",fontFamily:'"Amazon Ember", Arial, sans-serif'},children:[l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h4",{style:{fontSize:"16px",fontWeight:"700",color:"#0F1111",margin:"0 0 8px 0",lineHeight:"24px"},children:"Categories"}),l.jsxs("div",{style:{paddingLeft:"16px"},children:[l.jsxs("div",{style:{padding:"4px 0",fontSize:"13px",color:E?"#565959":"#007185",cursor:"pointer",lineHeight:"16px",fontWeight:E?"400":"600"},onClick:()=>Me(""),children:["All Products (",u.length,")"]}),a.map(Ge=>{const Dt=u.filter(Lt=>Lt.category===Ge.name).length;return l.jsxs("div",{style:{padding:"4px 0",fontSize:"13px",color:E===Ge.name?"#007185":"#565959",cursor:"pointer",lineHeight:"16px",fontWeight:E===Ge.name?"600":"400"},onClick:()=>Me(Ge.name),children:[Ge.item_group_name||Ge.name," (",Dt,")"]},Ge.name)})]})]}),l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h4",{style:{fontSize:"16px",fontWeight:"700",color:"#0F1111",margin:"0 0 8px 0",lineHeight:"24px"},children:"Brands"}),["Samsung","Apple","Sony","LG","HP","Dell","Xiaomi","OnePlus"].map(Ge=>l.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"4px",lineHeight:"20px"},children:[l.jsx("input",{type:"checkbox",style:{marginRight:"8px",transform:"scale(1.1)",accentColor:"#FF9900"},checked:he.includes(Ge),onChange:()=>ot(Ge)}),l.jsx("span",{style:{color:"#0F1111",fontSize:"14px"},children:Ge})]},Ge))]}),l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h4",{style:{fontSize:"16px",fontWeight:"700",color:"#0F1111",margin:"0 0 8px 0",lineHeight:"24px"},children:"Price"}),["Under 1,000","1,000 - 5,000","5,000 - 10,000","10,000 - 25,000","Over 25,000"].map(Ge=>l.jsx("div",{style:{cursor:"pointer",padding:"4px 0",fontSize:"14px",color:et===Ge?"#007185":"#0F1111",lineHeight:"20px",fontWeight:et===Ge?"600":"400"},onClick:()=>Nt(et===Ge?"":Ge),children:Ge},Ge))]})]}),l.jsxs("div",{style:{flex:1,minHeight:"0"},children:[l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h1",{style:{fontSize:"28px",fontWeight:"400",color:"#0F1111",margin:"0 0 8px 0"},children:E?`${E}`:"All Products"}),l.jsxs("div",{style:{fontSize:"14px",color:"#565959"},children:["Showing ",dt.length," products",i&&` for "${i}"`]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",padding:"12px 16px",backgroundColor:"#F7F8F8",borderRadius:"4px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[l.jsx("span",{style:{fontSize:"14px",color:"#0F1111",fontWeight:"600"},children:"Sort by:"}),l.jsxs("select",{value:B,onChange:Ge=>$(Ge.target.value),style:{padding:"6px 8px",border:"1px solid #D5D9D9",borderRadius:"4px",fontSize:"14px",backgroundColor:"#FFFFFF",color:"#0F1111",fontFamily:"inherit"},children:[l.jsx("option",{value:"name",children:"Popularity"}),l.jsx("option",{value:"price_low",children:"Price -- Low to High"}),l.jsx("option",{value:"price_high",children:"Price -- High to Low"}),l.jsx("option",{value:"rating",children:"Newest First"}),l.jsx("option",{value:"newest",children:"Discount"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("button",{onClick:()=>z("grid"),style:{padding:"6px 8px",border:"1px solid #D5D9D9",backgroundColor:N==="grid"?"#FF9900":"#FFFFFF",color:N==="grid"?"#FFFFFF":"#0F1111",borderRadius:"4px",cursor:"pointer"},children:l.jsx(mre,{size:12})}),l.jsx("button",{onClick:()=>z("list"),style:{padding:"6px 8px",border:"1px solid #D5D9D9",backgroundColor:N==="list"?"#FF9900":"#FFFFFF",color:N==="list"?"#FFFFFF":"#0F1111",borderRadius:"4px",cursor:"pointer"},children:l.jsx(ire,{size:12})})]})]}),dt.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",backgroundColor:"#FFFFFF",borderRadius:"4px",border:"1px solid #D5D9D9"},children:[l.jsx("h3",{style:{fontSize:"24px",color:"#0F1111",marginBottom:"16px"},children:"No products found"}),l.jsx("p",{style:{color:"#565959",fontSize:"14px"},children:"Try adjusting your filters or search terms"})]}):N==="list"?l.jsx("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"8px",border:"1px solid #E5E7EB",overflow:"hidden"},children:dt.map(Ge=>l.jsx(pt,{product:Ge},Ge.id))}):l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"16px"},children:dt.map(Ge=>l.jsx(kre,{product:Ge},Ge.id))})]})]}),l.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})]})},Mre=()=>{var $,q;const{id:e}=tC(),t=Pr(),[n,i]=L.useState(null),[o,u]=L.useState(!0),[c,a]=L.useState(1),[g,_]=L.useState(!1),[S,E]=L.useState(!1),A=()=>Gt(null,null,function*(){try{console.log(" Fetching product details for ID:",e),u(!0);let W=yield fetch(`/api/resource/Website Item/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(W.ok){const Z=yield W.json();if(Z.data){console.log(" Found product via Website Item:",Z.data),i(N(Z.data));return}}if(W=yield fetch(`/api/resource/Item/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}),W.ok){const Z=yield W.json();if(Z.data){console.log(" Found product via Item:",Z.data),i(N(Z.data));return}}const Q=yield fetch("/api/method/webshop.webshop.api.get_product_filter_data",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query_args:{field_filters:{},attribute_filters:{},item_group:null,start:null,from_filters:!1}})});if(Q.ok){const Z=yield Q.json();if(Z.message&&Z.message.items){const K=Z.message.items.find(le=>le.item_code===e||le.name===e||le.route===e||le.web_item_name===e||le.item_name===e);if(K){console.log(" Found product via search:",K),i(N(K));return}}}console.log(" Product not found for ID:",e),i(null)}catch(W){console.error(" Error fetching product details:",W),i(null)}finally{u(!1)}}),N=W=>({id:W.name||W.item_code,item_name:W.item_name||W.web_item_name,web_item_name:W.web_item_name,item_code:W.item_code,image:W.website_image?`${window.location.origin}${W.website_image}`:W.image?`${window.location.origin}${W.image}`:"https://via.placeholder.com/500x500?text=No+Image",standard_rate:W.price_list_rate||W.standard_rate||0,originalPrice:W.formatted_mrp?parseFloat(W.formatted_mrp.replace(/[^\d.]/g,"")):null,discount:W.formatted_mrp&&(W.price_list_rate||W.standard_rate)?Math.round((parseFloat(W.formatted_mrp.replace(/[^\d.]/g,""))-(W.price_list_rate||W.standard_rate))/parseFloat(W.formatted_mrp.replace(/[^\d.]/g,""))*100):0,formatted_price:W.formatted_price,formatted_mrp:W.formatted_mrp,category:W.item_group||"General",brand:W.brand||"Generic",inStock:W.in_stock!==!1,in_cart:W.in_cart,on_backorder:W.on_backorder,description:W.short_description||W.web_long_description||W.description||`Premium ${W.item_name||W.web_item_name} from ${W.item_group||"our"} collection. High-quality product with excellent features and reliable performance.`,route:W.route,has_variants:W.has_variants,variant_of:W.variant_of,website_warehouse:W.website_warehouse,wished:W.wished,ranking:W.ranking,specifications:{"Item Code":W.item_code,Brand:W.brand||"Generic",Category:W.item_group||"General","Stock Status":W.in_stock!==!1?"In Stock":"Limited Stock",Variants:W.has_variants?"Available":"Single Product",Warehouse:W.website_warehouse||"Default"}}),z=()=>Gt(null,null,function*(){try{_(!0),console.log(` Adding ${c} x ${n.item_name} to ERPNext cart...`);const W=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:n.item_code,qty:c})});if(!W.ok)throw new Error(`HTTP error! status: ${W.status}`);const Q=yield W.json();if(console.log(" Add to Cart Response:",Q),Q.message)alert(` Added ${c} x ${n.item_name} to cart!`),i(Z=>Ee(te({},Z),{in_cart:!0}));else throw new Error("Failed to add to cart")}catch(W){console.error(" Error adding to cart:",W),alert(" Error adding item to cart. Please try again.")}finally{_(!1)}}),B=()=>Gt(null,null,function*(){try{E(!0),console.log(` Adding ${n.item_name} to ERPNext wishlist...`);const W=yield fetch("/api/method/webshop.webshop.doctype.wishlist.wishlist.add_to_wishlist",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:n.item_code})});if(!W.ok)throw new Error(`HTTP error! status: ${W.status}`);const Q=yield W.json();console.log(" Add to Wishlist Response:",Q),alert(` Added ${n.item_name} to wishlist!`),i(Z=>Ee(te({},Z),{wished:!0}))}catch(W){console.error(" Error adding to wishlist:",W),alert(" Error adding to wishlist. Please try again.")}finally{E(!1)}});return L.useEffect(()=>{e&&A()},[e]),o?l.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",fontSize:"18px",color:"#666666"},children:[l.jsx(dl,{size:40,color:"#FF9900",style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),"Loading product details from ERPNext..."]}):n?l.jsxs("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"20px"},children:[l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[l.jsxs("button",{onClick:()=>t(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"transparent",border:"1px solid #D5D9D9",borderRadius:"4px",cursor:"pointer",marginBottom:"20px",color:"#0F1111"},children:[l.jsx(Yf,{size:14}),"Back"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth>768?"1fr 1fr":"1fr",gap:"40px",alignItems:"start"},children:[l.jsx("div",{style:{backgroundColor:"#F7F8F8",borderRadius:"8px",padding:"20px",textAlign:"center"},children:l.jsx("img",{src:n.image,alt:n.item_name,style:{width:"100%",maxWidth:"500px",height:"auto",borderRadius:"8px"},onError:W=>{W.target.src=`https://via.placeholder.com/500x500?text=${encodeURIComponent(n.item_name.substring(0,10))}`}})}),l.jsxs("div",{children:[l.jsx("h1",{style:{fontSize:"28px",fontWeight:"400",color:"#0F1111",margin:"0 0 16px 0",lineHeight:"1.3"},children:n.item_name}),l.jsxs("div",{style:{fontSize:"16px",color:"#007185",marginBottom:"12px",fontWeight:"600"},children:["Brand: ",n.brand]}),l.jsxs("div",{style:{fontSize:"14px",color:"#565959",marginBottom:"16px"},children:["Item Code: ",n.item_code]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"4px"},children:[l.jsx("span",{style:{fontSize:"28px",fontWeight:"400",color:"#B12704"},children:n.formatted_price||`${(($=n.standard_rate)==null?void 0:$.toLocaleString("en-IN"))||"0"}`}),n.originalPrice&&n.originalPrice>n.standard_rate&&l.jsx("span",{style:{fontSize:"14px",color:"#565959",textDecoration:"line-through"},children:n.formatted_mrp||`${(q=n.originalPrice)==null?void 0:q.toLocaleString("en-IN")}`})]}),n.discount>0&&l.jsxs("div",{style:{fontSize:"14px",color:"#00A652",fontWeight:"600"},children:["Save ",n.discount,"% ",n.originalPrice&&`(${(n.originalPrice-n.standard_rate).toLocaleString("en-IN")})`]})]}),l.jsx("div",{style:{fontSize:"18px",color:n.inStock?"#00A652":"#B12704",fontWeight:"600",marginBottom:"20px"},children:n.inStock?"In Stock":n.on_backorder?"On Backorder":"Out of Stock"}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#0F1111",marginBottom:"8px"},children:"About this item"}),l.jsx("p",{style:{color:"#565959",lineHeight:"1.5",marginBottom:"12px"},children:n.description})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#0F1111",marginBottom:"8px"},children:"Specifications"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",backgroundColor:"#F7F8F8",padding:"12px",borderRadius:"6px"},children:Object.entries(n.specifications).map(([W,Q])=>l.jsxs(Pt.Fragment,{children:[l.jsxs("div",{style:{fontWeight:"600",color:"#0F1111",fontSize:"14px"},children:[W,":"]}),l.jsx("div",{style:{color:"#565959",fontSize:"14px"},children:Q})]},W))})]}),n.inStock?l.jsxs("div",{style:{border:"1px solid #D5D9D9",borderRadius:"8px",padding:"20px",backgroundColor:"#F7F8F8"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[l.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:"#0F1111"},children:"Quantity:"}),l.jsx("select",{value:c,onChange:W=>a(parseInt(W.target.value)),style:{padding:"8px",border:"1px solid #D5D9D9",borderRadius:"4px",backgroundColor:"#FFFFFF"},children:[...Array(10)].map((W,Q)=>l.jsx("option",{value:Q+1,children:Q+1},Q+1))})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[l.jsxs("button",{onClick:B,disabled:S||n.wished,style:{padding:"12px",backgroundColor:n.wished?"#E91E63":"#FFFFFF",border:`2px solid ${n.wished?"#E91E63":"#D5D9D9"}`,borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:n.wished?"#FFFFFF":"#0F1111",cursor:S||n.wished?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:S?.7:1},onMouseOver:W=>{!n.wished&&!S&&(W.target.style.backgroundColor="#FEF2F2",W.target.style.borderColor="#E91E63")},onMouseOut:W=>{!n.wished&&!S&&(W.target.style.backgroundColor="#FFFFFF",W.target.style.borderColor="#D5D9D9")},children:[S?l.jsx(dl,{style:{animation:"spin 1s linear infinite"},size:16}):l.jsx(_m,{size:16}),n.wished?"In Wishlist":"Add to Wishlist"]}),l.jsxs("button",{onClick:z,disabled:g,style:{padding:"12px",backgroundColor:g?"#F0F0F0":"#FFD814",border:`1px solid ${g?"#D0D0D0":"#FCD200"}`,borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:g?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:g?.7:1},onMouseOver:W=>{g||(W.target.style.backgroundColor="#F7CA00")},onMouseOut:W=>{g||(W.target.style.backgroundColor="#FFD814")},children:[g?l.jsx(dl,{style:{animation:"spin 1s linear infinite"},size:16}):l.jsx(Rm,{size:16}),g?"Adding...":"Add to Cart"]})]}),l.jsxs("button",{onClick:()=>{navigator.share?navigator.share({title:n.item_name,text:n.description,url:window.location.href}):navigator.clipboard.writeText(window.location.href).then(()=>{alert("Product link copied to clipboard!")})},style:{width:"100%",marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px",backgroundColor:"transparent",border:"none",color:"#007185",cursor:"pointer",fontSize:"14px"},children:[l.jsx(dre,{size:14}),"Share Product"]})]}):l.jsxs("div",{style:{border:"1px solid #D5D9D9",borderRadius:"8px",padding:"20px",backgroundColor:"#F7F8F8",textAlign:"center"},children:[l.jsx("h3",{style:{color:"#B12704",marginBottom:"8px"},children:"Currently Unavailable"}),l.jsx("p",{style:{color:"#565959",fontSize:"14px"},children:"This item is currently out of stock. Please check back later or contact us for availability."})]})]})]})]}),l.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):l.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",fontSize:"18px",color:"#666666"},children:[l.jsx("h2",{children:"Product not found"}),l.jsx("p",{children:"The product you're looking for doesn't exist or may have been removed."}),l.jsx("button",{onClick:()=>t("/trade"),style:{padding:"12px 24px",backgroundColor:"#0F1111",color:"#FFFFFF",border:"none",borderRadius:"6px",cursor:"pointer",marginTop:"16px"},children:"Back to Products"})]})},Nre=()=>{var St,De,Qe,et,Nt;const e=Pr(),[t,n]=L.useState([]),[i,o]=L.useState(!0),[u,c]=L.useState(null),[a,g]=L.useState({total_items:0,total_amount:0,net_total:0,grand_total:0,taxes:0,shipping_charges:0,discount:0}),[_,S]=L.useState({}),[E,A]=L.useState(null),[N,z]=L.useState([]),[B,$]=L.useState(!1),[q,W]=L.useState(new Set),Q=L.useCallback((fe,Xe="info")=>{A({message:fe,type:Xe}),setTimeout(()=>A(null),3e3)},[]),Z=L.useCallback(()=>Gt(null,null,function*(){try{$(!0);const fe=Qi.get("user_id")||"Guest",Xe=Qi.get("full_name");console.log(" Fetching quotations for user:",fe);const tt=yield fetch(`/api/resource/Quotation?fields=["name","quotation_to","party_name","transaction_date","grand_total","status","currency","items","modified"]&filters=[["docstatus","!=",2], ["customer_name", "=", "${Xe}"]]&limit_page_length=50&order_by=creation desc`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(tt.ok){const Me=yield tt.json();if(console.log(" Quotations API Response:",Me),Me.data&&Array.isArray(Me.data)){const ot=Me.data.map(ut=>{const dt=ut.items&&ut.items.length>0?ut.items[0].item_name||ut.items[0].item_code||"Product":"Quotation Items";return{id:ut.name,orderNumber:ut.name,type:"Quotation",date:ut.transaction_date,customerName:ut.party_name,amount:ut.grand_total,currency:ut.currency||"K",status:ut.status,items:ut.items||[],mainProductName:dt,formattedAmount:`${ut.currency||"K"} ${parseFloat(ut.grand_total||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,formattedDate:new Date(ut.transaction_date).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),shortDate:new Date(ut.transaction_date).toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})}});ot.sort((ut,dt)=>new Date(dt.date)-new Date(ut.date)),z(ot),console.log(" Fetched quotations:",ot.length)}else z([])}else z([])}catch(fe){console.error(" Error fetching quotations:",fe),z([])}finally{$(!1)}}),[]),K=fe=>{W(Xe=>{const tt=new Set(Xe);return tt.has(fe)?tt.delete(fe):tt.add(fe),tt})},le=fe=>{const Xe=`/app/quotation/${fe}`;window.open(Xe,"_blank")},ge=fe=>{const Xe=`/api/method/frappe.utils.print_format.download_pdf?doctype=Quotation&name=${fe}&format=Standard&no_letterhead=0`;window.open(Xe,"_blank")},he=L.useCallback(()=>Gt(null,null,function*(){try{o(!0),c(null),console.log(" Fetching current cart from ERPNext...");const fe=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.get_cart_quotation",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",redirect:"follow"});if(!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);const Xe=yield fe.json();if(console.log(" ERPNext Cart API Response:",Xe),Xe.message&&Xe.message.doc){const tt=Xe.message.doc,Me=tt.items||[];console.log(" Cart items found:",Me);const ot=Me.map(ut=>({item_code:ut.item_code,item_name:ut.item_name||ut.web_item_name,qty:ut.qty,rate:ut.rate,amount:ut.amount,image:ut.thumbnail||ut.website_image||ut.image||"/placeholder.jpg",description:ut.description||`Premium ${ut.item_name} from ERPNext`,brand:ut.brand||"Generic",item_group:ut.item_group||"General",warehouse:ut.warehouse||"",additional_notes:ut.additional_notes||"",id:ut.item_code,quantity:ut.qty,standard_rate:ut.rate,total_price:ut.amount,in_stock:!0,original_erpnext_data:ut}));n(ot),g({total_items:tt.total_qty||Me.reduce((ut,dt)=>ut+dt.qty,0),total_amount:tt.total||0,net_total:tt.net_total||0,grand_total:tt.grand_total||tt.net_total||0,taxes:tt.total_taxes_and_charges||(tt.grand_total||0)-(tt.net_total||0),shipping_charges:tt.shipping_charges||0,discount:tt.discount_amount||0}),console.log(" Cart loaded with",ot.length,"items")}else console.log(" Cart is empty or no cart found"),n([]),g({total_items:0,total_amount:0,net_total:0,grand_total:0,taxes:0,shipping_charges:0,discount:0})}catch(fe){console.error(" Error fetching ERPNext cart:",fe),c(`Failed to load cart: ${fe.message}`),Q("Failed to load cart. Please refresh the page.","error"),n([])}finally{o(!1)}}),[Q]),pe=(fe,Xe,tt=null)=>Gt(null,null,function*(){try{S(ut=>Ee(te({},ut),{[fe]:!0})),console.log(` Updating ${fe} quantity to ${Xe}...`);const Me=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:fe,qty:Xe,additional_notes:tt}),redirect:"follow"});if(!Me.ok)throw new Error(`HTTP error! status: ${Me.status}`);const ot=yield Me.json();if(console.log(" Update Cart API Response:",ot),ot.message)return console.log(" Successfully updated cart quantity"),Q(Xe===0?"Item removed from cart":"Cart updated successfully","success"),yield he(),!0;throw new Error("Failed to update cart")}catch(Me){return console.error(" Error updating cart:",Me),Q("Failed to update cart. Please try again.","error"),!1}finally{S(Me=>Ee(te({},Me),{[fe]:!1}))}}),Ie=(fe,Xe)=>Gt(null,null,function*(){if(window.confirm(`Are you sure you want to remove "${Xe}" from cart?`))try{S(Me=>Ee(te({},Me),{[fe]:!0})),n(Me=>{const ot=Me.filter(ut=>ut.item_code!==fe);return console.log(" Immediately removed item from UI, remaining items:",ot.length),ot}),g(Me=>{const ot=t.find(ut=>ut.item_code===fe);return ot?Ee(te({},Me),{total_items:Math.max(0,Me.total_items-ot.qty),total_amount:Math.max(0,Me.total_amount-ot.amount),net_total:Math.max(0,Me.net_total-ot.amount),grand_total:Math.max(0,Me.grand_total-ot.amount)}):Me});const tt=yield pe(fe,0);return tt&&Q(`"${Xe}" removed from cart`,"success"),tt}finally{S(tt=>Ee(te({},tt),{[fe]:!1}))}}),He=(fe,Xe,tt)=>Gt(null,null,function*(){const Me=Math.max(0,Xe+tt);if(Me===0){const ot=t.find(ut=>ut.item_code===fe);yield Ie(fe,(ot==null?void 0:ot.item_name)||fe)}else yield pe(fe,Me)}),Ye=()=>Gt(null,null,function*(){if(t.length===0){Q("Your cart is empty. Please add items before requesting a quotation.","warning");return}try{o(!0);const fe=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.request_for_quotation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);const Xe=yield fe.json();if(Xe.message)Q(`Quotation requested successfully! Reference: ${Xe.message}`,"success"),setTimeout(()=>Z(),1e3);else throw new Error("Failed to request quotation")}catch(fe){console.error("Error requesting quotation:",fe),Q("Failed to request quotation. Please try again.","error")}finally{o(!1)}});L.useEffect(()=>{console.log("Loading cart data..."),he(),Z()},[he,Z]),L.useEffect(()=>{const fe=setInterval(()=>{!i&&!Object.keys(_).some(Xe=>_[Xe])&&he()},3e4);return()=>clearInterval(fe)},[he,i,_]);const rt=()=>{if(!E)return null;const fe=()=>{switch(E.type){case"success":return l.jsx(Ij,{});case"error":return l.jsx(oy,{});case"warning":return l.jsx(oy,{});default:return l.jsx(Rm,{})}},Xe=()=>{switch(E.type){case"success":return"#00A652";case"error":return"#B12704";case"warning":return"#FF9900";default:return"#007185"}};return l.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:Xe(),color:"white",padding:"12px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxWidth:"400px"},children:[fe(),l.jsx("span",{children:E.message})]})},Rt=()=>l.jsxs("div",{style:{backgroundColor:"#FFFFFF",padding:"30px",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"1px solid #E5E7EB",marginTop:"30px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"25px"},children:[l.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#0F1111",margin:0,display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx(ly,{size:22}),"Previous Orders",N.length>0&&l.jsx("span",{style:{backgroundColor:"#007185",color:"white",fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"12px"},children:N.length})]}),B&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#565959"},children:[l.jsx(dl,{style:{animation:"spin 1s linear infinite"}}),"Loading quotations..."]})]}),N.length>0?l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:N.map(fe=>{const Xe=q.has(fe.id);return l.jsxs("div",{style:{border:"1px solid #E5E7EB",borderRadius:"10px",overflow:"hidden",transition:"all 0.2s ease",backgroundColor:Xe?"#F8F9FA":"#FFFFFF"},children:[l.jsxs("div",{onClick:()=>K(fe.id),style:{padding:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:Xe?"1px solid #E5E7EB":"none"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",flex:1},children:[l.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"8px",backgroundColor:"#E0F7FA",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(ly,{size:22,color:"#006064"})}),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px",flexWrap:"wrap"},children:[l.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#0F1111"},children:fe.orderNumber}),l.jsx("span",{style:{backgroundColor:fe.status==="Draft"?"#FEF3CD":fe.status==="Open"?"#E3F2FD":fe.status==="Submitted"?"#E8F5E8":"#F3E5F5",color:fe.status==="Draft"?"#B45309":fe.status==="Open"?"#1565C0":fe.status==="Submitted"?"#2E7D32":"#7B1FA2",fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"12px"},children:fe.status})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px",color:"#565959",flexWrap:"wrap"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx(Yse,{size:12}),fe.shortDate]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx(Wse,{size:12}),fe.items.length," item",fe.items.length!==1?"s":""]}),l.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#B12704"},children:fe.formattedAmount})]}),l.jsxs("div",{style:{marginTop:"8px",fontSize:"13px",color:"#007185",fontWeight:"500"},children:[fe.mainProductName,fe.items.length>1&&` +${fe.items.length-1} more`]})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginLeft:"20px"},children:[l.jsxs("button",{onClick:tt=>{tt.stopPropagation(),ge(fe.orderNumber)},style:{padding:"6px 12px",backgroundColor:"#FF9900",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease"},onMouseOver:tt=>tt.target.style.backgroundColor="#E88B00",onMouseOut:tt=>tt.target.style.backgroundColor="#FF9900",children:[l.jsx(Oj,{size:10}),"PDF"]}),l.jsx(Xse,{size:16,style:{color:"#565959",transform:Xe?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease",marginLeft:"8px"}})]})]}),Xe&&l.jsxs("div",{style:{padding:"20px",backgroundColor:"#F8F9FA",borderTop:"1px solid #E5E7EB"},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"20px",padding:"15px",backgroundColor:"#FFFFFF",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Order Date"}),l.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:fe.formattedDate})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Customer"}),l.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:fe.customerName})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Total Amount"}),l.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#B12704"},children:fe.formattedAmount})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Status"}),l.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:l.jsx("span",{style:{backgroundColor:fe.status==="Draft"?"#FEF3CD":fe.status==="Open"?"#E3F2FD":fe.status==="Submitted"?"#E8F5E8":"#F3E5F5",color:fe.status==="Draft"?"#B45309":fe.status==="Open"?"#1565C0":fe.status==="Submitted"?"#2E7D32":"#7B1FA2",padding:"4px 8px",borderRadius:"12px",fontSize:"12px"},children:fe.status})})]})]}),l.jsxs("div",{style:{marginBottom:"15px"},children:[l.jsxs("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#0F1111",marginBottom:"12px"},children:["Order Items (",fe.items.length,")"]}),l.jsx("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"8px",border:"1px solid #E5E7EB",overflow:"hidden"},children:fe.items.map((tt,Me)=>l.jsxs("div",{style:{padding:"12px 16px",borderBottom:Me<fe.items.length-1?"1px solid #F0F0F0":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#0F1111",marginBottom:"4px"},children:tt.item_name||tt.item_code}),l.jsxs("div",{style:{fontSize:"12px",color:"#666",display:"flex",gap:"12px"},children:[l.jsxs("span",{children:["Code: ",tt.item_code]}),l.jsxs("span",{children:["Qty: ",tt.qty]}),l.jsxs("span",{children:["Rate: ",tt.currency||"K"," ",parseFloat(tt.rate||0).toLocaleString("en-IN")]})]})]}),l.jsxs("div",{style:{fontSize:"14px",fontWeight:"700",color:"#B12704"},children:[tt.currency||"K"," ",parseFloat(tt.amount||0).toLocaleString("en-IN")]})]},Me))})]}),l.jsxs("div",{style:{display:"flex",gap:"10px",paddingTop:"15px",borderTop:"1px solid #E5E7EB"},children:[l.jsxs("button",{onClick:()=>le(fe.orderNumber),style:{padding:"10px 16px",backgroundColor:"#007185",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},onMouseOver:tt=>tt.target.style.backgroundColor="#005F73",onMouseOut:tt=>tt.target.style.backgroundColor="#007185",children:[l.jsx(BT,{size:14}),"View in ERPNext"]}),l.jsxs("button",{onClick:()=>ge(fe.orderNumber),style:{padding:"10px 16px",backgroundColor:"#FF9900",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},onMouseOver:tt=>tt.target.style.backgroundColor="#E88B00",onMouseOut:tt=>tt.target.style.backgroundColor="#FF9900",children:[l.jsx(Oj,{size:14}),"Download PDF"]})]})]})]},fe.id)})}):l.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#565959"},children:B?l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[l.jsx(dl,{style:{animation:"spin 1s linear infinite"}}),"Loading your quotations..."]}):l.jsxs(l.Fragment,{children:[l.jsx(ly,{size:48,color:"#CCCCCC",style:{marginBottom:"16px"}}),l.jsx("h3",{style:{color:"#0F1111",marginBottom:"8px"},children:"No Previous Orders"}),l.jsx("p",{children:"You haven't placed any orders yet. Start shopping to see your order history here."})]})})]});return i&&t.length===0?l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(dl,{size:40,color:"#FF9900",style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),l.jsx("p",{style:{color:"#565959",fontSize:"16px"},children:"Loading your cart..."})]})}):u&&t.length===0?l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsxs("div",{style:{textAlign:"center",maxWidth:"600px"},children:[l.jsx(oy,{size:60,color:"#B12704",style:{marginBottom:"20px"}}),l.jsx("h2",{style:{color:"#B12704",marginBottom:"16px"},children:"Failed to Load Cart"}),l.jsx("p",{style:{color:"#565959",marginBottom:"20px"},children:u}),l.jsx("button",{onClick:he,style:{backgroundColor:"#FF9900",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:"Try Again"})]})}):!t||t.length===0?l.jsxs(l.Fragment,{children:[l.jsx(rt,{}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px"},children:[l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[l.jsx("div",{style:{marginBottom:"40px",textAlign:"left"},children:l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",backgroundColor:"transparent",border:"2px solid #D5D9D9",borderRadius:"6px",cursor:"pointer",color:"#0F1111",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease"},onMouseOver:fe=>{fe.target.style.borderColor="#007185",fe.target.style.color="#007185"},onMouseOut:fe=>{fe.target.style.borderColor="#D5D9D9",fe.target.style.color="#0F1111"},children:[l.jsx(Yf,{size:14}),"Back to Products"]})}),l.jsx(d1,{size:100,color:"#CCCCCC",style:{marginBottom:"32px"}}),l.jsx("h2",{style:{fontSize:"36px",fontWeight:"600",color:"#0F1111",margin:"0 0 20px 0"},children:"Cart is Empty"}),l.jsxs("p",{style:{fontSize:"18px",color:"#565959",marginBottom:"32px",lineHeight:"1.5"},children:["Looks like you haven't added anything to your cart yet.",l.jsx("br",{}),"Browse our products and find something you love!"]}),l.jsxs(Mr,{to:"/trade",style:{display:"inline-flex",alignItems:"center",gap:"12px",backgroundColor:"#FF9900",color:"#FFFFFF",padding:"18px 36px",fontSize:"18px",fontWeight:"600",textDecoration:"none",borderRadius:"8px",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onMouseOver:fe=>{fe.target.style.backgroundColor="#E88B00",fe.target.style.transform="translateY(-2px)"},onMouseOut:fe=>{fe.target.style.backgroundColor="#FF9900",fe.target.style.transform="translateY(0)"},children:[l.jsx(d1,{size:18})," Start Shopping"]})]}),l.jsx("div",{style:{maxWidth:"1400px",margin:"60px auto 0"},children:l.jsx(Rt,{})})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(rt,{}),l.jsxs("div",{style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"20px"},children:[l.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"30px",backgroundColor:"#FFFFFF",padding:"20px 30px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:[l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",backgroundColor:"transparent",border:"2px solid #D5D9D9",borderRadius:"6px",cursor:"pointer",color:"#0F1111",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease"},onMouseOver:fe=>{fe.target.style.borderColor="#007185",fe.target.style.color="#007185"},onMouseOut:fe=>{fe.target.style.borderColor="#D5D9D9",fe.target.style.color="#0F1111"},children:[l.jsx(Yf,{size:14}),"Back"]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0F1111",margin:"0 0 8px 0"},children:"Shopping Cart"}),l.jsxs("p",{style:{color:"#565959",fontSize:"16px",margin:0},children:[a.total_items," ",a.total_items===1?"item":"items"]})]}),l.jsx("div",{style:{display:"flex",gap:"10px"},children:l.jsx("button",{onClick:Ye,disabled:i||t.length===0,style:{padding:"10px 18px",backgroundColor:"#007185",color:"#FFFFFF",border:"none",borderRadius:"6px",cursor:i||t.length===0?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600",opacity:i||t.length===0?.6:1,transition:"all 0.2s ease"},onMouseOver:fe=>{!i&&t.length>0&&(fe.target.style.backgroundColor="#005F73")},onMouseOut:fe=>{!i&&t.length>0&&(fe.target.style.backgroundColor="#007185")},children:"Request Quote"})})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth>1024?"2fr 1fr":"1fr",gap:"30px"},children:[l.jsx("div",{children:t.map((fe,Xe)=>{var Me,ot,ut;const tt=_[fe.item_code]||!1;return l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"25px",backgroundColor:"#FFFFFF",marginBottom:"15px",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"1px solid #E5E7EB",opacity:tt?.7:1,position:"relative",transition:"all 0.2s ease",flexDirection:window.innerWidth<768?"column":"row",textAlign:window.innerWidth<768?"center":"left"},children:[tt&&l.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.9)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"12px",zIndex:10},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#FF9900",fontSize:"16px",fontWeight:"600"},children:[l.jsx(dl,{size:20,color:"#FF9900",style:{animation:"spin 1s linear infinite"}}),"Updating..."]})}),l.jsx(Mr,{to:`/product/${fe.item_code}`,style:{flexShrink:0,marginRight:window.innerWidth<768?"0":"25px",marginBottom:window.innerWidth<768?"15px":"0",display:"block",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:l.jsx("img",{src:fe.image,alt:fe.item_name,style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"8px",transition:"transform 0.2s ease"},onMouseOver:dt=>{dt.target.style.transform="scale(1.05)"},onMouseOut:dt=>{dt.target.style.transform="scale(1)"},onError:dt=>{dt.target.src=`https://via.placeholder.com/120x120?text=${encodeURIComponent(fe.item_name.substring(0,5))}`}})}),l.jsxs("div",{style:{flex:1,marginBottom:window.innerWidth<768?"15px":"0"},children:[l.jsx(Mr,{to:`/product/${fe.item_code}`,style:{textDecoration:"none",color:"inherit"},children:l.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#0F1111",margin:"0 0 10px 0",lineHeight:"1.3",transition:"color 0.2s ease"},onMouseOver:dt=>{dt.target.style.color="#007185"},onMouseOut:dt=>{dt.target.style.color="#0F1111"},children:fe.item_name})}),l.jsxs("div",{style:{fontSize:"14px",color:"#565959",marginBottom:"10px",display:"flex",flexWrap:"wrap",gap:"15px",justifyContent:window.innerWidth<768?"center":"flex-start"},children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Code:"})," ",fe.item_code]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Brand:"})," ",fe.brand]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Category:"})," ",fe.item_group]}),fe.warehouse&&l.jsxs("span",{children:[l.jsx("strong",{children:"Warehouse:"})," ",fe.warehouse]})]}),l.jsx("p",{style:{color:"#666666",fontSize:"14px",marginBottom:"12px",lineHeight:"1.5",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:fe.description||"No description available"}),l.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",color:"#B12704",marginBottom:"12px"},children:["",((Me=fe.rate)==null?void 0:Me.toLocaleString("en-IN"))||"0"," per unit"]}),l.jsxs("div",{style:{fontSize:"13px",color:"#007185",backgroundColor:"#F0F8FF",padding:"6px 10px",borderRadius:"6px",display:"inline-block",border:"1px solid #E0F2FE"},children:["Qty: ",fe.qty,"  Line Total: ",(ot=fe.amount)==null?void 0:ot.toLocaleString("en-IN")]}),fe.additional_notes&&l.jsxs("div",{style:{marginTop:"8px",fontSize:"13px",color:"#666",fontStyle:"italic",backgroundColor:"#FFFBF0",padding:"4px 8px",borderRadius:"4px",border:"1px solid #FEF3CD"},children:["Note: ",fe.additional_notes]})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginRight:window.innerWidth<768?"0":"25px",marginBottom:window.innerWidth<768?"15px":"0"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#F8F9FA",borderRadius:"8px",border:"2px solid #E5E7EB",overflow:"hidden"},children:[l.jsx("button",{onClick:()=>He(fe.item_code,fe.qty,-1),disabled:tt,style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:tt?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:tt?.5:1,transition:"all 0.2s ease"},onMouseOver:dt=>{tt||(dt.target.style.backgroundColor="#E5E7EB")},onMouseOut:dt=>{tt||(dt.target.style.backgroundColor="transparent")},children:l.jsx(rre,{size:14})}),l.jsx("span",{style:{fontSize:"18px",fontWeight:"600",minWidth:"50px",textAlign:"center",backgroundColor:"#FFFFFF",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderLeft:"1px solid #E5E7EB",borderRight:"1px solid #E5E7EB"},children:fe.qty}),l.jsx("button",{onClick:()=>He(fe.item_code,fe.qty,1),disabled:tt,style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:tt?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:tt?.5:1,transition:"all 0.2s ease"},onMouseOver:dt=>{tt||(dt.target.style.backgroundColor="#E5E7EB")},onMouseOut:dt=>{tt||(dt.target.style.backgroundColor="transparent")},children:l.jsx(cre,{size:14})})]})}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:window.innerWidth<768?"center":"flex-end",gap:"15px"},children:[l.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0F1111"},children:["",((ut=fe.amount)==null?void 0:ut.toLocaleString("en-IN"))||"0"]}),l.jsxs("button",{onClick:()=>Ie(fe.item_code,fe.item_name),disabled:tt,style:{padding:"8px 12px",backgroundColor:"transparent",border:"2px solid #B12704",borderRadius:"6px",color:"#B12704",cursor:tt?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",opacity:tt?.5:1,transition:"all 0.2s ease"},onMouseOver:dt=>{tt||(dt.target.style.backgroundColor="#B12704",dt.target.style.color="#FFFFFF")},onMouseOut:dt=>{tt||(dt.target.style.backgroundColor="transparent",dt.target.style.color="#B12704")},children:[l.jsx(gre,{size:12}),"Remove"]})]})]},fe.item_code||Xe)})}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",padding:"25px",borderRadius:"12px",height:"fit-content",position:"sticky",top:"20px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"1px solid #E5E7EB"},children:[l.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#0F1111",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[l.jsx(Rm,{size:20}),"Order Summary"]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"16px"},children:[l.jsxs("span",{children:["Subtotal (",a.total_items," items):"]}),l.jsxs("span",{style:{fontWeight:"600"},children:["",(St=a.net_total)==null?void 0:St.toLocaleString("en-IN")]})]}),a.discount>0&&l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"16px",color:"#00A652"},children:[l.jsx("span",{children:"Discount:"}),l.jsxs("span",{style:{fontWeight:"600"},children:["-",(De=a.discount)==null?void 0:De.toLocaleString("en-IN")]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"16px"},children:[l.jsx("span",{children:"Shipping:"}),l.jsx("span",{style:{color:"#00A652",fontWeight:"600"},children:a.shipping_charges>0?`${(Qe=a.shipping_charges)==null?void 0:Qe.toLocaleString("en-IN")}`:"FREE"})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"16px"},children:[l.jsx("span",{children:"Tax:"}),l.jsxs("span",{style:{fontWeight:"600"},children:["",(et=a.taxes)==null?void 0:et.toLocaleString("en-IN")]})]})]}),l.jsx("hr",{style:{margin:"20px 0",border:"none",borderTop:"2px solid #E5E7EB"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"25px",fontSize:"20px",fontWeight:"700"},children:[l.jsx("span",{children:"Grand Total:"}),l.jsxs("span",{style:{color:"#B12704"},children:["",(Nt=a.grand_total)==null?void 0:Nt.toLocaleString("en-IN")]})]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.jsx(Mr,{to:"/trade",style:{display:"block",textAlign:"center",padding:"14px",color:"#007185",textDecoration:"none",fontSize:"16px",fontWeight:"600",border:"2px solid #007185",borderRadius:"8px",transition:"all 0.2s ease"},onMouseOver:fe=>{fe.target.style.backgroundColor="#007185",fe.target.style.color="#FFFFFF"},onMouseOut:fe=>{fe.target.style.backgroundColor="transparent",fe.target.style.color="#007185"},children:"Continue Shopping"})}),l.jsx("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:"#F0F8FF",borderRadius:"8px",border:"1px solid #E0F2FE",textAlign:"center"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:"#007185",fontSize:"14px",fontWeight:"600"},children:[l.jsx(Ij,{size:16}),"Cart Synced"]})})]})]}),l.jsx(Rt,{})]}),l.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})]})},Are=()=>{const e=Pr(),[t,n]=L.useState([]),[i,o]=L.useState(!0),[u,c]=L.useState(null),[a,g]=L.useState({}),[_,S]=L.useState(null),[E,A]=L.useState({}),N=L.useCallback((Z,K="info")=>{S({message:Z,type:K}),setTimeout(()=>S(null),3e3)},[]),z=Z=>Gt(null,null,function*(){try{A(he=>Ee(te({},he),{[Z]:!0})),console.log(` Fetching price for ${Z}...`);const K=yield fetch(`/api/resource/Item Price?filters=[["item_code","=","${Z}"],["selling","=",1]]&fields=["price_list_rate","currency"]&limit=1`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(K.ok){const he=yield K.json();if(he.data&&he.data.length>0)return console.log(` Price found for ${Z}:`,he.data[0].price_list_rate),{standard_rate:he.data[0].price_list_rate,currency:he.data[0].currency||"INR"}}const le=yield fetch(`/api/resource/Item/${Z}?fields=["standard_rate","currency"]`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(le.ok){const he=yield le.json();if(he.data&&he.data.standard_rate)return console.log(` Standard rate found for ${Z}:`,he.data.standard_rate),{standard_rate:he.data.standard_rate,currency:he.data.currency||"INR"}}const ge=yield fetch(`/api/resource/Website Item?filters=[["item_code","=","${Z}"]]&fields=["price_list_rate"]&limit=1`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(ge.ok){const he=yield ge.json();if(he.data&&he.data.length>0&&he.data[0].price_list_rate)return console.log(` Website item price found for ${Z}:`,he.data[0].price_list_rate),{standard_rate:he.data[0].price_list_rate,currency:"INR"}}return console.log(` No price found for ${Z}, using default`),{standard_rate:2990,currency:"INR"}}catch(K){return console.error(` Error fetching price for ${Z}:`,K),{standard_rate:2990,currency:"INR"}}finally{A(K=>Ee(te({},K),{[Z]:!1}))}}),B=L.useCallback(()=>Gt(null,null,function*(){try{o(!0),c(null),console.log(" Fetching wishlist from ERPNext...");const Z=Qi.get("user_id"),K=yield fetch(`/api/resource/Wishlist/${Z}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!K.ok){if(K.status===404){console.log(" No wishlist found for user"),n([]);return}throw new Error(`HTTP error! status: ${K.status}`)}const le=yield K.json();if(console.log(" ERPNext Wishlist API Response:",le),le.data&&le.data.items){const ge=le.data.items.map(pe=>({item_code:pe.item_code,item_name:pe.item_name,web_item_name:pe.web_item_name,item_group:pe.item_group,website_item:pe.website_item,image:pe.image||pe.website_image||"/placeholder.jpg",route:pe.route,warehouse:pe.warehouse,id:pe.item_code,name:pe.item_code,description:`Premium ${pe.item_name||pe.web_item_name} from our collection`,standard_rate:null,currency:"INR",original_erpnext_data:pe}));n(ge),console.log(" Basic wishlist loaded with",ge.length,"items");const he=yield Promise.all(ge.map(pe=>Gt(null,null,function*(){const Ie=yield z(pe.item_code);return Ee(te({},pe),{standard_rate:Ie.standard_rate,currency:Ie.currency})})));n(he),console.log(" Wishlist updated with prices for",he.length,"items")}else console.log(" Wishlist is empty"),n([])}catch(Z){console.error(" Error fetching ERPNext wishlist:",Z),c(`Failed to load wishlist: ${Z.message}`),N("Failed to load wishlist. Please refresh the page.","error"),n([])}finally{o(!1)}}),[N]),$=(Z,K)=>Gt(null,null,function*(){if(window.confirm(`Are you sure you want to remove "${K}" from your wishlist?`))try{g(he=>Ee(te({},he),{[Z]:!0})),console.log(` Removing ${Z} from ERPNext wishlist...`);const le=yield fetch("/api/method/webshop.webshop.doctype.wishlist.wishlist.remove_from_wishlist",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:Z})});if(!le.ok)throw new Error(`HTTP error! status: ${le.status}`);const ge=yield le.json();return console.log(" Remove from Wishlist API Response:",ge),console.log(" Successfully removed from wishlist"),N("Item removed from wishlist","success"),yield B(),!0}catch(le){return console.error(" Error removing from wishlist:",le),N("Failed to remove from wishlist. Please try again.","error"),!1}finally{g(le=>Ee(te({},le),{[Z]:!1}))}}),q=Z=>Gt(null,null,function*(){try{console.log(` Adding ${Z.item_code} to cart...`);const K=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:Z.item_code,qty:1})});if(!K.ok)throw new Error(`HTTP error! status: ${K.status}`);const le=yield K.json();if(console.log(" Add to Cart API Response:",le),le.message)return N(`${Z.item_name} added to cart!`,"success"),!0;throw new Error("Failed to add to cart")}catch(K){return console.error(" Error adding to cart:",K),N("Failed to add to cart. Please try again.","error"),!1}}),W=Z=>{e(`/product/${Z}`)};L.useEffect(()=>{console.log("Loading ERPNext wishlist data..."),B()},[B]);const Q=()=>{if(!_)return null;const Z=()=>{switch(_.type){case"success":return l.jsx(Ij,{});case"error":return l.jsx(oy,{});case"warning":return l.jsx(oy,{});default:return l.jsx(_m,{})}},K=()=>{switch(_.type){case"success":return"#00A652";case"error":return"#B12704";case"warning":return"#FF9900";default:return"#007185"}};return l.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:K(),color:"white",padding:"12px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxWidth:"400px"},children:[Z(),l.jsx("span",{children:_.message})]})};return i?l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(dl,{size:40,color:"#FF9900",style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),l.jsx("p",{style:{color:"#565959",fontSize:"16px"},children:"Loading your ERPNext wishlist..."})]})}):u&&t.length===0?l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsxs("div",{style:{textAlign:"center",maxWidth:"600px"},children:[l.jsx(oy,{size:60,color:"#B12704",style:{marginBottom:"20px"}}),l.jsx("h2",{style:{color:"#B12704",marginBottom:"16px"},children:"Failed to Load Wishlist"}),l.jsx("p",{style:{color:"#565959",marginBottom:"20px"},children:u}),l.jsx("button",{onClick:B,style:{backgroundColor:"#FF9900",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:"Try Again"})]})}):!t||t.length===0?l.jsxs(l.Fragment,{children:[l.jsx(Q,{}),l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[l.jsx("div",{style:{marginBottom:"40px",textAlign:"left"},children:l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",backgroundColor:"transparent",border:"2px solid #D5D9D9",borderRadius:"6px",cursor:"pointer",color:"#0F1111",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease"},onMouseOver:Z=>{Z.target.style.borderColor="#007185",Z.target.style.color="#007185"},onMouseOut:Z=>{Z.target.style.borderColor="#D5D9D9",Z.target.style.color="#0F1111"},children:[l.jsx(Yf,{size:14}),"Back to Products"]})}),l.jsx(_m,{size:100,color:"#CCCCCC",style:{marginBottom:"32px"}}),l.jsx("h1",{style:{fontSize:"36px",fontWeight:"600",color:"#0F1111",margin:"0 0 20px 0"},children:"Your ERPNext Wishlist is Empty"}),l.jsxs("p",{style:{fontSize:"18px",color:"#565959",marginBottom:"32px",lineHeight:"1.5"},children:["Save items you love to your wishlist. Review them anytime and easily move them to your cart.",l.jsx("br",{}),"Start exploring our amazing collection!"]}),l.jsxs(Mr,{to:"/products",style:{display:"inline-flex",alignItems:"center",gap:"12px",backgroundColor:"#FF9900",color:"#FFFFFF",padding:"18px 36px",fontSize:"18px",fontWeight:"600",textDecoration:"none",borderRadius:"8px",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onMouseOver:Z=>{Z.target.style.backgroundColor="#E88B00",Z.target.style.transform="translateY(-2px)"},onMouseOut:Z=>{Z.target.style.backgroundColor="#FF9900",Z.target.style.transform="translateY(0)"},children:[l.jsx(d1,{size:18}),"Continue Shopping"]})]})})]}):l.jsxs(l.Fragment,{children:[l.jsx(Q,{}),l.jsxs("div",{style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"20px"},children:[l.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"30px",backgroundColor:"#FFFFFF",padding:"20px 30px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.08)",flexWrap:"wrap",gap:"16px"},children:[l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",backgroundColor:"transparent",border:"2px solid #D5D9D9",borderRadius:"6px",cursor:"pointer",color:"#0F1111",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease"},onMouseOver:Z=>{Z.target.style.borderColor="#007185",Z.target.style.color="#007185"},onMouseOut:Z=>{Z.target.style.borderColor="#D5D9D9",Z.target.style.color="#0F1111"},children:[l.jsx(Yf,{size:14}),"Back"]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0F1111",margin:"0 0 8px 0"},children:"My Wishlist"}),l.jsxs("p",{style:{color:"#565959",fontSize:"16px",margin:0},children:[t.length," ",t.length===1?"item":"items","  ERPNext Integration Active"]})]}),l.jsx(Mr,{to:"/trade",style:{color:"#007185",fontSize:"16px",fontWeight:"600",textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",border:"2px solid #007185",borderRadius:"6px",transition:"all 0.2s ease"},onMouseOver:Z=>{Z.target.style.backgroundColor="#007185",Z.target.style.color="#FFFFFF"},onMouseOut:Z=>{Z.target.style.backgroundColor="transparent",Z.target.style.color="#007185"},children:"Add More Items"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"24px",marginBottom:"40px"},children:t.map(Z=>{var ge;const K=a[Z.item_code]||!1,le=E[Z.item_code]||!1;return l.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",overflow:"hidden",transition:"all 0.3s ease",position:"relative",border:"1px solid #E5E7EB",opacity:K?.7:1},onMouseOver:he=>{K||(he.currentTarget.style.transform="translateY(-4px)",he.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.15)")},onMouseOut:he=>{K||(he.currentTarget.style.transform="translateY(0)",he.currentTarget.style.boxShadow="0 2px 12px rgba(0,0,0,0.08)")},children:[K&&l.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.9)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"12px",zIndex:10},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#FF9900",fontSize:"16px",fontWeight:"600"},children:[l.jsx(dl,{size:20,color:"#FF9900",style:{animation:"spin 1s linear infinite"}}),"Updating..."]})}),l.jsxs("div",{style:{position:"relative",height:"220px",overflow:"hidden",cursor:"pointer"},onClick:()=>W(Z.item_code),children:[l.jsx("img",{src:Z.image,alt:Z.item_name,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onMouseOver:he=>{K||(he.target.style.transform="scale(1.05)")},onMouseOut:he=>{K||(he.target.style.transform="scale(1)")},onError:he=>{he.target.src=`https://via.placeholder.com/320x220?text=${encodeURIComponent(Z.item_name.substring(0,5))}`}}),l.jsx("button",{onClick:he=>{he.stopPropagation(),$(Z.item_code,Z.item_name)},disabled:K,style:{position:"absolute",top:"12px",right:"12px",backgroundColor:"#FFFFFF",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:K?"not-allowed":"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"all 0.3s ease",opacity:K?.6:1},onMouseOver:he=>{K||(he.target.style.backgroundColor="#FEE2E2")},onMouseOut:he=>{K||(he.target.style.backgroundColor="#FFFFFF")},children:l.jsx(_m,{color:"#B12704",size:18})}),l.jsx("button",{onClick:he=>{he.stopPropagation(),W(Z.item_code)},style:{position:"absolute",top:"12px",left:"12px",backgroundColor:"#FFFFFF",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"all 0.3s ease"},onMouseOver:he=>he.target.style.backgroundColor="#F0F8FF",onMouseOut:he=>he.target.style.backgroundColor="#FFFFFF",children:l.jsx(BT,{color:"#007185",size:18})}),l.jsx("div",{style:{position:"absolute",bottom:"12px",left:"12px",backgroundColor:"#007185",color:"#FFFFFF",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600"},children:"ERPNext Item"})]}),l.jsxs("div",{style:{padding:"20px"},children:[l.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#0F1111",marginBottom:"8px",lineHeight:"1.4",cursor:"pointer",transition:"color 0.2s ease"},onClick:()=>W(Z.item_code),onMouseOver:he=>he.target.style.color="#007185",onMouseOut:he=>he.target.style.color="#0F1111",children:Z.item_name||Z.web_item_name}),l.jsxs("div",{style:{fontSize:"14px",color:"#565959",marginBottom:"8px"},children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Code:"})," ",Z.item_code]}),Z.item_group&&l.jsxs("span",{style:{marginLeft:"12px"},children:[l.jsx("strong",{children:"Category:"})," ",Z.item_group]})]}),l.jsx("p",{style:{color:"#666666",fontSize:"14px",lineHeight:"1.5",marginBottom:"16px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Z.description||"High-quality product with excellent features and great value for money."}),l.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"8px"},children:le?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#FF9900",fontSize:"14px"},children:[l.jsx(dl,{size:14,color:"#FF9900",style:{animation:"spin 1s linear infinite"}}),"Loading price..."]}):Z.standard_rate?l.jsxs(l.Fragment,{children:[l.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold",color:"#B12704"},children:["",Math.round(Z.standard_rate*1).toLocaleString("en-IN")]}),l.jsxs("span",{style:{fontSize:"18px",color:"#666666",textDecoration:"line-through"},children:["",(ge=Z.standard_rate)==null?void 0:ge.toLocaleString("en-IN")]}),l.jsx("div",{style:{fontSize:"12px",color:"#007185",backgroundColor:"#F0F8FF",padding:"2px 6px",borderRadius:"4px",border:"1px solid #E0F2FE"}})]}):l.jsx("span",{style:{fontSize:"16px",color:"#666666"},children:"Price not available"})}),l.jsx("div",{style:{display:"flex",gap:"8px"},children:l.jsxs("button",{onClick:()=>q(Z),disabled:K,style:{flex:1,backgroundColor:K?"#F0F0F0":"#4f4b45ff",color:K?"#999999":"#FFFFFF",border:"none",borderRadius:"6px",padding:"12px 16px",fontSize:"14px",fontWeight:"600",cursor:K?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"background-color 0.3s ease",opacity:K?.6:1},onMouseOver:he=>{K||(he.target.style.backgroundColor="#005F73")},onMouseOut:he=>{K||(he.target.style.backgroundColor="#4f4b45ff")},children:[l.jsx(Rm,{size:14}),"Add to Cart"]})})]})]},Z.item_code)})}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",padding:"30px",textAlign:"center",border:"1px solid #E5E7EB"},children:[l.jsx("h3",{style:{fontSize:"24px",fontWeight:"600",color:"#0F1111",marginBottom:"12px"},children:"Looking for something else?"}),l.jsx("p",{style:{color:"#565959",marginBottom:"24px",fontSize:"16px"},children:"Explore our wide range of products and find exactly what you need"}),l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"16px",flexWrap:"wrap"},children:l.jsxs(Mr,{to:"/cart",style:{backgroundColor:"transparent",color:"#007185",padding:"14px 28px",fontSize:"16px",fontWeight:"600",textDecoration:"none",borderRadius:"8px",border:"2px solid #007185",transition:"all 0.3s ease",display:"inline-flex",alignItems:"center",gap:"8px"},onMouseOver:Z=>{Z.target.style.backgroundColor="#007185",Z.target.style.color="#FFFFFF"},onMouseOut:Z=>{Z.target.style.backgroundColor="transparent",Z.target.style.color="#007185"},children:[l.jsx(Rm,{size:16}),"View Cart"]})})]})]}),l.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})]})},Pre=()=>{const e=Im(),t=Pr(),{items:n,totalAmount:i}=hd(E=>E.cart),[o,u]=L.useState({name:"",address:"",city:"",state:"",pincode:"",phone:""}),[c,a]=L.useState("cod"),[g,_]=L.useState(!1),S=E=>Gt(null,null,function*(){E.preventDefault();try{_(!0);const A={customer:"Guest Customer",delivery_date:new Date().toISOString().split("T")[0],items:n.map(z=>({item_code:z.name,qty:z.quantity,rate:z.standard_rate})),shipping_address:o,payment_method:c,total_amount:i},N=yield Fj.createSalesOrder(A);N&&(e(Cre()),alert(`Order placed successfully! Your order ID is ${N.name}. Thank you for shopping with Trade Blo Me!`),t("/"))}catch(A){console.error("Error placing order:",A),alert("Failed to place order. Please try again.")}finally{_(!1)}});return l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"40px 20px"},children:[l.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:Pn.textPrimary,marginBottom:"32px"},children:"Checkout"}),l.jsx("form",{onSubmit:S,children:l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"40px","@media (max-width: 768px)":{gridTemplateColumns:"1fr"}},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{backgroundColor:Pn.white,borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[l.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:Pn.textPrimary,marginBottom:"20px"},children:"Shipping Address"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[l.jsx("input",{type:"text",placeholder:"Full Name",value:o.name,onChange:E=>u(Ee(te({},o),{name:E.target.value})),required:!0,style:{gridColumn:"1 / -1",border:`1px solid ${Pn.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none",transition:"border-color 0.3s ease"}}),l.jsx("input",{type:"text",placeholder:"Address",value:o.address,onChange:E=>u(Ee(te({},o),{address:E.target.value})),required:!0,style:{gridColumn:"1 / -1",border:`1px solid ${Pn.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}}),l.jsx("input",{type:"text",placeholder:"City",value:o.city,onChange:E=>u(Ee(te({},o),{city:E.target.value})),required:!0,style:{border:`1px solid ${Pn.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}}),l.jsx("input",{type:"text",placeholder:"State",value:o.state,onChange:E=>u(Ee(te({},o),{state:E.target.value})),required:!0,style:{border:`1px solid ${Pn.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}}),l.jsx("input",{type:"text",placeholder:"Pincode",value:o.pincode,onChange:E=>u(Ee(te({},o),{pincode:E.target.value})),required:!0,style:{border:`1px solid ${Pn.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}}),l.jsx("input",{type:"tel",placeholder:"Phone Number",value:o.phone,onChange:E=>u(Ee(te({},o),{phone:E.target.value})),required:!0,style:{border:`1px solid ${Pn.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}})]})]}),l.jsxs("div",{style:{backgroundColor:Pn.white,borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[l.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:Pn.textPrimary,marginBottom:"20px"},children:"Payment Method"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"16px",borderRadius:"8px",border:`2px solid ${c==="cod"?Pn.primary:Pn.lightGray}`,backgroundColor:c==="cod"?Pn.primaryLight+"10":Pn.white,cursor:"pointer"},children:[l.jsx("input",{type:"radio",value:"cod",checked:c==="cod",onChange:E=>a(E.target.value),style:{marginRight:"12px"}}),l.jsx(are,{size:24,color:Pn.primary,style:{marginRight:"12px"}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Cash on Delivery"}),l.jsx("div",{style:{fontSize:"14px",color:Pn.textSecondary},children:"Pay when your order arrives"})]})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"16px",borderRadius:"8px",border:`2px solid ${c==="online"?Pn.primary:Pn.lightGray}`,backgroundColor:c==="online"?Pn.primaryLight+"10":Pn.white,cursor:"pointer"},children:[l.jsx("input",{type:"radio",value:"online",checked:c==="online",onChange:E=>a(E.target.value),style:{marginRight:"12px"}}),l.jsx(pz,{size:24,color:Pn.primary,style:{marginRight:"12px"}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Online Payment"}),l.jsx("div",{style:{fontSize:"14px",color:Pn.textSecondary},children:"Credit/Debit Card, UPI, Net Banking"})]})]})]})]})]}),l.jsxs("div",{style:{backgroundColor:Pn.white,borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",height:"fit-content"},children:[l.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:Pn.textPrimary,marginBottom:"20px"},children:"Order Summary"}),l.jsx("div",{style:{marginBottom:"20px"},children:n.map((E,A)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px",marginBottom:"12px",borderBottom:`1px solid ${Pn.lightGray}`},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:Pn.textPrimary,marginBottom:"4px"},children:E.item_name}),l.jsxs("div",{style:{fontSize:"12px",color:Pn.textSecondary},children:["Qty: ",E.quantity]})]}),l.jsxs("div",{style:{fontWeight:"bold",color:Pn.textPrimary},children:["",(E.quantity*E.standard_rate).toFixed(2)]})]},A))}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[l.jsx("span",{children:"Subtotal"}),l.jsxs("span",{children:["",i.toFixed(2)]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[l.jsx("span",{children:"Shipping"}),l.jsx("span",{style:{color:Pn.success},children:"FREE"})]}),l.jsx("hr",{style:{border:"none",borderTop:`2px solid ${Pn.primary}`,margin:"16px 0"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"24px",fontSize:"20px",fontWeight:"bold"},children:[l.jsx("span",{children:"Total"}),l.jsxs("span",{style:{color:Pn.primary},children:["",i.toFixed(2)]})]}),l.jsx("button",{type:"submit",disabled:g,style:{width:"100%",backgroundColor:g?Pn.gray:Pn.primary,color:Pn.white,border:"none",borderRadius:"8px",padding:"16px",fontSize:"18px",fontWeight:"bold",cursor:g?"not-allowed":"pointer",transition:"background-color 0.3s ease"},children:g?"Placing Order...":"Place Order"})]})]})})]})},gz=()=>{const e=Pr(),[t,n]=L.useState([]),[i,o]=L.useState(!0),[u,c]=L.useState(null),[a,g]=L.useState(new Set),_=L.useCallback(()=>Gt(null,null,function*(){try{o(!0);const N=Qi.get("full_name");console.log(" Fetching quotations for user:",N);const z=yield fetch(`/api/resource/Quotation?fields=["name","quotation_to","party_name","transaction_date","grand_total","status","currency","items","modified"]&filters=[["docstatus","!=",2],["customer_name","=","${N}"]]&limit_page_length=50&order_by=creation desc`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(z.ok){const B=yield z.json();if(console.log(" Quotations API Response:",B),B.data&&Array.isArray(B.data)){const $=B.data.map(q=>{const W=q.items&&q.items.length>0?q.items[0].item_name||q.items[0].item_code||"Product":"Quotation Items";return{id:q.name,orderNumber:q.name,type:"Quotation",date:q.transaction_date,customerName:q.party_name,amount:q.grand_total,currency:q.currency||"K",status:q.status,items:q.items||[],mainProductName:W,formattedAmount:`${q.currency||"K"} ${parseFloat(q.grand_total||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,formattedDate:new Date(q.transaction_date).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),shortDate:new Date(q.transaction_date).toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})}});$.sort((q,W)=>new Date(W.date)-new Date(q.date)),n($),console.log(" Fetched quotations:",$.length)}else n([])}else throw new Error("Failed to fetch quotations")}catch(N){console.error(" Error fetching quotations:",N),c(N.message),n([])}finally{o(!1)}}),[]);L.useEffect(()=>{_()},[_]);const S=N=>{e("/emi-calculator",{state:{quotation:N}})},E=N=>{window.open(`/app/quotation/${N}`,"_blank")},A=N=>{window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=Quotation&name=${N}&format=Standard&no_letterhead=0`,"_blank")};return i?l.jsxs("div",{style:{backgroundColor:"#F3F4F6",minHeight:"100vh",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(dl,{size:40,color:"#3B82F6",style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),l.jsx("p",{style:{color:"#6B7280",fontSize:"16px"},children:"Loading your orders..."})]}),l.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}):u?l.jsx("div",{style:{backgroundColor:"#F3F4F6",minHeight:"100vh",padding:"40px 20px"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[l.jsx("h2",{style:{color:"#EF4444"},children:"Error Loading Orders"}),l.jsx("p",{style:{color:"#6B7280"},children:u}),l.jsx("button",{onClick:_,style:{padding:"12px 24px",backgroundColor:"#3B82F6",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:"Try Again"})]})}):t.length===0?l.jsx("div",{style:{backgroundColor:"#F3F4F6",minHeight:"100vh",padding:"40px 20px"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[l.jsx("div",{style:{marginBottom:"40px",textAlign:"left"},children:l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"transparent",border:"1px solid #D1D5DB",borderRadius:"8px",cursor:"pointer",color:"#374151",fontSize:"14px"},children:[l.jsx(Yf,{size:14}),"Back"]})}),l.jsx(ly,{size:80,color:"#CCCCCC",style:{marginBottom:"24px"}}),l.jsx("h2",{style:{fontSize:"32px",fontWeight:"600",color:"#1F2937",margin:"0 0 16px 0"},children:"No Orders Yet"}),l.jsx("p",{style:{fontSize:"18px",color:"#6B7280",marginBottom:"32px"},children:"You haven't created any quotations yet. Start shopping and create your first quotation!"}),l.jsxs("button",{onClick:()=>e("/trade"),style:{display:"inline-flex",alignItems:"center",gap:"12px",backgroundColor:"#FF9900",color:"#FFFFFF",padding:"16px 32px",fontSize:"18px",fontWeight:"600",textDecoration:"none",borderRadius:"8px",border:"none",cursor:"pointer"},children:[l.jsx(d1,{})," Start Shopping"]})]})}):l.jsx("div",{style:{backgroundColor:"#F3F4F6",minHeight:"100vh",padding:"20px"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"30px"},children:[l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"transparent",border:"1px solid #D1D5DB",borderRadius:"8px",cursor:"pointer",color:"#374151",fontSize:"14px"},children:[l.jsx(Yf,{size:14}),"Back"]}),l.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1F2937",margin:0},children:["My Orders (",t.length,")"]}),l.jsx("div",{style:{width:"80px"}})]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:t.map(N=>(a.has(N.id),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"2px solid #E5E7EB"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px",paddingBottom:"16px",borderBottom:"1px solid #E5E7EB"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[l.jsx(ly,{size:20,color:"#FF9900"}),l.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937",margin:0},children:["Quotation #",N.orderNumber]})]}),l.jsxs("div",{style:{fontSize:"14px",color:"#6B7280"},children:["Created on: ",N.shortDate]})]}),l.jsxs("button",{onClick:()=>S(N),style:{padding:"10px 16px",backgroundColor:"#3B82F6",border:"none",borderRadius:"8px",cursor:"pointer",color:"#FFFFFF",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",transition:"background-color 0.2s"},onMouseOver:z=>z.target.style.backgroundColor="#2563EB",onMouseOut:z=>z.target.style.backgroundColor="#3B82F6",children:[l.jsx(Zse,{size:14}),"Make Hire Purchase"]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"20px",padding:"16px",backgroundColor:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Total Items"}),l.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937"},children:N.items.length})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Total Amount"}),l.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937"},children:N.formattedAmount})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Status"}),l.jsx("span",{style:{backgroundColor:N.status==="Draft"?"#FEF3CD":N.status==="Open"?"#DBEAFE":"#E8F5E9",color:N.status==="Draft"?"#B45309":N.status==="Open"?"#1E40AF":"#2E7D32",fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"12px"},children:N.status})]})]}),l.jsxs("details",{style:{cursor:"pointer"},children:[l.jsxs("summary",{style:{color:"#3B82F6",fontSize:"14px",fontWeight:"600",padding:"8px 0",listStyle:"none",display:"flex",alignItems:"center",gap:"8px"},children:["View Items (",N.items.length,")",l.jsx("span",{style:{marginLeft:"auto"},children:""})]}),l.jsx("div",{style:{marginTop:"16px"},children:N.items.map((z,B)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px",borderBottom:B<N.items.length-1?"1px solid #E5E7EB":"none",gap:"16px"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",marginBottom:"4px"},children:z.item_name||z.item_code}),l.jsxs("div",{style:{fontSize:"12px",color:"#6B7280"},children:["Quantity: ",z.qty," | Rate: ",N.currency," ",parseFloat(z.rate||0).toLocaleString("en-IN")]})]}),l.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:[N.currency," ",parseFloat(z.amount||0).toLocaleString("en-IN")]})]},B))})]}),l.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px",paddingTop:"16px",borderTop:"1px solid #E5E7EB"},children:[l.jsxs("button",{onClick:()=>E(N.orderNumber),style:{padding:"8px 16px",backgroundColor:"transparent",border:"1px solid #D1D5DB",borderRadius:"8px",cursor:"pointer",color:"#374151",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600"},children:[l.jsx(BT,{size:14}),"View in ERPNext"]}),l.jsxs("button",{onClick:()=>A(N.orderNumber),style:{padding:"8px 16px",backgroundColor:"#FF9900",border:"none",borderRadius:"8px",cursor:"pointer",color:"#FFFFFF",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600"},children:[l.jsx(Oj,{size:14}),"Download PDF"]})]})]},N.id)))})]})})},yz=()=>{var dt;const e=pl(),t=Pr(),n=((dt=e.state)==null?void 0:dt.quotation)||null,[i,o]=L.useState("Mr."),[u,c]=L.useState(""),[a,g]=L.useState(""),[_,S]=L.useState("FORTNIGHTLY"),[E,A]=L.useState((n==null?void 0:n.orderNumber)||""),[N,z]=L.useState((n==null?void 0:n.amount)||0),[B,$]=L.useState(0),[q,W]=L.useState(11),[Q,Z]=L.useState(19.5),[K,le]=L.useState(null),[ge,he]=L.useState(null),[pe,Ie]=L.useState(null),[He,Ye]=L.useState(null),[rt,Rt]=L.useState(0),[St,De]=L.useState(0),[Qe,et]=L.useState(0),[Nt,fe]=L.useState([]);L.useEffect(()=>{const Ve=(Qi.get("full_name")||"").split(" ");Ve.length>0&&c(Ve[0]),Ve.length>1&&g(Ve.slice(1).join(" "))},[]),L.useEffect(()=>{let pt=0;q>=1&&q<=12?pt=19.5:q>=13&&q<=24?pt=38.9:q>=25&&q<=36&&(pt=58.4),Z(pt)},[q]),L.useEffect(()=>{N>0&&q>0&&Xe()},[N,B,Q,q]);const Xe=()=>{const pt=parseFloat(N)||0,Ve=parseFloat(B)||0,Ge=parseFloat(Q)||0,Dt=parseInt(q)||0,Lt=pt-Ve;if(Lt<=0||Ge<0||Dt<=0)return;const Ot=Ge/100/26,en=Lt*Ot*Math.pow(1+Ot,Dt)/(Math.pow(1+Ot,Dt)-1),_n=Math.round(en*100)/100;Rt(_n);let Yn=Lt,Hn=0;const hn=[];for(let Ue=1;Ue<=Dt;Ue++){const We=Yn*Ot,Pe=_n-We,Bt=Yn-Pe,Et=Math.round(We*100)/100,nn=Math.round(Pe*100)/100,yn=Math.round(Bt*100)/100;Hn+=Et,hn.push({no:Ue,numberOfFortnights:Ue,totalAmount:_n,efiPrinciple:nn,efiInterest:Et,closingBalance:yn,outstandingPrincipal:Math.round(Yn*100)/100}),Yn=Bt}const on=Math.round(Hn*100)/100;De(on),et(Math.round((pt+on)*100)/100),fe(hn)},tt=(pt,Ve)=>{const Ge=Ve.target.files[0];if(Ge)switch(pt){case 1:le(Ge);break;case 2:he(Ge);break;case 3:Ie(Ge);break;case 4:Ye(Ge);break}},Me=()=>{console.log("Form submitted with data:",{customer:`${i} ${u} ${a}`,installmentType:_,quotationId:E,principalAmount:N,downPaymentAmount:B,numberOfFortnights:q,interest:Q,efiAmount:rt,totalInterestAmount:St,totalAmountToBePaid:Qe,files:{file1:K,file2:ge,file3:pe,file4:He}}),alert("EMI Calculator form submitted successfully!")};if(!n)return l.jsx("div",{style:{backgroundColor:"#F3F4F6",minHeight:"100vh",padding:"40px 20px"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[l.jsx("h2",{style:{color:"#1F2937"},children:"No Quotation Selected"}),l.jsx("p",{style:{color:"#6B7280"},children:"Please select a quotation from My Orders to calculate EMI."}),l.jsx("button",{onClick:()=>t("/my-orders"),style:{padding:"12px 24px",backgroundColor:"#3B82F6",color:"#FFFFFF",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:"Go to My Orders"})]})});const ot=(q/2).toFixed(1),ut=(q/26).toFixed(2);return l.jsx("div",{style:{backgroundColor:"#F3F4F6",minHeight:"100vh",padding:"20px"},children:l.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[l.jsx("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"20px"},children:l.jsxs("button",{onClick:()=>t(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"transparent",border:"1px solid #D1D5DB",borderRadius:"8px",cursor:"pointer",color:"#374151",fontSize:"14px"},children:[l.jsx(Yf,{size:14}),"Back"]})}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",padding:"30px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"2px solid #E5E7EB",marginBottom:"20px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[l.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:"#DDD6FE",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:""}),l.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1F2937",margin:0},children:"EFI Details"})]}),l.jsx("hr",{style:{border:"none",borderTop:"2px solid #8B5CF6",marginBottom:"30px",width:"60px"}}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"30px"},children:[l.jsxs("div",{children:[l.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["Title ",l.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),l.jsxs("select",{value:i,onChange:pt=>o(pt.target.value),style:{width:"100%",padding:"12px 16px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"15px",backgroundColor:"#FFFFFF",color:"#1F2937",outline:"none"},onFocus:pt=>pt.target.style.borderColor="#3B82F6",onBlur:pt=>pt.target.style.borderColor="#D1D5DB",children:[l.jsx("option",{value:"Mr.",children:"Mr."}),l.jsx("option",{value:"Mrs.",children:"Mrs."}),l.jsx("option",{value:"Ms.",children:"Ms."})]})]}),l.jsxs("div",{children:[l.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["First Name ",l.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),l.jsx("input",{type:"text",value:u,onChange:pt=>c(pt.target.value),placeholder:"First Name",style:{width:"100%",padding:"12px 16px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"15px",backgroundColor:"#FFFFFF",color:"#1F2937",outline:"none"},onFocus:pt=>pt.target.style.borderColor="#3B82F6",onBlur:pt=>pt.target.style.borderColor="#D1D5DB"})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:"Last Name"}),l.jsx("input",{type:"text",value:a,onChange:pt=>g(pt.target.value),placeholder:"Last Name",style:{width:"100%",padding:"12px 16px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"15px",backgroundColor:"#FFFFFF",color:"#1F2937",outline:"none"},onFocus:pt=>pt.target.style.borderColor="#3B82F6",onBlur:pt=>pt.target.style.borderColor="#D1D5DB"})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"30px"},children:[l.jsxs("div",{children:[l.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["Installment Type ",l.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),l.jsxs("select",{value:_,onChange:pt=>S(pt.target.value),style:{width:"100%",padding:"12px 16px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"15px",backgroundColor:"#FFFFFF",color:"#1F2937",outline:"none"},onFocus:pt=>pt.target.style.borderColor="#3B82F6",onBlur:pt=>pt.target.style.borderColor="#D1D5DB",children:[l.jsx("option",{value:"FORTNIGHTLY",children:"FORTNIGHTLY"}),l.jsx("option",{value:"MONTHLY",children:"MONTHLY"}),l.jsx("option",{value:"QUARTERLY",children:"QUARTERLY"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:"Quotation ID"}),l.jsx("input",{type:"text",value:E,readOnly:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"15px",backgroundColor:"#F9FAFB",color:"#6B7280",cursor:"not-allowed"}})]}),l.jsxs("div",{children:[l.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["Principal Amount ",l.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),l.jsx("input",{type:"number",value:N,onChange:pt=>z(pt.target.value),style:{width:"100%",padding:"12px 16px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"15px",backgroundColor:"#FFFFFF",color:"#1F2937",outline:"none"},onFocus:pt=>pt.target.style.borderColor="#3B82F6",onBlur:pt=>pt.target.style.borderColor="#D1D5DB"})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"30px"},children:[l.jsxs("div",{children:[l.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["Down Payment Amount ",l.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),l.jsx("input",{type:"number",value:B,onChange:pt=>$(pt.target.value),style:{width:"100%",padding:"12px 16px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"15px",backgroundColor:"#FFFFFF",color:"#1F2937",outline:"none"},onFocus:pt=>pt.target.style.borderColor="#3B82F6",onBlur:pt=>pt.target.style.borderColor="#D1D5DB"})]}),l.jsxs("div",{children:[l.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["Number Of Fortnights ",l.jsx("span",{style:{color:"#EF4444"},children:"*"})]}),l.jsx("select",{value:q,onChange:pt=>W(parseInt(pt.target.value)),style:{width:"100%",padding:"12px 16px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"15px",backgroundColor:"#FFFFFF",color:"#1F2937",outline:"none"},onFocus:pt=>pt.target.style.borderColor="#3B82F6",onBlur:pt=>pt.target.style.borderColor="#D1D5DB",children:Array.from({length:36},(pt,Ve)=>Ve+1).map(pt=>l.jsx("option",{value:pt,children:pt},pt))}),l.jsxs("p",{style:{fontSize:"12px",color:"#9CA3AF",marginTop:"6px"},children:[q," fortnights = ",ot," months = ",ut," years"]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:"Interest Percentage (%)"}),l.jsx("input",{type:"text",value:Q.toFixed(3),readOnly:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"15px",backgroundColor:"#F9FAFB",color:"#6B7280"}})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"30px",padding:"20px",backgroundColor:"#F9FAFB",borderRadius:"12px",border:"1px solid #E5E7EB"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6B7280",marginBottom:"6px"},children:"EFI Amount"}),l.jsxs("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1F2937"},children:["K ",rt.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6B7280",marginBottom:"6px"},children:"Total Interest Amount"}),l.jsxs("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1F2937"},children:["K ",St.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"#6B7280",marginBottom:"6px"},children:"Total Amount To Be Paid"}),l.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:"#7C3AED"},children:Qe.toLocaleString(void 0,{minimumFractionDigits:2})})]}),l.jsx("div",{style:{display:"flex",alignItems:"flex-end"}})]}),l.jsxs("div",{children:[l.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1F2937",marginBottom:"16px"},children:"EFI Details"}),l.jsx("div",{style:{overflowX:"auto",border:"1px solid #E5E7EB",borderRadius:"12px"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#F9FAFB"},children:[l.jsx("th",{style:{padding:"14px 16px",textAlign:"left",borderBottom:"1px solid #E5E7EB",fontWeight:"600",color:"#6B7280",fontSize:"13px"},children:"No."}),l.jsx("th",{style:{padding:"14px 16px",textAlign:"center",borderBottom:"1px solid #E5E7EB",fontWeight:"600",color:"#6B7280",fontSize:"13px"},children:"Number Of Fortnights"}),l.jsx("th",{style:{padding:"14px 16px",textAlign:"right",borderBottom:"1px solid #E5E7EB",fontWeight:"600",color:"#6B7280",fontSize:"13px"},children:"Total EFI Amount (Includin Interest)"}),l.jsx("th",{style:{padding:"14px 16px",textAlign:"right",borderBottom:"1px solid #E5E7EB",fontWeight:"600",color:"#6B7280",fontSize:"13px"},children:"EFI Principle"}),l.jsx("th",{style:{padding:"14px 16px",textAlign:"right",borderBottom:"1px solid #E5E7EB",fontWeight:"600",color:"#6B7280",fontSize:"13px"},children:"EFI Interest"})]})}),l.jsx("tbody",{children:Nt.map((pt,Ve)=>l.jsxs("tr",{style:{backgroundColor:Ve%2===0?"#FFFFFF":"#F9FAFB"},children:[l.jsx("td",{style:{padding:"14px 16px",borderBottom:"1px solid #F3F4F6",color:"#1F2937"},children:pt.no}),l.jsx("td",{style:{padding:"14px 16px",textAlign:"center",borderBottom:"1px solid #F3F4F6",color:"#1F2937"},children:pt.numberOfFortnights}),l.jsxs("td",{style:{padding:"14px 16px",textAlign:"right",borderBottom:"1px solid #F3F4F6",color:"#1F2937",fontWeight:"500"},children:["K ",pt.totalAmount.toLocaleString(void 0,{minimumFractionDigits:2})]}),l.jsxs("td",{style:{padding:"14px 16px",textAlign:"right",borderBottom:"1px solid #F3F4F6",color:"#1F2937",fontWeight:"500"},children:["K ",pt.efiPrinciple.toLocaleString(void 0,{minimumFractionDigits:2})]}),l.jsxs("td",{style:{padding:"14px 16px",textAlign:"right",borderBottom:"1px solid #F3F4F6",color:"#1F2937",fontWeight:"500"},children:["K ",pt.efiInterest.toLocaleString(void 0,{minimumFractionDigits:2})]})]},Ve))})]})})]})]}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",padding:"30px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"2px solid #E5E7EB",marginBottom:"20px"},children:[l.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:l.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1F2937",margin:0},children:"Personal Documents"})}),l.jsx("hr",{style:{border:"none",borderTop:"2px solid #8B5CF6",marginBottom:"30px",width:"60px"}}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px"},children:[1,2,3,4].map(pt=>l.jsxs("div",{children:[l.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["Attachment ",pt]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"12px 16px",border:"2px dashed #D1D5DB",borderRadius:"8px",backgroundColor:"#F9FAFB",cursor:"pointer",transition:"all 0.2s",fontSize:"14px",color:"#6B7280",gap:"8px"},onMouseOver:Ve=>{Ve.currentTarget.style.borderColor="#3B82F6",Ve.currentTarget.style.backgroundColor="#EFF6FF"},onMouseOut:Ve=>{Ve.currentTarget.style.borderColor="#D1D5DB",Ve.currentTarget.style.backgroundColor="#F9FAFB"},children:[l.jsx(ore,{size:16}),l.jsx("span",{children:pt===1&&K||pt===2&&ge||pt===3&&pe||pt===4&&He?(pt===1&&(K==null?void 0:K.name)||pt===2&&(ge==null?void 0:ge.name)||pt===3&&(pe==null?void 0:pe.name)||pt===4&&(He==null?void 0:He.name)).substring(0,15)+"...":"Choose File"}),l.jsx("input",{type:"file",onChange:Ve=>tt(pt,Ve),style:{display:"none"},accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"})]})]},pt))})]}),l.jsx("div",{style:{textAlign:"center"},children:l.jsx("button",{onClick:Me,style:{padding:"14px 48px",backgroundColor:"#3B82F6",color:"#FFFFFF",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"background-color 0.2s",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"},onMouseOver:pt=>pt.target.style.backgroundColor="#2563EB",onMouseOut:pt=>pt.target.style.backgroundColor="#3B82F6",children:"Submit"})})]})})},Rre=()=>l.jsxs("footer",{style:{backgroundColor:"#3A3A3C",color:"#FFFFFF",padding:"60px 0 0 0",marginTop:"60px"},children:[l.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px"},children:l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"40px",marginBottom:"40px"},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{fontSize:"28px",fontWeight:"bold",color:"#FFFFFF",marginBottom:"20px",fontFamily:'"Segoe UI", Tahoma, Geneva, Verdana, sans-serif'},children:"Trade Blo Me"}),l.jsx("p",{style:{fontSize:"16px",color:"#CCCCCC",lineHeight:"1.6",marginBottom:"30px",maxWidth:"300px"},children:"Your trusted e-commerce platform for quality products at amazing prices. Shop with confidence and enjoy our premium service."}),l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#FFD814",marginBottom:"15px"},children:"Explore Other Apps"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[{name:"Health Card",url:"http://192.168.101.182:8002/mycard/health",icon:tre,color:"#FF6B6B"},{name:"My Card",url:"http://192.168.101.182:8002/mycard/",icon:pz,color:"#4ECDC4"},{name:"Social Card",url:"http://192.168.101.182:8002/mycard/social",icon:_re,color:"#45B7D1"},{name:"Home Card",url:"http://192.168.101.182:8002/mycard",icon:nre,color:"#96CEB4"},{name:"Bank Card",url:"http://192.168.101.182:8002/mycard/bank",icon:yre,color:"#FECA57"}].map((e,t)=>l.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",backgroundColor:"#4A4A4C",borderRadius:"6px",textDecoration:"none",color:"#FFFFFF",fontSize:"14px",fontWeight:"500",transition:"all 0.3s ease",border:`1px solid ${e.color}20`},onMouseOver:n=>{n.currentTarget.style.backgroundColor=e.color+"20",n.currentTarget.style.borderColor=e.color,n.currentTarget.style.transform="translateX(5px)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="#4A4A4C",n.currentTarget.style.borderColor=e.color+"20",n.currentTarget.style.transform="translateX(0)"},children:[l.jsx(e.icon,{size:16,style:{color:e.color}}),l.jsx("span",{children:e.name}),l.jsx(Jse,{size:12,style:{marginLeft:"auto",color:"#CCCCCC"}})]},t))})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:"20px",fontWeight:"600",color:"#FFFFFF",marginBottom:"20px"},children:"Quick Links"}),l.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:[{name:"About Us",link:"/about"},{name:"Contact Us",link:"/contact"},{name:"Privacy Policy",link:"/privacy"},{name:"Terms & Conditions",link:"/terms"},{name:"FAQ",link:"/faq"}].map((e,t)=>l.jsx("li",{style:{marginBottom:"12px"},children:l.jsx(Mr,{to:e.link,style:{color:"#CCCCCC",textDecoration:"none",fontSize:"16px",transition:"color 0.3s ease"},onMouseOver:n=>n.target.style.color="#FFD814",onMouseOut:n=>n.target.style.color="#CCCCCC",children:e.name})},t))})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:"20px",fontWeight:"600",color:"#FFFFFF",marginBottom:"20px"},children:"Categories"}),l.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:[{name:"Electronics",link:"/products?category=Electronics"},{name:"Fashion",link:"/products?category=Fashion"},{name:"Home & Living",link:"/products?category=Home & Living"},{name:"Books",link:"/products?category=Books"},{name:"Sports",link:"/products?category=Sports"}].map((e,t)=>l.jsx("li",{style:{marginBottom:"12px"},children:l.jsx(Mr,{to:e.link,style:{color:"#CCCCCC",textDecoration:"none",fontSize:"16px",transition:"color 0.3s ease"},onMouseOver:n=>n.target.style.color="#FFD814",onMouseOut:n=>n.target.style.color="#CCCCCC",children:e.name})},t))})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:"20px",fontWeight:"600",color:"#FFFFFF",marginBottom:"20px"},children:"Contact Info"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[{icon:sre,text:"123 Trade Street, Business District, City 400001",color:"#FFD814"},{icon:lre,text:"+91 1800-123-4567",color:"#FFD814"},{icon:Qse,text:"support@tradblome.com",color:"#FFD814"},{icon:Kse,text:"Mon - Sat: 9:00 AM - 8:00 PM",color:"#FFD814"}].map((e,t)=>l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[l.jsx(e.icon,{size:18,style:{color:e.color,marginTop:"2px",flexShrink:0}}),l.jsx("span",{style:{color:"#CCCCCC",fontSize:"16px",lineHeight:"1.5"},children:e.text})]},t))})]})]})}),l.jsx("div",{style:{borderTop:"1px solid #555555",paddingTop:"30px",paddingBottom:"30px"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"20px"},children:[l.jsx("div",{style:{color:"#CCCCCC",fontSize:"16px"},children:" 2025 Trade Blo Me. All rights reserved."}),l.jsx("div",{style:{display:"flex",gap:"30px",alignItems:"center"},children:[{icon:hre,text:"Secure Payment",color:"#00A652"},{icon:fre,text:"Free Shipping",color:"#FFD814"},{icon:ere,text:"24/7 Support",color:"#FF9900"}].map((e,t)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(e.icon,{size:20,style:{color:e.color}}),l.jsx("span",{style:{color:"#CCCCCC",fontSize:"14px",fontWeight:"600"},children:e.text})]},t))})]})})]}),Dre=()=>{const e=Pr(),t=Im(),{totalItems:n,wishlist:i,wishlistCount:o}=hd(Q=>Q.cart),[u,c]=L.useState(""),[a,g]=L.useState(""),[_,S]=L.useState(n),[E,A]=L.useState(0),N=()=>Gt(null,null,function*(){var Q,Z,K;try{const he=(K=(Z=(Q=(yield(yield fetch("/api/method/webshop.webshop.shopping_cart.cart.get_cart_quotation",{credentials:"include"})).json()).message)==null?void 0:Q.doc)==null?void 0:Z.total_qty)!=null?K:n;S(he)}catch(le){S(n)}}),z=()=>Gt(null,null,function*(){var Q,Z,K;try{const le=Qi.get("user_id")||"Guest",ge=yield fetch(`/api/resource/Wishlist/${le}`,{credentials:"include"});if(ge.status===404){t(Q4(0));return}const pe=(K=(Z=(Q=(yield ge.json()).data)==null?void 0:Q.items)==null?void 0:Z.length)!=null?K:i.length;t(Q4(pe))}catch(le){}}),B=()=>Gt(null,null,function*(){var Q;try{const Z=Qi.get("full_name");if(!Z){A(0);return}const K=yield fetch(`/api/resource/Quotation?fields=["name"]&filters=[["docstatus","!=",2],["customer_name","=","${Z}"]]&limit_page_length=50`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(K.ok){const ge=((Q=(yield K.json()).data)==null?void 0:Q.length)||0;A(ge)}else A(0)}catch(Z){console.error("Error fetching quotations count:",Z),A(0)}});L.useEffect(()=>{N(),z(),B()},[]);const $=()=>{let Q=[];u.trim()&&Q.push(`search=${encodeURIComponent(u.trim())}`),a&&Q.push(`category=${encodeURIComponent(a)}`);const Z=Q.length>0?`?${Q.join("&")}`:"";e(`/trade${Z}`)},q=Q=>{Q.key==="Enter"&&$()},W=Q=>{c(Q.target.value)};return l.jsxs("header",{style:{backgroundColor:Pn.primary,color:Pn.white,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx(Mr,{to:"/trade",style:{fontSize:"28px",fontWeight:"bold",color:Pn.white,textDecoration:"none"},children:"Trade Blo Me"}),l.jsx("div",{style:{flex:1,maxWidth:"600px",margin:"0 40px",position:"relative"},children:l.jsxs("div",{style:{display:"flex",backgroundColor:Pn.white,borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[l.jsx("input",{type:"text",value:u,onChange:W,onKeyPress:q,placeholder:"Search for products, brands and more...",style:{flex:1,border:"none",padding:"12px 16px",fontSize:"16px",outline:"none",color:Pn.textPrimary}}),l.jsx("button",{onClick:$,style:{backgroundColor:Pn.secondary,border:"none",padding:"12px 20px",cursor:"pointer",color:Pn.white,transition:"background-color 0.3s ease"},onMouseOver:Q=>Q.target.style.backgroundColor=Pn.secondaryLight,onMouseOut:Q=>Q.target.style.backgroundColor=Pn.secondary,children:l.jsx(ure,{size:18})})]})}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"8px"},children:[l.jsx(xre,{size:20}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",opacity:.8},children:"Hello, Sign in"}),l.jsx("div",{style:{fontWeight:"bold",fontSize:"14px"},children:"Account & Lists"})]})]}),l.jsxs(Mr,{to:"/wishlist",style:{color:Pn.white,textDecoration:"none",position:"relative",padding:"8px"},children:[l.jsx(_m,{size:24}),o>0&&l.jsx("span",{style:{position:"absolute",top:"-4px",right:"-4px",backgroundColor:Pn.secondary,color:Pn.white,borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:o})]}),l.jsxs(Mr,{to:"/cart",style:{color:Pn.white,textDecoration:"none",position:"relative",display:"flex",alignItems:"center",gap:"8px",padding:"8px"},children:[l.jsx(Rm,{size:24}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",opacity:.8},children:"Cart"}),l.jsxs("div",{style:{fontWeight:"bold",fontSize:"14px"},children:[_," items"]})]}),_>0&&l.jsx("span",{style:{position:"absolute",top:"-4px",right:"-4px",backgroundColor:Pn.secondary,color:Pn.white,borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:_})]})]})]}),l.jsx("nav",{style:{backgroundColor:Pn.primaryDark,borderTop:`1px solid ${Pn.primaryLight}`},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"12px 20px",display:"flex",alignItems:"center",gap:"32px"},children:[l.jsx(Mr,{to:"/trade",style:{color:Pn.white,textDecoration:"none",fontSize:"16px",fontWeight:"500",padding:"8px 0",transition:"opacity 0.3s"},onMouseOver:Q=>Q.target.style.opacity="0.8",onMouseOut:Q=>Q.target.style.opacity="1",children:"All Products"}),l.jsxs(Mr,{to:"/my-orders",style:{color:Pn.white,textDecoration:"none",fontSize:"16px",fontWeight:"500",padding:"8px 0",position:"relative",display:"flex",alignItems:"center",gap:"8px",transition:"opacity 0.3s"},onMouseOver:Q=>Q.currentTarget.style.opacity="0.8",onMouseOut:Q=>Q.currentTarget.style.opacity="1",children:[l.jsx(ly,{size:16}),"My Orders",E>0&&l.jsx("span",{style:{backgroundColor:Pn.secondary,color:Pn.white,borderRadius:"50%",width:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"bold",marginLeft:"-4px"},children:E})]})]})})]})},zre=()=>{const e=Pr();return l.jsx("div",{class:"bg-gray-50 min-h-screen",children:l.jsxs("div",{class:"max-w-4xl mx-auto px-4 py-16",children:[l.jsxs("button",{className:"cursor-pointer flex gap-2 items-center justify-center",onClick:()=>e("/signup"),children:[l.jsx(pP,{}),"Back"]}),l.jsxs("div",{class:"bg-white rounded-2xl shadow-xl p-8",children:[l.jsx("h1",{class:"text-3xl font-bold text-gray-900 mb-8",children:"Terms of Service"}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"1. Acceptance of Terms"}),l.jsx("div",{class:"prose text-gray-600",children:l.jsx("p",{children:"By accessing and using this website, you accept and agree to be bound by the terms and provision of this agreement."})})]}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"2. Use License"}),l.jsx("div",{class:"bg-gray-50 rounded-lg p-6",children:l.jsxs("ul",{class:"space-y-4 text-gray-600",children:[l.jsxs("li",{class:"flex gap-3",children:[l.jsx("svg",{class:"h-6 w-6 text-blue-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})}),l.jsx("span",{children:"Permission is granted to temporarily download one copy of the materials for personal, non-commercial transitory viewing only."})]}),l.jsxs("li",{class:"flex gap-3",children:[l.jsx("svg",{class:"h-6 w-6 text-blue-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})}),l.jsx("span",{children:"This is the grant of a license, not a transfer of title."})]})]})})]}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"3. Disclaimer"}),l.jsx("div",{class:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:l.jsxs("div",{class:"flex",children:[l.jsx("div",{class:"flex-shrink-0",children:l.jsx("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})})}),l.jsx("div",{class:"ml-3",children:l.jsx("p",{class:"text-sm text-yellow-700",children:"The materials on this website are provided on an 'as is' basis. We make no warranties, expressed or implied, and hereby disclaim and negate all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."})})]})})]}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"4. Limitations"}),l.jsxs("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{class:"bg-gray-50 p-6 rounded-lg",children:[l.jsx("h3",{class:"font-medium text-gray-900 mb-2",children:"Time Limitations"}),l.jsx("p",{class:"text-gray-600",children:"Claims must be filed within 30 days of incident."})]}),l.jsxs("div",{class:"bg-gray-50 p-6 rounded-lg",children:[l.jsx("h3",{class:"font-medium text-gray-900 mb-2",children:"Liability"}),l.jsx("p",{class:"text-gray-600",children:"We shall not be held liable for any damages."})]})]})]}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"5. Revisions"}),l.jsx("div",{class:"prose text-gray-600",children:l.jsx("p",{children:"We may revise these terms of service at any time without notice. By using this website you are agreeing to be bound by the current version of these terms of service."})})]}),l.jsxs("section",{children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"6. Contact"}),l.jsxs("div",{class:"bg-gray-50 rounded-lg p-6 flex items-center justify-between",children:[l.jsx("p",{class:"text-gray-600",children:"Questions about the Terms of Service?"}),l.jsxs("a",{href:"mailto:legal@example.com",class:"inline-flex items-center text-blue-600 hover:text-blue-500",children:[l.jsx("svg",{class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Contact Us"]})]})]})]})]})})},Ire=()=>{const e=pl(),t=Qi.get("user_id"),n=()=>e.pathname.startsWith("/product/")?!0:["/trade","/products","/cart","/wishlist","/checkout","/my-orders","/emi-calculator"].includes(e.pathname);return l.jsxs("div",{className:"flex-1 overflow-hidden",children:[n()?l.jsx(Dre,{}):l.jsx(XV,{}),l.jsxs(YA,{children:[l.jsx(us,{path:"/",element:l.jsx(Mf,{user:t,children:l.jsx(kN,{})})}),l.jsx(us,{path:"/social_media",element:l.jsx(Mf,{user:t,children:l.jsx(wW,{})})}),l.jsx(us,{path:"/patient-not-found",element:l.jsx(KB,{})}),l.jsx(us,{path:"/profile/:id",element:l.jsx(eJ,{})}),l.jsx(us,{path:"/comments/:id",element:l.jsx(gQ,{})}),l.jsx(us,{path:"/edit-profile",element:l.jsx(XQ,{})}),l.jsx(us,{path:"/chat",element:l.jsx(JQ,{})}),l.jsx(us,{path:"/create-channel",element:l.jsx(v6,{})}),l.jsx(us,{path:"/profile",element:l.jsx(Mf,{user:t,children:l.jsx(kN,{})})}),l.jsx(us,{path:"/loyalty",element:l.jsx(Mf,{user:t,children:l.jsx(Gse,{})})}),l.jsx(us,{path:"/health",element:l.jsx(Mf,{user:t,children:l.jsx(gJ,{})})}),l.jsx(us,{path:"/academy",element:l.jsx(am,{})}),l.jsx(us,{path:"/legal",element:l.jsx(am,{})}),l.jsx(us,{path:"/career",element:l.jsx(am,{})}),l.jsx(us,{path:"/bank",element:l.jsx(am,{})}),l.jsx(us,{path:"/trade",element:l.jsx(Mf,{user:t,children:l.jsx(am,{})})}),l.jsx(us,{path:"/products",element:l.jsx(Ere,{})}),l.jsx(us,{path:"/product/:id",element:l.jsx(Mre,{})}),l.jsx(us,{path:"/cart",element:l.jsx(Nre,{})}),l.jsx(us,{path:"/wishlist",element:l.jsx(Are,{})}),l.jsx(us,{path:"/checkout",element:l.jsx(Pre,{})}),l.jsx(us,{path:"/get_medicine",element:l.jsx(mJ,{})}),l.jsx(us,{path:"/my-orders",element:l.jsx(Mf,{user:t,children:l.jsx(gz,{})})}),l.jsx(us,{path:"/emi-calculator",element:l.jsx(Mf,{user:t,children:l.jsx(yz,{})})})]}),n()&&l.jsx(Rre,{})]})};function Ore(){return l.jsx(wO,{socketPort:"9001",children:l.jsxs($F,{basename:"/mycard",children:[l.jsx(CE,{richColors:!0}),l.jsxs(YA,{children:[l.jsx(us,{path:"/login",element:l.jsx(mQ,{})}),l.jsx(us,{path:"/signup",element:l.jsx(fQ,{})}),l.jsx(us,{path:"/terms_and_condition",element:l.jsx(zre,{})}),l.jsx(us,{path:"/trade/my-orders",element:l.jsxs("div",{className:"min-h-screen w-screen bg-gray-50 flex p-3",children:[l.jsx(I2,{}),l.jsx(gz,{})]})}),l.jsx(us,{path:"/trade/emi-calculator",element:l.jsxs("div",{className:"min-h-screen w-screen bg-gray-50 flex p-3",children:[l.jsx(I2,{}),l.jsx(yz,{})]})}),l.jsx(us,{path:"/*",element:l.jsxs("div",{className:"min-h-screen w-screen bg-gray-50 flex p-3",children:[l.jsx(I2,{}),l.jsx(Ire,{})]})})]}),l.jsx(CE,{richColors:!0})]})})}var VT="persist:",xz="persist/FLUSH",UT="persist/REHYDRATE",_z="persist/PAUSE",bz="persist/PERSIST",vz="persist/PURGE",wz="persist/REGISTER",Fre=-1;function vv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vv=function(n){return typeof n}:vv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vv(e)}function J4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function Lre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J4(n,!0).forEach(function(i){Bre(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J4(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Bre(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vre(e,t,n,i){i.debug;var o=Lre({},n);return e&&vv(e)==="object"&&Object.keys(e).forEach(function(u){u!=="_persist"&&t[u]===n[u]&&(o[u]=e[u])}),o}function Ure(e){var t=e.blacklist||null,n=e.whitelist||null,i=e.transforms||[],o=e.throttle||0,u="".concat(e.keyPrefix!==void 0?e.keyPrefix:VT).concat(e.key),c=e.storage,a;e.serialize===!1?a=function(K){return K}:typeof e.serialize=="function"?a=e.serialize:a=$re;var g=e.writeFailHandler||null,_={},S={},E=[],A=null,N=null,z=function(K){Object.keys(K).forEach(function(le){q(le)&&_[le]!==K[le]&&E.indexOf(le)===-1&&E.push(le)}),Object.keys(_).forEach(function(le){K[le]===void 0&&q(le)&&E.indexOf(le)===-1&&_[le]!==void 0&&E.push(le)}),A===null&&(A=setInterval(B,o)),_=K};function B(){if(E.length===0){A&&clearInterval(A),A=null;return}var Z=E.shift(),K=i.reduce(function(le,ge){return ge.in(le,Z,_)},_[Z]);if(K!==void 0)try{S[Z]=a(K)}catch(le){console.error("redux-persist/createPersistoid: error serializing state",le)}else delete S[Z];E.length===0&&$()}function $(){Object.keys(S).forEach(function(Z){_[Z]===void 0&&delete S[Z]}),N=c.setItem(u,a(S)).catch(W)}function q(Z){return!(n&&n.indexOf(Z)===-1&&Z!=="_persist"||t&&t.indexOf(Z)!==-1)}function W(Z){g&&g(Z)}var Q=function(){for(;E.length!==0;)B();return N||Promise.resolve()};return{update:z,flush:Q}}function $re(e){return JSON.stringify(e)}function Hre(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:VT).concat(e.key),i=e.storage;e.debug;var o;return e.deserialize===!1?o=function(c){return c}:typeof e.deserialize=="function"?o=e.deserialize:o=qre,i.getItem(n).then(function(u){if(u)try{var c={},a=o(u);return Object.keys(a).forEach(function(g){c[g]=t.reduceRight(function(_,S){return S.out(_,g,a)},o(a[g]))}),c}catch(g){throw g}else return})}function qre(e){return JSON.parse(e)}function Gre(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:VT).concat(e.key);return t.removeItem(n,Wre)}function Wre(e){}function eA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function hh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eA(n,!0).forEach(function(i){Zre(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eA(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Zre(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yre(e,t){if(e==null)return{};var n=Xre(e,t),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)i=u[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Xre(e,t){if(e==null)return{};var n={},i=Object.keys(e),o,u;for(u=0;u<i.length;u++)o=i[u],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var Kre=5e3;function Qre(e,t){var n=e.version!==void 0?e.version:Fre;e.debug;var i=e.stateReconciler===void 0?Vre:e.stateReconciler,o=e.getStoredState||Hre,u=e.timeout!==void 0?e.timeout:Kre,c=null,a=!1,g=!0,_=function(E){return E._persist.rehydrated&&c&&!g&&c.update(E),E};return function(S,E){var A=S||{},N=A._persist,z=Yre(A,["_persist"]),B=z;if(E.type===bz){var $=!1,q=function(he,pe){$||(E.rehydrate(e.key,he,pe),$=!0)};if(u&&setTimeout(function(){!$&&q(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},u),g=!1,c||(c=Ure(e)),N)return hh({},t(B,E),{_persist:N});if(typeof E.rehydrate!="function"||typeof E.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return E.register(e.key),o(e).then(function(ge){var he=e.migrate||function(pe,Ie){return Promise.resolve(pe)};he(ge,n).then(function(pe){q(pe)},function(pe){q(void 0,pe)})},function(ge){q(void 0,ge)}),hh({},t(B,E),{_persist:{version:n,rehydrated:!1}})}else{if(E.type===vz)return a=!0,E.result(Gre(e)),hh({},t(B,E),{_persist:N});if(E.type===xz)return E.result(c&&c.flush()),hh({},t(B,E),{_persist:N});if(E.type===_z)g=!0;else if(E.type===UT){if(a)return hh({},B,{_persist:hh({},N,{rehydrated:!0})});if(E.key===e.key){var W=t(B,E),Q=E.payload,Z=i!==!1&&Q!==void 0?i(Q,S,W,e):W,K=hh({},Z,{_persist:hh({},N,{rehydrated:!0})});return _(K)}}}if(!N)return t(S,E);var le=t(B,E);return le===B?S:_(hh({},le,{_persist:N}))}}function tA(e){return tae(e)||eae(e)||Jre()}function Jre(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function eae(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function tae(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function nA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function Lj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nA(n,!0).forEach(function(i){nae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nA(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function nae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sz={registry:[],bootstrapped:!1},iae=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sz,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case wz:return Lj({},t,{registry:[].concat(tA(t.registry),[n.key])});case UT:var i=t.registry.indexOf(n.key),o=tA(t.registry);return o.splice(i,1),Lj({},t,{registry:o,bootstrapped:o.length===0});default:return t}};function sae(e,t,n){var i=mC(iae,Sz,void 0),o=function(g){i.dispatch({type:wz,key:g})},u=function(g,_,S){var E={type:UT,payload:_,err:S,key:g};e.dispatch(E),i.dispatch(E)},c=Lj({},i,{purge:function(){var g=[];return e.dispatch({type:vz,result:function(S){g.push(S)}}),Promise.all(g)},flush:function(){var g=[];return e.dispatch({type:xz,result:function(S){g.push(S)}}),Promise.all(g)},pause:function(){e.dispatch({type:_z})},persist:function(){e.dispatch({type:bz,register:o,rehydrate:u})}});return c.persist(),c}var Kx={},Bb={},Vb={},iA;function rae(){if(iA)return Vb;iA=1,Vb.__esModule=!0,Vb.default=o;function e(u){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(a){return typeof a}:e=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e(u)}function t(){}var n={getItem:t,setItem:t,removeItem:t};function i(u){if((typeof self=="undefined"?"undefined":e(self))!=="object"||!(u in self))return!1;try{var c=self[u],a="redux-persist ".concat(u," test");c.setItem(a,"test"),c.getItem(a),c.removeItem(a)}catch(g){return!1}return!0}function o(u){var c="".concat(u,"Storage");return i(c)?self[c]:n}return Vb}var sA;function aae(){if(sA)return Bb;sA=1,Bb.__esModule=!0,Bb.default=n;var e=t(rae());function t(i){return i&&i.__esModule?i:{default:i}}function n(i){var o=(0,e.default)(i);return{getItem:function(c){return new Promise(function(a,g){a(o.getItem(c))})},setItem:function(c,a){return new Promise(function(g,_){g(o.setItem(c,a))})},removeItem:function(c){return new Promise(function(a,g){a(o.removeItem(c))})}}}return Bb}var rA;function oae(){if(rA)return Kx;rA=1,Kx.__esModule=!0,Kx.default=void 0;var e=t(aae());function t(i){return i&&i.__esModule?i:{default:i}}var n=(0,e.default)("local");return Kx.default=n,Kx}var lae=oae();const cae=G0(lae),uae={key:"user",storage:cae,whitelist:["currentUser"]},dae=Qre(uae,pQ),hae=NP({user:dae,cart:Tre,cardBloMePage1:BV,cardBloMePage2:$V,cardBloMePage3:GV,cardBloMePage4:YV}),jz=U7({reducer:hae,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE","persist/PAUSE","persist/PURGE","persist/REGISTER"]}})}),fae=sae(jz);function wv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wv=function(n){return typeof n}:wv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wv(e)}function pae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mae(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gae(e,t,n){return t&&mae(e.prototype,t),e}function yae(e,t){return t&&(wv(t)==="object"||typeof t=="function")?t:Sv(e)}function Bj(e){return Bj=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Bj(e)}function Sv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vj(e,t)}function Vj(e,t){return Vj=Object.setPrototypeOf||function(i,o){return i.__proto__=o,i},Vj(e,t)}function jv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cz=function(e){xae(t,e);function t(){var n,i;pae(this,t);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return i=yae(this,(n=Bj(t)).call.apply(n,[this].concat(u))),jv(Sv(i),"state",{bootstrapped:!1}),jv(Sv(i),"_unsubscribe",void 0),jv(Sv(i),"handlePersistorState",function(){var a=i.props.persistor,g=a.getState(),_=g.bootstrapped;_&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).finally(function(){return i.setState({bootstrapped:!0})}):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())}),i}return gae(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(L.PureComponent);jv(Cz,"defaultProps",{children:null,loading:null});Xz.createRoot(document.getElementById("root")).render(l.jsx(L.StrictMode,{children:l.jsx(f7,{store:jz,children:l.jsx(Cz,{loading:l.jsx("div",{children:"Loading..."}),persistor:fae,children:l.jsx(Ore,{})})})}))});export default _ae();
