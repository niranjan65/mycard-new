var Fz=Object.defineProperty,Bz=Object.defineProperties;var Vz=Object.getOwnPropertyDescriptors;var Q_=Object.getOwnPropertySymbols;var qT=Object.prototype.hasOwnProperty,GT=Object.prototype.propertyIsEnumerable;var Ag=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),Uz=e=>{throw TypeError(e)},Pg=Math.pow,bw=(e,t,n)=>t in e?Fz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,te=(e,t)=>{for(var n in t||(t={}))qT.call(t,n)&&bw(e,n,t[n]);if(Q_)for(var n of Q_(t))GT.call(t,n)&&bw(e,n,t[n]);return e},Me=(e,t)=>Bz(e,Vz(t));var en=(e,t)=>{var n={};for(var i in e)qT.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&Q_)for(var i of Q_(e))t.indexOf(i)<0&&GT.call(e,i)&&(n[i]=e[i]);return n};var $z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var wn=(e,t,n)=>bw(e,typeof t!="symbol"?t+"":t,n);var Ht=(e,t,n)=>new Promise((i,o)=>{var u=g=>{try{a(n.next(g))}catch(_){o(_)}},c=g=>{try{a(n.throw(g))}catch(_){o(_)}},a=g=>g.done?i(g.value):Promise.resolve(g.value).then(u,c);a((n=n.apply(e,t)).next())}),au=function(e,t){this[0]=e,this[1]=t},k0=(e,t,n)=>{var i=(c,a,g,_)=>{try{var S=n[c](a),N=(a=S.value)instanceof au,A=S.done;Promise.resolve(N?a[0]:a).then(E=>N?i(c==="return"?c:"next",a[1]?{done:E.done,value:E.value}:E,g,_):g({value:E,done:A})).catch(E=>i("throw",E,g,_))}catch(E){_(E)}},o=c=>u[c]=a=>new Promise((g,_)=>i(c,a,g,_)),u={};return n=n.apply(e,t),u[Ag("asyncIterator")]=()=>u,o("next"),o("throw"),o("return"),u},N0=e=>{var t=e[Ag("asyncIterator")],n=!1,i,o={};return t==null?(t=e[Ag("iterator")](),i=u=>o[u]=c=>t[u](c)):(t=t.call(e),i=u=>o[u]=c=>{if(n){if(n=!1,u==="throw")throw c;return c}return n=!0,{done:!1,value:new au(new Promise(a=>{var g=t[u](c);g instanceof Object||Uz("Object expected"),a(g)}),1)}}),o[Ag("iterator")]=()=>o,i("next"),"throw"in t?i("throw"):o.throw=u=>{throw u},"return"in t&&i("return"),o},vw=(e,t,n)=>(t=e[Ag("asyncIterator")])?t.call(e):(e=e[Ag("iterator")](),t={},n=(i,o)=>(o=e[i])&&(t[i]=u=>new Promise((c,a,g)=>(u=o.call(e,u),g=u.done,Promise.resolve(u.value).then(_=>c({value:_,done:g}),a)))),n("next"),n("return"),t);var Cae=$z(mn=>{function Hz(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(e,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Hx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ww={exports:{}},M0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT;function qz(){if(WT)return M0;WT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var a in o)a!=="key"&&(u[a]=o[a])}else u=o;return o=u.ref,{$$typeof:e,type:i,key:c,ref:o!==void 0?o:null,props:u}}return M0.Fragment=t,M0.jsx=n,M0.jsxs=n,M0}var ZT;function Gz(){return ZT||(ZT=1,ww.exports=qz()),ww.exports}var l=Gz(),Sw={exports:{}},Ni={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function Wz(){if(YT)return Ni;YT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.iterator;function A(fe){return fe===null||typeof fe!="object"?null:(fe=N&&fe[N]||fe["@@iterator"],typeof fe=="function"?fe:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,B={};function $(fe,Xe,tt){this.props=fe,this.context=Xe,this.refs=B,this.updater=tt||E}$.prototype.isReactComponent={},$.prototype.setState=function(fe,Xe){if(typeof fe!="object"&&typeof fe!="function"&&fe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,fe,Xe,"setState")},$.prototype.forceUpdate=function(fe){this.updater.enqueueForceUpdate(this,fe,"forceUpdate")};function G(){}G.prototype=$.prototype;function W(fe,Xe,tt){this.props=fe,this.context=Xe,this.refs=B,this.updater=tt||E}var J=W.prototype=new G;J.constructor=W,D(J,$.prototype),J.isPureReactComponent=!0;var Z=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},le=Object.prototype.hasOwnProperty;function _e(fe,Xe,tt,Ae,ot,ct){return tt=ct.ref,{$$typeof:e,type:fe,key:Xe,ref:tt!==void 0?tt:null,props:ct}}function de(fe,Xe){return _e(fe.type,Xe,void 0,void 0,void 0,fe.props)}function pe(fe){return typeof fe=="object"&&fe!==null&&fe.$$typeof===e}function Oe(fe){var Xe={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(tt){return Xe[tt]})}var He=/\/+/g;function We(fe,Xe){return typeof fe=="object"&&fe!==null&&fe.key!=null?Oe(""+fe.key):Xe.toString(36)}function st(){}function At(fe){switch(fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason;default:switch(typeof fe.status=="string"?fe.then(st,st):(fe.status="pending",fe.then(function(Xe){fe.status==="pending"&&(fe.status="fulfilled",fe.value=Xe)},function(Xe){fe.status==="pending"&&(fe.status="rejected",fe.reason=Xe)})),fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason}}throw fe}function vt(fe,Xe,tt,Ae,ot){var ct=typeof fe;(ct==="undefined"||ct==="boolean")&&(fe=null);var ut=!1;if(fe===null)ut=!0;else switch(ct){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(fe.$$typeof){case e:case t:ut=!0;break;case S:return ut=fe._init,vt(ut(fe._payload),Xe,tt,Ae,ot)}}if(ut)return ot=ot(fe),ut=Ae===""?"."+We(fe,0):Ae,Z(ot)?(tt="",ut!=null&&(tt=ut.replace(He,"$&/")+"/"),vt(ot,Xe,tt,"",function(Ye){return Ye})):ot!=null&&(pe(ot)&&(ot=de(ot,tt+(ot.key==null||fe&&fe.key===ot.key?"":(""+ot.key).replace(He,"$&/")+"/")+ut)),Xe.push(ot)),1;ut=0;var tn=Ae===""?".":Ae+":";if(Z(fe))for(var Ge=0;Ge<fe.length;Ge++)Ae=fe[Ge],ct=tn+We(Ae,Ge),ut+=vt(Ae,Xe,tt,ct,ot);else if(Ge=A(fe),typeof Ge=="function")for(fe=Ge.call(fe),Ge=0;!(Ae=fe.next()).done;)Ae=Ae.value,ct=tn+We(Ae,Ge++),ut+=vt(Ae,Xe,tt,ct,ot);else if(ct==="object"){if(typeof fe.then=="function")return vt(At(fe),Xe,tt,Ae,ot);throw Xe=String(fe),Error("Objects are not valid as a React child (found: "+(Xe==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":Xe)+"). If you meant to render a collection of children, use an array instead.")}return ut}function ze(fe,Xe,tt){if(fe==null)return fe;var Ae=[],ot=0;return vt(fe,Ae,"","",function(ct){return Xe.call(tt,ct,ot++)}),Ae}function Qe(fe){if(fe._status===-1){var Xe=fe._result;Xe=Xe(),Xe.then(function(tt){(fe._status===0||fe._status===-1)&&(fe._status=1,fe._result=tt)},function(tt){(fe._status===0||fe._status===-1)&&(fe._status=2,fe._result=tt)}),fe._status===-1&&(fe._status=0,fe._result=Xe)}if(fe._status===1)return fe._result.default;throw fe._result}var Je=typeof reportError=="function"?reportError:function(fe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof fe=="object"&&fe!==null&&typeof fe.message=="string"?String(fe.message):String(fe),error:fe});if(!window.dispatchEvent(Xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",fe);return}console.error(fe)};function Pt(){}return Ni.Children={map:ze,forEach:function(fe,Xe,tt){ze(fe,function(){Xe.apply(this,arguments)},tt)},count:function(fe){var Xe=0;return ze(fe,function(){Xe++}),Xe},toArray:function(fe){return ze(fe,function(Xe){return Xe})||[]},only:function(fe){if(!pe(fe))throw Error("React.Children.only expected to receive a single React element child.");return fe}},Ni.Component=$,Ni.Fragment=n,Ni.Profiler=o,Ni.PureComponent=W,Ni.StrictMode=i,Ni.Suspense=g,Ni.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Ni.__COMPILER_RUNTIME={__proto__:null,c:function(fe){return K.H.useMemoCache(fe)}},Ni.cache=function(fe){return function(){return fe.apply(null,arguments)}},Ni.cloneElement=function(fe,Xe,tt){if(fe==null)throw Error("The argument must be a React element, but you passed "+fe+".");var Ae=D({},fe.props),ot=fe.key,ct=void 0;if(Xe!=null)for(ut in Xe.ref!==void 0&&(ct=void 0),Xe.key!==void 0&&(ot=""+Xe.key),Xe)!le.call(Xe,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&Xe.ref===void 0||(Ae[ut]=Xe[ut]);var ut=arguments.length-2;if(ut===1)Ae.children=tt;else if(1<ut){for(var tn=Array(ut),Ge=0;Ge<ut;Ge++)tn[Ge]=arguments[Ge+2];Ae.children=tn}return _e(fe.type,ot,void 0,void 0,ct,Ae)},Ni.createContext=function(fe){return fe={$$typeof:c,_currentValue:fe,_currentValue2:fe,_threadCount:0,Provider:null,Consumer:null},fe.Provider=fe,fe.Consumer={$$typeof:u,_context:fe},fe},Ni.createElement=function(fe,Xe,tt){var Ae,ot={},ct=null;if(Xe!=null)for(Ae in Xe.key!==void 0&&(ct=""+Xe.key),Xe)le.call(Xe,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(ot[Ae]=Xe[Ae]);var ut=arguments.length-2;if(ut===1)ot.children=tt;else if(1<ut){for(var tn=Array(ut),Ge=0;Ge<ut;Ge++)tn[Ge]=arguments[Ge+2];ot.children=tn}if(fe&&fe.defaultProps)for(Ae in ut=fe.defaultProps,ut)ot[Ae]===void 0&&(ot[Ae]=ut[Ae]);return _e(fe,ct,void 0,void 0,null,ot)},Ni.createRef=function(){return{current:null}},Ni.forwardRef=function(fe){return{$$typeof:a,render:fe}},Ni.isValidElement=pe,Ni.lazy=function(fe){return{$$typeof:S,_payload:{_status:-1,_result:fe},_init:Qe}},Ni.memo=function(fe,Xe){return{$$typeof:_,type:fe,compare:Xe===void 0?null:Xe}},Ni.startTransition=function(fe){var Xe=K.T,tt={};K.T=tt;try{var Ae=fe(),ot=K.S;ot!==null&&ot(tt,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(Pt,Je)}catch(ct){Je(ct)}finally{K.T=Xe}},Ni.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Ni.use=function(fe){return K.H.use(fe)},Ni.useActionState=function(fe,Xe,tt){return K.H.useActionState(fe,Xe,tt)},Ni.useCallback=function(fe,Xe){return K.H.useCallback(fe,Xe)},Ni.useContext=function(fe){return K.H.useContext(fe)},Ni.useDebugValue=function(){},Ni.useDeferredValue=function(fe,Xe){return K.H.useDeferredValue(fe,Xe)},Ni.useEffect=function(fe,Xe,tt){var Ae=K.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ae.useEffect(fe,Xe)},Ni.useId=function(){return K.H.useId()},Ni.useImperativeHandle=function(fe,Xe,tt){return K.H.useImperativeHandle(fe,Xe,tt)},Ni.useInsertionEffect=function(fe,Xe){return K.H.useInsertionEffect(fe,Xe)},Ni.useLayoutEffect=function(fe,Xe){return K.H.useLayoutEffect(fe,Xe)},Ni.useMemo=function(fe,Xe){return K.H.useMemo(fe,Xe)},Ni.useOptimistic=function(fe,Xe){return K.H.useOptimistic(fe,Xe)},Ni.useReducer=function(fe,Xe,tt){return K.H.useReducer(fe,Xe,tt)},Ni.useRef=function(fe){return K.H.useRef(fe)},Ni.useState=function(fe){return K.H.useState(fe)},Ni.useSyncExternalStore=function(fe,Xe,tt){return K.H.useSyncExternalStore(fe,Xe,tt)},Ni.useTransition=function(){return K.H.useTransition()},Ni.version="19.1.0",Ni}var XT;function d1(){return XT||(XT=1,Sw.exports=Wz()),Sw.exports}var L=d1();const Rt=Hx(L),c4=Hz({__proto__:null,default:Rt},[L]);var jw={exports:{}},E0={},Cw={exports:{}},Tw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function Zz(){return KT||(KT=1,function(e){function t(ze,Qe){var Je=ze.length;ze.push(Qe);e:for(;0<Je;){var Pt=Je-1>>>1,fe=ze[Pt];if(0<o(fe,Qe))ze[Pt]=Qe,ze[Je]=fe,Je=Pt;else break e}}function n(ze){return ze.length===0?null:ze[0]}function i(ze){if(ze.length===0)return null;var Qe=ze[0],Je=ze.pop();if(Je!==Qe){ze[0]=Je;e:for(var Pt=0,fe=ze.length,Xe=fe>>>1;Pt<Xe;){var tt=2*(Pt+1)-1,Ae=ze[tt],ot=tt+1,ct=ze[ot];if(0>o(Ae,Je))ot<fe&&0>o(ct,Ae)?(ze[Pt]=ct,ze[ot]=Je,Pt=ot):(ze[Pt]=Ae,ze[tt]=Je,Pt=tt);else if(ot<fe&&0>o(ct,Je))ze[Pt]=ct,ze[ot]=Je,Pt=ot;else break e}}return Qe}function o(ze,Qe){var Je=ze.sortIndex-Qe.sortIndex;return Je!==0?Je:ze.id-Qe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var c=Date,a=c.now();e.unstable_now=function(){return c.now()-a}}var g=[],_=[],S=1,N=null,A=3,E=!1,D=!1,B=!1,$=!1,G=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate!="undefined"?setImmediate:null;function Z(ze){for(var Qe=n(_);Qe!==null;){if(Qe.callback===null)i(_);else if(Qe.startTime<=ze)i(_),Qe.sortIndex=Qe.expirationTime,t(g,Qe);else break;Qe=n(_)}}function K(ze){if(B=!1,Z(ze),!D)if(n(g)!==null)D=!0,le||(le=!0,We());else{var Qe=n(_);Qe!==null&&vt(K,Qe.startTime-ze)}}var le=!1,_e=-1,de=5,pe=-1;function Oe(){return $?!0:!(e.unstable_now()-pe<de)}function He(){if($=!1,le){var ze=e.unstable_now();pe=ze;var Qe=!0;try{e:{D=!1,B&&(B=!1,W(_e),_e=-1),E=!0;var Je=A;try{t:{for(Z(ze),N=n(g);N!==null&&!(N.expirationTime>ze&&Oe());){var Pt=N.callback;if(typeof Pt=="function"){N.callback=null,A=N.priorityLevel;var fe=Pt(N.expirationTime<=ze);if(ze=e.unstable_now(),typeof fe=="function"){N.callback=fe,Z(ze),Qe=!0;break t}N===n(g)&&i(g),Z(ze)}else i(g);N=n(g)}if(N!==null)Qe=!0;else{var Xe=n(_);Xe!==null&&vt(K,Xe.startTime-ze),Qe=!1}}break e}finally{N=null,A=Je,E=!1}Qe=void 0}}finally{Qe?We():le=!1}}}var We;if(typeof J=="function")We=function(){J(He)};else if(typeof MessageChannel!="undefined"){var st=new MessageChannel,At=st.port2;st.port1.onmessage=He,We=function(){At.postMessage(null)}}else We=function(){G(He,0)};function vt(ze,Qe){_e=G(function(){ze(e.unstable_now())},Qe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ze){ze.callback=null},e.unstable_forceFrameRate=function(ze){0>ze||125<ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<ze?Math.floor(1e3/ze):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_next=function(ze){switch(A){case 1:case 2:case 3:var Qe=3;break;default:Qe=A}var Je=A;A=Qe;try{return ze()}finally{A=Je}},e.unstable_requestPaint=function(){$=!0},e.unstable_runWithPriority=function(ze,Qe){switch(ze){case 1:case 2:case 3:case 4:case 5:break;default:ze=3}var Je=A;A=ze;try{return Qe()}finally{A=Je}},e.unstable_scheduleCallback=function(ze,Qe,Je){var Pt=e.unstable_now();switch(typeof Je=="object"&&Je!==null?(Je=Je.delay,Je=typeof Je=="number"&&0<Je?Pt+Je:Pt):Je=Pt,ze){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Je+fe,ze={id:S++,callback:Qe,priorityLevel:ze,startTime:Je,expirationTime:fe,sortIndex:-1},Je>Pt?(ze.sortIndex=Je,t(_,ze),n(g)===null&&ze===n(_)&&(B?(W(_e),_e=-1):B=!0,vt(K,Je-Pt))):(ze.sortIndex=fe,t(g,ze),D||E||(D=!0,le||(le=!0,We()))),ze},e.unstable_shouldYield=Oe,e.unstable_wrapCallback=function(ze){var Qe=A;return function(){var Je=A;A=Qe;try{return ze.apply(this,arguments)}finally{A=Je}}}}(Tw)),Tw}var QT;function Yz(){return QT||(QT=1,Cw.exports=Zz()),Cw.exports}var kw={exports:{}},ho={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function Xz(){if(JT)return ho;JT=1;var e=d1();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,S){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:N==null?null:""+N,children:g,containerInfo:_,implementation:S}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return ho.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ho.createPortal=function(g,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,S)},ho.flushSync=function(g){var _=c.T,S=i.p;try{if(c.T=null,i.p=2,g)return g()}finally{c.T=_,i.p=S,i.d.f()}},ho.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(g,_))},ho.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},ho.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var S=_.as,N=a(S,_.crossOrigin),A=typeof _.integrity=="string"?_.integrity:void 0,E=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?i.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:N,integrity:A,fetchPriority:E}):S==="script"&&i.d.X(g,{crossOrigin:N,integrity:A,fetchPriority:E,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},ho.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=a(_.as,_.crossOrigin);i.d.M(g,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(g)},ho.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,N=a(S,_.crossOrigin);i.d.L(g,S,{crossOrigin:N,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},ho.preloadModule=function(g,_){if(typeof g=="string")if(_){var S=a(_.as,_.crossOrigin);i.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(g)},ho.requestFormReset=function(g){i.d.r(g)},ho.unstable_batchedUpdates=function(g,_){return g(_)},ho.useFormState=function(g,_,S){return c.H.useFormState(g,_,S)},ho.useFormStatus=function(){return c.H.useHostTransitionStatus()},ho.version="19.1.0",ho}var ek;function u4(){if(ek)return kw.exports;ek=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kw.exports=Xz(),kw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tk;function Kz(){if(tk)return E0;tk=1;var e=Yz(),t=d1(),n=u4();function i(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function u(h){var m=h,b=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(b=m.return),h=m.return;while(h)}return m.tag===3?b:null}function c(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function a(h){if(u(h)!==h)throw Error(i(188))}function g(h){var m=h.alternate;if(!m){if(m=u(h),m===null)throw Error(i(188));return m!==h?null:h}for(var b=h,k=m;;){var z=b.return;if(z===null)break;var U=z.alternate;if(U===null){if(k=z.return,k!==null){b=k;continue}break}if(z.child===U.child){for(U=z.child;U;){if(U===b)return a(z),h;if(U===k)return a(z),m;U=U.sibling}throw Error(i(188))}if(b.return!==k.return)b=z,k=U;else{for(var oe=!1,we=z.child;we;){if(we===b){oe=!0,b=z,k=U;break}if(we===k){oe=!0,k=z,b=U;break}we=we.sibling}if(!oe){for(we=U.child;we;){if(we===b){oe=!0,b=U,k=z;break}if(we===k){oe=!0,k=U,b=z;break}we=we.sibling}if(!oe)throw Error(i(189))}}if(b.alternate!==k)throw Error(i(190))}if(b.tag!==3)throw Error(i(188));return b.stateNode.current===b?h:m}function _(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=_(h),m!==null)return m;h=h.sibling}return null}var S=Object.assign,N=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),J=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),pe=Symbol.for("react.activity"),Oe=Symbol.for("react.memo_cache_sentinel"),He=Symbol.iterator;function We(h){return h===null||typeof h!="object"?null:(h=He&&h[He]||h["@@iterator"],typeof h=="function"?h:null)}var st=Symbol.for("react.client.reference");function At(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===st?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case D:return"Fragment";case $:return"Profiler";case B:return"StrictMode";case K:return"Suspense";case le:return"SuspenseList";case pe:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case E:return"Portal";case J:return(h.displayName||"Context")+".Provider";case W:return(h._context.displayName||"Context")+".Consumer";case Z:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case _e:return m=h.displayName||null,m!==null?m:At(h.type)||"Memo";case de:m=h._payload,h=h._init;try{return At(h(m))}catch(b){}}return null}var vt=Array.isArray,ze=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Je={pending:!1,data:null,method:null,action:null},Pt=[],fe=-1;function Xe(h){return{current:h}}function tt(h){0>fe||(h.current=Pt[fe],Pt[fe]=null,fe--)}function Ae(h,m){fe++,Pt[fe]=h.current,h.current=m}var ot=Xe(null),ct=Xe(null),ut=Xe(null),tn=Xe(null);function Ge(h,m){switch(Ae(ut,m),Ae(ct,h),Ae(ot,null),m.nodeType){case 9:case 11:h=(h=m.documentElement)&&(h=h.namespaceURI)?b0(h):0;break;default:if(h=m.tagName,m=m.namespaceURI)m=b0(m),h=jf(m,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}tt(ot),Ae(ot,h)}function Ye(){tt(ot),tt(ct),tt(ut)}function zt(h){h.memoizedState!==null&&Ae(tn,h);var m=ot.current,b=jf(m,h.type);m!==b&&(Ae(ct,h),Ae(ot,b))}function Bt(h){ct.current===h&&(tt(ot),tt(ct)),tn.current===h&&(tt(tn),C._currentValue=Je)}var It=Object.prototype.hasOwnProperty,Lt=e.unstable_scheduleCallback,nn=e.unstable_cancelCallback,_n=e.unstable_shouldYield,Xn=e.unstable_requestPaint,Gn=e.unstable_now,gn=e.unstable_getCurrentPriorityLevel,ln=e.unstable_ImmediatePriority,Ue=e.unstable_UserBlockingPriority,ge=e.unstable_NormalPriority,ve=e.unstable_LowPriority,ht=e.unstable_IdlePriority,ft=e.log,qt=e.unstable_setDisableYieldValue,cn=null,Qt=null;function xt(h){if(typeof ft=="function"&&qt(h),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(cn,h)}catch(m){}}var je=Math.clz32?Math.clz32:be,ae=Math.log,ie=Math.LN2;function be(h){return h>>>=0,h===0?32:31-(ae(h)/ie|0)|0}var ke=256,Re=4194304;function Q(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function nt(h,m,b){var k=h.pendingLanes;if(k===0)return 0;var z=0,U=h.suspendedLanes,oe=h.pingedLanes;h=h.warmLanes;var we=k&134217727;return we!==0?(k=we&~U,k!==0?z=Q(k):(oe&=we,oe!==0?z=Q(oe):b||(b=we&~h,b!==0&&(z=Q(b))))):(we=k&~U,we!==0?z=Q(we):oe!==0?z=Q(oe):b||(b=k&~h,b!==0&&(z=Q(b)))),z===0?0:m!==0&&m!==z&&(m&U)===0&&(U=z&-z,b=m&-m,U>=b||U===32&&(b&4194048)!==0)?m:z}function et(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function Tt(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gt(){var h=ke;return ke<<=1,(ke&4194048)===0&&(ke=256),h}function Ot(){var h=Re;return Re<<=1,(Re&62914560)===0&&(Re=4194304),h}function bn(h){for(var m=[],b=0;31>b;b++)m.push(h);return m}function Tn(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function dt(h,m,b,k,z,U){var oe=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var we=h.entanglements,$e=h.expirationTimes,mt=h.hiddenUpdates;for(b=oe&~b;0<b;){var $t=31-je(b),Jt=1<<$t;we[$t]=0,$e[$t]=-1;var Nt=mt[$t];if(Nt!==null)for(mt[$t]=null,$t=0;$t<Nt.length;$t++){var Dt=Nt[$t];Dt!==null&&(Dt.lane&=-536870913)}b&=~Jt}k!==0&&Ct(h,k,0),U!==0&&z===0&&h.tag!==0&&(h.suspendedLanes|=U&~(oe&~m))}function Ct(h,m,b){h.pendingLanes|=m,h.suspendedLanes&=~m;var k=31-je(m);h.entangledLanes|=m,h.entanglements[k]=h.entanglements[k]|1073741824|b&4194090}function Wt(h,m){var b=h.entangledLanes|=m;for(h=h.entanglements;b;){var k=31-je(b),z=1<<k;z&m|h[k]&m&&(h[k]|=m),b&=~z}}function Vt(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function vn(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Gi(){var h=Qe.p;return h!==0?h:(h=window.event,h===void 0?32:Ze(h.type))}function Jn(h,m){var b=Qe.p;try{return Qe.p=h,m()}finally{Qe.p=b}}var ai=Math.random().toString(36).slice(2),Hn="__reactFiber$"+ai,Bn="__reactProps$"+ai,xi="__reactContainer$"+ai,Xt="__reactEvents$"+ai,lt="__reactListeners$"+ai,Ri="__reactHandles$"+ai,li="__reactResources$"+ai,Wi="__reactMarker$"+ai;function us(h){delete h[Hn],delete h[Bn],delete h[Xt],delete h[lt],delete h[Ri]}function sn(h){var m=h[Hn];if(m)return m;for(var b=h.parentNode;b;){if(m=b[xi]||b[Hn]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(h=w0(h);h!==null;){if(b=h[Hn])return b;h=w0(h)}return m}h=b,b=h.parentNode}return null}function ei(h){if(h=h[Hn]||h[xi]){var m=h.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return h}return null}function On(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h.stateNode;throw Error(i(33))}function vs(h){var m=h[li];return m||(m=h[li]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function Ii(h){h[Wi]=!0}var Yr=new Set,Vn={};function Xr(h,m){Pr(h,m),Pr(h+"Capture",m)}function Pr(h,m){for(Vn[h]=m,h=0;h<m.length;h++)Yr.add(m[h])}var da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ds={},Kr={};function Na(h){return It.call(Kr,h)?!0:It.call(ds,h)?!1:da.test(h)?Kr[h]=!0:(ds[h]=!0,!1)}function Di(h,m,b){if(Na(m))if(b===null)h.removeAttribute(m);else{switch(typeof b){case"undefined":case"function":case"symbol":h.removeAttribute(m);return;case"boolean":var k=m.toLowerCase().slice(0,5);if(k!=="data-"&&k!=="aria-"){h.removeAttribute(m);return}}h.setAttribute(m,""+b)}}function es(h,m,b){if(b===null)h.removeAttribute(m);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(m);return}h.setAttribute(m,""+b)}}function ti(h,m,b,k){if(k===null)h.removeAttribute(b);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(b);return}h.setAttributeNS(m,b,""+k)}}var ml,gl;function Ma(h){if(ml===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);ml=m&&m[1]||"",gl=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ml+h+gl}var qa=!1;function ha(h,m){if(!h||qa)return"";qa=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var k={DetermineComponentFrameRoot:function(){try{if(m){var Jt=function(){throw Error()};if(Object.defineProperty(Jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Jt,[])}catch(Dt){var Nt=Dt}Reflect.construct(h,[],Jt)}else{try{Jt.call()}catch(Dt){Nt=Dt}h.call(Jt.prototype)}}else{try{throw Error()}catch(Dt){Nt=Dt}(Jt=h())&&typeof Jt.catch=="function"&&Jt.catch(function(){})}}catch(Dt){if(Dt&&Nt&&typeof Dt.stack=="string")return[Dt.stack,Nt.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=k.DetermineComponentFrameRoot(),oe=U[0],we=U[1];if(oe&&we){var $e=oe.split(`
`),mt=we.split(`
`);for(z=k=0;k<$e.length&&!$e[k].includes("DetermineComponentFrameRoot");)k++;for(;z<mt.length&&!mt[z].includes("DetermineComponentFrameRoot");)z++;if(k===$e.length||z===mt.length)for(k=$e.length-1,z=mt.length-1;1<=k&&0<=z&&$e[k]!==mt[z];)z--;for(;1<=k&&0<=z;k--,z--)if($e[k]!==mt[z]){if(k!==1||z!==1)do if(k--,z--,0>z||$e[k]!==mt[z]){var $t=`
`+$e[k].replace(" at new "," at ");return h.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",h.displayName)),$t}while(1<=k&&0<=z);break}}}finally{qa=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?Ma(b):""}function zh(h){switch(h.tag){case 26:case 27:case 5:return Ma(h.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 15:return ha(h.type,!1);case 11:return ha(h.type.render,!1);case 1:return ha(h.type,!0);case 31:return Ma("Activity");default:return""}}function Cu(h){try{var m="";do m+=zh(h),h=h.return;while(h);return m}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function Qr(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function yl(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Cd(h){var m=yl(h)?"checked":"value",b=Object.getOwnPropertyDescriptor(h.constructor.prototype,m),k=""+h[m];if(!h.hasOwnProperty(m)&&typeof b!="undefined"&&typeof b.get=="function"&&typeof b.set=="function"){var z=b.get,U=b.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return z.call(this)},set:function(oe){k=""+oe,U.call(this,oe)}}),Object.defineProperty(h,m,{enumerable:b.enumerable}),{getValue:function(){return k},setValue:function(oe){k=""+oe},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function Sc(h){h._valueTracker||(h._valueTracker=Cd(h))}function Vo(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var b=m.getValue(),k="";return h&&(k=yl(h)?h.checked?"true":"false":h.value),h=k,h!==b?(m.setValue(h),!0):!1}function jc(h){if(h=h||(typeof document!="undefined"?document:void 0),typeof h=="undefined")return null;try{return h.activeElement||h.body}catch(m){return h.body}}var Ih=/[\n"\\]/g;function Rr(h){return h.replace(Ih,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function wo(h,m,b,k,z,U,oe,we){h.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?h.type=oe:h.removeAttribute("type"),m!=null?oe==="number"?(m===0&&h.value===""||h.value!=m)&&(h.value=""+Qr(m)):h.value!==""+Qr(m)&&(h.value=""+Qr(m)):oe!=="submit"&&oe!=="reset"||h.removeAttribute("value"),m!=null?ku(h,oe,Qr(m)):b!=null?ku(h,oe,Qr(b)):k!=null&&h.removeAttribute("value"),z==null&&U!=null&&(h.defaultChecked=!!U),z!=null&&(h.checked=z&&typeof z!="function"&&typeof z!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?h.name=""+Qr(we):h.removeAttribute("name")}function Tu(h,m,b,k,z,U,oe,we){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(h.type=U),m!=null||b!=null){if(!(U!=="submit"&&U!=="reset"||m!=null))return;b=b!=null?""+Qr(b):"",m=m!=null?""+Qr(m):b,we||m===h.value||(h.value=m),h.defaultValue=m}k=k!=null?k:z,k=typeof k!="function"&&typeof k!="symbol"&&!!k,h.checked=we?h.checked:!!k,h.defaultChecked=!!k,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(h.name=oe)}function ku(h,m,b){m==="number"&&jc(h.ownerDocument)===h||h.defaultValue===""+b||(h.defaultValue=""+b)}function Jr(h,m,b,k){if(h=h.options,m){m={};for(var z=0;z<b.length;z++)m["$"+b[z]]=!0;for(b=0;b<h.length;b++)z=m.hasOwnProperty("$"+h[b].value),h[b].selected!==z&&(h[b].selected=z),z&&k&&(h[b].defaultSelected=!0)}else{for(b=""+Qr(b),m=null,z=0;z<h.length;z++){if(h[z].value===b){h[z].selected=!0,k&&(h[z].defaultSelected=!0);return}m!==null||h[z].disabled||(m=h[z])}m!==null&&(m.selected=!0)}}function xl(h,m,b){if(m!=null&&(m=""+Qr(m),m!==h.value&&(h.value=m),b==null)){h.defaultValue!==m&&(h.defaultValue=m);return}h.defaultValue=b!=null?""+Qr(b):""}function Td(h,m,b,k){if(m==null){if(k!=null){if(b!=null)throw Error(i(92));if(vt(k)){if(1<k.length)throw Error(i(93));k=k[0]}b=k}b==null&&(b=""),m=b}b=Qr(m),h.defaultValue=b,k=h.textContent,k===b&&k!==""&&k!==null&&(h.value=k)}function Ga(h,m){if(m){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=m;return}}h.textContent=m}var Vl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nu(h,m,b){var k=m.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?k?h.setProperty(m,""):m==="float"?h.cssFloat="":h[m]="":k?h.setProperty(m,b):typeof b!="number"||b===0||Vl.has(m)?m==="float"?h.cssFloat=b:h[m]=(""+b).trim():h[m]=b+"px"}function lr(h,m,b){if(m!=null&&typeof m!="object")throw Error(i(62));if(h=h.style,b!=null){for(var k in b)!b.hasOwnProperty(k)||m!=null&&m.hasOwnProperty(k)||(k.indexOf("--")===0?h.setProperty(k,""):k==="float"?h.cssFloat="":h[k]="");for(var z in m)k=m[z],m.hasOwnProperty(z)&&b[z]!==k&&Nu(h,z,k)}else for(var U in m)m.hasOwnProperty(U)&&Nu(h,U,m[U])}function ci(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var So=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(h){return jr.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var ui=null;function jo(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Ea=null,Aa=null;function pr(h){var m=ei(h);if(m&&(h=m.stateNode)){var b=h[Bn]||null;e:switch(h=m.stateNode,m.type){case"input":if(wo(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),m=b.name,b.type==="radio"&&m!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Rr(""+m)+'"][type="radio"]'),m=0;m<b.length;m++){var k=b[m];if(k!==h&&k.form===h.form){var z=k[Bn]||null;if(!z)throw Error(i(90));wo(k,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(m=0;m<b.length;m++)k=b[m],k.form===h.form&&Vo(k)}break e;case"textarea":xl(h,b.value,b.defaultValue);break e;case"select":m=b.value,m!=null&&Jr(h,!!b.multiple,m,!1)}}}var Ms=!1;function Ls(h,m,b){if(Ms)return h(m,b);Ms=!0;try{var k=h(m);return k}finally{if(Ms=!1,(Ea!==null||Aa!==null)&&(rg(),Ea&&(m=Ea,h=Aa,Aa=Ea=null,pr(m),h)))for(m=0;m<h.length;m++)pr(h[m])}}function ws(h,m){var b=h.stateNode;if(b===null)return null;var k=b[Bn]||null;if(k===null)return null;b=k[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(h=h.type,k=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!k;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(i(231,m,typeof b));return b}var vi=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Co=!1;if(vi)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Co=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch(h){Co=!1}var gs=null,rs=null,Pa=null;function Mi(){if(Pa)return Pa;var h,m=rs,b=m.length,k,z="value"in gs?gs.value:gs.textContent,U=z.length;for(h=0;h<b&&m[h]===z[h];h++);var oe=b-h;for(k=1;k<=oe&&m[b-k]===z[U-k];k++);return Pa=z.slice(h,1<k?1-k:void 0)}function Zi(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function di(){return!0}function Kn(){return!1}function Ys(h){function m(b,k,z,U,oe){this._reactName=b,this._targetInst=z,this.type=k,this.nativeEvent=U,this.target=oe,this.currentTarget=null;for(var we in h)h.hasOwnProperty(we)&&(b=h[we],this[we]=b?b(U):U[we]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?di:Kn,this.isPropagationStopped=Kn,this}return S(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),m}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Ys(Yn),Es=S({},Yn,{view:0,detail:0}),Ss=Ys(Es),re,me,Ne,Pe=S({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:As,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Ne&&(Ne&&h.type==="mousemove"?(re=h.screenX-Ne.screenX,me=h.screenY-Ne.screenY):me=re=0,Ne=h),re)},movementY:function(h){return"movementY"in h?h.movementY:me}}),pt=Ys(Pe),yt=S({},Pe,{dataTransfer:0}),kt=Ys(yt),dn=S({},Es,{relatedTarget:0}),kn=Ys(dn),yn=S({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Cn=Ys(yn),Un=S({},Yn,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),oi=Ys(Un),ri=S({},Yn,{data:0}),qn=Ys(ri),Rn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Si={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ts(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=Si[h])?!!m[h]:!1}function As(){return ts}var Uo=S({},Es,{key:function(h){if(h.key){var m=Rn[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=Zi(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?mr[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:As,charCode:function(h){return h.type==="keypress"?Zi(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Zi(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Za=Ys(Uo),Ya=S({},Pe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fa=Ys(Ya),Dr=S({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:As}),kd=Ys(Dr),Oh=S({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iy=Ys(Oh),np=S({},Pe,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Oy=Ys(np),Lh=S({},Yn,{newState:0,oldState:0}),ip=Ys(Lh),Fh=[9,13,27,32],Ul=vi&&"CompositionEvent"in window,Cc=null;vi&&"documentMode"in document&&(Cc=document.documentMode);var To=vi&&"TextEvent"in window&&!Cc,sp=vi&&(!Ul||Cc&&8<Cc&&11>=Cc),Bh=" ",Tc=!1;function Mu(h,m){switch(h){case"keyup":return Fh.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Im(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var bl=!1;function Ly(h,m){switch(h){case"compositionend":return Im(m);case"keypress":return m.which!==32?null:(Tc=!0,Bh);case"textInput":return h=m.data,h===Bh&&Tc?null:h;default:return null}}function Eu(h,m){if(bl)return h==="compositionend"||!Ul&&Mu(h,m)?(h=Mi(),Pa=rs=gs=null,bl=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return sp&&m.locale!=="ko"?null:m.data;default:return null}}var Om={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vh(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!Om[h.type]:m==="textarea"}function rp(h,m,b,k){Ea?Aa?Aa.push(k):Aa=[k]:Ea=k,m=th(m,"onChange"),0<m.length&&(b=new _l("onChange","change",null,b,k),h.push({event:b,listeners:m}))}var Au=null,kc=null;function Lm(h){L_(h,0)}function Nd(h){var m=On(h);if(Vo(m))return h}function Pu(h,m){if(h==="change")return m}var ap=!1;if(vi){var vl;if(vi){var Uh="oninput"in document;if(!Uh){var op=document.createElement("div");op.setAttribute("oninput","return;"),Uh=typeof op.oninput=="function"}vl=Uh}else vl=!1;ap=vl&&(!document.documentMode||9<document.documentMode)}function $l(){Au&&(Au.detachEvent("onpropertychange",lp),kc=Au=null)}function lp(h){if(h.propertyName==="value"&&Nd(kc)){var m=[];rp(m,kc,h,jo(h)),Ls(Lm,m)}}function $h(h,m,b){h==="focusin"?($l(),Au=m,kc=b,Au.attachEvent("onpropertychange",lp)):h==="focusout"&&$l()}function Fy(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Nd(kc)}function Fm(h,m){if(h==="click")return Nd(m)}function cp(h,m){if(h==="input"||h==="change")return Nd(m)}function Bm(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var pa=typeof Object.is=="function"?Object.is:Bm;function Nc(h,m){if(pa(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var b=Object.keys(h),k=Object.keys(m);if(b.length!==k.length)return!1;for(k=0;k<b.length;k++){var z=b[k];if(!It.call(m,z)||!pa(h[z],m[z]))return!1}return!0}function Hh(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Md(h,m){var b=Hh(h);h=0;for(var k;b;){if(b.nodeType===3){if(k=h+b.textContent.length,h<=m&&k>=m)return{node:b,offset:m-h};h=k}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Hh(b)}}function $o(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?$o(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function qh(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var m=jc(h.document);m instanceof h.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch(k){b=!1}if(b)h=m.contentWindow;else break;m=jc(h.document)}return m}function Ed(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}var zi=vi&&"documentMode"in document&&11>=document.documentMode,Mc=null,Ad=null,ko=null,Pd=!1;function Vm(h,m,b){var k=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Pd||Mc==null||Mc!==jc(k)||(k=Mc,"selectionStart"in k&&Ed(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),ko&&Nc(ko,k)||(ko=k,k=th(Ad,"onSelect"),0<k.length&&(m=new _l("onSelect","select",null,m,b),h.push({event:m,listeners:k}),m.target=Mc)))}function Ec(h,m){var b={};return b[h.toLowerCase()]=m.toLowerCase(),b["Webkit"+h]="webkit"+m,b["Moz"+h]="moz"+m,b}var Ru={animationend:Ec("Animation","AnimationEnd"),animationiteration:Ec("Animation","AnimationIteration"),animationstart:Ec("Animation","AnimationStart"),transitionrun:Ec("Transition","TransitionRun"),transitionstart:Ec("Transition","TransitionStart"),transitioncancel:Ec("Transition","TransitionCancel"),transitionend:Ec("Transition","TransitionEnd")},up={},dp={};vi&&(dp=document.createElement("div").style,"AnimationEvent"in window||(delete Ru.animationend.animation,delete Ru.animationiteration.animation,delete Ru.animationstart.animation),"TransitionEvent"in window||delete Ru.transitionend.transition);function Ac(h){if(up[h])return up[h];if(!Ru[h])return h;var m=Ru[h],b;for(b in m)if(m.hasOwnProperty(b)&&b in dp)return up[h]=m[b];return h}var hp=Ac("animationend"),Rd=Ac("animationiteration"),Dd=Ac("animationstart"),Gh=Ac("transitionrun"),fp=Ac("transitionstart"),Pc=Ac("transitioncancel"),Du=Ac("transitionend"),Rc=new Map,ma="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ma.push("scrollEnd");function Xa(h,m){Rc.set(h,m),Xr(m,[h])}var pp=new WeakMap;function ga(h,m){if(typeof h=="object"&&h!==null){var b=pp.get(h);return b!==void 0?b:(m={value:h,source:m,stack:Cu(m)},pp.set(h,m),m)}return{value:h,source:m,stack:Cu(m)}}var gr=[],wl=0,zu=0;function Hl(){for(var h=wl,m=zu=wl=0;m<h;){var b=gr[m];gr[m++]=null;var k=gr[m];gr[m++]=null;var z=gr[m];gr[m++]=null;var U=gr[m];if(gr[m++]=null,k!==null&&z!==null){var oe=k.pending;oe===null?z.next=z:(z.next=oe.next,oe.next=z),k.pending=z}U!==0&&zc(b,z,U)}}function Dc(h,m,b,k){gr[wl++]=h,gr[wl++]=m,gr[wl++]=b,gr[wl++]=k,zu|=k,h.lanes|=k,h=h.alternate,h!==null&&(h.lanes|=k)}function Wh(h,m,b,k){return Dc(h,m,b,k),zd(h)}function No(h,m){return Dc(h,null,null,m),zd(h)}function zc(h,m,b){h.lanes|=b;var k=h.alternate;k!==null&&(k.lanes|=b);for(var z=!1,U=h.return;U!==null;)U.childLanes|=b,k=U.alternate,k!==null&&(k.childLanes|=b),U.tag===22&&(h=U.stateNode,h===null||h._visibility&1||(z=!0)),h=U,U=U.return;return h.tag===3?(U=h.stateNode,z&&m!==null&&(z=31-je(b),h=U.hiddenUpdates,k=h[z],k===null?h[z]=[m]:k.push(m),m.lane=b|536870912),U):null}function zd(h){if(50<xf)throw xf=0,c0=null,Error(i(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}var Ho={};function _i(h,m,b,k){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(h,m,b,k){return new _i(h,m,b,k)}function mp(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Mo(h,m){var b=h.alternate;return b===null?(b=zr(h.tag,m,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=m,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,m=h.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Iu(h,m){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,m=b.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function Zh(h,m,b,k,z,U){var oe=0;if(k=h,typeof h=="function")mp(h)&&(oe=1);else if(typeof h=="string")oe=Gp(h,b,ot.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case pe:return h=zr(31,b,m,z),h.elementType=pe,h.lanes=U,h;case D:return qo(b.children,z,U,m);case B:oe=8,z|=24;break;case $:return h=zr(12,b,m,z|2),h.elementType=$,h.lanes=U,h;case K:return h=zr(13,b,m,z),h.elementType=K,h.lanes=U,h;case le:return h=zr(19,b,m,z),h.elementType=le,h.lanes=U,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case G:case J:oe=10;break e;case W:oe=9;break e;case Z:oe=11;break e;case _e:oe=14;break e;case de:oe=16,k=null;break e}oe=29,b=Error(i(130,h===null?"null":typeof h,"")),k=null}return m=zr(oe,b,m,z),m.elementType=h,m.type=k,m.lanes=U,m}function qo(h,m,b,k){return h=zr(7,h,k,m),h.lanes=b,h}function Id(h,m,b){return h=zr(6,h,null,m),h.lanes=b,h}function gp(h,m,b){return m=zr(4,h.children!==null?h.children:[],h.key,m),m.lanes=b,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}var ql=[],Sl=0,Ic=null,Oc=0,ea=[],ya=0,Go=null,Ka=1,Ra="";function Da(h,m){ql[Sl++]=Oc,ql[Sl++]=Ic,Ic=h,Oc=m}function Od(h,m,b){ea[ya++]=Ka,ea[ya++]=Ra,ea[ya++]=Go,Go=h;var k=Ka;h=Ra;var z=32-je(k)-1;k&=~(1<<z),b+=1;var U=32-je(m)+z;if(30<U){var oe=z-z%5;U=(k&(1<<oe)-1).toString(32),k>>=oe,z-=oe,Ka=1<<32-je(m)+z|b<<z|k,Ra=U+h}else Ka=1<<U|b<<z|k,Ra=h}function yp(h){h.return!==null&&(Da(h,1),Od(h,1,0))}function Lc(h){for(;h===Ic;)Ic=ql[--Sl],ql[Sl]=null,Oc=ql[--Sl],ql[Sl]=null;for(;h===Go;)Go=ea[--ya],ea[ya]=null,Ra=ea[--ya],ea[ya]=null,Ka=ea[--ya],ea[ya]=null}var ta=null,Ps=null,Ei=!1,Wo=null,za=!1,Ou=Error(i(519));function Qa(h){var m=Error(i(418,""));throw Ir(ga(m,h)),Ou}function Lu(h){var m=h.stateNode,b=h.type,k=h.memoizedProps;switch(m[Hn]=h,m[Bn]=k,b){case"dialog":Ti("cancel",m),Ti("close",m);break;case"iframe":case"object":case"embed":Ti("load",m);break;case"video":case"audio":for(b=0;b<rd.length;b++)Ti(rd[b],m);break;case"source":Ti("error",m);break;case"img":case"image":case"link":Ti("error",m),Ti("load",m);break;case"details":Ti("toggle",m);break;case"input":Ti("invalid",m),Tu(m,k.value,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name,!0),Sc(m);break;case"select":Ti("invalid",m);break;case"textarea":Ti("invalid",m),Td(m,k.value,k.defaultValue,k.children),Sc(m)}b=k.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||m.textContent===""+b||k.suppressHydrationWarning===!0||V_(m.textContent,b)?(k.popover!=null&&(Ti("beforetoggle",m),Ti("toggle",m)),k.onScroll!=null&&Ti("scroll",m),k.onScrollEnd!=null&&Ti("scrollend",m),k.onClick!=null&&(m.onclick=wf),m=!0):m=!1,m||Qa(h)}function Ld(h){for(ta=h.return;ta;)switch(ta.tag){case 5:case 13:za=!1;return;case 27:case 3:za=!0;return;default:ta=ta.return}}function Fu(h){if(h!==ta)return!1;if(!Ei)return Ld(h),Ei=!0,!1;var m=h.tag,b;if((b=m!==3&&m!==27)&&((b=m===5)&&(b=h.type,b=!(b!=="form"&&b!=="button")||wg(h.type,h.memoizedProps)),b=!b),b&&Ps&&Qa(h),Ld(h),m===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));e:{for(h=h.nextSibling,m=0;h;){if(h.nodeType===8)if(b=h.data,b==="/$"){if(m===0){Ps=al(h.nextSibling);break e}m--}else b!=="$"&&b!=="$!"&&b!=="$?"||m++;h=h.nextSibling}Ps=null}}else m===27?(m=Ps,tu(h.type)?(h=jg,jg=null,Ps=h):Ps=m):Ps=ta?al(h.stateNode.nextSibling):null;return!0}function hs(){Ps=ta=null,Ei=!1}function Gl(){var h=Wo;return h!==null&&(lo===null?lo=h:lo.push.apply(lo,h),Wo=null),h}function Ir(h){Wo===null?Wo=[h]:Wo.push(h)}var Fd=Xe(null),Zo=null,Eo=null;function xa(h,m,b){Ae(Fd,m._currentValue),m._currentValue=b}function _a(h){h._currentValue=Fd.current,tt(Fd)}function Fc(h,m,b){for(;h!==null;){var k=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,k!==null&&(k.childLanes|=m)):k!==null&&(k.childLanes&m)!==m&&(k.childLanes|=m),h===b)break;h=h.return}}function Bu(h,m,b,k){var z=h.child;for(z!==null&&(z.return=h);z!==null;){var U=z.dependencies;if(U!==null){var oe=z.child;U=U.firstContext;e:for(;U!==null;){var we=U;U=z;for(var $e=0;$e<m.length;$e++)if(we.context===m[$e]){U.lanes|=b,we=U.alternate,we!==null&&(we.lanes|=b),Fc(U.return,b,h),k||(oe=null);break e}U=we.next}}else if(z.tag===18){if(oe=z.return,oe===null)throw Error(i(341));oe.lanes|=b,U=oe.alternate,U!==null&&(U.lanes|=b),Fc(oe,b,h),oe=null}else oe=z.child;if(oe!==null)oe.return=z;else for(oe=z;oe!==null;){if(oe===h){oe=null;break}if(z=oe.sibling,z!==null){z.return=oe.return,oe=z;break}oe=oe.return}z=oe}}function Bc(h,m,b,k){h=null;for(var z=m,U=!1;z!==null;){if(!U){if((z.flags&524288)!==0)U=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var oe=z.alternate;if(oe===null)throw Error(i(387));if(oe=oe.memoizedProps,oe!==null){var we=z.type;pa(z.pendingProps.value,oe.value)||(h!==null?h.push(we):h=[we])}}else if(z===tn.current){if(oe=z.alternate,oe===null)throw Error(i(387));oe.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(h!==null?h.push(C):h=[C])}z=z.return}h!==null&&Bu(m,h,b,k),m.flags|=262144}function Bd(h){for(h=h.firstContext;h!==null;){if(!pa(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function jl(h){Zo=h,Eo=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function yr(h){return Wl(Zo,h)}function Cl(h,m){return Zo===null&&jl(h),Wl(h,m)}function Wl(h,m){var b=m._currentValue;if(m={context:m,memoizedValue:b,next:null},Eo===null){if(h===null)throw Error(i(308));Eo=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else Eo=Eo.next=m;return b}var Um=typeof AbortController!="undefined"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(b,k){h.push(k)}};this.abort=function(){m.aborted=!0,h.forEach(function(b){return b()})}},$m=e.unstable_scheduleCallback,Hm=e.unstable_NormalPriority,er={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new Um,data:new Map,refCount:0}}function Yo(h){h.refCount--,h.refCount===0&&$m(Hm,function(){h.controller.abort()})}var Xo=null,Or=0,Ia=0,Zl=null;function Ja(h,m){if(Xo===null){var b=Xo=[];Or=0,Ia=p0(),Zl={status:"pending",value:void 0,then:function(k){b.push(k)}}}return Or++,m.then(eo,eo),m}function eo(){if(--Or===0&&Xo!==null){Zl!==null&&(Zl.status="fulfilled");var h=Xo;Xo=null,Ia=0,Zl=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function Vu(h,m){var b=[],k={status:"pending",value:null,reason:null,then:function(z){b.push(z)}};return h.then(function(){k.status="fulfilled",k.value=m;for(var z=0;z<b.length;z++)(0,b[z])(m)},function(z){for(k.status="rejected",k.reason=z,z=0;z<b.length;z++)(0,b[z])(void 0)}),k}var Oa=ze.S;ze.S=function(h,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Ja(h,m),Oa!==null&&Oa(h,m)};var ba=Xe(null);function xp(){var h=ba.current;return h!==null?h:ks.pooledCache}function Uu(h,m){m===null?Ae(ba,ba.current):Ae(ba,m.pool)}function qm(){var h=xp();return h===null?null:{parent:er._currentValue,pool:h}}var Tl=Error(i(460)),_p=Error(i(474)),Yl=Error(i(542)),Ao={then:function(){}};function xn(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Vd(){}function Xh(h,m,b){switch(b=h[b],b===void 0?h.push(m):b!==m&&(m.then(Vd,Vd),m=b),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Xl(h),h;default:if(typeof m.status=="string")m.then(Vd,Vd);else{if(h=ks,h!==null&&100<h.shellSuspendCounter)throw Error(i(482));h=m,h.status="pending",h.then(function(k){if(m.status==="pending"){var z=m;z.status="fulfilled",z.value=k}},function(k){if(m.status==="pending"){var z=m;z.status="rejected",z.reason=k}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Xl(h),h}throw kl=m,Tl}}var kl=null;function $u(){if(kl===null)throw Error(i(459));var h=kl;return kl=null,h}function Xl(h){if(h===Tl||h===Yl)throw Error(i(483))}var La=!1;function mi(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hu(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Nl(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Po(h,m,b){var k=h.updateQueue;if(k===null)return null;if(k=k.shared,(ls&2)!==0){var z=k.pending;return z===null?m.next=m:(m.next=z.next,z.next=m),k.pending=m,m=zd(h),zc(h,null,b),m}return Dc(h,k,m,b),zd(h)}function Vc(h,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194048)!==0)){var k=m.lanes;k&=h.pendingLanes,b|=k,m.lanes=b,Wt(h,b)}}function Kh(h,m){var b=h.updateQueue,k=h.alternate;if(k!==null&&(k=k.updateQueue,b===k)){var z=null,U=null;if(b=b.firstBaseUpdate,b!==null){do{var oe={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};U===null?z=U=oe:U=U.next=oe,b=b.next}while(b!==null);U===null?z=U=m:U=U.next=m}else z=U=m;b={baseState:k.baseState,firstBaseUpdate:z,lastBaseUpdate:U,shared:k.shared,callbacks:k.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=m:h.next=m,b.lastBaseUpdate=m}var Qh=!1;function Kl(){if(Qh){var h=Zl;if(h!==null)throw h}}function qu(h,m,b,k){Qh=!1;var z=h.updateQueue;La=!1;var U=z.firstBaseUpdate,oe=z.lastBaseUpdate,we=z.shared.pending;if(we!==null){z.shared.pending=null;var $e=we,mt=$e.next;$e.next=null,oe===null?U=mt:oe.next=mt,oe=$e;var $t=h.alternate;$t!==null&&($t=$t.updateQueue,we=$t.lastBaseUpdate,we!==oe&&(we===null?$t.firstBaseUpdate=mt:we.next=mt,$t.lastBaseUpdate=$e))}if(U!==null){var Jt=z.baseState;oe=0,$t=mt=$e=null,we=U;do{var Nt=we.lane&-536870913,Dt=Nt!==we.lane;if(Dt?(Ci&Nt)===Nt:(k&Nt)===Nt){Nt!==0&&Nt===Ia&&(Qh=!0),$t!==null&&($t=$t.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var ii=h,Zn=we;Nt=m;var $i=b;switch(Zn.tag){case 1:if(ii=Zn.payload,typeof ii=="function"){Jt=ii.call($i,Jt,Nt);break e}Jt=ii;break e;case 3:ii.flags=ii.flags&-65537|128;case 0:if(ii=Zn.payload,Nt=typeof ii=="function"?ii.call($i,Jt,Nt):ii,Nt==null)break e;Jt=S({},Jt,Nt);break e;case 2:La=!0}}Nt=we.callback,Nt!==null&&(h.flags|=64,Dt&&(h.flags|=8192),Dt=z.callbacks,Dt===null?z.callbacks=[Nt]:Dt.push(Nt))}else Dt={lane:Nt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},$t===null?(mt=$t=Dt,$e=Jt):$t=$t.next=Dt,oe|=Nt;if(we=we.next,we===null){if(we=z.shared.pending,we===null)break;Dt=we,we=Dt.next,Dt.next=null,z.lastBaseUpdate=Dt,z.shared.pending=null}}while(!0);$t===null&&($e=Jt),z.baseState=$e,z.firstBaseUpdate=mt,z.lastBaseUpdate=$t,U===null&&(z.shared.lanes=0),il|=oe,h.lanes=oe,h.memoizedState=Jt}}function bp(h,m){if(typeof h!="function")throw Error(i(191,h));h.call(m)}function vp(h,m){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)bp(b[h],m)}var Uc=Xe(null),Ud=Xe(0);function Ml(h,m){h=Xc,Ae(Ud,h),Ae(Uc,m),Xc=h|m.baseLanes}function Yi(){Ae(Ud,Xc),Ae(Uc,Uc.current)}function Jh(){Xc=Ud.current,tt(Uc),tt(Ud)}var to=0,gi=null,Xi=null,js=null,$d=!1,Ql=!1,Lr=!1,$c=0,Nn=0,Dn=null,Gu=0;function Fs(){throw Error(i(321))}function Wu(h,m){if(m===null)return!1;for(var b=0;b<m.length&&b<h.length;b++)if(!pa(h[b],m[b]))return!1;return!0}function Cr(h,m,b,k,z,U){return to=U,gi=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,ze.H=h===null||h.memoizedState===null?Al:ro,Lr=!1,U=b(k,z),Lr=!1,Ql&&(U=no(m,b,k,z)),wp(h),U}function wp(h){ze.H=xr;var m=Xi!==null&&Xi.next!==null;if(to=0,js=Xi=gi=null,$d=!1,Nn=0,Dn=null,m)throw Error(i(300));h===null||Tr||(h=h.dependencies,h!==null&&Bd(h)&&(Tr=!0))}function no(h,m,b,k){gi=h;var z=0;do{if(Ql&&(Dn=null),Nn=0,Ql=!1,25<=z)throw Error(i(301));if(z+=1,js=Xi=null,h.updateQueue!=null){var U=h.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}ze.H=ic,U=m(b,k)}while(Ql);return U}function Hc(){var h=ze.H,m=h.useState()[0];return m=typeof m.then=="function"?io(m):m,h=h.useState()[0],(Xi!==null?Xi.memoizedState:null)!==h&&(gi.flags|=1024),m}function Sp(){var h=$c!==0;return $c=0,h}function jp(h,m,b){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~b}function Cp(h){if($d){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}$d=!1}to=0,js=Xi=gi=null,Ql=!1,Nn=$c=0,Dn=null}function cr(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return js===null?gi.memoizedState=js=h:js=js.next=h,js}function fi(){if(Xi===null){var h=gi.alternate;h=h!==null?h.memoizedState:null}else h=Xi.next;var m=js===null?gi.memoizedState:js.next;if(m!==null)js=m,Xi=h;else{if(h===null)throw gi.alternate===null?Error(i(467)):Error(i(310));Xi=h,h={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},js===null?gi.memoizedState=js=h:js=js.next=h}return js}function Cs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function io(h){var m=Nn;return Nn+=1,Dn===null&&(Dn=[]),h=Xh(Dn,h,m),m=gi,(js===null?m.memoizedState:js.next)===null&&(m=m.alternate,ze.H=m===null||m.memoizedState===null?Al:ro),h}function El(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return io(h);if(h.$$typeof===J)return yr(h)}throw Error(i(438,String(h)))}function Jl(h){var m=null,b=gi.updateQueue;if(b!==null&&(m=b.memoCache),m==null){var k=gi.alternate;k!==null&&(k=k.updateQueue,k!==null&&(k=k.memoCache,k!=null&&(m={data:k.data.map(function(z){return z.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),b===null&&(b=Cs(),gi.updateQueue=b),b.memoCache=m,b=m.data[m.index],b===void 0)for(b=m.data[m.index]=Array(h),k=0;k<h;k++)b[k]=Oe;return m.index++,b}function so(h,m){return typeof m=="function"?m(h):m}function ec(h){var m=fi();return Hd(m,Xi,h)}function Hd(h,m,b){var k=h.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=b;var z=h.baseQueue,U=k.pending;if(U!==null){if(z!==null){var oe=z.next;z.next=U.next,U.next=oe}m.baseQueue=z=U,k.pending=null}if(U=h.baseState,z===null)h.memoizedState=U;else{m=z.next;var we=oe=null,$e=null,mt=m,$t=!1;do{var Jt=mt.lane&-536870913;if(Jt!==mt.lane?(Ci&Jt)===Jt:(to&Jt)===Jt){var Nt=mt.revertLane;if(Nt===0)$e!==null&&($e=$e.next={lane:0,revertLane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),Jt===Ia&&($t=!0);else if((to&Nt)===Nt){mt=mt.next,Nt===Ia&&($t=!0);continue}else Jt={lane:0,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},$e===null?(we=$e=Jt,oe=U):$e=$e.next=Jt,gi.lanes|=Nt,il|=Nt;Jt=mt.action,Lr&&b(U,Jt),U=mt.hasEagerState?mt.eagerState:b(U,Jt)}else Nt={lane:Jt,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},$e===null?(we=$e=Nt,oe=U):$e=$e.next=Nt,gi.lanes|=Jt,il|=Jt;mt=mt.next}while(mt!==null&&mt!==m);if($e===null?oe=U:$e.next=we,!pa(U,h.memoizedState)&&(Tr=!0,$t&&(b=Zl,b!==null)))throw b;h.memoizedState=U,h.baseState=oe,h.baseQueue=$e,k.lastRenderedState=U}return z===null&&(k.lanes=0),[h.memoizedState,k.dispatch]}function Ko(h){var m=fi(),b=m.queue;if(b===null)throw Error(i(311));b.lastRenderedReducer=h;var k=b.dispatch,z=b.pending,U=m.memoizedState;if(z!==null){b.pending=null;var oe=z=z.next;do U=h(U,oe.action),oe=oe.next;while(oe!==z);pa(U,m.memoizedState)||(Tr=!0),m.memoizedState=U,m.baseQueue===null&&(m.baseState=U),b.lastRenderedState=U}return[U,k]}function tc(h,m,b){var k=gi,z=fi(),U=Ei;if(U){if(b===void 0)throw Error(i(407));b=b()}else b=m();var oe=!pa((Xi||z).memoizedState,b);oe&&(z.memoizedState=b,Tr=!0),z=z.queue;var we=nc.bind(null,k,z,h);if(Ce(2048,8,we,[h]),z.getSnapshot!==m||oe||js!==null&&js.memoizedState.tag&1){if(k.flags|=2048,ee(9,ue(),qd.bind(null,k,z,b,m),null),ks===null)throw Error(i(349));U||(to&124)!==0||ef(k,m,b)}return b}function ef(h,m,b){h.flags|=16384,h={getSnapshot:m,value:b},m=gi.updateQueue,m===null?(m=Cs(),gi.updateQueue=m,m.stores=[h]):(b=m.stores,b===null?m.stores=[h]:b.push(h))}function qd(h,m,b,k){m.value=b,m.getSnapshot=k,tf(m)&&nf(h)}function nc(h,m,b){return b(function(){tf(m)&&nf(h)})}function tf(h){var m=h.getSnapshot;h=h.value;try{var b=m();return!pa(h,b)}catch(k){return!0}}function nf(h){var m=No(h,2);m!==null&&co(m,h,2)}function Zu(h){var m=cr();if(typeof h=="function"){var b=h;if(h=b(),Lr){xt(!0);try{b()}finally{xt(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:h},m}function sf(h,m,b,k){return h.baseState=b,Hd(h,Xi,typeof k=="function"?k:so)}function j(h,m,b,k,z){if(tr(h))throw Error(i(485));if(h=m.action,h!==null){var U={payload:z,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){U.listeners.push(oe)}};ze.T!==null?b(!0):U.isTransition=!1,k(U),b=m.pending,b===null?(U.next=m.pending=U,s(m,U)):(U.next=b.next,m.pending=b.next=U)}}function s(h,m){var b=m.action,k=m.payload,z=h.state;if(m.isTransition){var U=ze.T,oe={};ze.T=oe;try{var we=b(z,k),$e=ze.S;$e!==null&&$e(oe,we),p(h,m,we)}catch(mt){w(h,m,mt)}finally{ze.T=U}}else try{U=b(z,k),p(h,m,U)}catch(mt){w(h,m,mt)}}function p(h,m,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(k){x(h,m,k)},function(k){return w(h,m,k)}):x(h,m,b)}function x(h,m,b){m.status="fulfilled",m.value=b,T(m),h.state=b,m=h.pending,m!==null&&(b=m.next,b===m?h.pending=null:(b=b.next,m.next=b,s(h,b)))}function w(h,m,b){var k=h.pending;if(h.pending=null,k!==null){k=k.next;do m.status="rejected",m.reason=b,T(m),m=m.next;while(m!==k)}h.action=null}function T(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function P(h,m){return m}function O(h,m){if(Ei){var b=ks.formState;if(b!==null){e:{var k=gi;if(Ei){if(Ps){t:{for(var z=Ps,U=za;z.nodeType!==8;){if(!U){z=null;break t}if(z=al(z.nextSibling),z===null){z=null;break t}}U=z.data,z=U==="F!"||U==="F"?z:null}if(z){Ps=al(z.nextSibling),k=z.data==="F!";break e}}Qa(k)}k=!1}k&&(m=b[0])}}return b=cr(),b.memoizedState=b.baseState=m,k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P,lastRenderedState:m},b.queue=k,b=ns.bind(null,gi,k),k.dispatch=b,k=Zu(!1),U=as.bind(null,gi,!1,k.queue),k=cr(),z={state:m,dispatch:null,action:h,pending:null},k.queue=z,b=j.bind(null,gi,z,U,b),z.dispatch=b,k.memoizedState=h,[m,b,!1]}function F(h){var m=fi();return q(m,Xi,h)}function q(h,m,b){if(m=Hd(h,m,P)[0],h=ec(so)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var k=io(m)}catch(oe){throw oe===Tl?Yl:oe}else k=m;m=fi();var z=m.queue,U=z.dispatch;return b!==m.memoizedState&&(gi.flags|=2048,ee(9,ue(),Y.bind(null,z,b),null)),[k,U,h]}function Y(h,m){h.action=m}function ne(h){var m=fi(),b=Xi;if(b!==null)return q(m,b,h);fi(),m=m.memoizedState,b=fi();var k=b.queue.dispatch;return b.memoizedState=h,[m,k,!1]}function ee(h,m,b,k){return h={tag:h,create:b,deps:k,inst:m,next:null},m=gi.updateQueue,m===null&&(m=Cs(),gi.updateQueue=m),b=m.lastEffect,b===null?m.lastEffect=h.next=h:(k=b.next,b.next=h,h.next=k,m.lastEffect=h),h}function ue(){return{destroy:void 0,resource:void 0}}function ye(){return fi().memoizedState}function Te(h,m,b,k){var z=cr();k=k===void 0?null:k,gi.flags|=h,z.memoizedState=ee(1|m,ue(),b,k)}function Ce(h,m,b,k){var z=fi();k=k===void 0?null:k;var U=z.memoizedState.inst;Xi!==null&&k!==null&&Wu(k,Xi.memoizedState.deps)?z.memoizedState=ee(m,U,b,k):(gi.flags|=h,z.memoizedState=ee(1|m,U,b,k))}function Ee(h,m){Te(8390656,8,h,m)}function Ie(h,m){Ce(2048,8,h,m)}function Be(h,m){return Ce(4,2,h,m)}function Le(h,m){return Ce(4,4,h,m)}function qe(h,m){if(typeof m=="function"){h=h();var b=m(h);return function(){typeof b=="function"?b():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function Ke(h,m,b){b=b!=null?b.concat([h]):null,Ce(4,4,qe.bind(null,m,h),b)}function Fe(){}function it(h,m){var b=fi();m=m===void 0?null:m;var k=b.memoizedState;return m!==null&&Wu(m,k[1])?k[0]:(b.memoizedState=[h,m],h)}function Mt(h,m){var b=fi();m=m===void 0?null:m;var k=b.memoizedState;if(m!==null&&Wu(m,k[1]))return k[0];if(k=h(),Lr){xt(!0);try{h()}finally{xt(!1)}}return b.memoizedState=[k,m],k}function _t(h,m,b){return b===void 0||(to&1073741824)!==0?h.memoizedState=m:(h.memoizedState=b,h=S_(),gi.lanes|=h,il|=h,b)}function wt(h,m,b,k){return pa(b,m)?b:Uc.current!==null?(h=_t(h,b,k),pa(h,m)||(Tr=!0),h):(to&42)===0?(Tr=!0,h.memoizedState=b):(h=S_(),gi.lanes|=h,il|=h,m)}function St(h,m,b,k,z){var U=Qe.p;Qe.p=U!==0&&8>U?U:8;var oe=ze.T,we={};ze.T=we,as(h,!1,m,b);try{var $e=z(),mt=ze.S;if(mt!==null&&mt(we,$e),$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var $t=Vu($e,k);yi(h,m,$t,Ca(h))}else yi(h,m,k,Ca(h))}catch(Jt){yi(h,m,{then:function(){},status:"rejected",reason:Jt},Ca())}finally{Qe.p=U,ze.T=oe}}function rn(){}function an(h,m,b,k){if(h.tag!==5)throw Error(i(476));var z=Yt(h).queue;St(h,z,m,Je,b===null?rn:function(){return Mn(h),b(k)})}function Yt(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:Je,baseState:Je,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:Je},next:null};var b={};return m.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:b},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function Mn(h){var m=Yt(h).next.queue;yi(h,m,{},Ca())}function ni(){return yr(C)}function Fi(){return fi().memoizedState}function Bi(){return fi().memoizedState}function Qi(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var b=Ca();h=Nl(b);var k=Po(m,h,b);k!==null&&(co(k,m,b),Vc(k,m,b)),m={cache:Yh()},h.payload=m;return}m=m.return}}function Ts(h,m,b){var k=Ca();b={lane:k,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},tr(h)?Bs(m,b):(b=Wh(h,m,b,k),b!==null&&(co(b,h,k),Vs(b,m,k)))}function ns(h,m,b){var k=Ca();yi(h,m,b,k)}function yi(h,m,b,k){var z={lane:k,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(tr(h))Bs(m,z);else{var U=h.alternate;if(h.lanes===0&&(U===null||U.lanes===0)&&(U=m.lastRenderedReducer,U!==null))try{var oe=m.lastRenderedState,we=U(oe,b);if(z.hasEagerState=!0,z.eagerState=we,pa(we,oe))return Dc(h,m,z,0),ks===null&&Hl(),!1}catch($e){}finally{}if(b=Wh(h,m,z,k),b!==null)return co(b,h,k),Vs(b,m,k),!0}return!1}function as(h,m,b,k){if(k={lane:2,revertLane:p0(),action:k,hasEagerState:!1,eagerState:null,next:null},tr(h)){if(m)throw Error(i(479))}else m=Wh(h,b,k,2),m!==null&&co(m,h,2)}function tr(h){var m=h.alternate;return h===gi||m!==null&&m===gi}function Bs(h,m){Ql=$d=!0;var b=h.pending;b===null?m.next=m:(m.next=b.next,b.next=m),h.pending=m}function Vs(h,m,b){if((b&4194048)!==0){var k=m.lanes;k&=h.pendingLanes,b|=k,m.lanes=b,Wt(h,b)}}var xr={readContext:yr,use:El,useCallback:Fs,useContext:Fs,useEffect:Fs,useImperativeHandle:Fs,useLayoutEffect:Fs,useInsertionEffect:Fs,useMemo:Fs,useReducer:Fs,useRef:Fs,useState:Fs,useDebugValue:Fs,useDeferredValue:Fs,useTransition:Fs,useSyncExternalStore:Fs,useId:Fs,useHostTransitionStatus:Fs,useFormState:Fs,useActionState:Fs,useOptimistic:Fs,useMemoCache:Fs,useCacheRefresh:Fs},Al={readContext:yr,use:El,useCallback:function(h,m){return cr().memoizedState=[h,m===void 0?null:m],h},useContext:yr,useEffect:Ee,useImperativeHandle:function(h,m,b){b=b!=null?b.concat([h]):null,Te(4194308,4,qe.bind(null,m,h),b)},useLayoutEffect:function(h,m){return Te(4194308,4,h,m)},useInsertionEffect:function(h,m){Te(4,2,h,m)},useMemo:function(h,m){var b=cr();m=m===void 0?null:m;var k=h();if(Lr){xt(!0);try{h()}finally{xt(!1)}}return b.memoizedState=[k,m],k},useReducer:function(h,m,b){var k=cr();if(b!==void 0){var z=b(m);if(Lr){xt(!0);try{b(m)}finally{xt(!1)}}}else z=m;return k.memoizedState=k.baseState=z,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:z},k.queue=h,h=h.dispatch=Ts.bind(null,gi,h),[k.memoizedState,h]},useRef:function(h){var m=cr();return h={current:h},m.memoizedState=h},useState:function(h){h=Zu(h);var m=h.queue,b=ns.bind(null,gi,m);return m.dispatch=b,[h.memoizedState,b]},useDebugValue:Fe,useDeferredValue:function(h,m){var b=cr();return _t(b,h,m)},useTransition:function(){var h=Zu(!1);return h=St.bind(null,gi,h.queue,!0,!1),cr().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,b){var k=gi,z=cr();if(Ei){if(b===void 0)throw Error(i(407));b=b()}else{if(b=m(),ks===null)throw Error(i(349));(Ci&124)!==0||ef(k,m,b)}z.memoizedState=b;var U={value:b,getSnapshot:m};return z.queue=U,Ee(nc.bind(null,k,U,h),[h]),k.flags|=2048,ee(9,ue(),qd.bind(null,k,U,b,m),null),b},useId:function(){var h=cr(),m=ks.identifierPrefix;if(Ei){var b=Ra,k=Ka;b=(k&~(1<<32-je(k)-1)).toString(32)+b,m="«"+m+"R"+b,b=$c++,0<b&&(m+="H"+b.toString(32)),m+="»"}else b=Gu++,m="«"+m+"r"+b.toString(32)+"»";return h.memoizedState=m},useHostTransitionStatus:ni,useFormState:O,useActionState:O,useOptimistic:function(h){var m=cr();m.memoizedState=m.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=b,m=as.bind(null,gi,!0,b),b.dispatch=m,[h,m]},useMemoCache:Jl,useCacheRefresh:function(){return cr().memoizedState=Qi.bind(null,gi)}},ro={readContext:yr,use:El,useCallback:it,useContext:yr,useEffect:Ie,useImperativeHandle:Ke,useInsertionEffect:Be,useLayoutEffect:Le,useMemo:Mt,useReducer:ec,useRef:ye,useState:function(){return ec(so)},useDebugValue:Fe,useDeferredValue:function(h,m){var b=fi();return wt(b,Xi.memoizedState,h,m)},useTransition:function(){var h=ec(so)[0],m=fi().memoizedState;return[typeof h=="boolean"?h:io(h),m]},useSyncExternalStore:tc,useId:Fi,useHostTransitionStatus:ni,useFormState:F,useActionState:F,useOptimistic:function(h,m){var b=fi();return sf(b,Xi,h,m)},useMemoCache:Jl,useCacheRefresh:Bi},ic={readContext:yr,use:El,useCallback:it,useContext:yr,useEffect:Ie,useImperativeHandle:Ke,useInsertionEffect:Be,useLayoutEffect:Le,useMemo:Mt,useReducer:Ko,useRef:ye,useState:function(){return Ko(so)},useDebugValue:Fe,useDeferredValue:function(h,m){var b=fi();return Xi===null?_t(b,h,m):wt(b,Xi.memoizedState,h,m)},useTransition:function(){var h=Ko(so)[0],m=fi().memoizedState;return[typeof h=="boolean"?h:io(h),m]},useSyncExternalStore:tc,useId:Fi,useHostTransitionStatus:ni,useFormState:ne,useActionState:ne,useOptimistic:function(h,m){var b=fi();return Xi!==null?sf(b,Xi,h,m):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:Jl,useCacheRefresh:Bi},ao=null,sc=0;function Pl(h){var m=sc;return sc+=1,ao===null&&(ao=[]),Xh(ao,h,m)}function Fa(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function Fr(h,m){throw m.$$typeof===N?Error(i(525)):(h=Object.prototype.toString.call(m),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function Ro(h){var m=h._init;return m(h._payload)}function Do(h){function m(gt,rt){if(h){var jt=gt.deletions;jt===null?(gt.deletions=[rt],gt.flags|=16):jt.push(rt)}}function b(gt,rt){if(!h)return null;for(;rt!==null;)m(gt,rt),rt=rt.sibling;return null}function k(gt){for(var rt=new Map;gt!==null;)gt.key!==null?rt.set(gt.key,gt):rt.set(gt.index,gt),gt=gt.sibling;return rt}function z(gt,rt){return gt=Mo(gt,rt),gt.index=0,gt.sibling=null,gt}function U(gt,rt,jt){return gt.index=jt,h?(jt=gt.alternate,jt!==null?(jt=jt.index,jt<rt?(gt.flags|=67108866,rt):jt):(gt.flags|=67108866,rt)):(gt.flags|=1048576,rt)}function oe(gt){return h&&gt.alternate===null&&(gt.flags|=67108866),gt}function we(gt,rt,jt,Kt){return rt===null||rt.tag!==6?(rt=Id(jt,gt.mode,Kt),rt.return=gt,rt):(rt=z(rt,jt),rt.return=gt,rt)}function $e(gt,rt,jt,Kt){var zn=jt.type;return zn===D?$t(gt,rt,jt.props.children,Kt,jt.key):rt!==null&&(rt.elementType===zn||typeof zn=="object"&&zn!==null&&zn.$$typeof===de&&Ro(zn)===rt.type)?(rt=z(rt,jt.props),Fa(rt,jt),rt.return=gt,rt):(rt=Zh(jt.type,jt.key,jt.props,null,gt.mode,Kt),Fa(rt,jt),rt.return=gt,rt)}function mt(gt,rt,jt,Kt){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==jt.containerInfo||rt.stateNode.implementation!==jt.implementation?(rt=gp(jt,gt.mode,Kt),rt.return=gt,rt):(rt=z(rt,jt.children||[]),rt.return=gt,rt)}function $t(gt,rt,jt,Kt,zn){return rt===null||rt.tag!==7?(rt=qo(jt,gt.mode,Kt,zn),rt.return=gt,rt):(rt=z(rt,jt),rt.return=gt,rt)}function Jt(gt,rt,jt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return rt=Id(""+rt,gt.mode,jt),rt.return=gt,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case A:return jt=Zh(rt.type,rt.key,rt.props,null,gt.mode,jt),Fa(jt,rt),jt.return=gt,jt;case E:return rt=gp(rt,gt.mode,jt),rt.return=gt,rt;case de:var Kt=rt._init;return rt=Kt(rt._payload),Jt(gt,rt,jt)}if(vt(rt)||We(rt))return rt=qo(rt,gt.mode,jt,null),rt.return=gt,rt;if(typeof rt.then=="function")return Jt(gt,Pl(rt),jt);if(rt.$$typeof===J)return Jt(gt,Cl(gt,rt),jt);Fr(gt,rt)}return null}function Nt(gt,rt,jt,Kt){var zn=rt!==null?rt.key:null;if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return zn!==null?null:we(gt,rt,""+jt,Kt);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case A:return jt.key===zn?$e(gt,rt,jt,Kt):null;case E:return jt.key===zn?mt(gt,rt,jt,Kt):null;case de:return zn=jt._init,jt=zn(jt._payload),Nt(gt,rt,jt,Kt)}if(vt(jt)||We(jt))return zn!==null?null:$t(gt,rt,jt,Kt,null);if(typeof jt.then=="function")return Nt(gt,rt,Pl(jt),Kt);if(jt.$$typeof===J)return Nt(gt,rt,Cl(gt,jt),Kt);Fr(gt,jt)}return null}function Dt(gt,rt,jt,Kt,zn){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number"||typeof Kt=="bigint")return gt=gt.get(jt)||null,we(rt,gt,""+Kt,zn);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case A:return gt=gt.get(Kt.key===null?jt:Kt.key)||null,$e(rt,gt,Kt,zn);case E:return gt=gt.get(Kt.key===null?jt:Kt.key)||null,mt(rt,gt,Kt,zn);case de:var ki=Kt._init;return Kt=ki(Kt._payload),Dt(gt,rt,jt,Kt,zn)}if(vt(Kt)||We(Kt))return gt=gt.get(jt)||null,$t(rt,gt,Kt,zn,null);if(typeof Kt.then=="function")return Dt(gt,rt,jt,Pl(Kt),zn);if(Kt.$$typeof===J)return Dt(gt,rt,jt,Cl(rt,Kt),zn);Fr(rt,Kt)}return null}function ii(gt,rt,jt,Kt){for(var zn=null,ki=null,$n=rt,si=rt=0,Ns=null;$n!==null&&si<jt.length;si++){$n.index>si?(Ns=$n,$n=null):Ns=$n.sibling;var Hi=Nt(gt,$n,jt[si],Kt);if(Hi===null){$n===null&&($n=Ns);break}h&&$n&&Hi.alternate===null&&m(gt,$n),rt=U(Hi,rt,si),ki===null?zn=Hi:ki.sibling=Hi,ki=Hi,$n=Ns}if(si===jt.length)return b(gt,$n),Ei&&Da(gt,si),zn;if($n===null){for(;si<jt.length;si++)$n=Jt(gt,jt[si],Kt),$n!==null&&(rt=U($n,rt,si),ki===null?zn=$n:ki.sibling=$n,ki=$n);return Ei&&Da(gt,si),zn}for($n=k($n);si<jt.length;si++)Ns=Dt($n,gt,si,jt[si],Kt),Ns!==null&&(h&&Ns.alternate!==null&&$n.delete(Ns.key===null?si:Ns.key),rt=U(Ns,rt,si),ki===null?zn=Ns:ki.sibling=Ns,ki=Ns);return h&&$n.forEach(function(iu){return m(gt,iu)}),Ei&&Da(gt,si),zn}function Zn(gt,rt,jt,Kt){if(jt==null)throw Error(i(151));for(var zn=null,ki=null,$n=rt,si=rt=0,Ns=null,Hi=jt.next();$n!==null&&!Hi.done;si++,Hi=jt.next()){$n.index>si?(Ns=$n,$n=null):Ns=$n.sibling;var iu=Nt(gt,$n,Hi.value,Kt);if(iu===null){$n===null&&($n=Ns);break}h&&$n&&iu.alternate===null&&m(gt,$n),rt=U(iu,rt,si),ki===null?zn=iu:ki.sibling=iu,ki=iu,$n=Ns}if(Hi.done)return b(gt,$n),Ei&&Da(gt,si),zn;if($n===null){for(;!Hi.done;si++,Hi=jt.next())Hi=Jt(gt,Hi.value,Kt),Hi!==null&&(rt=U(Hi,rt,si),ki===null?zn=Hi:ki.sibling=Hi,ki=Hi);return Ei&&Da(gt,si),zn}for($n=k($n);!Hi.done;si++,Hi=jt.next())Hi=Dt($n,gt,si,Hi.value,Kt),Hi!==null&&(h&&Hi.alternate!==null&&$n.delete(Hi.key===null?si:Hi.key),rt=U(Hi,rt,si),ki===null?zn=Hi:ki.sibling=Hi,ki=Hi);return h&&$n.forEach(function(_w){return m(gt,_w)}),Ei&&Da(gt,si),zn}function $i(gt,rt,jt,Kt){if(typeof jt=="object"&&jt!==null&&jt.type===D&&jt.key===null&&(jt=jt.props.children),typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case A:e:{for(var zn=jt.key;rt!==null;){if(rt.key===zn){if(zn=jt.type,zn===D){if(rt.tag===7){b(gt,rt.sibling),Kt=z(rt,jt.props.children),Kt.return=gt,gt=Kt;break e}}else if(rt.elementType===zn||typeof zn=="object"&&zn!==null&&zn.$$typeof===de&&Ro(zn)===rt.type){b(gt,rt.sibling),Kt=z(rt,jt.props),Fa(Kt,jt),Kt.return=gt,gt=Kt;break e}b(gt,rt);break}else m(gt,rt);rt=rt.sibling}jt.type===D?(Kt=qo(jt.props.children,gt.mode,Kt,jt.key),Kt.return=gt,gt=Kt):(Kt=Zh(jt.type,jt.key,jt.props,null,gt.mode,Kt),Fa(Kt,jt),Kt.return=gt,gt=Kt)}return oe(gt);case E:e:{for(zn=jt.key;rt!==null;){if(rt.key===zn)if(rt.tag===4&&rt.stateNode.containerInfo===jt.containerInfo&&rt.stateNode.implementation===jt.implementation){b(gt,rt.sibling),Kt=z(rt,jt.children||[]),Kt.return=gt,gt=Kt;break e}else{b(gt,rt);break}else m(gt,rt);rt=rt.sibling}Kt=gp(jt,gt.mode,Kt),Kt.return=gt,gt=Kt}return oe(gt);case de:return zn=jt._init,jt=zn(jt._payload),$i(gt,rt,jt,Kt)}if(vt(jt))return ii(gt,rt,jt,Kt);if(We(jt)){if(zn=We(jt),typeof zn!="function")throw Error(i(150));return jt=zn.call(jt),Zn(gt,rt,jt,Kt)}if(typeof jt.then=="function")return $i(gt,rt,Pl(jt),Kt);if(jt.$$typeof===J)return $i(gt,rt,Cl(gt,jt),Kt);Fr(gt,jt)}return typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint"?(jt=""+jt,rt!==null&&rt.tag===6?(b(gt,rt.sibling),Kt=z(rt,jt),Kt.return=gt,gt=Kt):(b(gt,rt),Kt=Id(jt,gt.mode,Kt),Kt.return=gt,gt=Kt),oe(gt)):b(gt,rt)}return function(gt,rt,jt,Kt){try{sc=0;var zn=$i(gt,rt,jt,Kt);return ao=null,zn}catch($n){if($n===Tl||$n===Yl)throw $n;var ki=zr(29,$n,null,gt.mode);return ki.lanes=Kt,ki.return=gt,ki}finally{}}}var _r=Do(!0),Rs=Do(!1),Ki=Xe(null),Us=null;function ys(h){var m=h.alternate;Ae(os,os.current&1),Ae(Ki,h),Us===null&&(m===null||Uc.current!==null||m.memoizedState!==null)&&(Us=h)}function rf(h){if(h.tag===22){if(Ae(os,os.current),Ae(Ki,h),Us===null){var m=h.alternate;m!==null&&m.memoizedState!==null&&(Us=h)}}else oo()}function oo(){Ae(os,os.current),Ae(Ki,Ki.current)}function na(h){tt(Ki),Us===h&&(Us=null),tt(os)}var os=Xe(0);function va(h){for(var m=h;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||hc(b)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Qo(h,m,b,k){m=h.memoizedState,b=b(k,m),b=b==null?m:S({},m,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var Jo={enqueueSetState:function(h,m,b){h=h._reactInternals;var k=Ca(),z=Nl(k);z.payload=m,b!=null&&(z.callback=b),m=Po(h,z,k),m!==null&&(co(m,h,k),Vc(m,h,k))},enqueueReplaceState:function(h,m,b){h=h._reactInternals;var k=Ca(),z=Nl(k);z.tag=1,z.payload=m,b!=null&&(z.callback=b),m=Po(h,z,k),m!==null&&(co(m,h,k),Vc(m,h,k))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var b=Ca(),k=Nl(b);k.tag=2,m!=null&&(k.callback=m),m=Po(h,k,b),m!==null&&(co(m,h,b),Vc(m,h,b))}};function af(h,m,b,k,z,U,oe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(k,U,oe):m.prototype&&m.prototype.isPureReactComponent?!Nc(b,k)||!Nc(z,U):!0}function of(h,m,b,k){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,k),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,k),m.state!==h&&Jo.enqueueReplaceState(m,m.state,null)}function wa(h,m){var b=m;if("ref"in m){b={};for(var k in m)k!=="ref"&&(b[k]=m[k])}if(h=h.defaultProps){b===m&&(b=S({},b));for(var z in h)b[z]===void 0&&(b[z]=h[z])}return b}var Yu=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function lf(h){Yu(h)}function Xu(h){console.error(h)}function By(h){Yu(h)}function rc(h,m){try{var b=h.onUncaughtError;b(m.value,{componentStack:m.stack})}catch(k){setTimeout(function(){throw k})}}function Ku(h,m,b){try{var k=h.onCaughtError;k(b.value,{componentStack:b.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function Gm(h,m,b){return b=Nl(b),b.tag=3,b.payload={element:null},b.callback=function(){rc(h,m)},b}function h_(h){return h=Nl(h),h.tag=3,h}function Wm(h,m,b,k){var z=b.type.getDerivedStateFromError;if(typeof z=="function"){var U=k.value;h.payload=function(){return z(U)},h.callback=function(){Ku(m,b,k)}}var oe=b.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(h.callback=function(){Ku(m,b,k),typeof z!="function"&&(nd===null?nd=new Set([this]):nd.add(this));var we=k.stack;this.componentDidCatch(k.value,{componentStack:we!==null?we:""})})}function f_(h,m,b,k,z){if(b.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){if(m=b.alternate,m!==null&&Bc(m,b,z,!0),b=Ki.current,b!==null){switch(b.tag){case 13:return Us===null?og():b.alternate===null&&qs===0&&(qs=3),b.flags&=-257,b.flags|=65536,b.lanes=z,k===Ao?b.flags|=16384:(m=b.updateQueue,m===null?b.updateQueue=new Set([k]):m.add(k),uc(h,k,z)),!1;case 22:return b.flags|=65536,k===Ao?b.flags|=16384:(m=b.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([k])},b.updateQueue=m):(b=m.retryQueue,b===null?m.retryQueue=new Set([k]):b.add(k)),uc(h,k,z)),!1}throw Error(i(435,b.tag))}return uc(h,k,z),og(),!1}if(Ei)return m=Ki.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=z,k!==Ou&&(h=Error(i(422),{cause:k}),Ir(ga(h,b)))):(k!==Ou&&(m=Error(i(423),{cause:k}),Ir(ga(m,b))),h=h.current.alternate,h.flags|=65536,z&=-z,h.lanes|=z,k=ga(k,b),z=Gm(h.stateNode,k,z),Kh(h,z),qs!==4&&(qs=2)),!1;var U=Error(i(520),{cause:k});if(U=ga(U,b),gf===null?gf=[U]:gf.push(U),qs!==4&&(qs=2),m===null)return!0;k=ga(k,b),b=m;do{switch(b.tag){case 3:return b.flags|=65536,h=z&-z,b.lanes|=h,h=Gm(b.stateNode,k,h),Kh(b,h),!1;case 1:if(m=b.type,U=b.stateNode,(b.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(nd===null||!nd.has(U))))return b.flags|=65536,z&=-z,b.lanes|=z,z=h_(z),Wm(z,h,b,k),Kh(b,z),!1}b=b.return}while(b!==null);return!1}var Tp=Error(i(461)),Tr=!1;function ia(h,m,b,k){m.child=h===null?Rs(m,null,b,k):_r(m,h.child,b,k)}function Zm(h,m,b,k,z){b=b.render;var U=m.ref;if("ref"in k){var oe={};for(var we in k)we!=="ref"&&(oe[we]=k[we])}else oe=k;return jl(m),k=Cr(h,m,b,oe,U,z),we=Sp(),h!==null&&!Tr?(jp(h,m,z),ac(h,m,z)):(Ei&&we&&yp(m),m.flags|=1,ia(h,m,k,z),m.child)}function p_(h,m,b,k,z){if(h===null){var U=b.type;return typeof U=="function"&&!mp(U)&&U.defaultProps===void 0&&b.compare===null?(m.tag=15,m.type=U,Ym(h,m,U,k,z)):(h=Zh(b.type,null,k,m,m.mode,z),h.ref=m.ref,h.return=m,m.child=h)}if(U=h.child,!Qm(h,z)){var oe=U.memoizedProps;if(b=b.compare,b=b!==null?b:Nc,b(oe,k)&&h.ref===m.ref)return ac(h,m,z)}return m.flags|=1,h=Mo(U,k),h.ref=m.ref,h.return=m,m.child=h}function Ym(h,m,b,k,z){if(h!==null){var U=h.memoizedProps;if(Nc(U,k)&&h.ref===m.ref)if(Tr=!1,m.pendingProps=k=U,Qm(h,z))(h.flags&131072)!==0&&(Tr=!0);else return m.lanes=h.lanes,ac(h,m,z)}return $y(h,m,b,k,z)}function Vy(h,m,b){var k=m.pendingProps,z=k.children,U=h!==null?h.memoizedState:null;if(k.mode==="hidden"){if((m.flags&128)!==0){if(k=U!==null?U.baseLanes|b:b,h!==null){for(z=m.child=h.child,U=0;z!==null;)U=U|z.lanes|z.childLanes,z=z.sibling;m.childLanes=U&~k}else m.childLanes=0,m.child=null;return Uy(h,m,k,b)}if((b&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&Uu(m,U!==null?U.cachePool:null),U!==null?Ml(m,U):Yi(),rf(m);else return m.lanes=m.childLanes=536870912,Uy(h,m,U!==null?U.baseLanes|b:b,b)}else U!==null?(Uu(m,U.cachePool),Ml(m,U),oo(),m.memoizedState=null):(h!==null&&Uu(m,null),Yi(),oo());return ia(h,m,z,b),m.child}function Uy(h,m,b,k){var z=xp();return z=z===null?null:{parent:er._currentValue,pool:z},m.memoizedState={baseLanes:b,cachePool:z},h!==null&&Uu(m,null),Yi(),rf(m),h!==null&&Bc(h,m,k,!0),null}function qc(h,m){var b=m.ref;if(b===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(i(284));(h===null||h.ref!==b)&&(m.flags|=4194816)}}function $y(h,m,b,k,z){return jl(m),b=Cr(h,m,b,k,void 0,z),k=Sp(),h!==null&&!Tr?(jp(h,m,z),ac(h,m,z)):(Ei&&k&&yp(m),m.flags|=1,ia(h,m,b,z),m.child)}function Gd(h,m,b,k,z,U){return jl(m),m.updateQueue=null,b=no(m,k,b,z),wp(h),k=Sp(),h!==null&&!Tr?(jp(h,m,U),ac(h,m,U)):(Ei&&k&&yp(m),m.flags|=1,ia(h,m,b,U),m.child)}function kp(h,m,b,k,z){if(jl(m),m.stateNode===null){var U=Ho,oe=b.contextType;typeof oe=="object"&&oe!==null&&(U=yr(oe)),U=new b(k,U),m.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Jo,m.stateNode=U,U._reactInternals=m,U=m.stateNode,U.props=k,U.state=m.memoizedState,U.refs={},mi(m),oe=b.contextType,U.context=typeof oe=="object"&&oe!==null?yr(oe):Ho,U.state=m.memoizedState,oe=b.getDerivedStateFromProps,typeof oe=="function"&&(Qo(m,b,oe,k),U.state=m.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(oe=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),oe!==U.state&&Jo.enqueueReplaceState(U,U.state,null),qu(m,k,U,z),Kl(),U.state=m.memoizedState),typeof U.componentDidMount=="function"&&(m.flags|=4194308),k=!0}else if(h===null){U=m.stateNode;var we=m.memoizedProps,$e=wa(b,we);U.props=$e;var mt=U.context,$t=b.contextType;oe=Ho,typeof $t=="object"&&$t!==null&&(oe=yr($t));var Jt=b.getDerivedStateFromProps;$t=typeof Jt=="function"||typeof U.getSnapshotBeforeUpdate=="function",we=m.pendingProps!==we,$t||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(we||mt!==oe)&&of(m,U,k,oe),La=!1;var Nt=m.memoizedState;U.state=Nt,qu(m,k,U,z),Kl(),mt=m.memoizedState,we||Nt!==mt||La?(typeof Jt=="function"&&(Qo(m,b,Jt,k),mt=m.memoizedState),($e=La||af(m,b,$e,k,Nt,mt,oe))?($t||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(m.flags|=4194308)):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=k,m.memoizedState=mt),U.props=k,U.state=mt,U.context=oe,k=$e):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),k=!1)}else{U=m.stateNode,Hu(h,m),oe=m.memoizedProps,$t=wa(b,oe),U.props=$t,Jt=m.pendingProps,Nt=U.context,mt=b.contextType,$e=Ho,typeof mt=="object"&&mt!==null&&($e=yr(mt)),we=b.getDerivedStateFromProps,(mt=typeof we=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(oe!==Jt||Nt!==$e)&&of(m,U,k,$e),La=!1,Nt=m.memoizedState,U.state=Nt,qu(m,k,U,z),Kl();var Dt=m.memoizedState;oe!==Jt||Nt!==Dt||La||h!==null&&h.dependencies!==null&&Bd(h.dependencies)?(typeof we=="function"&&(Qo(m,b,we,k),Dt=m.memoizedState),($t=La||af(m,b,$t,k,Nt,Dt,$e)||h!==null&&h.dependencies!==null&&Bd(h.dependencies))?(mt||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(k,Dt,$e),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(k,Dt,$e)),typeof U.componentDidUpdate=="function"&&(m.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof U.componentDidUpdate!="function"||oe===h.memoizedProps&&Nt===h.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||oe===h.memoizedProps&&Nt===h.memoizedState||(m.flags|=1024),m.memoizedProps=k,m.memoizedState=Dt),U.props=k,U.state=Dt,U.context=$e,k=$t):(typeof U.componentDidUpdate!="function"||oe===h.memoizedProps&&Nt===h.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||oe===h.memoizedProps&&Nt===h.memoizedState||(m.flags|=1024),k=!1)}return U=k,qc(h,m),k=(m.flags&128)!==0,U||k?(U=m.stateNode,b=k&&typeof b.getDerivedStateFromError!="function"?null:U.render(),m.flags|=1,h!==null&&k?(m.child=_r(m,h.child,null,z),m.child=_r(m,null,b,z)):ia(h,m,b,z),m.memoizedState=U.state,h=m.child):h=ac(h,m,z),h}function Np(h,m,b,k){return hs(),m.flags|=256,ia(h,m,b,k),m.child}var Hy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qy(h){return{baseLanes:h,cachePool:qm()}}function Gy(h,m,b){return h=h!==null?h.childLanes&~b:0,m&&(h|=sl),h}function m_(h,m,b){var k=m.pendingProps,z=!1,U=(m.flags&128)!==0,oe;if((oe=U)||(oe=h!==null&&h.memoizedState===null?!1:(os.current&2)!==0),oe&&(z=!0,m.flags&=-129),oe=(m.flags&32)!==0,m.flags&=-33,h===null){if(Ei){if(z?ys(m):oo(),Ei){var we=Ps,$e;if($e=we){e:{for($e=we,we=za;$e.nodeType!==8;){if(!we){we=null;break e}if($e=al($e.nextSibling),$e===null){we=null;break e}}we=$e}we!==null?(m.memoizedState={dehydrated:we,treeContext:Go!==null?{id:Ka,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},$e=zr(18,null,null,0),$e.stateNode=we,$e.return=m,m.child=$e,ta=m,Ps=null,$e=!0):$e=!1}$e||Qa(m)}if(we=m.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return hc(we)?m.lanes=32:m.lanes=536870912,null;na(m)}return we=k.children,k=k.fallback,z?(oo(),z=m.mode,we=cf({mode:"hidden",children:we},z),k=qo(k,z,b,null),we.return=m,k.return=m,we.sibling=k,m.child=we,z=m.child,z.memoizedState=qy(b),z.childLanes=Gy(h,oe,b),m.memoizedState=Hy,k):(ys(m),Xm(m,we))}if($e=h.memoizedState,$e!==null&&(we=$e.dehydrated,we!==null)){if(U)m.flags&256?(ys(m),m.flags&=-257,m=Km(h,m,b)):m.memoizedState!==null?(oo(),m.child=h.child,m.flags|=128,m=null):(oo(),z=k.fallback,we=m.mode,k=cf({mode:"visible",children:k.children},we),z=qo(z,we,b,null),z.flags|=2,k.return=m,z.return=m,k.sibling=z,m.child=k,_r(m,h.child,null,b),k=m.child,k.memoizedState=qy(b),k.childLanes=Gy(h,oe,b),m.memoizedState=Hy,m=z);else if(ys(m),hc(we)){if(oe=we.nextSibling&&we.nextSibling.dataset,oe)var mt=oe.dgst;oe=mt,k=Error(i(419)),k.stack="",k.digest=oe,Ir({value:k,source:null,stack:null}),m=Km(h,m,b)}else if(Tr||Bc(h,m,b,!1),oe=(b&h.childLanes)!==0,Tr||oe){if(oe=ks,oe!==null&&(k=b&-b,k=(k&42)!==0?1:Vt(k),k=(k&(oe.suspendedLanes|b))!==0?0:k,k!==0&&k!==$e.retryLane))throw $e.retryLane=k,No(h,k),co(oe,h,k),Tp;we.data==="$?"||og(),m=Km(h,m,b)}else we.data==="$?"?(m.flags|=192,m.child=h.child,m=null):(h=$e.treeContext,Ps=al(we.nextSibling),ta=m,Ei=!0,Wo=null,za=!1,h!==null&&(ea[ya++]=Ka,ea[ya++]=Ra,ea[ya++]=Go,Ka=h.id,Ra=h.overflow,Go=m),m=Xm(m,k.children),m.flags|=4096);return m}return z?(oo(),z=k.fallback,we=m.mode,$e=h.child,mt=$e.sibling,k=Mo($e,{mode:"hidden",children:k.children}),k.subtreeFlags=$e.subtreeFlags&65011712,mt!==null?z=Mo(mt,z):(z=qo(z,we,b,null),z.flags|=2),z.return=m,k.return=m,k.sibling=z,m.child=k,k=z,z=m.child,we=h.child.memoizedState,we===null?we=qy(b):($e=we.cachePool,$e!==null?(mt=er._currentValue,$e=$e.parent!==mt?{parent:mt,pool:mt}:$e):$e=qm(),we={baseLanes:we.baseLanes|b,cachePool:$e}),z.memoizedState=we,z.childLanes=Gy(h,oe,b),m.memoizedState=Hy,k):(ys(m),b=h.child,h=b.sibling,b=Mo(b,{mode:"visible",children:k.children}),b.return=m,b.sibling=null,h!==null&&(oe=m.deletions,oe===null?(m.deletions=[h],m.flags|=16):oe.push(h)),m.child=b,m.memoizedState=null,b)}function Xm(h,m){return m=cf({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function cf(h,m){return h=zr(22,h,null,m),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function Km(h,m,b){return _r(m,h.child,null,b),h=Xm(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function Wy(h,m,b){h.lanes|=m;var k=h.alternate;k!==null&&(k.lanes|=m),Fc(h.return,m,b)}function Zy(h,m,b,k,z){var U=h.memoizedState;U===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:k,tail:b,tailMode:z}:(U.isBackwards=m,U.rendering=null,U.renderingStartTime=0,U.last=k,U.tail=b,U.tailMode=z)}function g_(h,m,b){var k=m.pendingProps,z=k.revealOrder,U=k.tail;if(ia(h,m,k.children,b),k=os.current,(k&2)!==0)k=k&1|2,m.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Wy(h,b,m);else if(h.tag===19)Wy(h,b,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}k&=1}switch(Ae(os,k),z){case"forwards":for(b=m.child,z=null;b!==null;)h=b.alternate,h!==null&&va(h)===null&&(z=b),b=b.sibling;b=z,b===null?(z=m.child,m.child=null):(z=b.sibling,b.sibling=null),Zy(m,!1,z,b,U);break;case"backwards":for(b=null,z=m.child,m.child=null;z!==null;){if(h=z.alternate,h!==null&&va(h)===null){m.child=z;break}h=z.sibling,z.sibling=b,b=z,z=h}Zy(m,!0,b,null,U);break;case"together":Zy(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function ac(h,m,b){if(h!==null&&(m.dependencies=h.dependencies),il|=m.lanes,(b&m.childLanes)===0)if(h!==null){if(Bc(h,m,b,!1),(b&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(i(153));if(m.child!==null){for(h=m.child,b=Mo(h,h.pendingProps),m.child=b,b.return=m;h.sibling!==null;)h=h.sibling,b=b.sibling=Mo(h,h.pendingProps),b.return=m;b.sibling=null}return m.child}function Qm(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&Bd(h)))}function ew(h,m,b){switch(m.tag){case 3:Ge(m,m.stateNode.containerInfo),xa(m,er,h.memoizedState.cache),hs();break;case 27:case 5:zt(m);break;case 4:Ge(m,m.stateNode.containerInfo);break;case 10:xa(m,m.type,m.memoizedProps.value);break;case 13:var k=m.memoizedState;if(k!==null)return k.dehydrated!==null?(ys(m),m.flags|=128,null):(b&m.child.childLanes)!==0?m_(h,m,b):(ys(m),h=ac(h,m,b),h!==null?h.sibling:null);ys(m);break;case 19:var z=(h.flags&128)!==0;if(k=(b&m.childLanes)!==0,k||(Bc(h,m,b,!1),k=(b&m.childLanes)!==0),z){if(k)return g_(h,m,b);m.flags|=128}if(z=m.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Ae(os,os.current),k)break;return null;case 22:case 23:return m.lanes=0,Vy(h,m,b);case 24:xa(m,er,h.memoizedState.cache)}return ac(h,m,b)}function Jm(h,m,b){if(h!==null)if(h.memoizedProps!==m.pendingProps)Tr=!0;else{if(!Qm(h,b)&&(m.flags&128)===0)return Tr=!1,ew(h,m,b);Tr=(h.flags&131072)!==0}else Tr=!1,Ei&&(m.flags&1048576)!==0&&Od(m,Oc,m.index);switch(m.lanes=0,m.tag){case 16:e:{h=m.pendingProps;var k=m.elementType,z=k._init;if(k=z(k._payload),m.type=k,typeof k=="function")mp(k)?(h=wa(k,h),m.tag=1,m=kp(null,m,k,h,b)):(m.tag=0,m=$y(null,m,k,h,b));else{if(k!=null){if(z=k.$$typeof,z===Z){m.tag=11,m=Zm(null,m,k,h,b);break e}else if(z===_e){m.tag=14,m=p_(null,m,k,h,b);break e}}throw m=At(k)||k,Error(i(306,m,""))}}return m;case 0:return $y(h,m,m.type,m.pendingProps,b);case 1:return k=m.type,z=wa(k,m.pendingProps),kp(h,m,k,z,b);case 3:e:{if(Ge(m,m.stateNode.containerInfo),h===null)throw Error(i(387));k=m.pendingProps;var U=m.memoizedState;z=U.element,Hu(h,m),qu(m,k,null,b);var oe=m.memoizedState;if(k=oe.cache,xa(m,er,k),k!==U.cache&&Bu(m,[er],b,!0),Kl(),k=oe.element,U.isDehydrated)if(U={element:k,isDehydrated:!1,cache:oe.cache},m.updateQueue.baseState=U,m.memoizedState=U,m.flags&256){m=Np(h,m,k,b);break e}else if(k!==z){z=ga(Error(i(424)),m),Ir(z),m=Np(h,m,k,b);break e}else{switch(h=m.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(Ps=al(h.firstChild),ta=m,Ei=!0,Wo=null,za=!0,b=Rs(m,null,k,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(hs(),k===z){m=ac(h,m,b);break e}ia(h,m,k,b)}m=m.child}return m;case 26:return qc(h,m),h===null?(b=kg(m.type,null,m.pendingProps,null))?m.memoizedState=b:Ei||(b=m.type,h=m.pendingProps,k=Sf(ut.current).createElement(b),k[Hn]=m,k[Bn]=h,Ur(k,b,h),Ii(k),m.stateNode=k):m.memoizedState=kg(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:return zt(m),h===null&&Ei&&(k=m.stateNode=W_(m.type,m.pendingProps,ut.current),ta=m,za=!0,z=Ps,tu(m.type)?(jg=z,Ps=al(k.firstChild)):Ps=z),ia(h,m,m.pendingProps.children,b),qc(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&Ei&&((z=k=Ps)&&(k=pw(k,m.type,m.pendingProps,za),k!==null?(m.stateNode=k,ta=m,Ps=al(k.firstChild),za=!1,z=!0):z=!1),z||Qa(m)),zt(m),z=m.type,U=m.pendingProps,oe=h!==null?h.memoizedProps:null,k=U.children,wg(z,U)?k=null:oe!==null&&wg(z,oe)&&(m.flags|=32),m.memoizedState!==null&&(z=Cr(h,m,Hc,null,null,b),C._currentValue=z),qc(h,m),ia(h,m,k,b),m.child;case 6:return h===null&&Ei&&((h=b=Ps)&&(b=q_(b,m.pendingProps,za),b!==null?(m.stateNode=b,ta=m,Ps=null,h=!0):h=!1),h||Qa(m)),null;case 13:return m_(h,m,b);case 4:return Ge(m,m.stateNode.containerInfo),k=m.pendingProps,h===null?m.child=_r(m,null,k,b):ia(h,m,k,b),m.child;case 11:return Zm(h,m,m.type,m.pendingProps,b);case 7:return ia(h,m,m.pendingProps,b),m.child;case 8:return ia(h,m,m.pendingProps.children,b),m.child;case 12:return ia(h,m,m.pendingProps.children,b),m.child;case 10:return k=m.pendingProps,xa(m,m.type,k.value),ia(h,m,k.children,b),m.child;case 9:return z=m.type._context,k=m.pendingProps.children,jl(m),z=yr(z),k=k(z),m.flags|=1,ia(h,m,k,b),m.child;case 14:return p_(h,m,m.type,m.pendingProps,b);case 15:return Ym(h,m,m.type,m.pendingProps,b);case 19:return g_(h,m,b);case 31:return k=m.pendingProps,b=m.mode,k={mode:k.mode,children:k.children},h===null?(b=cf(k,b),b.ref=m.ref,m.child=b,b.return=m,m=b):(b=Mo(h.child,k),b.ref=m.ref,m.child=b,b.return=m,m=b),m;case 22:return Vy(h,m,b);case 24:return jl(m),k=yr(er),h===null?(z=xp(),z===null&&(z=ks,U=Yh(),z.pooledCache=U,U.refCount++,U!==null&&(z.pooledCacheLanes|=b),z=U),m.memoizedState={parent:k,cache:z},mi(m),xa(m,er,z)):((h.lanes&b)!==0&&(Hu(h,m),qu(m,null,null,b),Kl()),z=h.memoizedState,U=m.memoizedState,z.parent!==k?(z={parent:k,cache:k},m.memoizedState=z,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=z),xa(m,er,k)):(k=U.cache,xa(m,er,k),k!==z.cache&&Bu(m,[er],b,!0))),ia(h,m,m.pendingProps.children,b),m.child;case 29:throw m.pendingProps}throw Error(i(156,m.tag))}function oc(h){h.flags|=4}function eg(h,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!Eg(m)){if(m=Ki.current,m!==null&&((Ci&4194048)===Ci?Us!==null:(Ci&62914560)!==Ci&&(Ci&536870912)===0||m!==Us))throw kl=Ao,_p;h.flags|=8192}}function Qu(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?Ot():536870912,h.lanes|=m,Yd|=m)}function kr(h,m){if(!Ei)switch(h.tailMode){case"hidden":m=h.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var k=null;b!==null;)b.alternate!==null&&(k=b),b=b.sibling;k===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:k.sibling=null}}function $s(h){var m=h.alternate!==null&&h.alternate.child===h.child,b=0,k=0;if(m)for(var z=h.child;z!==null;)b|=z.lanes|z.childLanes,k|=z.subtreeFlags&65011712,k|=z.flags&65011712,z.return=h,z=z.sibling;else for(z=h.child;z!==null;)b|=z.lanes|z.childLanes,k|=z.subtreeFlags,k|=z.flags,z.return=h,z=z.sibling;return h.subtreeFlags|=k,h.childLanes=b,m}function Yy(h,m,b){var k=m.pendingProps;switch(Lc(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $s(m),null;case 1:return $s(m),null;case 3:return b=m.stateNode,k=null,h!==null&&(k=h.memoizedState.cache),m.memoizedState.cache!==k&&(m.flags|=2048),_a(er),Ye(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(Fu(m)?oc(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Gl())),$s(m),null;case 26:return b=m.memoizedState,h===null?(oc(m),b!==null?($s(m),eg(m,b)):($s(m),m.flags&=-16777217)):b?b!==h.memoizedState?(oc(m),$s(m),eg(m,b)):($s(m),m.flags&=-16777217):(h.memoizedProps!==k&&oc(m),$s(m),m.flags&=-16777217),null;case 27:Bt(m),b=ut.current;var z=m.type;if(h!==null&&m.stateNode!=null)h.memoizedProps!==k&&oc(m);else{if(!k){if(m.stateNode===null)throw Error(i(166));return $s(m),null}h=ot.current,Fu(m)?Lu(m):(h=W_(z,k,b),m.stateNode=h,oc(m))}return $s(m),null;case 5:if(Bt(m),b=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==k&&oc(m);else{if(!k){if(m.stateNode===null)throw Error(i(166));return $s(m),null}if(h=ot.current,Fu(m))Lu(m);else{switch(z=Sf(ut.current),h){case 1:h=z.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:h=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":h=z.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":h=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":h=z.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof k.is=="string"?z.createElement("select",{is:k.is}):z.createElement("select"),k.multiple?h.multiple=!0:k.size&&(h.size=k.size);break;default:h=typeof k.is=="string"?z.createElement(b,{is:k.is}):z.createElement(b)}}h[Hn]=m,h[Bn]=k;e:for(z=m.child;z!==null;){if(z.tag===5||z.tag===6)h.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===m)break e;for(;z.sibling===null;){if(z.return===null||z.return===m)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}m.stateNode=h;e:switch(Ur(h,b,k),b){case"button":case"input":case"select":case"textarea":h=!!k.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&oc(m)}}return $s(m),m.flags&=-16777217,null;case 6:if(h&&m.stateNode!=null)h.memoizedProps!==k&&oc(m);else{if(typeof k!="string"&&m.stateNode===null)throw Error(i(166));if(h=ut.current,Fu(m)){if(h=m.stateNode,b=m.memoizedProps,k=null,z=ta,z!==null)switch(z.tag){case 27:case 5:k=z.memoizedProps}h[Hn]=m,h=!!(h.nodeValue===b||k!==null&&k.suppressHydrationWarning===!0||V_(h.nodeValue,b)),h||Qa(m)}else h=Sf(h).createTextNode(k),h[Hn]=m,m.stateNode=h}return $s(m),null;case 13:if(k=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(z=Fu(m),k!==null&&k.dehydrated!==null){if(h===null){if(!z)throw Error(i(318));if(z=m.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(i(317));z[Hn]=m}else hs(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;$s(m),z=!1}else z=Gl(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=z),z=!0;if(!z)return m.flags&256?(na(m),m):(na(m),null)}if(na(m),(m.flags&128)!==0)return m.lanes=b,m;if(b=k!==null,h=h!==null&&h.memoizedState!==null,b){k=m.child,z=null,k.alternate!==null&&k.alternate.memoizedState!==null&&k.alternate.memoizedState.cachePool!==null&&(z=k.alternate.memoizedState.cachePool.pool);var U=null;k.memoizedState!==null&&k.memoizedState.cachePool!==null&&(U=k.memoizedState.cachePool.pool),U!==z&&(k.flags|=2048)}return b!==h&&b&&(m.child.flags|=8192),Qu(m,m.updateQueue),$s(m),null;case 4:return Ye(),h===null&&xg(m.stateNode.containerInfo),$s(m),null;case 10:return _a(m.type),$s(m),null;case 19:if(tt(os),z=m.memoizedState,z===null)return $s(m),null;if(k=(m.flags&128)!==0,U=z.rendering,U===null)if(k)kr(z,!1);else{if(qs!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(U=va(h),U!==null){for(m.flags|=128,kr(z,!1),h=U.updateQueue,m.updateQueue=h,Qu(m,h),m.subtreeFlags=0,h=b,b=m.child;b!==null;)Iu(b,h),b=b.sibling;return Ae(os,os.current&1|2),m.child}h=h.sibling}z.tail!==null&&Gn()>Dp&&(m.flags|=128,k=!0,kr(z,!1),m.lanes=4194304)}else{if(!k)if(h=va(U),h!==null){if(m.flags|=128,k=!0,h=h.updateQueue,m.updateQueue=h,Qu(m,h),kr(z,!0),z.tail===null&&z.tailMode==="hidden"&&!U.alternate&&!Ei)return $s(m),null}else 2*Gn()-z.renderingStartTime>Dp&&b!==536870912&&(m.flags|=128,k=!0,kr(z,!1),m.lanes=4194304);z.isBackwards?(U.sibling=m.child,m.child=U):(h=z.last,h!==null?h.sibling=U:m.child=U,z.last=U)}return z.tail!==null?(m=z.tail,z.rendering=m,z.tail=m.sibling,z.renderingStartTime=Gn(),m.sibling=null,h=os.current,Ae(os,k?h&1|2:h&1),m):($s(m),null);case 22:case 23:return na(m),Jh(),k=m.memoizedState!==null,h!==null?h.memoizedState!==null!==k&&(m.flags|=8192):k&&(m.flags|=8192),k?(b&536870912)!==0&&(m.flags&128)===0&&($s(m),m.subtreeFlags&6&&(m.flags|=8192)):$s(m),b=m.updateQueue,b!==null&&Qu(m,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),k=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(k=m.memoizedState.cachePool.pool),k!==b&&(m.flags|=2048),h!==null&&tt(ba),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),m.memoizedState.cache!==b&&(m.flags|=2048),_a(er),$s(m),null;case 25:return null;case 30:return null}throw Error(i(156,m.tag))}function tw(h,m){switch(Lc(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return _a(er),Ye(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return Bt(m),null;case 13:if(na(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(i(340));hs()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return tt(os),null;case 4:return Ye(),null;case 10:return _a(m.type),null;case 22:case 23:return na(m),Jh(),h!==null&&tt(ba),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return _a(er),null;case 25:return null;default:return null}}function Xy(h,m){switch(Lc(m),m.tag){case 3:_a(er),Ye();break;case 26:case 27:case 5:Bt(m);break;case 4:Ye();break;case 13:na(m);break;case 19:tt(os);break;case 10:_a(m.type);break;case 22:case 23:na(m),Jh(),h!==null&&tt(ba);break;case 24:_a(er)}}function Mp(h,m){try{var b=m.updateQueue,k=b!==null?b.lastEffect:null;if(k!==null){var z=k.next;b=z;do{if((b.tag&h)===h){k=void 0;var U=b.create,oe=b.inst;k=U(),oe.destroy=k}b=b.next}while(b!==z)}}catch(we){fs(m,m.return,we)}}function Ju(h,m,b){try{var k=m.updateQueue,z=k!==null?k.lastEffect:null;if(z!==null){var U=z.next;k=U;do{if((k.tag&h)===h){var oe=k.inst,we=oe.destroy;if(we!==void 0){oe.destroy=void 0,z=m;var $e=b,mt=we;try{mt()}catch($t){fs(z,$e,$t)}}}k=k.next}while(k!==U)}}catch($t){fs(m,m.return,$t)}}function Ky(h){var m=h.updateQueue;if(m!==null){var b=h.stateNode;try{vp(m,b)}catch(k){fs(h,h.return,k)}}}function y_(h,m,b){b.props=wa(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(k){fs(h,m,k)}}function Wd(h,m){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var k=h.stateNode;break;case 30:k=h.stateNode;break;default:k=h.stateNode}typeof b=="function"?h.refCleanup=b(k):b.current=k}}catch(z){fs(h,m,z)}}function Rl(h,m){var b=h.ref,k=h.refCleanup;if(b!==null)if(typeof k=="function")try{k()}catch(z){fs(h,m,z)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(z){fs(h,m,z)}else b.current=null}function Qy(h){var m=h.type,b=h.memoizedProps,k=h.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":b.autoFocus&&k.focus();break e;case"img":b.src?k.src=b.src:b.srcSet&&(k.srcset=b.srcSet)}}catch(z){fs(h,h.return,z)}}function Jy(h,m,b){try{var k=h.stateNode;U_(k,h.type,b,m),k[Bn]=m}catch(z){fs(h,h.return,z)}}function x_(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&tu(h.type)||h.tag===4}function e0(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||x_(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&tu(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function uf(h,m,b){var k=h.tag;if(k===5||k===6)h=h.stateNode,m?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(h,m):(m=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,m.appendChild(h),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=wf));else if(k!==4&&(k===27&&tu(h.type)&&(b=h.stateNode,m=null),h=h.child,h!==null))for(uf(h,m,b),h=h.sibling;h!==null;)uf(h,m,b),h=h.sibling}function df(h,m,b){var k=h.tag;if(k===5||k===6)h=h.stateNode,m?b.insertBefore(h,m):b.appendChild(h);else if(k!==4&&(k===27&&tu(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(df(h,m,b),h=h.sibling;h!==null;)df(h,m,b),h=h.sibling}function t0(h){var m=h.stateNode,b=h.memoizedProps;try{for(var k=h.type,z=m.attributes;z.length;)m.removeAttributeNode(z[0]);Ur(m,k,b),m[Hn]=h,m[Bn]=b}catch(U){fs(h,h.return,U)}}var Ba=!1,Ds=!1,n0=!1,__=typeof WeakSet=="function"?WeakSet:Set,Br=null;function nw(h,m){if(h=h.containerInfo,bg=ce,h=qh(h),Ed(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var k=b.getSelection&&b.getSelection();if(k&&k.rangeCount!==0){b=k.anchorNode;var z=k.anchorOffset,U=k.focusNode;k=k.focusOffset;try{b.nodeType,U.nodeType}catch(Zn){b=null;break e}var oe=0,we=-1,$e=-1,mt=0,$t=0,Jt=h,Nt=null;t:for(;;){for(var Dt;Jt!==b||z!==0&&Jt.nodeType!==3||(we=oe+z),Jt!==U||k!==0&&Jt.nodeType!==3||($e=oe+k),Jt.nodeType===3&&(oe+=Jt.nodeValue.length),(Dt=Jt.firstChild)!==null;)Nt=Jt,Jt=Dt;for(;;){if(Jt===h)break t;if(Nt===b&&++mt===z&&(we=oe),Nt===U&&++$t===k&&($e=oe),(Dt=Jt.nextSibling)!==null)break;Jt=Nt,Nt=Jt.parentNode}Jt=Dt}b=we===-1||$e===-1?null:{start:we,end:$e}}else b=null}b=b||{start:0,end:0}}else b=null;for(vg={focusedElem:h,selectionRange:b},ce=!1,Br=m;Br!==null;)if(m=Br,h=m.child,(m.subtreeFlags&1024)!==0&&h!==null)h.return=m,Br=h;else for(;Br!==null;){switch(m=Br,U=m.alternate,h=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&U!==null){h=void 0,b=m,z=U.memoizedProps,U=U.memoizedState,k=b.stateNode;try{var ii=wa(b.type,z,b.elementType===b.type);h=k.getSnapshotBeforeUpdate(ii,U),k.__reactInternalSnapshotBeforeUpdate=h}catch(Zn){fs(b,b.return,Zn)}}break;case 3:if((h&1024)!==0){if(h=m.stateNode.containerInfo,b=h.nodeType,b===9)Sg(h);else if(b===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":Sg(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(i(163))}if(h=m.sibling,h!==null){h.return=m.return,Br=h;break}Br=m.return}}function b_(h,m,b){var k=b.flags;switch(b.tag){case 0:case 11:case 15:Wc(h,b),k&4&&Mp(5,b);break;case 1:if(Wc(h,b),k&4)if(h=b.stateNode,m===null)try{h.componentDidMount()}catch(oe){fs(b,b.return,oe)}else{var z=wa(b.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(z,m,h.__reactInternalSnapshotBeforeUpdate)}catch(oe){fs(b,b.return,oe)}}k&64&&Ky(b),k&512&&Wd(b,b.return);break;case 3:if(Wc(h,b),k&64&&(h=b.updateQueue,h!==null)){if(m=null,b.child!==null)switch(b.child.tag){case 27:case 5:m=b.child.stateNode;break;case 1:m=b.child.stateNode}try{vp(h,m)}catch(oe){fs(b,b.return,oe)}}break;case 27:m===null&&k&4&&t0(b);case 26:case 5:Wc(h,b),m===null&&k&4&&Qy(b),k&512&&Wd(b,b.return);break;case 12:Wc(h,b);break;case 13:Wc(h,b),k&4&&hf(h,b),k&64&&(h=b.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(b=dg.bind(null,b),G_(h,b))));break;case 22:if(k=b.memoizedState!==null||Ba,!k){m=m!==null&&m.memoizedState!==null||Ds,z=Ba;var U=Ds;Ba=k,(Ds=m)&&!U?tl(h,b,(b.subtreeFlags&8772)!==0):Wc(h,b),Ba=z,Ds=U}break;case 30:break;default:Wc(h,b)}}function v_(h){var m=h.alternate;m!==null&&(h.alternate=null,v_(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&us(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var Hs=null,Sa=!1;function Gc(h,m,b){for(b=b.child;b!==null;)i0(h,m,b),b=b.sibling}function i0(h,m,b){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(cn,b)}catch(U){}switch(b.tag){case 26:Ds||Rl(b,m),Gc(h,m,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Ds||Rl(b,m);var k=Hs,z=Sa;tu(b.type)&&(Hs=b.stateNode,Sa=!1),Gc(h,m,b),Vp(b.stateNode),Hs=k,Sa=z;break;case 5:Ds||Rl(b,m);case 6:if(k=Hs,z=Sa,Hs=null,Gc(h,m,b),Hs=k,Sa=z,Hs!==null)if(Sa)try{(Hs.nodeType===9?Hs.body:Hs.nodeName==="HTML"?Hs.ownerDocument.body:Hs).removeChild(b.stateNode)}catch(U){fs(b,m,U)}else try{Hs.removeChild(b.stateNode)}catch(U){fs(b,m,U)}break;case 18:Hs!==null&&(Sa?(h=Hs,v0(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,b.stateNode),ra(h)):v0(Hs,b.stateNode));break;case 4:k=Hs,z=Sa,Hs=b.stateNode.containerInfo,Sa=!0,Gc(h,m,b),Hs=k,Sa=z;break;case 0:case 11:case 14:case 15:Ds||Ju(2,b,m),Ds||Ju(4,b,m),Gc(h,m,b);break;case 1:Ds||(Rl(b,m),k=b.stateNode,typeof k.componentWillUnmount=="function"&&y_(b,m,k)),Gc(h,m,b);break;case 21:Gc(h,m,b);break;case 22:Ds=(k=Ds)||b.memoizedState!==null,Gc(h,m,b),Ds=k;break;default:Gc(h,m,b)}}function hf(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{ra(h)}catch(b){fs(m,m.return,b)}}function iw(h){switch(h.tag){case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new __),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new __),m;default:throw Error(i(435,h.tag))}}function zs(h,m){var b=iw(h);m.forEach(function(k){var z=hg.bind(null,h,k);b.has(k)||(b.add(k),k.then(z,z))})}function Vr(h,m){var b=m.deletions;if(b!==null)for(var k=0;k<b.length;k++){var z=b[k],U=h,oe=m,we=oe;e:for(;we!==null;){switch(we.tag){case 27:if(tu(we.type)){Hs=we.stateNode,Sa=!1;break e}break;case 5:Hs=we.stateNode,Sa=!1;break e;case 3:case 4:Hs=we.stateNode.containerInfo,Sa=!0;break e}we=we.return}if(Hs===null)throw Error(i(160));i0(U,oe,z),Hs=null,Sa=!1,U=z.alternate,U!==null&&(U.return=null),z.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)Ep(m,h),m=m.sibling}var el=null;function Ep(h,m){var b=h.alternate,k=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Vr(m,h),ja(h),k&4&&(Ju(3,h,h.return),Mp(3,h),Ju(5,h,h.return));break;case 1:Vr(m,h),ja(h),k&512&&(Ds||b===null||Rl(b,b.return)),k&64&&Ba&&(h=h.updateQueue,h!==null&&(k=h.callbacks,k!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?k:b.concat(k))));break;case 26:var z=el;if(Vr(m,h),ja(h),k&512&&(Ds||b===null||Rl(b,b.return)),k&4){var U=b!==null?b.memoizedState:null;if(k=h.memoizedState,b===null)if(k===null)if(h.stateNode===null){e:{k=h.type,b=h.memoizedProps,z=z.ownerDocument||z;t:switch(k){case"title":U=z.getElementsByTagName("title")[0],(!U||U[Wi]||U[Hn]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=z.createElement(k),z.head.insertBefore(U,z.querySelector("head > title"))),Ur(U,k,b),U[Hn]=h,Ii(U),k=U;break e;case"link":var oe=Mg("link","href",z).get(k+(b.href||""));if(oe){for(var we=0;we<oe.length;we++)if(U=oe[we],U.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&U.getAttribute("rel")===(b.rel==null?null:b.rel)&&U.getAttribute("title")===(b.title==null?null:b.title)&&U.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){oe.splice(we,1);break t}}U=z.createElement(k),Ur(U,k,b),z.head.appendChild(U);break;case"meta":if(oe=Mg("meta","content",z).get(k+(b.content||""))){for(we=0;we<oe.length;we++)if(U=oe[we],U.getAttribute("content")===(b.content==null?null:""+b.content)&&U.getAttribute("name")===(b.name==null?null:b.name)&&U.getAttribute("property")===(b.property==null?null:b.property)&&U.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&U.getAttribute("charset")===(b.charSet==null?null:b.charSet)){oe.splice(we,1);break t}}U=z.createElement(k),Ur(U,k,b),z.head.appendChild(U);break;default:throw Error(i(468,k))}U[Hn]=h,Ii(U),k=U}h.stateNode=k}else qp(z,h.type,h.stateNode);else h.stateNode=Ng(z,k,h.memoizedProps);else U!==k?(U===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):U.count--,k===null?qp(z,h.type,h.stateNode):Ng(z,k,h.memoizedProps)):k===null&&h.stateNode!==null&&Jy(h,h.memoizedProps,b.memoizedProps)}break;case 27:Vr(m,h),ja(h),k&512&&(Ds||b===null||Rl(b,b.return)),b!==null&&k&4&&Jy(h,h.memoizedProps,b.memoizedProps);break;case 5:if(Vr(m,h),ja(h),k&512&&(Ds||b===null||Rl(b,b.return)),h.flags&32){z=h.stateNode;try{Ga(z,"")}catch(Dt){fs(h,h.return,Dt)}}k&4&&h.stateNode!=null&&(z=h.memoizedProps,Jy(h,z,b!==null?b.memoizedProps:z)),k&1024&&(n0=!0);break;case 6:if(Vr(m,h),ja(h),k&4){if(h.stateNode===null)throw Error(i(162));k=h.memoizedProps,b=h.stateNode;try{b.nodeValue=k}catch(Dt){fs(h,h.return,Dt)}}break;case 3:if(Hp=null,z=el,el=sh(m.containerInfo),Vr(m,h),el=z,ja(h),k&4&&b!==null&&b.memoizedState.isDehydrated)try{ra(m.containerInfo)}catch(Dt){fs(h,h.return,Dt)}n0&&(n0=!1,ff(h));break;case 4:k=el,el=sh(h.stateNode.containerInfo),Vr(m,h),ja(h),el=k;break;case 12:Vr(m,h),ja(h);break;case 13:Vr(m,h),ja(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Xd=Gn()),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,zs(h,k)));break;case 22:z=h.memoizedState!==null;var $e=b!==null&&b.memoizedState!==null,mt=Ba,$t=Ds;if(Ba=mt||z,Ds=$t||$e,Vr(m,h),Ds=$t,Ba=mt,ja(h),k&8192)e:for(m=h.stateNode,m._visibility=z?m._visibility&-2:m._visibility|1,z&&(b===null||$e||Ba||Ds||ed(h)),b=null,m=h;;){if(m.tag===5||m.tag===26){if(b===null){$e=b=m;try{if(U=$e.stateNode,z)oe=U.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{we=$e.stateNode;var Jt=$e.memoizedProps.style,Nt=Jt!=null&&Jt.hasOwnProperty("display")?Jt.display:null;we.style.display=Nt==null||typeof Nt=="boolean"?"":(""+Nt).trim()}}catch(Dt){fs($e,$e.return,Dt)}}}else if(m.tag===6){if(b===null){$e=m;try{$e.stateNode.nodeValue=z?"":$e.memoizedProps}catch(Dt){fs($e,$e.return,Dt)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;b===m&&(b=null),m=m.return}b===m&&(b=null),m.sibling.return=m.return,m=m.sibling}k&4&&(k=h.updateQueue,k!==null&&(b=k.retryQueue,b!==null&&(k.retryQueue=null,zs(h,b))));break;case 19:Vr(m,h),ja(h),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,zs(h,k)));break;case 30:break;case 21:break;default:Vr(m,h),ja(h)}}function ja(h){var m=h.flags;if(m&2){try{for(var b,k=h.return;k!==null;){if(x_(k)){b=k;break}k=k.return}if(b==null)throw Error(i(160));switch(b.tag){case 27:var z=b.stateNode,U=e0(h);df(h,U,z);break;case 5:var oe=b.stateNode;b.flags&32&&(Ga(oe,""),b.flags&=-33);var we=e0(h);df(h,we,oe);break;case 3:case 4:var $e=b.stateNode.containerInfo,mt=e0(h);uf(h,mt,$e);break;default:throw Error(i(161))}}catch($t){fs(h,h.return,$t)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function ff(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;ff(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),h=h.sibling}}function Wc(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)b_(h,m.alternate,m),m=m.sibling}function ed(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:Ju(4,m,m.return),ed(m);break;case 1:Rl(m,m.return);var b=m.stateNode;typeof b.componentWillUnmount=="function"&&y_(m,m.return,b),ed(m);break;case 27:Vp(m.stateNode);case 26:case 5:Rl(m,m.return),ed(m);break;case 22:m.memoizedState===null&&ed(m);break;case 30:ed(m);break;default:ed(m)}h=h.sibling}}function tl(h,m,b){for(b=b&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var k=m.alternate,z=h,U=m,oe=U.flags;switch(U.tag){case 0:case 11:case 15:tl(z,U,b),Mp(4,U);break;case 1:if(tl(z,U,b),k=U,z=k.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(mt){fs(k,k.return,mt)}if(k=U,z=k.updateQueue,z!==null){var we=k.stateNode;try{var $e=z.shared.hiddenCallbacks;if($e!==null)for(z.shared.hiddenCallbacks=null,z=0;z<$e.length;z++)bp($e[z],we)}catch(mt){fs(k,k.return,mt)}}b&&oe&64&&Ky(U),Wd(U,U.return);break;case 27:t0(U);case 26:case 5:tl(z,U,b),b&&k===null&&oe&4&&Qy(U),Wd(U,U.return);break;case 12:tl(z,U,b);break;case 13:tl(z,U,b),b&&oe&4&&hf(z,U);break;case 22:U.memoizedState===null&&tl(z,U,b),Wd(U,U.return);break;case 30:break;default:tl(z,U,b)}m=m.sibling}}function Ap(h,m){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&Yo(b))}function td(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Yo(h))}function zo(h,m,b,k){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Zd(h,m,b,k),m=m.sibling}function Zd(h,m,b,k){var z=m.flags;switch(m.tag){case 0:case 11:case 15:zo(h,m,b,k),z&2048&&Mp(9,m);break;case 1:zo(h,m,b,k);break;case 3:zo(h,m,b,k),z&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Yo(h)));break;case 12:if(z&2048){zo(h,m,b,k),h=m.stateNode;try{var U=m.memoizedProps,oe=U.id,we=U.onPostCommit;typeof we=="function"&&we(oe,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch($e){fs(m,m.return,$e)}}else zo(h,m,b,k);break;case 13:zo(h,m,b,k);break;case 23:break;case 22:U=m.stateNode,oe=m.alternate,m.memoizedState!==null?U._visibility&2?zo(h,m,b,k):Pp(h,m):U._visibility&2?zo(h,m,b,k):(U._visibility|=2,lc(h,m,b,k,(m.subtreeFlags&10256)!==0)),z&2048&&Ap(oe,m);break;case 24:zo(h,m,b,k),z&2048&&td(m.alternate,m);break;default:zo(h,m,b,k)}}function lc(h,m,b,k,z){for(z=z&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var U=h,oe=m,we=b,$e=k,mt=oe.flags;switch(oe.tag){case 0:case 11:case 15:lc(U,oe,we,$e,z),Mp(8,oe);break;case 23:break;case 22:var $t=oe.stateNode;oe.memoizedState!==null?$t._visibility&2?lc(U,oe,we,$e,z):Pp(U,oe):($t._visibility|=2,lc(U,oe,we,$e,z)),z&&mt&2048&&Ap(oe.alternate,oe);break;case 24:lc(U,oe,we,$e,z),z&&mt&2048&&td(oe.alternate,oe);break;default:lc(U,oe,we,$e,z)}m=m.sibling}}function Pp(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var b=h,k=m,z=k.flags;switch(k.tag){case 22:Pp(b,k),z&2048&&Ap(k.alternate,k);break;case 24:Pp(b,k),z&2048&&td(k.alternate,k);break;default:Pp(b,k)}m=m.sibling}}var pf=8192;function nl(h){if(h.subtreeFlags&pf)for(h=h.child;h!==null;)w_(h),h=h.sibling}function w_(h){switch(h.tag){case 26:nl(h),h.flags&pf&&h.memoizedState!==null&&xw(el,h.memoizedState,h.memoizedProps);break;case 5:nl(h);break;case 3:case 4:var m=el;el=sh(h.stateNode.containerInfo),nl(h),el=m;break;case 22:h.memoizedState===null&&(m=h.alternate,m!==null&&m.memoizedState!==null?(m=pf,pf=16777216,nl(h),pf=m):nl(h));break;default:nl(h)}}function s0(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function Zc(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var b=0;b<m.length;b++){var k=m[b];Br=k,r0(k,h)}s0(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)tg(h),h=h.sibling}function tg(h){switch(h.tag){case 0:case 11:case 15:Zc(h),h.flags&2048&&Ju(9,h,h.return);break;case 3:Zc(h);break;case 12:Zc(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,Rp(h)):Zc(h);break;default:Zc(h)}}function Rp(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var b=0;b<m.length;b++){var k=m[b];Br=k,r0(k,h)}s0(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:Ju(8,m,m.return),Rp(m);break;case 22:b=m.stateNode,b._visibility&2&&(b._visibility&=-3,Rp(m));break;default:Rp(m)}h=h.sibling}}function r0(h,m){for(;Br!==null;){var b=Br;switch(b.tag){case 0:case 11:case 15:Ju(8,b,m);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var k=b.memoizedState.cachePool.pool;k!=null&&k.refCount++}break;case 24:Yo(b.memoizedState.cache)}if(k=b.child,k!==null)k.return=b,Br=k;else e:for(b=h;Br!==null;){k=Br;var z=k.sibling,U=k.return;if(v_(k),k===b){Br=null;break e}if(z!==null){z.return=U,Br=z;break e}Br=U}}}var sw={getCacheForType:function(h){var m=yr(er),b=m.data.get(h);return b===void 0&&(b=h(),m.data.set(h,b)),b}},rw=typeof WeakMap=="function"?WeakMap:Map,ls=0,ks=null,Ai=null,Ci=0,cs=0,Io=null,Yc=!1,mf=!1,ng=!1,Xc=0,qs=0,il=0,Kc=0,a0=0,sl=0,Yd=0,gf=null,lo=null,o0=!1,Xd=0,Dp=1/0,ig=null,nd=null,sa=0,id=null,yf=null,Kd=0,zp=0,sg=null,l0=null,xf=0,c0=null;function Ca(){if((ls&2)!==0&&Ci!==0)return Ci&-Ci;if(ze.T!==null){var h=Ia;return h!==0?h:p0()}return Gi()}function S_(){sl===0&&(sl=(Ci&536870912)===0||Ei?Gt():536870912);var h=Ki.current;return h!==null&&(h.flags|=32),sl}function co(h,m,b){(h===ks&&(cs===2||cs===9)||h.cancelPendingCommit!==null)&&(cc(h,0),Qc(h,Ci,sl,!1)),Tn(h,b),((ls&2)===0||h!==ks)&&(h===ks&&((ls&2)===0&&(Kc|=b),qs===4&&Qc(h,Ci,sl,!1)),rl(h))}function j_(h,m,b){if((ls&6)!==0)throw Error(i(327));var k=!b&&(m&124)===0&&(m&h.expiredLanes)===0||et(h,m),z=k?T_(h,m):Ip(h,m,!0),U=k;do{if(z===0){mf&&!k&&Qc(h,m,0,!1);break}else{if(b=h.current.alternate,U&&!aw(b)){z=Ip(h,m,!1),U=!1;continue}if(z===2){if(U=m,h.errorRecoveryDisabledLanes&U)var oe=0;else oe=h.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){m=oe;e:{var we=h;z=gf;var $e=we.current.memoizedState.isDehydrated;if($e&&(cc(we,oe).flags|=256),oe=Ip(we,oe,!1),oe!==2){if(ng&&!$e){we.errorRecoveryDisabledLanes|=U,Kc|=U,z=4;break e}U=lo,lo=z,U!==null&&(lo===null?lo=U:lo.push.apply(lo,U))}z=oe}if(U=!1,z!==2)continue}}if(z===1){cc(h,0),Qc(h,m,0,!0);break}e:{switch(k=h,U=z,U){case 0:case 1:throw Error(i(345));case 4:if((m&4194048)!==m)break;case 6:Qc(k,m,sl,!Yc);break e;case 2:lo=null;break;case 3:case 5:break;default:throw Error(i(329))}if((m&62914560)===m&&(z=Xd+300-Gn(),10<z)){if(Qc(k,m,sl,!Yc),nt(k,0,!0)!==0)break e;k.timeoutHandle=uo(C_.bind(null,k,b,lo,ig,o0,m,sl,Kc,Yd,Yc,U,2,-0,0),z);break e}C_(k,b,lo,ig,o0,m,sl,Kc,Yd,Yc,U,0,-0,0)}}break}while(!0);rl(h)}function C_(h,m,b,k,z,U,oe,we,$e,mt,$t,Jt,Nt,Dt){if(h.timeoutHandle=-1,Jt=m.subtreeFlags,(Jt&8192||(Jt&16785408)===16785408)&&(lh={stylesheets:null,count:0,unsuspend:T0},w_(m),Jt=f(),Jt!==null)){h.cancelPendingCommit=Jt(E_.bind(null,h,m,U,b,k,z,oe,we,$e,$t,1,Nt,Dt)),Qc(h,U,oe,!mt);return}E_(h,m,U,b,k,z,oe,we,$e)}function aw(h){for(var m=h;;){var b=m.tag;if((b===0||b===11||b===15)&&m.flags&16384&&(b=m.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var k=0;k<b.length;k++){var z=b[k],U=z.getSnapshot;z=z.value;try{if(!pa(U(),z))return!1}catch(oe){return!1}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Qc(h,m,b,k){m&=~a0,m&=~Kc,h.suspendedLanes|=m,h.pingedLanes&=~m,k&&(h.warmLanes|=m),k=h.expirationTimes;for(var z=m;0<z;){var U=31-je(z),oe=1<<U;k[U]=-1,z&=~oe}b!==0&&Ct(h,b,m)}function rg(){return(ls&6)===0?(eh(0),!1):!0}function u0(){if(Ai!==null){if(cs===0)var h=Ai.return;else h=Ai,Eo=Zo=null,Cp(h),ao=null,sc=0,h=Ai;for(;h!==null;)Xy(h.alternate,h),h=h.return;Ai=null}}function cc(h,m){var b=h.timeoutHandle;b!==-1&&(h.timeoutHandle=-1,Cf(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),u0(),ks=h,Ai=b=Mo(h.current,null),Ci=m,cs=0,Io=null,Yc=!1,mf=et(h,m),ng=!1,Yd=sl=a0=Kc=il=qs=0,lo=gf=null,o0=!1,(m&8)!==0&&(m|=m&32);var k=h.entangledLanes;if(k!==0)for(h=h.entanglements,k&=m;0<k;){var z=31-je(k),U=1<<z;m|=h[z],k&=~U}return Xc=m,Hl(),b}function ur(h,m){gi=null,ze.H=xr,m===Tl||m===Yl?(m=$u(),cs=3):m===_p?(m=$u(),cs=4):cs=m===Tp?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,Io=m,Ai===null&&(qs=1,rc(h,ga(m,h.current)))}function ag(){var h=ze.H;return ze.H=xr,h===null?xr:h}function d0(){var h=ze.A;return ze.A=sw,h}function og(){qs=4,Yc||(Ci&4194048)!==Ci&&Ki.current!==null||(mf=!0),(il&134217727)===0&&(Kc&134217727)===0||ks===null||Qc(ks,Ci,sl,!1)}function Ip(h,m,b){var k=ls;ls|=2;var z=ag(),U=d0();(ks!==h||Ci!==m)&&(ig=null,cc(h,m)),m=!1;var oe=qs;e:do try{if(cs!==0&&Ai!==null){var we=Ai,$e=Io;switch(cs){case 8:u0(),oe=6;break e;case 3:case 2:case 9:case 6:Ki.current===null&&(m=!0);var mt=cs;if(cs=0,Io=null,bf(h,we,$e,mt),b&&mf){oe=0;break e}break;default:mt=cs,cs=0,Io=null,bf(h,we,$e,mt)}}_f(),oe=qs;break}catch($t){ur(h,$t)}while(!0);return m&&h.shellSuspendCounter++,Eo=Zo=null,ls=k,ze.H=z,ze.A=U,Ai===null&&(ks=null,Ci=0,Hl()),oe}function _f(){for(;Ai!==null;)k_(Ai)}function T_(h,m){var b=ls;ls|=2;var k=ag(),z=d0();ks!==h||Ci!==m?(ig=null,Dp=Gn()+500,cc(h,m)):mf=et(h,m);e:do try{if(cs!==0&&Ai!==null){m=Ai;var U=Io;t:switch(cs){case 1:cs=0,Io=null,bf(h,m,U,1);break;case 2:case 9:if(xn(U)){cs=0,Io=null,N_(m);break}m=function(){cs!==2&&cs!==9||ks!==h||(cs=7),rl(h)},U.then(m,m);break e;case 3:cs=7;break e;case 4:cs=5;break e;case 7:xn(U)?(cs=0,Io=null,N_(m)):(cs=0,Io=null,bf(h,m,U,7));break;case 5:var oe=null;switch(Ai.tag){case 26:oe=Ai.memoizedState;case 5:case 27:var we=Ai;if(!oe||Eg(oe)){cs=0,Io=null;var $e=we.sibling;if($e!==null)Ai=$e;else{var mt=we.return;mt!==null?(Ai=mt,lg(mt)):Ai=null}break t}}cs=0,Io=null,bf(h,m,U,5);break;case 6:cs=0,Io=null,bf(h,m,U,6);break;case 8:u0(),qs=6;break e;default:throw Error(i(462))}}ow();break}catch($t){ur(h,$t)}while(!0);return Eo=Zo=null,ze.H=k,ze.A=z,ls=b,Ai!==null?0:(ks=null,Ci=0,Hl(),qs)}function ow(){for(;Ai!==null&&!_n();)k_(Ai)}function k_(h){var m=Jm(h.alternate,h,Xc);h.memoizedProps=h.pendingProps,m===null?lg(h):Ai=m}function N_(h){var m=h,b=m.alternate;switch(m.tag){case 15:case 0:m=Gd(b,m,m.pendingProps,m.type,void 0,Ci);break;case 11:m=Gd(b,m,m.pendingProps,m.type.render,m.ref,Ci);break;case 5:Cp(m);default:Xy(b,m),m=Ai=Iu(m,Xc),m=Jm(b,m,Xc)}h.memoizedProps=h.pendingProps,m===null?lg(h):Ai=m}function bf(h,m,b,k){Eo=Zo=null,Cp(m),ao=null,sc=0;var z=m.return;try{if(f_(h,z,m,b,Ci)){qs=1,rc(h,ga(b,h.current)),Ai=null;return}}catch(U){if(z!==null)throw Ai=z,U;qs=1,rc(h,ga(b,h.current)),Ai=null;return}m.flags&32768?(Ei||k===1?h=!0:mf||(Ci&536870912)!==0?h=!1:(Yc=h=!0,(k===2||k===9||k===3||k===6)&&(k=Ki.current,k!==null&&k.tag===13&&(k.flags|=16384))),M_(m,h)):lg(m)}function lg(h){var m=h;do{if((m.flags&32768)!==0){M_(m,Yc);return}h=m.return;var b=Yy(m.alternate,m,Xc);if(b!==null){Ai=b;return}if(m=m.sibling,m!==null){Ai=m;return}Ai=m=h}while(m!==null);qs===0&&(qs=5)}function M_(h,m){do{var b=tw(h.alternate,h);if(b!==null){b.flags&=32767,Ai=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!m&&(h=h.sibling,h!==null)){Ai=h;return}Ai=h=b}while(h!==null);qs=6,Ai=null}function E_(h,m,b,k,z,U,oe,we,$e){h.cancelPendingCommit=null;do cg();while(sa!==0);if((ls&6)!==0)throw Error(i(327));if(m!==null){if(m===h.current)throw Error(i(177));if(U=m.lanes|m.childLanes,U|=zu,dt(h,b,U,oe,we,$e),h===ks&&(Ai=ks=null,Ci=0),yf=m,id=h,Kd=b,zp=U,sg=z,l0=k,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,lw(ge,function(){return h0(),null})):(h.callbackNode=null,h.callbackPriority=0),k=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||k){k=ze.T,ze.T=null,z=Qe.p,Qe.p=2,oe=ls,ls|=4;try{nw(h,m,b)}finally{ls=oe,Qe.p=z,ze.T=k}}sa=1,A_(),P_(),R_()}}function A_(){if(sa===1){sa=0;var h=id,m=yf,b=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||b){b=ze.T,ze.T=null;var k=Qe.p;Qe.p=2;var z=ls;ls|=4;try{Ep(m,h);var U=vg,oe=qh(h.containerInfo),we=U.focusedElem,$e=U.selectionRange;if(oe!==we&&we&&we.ownerDocument&&$o(we.ownerDocument.documentElement,we)){if($e!==null&&Ed(we)){var mt=$e.start,$t=$e.end;if($t===void 0&&($t=mt),"selectionStart"in we)we.selectionStart=mt,we.selectionEnd=Math.min($t,we.value.length);else{var Jt=we.ownerDocument||document,Nt=Jt&&Jt.defaultView||window;if(Nt.getSelection){var Dt=Nt.getSelection(),ii=we.textContent.length,Zn=Math.min($e.start,ii),$i=$e.end===void 0?Zn:Math.min($e.end,ii);!Dt.extend&&Zn>$i&&(oe=$i,$i=Zn,Zn=oe);var gt=Md(we,Zn),rt=Md(we,$i);if(gt&&rt&&(Dt.rangeCount!==1||Dt.anchorNode!==gt.node||Dt.anchorOffset!==gt.offset||Dt.focusNode!==rt.node||Dt.focusOffset!==rt.offset)){var jt=Jt.createRange();jt.setStart(gt.node,gt.offset),Dt.removeAllRanges(),Zn>$i?(Dt.addRange(jt),Dt.extend(rt.node,rt.offset)):(jt.setEnd(rt.node,rt.offset),Dt.addRange(jt))}}}}for(Jt=[],Dt=we;Dt=Dt.parentNode;)Dt.nodeType===1&&Jt.push({element:Dt,left:Dt.scrollLeft,top:Dt.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<Jt.length;we++){var Kt=Jt[we];Kt.element.scrollLeft=Kt.left,Kt.element.scrollTop=Kt.top}}ce=!!bg,vg=bg=null}finally{ls=z,Qe.p=k,ze.T=b}}h.current=m,sa=2}}function P_(){if(sa===2){sa=0;var h=id,m=yf,b=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||b){b=ze.T,ze.T=null;var k=Qe.p;Qe.p=2;var z=ls;ls|=4;try{b_(h,m.alternate,m)}finally{ls=z,Qe.p=k,ze.T=b}}sa=3}}function R_(){if(sa===4||sa===3){sa=0,Xn();var h=id,m=yf,b=Kd,k=l0;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?sa=5:(sa=0,yf=id=null,D_(h,h.pendingLanes));var z=h.pendingLanes;if(z===0&&(nd=null),vn(b),m=m.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(cn,m,void 0,(m.current.flags&128)===128)}catch($e){}if(k!==null){m=ze.T,z=Qe.p,Qe.p=2,ze.T=null;try{for(var U=h.onRecoverableError,oe=0;oe<k.length;oe++){var we=k[oe];U(we.value,{componentStack:we.stack})}}finally{ze.T=m,Qe.p=z}}(Kd&3)!==0&&cg(),rl(h),z=h.pendingLanes,(b&4194090)!==0&&(z&42)!==0?h===c0?xf++:(xf=0,c0=h):xf=0,eh(0)}}function D_(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,Yo(m)))}function cg(h){return A_(),P_(),R_(),h0()}function h0(){if(sa!==5)return!1;var h=id,m=zp;zp=0;var b=vn(Kd),k=ze.T,z=Qe.p;try{Qe.p=32>b?32:b,ze.T=null,b=sg,sg=null;var U=id,oe=Kd;if(sa=0,yf=id=null,Kd=0,(ls&6)!==0)throw Error(i(331));var we=ls;if(ls|=4,tg(U.current),Zd(U,U.current,oe,b),ls=we,eh(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(cn,U)}catch($e){}return!0}finally{Qe.p=z,ze.T=k,D_(h,m)}}function ug(h,m,b){m=ga(b,m),m=Gm(h.stateNode,m,2),h=Po(h,m,2),h!==null&&(Tn(h,2),rl(h))}function fs(h,m,b){if(h.tag===3)ug(h,h,b);else for(;m!==null;){if(m.tag===3){ug(m,h,b);break}else if(m.tag===1){var k=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(nd===null||!nd.has(k))){h=ga(b,h),b=h_(2),k=Po(m,b,2),k!==null&&(Wm(b,k,m,h),Tn(k,2),rl(k));break}}m=m.return}}function uc(h,m,b){var k=h.pingCache;if(k===null){k=h.pingCache=new rw;var z=new Set;k.set(m,z)}else z=k.get(m),z===void 0&&(z=new Set,k.set(m,z));z.has(b)||(ng=!0,z.add(b),h=Op.bind(null,h,m,b),m.then(h,h))}function Op(h,m,b){var k=h.pingCache;k!==null&&k.delete(m),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,ks===h&&(Ci&b)===b&&(qs===4||qs===3&&(Ci&62914560)===Ci&&300>Gn()-Xd?(ls&2)===0&&cc(h,0):a0|=b,Yd===Ci&&(Yd=0)),rl(h)}function Qd(h,m){m===0&&(m=Ot()),h=No(h,m),h!==null&&(Tn(h,m),rl(h))}function dg(h){var m=h.memoizedState,b=0;m!==null&&(b=m.retryLane),Qd(h,b)}function hg(h,m){var b=0;switch(h.tag){case 13:var k=h.stateNode,z=h.memoizedState;z!==null&&(b=z.retryLane);break;case 19:k=h.stateNode;break;case 22:k=h.stateNode._retryCache;break;default:throw Error(i(314))}k!==null&&k.delete(m),Qd(h,b)}function lw(h,m){return Lt(h,m)}var fg=null,Jd=null,pg=!1,mg=!1,gg=!1,sd=0;function rl(h){h!==Jd&&h.next===null&&(Jd===null?fg=Jd=h:Jd=Jd.next=h),mg=!0,pg||(pg=!0,uw())}function eh(h,m){if(!gg&&mg){gg=!0;do for(var b=!1,k=fg;k!==null;){if(h!==0){var z=k.pendingLanes;if(z===0)var U=0;else{var oe=k.suspendedLanes,we=k.pingedLanes;U=(1<<31-je(42|h)+1)-1,U&=z&~(oe&~we),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(b=!0,O_(k,U))}else U=Ci,U=nt(k,k===ks?U:0,k.cancelPendingCommit!==null||k.timeoutHandle!==-1),(U&3)===0||et(k,U)||(b=!0,O_(k,U));k=k.next}while(b);gg=!1}}function cw(){f0()}function f0(){mg=pg=!1;var h=0;sd!==0&&($_()&&(h=sd),sd=0);for(var m=Gn(),b=null,k=fg;k!==null;){var z=k.next,U=z_(k,m);U===0?(k.next=null,b===null?fg=z:b.next=z,z===null&&(Jd=b)):(b=k,(h!==0||(U&3)!==0)&&(mg=!0)),k=z}eh(h)}function z_(h,m){for(var b=h.suspendedLanes,k=h.pingedLanes,z=h.expirationTimes,U=h.pendingLanes&-62914561;0<U;){var oe=31-je(U),we=1<<oe,$e=z[oe];$e===-1?((we&b)===0||(we&k)!==0)&&(z[oe]=Tt(we,m)):$e<=m&&(h.expiredLanes|=we),U&=~we}if(m=ks,b=Ci,b=nt(h,h===m?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),k=h.callbackNode,b===0||h===m&&(cs===2||cs===9)||h.cancelPendingCommit!==null)return k!==null&&k!==null&&nn(k),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||et(h,b)){if(m=b&-b,m===h.callbackPriority)return m;switch(k!==null&&nn(k),vn(b)){case 2:case 8:b=Ue;break;case 32:b=ge;break;case 268435456:b=ht;break;default:b=ge}return k=I_.bind(null,h),b=Lt(b,k),h.callbackPriority=m,h.callbackNode=b,m}return k!==null&&k!==null&&nn(k),h.callbackPriority=2,h.callbackNode=null,2}function I_(h,m){if(sa!==0&&sa!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(cg()&&h.callbackNode!==b)return null;var k=Ci;return k=nt(h,h===ks?k:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),k===0?null:(j_(h,k,m),z_(h,Gn()),h.callbackNode!=null&&h.callbackNode===b?I_.bind(null,h):null)}function O_(h,m){if(cg())return null;j_(h,m,!0)}function uw(){ih(function(){(ls&6)!==0?Lt(ln,cw):f0()})}function p0(){return sd===0&&(sd=Gt()),sd}function m0(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Wa(""+h)}function g0(h,m){var b=m.ownerDocument.createElement("input");return b.name=m.name,b.value=m.value,h.id&&b.setAttribute("form",h.id),m.parentNode.insertBefore(b,m),h=new FormData(h),b.parentNode.removeChild(b),h}function Jc(h,m,b,k,z){if(m==="submit"&&b&&b.stateNode===z){var U=m0((z[Bn]||null).action),oe=k.submitter;oe&&(m=(m=oe[Bn]||null)?m0(m.formAction):oe.getAttribute("formAction"),m!==null&&(U=m,oe=null));var we=new _l("action","action",null,k,z);h.push({event:we,listeners:[{instance:null,listener:function(){if(k.defaultPrevented){if(sd!==0){var $e=oe?g0(z,oe):new FormData(z);an(b,{pending:!0,data:$e,method:z.method,action:U},null,$e)}}else typeof U=="function"&&(we.preventDefault(),$e=oe?g0(z,oe):new FormData(z),an(b,{pending:!0,data:$e,method:z.method,action:U},U,$e))},currentTarget:z}]})}}for(var dc=0;dc<ma.length;dc++){var yg=ma[dc],y0=yg.toLowerCase(),dw=yg[0].toUpperCase()+yg.slice(1);Xa(y0,"on"+dw)}Xa(hp,"onAnimationEnd"),Xa(Rd,"onAnimationIteration"),Xa(Dd,"onAnimationStart"),Xa("dblclick","onDoubleClick"),Xa("focusin","onFocus"),Xa("focusout","onBlur"),Xa(Gh,"onTransitionRun"),Xa(fp,"onTransitionStart"),Xa(Pc,"onTransitionCancel"),Xa(Du,"onTransitionEnd"),Pr("onMouseEnter",["mouseout","mouseover"]),Pr("onMouseLeave",["mouseout","mouseover"]),Pr("onPointerEnter",["pointerout","pointerover"]),Pr("onPointerLeave",["pointerout","pointerover"]),Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rd));function L_(h,m){m=(m&4)!==0;for(var b=0;b<h.length;b++){var k=h[b],z=k.event;k=k.listeners;e:{var U=void 0;if(m)for(var oe=k.length-1;0<=oe;oe--){var we=k[oe],$e=we.instance,mt=we.currentTarget;if(we=we.listener,$e!==U&&z.isPropagationStopped())break e;U=we,z.currentTarget=mt;try{U(z)}catch($t){Yu($t)}z.currentTarget=null,U=$e}else for(oe=0;oe<k.length;oe++){if(we=k[oe],$e=we.instance,mt=we.currentTarget,we=we.listener,$e!==U&&z.isPropagationStopped())break e;U=we,z.currentTarget=mt;try{U(z)}catch($t){Yu($t)}z.currentTarget=null,U=$e}}}}function Ti(h,m){var b=m[Xt];b===void 0&&(b=m[Xt]=new Set);var k=h+"__bubble";b.has(k)||(_0(m,h,2,!1),b.add(k))}function Lp(h,m,b){var k=0;m&&(k|=4),_0(b,h,k,m)}var eu="_reactListening"+Math.random().toString(36).slice(2);function xg(h){if(!h[eu]){h[eu]=!0,Yr.forEach(function(b){b!=="selectionchange"&&(x0.has(b)||Lp(b,!1,h),Lp(b,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[eu]||(m[eu]=!0,Lp("selectionchange",!1,m))}}function _0(h,m,b,k){switch(Ze(m)){case 2:var z=he;break;case 8:z=xe;break;default:z=Se}b=z.bind(null,m,b,h),z=void 0,!Co||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(z=!0),k?z!==void 0?h.addEventListener(m,b,{capture:!0,passive:z}):h.addEventListener(m,b,!0):z!==void 0?h.addEventListener(m,b,{passive:z}):h.addEventListener(m,b,!1)}function Fp(h,m,b,k,z){var U=k;if((m&1)===0&&(m&2)===0&&k!==null)e:for(;;){if(k===null)return;var oe=k.tag;if(oe===3||oe===4){var we=k.stateNode.containerInfo;if(we===z)break;if(oe===4)for(oe=k.return;oe!==null;){var $e=oe.tag;if(($e===3||$e===4)&&oe.stateNode.containerInfo===z)return;oe=oe.return}for(;we!==null;){if(oe=sn(we),oe===null)return;if($e=oe.tag,$e===5||$e===6||$e===26||$e===27){k=U=oe;continue e}we=we.parentNode}}k=k.return}Ls(function(){var mt=U,$t=jo(b),Jt=[];e:{var Nt=Rc.get(h);if(Nt!==void 0){var Dt=_l,ii=h;switch(h){case"keypress":if(Zi(b)===0)break e;case"keydown":case"keyup":Dt=Za;break;case"focusin":ii="focus",Dt=kn;break;case"focusout":ii="blur",Dt=kn;break;case"beforeblur":case"afterblur":Dt=kn;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dt=pt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dt=kt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dt=kd;break;case hp:case Rd:case Dd:Dt=Cn;break;case Du:Dt=Iy;break;case"scroll":case"scrollend":Dt=Ss;break;case"wheel":Dt=Oy;break;case"copy":case"cut":case"paste":Dt=oi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dt=fa;break;case"toggle":case"beforetoggle":Dt=ip}var Zn=(m&4)!==0,$i=!Zn&&(h==="scroll"||h==="scrollend"),gt=Zn?Nt!==null?Nt+"Capture":null:Nt;Zn=[];for(var rt=mt,jt;rt!==null;){var Kt=rt;if(jt=Kt.stateNode,Kt=Kt.tag,Kt!==5&&Kt!==26&&Kt!==27||jt===null||gt===null||(Kt=ws(rt,gt),Kt!=null&&Zn.push(vf(rt,Kt,jt))),$i)break;rt=rt.return}0<Zn.length&&(Nt=new Dt(Nt,ii,null,b,$t),Jt.push({event:Nt,listeners:Zn}))}}if((m&7)===0){e:{if(Nt=h==="mouseover"||h==="pointerover",Dt=h==="mouseout"||h==="pointerout",Nt&&b!==ui&&(ii=b.relatedTarget||b.fromElement)&&(sn(ii)||ii[xi]))break e;if((Dt||Nt)&&(Nt=$t.window===$t?$t:(Nt=$t.ownerDocument)?Nt.defaultView||Nt.parentWindow:window,Dt?(ii=b.relatedTarget||b.toElement,Dt=mt,ii=ii?sn(ii):null,ii!==null&&($i=u(ii),Zn=ii.tag,ii!==$i||Zn!==5&&Zn!==27&&Zn!==6)&&(ii=null)):(Dt=null,ii=mt),Dt!==ii)){if(Zn=pt,Kt="onMouseLeave",gt="onMouseEnter",rt="mouse",(h==="pointerout"||h==="pointerover")&&(Zn=fa,Kt="onPointerLeave",gt="onPointerEnter",rt="pointer"),$i=Dt==null?Nt:On(Dt),jt=ii==null?Nt:On(ii),Nt=new Zn(Kt,rt+"leave",Dt,b,$t),Nt.target=$i,Nt.relatedTarget=jt,Kt=null,sn($t)===mt&&(Zn=new Zn(gt,rt+"enter",ii,b,$t),Zn.target=jt,Zn.relatedTarget=$i,Kt=Zn),$i=Kt,Dt&&ii)t:{for(Zn=Dt,gt=ii,rt=0,jt=Zn;jt;jt=nh(jt))rt++;for(jt=0,Kt=gt;Kt;Kt=nh(Kt))jt++;for(;0<rt-jt;)Zn=nh(Zn),rt--;for(;0<jt-rt;)gt=nh(gt),jt--;for(;rt--;){if(Zn===gt||gt!==null&&Zn===gt.alternate)break t;Zn=nh(Zn),gt=nh(gt)}Zn=null}else Zn=null;Dt!==null&&F_(Jt,Nt,Dt,Zn,!1),ii!==null&&$i!==null&&F_(Jt,$i,ii,Zn,!0)}}e:{if(Nt=mt?On(mt):window,Dt=Nt.nodeName&&Nt.nodeName.toLowerCase(),Dt==="select"||Dt==="input"&&Nt.type==="file")var zn=Pu;else if(Vh(Nt))if(ap)zn=cp;else{zn=Fy;var ki=$h}else Dt=Nt.nodeName,!Dt||Dt.toLowerCase()!=="input"||Nt.type!=="checkbox"&&Nt.type!=="radio"?mt&&ci(mt.elementType)&&(zn=Pu):zn=Fm;if(zn&&(zn=zn(h,mt))){rp(Jt,zn,b,$t);break e}ki&&ki(h,Nt,mt),h==="focusout"&&mt&&Nt.type==="number"&&mt.memoizedProps.value!=null&&ku(Nt,"number",Nt.value)}switch(ki=mt?On(mt):window,h){case"focusin":(Vh(ki)||ki.contentEditable==="true")&&(Mc=ki,Ad=mt,ko=null);break;case"focusout":ko=Ad=Mc=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,Vm(Jt,b,$t);break;case"selectionchange":if(zi)break;case"keydown":case"keyup":Vm(Jt,b,$t)}var $n;if(Ul)e:{switch(h){case"compositionstart":var si="onCompositionStart";break e;case"compositionend":si="onCompositionEnd";break e;case"compositionupdate":si="onCompositionUpdate";break e}si=void 0}else bl?Mu(h,b)&&(si="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(si="onCompositionStart");si&&(sp&&b.locale!=="ko"&&(bl||si!=="onCompositionStart"?si==="onCompositionEnd"&&bl&&($n=Mi()):(gs=$t,rs="value"in gs?gs.value:gs.textContent,bl=!0)),ki=th(mt,si),0<ki.length&&(si=new qn(si,h,null,b,$t),Jt.push({event:si,listeners:ki}),$n?si.data=$n:($n=Im(b),$n!==null&&(si.data=$n)))),($n=To?Ly(h,b):Eu(h,b))&&(si=th(mt,"onBeforeInput"),0<si.length&&(ki=new qn("onBeforeInput","beforeinput",null,b,$t),Jt.push({event:ki,listeners:si}),ki.data=$n)),Jc(Jt,h,mt,b,$t)}L_(Jt,m)})}function vf(h,m,b){return{instance:h,listener:m,currentTarget:b}}function th(h,m){for(var b=m+"Capture",k=[];h!==null;){var z=h,U=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||U===null||(z=ws(h,b),z!=null&&k.unshift(vf(h,z,U)),z=ws(h,m),z!=null&&k.push(vf(h,z,U))),h.tag===3)return k;h=h.return}return[]}function nh(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function F_(h,m,b,k,z){for(var U=m._reactName,oe=[];b!==null&&b!==k;){var we=b,$e=we.alternate,mt=we.stateNode;if(we=we.tag,$e!==null&&$e===k)break;we!==5&&we!==26&&we!==27||mt===null||($e=mt,z?(mt=ws(b,U),mt!=null&&oe.unshift(vf(b,mt,$e))):z||(mt=ws(b,U),mt!=null&&oe.push(vf(b,mt,$e)))),b=b.return}oe.length!==0&&h.push({event:m,listeners:oe})}var hw=/\r\n?/g,fw=/\u0000|\uFFFD/g;function B_(h){return(typeof h=="string"?h:""+h).replace(hw,`
`).replace(fw,"")}function V_(h,m){return m=B_(m),B_(h)===m}function wf(){}function Oi(h,m,b,k,z,U){switch(b){case"children":typeof k=="string"?m==="body"||m==="textarea"&&k===""||Ga(h,k):(typeof k=="number"||typeof k=="bigint")&&m!=="body"&&Ga(h,""+k);break;case"className":es(h,"class",k);break;case"tabIndex":es(h,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":es(h,b,k);break;case"style":lr(h,k,U);break;case"data":if(m!=="object"){es(h,"data",k);break}case"src":case"href":if(k===""&&(m!=="a"||b!=="href")){h.removeAttribute(b);break}if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(b);break}k=Wa(""+k),h.setAttribute(b,k);break;case"action":case"formAction":if(typeof k=="function"){h.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(b==="formAction"?(m!=="input"&&Oi(h,m,"name",z.name,z,null),Oi(h,m,"formEncType",z.formEncType,z,null),Oi(h,m,"formMethod",z.formMethod,z,null),Oi(h,m,"formTarget",z.formTarget,z,null)):(Oi(h,m,"encType",z.encType,z,null),Oi(h,m,"method",z.method,z,null),Oi(h,m,"target",z.target,z,null)));if(k==null||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(b);break}k=Wa(""+k),h.setAttribute(b,k);break;case"onClick":k!=null&&(h.onclick=wf);break;case"onScroll":k!=null&&Ti("scroll",h);break;case"onScrollEnd":k!=null&&Ti("scrollend",h);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(i(61));if(b=k.__html,b!=null){if(z.children!=null)throw Error(i(60));h.innerHTML=b}}break;case"multiple":h.multiple=k&&typeof k!="function"&&typeof k!="symbol";break;case"muted":h.muted=k&&typeof k!="function"&&typeof k!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(k==null||typeof k=="function"||typeof k=="boolean"||typeof k=="symbol"){h.removeAttribute("xlink:href");break}b=Wa(""+k),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(b,""+k):h.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(b,""):h.removeAttribute(b);break;case"capture":case"download":k===!0?h.setAttribute(b,""):k!==!1&&k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(b,k):h.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":k!=null&&typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k?h.setAttribute(b,k):h.removeAttribute(b);break;case"rowSpan":case"start":k==null||typeof k=="function"||typeof k=="symbol"||isNaN(k)?h.removeAttribute(b):h.setAttribute(b,k);break;case"popover":Ti("beforetoggle",h),Ti("toggle",h),Di(h,"popover",k);break;case"xlinkActuate":ti(h,"http://www.w3.org/1999/xlink","xlink:actuate",k);break;case"xlinkArcrole":ti(h,"http://www.w3.org/1999/xlink","xlink:arcrole",k);break;case"xlinkRole":ti(h,"http://www.w3.org/1999/xlink","xlink:role",k);break;case"xlinkShow":ti(h,"http://www.w3.org/1999/xlink","xlink:show",k);break;case"xlinkTitle":ti(h,"http://www.w3.org/1999/xlink","xlink:title",k);break;case"xlinkType":ti(h,"http://www.w3.org/1999/xlink","xlink:type",k);break;case"xmlBase":ti(h,"http://www.w3.org/XML/1998/namespace","xml:base",k);break;case"xmlLang":ti(h,"http://www.w3.org/XML/1998/namespace","xml:lang",k);break;case"xmlSpace":ti(h,"http://www.w3.org/XML/1998/namespace","xml:space",k);break;case"is":Di(h,"is",k);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=So.get(b)||b,Di(h,b,k))}}function _g(h,m,b,k,z,U){switch(b){case"style":lr(h,k,U);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(i(61));if(b=k.__html,b!=null){if(z.children!=null)throw Error(i(60));h.innerHTML=b}}break;case"children":typeof k=="string"?Ga(h,k):(typeof k=="number"||typeof k=="bigint")&&Ga(h,""+k);break;case"onScroll":k!=null&&Ti("scroll",h);break;case"onScrollEnd":k!=null&&Ti("scrollend",h);break;case"onClick":k!=null&&(h.onclick=wf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vn.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(z=b.endsWith("Capture"),m=b.slice(2,z?b.length-7:void 0),U=h[Bn]||null,U=U!=null?U[b]:null,typeof U=="function"&&h.removeEventListener(m,U,z),typeof k=="function")){typeof U!="function"&&U!==null&&(b in h?h[b]=null:h.hasAttribute(b)&&h.removeAttribute(b)),h.addEventListener(m,k,z);break e}b in h?h[b]=k:k===!0?h.setAttribute(b,""):Di(h,b,k)}}}function Ur(h,m,b){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ti("error",h),Ti("load",h);var k=!1,z=!1,U;for(U in b)if(b.hasOwnProperty(U)){var oe=b[U];if(oe!=null)switch(U){case"src":k=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Oi(h,m,U,oe,b,null)}}z&&Oi(h,m,"srcSet",b.srcSet,b,null),k&&Oi(h,m,"src",b.src,b,null);return;case"input":Ti("invalid",h);var we=U=oe=z=null,$e=null,mt=null;for(k in b)if(b.hasOwnProperty(k)){var $t=b[k];if($t!=null)switch(k){case"name":z=$t;break;case"type":oe=$t;break;case"checked":$e=$t;break;case"defaultChecked":mt=$t;break;case"value":U=$t;break;case"defaultValue":we=$t;break;case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(i(137,m));break;default:Oi(h,m,k,$t,b,null)}}Tu(h,U,we,$e,mt,oe,z,!1),Sc(h);return;case"select":Ti("invalid",h),k=oe=U=null;for(z in b)if(b.hasOwnProperty(z)&&(we=b[z],we!=null))switch(z){case"value":U=we;break;case"defaultValue":oe=we;break;case"multiple":k=we;default:Oi(h,m,z,we,b,null)}m=U,b=oe,h.multiple=!!k,m!=null?Jr(h,!!k,m,!1):b!=null&&Jr(h,!!k,b,!0);return;case"textarea":Ti("invalid",h),U=z=k=null;for(oe in b)if(b.hasOwnProperty(oe)&&(we=b[oe],we!=null))switch(oe){case"value":k=we;break;case"defaultValue":z=we;break;case"children":U=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(91));break;default:Oi(h,m,oe,we,b,null)}Td(h,k,z,U),Sc(h);return;case"option":for($e in b)if(b.hasOwnProperty($e)&&(k=b[$e],k!=null))switch($e){case"selected":h.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Oi(h,m,$e,k,b,null)}return;case"dialog":Ti("beforetoggle",h),Ti("toggle",h),Ti("cancel",h),Ti("close",h);break;case"iframe":case"object":Ti("load",h);break;case"video":case"audio":for(k=0;k<rd.length;k++)Ti(rd[k],h);break;case"image":Ti("error",h),Ti("load",h);break;case"details":Ti("toggle",h);break;case"embed":case"source":case"link":Ti("error",h),Ti("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(mt in b)if(b.hasOwnProperty(mt)&&(k=b[mt],k!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Oi(h,m,mt,k,b,null)}return;default:if(ci(m)){for($t in b)b.hasOwnProperty($t)&&(k=b[$t],k!==void 0&&_g(h,m,$t,k,b,void 0));return}}for(we in b)b.hasOwnProperty(we)&&(k=b[we],k!=null&&Oi(h,m,we,k,b,null))}function U_(h,m,b,k){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,U=null,oe=null,we=null,$e=null,mt=null,$t=null;for(Dt in b){var Jt=b[Dt];if(b.hasOwnProperty(Dt)&&Jt!=null)switch(Dt){case"checked":break;case"value":break;case"defaultValue":$e=Jt;default:k.hasOwnProperty(Dt)||Oi(h,m,Dt,null,k,Jt)}}for(var Nt in k){var Dt=k[Nt];if(Jt=b[Nt],k.hasOwnProperty(Nt)&&(Dt!=null||Jt!=null))switch(Nt){case"type":U=Dt;break;case"name":z=Dt;break;case"checked":mt=Dt;break;case"defaultChecked":$t=Dt;break;case"value":oe=Dt;break;case"defaultValue":we=Dt;break;case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(i(137,m));break;default:Dt!==Jt&&Oi(h,m,Nt,Dt,k,Jt)}}wo(h,oe,we,$e,mt,$t,U,z);return;case"select":Dt=oe=we=Nt=null;for(U in b)if($e=b[U],b.hasOwnProperty(U)&&$e!=null)switch(U){case"value":break;case"multiple":Dt=$e;default:k.hasOwnProperty(U)||Oi(h,m,U,null,k,$e)}for(z in k)if(U=k[z],$e=b[z],k.hasOwnProperty(z)&&(U!=null||$e!=null))switch(z){case"value":Nt=U;break;case"defaultValue":we=U;break;case"multiple":oe=U;default:U!==$e&&Oi(h,m,z,U,k,$e)}m=we,b=oe,k=Dt,Nt!=null?Jr(h,!!b,Nt,!1):!!k!=!!b&&(m!=null?Jr(h,!!b,m,!0):Jr(h,!!b,b?[]:"",!1));return;case"textarea":Dt=Nt=null;for(we in b)if(z=b[we],b.hasOwnProperty(we)&&z!=null&&!k.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Oi(h,m,we,null,k,z)}for(oe in k)if(z=k[oe],U=b[oe],k.hasOwnProperty(oe)&&(z!=null||U!=null))switch(oe){case"value":Nt=z;break;case"defaultValue":Dt=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(91));break;default:z!==U&&Oi(h,m,oe,z,k,U)}xl(h,Nt,Dt);return;case"option":for(var ii in b)if(Nt=b[ii],b.hasOwnProperty(ii)&&Nt!=null&&!k.hasOwnProperty(ii))switch(ii){case"selected":h.selected=!1;break;default:Oi(h,m,ii,null,k,Nt)}for($e in k)if(Nt=k[$e],Dt=b[$e],k.hasOwnProperty($e)&&Nt!==Dt&&(Nt!=null||Dt!=null))switch($e){case"selected":h.selected=Nt&&typeof Nt!="function"&&typeof Nt!="symbol";break;default:Oi(h,m,$e,Nt,k,Dt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zn in b)Nt=b[Zn],b.hasOwnProperty(Zn)&&Nt!=null&&!k.hasOwnProperty(Zn)&&Oi(h,m,Zn,null,k,Nt);for(mt in k)if(Nt=k[mt],Dt=b[mt],k.hasOwnProperty(mt)&&Nt!==Dt&&(Nt!=null||Dt!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":if(Nt!=null)throw Error(i(137,m));break;default:Oi(h,m,mt,Nt,k,Dt)}return;default:if(ci(m)){for(var $i in b)Nt=b[$i],b.hasOwnProperty($i)&&Nt!==void 0&&!k.hasOwnProperty($i)&&_g(h,m,$i,void 0,k,Nt);for($t in k)Nt=k[$t],Dt=b[$t],!k.hasOwnProperty($t)||Nt===Dt||Nt===void 0&&Dt===void 0||_g(h,m,$t,Nt,k,Dt);return}}for(var gt in b)Nt=b[gt],b.hasOwnProperty(gt)&&Nt!=null&&!k.hasOwnProperty(gt)&&Oi(h,m,gt,null,k,Nt);for(Jt in k)Nt=k[Jt],Dt=b[Jt],!k.hasOwnProperty(Jt)||Nt===Dt||Nt==null&&Dt==null||Oi(h,m,Jt,Nt,k,Dt)}var bg=null,vg=null;function Sf(h){return h.nodeType===9?h:h.ownerDocument}function b0(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jf(h,m){if(h===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&m==="foreignObject"?0:h}function wg(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Bp=null;function $_(){var h=window.event;return h&&h.type==="popstate"?h===Bp?!1:(Bp=h,!0):(Bp=null,!1)}var uo=typeof setTimeout=="function"?setTimeout:void 0,Cf=typeof clearTimeout=="function"?clearTimeout:void 0,Tf=typeof Promise=="function"?Promise:void 0,ih=typeof queueMicrotask=="function"?queueMicrotask:typeof Tf!="undefined"?function(h){return Tf.resolve(null).then(h).catch(H_)}:uo;function H_(h){setTimeout(function(){throw h})}function tu(h){return h==="head"}function v0(h,m){var b=m,k=0,z=0;do{var U=b.nextSibling;if(h.removeChild(b),U&&U.nodeType===8)if(b=U.data,b==="/$"){if(0<k&&8>k){b=k;var oe=h.ownerDocument;if(b&1&&Vp(oe.documentElement),b&2&&Vp(oe.body),b&4)for(b=oe.head,Vp(b),oe=b.firstChild;oe;){var we=oe.nextSibling,$e=oe.nodeName;oe[Wi]||$e==="SCRIPT"||$e==="STYLE"||$e==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||b.removeChild(oe),oe=we}}if(z===0){h.removeChild(U),ra(m);return}z--}else b==="$"||b==="$?"||b==="$!"?z++:k=b.charCodeAt(0)-48;else k=0;b=U}while(b);ra(m)}function Sg(h){var m=h.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var b=m;switch(m=m.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":Sg(b),us(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}h.removeChild(b)}}function pw(h,m,b,k){for(;h.nodeType===1;){var z=b;if(h.nodeName.toLowerCase()!==m.toLowerCase()){if(!k&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(k){if(!h[Wi])switch(m){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(U=h.getAttribute("rel"),U==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(U!==z.rel||h.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||h.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||h.getAttribute("title")!==(z.title==null?null:z.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(U=h.getAttribute("src"),(U!==(z.src==null?null:z.src)||h.getAttribute("type")!==(z.type==null?null:z.type)||h.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&U&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(m==="input"&&h.type==="hidden"){var U=z.name==null?null:""+z.name;if(z.type==="hidden"&&h.getAttribute("name")===U)return h}else return h;if(h=al(h.nextSibling),h===null)break}return null}function q_(h,m,b){if(m==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!b||(h=al(h.nextSibling),h===null))return null;return h}function hc(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function G_(h,m){var b=h.ownerDocument;if(h.data!=="$?"||b.readyState==="complete")m();else{var k=function(){m(),b.removeEventListener("DOMContentLoaded",k)};b.addEventListener("DOMContentLoaded",k),h._reactRetry=k}}function al(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return h}var jg=null;function w0(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"){if(m===0)return h;m--}else b==="/$"&&m++}h=h.previousSibling}return null}function W_(h,m,b){switch(m=Sf(b),h){case"html":if(h=m.documentElement,!h)throw Error(i(452));return h;case"head":if(h=m.head,!h)throw Error(i(453));return h;case"body":if(h=m.body,!h)throw Error(i(454));return h;default:throw Error(i(451))}}function Vp(h){for(var m=h.attributes;m.length;)h.removeAttributeNode(m[0]);us(h)}var Oo=new Map,S0=new Set;function sh(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var fc=Qe.d;Qe.d={f:Cg,r:Tg,D:mw,C:gw,L:kf,m:$r,X:Y_,S:j0,M:X_};function Cg(){var h=fc.f(),m=rg();return h||m}function Tg(h){var m=ei(h);m!==null&&m.tag===5&&m.type==="form"?Mn(m):fc.r(h)}var nu=typeof document=="undefined"?null:document;function Z_(h,m,b){var k=nu;if(k&&typeof m=="string"&&m){var z=Rr(m);z='link[rel="'+h+'"][href="'+z+'"]',typeof b=="string"&&(z+='[crossorigin="'+b+'"]'),S0.has(z)||(S0.add(z),h={rel:h,crossOrigin:b,href:m},k.querySelector(z)===null&&(m=k.createElement("link"),Ur(m,"link",h),Ii(m),k.head.appendChild(m)))}}function mw(h){fc.D(h),Z_("dns-prefetch",h,null)}function gw(h,m){fc.C(h,m),Z_("preconnect",h,m)}function kf(h,m,b){fc.L(h,m,b);var k=nu;if(k&&h&&m){var z='link[rel="preload"][as="'+Rr(m)+'"]';m==="image"&&b&&b.imageSrcSet?(z+='[imagesrcset="'+Rr(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(z+='[imagesizes="'+Rr(b.imageSizes)+'"]')):z+='[href="'+Rr(h)+'"]';var U=z;switch(m){case"style":U=Nf(h);break;case"script":U=rh(h)}Oo.has(U)||(h=S({rel:"preload",href:m==="image"&&b&&b.imageSrcSet?void 0:h,as:m},b),Oo.set(U,h),k.querySelector(z)!==null||m==="style"&&k.querySelector(Mf(U))||m==="script"&&k.querySelector(ah(U))||(m=k.createElement("link"),Ur(m,"link",h),Ii(m),k.head.appendChild(m)))}}function $r(h,m){fc.m(h,m);var b=nu;if(b&&h){var k=m&&typeof m.as=="string"?m.as:"script",z='link[rel="modulepreload"][as="'+Rr(k)+'"][href="'+Rr(h)+'"]',U=z;switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=rh(h)}if(!Oo.has(U)&&(h=S({rel:"modulepreload",href:h},m),Oo.set(U,h),b.querySelector(z)===null)){switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(ah(U)))return}k=b.createElement("link"),Ur(k,"link",h),Ii(k),b.head.appendChild(k)}}}function j0(h,m,b){fc.S(h,m,b);var k=nu;if(k&&h){var z=vs(k).hoistableStyles,U=Nf(h);m=m||"default";var oe=z.get(U);if(!oe){var we={loading:0,preload:null};if(oe=k.querySelector(Mf(U)))we.loading=5;else{h=S({rel:"stylesheet",href:h,"data-precedence":m},b),(b=Oo.get(U))&&oh(h,b);var $e=oe=k.createElement("link");Ii($e),Ur($e,"link",h),$e._p=new Promise(function(mt,$t){$e.onload=mt,$e.onerror=$t}),$e.addEventListener("load",function(){we.loading|=1}),$e.addEventListener("error",function(){we.loading|=2}),we.loading|=4,Up(oe,m,k)}oe={type:"stylesheet",instance:oe,count:1,state:we},z.set(U,oe)}}}function Y_(h,m){fc.X(h,m);var b=nu;if(b&&h){var k=vs(b).hoistableScripts,z=rh(h),U=k.get(z);U||(U=b.querySelector(ah(z)),U||(h=S({src:h,async:!0},m),(m=Oo.get(z))&&$p(h,m),U=b.createElement("script"),Ii(U),Ur(U,"link",h),b.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},k.set(z,U))}}function X_(h,m){fc.M(h,m);var b=nu;if(b&&h){var k=vs(b).hoistableScripts,z=rh(h),U=k.get(z);U||(U=b.querySelector(ah(z)),U||(h=S({src:h,async:!0,type:"module"},m),(m=Oo.get(z))&&$p(h,m),U=b.createElement("script"),Ii(U),Ur(U,"link",h),b.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},k.set(z,U))}}function kg(h,m,b,k){var z=(z=ut.current)?sh(z):null;if(!z)throw Error(i(446));switch(h){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(m=Nf(b.href),b=vs(z).hoistableStyles,k=b.get(m),k||(k={type:"style",instance:null,count:0,state:null},b.set(m,k)),k):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){h=Nf(b.href);var U=vs(z).hoistableStyles,oe=U.get(h);if(oe||(z=z.ownerDocument||z,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(h,oe),(U=z.querySelector(Mf(h)))&&!U._p&&(oe.instance=U,oe.state.loading=5),Oo.has(h)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Oo.set(h,b),U||yw(z,h,b,oe.state))),m&&k===null)throw Error(i(528,""));return oe}if(m&&k!==null)throw Error(i(529,""));return null;case"script":return m=b.async,b=b.src,typeof b=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=rh(b),b=vs(z).hoistableScripts,k=b.get(m),k||(k={type:"script",instance:null,count:0,state:null},b.set(m,k)),k):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,h))}}function Nf(h){return'href="'+Rr(h)+'"'}function Mf(h){return'link[rel="stylesheet"]['+h+"]"}function C0(h){return S({},h,{"data-precedence":h.precedence,precedence:null})}function yw(h,m,b,k){h.querySelector('link[rel="preload"][as="style"]['+m+"]")?k.loading=1:(m=h.createElement("link"),k.preload=m,m.addEventListener("load",function(){return k.loading|=1}),m.addEventListener("error",function(){return k.loading|=2}),Ur(m,"link",b),Ii(m),h.head.appendChild(m))}function rh(h){return'[src="'+Rr(h)+'"]'}function ah(h){return"script[async]"+h}function Ng(h,m,b){if(m.count++,m.instance===null)switch(m.type){case"style":var k=h.querySelector('style[data-href~="'+Rr(b.href)+'"]');if(k)return m.instance=k,Ii(k),k;var z=S({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return k=(h.ownerDocument||h).createElement("style"),Ii(k),Ur(k,"style",z),Up(k,b.precedence,h),m.instance=k;case"stylesheet":z=Nf(b.href);var U=h.querySelector(Mf(z));if(U)return m.state.loading|=4,m.instance=U,Ii(U),U;k=C0(b),(z=Oo.get(z))&&oh(k,z),U=(h.ownerDocument||h).createElement("link"),Ii(U);var oe=U;return oe._p=new Promise(function(we,$e){oe.onload=we,oe.onerror=$e}),Ur(U,"link",k),m.state.loading|=4,Up(U,b.precedence,h),m.instance=U;case"script":return U=rh(b.src),(z=h.querySelector(ah(U)))?(m.instance=z,Ii(z),z):(k=b,(z=Oo.get(U))&&(k=S({},b),$p(k,z)),h=h.ownerDocument||h,z=h.createElement("script"),Ii(z),Ur(z,"link",k),h.head.appendChild(z),m.instance=z);case"void":return null;default:throw Error(i(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(k=m.instance,m.state.loading|=4,Up(k,b.precedence,h));return m.instance}function Up(h,m,b){for(var k=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=k.length?k[k.length-1]:null,U=z,oe=0;oe<k.length;oe++){var we=k[oe];if(we.dataset.precedence===m)U=we;else if(U!==z)break}U?U.parentNode.insertBefore(h,U.nextSibling):(m=b.nodeType===9?b.head:b,m.insertBefore(h,m.firstChild))}function oh(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.title==null&&(h.title=m.title)}function $p(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.integrity==null&&(h.integrity=m.integrity)}var Hp=null;function Mg(h,m,b){if(Hp===null){var k=new Map,z=Hp=new Map;z.set(b,k)}else z=Hp,k=z.get(b),k||(k=new Map,z.set(b,k));if(k.has(h))return k;for(k.set(h,null),b=b.getElementsByTagName(h),z=0;z<b.length;z++){var U=b[z];if(!(U[Wi]||U[Hn]||h==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=U.getAttribute(m)||"";oe=h+oe;var we=k.get(oe);we?we.push(U):k.set(oe,[U])}}return k}function qp(h,m,b){h=h.ownerDocument||h,h.head.insertBefore(b,m==="title"?h.querySelector("head > title"):null)}function Gp(h,m,b){if(b===1||m.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return h=m.disabled,typeof m.precedence=="string"&&h==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function Eg(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var lh=null;function T0(){}function xw(h,m,b){if(lh===null)throw Error(i(475));var k=lh;if(m.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var z=Nf(b.href),U=h.querySelector(Mf(z));if(U){h=U._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(k.count++,k=r.bind(k),h.then(k,k)),m.state.loading|=4,m.instance=U,Ii(U);return}U=h.ownerDocument||h,b=C0(b),(z=Oo.get(z))&&oh(b,z),U=U.createElement("link"),Ii(U);var oe=U;oe._p=new Promise(function(we,$e){oe.onload=we,oe.onerror=$e}),Ur(U,"link",b),m.instance=U}k.stylesheets===null&&(k.stylesheets=new Map),k.stylesheets.set(m,h),(h=m.state.preload)&&(m.state.loading&3)===0&&(k.count++,m=r.bind(k),h.addEventListener("load",m),h.addEventListener("error",m))}}function f(){if(lh===null)throw Error(i(475));var h=lh;return h.stylesheets&&h.count===0&&y(h,h.stylesheets),0<h.count?function(m){var b=setTimeout(function(){if(h.stylesheets&&y(h,h.stylesheets),h.unsuspend){var k=h.unsuspend;h.unsuspend=null,k()}},6e4);return h.unsuspend=m,function(){h.unsuspend=null,clearTimeout(b)}}:null}function r(){if(this.count--,this.count===0){if(this.stylesheets)y(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var d=null;function y(h,m){h.stylesheets=null,h.unsuspend!==null&&(h.count++,d=new Map,m.forEach(v,h),d=null,r.call(h))}function v(h,m){if(!(m.state.loading&4)){var b=d.get(h);if(b)var k=b.get(null);else{b=new Map,d.set(h,b);for(var z=h.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<z.length;U++){var oe=z[U];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(b.set(oe.dataset.precedence,oe),k=oe)}k&&b.set(null,k)}z=m.instance,oe=z.getAttribute("data-precedence"),U=b.get(oe)||k,U===k&&b.set(null,z),b.set(oe,z),this.count++,k=r.bind(this),z.addEventListener("load",k),z.addEventListener("error",k),U?U.parentNode.insertBefore(z,U.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(z,h.firstChild)),m.state.loading|=4}}var C={$$typeof:J,Provider:null,Consumer:null,_currentValue:Je,_currentValue2:Je,_threadCount:0};function M(h,m,b,k,z,U,oe,we){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bn(0),this.hiddenUpdates=bn(null),this.identifierPrefix=k,this.onUncaughtError=z,this.onCaughtError=U,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function R(h,m,b,k,z,U,oe,we,$e,mt,$t,Jt){return h=new M(h,m,b,oe,we,$e,mt,Jt),m=1,U===!0&&(m|=24),U=zr(3,null,null,m),h.current=U,U.stateNode=h,m=Yh(),m.refCount++,h.pooledCache=m,m.refCount++,U.memoizedState={element:k,isDehydrated:b,cache:m},mi(U),h}function I(h){return h?(h=Ho,h):Ho}function V(h,m,b,k,z,U){z=I(z),k.context===null?k.context=z:k.pendingContext=z,k=Nl(m),k.payload={element:b},U=U===void 0?null:U,U!==null&&(k.callback=U),b=Po(h,k,m),b!==null&&(co(b,h,m),Vc(b,h,m))}function H(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<m?b:m}}function X(h,m){H(h,m),(h=h.alternate)&&H(h,m)}function se(h){if(h.tag===13){var m=No(h,67108864);m!==null&&co(m,h,67108864),X(h,67108864)}}var ce=!0;function he(h,m,b,k){var z=ze.T;ze.T=null;var U=Qe.p;try{Qe.p=2,Se(h,m,b,k)}finally{Qe.p=U,ze.T=z}}function xe(h,m,b,k){var z=ze.T;ze.T=null;var U=Qe.p;try{Qe.p=8,Se(h,m,b,k)}finally{Qe.p=U,ze.T=z}}function Se(h,m,b,k){if(ce){var z=De(k);if(z===null)Fp(h,m,k,at,b),pn(h,k);else if(Wn(z,h,m,b,k))k.stopPropagation();else if(pn(h,k),m&4&&-1<fn.indexOf(h)){for(;z!==null;){var U=ei(z);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var oe=Q(U.pendingLanes);if(oe!==0){var we=U;for(we.pendingLanes|=2,we.entangledLanes|=2;oe;){var $e=1<<31-je(oe);we.entanglements[1]|=$e,oe&=~$e}rl(U),(ls&6)===0&&(Dp=Gn()+500,eh(0))}}break;case 13:we=No(U,2),we!==null&&co(we,U,2),rg(),X(U,2)}if(U=De(k),U===null&&Fp(h,m,k,at,b),U===z)break;z=U}z!==null&&k.stopPropagation()}else Fp(h,m,k,null,b)}}function De(h){return h=jo(h),Ve(h)}var at=null;function Ve(h){if(at=null,h=sn(h),h!==null){var m=u(h);if(m===null)h=null;else{var b=m.tag;if(b===13){if(h=c(m),h!==null)return h;h=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null)}}return at=h,null}function Ze(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gn()){case ln:return 2;case Ue:return 8;case ge:case ve:return 32;case ht:return 268435456;default:return 32}default:return 32}}var bt=!1,Et=null,Zt=null,un=null,on=new Map,hn=new Map,En=[],fn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pn(h,m){switch(h){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":on.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(m.pointerId)}}function Ut(h,m,b,k,z,U){return h===null||h.nativeEvent!==U?(h={blockedOn:m,domEventName:b,eventSystemFlags:k,nativeEvent:U,targetContainers:[z]},m!==null&&(m=ei(m),m!==null&&se(m)),h):(h.eventSystemFlags|=k,m=h.targetContainers,z!==null&&m.indexOf(z)===-1&&m.push(z),h)}function Wn(h,m,b,k,z){switch(m){case"focusin":return Et=Ut(Et,h,m,b,k,z),!0;case"dragenter":return Zt=Ut(Zt,h,m,b,k,z),!0;case"mouseover":return un=Ut(un,h,m,b,k,z),!0;case"pointerover":var U=z.pointerId;return on.set(U,Ut(on.get(U)||null,h,m,b,k,z)),!0;case"gotpointercapture":return U=z.pointerId,hn.set(U,Ut(hn.get(U)||null,h,m,b,k,z)),!0}return!1}function Qn(h){var m=sn(h.target);if(m!==null){var b=u(m);if(b!==null){if(m=b.tag,m===13){if(m=c(b),m!==null){h.blockedOn=m,Jn(h.priority,function(){if(b.tag===13){var k=Ca();k=Vt(k);var z=No(b,k);z!==null&&co(z,b,k),X(b,k)}});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Pn(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var b=De(h.nativeEvent);if(b===null){b=h.nativeEvent;var k=new b.constructor(b.type,b);ui=k,b.target.dispatchEvent(k),ui=null}else return m=ei(b),m!==null&&se(m),h.blockedOn=b,!1;m.shift()}return!0}function An(h,m,b){Pn(h)&&b.delete(m)}function wi(){bt=!1,Et!==null&&Pn(Et)&&(Et=null),Zt!==null&&Pn(Zt)&&(Zt=null),un!==null&&Pn(un)&&(un=null),on.forEach(An),hn.forEach(An)}function ps(h,m){h.blockedOn===m&&(h.blockedOn=null,bt||(bt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wi)))}var Gs=null;function Nr(h){Gs!==h&&(Gs=h,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Gs===h&&(Gs=null);for(var m=0;m<h.length;m+=3){var b=h[m],k=h[m+1],z=h[m+2];if(typeof k!="function"){if(Ve(k||b)===null)continue;break}var U=ei(b);U!==null&&(h.splice(m,3),m-=3,an(U,{pending:!0,data:z,method:b.method,action:k},k,z))}}))}function ra(h){function m($e){return ps($e,h)}Et!==null&&ps(Et,h),Zt!==null&&ps(Zt,h),un!==null&&ps(un,h),on.forEach(m),hn.forEach(m);for(var b=0;b<En.length;b++){var k=En[b];k.blockedOn===h&&(k.blockedOn=null)}for(;0<En.length&&(b=En[0],b.blockedOn===null);)Qn(b),b.blockedOn===null&&En.shift();if(b=(h.ownerDocument||h).$$reactFormReplay,b!=null)for(k=0;k<b.length;k+=3){var z=b[k],U=b[k+1],oe=z[Bn]||null;if(typeof U=="function")oe||Nr(b);else if(oe){var we=null;if(U&&U.hasAttribute("formAction")){if(z=U,oe=U[Bn]||null)we=oe.formAction;else if(Ve(z)!==null)continue}else we=oe.action;typeof we=="function"?b[k+1]=we:(b.splice(k,3),k-=3),Nr(b)}}}function aa(h){this._internalRoot=h}nr.prototype.render=aa.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(i(409));var b=m.current,k=Ca();V(b,k,h,m,null,null)},nr.prototype.unmount=aa.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;V(h.current,2,null,h,null,null),rg(),m[xi]=null}};function nr(h){this._internalRoot=h}nr.prototype.unstable_scheduleHydration=function(h){if(h){var m=Gi();h={blockedOn:null,target:h,priority:m};for(var b=0;b<En.length&&m!==0&&m<En[b].priority;b++);En.splice(b,0,h),b===0&&Qn(h)}};var xs=t.version;if(xs!=="19.1.0")throw Error(i(527,xs,"19.1.0"));Qe.findDOMNode=function(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=g(m),h=h!==null?_(h):null,h=h===null?null:h.stateNode,h};var br={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ze,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var ir=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ir.isDisabled&&ir.supportsFiber)try{cn=ir.inject(br),Qt=ir}catch(h){}}return E0.createRoot=function(h,m){if(!o(h))throw Error(i(299));var b=!1,k="",z=lf,U=Xu,oe=By,we=null;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onUncaughtError!==void 0&&(z=m.onUncaughtError),m.onCaughtError!==void 0&&(U=m.onCaughtError),m.onRecoverableError!==void 0&&(oe=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(we=m.unstable_transitionCallbacks)),m=R(h,1,!1,null,null,b,k,z,U,oe,we,null),h[xi]=m.current,xg(h),new aa(m)},E0.hydrateRoot=function(h,m,b){if(!o(h))throw Error(i(299));var k=!1,z="",U=lf,oe=Xu,we=By,$e=null,mt=null;return b!=null&&(b.unstable_strictMode===!0&&(k=!0),b.identifierPrefix!==void 0&&(z=b.identifierPrefix),b.onUncaughtError!==void 0&&(U=b.onUncaughtError),b.onCaughtError!==void 0&&(oe=b.onCaughtError),b.onRecoverableError!==void 0&&(we=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&($e=b.unstable_transitionCallbacks),b.formState!==void 0&&(mt=b.formState)),m=R(h,1,!0,m,b!=null?b:null,k,z,U,oe,we,$e,mt),m.context=I(null),b=m.current,k=Ca(),k=Vt(k),z=Nl(k),z.callback=null,Po(b,z,k),b=k,m.current.lanes=b,Tn(m,b),rl(m),h[xi]=m.current,xg(h),new nr(m)},E0.version="19.1.0",E0}var nk;function Qz(){if(nk)return jw.exports;nk=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),jw.exports=Kz(),jw.exports}var Jz=Qz(),eI=Object.defineProperty,tI=(e,t,n)=>t in e?eI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yp=(e,t,n)=>tI(e,typeof t!="symbol"?t+"":t,n),nI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rg={},A0={},ou={},ik;function d4(){if(ik)return ou;ik=1;var e=ou&&ou.__assign||function(){return e=Object.assign||function(o){for(var u,c=1,a=arguments.length;c<a;c++){u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(o[g]=u[g])}return o},e.apply(this,arguments)},t=ou&&ou.__awaiter||function(o,u,c,a){function g(_){return _ instanceof c?_:new c(function(S){S(_)})}return new(c||(c=Promise))(function(_,S){function N(D){try{E(a.next(D))}catch(B){S(B)}}function A(D){try{E(a.throw(D))}catch(B){S(B)}}function E(D){D.done?_(D.value):g(D.value).then(N,A)}E((a=a.apply(o,u||[])).next())})},n=ou&&ou.__generator||function(o,u){var c={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},a,g,_,S;return S={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function N(E){return function(D){return A([E,D])}}function A(E){if(a)throw new TypeError("Generator is already executing.");for(;S&&(S=0,E[0]&&(c=0)),c;)try{if(a=1,g&&(_=E[0]&2?g.return:E[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,E[1])).done)return _;switch(g=0,_&&(E=[E[0]&2,_.value]),E[0]){case 0:case 1:_=E;break;case 4:return c.label++,{value:E[1],done:!1};case 5:c.label++,g=E[1],E=[0];continue;case 7:E=c.ops.pop(),c.trys.pop();continue;default:if(_=c.trys,!(_=_.length>0&&_[_.length-1])&&(E[0]===6||E[0]===2)){c=0;continue}if(E[0]===3&&(!_||E[1]>_[0]&&E[1]<_[3])){c.label=E[1];break}if(E[0]===6&&c.label<_[1]){c.label=_[1],_=E;break}if(_&&c.label<_[2]){c.label=_[2],c.ops.push(E);break}_[2]&&c.ops.pop(),c.trys.pop();continue}E=u.call(o,c)}catch(D){E=[6,D],g=0}finally{a=_=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(ou,"__esModule",{value:!0}),ou.FrappeCall=void 0;var i=function(){function o(u,c,a,g,_){this.appURL=u,this.axios=c,this.useToken=a!=null?a:!1,this.token=g,this.tokenType=_}return o.prototype.get=function(u,c){return t(this,void 0,void 0,function(){var a;return n(this,function(g){return a=new URLSearchParams,c&&Object.entries(c).forEach(function(_){var S=_[0],N=_[1];if(N!=null){var A=typeof N=="object"?JSON.stringify(N):N;a.set(S,A)}}),[2,this.axios.get("/api/method/".concat(u),{params:a}).then(function(_){return _.data}).catch(function(_){var S,N;throw e(e({},_.response.data),{httpStatus:_.response.status,httpStatusText:_.response.statusText,message:(S=_.response.data.message)!==null&&S!==void 0?S:"There was an error.",exception:(N=_.response.data.exception)!==null&&N!==void 0?N:""})})]})})},o.prototype.post=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.post("/api/method/".concat(u),e({},c)).then(function(g){return g.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:(_=g.response.data.message)!==null&&_!==void 0?_:"There was an error.",exception:(S=g.response.data.exception)!==null&&S!==void 0?S:""})})]})})},o.prototype.put=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.put("/api/method/".concat(u),e({},c)).then(function(g){return g.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:(_=g.response.data.message)!==null&&_!==void 0?_:"There was an error.",exception:(S=g.response.data.exception)!==null&&S!==void 0?S:""})})]})})},o.prototype.delete=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.delete("/api/method/".concat(u),{params:c}).then(function(g){return g.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:(_=g.response.data.message)!==null&&_!==void 0?_:"There was an error.",exception:(S=g.response.data.exception)!==null&&S!==void 0?S:""})})]})})},o}();return ou.FrappeCall=i,ou}var lu={},sk;function h4(){if(sk)return lu;sk=1;var e=lu&&lu.__assign||function(){return e=Object.assign||function(o){for(var u,c=1,a=arguments.length;c<a;c++){u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(o[g]=u[g])}return o},e.apply(this,arguments)},t=lu&&lu.__awaiter||function(o,u,c,a){function g(_){return _ instanceof c?_:new c(function(S){S(_)})}return new(c||(c=Promise))(function(_,S){function N(D){try{E(a.next(D))}catch(B){S(B)}}function A(D){try{E(a.throw(D))}catch(B){S(B)}}function E(D){D.done?_(D.value):g(D.value).then(N,A)}E((a=a.apply(o,u||[])).next())})},n=lu&&lu.__generator||function(o,u){var c={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},a,g,_,S;return S={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function N(E){return function(D){return A([E,D])}}function A(E){if(a)throw new TypeError("Generator is already executing.");for(;S&&(S=0,E[0]&&(c=0)),c;)try{if(a=1,g&&(_=E[0]&2?g.return:E[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,E[1])).done)return _;switch(g=0,_&&(E=[E[0]&2,_.value]),E[0]){case 0:case 1:_=E;break;case 4:return c.label++,{value:E[1],done:!1};case 5:c.label++,g=E[1],E=[0];continue;case 7:E=c.ops.pop(),c.trys.pop();continue;default:if(_=c.trys,!(_=_.length>0&&_[_.length-1])&&(E[0]===6||E[0]===2)){c=0;continue}if(E[0]===3&&(!_||E[1]>_[0]&&E[1]<_[3])){c.label=E[1];break}if(E[0]===6&&c.label<_[1]){c.label=_[1],_=E;break}if(_&&c.label<_[2]){c.label=_[2],c.ops.push(E);break}_[2]&&c.ops.pop(),c.trys.pop();continue}E=u.call(o,c)}catch(D){E=[6,D],g=0}finally{a=_=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(lu,"__esModule",{value:!0}),lu.FrappeDB=void 0;var i=function(){function o(u,c,a,g,_){this.appURL=u,this.axios=c,this.useToken=a!=null?a:!1,this.token=g,this.tokenType=_}return o.prototype.getDoc=function(u,c){return c===void 0&&(c=""),t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.get("/api/resource/".concat(u,"/").concat(encodeURIComponent(c))).then(function(g){return g.data.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:"There was an error while fetching the document.",exception:(S=(_=g.response.data.exception)!==null&&_!==void 0?_:g.response.data.exc_type)!==null&&S!==void 0?S:""})})]})})},o.prototype.getDocList=function(u,c){var a;return t(this,void 0,void 0,function(){var g,_,S,N,A,E,D,B,$,G,W;return n(this,function(J){return g={},c&&(_=c.fields,S=c.filters,N=c.orFilters,A=c.orderBy,E=c.limit,D=c.limit_start,B=c.groupBy,$=c.asDict,G=$===void 0?!0:$,W=A?"".concat(String(A==null?void 0:A.field)," ").concat((a=A==null?void 0:A.order)!==null&&a!==void 0?a:"asc"):"",g={fields:_?JSON.stringify(_):void 0,filters:S?JSON.stringify(S):void 0,or_filters:N?JSON.stringify(N):void 0,order_by:W,group_by:B,limit:E,limit_start:D,as_dict:G}),[2,this.axios.get("/api/resource/".concat(u),{params:g}).then(function(Z){return Z.data.data}).catch(function(Z){var K,le;throw e(e({},Z.response.data),{httpStatus:Z.response.status,httpStatusText:Z.response.statusText,message:"There was an error while fetching the documents.",exception:(le=(K=Z.response.data.exception)!==null&&K!==void 0?K:Z.response.data.exc_type)!==null&&le!==void 0?le:""})})]})})},o.prototype.createDoc=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.post("/api/resource/".concat(u),e({},c)).then(function(g){return g.data.data}).catch(function(g){var _,S,N;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:(_=g.response.data.message)!==null&&_!==void 0?_:"There was an error while creating the document.",exception:(N=(S=g.response.data.exception)!==null&&S!==void 0?S:g.response.data.exc_type)!==null&&N!==void 0?N:""})})]})})},o.prototype.updateDoc=function(u,c,a){return t(this,void 0,void 0,function(){return n(this,function(g){return[2,this.axios.put("/api/resource/".concat(u,"/").concat(c&&encodeURIComponent(c)),e({},a)).then(function(_){return _.data.data}).catch(function(_){var S,N,A;throw e(e({},_.response.data),{httpStatus:_.response.status,httpStatusText:_.response.statusText,message:(S=_.response.data.message)!==null&&S!==void 0?S:"There was an error while updating the document.",exception:(A=(N=_.response.data.exception)!==null&&N!==void 0?N:_.response.data.exc_type)!==null&&A!==void 0?A:""})})]})})},o.prototype.deleteDoc=function(u,c){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,this.axios.delete("/api/resource/".concat(u,"/").concat(c&&encodeURIComponent(c))).then(function(g){return g.data}).catch(function(g){var _,S;throw e(e({},g.response.data),{httpStatus:g.response.status,httpStatusText:g.response.statusText,message:"There was an error while deleting the document.",exception:(S=(_=g.response.data.exception)!==null&&_!==void 0?_:g.response.data.exc_type)!==null&&S!==void 0?S:""})})]})})},o.prototype.getCount=function(u,c,a,g){return a===void 0&&(a=!1),g===void 0&&(g=!1),t(this,void 0,void 0,function(){var _;return n(this,function(S){return _={doctype:u,filters:[]},a&&(_.cache=a),g&&(_.debug=g),c&&(_.filters=c?JSON.stringify(c):void 0),[2,this.axios.get("/api/method/frappe.client.get_count",{params:_}).then(function(N){return N.data.message}).catch(function(N){var A,E;throw e(e({},N.response.data),{httpStatus:N.response.status,httpStatusText:N.response.statusText,message:"There was an error while getting the count.",exception:(E=(A=N.response.data.exception)!==null&&A!==void 0?A:N.response.data.exc_type)!==null&&E!==void 0?E:""})})]})})},o.prototype.getLastDoc=function(u,c){return t(this,void 0,void 0,function(){var a,g;return n(this,function(_){switch(_.label){case 0:return a={orderBy:{field:"creation",order:"desc"}},c&&(a=e(e({},a),c)),[4,this.getDocList(u,e(e({},a),{limit:1,fields:["name"]}))];case 1:return g=_.sent(),g.length>0?[2,this.getDoc(u,g[0].name)]:[2,{}]}})})},o}();return lu.FrappeDB=i,lu}var cu={},ch={};/*! Axios v1.8.2 Copyright (c) 2025 Matt Zabriskie and contributors */var Nw,rk;function iI(){if(rk)return Nw;rk=1;function e(re,me){return function(){return re.apply(me,arguments)}}const{toString:t}=Object.prototype,{getPrototypeOf:n}=Object,i=(re=>me=>{const Ne=t.call(me);return re[Ne]||(re[Ne]=Ne.slice(8,-1).toLowerCase())})(Object.create(null)),o=re=>(re=re.toLowerCase(),me=>i(me)===re),u=re=>me=>typeof me===re,{isArray:c}=Array,a=u("undefined");function g(re){return re!==null&&!a(re)&&re.constructor!==null&&!a(re.constructor)&&A(re.constructor.isBuffer)&&re.constructor.isBuffer(re)}const _=o("ArrayBuffer");function S(re){let me;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?me=ArrayBuffer.isView(re):me=re&&re.buffer&&_(re.buffer),me}const N=u("string"),A=u("function"),E=u("number"),D=re=>re!==null&&typeof re=="object",B=re=>re===!0||re===!1,$=re=>{if(i(re)!=="object")return!1;const me=n(re);return(me===null||me===Object.prototype||Object.getPrototypeOf(me)===null)&&!(Symbol.toStringTag in re)&&!(Symbol.iterator in re)},G=o("Date"),W=o("File"),J=o("Blob"),Z=o("FileList"),K=re=>D(re)&&A(re.pipe),le=re=>{let me;return re&&(typeof FormData=="function"&&re instanceof FormData||A(re.append)&&((me=i(re))==="formdata"||me==="object"&&A(re.toString)&&re.toString()==="[object FormData]"))},_e=o("URLSearchParams"),[de,pe,Oe,He]=["ReadableStream","Request","Response","Headers"].map(o),We=re=>re.trim?re.trim():re.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function st(re,me,{allOwnKeys:Ne=!1}={}){if(re===null||typeof re>"u")return;let Pe,pt;if(typeof re!="object"&&(re=[re]),c(re))for(Pe=0,pt=re.length;Pe<pt;Pe++)me.call(null,re[Pe],Pe,re);else{const yt=Ne?Object.getOwnPropertyNames(re):Object.keys(re),kt=yt.length;let dn;for(Pe=0;Pe<kt;Pe++)dn=yt[Pe],me.call(null,re[dn],dn,re)}}function At(re,me){me=me.toLowerCase();const Ne=Object.keys(re);let Pe=Ne.length,pt;for(;Pe-- >0;)if(pt=Ne[Pe],me===pt.toLowerCase())return pt;return null}const vt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:nI,ze=re=>!a(re)&&re!==vt;function Qe(){const{caseless:re}=ze(this)&&this||{},me={},Ne=(Pe,pt)=>{const yt=re&&At(me,pt)||pt;$(me[yt])&&$(Pe)?me[yt]=Qe(me[yt],Pe):$(Pe)?me[yt]=Qe({},Pe):c(Pe)?me[yt]=Pe.slice():me[yt]=Pe};for(let Pe=0,pt=arguments.length;Pe<pt;Pe++)arguments[Pe]&&st(arguments[Pe],Ne);return me}const Je=(re,me,Ne,{allOwnKeys:Pe}={})=>(st(me,(pt,yt)=>{Ne&&A(pt)?re[yt]=e(pt,Ne):re[yt]=pt},{allOwnKeys:Pe}),re),Pt=re=>(re.charCodeAt(0)===65279&&(re=re.slice(1)),re),fe=(re,me,Ne,Pe)=>{re.prototype=Object.create(me.prototype,Pe),re.prototype.constructor=re,Object.defineProperty(re,"super",{value:me.prototype}),Ne&&Object.assign(re.prototype,Ne)},Xe=(re,me,Ne,Pe)=>{let pt,yt,kt;const dn={};if(me=me||{},re==null)return me;do{for(pt=Object.getOwnPropertyNames(re),yt=pt.length;yt-- >0;)kt=pt[yt],(!Pe||Pe(kt,re,me))&&!dn[kt]&&(me[kt]=re[kt],dn[kt]=!0);re=Ne!==!1&&n(re)}while(re&&(!Ne||Ne(re,me))&&re!==Object.prototype);return me},tt=(re,me,Ne)=>{re=String(re),(Ne===void 0||Ne>re.length)&&(Ne=re.length),Ne-=me.length;const Pe=re.indexOf(me,Ne);return Pe!==-1&&Pe===Ne},Ae=re=>{if(!re)return null;if(c(re))return re;let me=re.length;if(!E(me))return null;const Ne=new Array(me);for(;me-- >0;)Ne[me]=re[me];return Ne},ot=(re=>me=>re&&me instanceof re)(typeof Uint8Array<"u"&&n(Uint8Array)),ct=(re,me)=>{const Ne=(re&&re[Symbol.iterator]).call(re);let Pe;for(;(Pe=Ne.next())&&!Pe.done;){const pt=Pe.value;me.call(re,pt[0],pt[1])}},ut=(re,me)=>{let Ne;const Pe=[];for(;(Ne=re.exec(me))!==null;)Pe.push(Ne);return Pe},tn=o("HTMLFormElement"),Ge=re=>re.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(me,Ne,Pe){return Ne.toUpperCase()+Pe}),Ye=(({hasOwnProperty:re})=>(me,Ne)=>re.call(me,Ne))(Object.prototype),zt=o("RegExp"),Bt=(re,me)=>{const Ne=Object.getOwnPropertyDescriptors(re),Pe={};st(Ne,(pt,yt)=>{let kt;(kt=me(pt,yt,re))!==!1&&(Pe[yt]=kt||pt)}),Object.defineProperties(re,Pe)},It=re=>{Bt(re,(me,Ne)=>{if(A(re)&&["arguments","caller","callee"].indexOf(Ne)!==-1)return!1;const Pe=re[Ne];if(A(Pe)){if(me.enumerable=!1,"writable"in me){me.writable=!1;return}me.set||(me.set=()=>{throw Error("Can not rewrite read-only method '"+Ne+"'")})}})},Lt=(re,me)=>{const Ne={},Pe=pt=>{pt.forEach(yt=>{Ne[yt]=!0})};return c(re)?Pe(re):Pe(String(re).split(me)),Ne},nn=()=>{},_n=(re,me)=>re!=null&&Number.isFinite(re=+re)?re:me;function Xn(re){return!!(re&&A(re.append)&&re[Symbol.toStringTag]==="FormData"&&re[Symbol.iterator])}const Gn=re=>{const me=new Array(10),Ne=(Pe,pt)=>{if(D(Pe)){if(me.indexOf(Pe)>=0)return;if(!("toJSON"in Pe)){me[pt]=Pe;const yt=c(Pe)?[]:{};return st(Pe,(kt,dn)=>{const kn=Ne(kt,pt+1);!a(kn)&&(yt[dn]=kn)}),me[pt]=void 0,yt}}return Pe};return Ne(re,0)},gn=o("AsyncFunction"),ln=re=>re&&(D(re)||A(re))&&A(re.then)&&A(re.catch),Ue=((re,me)=>re?setImmediate:me?((Ne,Pe)=>(vt.addEventListener("message",({source:pt,data:yt})=>{pt===vt&&yt===Ne&&Pe.length&&Pe.shift()()},!1),pt=>{Pe.push(pt),vt.postMessage(Ne,"*")}))(`axios@${Math.random()}`,[]):Ne=>setTimeout(Ne))(typeof setImmediate=="function",A(vt.postMessage)),ge=typeof queueMicrotask<"u"?queueMicrotask.bind(vt):typeof process<"u"&&process.nextTick||Ue;var ve={isArray:c,isArrayBuffer:_,isBuffer:g,isFormData:le,isArrayBufferView:S,isString:N,isNumber:E,isBoolean:B,isObject:D,isPlainObject:$,isReadableStream:de,isRequest:pe,isResponse:Oe,isHeaders:He,isUndefined:a,isDate:G,isFile:W,isBlob:J,isRegExp:zt,isFunction:A,isStream:K,isURLSearchParams:_e,isTypedArray:ot,isFileList:Z,forEach:st,merge:Qe,extend:Je,trim:We,stripBOM:Pt,inherits:fe,toFlatObject:Xe,kindOf:i,kindOfTest:o,endsWith:tt,toArray:Ae,forEachEntry:ct,matchAll:ut,isHTMLForm:tn,hasOwnProperty:Ye,hasOwnProp:Ye,reduceDescriptors:Bt,freezeMethods:It,toObjectSet:Lt,toCamelCase:Ge,noop:nn,toFiniteNumber:_n,findKey:At,global:vt,isContextDefined:ze,isSpecCompliantForm:Xn,toJSONObject:Gn,isAsyncFn:gn,isThenable:ln,setImmediate:Ue,asap:ge};function ht(re,me,Ne,Pe,pt){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=re,this.name="AxiosError",me&&(this.code=me),Ne&&(this.config=Ne),Pe&&(this.request=Pe),pt&&(this.response=pt,this.status=pt.status?pt.status:null)}ve.inherits(ht,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}});const ft=ht.prototype,qt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(re=>{qt[re]={value:re}}),Object.defineProperties(ht,qt),Object.defineProperty(ft,"isAxiosError",{value:!0}),ht.from=(re,me,Ne,Pe,pt,yt)=>{const kt=Object.create(ft);return ve.toFlatObject(re,kt,function(dn){return dn!==Error.prototype},dn=>dn!=="isAxiosError"),ht.call(kt,re.message,me,Ne,Pe,pt),kt.cause=re,kt.name=re.name,yt&&Object.assign(kt,yt),kt};var cn=null;function Qt(re){return ve.isPlainObject(re)||ve.isArray(re)}function xt(re){return ve.endsWith(re,"[]")?re.slice(0,-2):re}function je(re,me,Ne){return re?re.concat(me).map(function(Pe,pt){return Pe=xt(Pe),!Ne&&pt?"["+Pe+"]":Pe}).join(Ne?".":""):me}function ae(re){return ve.isArray(re)&&!re.some(Qt)}const ie=ve.toFlatObject(ve,{},null,function(re){return/^is[A-Z]/.test(re)});function be(re,me,Ne){if(!ve.isObject(re))throw new TypeError("target must be an object");me=me||new FormData,Ne=ve.toFlatObject(Ne,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ri,qn){return!ve.isUndefined(qn[ri])});const Pe=Ne.metaTokens,pt=Ne.visitor||yn,yt=Ne.dots,kt=Ne.indexes,dn=(Ne.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(me);if(!ve.isFunction(pt))throw new TypeError("visitor must be a function");function kn(ri){if(ri===null)return"";if(ve.isDate(ri))return ri.toISOString();if(!dn&&ve.isBlob(ri))throw new ht("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(ri)||ve.isTypedArray(ri)?dn&&typeof Blob=="function"?new Blob([ri]):Buffer.from(ri):ri}function yn(ri,qn,Rn){let mr=ri;if(ri&&!Rn&&typeof ri=="object"){if(ve.endsWith(qn,"{}"))qn=Pe?qn:qn.slice(0,-2),ri=JSON.stringify(ri);else if(ve.isArray(ri)&&ae(ri)||(ve.isFileList(ri)||ve.endsWith(qn,"[]"))&&(mr=ve.toArray(ri)))return qn=xt(qn),mr.forEach(function(Si,ts){!(ve.isUndefined(Si)||Si===null)&&me.append(kt===!0?je([qn],ts,yt):kt===null?qn:qn+"[]",kn(Si))}),!1}return Qt(ri)?!0:(me.append(je(Rn,qn,yt),kn(ri)),!1)}const Cn=[],Un=Object.assign(ie,{defaultVisitor:yn,convertValue:kn,isVisitable:Qt});function oi(ri,qn){if(!ve.isUndefined(ri)){if(Cn.indexOf(ri)!==-1)throw Error("Circular reference detected in "+qn.join("."));Cn.push(ri),ve.forEach(ri,function(Rn,mr){(!(ve.isUndefined(Rn)||Rn===null)&&pt.call(me,Rn,ve.isString(mr)?mr.trim():mr,qn,Un))===!0&&oi(Rn,qn?qn.concat(mr):[mr])}),Cn.pop()}}if(!ve.isObject(re))throw new TypeError("data must be an object");return oi(re),me}function ke(re){const me={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(re).replace(/[!'()~]|%20|%00/g,function(Ne){return me[Ne]})}function Re(re,me){this._pairs=[],re&&be(re,this,me)}const Q=Re.prototype;Q.append=function(re,me){this._pairs.push([re,me])},Q.toString=function(re){const me=re?function(Ne){return re.call(this,Ne,ke)}:ke;return this._pairs.map(function(Ne){return me(Ne[0])+"="+me(Ne[1])},"").join("&")};function nt(re){return encodeURIComponent(re).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function et(re,me,Ne){if(!me)return re;const Pe=Ne&&Ne.encode||nt;ve.isFunction(Ne)&&(Ne={serialize:Ne});const pt=Ne&&Ne.serialize;let yt;if(pt?yt=pt(me,Ne):yt=ve.isURLSearchParams(me)?me.toString():new Re(me,Ne).toString(Pe),yt){const kt=re.indexOf("#");kt!==-1&&(re=re.slice(0,kt)),re+=(re.indexOf("?")===-1?"?":"&")+yt}return re}class Tt{constructor(){this.handlers=[]}use(me,Ne,Pe){return this.handlers.push({fulfilled:me,rejected:Ne,synchronous:Pe?Pe.synchronous:!1,runWhen:Pe?Pe.runWhen:null}),this.handlers.length-1}eject(me){this.handlers[me]&&(this.handlers[me]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(me){ve.forEach(this.handlers,function(Ne){Ne!==null&&me(Ne)})}}var Gt=Tt,Ot={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bn=typeof URLSearchParams<"u"?URLSearchParams:Re,Tn=typeof FormData<"u"?FormData:null,dt=typeof Blob<"u"?Blob:null,Ct={isBrowser:!0,classes:{URLSearchParams:bn,FormData:Tn,Blob:dt},protocols:["http","https","file","blob","url","data"]};const Wt=typeof window<"u"&&typeof document<"u",Vt=typeof navigator=="object"&&navigator||void 0,vn=Wt&&(!Vt||["ReactNative","NativeScript","NS"].indexOf(Vt.product)<0),Gi=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Jn=Wt&&window.location.href||"http://localhost";var ai=Object.freeze({__proto__:null,hasBrowserEnv:Wt,hasStandardBrowserWebWorkerEnv:Gi,hasStandardBrowserEnv:vn,navigator:Vt,origin:Jn}),Hn=te(te({},ai),Ct);function Bn(re,me){return be(re,new Hn.classes.URLSearchParams,Object.assign({visitor:function(Ne,Pe,pt,yt){return Hn.isNode&&ve.isBuffer(Ne)?(this.append(Pe,Ne.toString("base64")),!1):yt.defaultVisitor.apply(this,arguments)}},me))}function xi(re){return ve.matchAll(/\w+|\[(\w*)]/g,re).map(me=>me[0]==="[]"?"":me[1]||me[0])}function Xt(re){const me={},Ne=Object.keys(re);let Pe;const pt=Ne.length;let yt;for(Pe=0;Pe<pt;Pe++)yt=Ne[Pe],me[yt]=re[yt];return me}function lt(re){function me(Ne,Pe,pt,yt){let kt=Ne[yt++];if(kt==="__proto__")return!0;const dn=Number.isFinite(+kt),kn=yt>=Ne.length;return kt=!kt&&ve.isArray(pt)?pt.length:kt,kn?(ve.hasOwnProp(pt,kt)?pt[kt]=[pt[kt],Pe]:pt[kt]=Pe,!dn):((!pt[kt]||!ve.isObject(pt[kt]))&&(pt[kt]=[]),me(Ne,Pe,pt[kt],yt)&&ve.isArray(pt[kt])&&(pt[kt]=Xt(pt[kt])),!dn)}if(ve.isFormData(re)&&ve.isFunction(re.entries)){const Ne={};return ve.forEachEntry(re,(Pe,pt)=>{me(xi(Pe),pt,Ne,0)}),Ne}return null}function Ri(re,me,Ne){if(ve.isString(re))try{return(me||JSON.parse)(re),ve.trim(re)}catch(Pe){if(Pe.name!=="SyntaxError")throw Pe}return(Ne||JSON.stringify)(re)}const li={transitional:Ot,adapter:["xhr","http","fetch"],transformRequest:[function(re,me){const Ne=me.getContentType()||"",Pe=Ne.indexOf("application/json")>-1,pt=ve.isObject(re);if(pt&&ve.isHTMLForm(re)&&(re=new FormData(re)),ve.isFormData(re))return Pe?JSON.stringify(lt(re)):re;if(ve.isArrayBuffer(re)||ve.isBuffer(re)||ve.isStream(re)||ve.isFile(re)||ve.isBlob(re)||ve.isReadableStream(re))return re;if(ve.isArrayBufferView(re))return re.buffer;if(ve.isURLSearchParams(re))return me.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),re.toString();let yt;if(pt){if(Ne.indexOf("application/x-www-form-urlencoded")>-1)return Bn(re,this.formSerializer).toString();if((yt=ve.isFileList(re))||Ne.indexOf("multipart/form-data")>-1){const kt=this.env&&this.env.FormData;return be(yt?{"files[]":re}:re,kt&&new kt,this.formSerializer)}}return pt||Pe?(me.setContentType("application/json",!1),Ri(re)):re}],transformResponse:[function(re){const me=this.transitional||li.transitional,Ne=me&&me.forcedJSONParsing,Pe=this.responseType==="json";if(ve.isResponse(re)||ve.isReadableStream(re))return re;if(re&&ve.isString(re)&&(Ne&&!this.responseType||Pe)){const pt=!(me&&me.silentJSONParsing)&&Pe;try{return JSON.parse(re)}catch(yt){if(pt)throw yt.name==="SyntaxError"?ht.from(yt,ht.ERR_BAD_RESPONSE,this,null,this.response):yt}}return re}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hn.classes.FormData,Blob:Hn.classes.Blob},validateStatus:function(re){return re>=200&&re<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],re=>{li.headers[re]={}});var Wi=li;const us=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var sn=re=>{const me={};let Ne,Pe,pt;return re&&re.split(`
`).forEach(function(yt){pt=yt.indexOf(":"),Ne=yt.substring(0,pt).trim().toLowerCase(),Pe=yt.substring(pt+1).trim(),!(!Ne||me[Ne]&&us[Ne])&&(Ne==="set-cookie"?me[Ne]?me[Ne].push(Pe):me[Ne]=[Pe]:me[Ne]=me[Ne]?me[Ne]+", "+Pe:Pe)}),me};const ei=Symbol("internals");function On(re){return re&&String(re).trim().toLowerCase()}function vs(re){return re===!1||re==null?re:ve.isArray(re)?re.map(vs):String(re)}function Ii(re){const me=Object.create(null),Ne=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let Pe;for(;Pe=Ne.exec(re);)me[Pe[1]]=Pe[2];return me}const Yr=re=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(re.trim());function Vn(re,me,Ne,Pe,pt){if(ve.isFunction(Pe))return Pe.call(this,me,Ne);if(pt&&(me=Ne),!!ve.isString(me)){if(ve.isString(Pe))return me.indexOf(Pe)!==-1;if(ve.isRegExp(Pe))return Pe.test(me)}}function Xr(re){return re.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(me,Ne,Pe)=>Ne.toUpperCase()+Pe)}function Pr(re,me){const Ne=ve.toCamelCase(" "+me);["get","set","has"].forEach(Pe=>{Object.defineProperty(re,Pe+Ne,{value:function(pt,yt,kt){return this[Pe].call(this,me,pt,yt,kt)},configurable:!0})})}class da{constructor(me){me&&this.set(me)}set(me,Ne,Pe){const pt=this;function yt(dn,kn,yn){const Cn=On(kn);if(!Cn)throw new Error("header name must be a non-empty string");const Un=ve.findKey(pt,Cn);(!Un||pt[Un]===void 0||yn===!0||yn===void 0&&pt[Un]!==!1)&&(pt[Un||kn]=vs(dn))}const kt=(dn,kn)=>ve.forEach(dn,(yn,Cn)=>yt(yn,Cn,kn));if(ve.isPlainObject(me)||me instanceof this.constructor)kt(me,Ne);else if(ve.isString(me)&&(me=me.trim())&&!Yr(me))kt(sn(me),Ne);else if(ve.isHeaders(me))for(const[dn,kn]of me.entries())yt(kn,dn,Pe);else me!=null&&yt(Ne,me,Pe);return this}get(me,Ne){if(me=On(me),me){const Pe=ve.findKey(this,me);if(Pe){const pt=this[Pe];if(!Ne)return pt;if(Ne===!0)return Ii(pt);if(ve.isFunction(Ne))return Ne.call(this,pt,Pe);if(ve.isRegExp(Ne))return Ne.exec(pt);throw new TypeError("parser must be boolean|regexp|function")}}}has(me,Ne){if(me=On(me),me){const Pe=ve.findKey(this,me);return!!(Pe&&this[Pe]!==void 0&&(!Ne||Vn(this,this[Pe],Pe,Ne)))}return!1}delete(me,Ne){const Pe=this;let pt=!1;function yt(kt){if(kt=On(kt),kt){const dn=ve.findKey(Pe,kt);dn&&(!Ne||Vn(Pe,Pe[dn],dn,Ne))&&(delete Pe[dn],pt=!0)}}return ve.isArray(me)?me.forEach(yt):yt(me),pt}clear(me){const Ne=Object.keys(this);let Pe=Ne.length,pt=!1;for(;Pe--;){const yt=Ne[Pe];(!me||Vn(this,this[yt],yt,me,!0))&&(delete this[yt],pt=!0)}return pt}normalize(me){const Ne=this,Pe={};return ve.forEach(this,(pt,yt)=>{const kt=ve.findKey(Pe,yt);if(kt){Ne[kt]=vs(pt),delete Ne[yt];return}const dn=me?Xr(yt):String(yt).trim();dn!==yt&&delete Ne[yt],Ne[dn]=vs(pt),Pe[dn]=!0}),this}concat(...me){return this.constructor.concat(this,...me)}toJSON(me){const Ne=Object.create(null);return ve.forEach(this,(Pe,pt)=>{Pe!=null&&Pe!==!1&&(Ne[pt]=me&&ve.isArray(Pe)?Pe.join(", "):Pe)}),Ne}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([me,Ne])=>me+": "+Ne).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(me){return me instanceof this?me:new this(me)}static concat(me,...Ne){const Pe=new this(me);return Ne.forEach(pt=>Pe.set(pt)),Pe}static accessor(me){const Ne=(this[ei]=this[ei]={accessors:{}}).accessors,Pe=this.prototype;function pt(yt){const kt=On(yt);Ne[kt]||(Pr(Pe,yt),Ne[kt]=!0)}return ve.isArray(me)?me.forEach(pt):pt(me),this}}da.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ve.reduceDescriptors(da.prototype,({value:re},me)=>{let Ne=me[0].toUpperCase()+me.slice(1);return{get:()=>re,set(Pe){this[Ne]=Pe}}}),ve.freezeMethods(da);var ds=da;function Kr(re,me){const Ne=this||Wi,Pe=me||Ne,pt=ds.from(Pe.headers);let yt=Pe.data;return ve.forEach(re,function(kt){yt=kt.call(Ne,yt,pt.normalize(),me?me.status:void 0)}),pt.normalize(),yt}function Na(re){return!!(re&&re.__CANCEL__)}function Di(re,me,Ne){ht.call(this,re!=null?re:"canceled",ht.ERR_CANCELED,me,Ne),this.name="CanceledError"}ve.inherits(Di,ht,{__CANCEL__:!0});function es(re,me,Ne){const Pe=Ne.config.validateStatus;!Ne.status||!Pe||Pe(Ne.status)?re(Ne):me(new ht("Request failed with status code "+Ne.status,[ht.ERR_BAD_REQUEST,ht.ERR_BAD_RESPONSE][Math.floor(Ne.status/100)-4],Ne.config,Ne.request,Ne))}function ti(re){const me=/^([-+\w]{1,25})(:?\/\/|:)/.exec(re);return me&&me[1]||""}function ml(re,me){re=re||10;const Ne=new Array(re),Pe=new Array(re);let pt=0,yt=0,kt;return me=me!==void 0?me:1e3,function(dn){const kn=Date.now(),yn=Pe[yt];kt||(kt=kn),Ne[pt]=dn,Pe[pt]=kn;let Cn=yt,Un=0;for(;Cn!==pt;)Un+=Ne[Cn++],Cn=Cn%re;if(pt=(pt+1)%re,pt===yt&&(yt=(yt+1)%re),kn-kt<me)return;const oi=yn&&kn-yn;return oi?Math.round(Un*1e3/oi):void 0}}function gl(re,me){let Ne=0,Pe=1e3/me,pt,yt;const kt=(dn,kn=Date.now())=>{Ne=kn,pt=null,yt&&(clearTimeout(yt),yt=null),re.apply(null,dn)};return[(...dn)=>{const kn=Date.now(),yn=kn-Ne;yn>=Pe?kt(dn,kn):(pt=dn,yt||(yt=setTimeout(()=>{yt=null,kt(pt)},Pe-yn)))},()=>pt&&kt(pt)]}const Ma=(re,me,Ne=3)=>{let Pe=0;const pt=ml(50,250);return gl(yt=>{const kt=yt.loaded,dn=yt.lengthComputable?yt.total:void 0,kn=kt-Pe,yn=pt(kn),Cn=kt<=dn;Pe=kt;const Un={loaded:kt,total:dn,progress:dn?kt/dn:void 0,bytes:kn,rate:yn||void 0,estimated:yn&&dn&&Cn?(dn-kt)/yn:void 0,event:yt,lengthComputable:dn!=null,[me?"download":"upload"]:!0};re(Un)},Ne)},qa=(re,me)=>{const Ne=re!=null;return[Pe=>me[0]({lengthComputable:Ne,total:re,loaded:Pe}),me[1]]},ha=re=>(...me)=>ve.asap(()=>re(...me));var zh=Hn.hasStandardBrowserEnv?((re,me)=>Ne=>(Ne=new URL(Ne,Hn.origin),re.protocol===Ne.protocol&&re.host===Ne.host&&(me||re.port===Ne.port)))(new URL(Hn.origin),Hn.navigator&&/(msie|trident)/i.test(Hn.navigator.userAgent)):()=>!0,Cu=Hn.hasStandardBrowserEnv?{write(re,me,Ne,Pe,pt,yt){const kt=[re+"="+encodeURIComponent(me)];ve.isNumber(Ne)&&kt.push("expires="+new Date(Ne).toGMTString()),ve.isString(Pe)&&kt.push("path="+Pe),ve.isString(pt)&&kt.push("domain="+pt),yt===!0&&kt.push("secure"),document.cookie=kt.join("; ")},read(re){const me=document.cookie.match(new RegExp("(^|;\\s*)("+re+")=([^;]*)"));return me?decodeURIComponent(me[3]):null},remove(re){this.write(re,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qr(re){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(re)}function yl(re,me){return me?re.replace(/\/?\/$/,"")+"/"+me.replace(/^\/+/,""):re}function Cd(re,me,Ne){let Pe=!Qr(me);return re&&Pe||Ne==!1?yl(re,me):me}const Sc=re=>re instanceof ds?te({},re):re;function Vo(re,me){me=me||{};const Ne={};function Pe(yn,Cn,Un,oi){return ve.isPlainObject(yn)&&ve.isPlainObject(Cn)?ve.merge.call({caseless:oi},yn,Cn):ve.isPlainObject(Cn)?ve.merge({},Cn):ve.isArray(Cn)?Cn.slice():Cn}function pt(yn,Cn,Un,oi){if(ve.isUndefined(Cn)){if(!ve.isUndefined(yn))return Pe(void 0,yn,Un,oi)}else return Pe(yn,Cn,Un,oi)}function yt(yn,Cn){if(!ve.isUndefined(Cn))return Pe(void 0,Cn)}function kt(yn,Cn){if(ve.isUndefined(Cn)){if(!ve.isUndefined(yn))return Pe(void 0,yn)}else return Pe(void 0,Cn)}function dn(yn,Cn,Un){if(Un in me)return Pe(yn,Cn);if(Un in re)return Pe(void 0,yn)}const kn={url:yt,method:yt,data:yt,baseURL:kt,transformRequest:kt,transformResponse:kt,paramsSerializer:kt,timeout:kt,timeoutMessage:kt,withCredentials:kt,withXSRFToken:kt,adapter:kt,responseType:kt,xsrfCookieName:kt,xsrfHeaderName:kt,onUploadProgress:kt,onDownloadProgress:kt,decompress:kt,maxContentLength:kt,maxBodyLength:kt,beforeRedirect:kt,transport:kt,httpAgent:kt,httpsAgent:kt,cancelToken:kt,socketPath:kt,responseEncoding:kt,validateStatus:dn,headers:(yn,Cn,Un)=>pt(Sc(yn),Sc(Cn),Un,!0)};return ve.forEach(Object.keys(Object.assign({},re,me)),function(yn){const Cn=kn[yn]||pt,Un=Cn(re[yn],me[yn],yn);ve.isUndefined(Un)&&Cn!==dn||(Ne[yn]=Un)}),Ne}var jc=re=>{const me=Vo({},re);let{data:Ne,withXSRFToken:Pe,xsrfHeaderName:pt,xsrfCookieName:yt,headers:kt,auth:dn}=me;me.headers=kt=ds.from(kt),me.url=et(Cd(me.baseURL,me.url),re.params,re.paramsSerializer),dn&&kt.set("Authorization","Basic "+btoa((dn.username||"")+":"+(dn.password?unescape(encodeURIComponent(dn.password)):"")));let kn;if(ve.isFormData(Ne)){if(Hn.hasStandardBrowserEnv||Hn.hasStandardBrowserWebWorkerEnv)kt.setContentType(void 0);else if((kn=kt.getContentType())!==!1){const[yn,...Cn]=kn?kn.split(";").map(Un=>Un.trim()).filter(Boolean):[];kt.setContentType([yn||"multipart/form-data",...Cn].join("; "))}}if(Hn.hasStandardBrowserEnv&&(Pe&&ve.isFunction(Pe)&&(Pe=Pe(me)),Pe||Pe!==!1&&zh(me.url))){const yn=pt&&yt&&Cu.read(yt);yn&&kt.set(pt,yn)}return me},Ih=typeof XMLHttpRequest<"u"&&function(re){return new Promise(function(me,Ne){const Pe=jc(re);let pt=Pe.data;const yt=ds.from(Pe.headers).normalize();let{responseType:kt,onUploadProgress:dn,onDownloadProgress:kn}=Pe,yn,Cn,Un,oi,ri;function qn(){oi&&oi(),ri&&ri(),Pe.cancelToken&&Pe.cancelToken.unsubscribe(yn),Pe.signal&&Pe.signal.removeEventListener("abort",yn)}let Rn=new XMLHttpRequest;Rn.open(Pe.method.toUpperCase(),Pe.url,!0),Rn.timeout=Pe.timeout;function mr(){if(!Rn)return;const ts=ds.from("getAllResponseHeaders"in Rn&&Rn.getAllResponseHeaders()),As={data:!kt||kt==="text"||kt==="json"?Rn.responseText:Rn.response,status:Rn.status,statusText:Rn.statusText,headers:ts,config:re,request:Rn};es(function(Uo){me(Uo),qn()},function(Uo){Ne(Uo),qn()},As),Rn=null}"onloadend"in Rn?Rn.onloadend=mr:Rn.onreadystatechange=function(){!Rn||Rn.readyState!==4||Rn.status===0&&!(Rn.responseURL&&Rn.responseURL.indexOf("file:")===0)||setTimeout(mr)},Rn.onabort=function(){Rn&&(Ne(new ht("Request aborted",ht.ECONNABORTED,re,Rn)),Rn=null)},Rn.onerror=function(){Ne(new ht("Network Error",ht.ERR_NETWORK,re,Rn)),Rn=null},Rn.ontimeout=function(){let ts=Pe.timeout?"timeout of "+Pe.timeout+"ms exceeded":"timeout exceeded";const As=Pe.transitional||Ot;Pe.timeoutErrorMessage&&(ts=Pe.timeoutErrorMessage),Ne(new ht(ts,As.clarifyTimeoutError?ht.ETIMEDOUT:ht.ECONNABORTED,re,Rn)),Rn=null},pt===void 0&&yt.setContentType(null),"setRequestHeader"in Rn&&ve.forEach(yt.toJSON(),function(ts,As){Rn.setRequestHeader(As,ts)}),ve.isUndefined(Pe.withCredentials)||(Rn.withCredentials=!!Pe.withCredentials),kt&&kt!=="json"&&(Rn.responseType=Pe.responseType),kn&&([Un,ri]=Ma(kn,!0),Rn.addEventListener("progress",Un)),dn&&Rn.upload&&([Cn,oi]=Ma(dn),Rn.upload.addEventListener("progress",Cn),Rn.upload.addEventListener("loadend",oi)),(Pe.cancelToken||Pe.signal)&&(yn=ts=>{Rn&&(Ne(!ts||ts.type?new Di(null,re,Rn):ts),Rn.abort(),Rn=null)},Pe.cancelToken&&Pe.cancelToken.subscribe(yn),Pe.signal&&(Pe.signal.aborted?yn():Pe.signal.addEventListener("abort",yn)));const Si=ti(Pe.url);if(Si&&Hn.protocols.indexOf(Si)===-1){Ne(new ht("Unsupported protocol "+Si+":",ht.ERR_BAD_REQUEST,re));return}Rn.send(pt||null)})},Rr=(re,me)=>{const{length:Ne}=re=re?re.filter(Boolean):[];if(me||Ne){let Pe=new AbortController,pt;const yt=function(yn){if(!pt){pt=!0,dn();const Cn=yn instanceof Error?yn:this.reason;Pe.abort(Cn instanceof ht?Cn:new Di(Cn instanceof Error?Cn.message:Cn))}};let kt=me&&setTimeout(()=>{kt=null,yt(new ht(`timeout ${me} of ms exceeded`,ht.ETIMEDOUT))},me);const dn=()=>{re&&(kt&&clearTimeout(kt),kt=null,re.forEach(yn=>{yn.unsubscribe?yn.unsubscribe(yt):yn.removeEventListener("abort",yt)}),re=null)};re.forEach(yn=>yn.addEventListener("abort",yt));const{signal:kn}=Pe;return kn.unsubscribe=()=>ve.asap(dn),kn}};const wo=function*(re,me){let Ne=re.byteLength;if(Ne<me){yield re;return}let Pe=0,pt;for(;Pe<Ne;)pt=Pe+me,yield re.slice(Pe,pt),Pe=pt},Tu=function(re,me){return k0(this,null,function*(){try{for(var Ne=vw(ku(re)),Pe,pt,yt;Pe=!(pt=yield new au(Ne.next())).done;Pe=!1){const kt=pt.value;yield*N0(wo(kt,me))}}catch(pt){yt=[pt]}finally{try{Pe&&(pt=Ne.return)&&(yield new au(pt.call(Ne)))}finally{if(yt)throw yt[0]}}})},ku=function(re){return k0(this,null,function*(){if(re[Symbol.asyncIterator]){yield*N0(re);return}const me=re.getReader();try{for(;;){const{done:Ne,value:Pe}=yield new au(me.read());if(Ne)break;yield Pe}}finally{yield new au(me.cancel())}})},Jr=(re,me,Ne,Pe)=>{const pt=Tu(re,me);let yt=0,kt,dn=yn=>{kt||(kt=!0,Pe&&Pe(yn))};return new ReadableStream({pull(yn){return Ht(this,null,function*(){try{const{done:Cn,value:Un}=yield pt.next();if(Cn){dn(),yn.close();return}let oi=Un.byteLength;if(Ne){let ri=yt+=oi;Ne(ri)}yn.enqueue(new Uint8Array(Un))}catch(Cn){throw dn(Cn),Cn}})},cancel(yn){return dn(yn),pt.return()}},{highWaterMark:2})},xl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Td=xl&&typeof ReadableStream=="function",Ga=xl&&(typeof TextEncoder=="function"?(re=>me=>re.encode(me))(new TextEncoder):re=>Ht(null,null,function*(){return new Uint8Array(yield new Response(re).arrayBuffer())})),Vl=(re,...me)=>{try{return!!re(...me)}catch(Ne){return!1}},Nu=Td&&Vl(()=>{let re=!1;const me=new Request(Hn.origin,{body:new ReadableStream,method:"POST",get duplex(){return re=!0,"half"}}).headers.has("Content-Type");return re&&!me}),lr=64*1024,ci=Td&&Vl(()=>ve.isReadableStream(new Response("").body)),So={stream:ci&&(re=>re.body)};xl&&(re=>{["text","arrayBuffer","blob","formData","stream"].forEach(me=>{!So[me]&&(So[me]=ve.isFunction(re[me])?Ne=>Ne[me]():(Ne,Pe)=>{throw new ht(`Response type '${me}' is not supported`,ht.ERR_NOT_SUPPORT,Pe)})})})(new Response);const jr=re=>Ht(null,null,function*(){if(re==null)return 0;if(ve.isBlob(re))return re.size;if(ve.isSpecCompliantForm(re))return(yield new Request(Hn.origin,{method:"POST",body:re}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(re)||ve.isArrayBuffer(re))return re.byteLength;if(ve.isURLSearchParams(re)&&(re=re+""),ve.isString(re))return(yield Ga(re)).byteLength}),Wa=(re,me)=>Ht(null,null,function*(){const Ne=ve.toFiniteNumber(re.getContentLength());return Ne!=null?Ne:jr(me)});var ui=xl&&(re=>Ht(null,null,function*(){let{url:me,method:Ne,data:Pe,signal:pt,cancelToken:yt,timeout:kt,onDownloadProgress:dn,onUploadProgress:kn,responseType:yn,headers:Cn,withCredentials:Un="same-origin",fetchOptions:oi}=jc(re);yn=yn?(yn+"").toLowerCase():"text";let ri=Rr([pt,yt&&yt.toAbortSignal()],kt),qn;const Rn=ri&&ri.unsubscribe&&(()=>{ri.unsubscribe()});let mr;try{if(kn&&Nu&&Ne!=="get"&&Ne!=="head"&&(mr=yield Wa(Cn,Pe))!==0){let Za=new Request(me,{method:"POST",body:Pe,duplex:"half"}),Ya;if(ve.isFormData(Pe)&&(Ya=Za.headers.get("content-type"))&&Cn.setContentType(Ya),Za.body){const[fa,Dr]=qa(mr,Ma(ha(kn)));Pe=Jr(Za.body,lr,fa,Dr)}}ve.isString(Un)||(Un=Un?"include":"omit");const Si="credentials"in Request.prototype;qn=new Request(me,Me(te({},oi),{signal:ri,method:Ne.toUpperCase(),headers:Cn.normalize().toJSON(),body:Pe,duplex:"half",credentials:Si?Un:void 0}));let ts=yield fetch(qn);const As=ci&&(yn==="stream"||yn==="response");if(ci&&(dn||As&&Rn)){const Za={};["status","statusText","headers"].forEach(kd=>{Za[kd]=ts[kd]});const Ya=ve.toFiniteNumber(ts.headers.get("content-length")),[fa,Dr]=dn&&qa(Ya,Ma(ha(dn),!0))||[];ts=new Response(Jr(ts.body,lr,fa,()=>{Dr&&Dr(),Rn&&Rn()}),Za)}yn=yn||"text";let Uo=yield So[ve.findKey(So,yn)||"text"](ts,re);return!As&&Rn&&Rn(),yield new Promise((Za,Ya)=>{es(Za,Ya,{data:Uo,headers:ds.from(ts.headers),status:ts.status,statusText:ts.statusText,config:re,request:qn})})}catch(Si){throw Rn&&Rn(),Si&&Si.name==="TypeError"&&/fetch/i.test(Si.message)?Object.assign(new ht("Network Error",ht.ERR_NETWORK,re,qn),{cause:Si.cause||Si}):ht.from(Si,Si&&Si.code,re,qn)}}));const jo={http:cn,xhr:Ih,fetch:ui};ve.forEach(jo,(re,me)=>{if(re){try{Object.defineProperty(re,"name",{value:me})}catch(Ne){}Object.defineProperty(re,"adapterName",{value:me})}});const Ea=re=>`- ${re}`,Aa=re=>ve.isFunction(re)||re===null||re===!1;var pr={getAdapter:re=>{re=ve.isArray(re)?re:[re];const{length:me}=re;let Ne,Pe;const pt={};for(let yt=0;yt<me;yt++){Ne=re[yt];let kt;if(Pe=Ne,!Aa(Ne)&&(Pe=jo[(kt=String(Ne)).toLowerCase()],Pe===void 0))throw new ht(`Unknown adapter '${kt}'`);if(Pe)break;pt[kt||"#"+yt]=Pe}if(!Pe){const yt=Object.entries(pt).map(([dn,kn])=>`adapter ${dn} `+(kn===!1?"is not supported by the environment":"is not available in the build"));let kt=me?yt.length>1?`since :
`+yt.map(Ea).join(`
`):" "+Ea(yt[0]):"as no adapter specified";throw new ht("There is no suitable adapter to dispatch the request "+kt,"ERR_NOT_SUPPORT")}return Pe},adapters:jo};function Ms(re){if(re.cancelToken&&re.cancelToken.throwIfRequested(),re.signal&&re.signal.aborted)throw new Di(null,re)}function Ls(re){return Ms(re),re.headers=ds.from(re.headers),re.data=Kr.call(re,re.transformRequest),["post","put","patch"].indexOf(re.method)!==-1&&re.headers.setContentType("application/x-www-form-urlencoded",!1),pr.getAdapter(re.adapter||Wi.adapter)(re).then(function(me){return Ms(re),me.data=Kr.call(re,re.transformResponse,me),me.headers=ds.from(me.headers),me},function(me){return Na(me)||(Ms(re),me&&me.response&&(me.response.data=Kr.call(re,re.transformResponse,me.response),me.response.headers=ds.from(me.response.headers))),Promise.reject(me)})}const ws="1.8.2",vi={};["object","boolean","number","function","string","symbol"].forEach((re,me)=>{vi[re]=function(Ne){return typeof Ne===re||"a"+(me<1?"n ":" ")+re}});const Co={};vi.transitional=function(re,me,Ne){function Pe(pt,yt){return"[Axios v"+ws+"] Transitional option '"+pt+"'"+yt+(Ne?". "+Ne:"")}return(pt,yt,kt)=>{if(re===!1)throw new ht(Pe(yt," has been removed"+(me?" in "+me:"")),ht.ERR_DEPRECATED);return me&&!Co[yt]&&(Co[yt]=!0,console.warn(Pe(yt," has been deprecated since v"+me+" and will be removed in the near future"))),re?re(pt,yt,kt):!0}},vi.spelling=function(re){return(me,Ne)=>(console.warn(`${Ne} is likely a misspelling of ${re}`),!0)};function Zs(re,me,Ne){if(typeof re!="object")throw new ht("options must be an object",ht.ERR_BAD_OPTION_VALUE);const Pe=Object.keys(re);let pt=Pe.length;for(;pt-- >0;){const yt=Pe[pt],kt=me[yt];if(kt){const dn=re[yt],kn=dn===void 0||kt(dn,yt,re);if(kn!==!0)throw new ht("option "+yt+" must be "+kn,ht.ERR_BAD_OPTION_VALUE);continue}if(Ne!==!0)throw new ht("Unknown option "+yt,ht.ERR_BAD_OPTION)}}var gs={assertOptions:Zs,validators:vi};const rs=gs.validators;class Pa{constructor(me){this.defaults=me,this.interceptors={request:new Gt,response:new Gt}}request(me,Ne){return Ht(this,null,function*(){try{return yield this._request(me,Ne)}catch(Pe){if(Pe instanceof Error){let pt={};Error.captureStackTrace?Error.captureStackTrace(pt):pt=new Error;const yt=pt.stack?pt.stack.replace(/^.+\n/,""):"";try{Pe.stack?yt&&!String(Pe.stack).endsWith(yt.replace(/^.+\n.+\n/,""))&&(Pe.stack+=`
`+yt):Pe.stack=yt}catch(kt){}}throw Pe}})}_request(me,Ne){typeof me=="string"?(Ne=Ne||{},Ne.url=me):Ne=me||{},Ne=Vo(this.defaults,Ne);const{transitional:Pe,paramsSerializer:pt,headers:yt}=Ne;Pe!==void 0&&gs.assertOptions(Pe,{silentJSONParsing:rs.transitional(rs.boolean),forcedJSONParsing:rs.transitional(rs.boolean),clarifyTimeoutError:rs.transitional(rs.boolean)},!1),pt!=null&&(ve.isFunction(pt)?Ne.paramsSerializer={serialize:pt}:gs.assertOptions(pt,{encode:rs.function,serialize:rs.function},!0)),Ne.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?Ne.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:Ne.allowAbsoluteUrls=!0),gs.assertOptions(Ne,{baseUrl:rs.spelling("baseURL"),withXsrfToken:rs.spelling("withXSRFToken")},!0),Ne.method=(Ne.method||this.defaults.method||"get").toLowerCase();let kt=yt&&ve.merge(yt.common,yt[Ne.method]);yt&&ve.forEach(["delete","get","head","post","put","patch","common"],qn=>{delete yt[qn]}),Ne.headers=ds.concat(kt,yt);const dn=[];let kn=!0;this.interceptors.request.forEach(function(qn){typeof qn.runWhen=="function"&&qn.runWhen(Ne)===!1||(kn=kn&&qn.synchronous,dn.unshift(qn.fulfilled,qn.rejected))});const yn=[];this.interceptors.response.forEach(function(qn){yn.push(qn.fulfilled,qn.rejected)});let Cn,Un=0,oi;if(!kn){const qn=[Ls.bind(this),void 0];for(qn.unshift.apply(qn,dn),qn.push.apply(qn,yn),oi=qn.length,Cn=Promise.resolve(Ne);Un<oi;)Cn=Cn.then(qn[Un++],qn[Un++]);return Cn}oi=dn.length;let ri=Ne;for(Un=0;Un<oi;){const qn=dn[Un++],Rn=dn[Un++];try{ri=qn(ri)}catch(mr){Rn.call(this,mr);break}}try{Cn=Ls.call(this,ri)}catch(qn){return Promise.reject(qn)}for(Un=0,oi=yn.length;Un<oi;)Cn=Cn.then(yn[Un++],yn[Un++]);return Cn}getUri(me){me=Vo(this.defaults,me);const Ne=Cd(me.baseURL,me.url,me.allowAbsoluteUrls);return et(Ne,me.params,me.paramsSerializer)}}ve.forEach(["delete","get","head","options"],function(re){Pa.prototype[re]=function(me,Ne){return this.request(Vo(Ne||{},{method:re,url:me,data:(Ne||{}).data}))}}),ve.forEach(["post","put","patch"],function(re){function me(Ne){return function(Pe,pt,yt){return this.request(Vo(yt||{},{method:re,headers:Ne?{"Content-Type":"multipart/form-data"}:{},url:Pe,data:pt}))}}Pa.prototype[re]=me(),Pa.prototype[re+"Form"]=me(!0)});var Mi=Pa;class Zi{constructor(me){if(typeof me!="function")throw new TypeError("executor must be a function.");let Ne;this.promise=new Promise(function(pt){Ne=pt});const Pe=this;this.promise.then(pt=>{if(!Pe._listeners)return;let yt=Pe._listeners.length;for(;yt-- >0;)Pe._listeners[yt](pt);Pe._listeners=null}),this.promise.then=pt=>{let yt;const kt=new Promise(dn=>{Pe.subscribe(dn),yt=dn}).then(pt);return kt.cancel=function(){Pe.unsubscribe(yt)},kt},me(function(pt,yt,kt){Pe.reason||(Pe.reason=new Di(pt,yt,kt),Ne(Pe.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(me){if(this.reason){me(this.reason);return}this._listeners?this._listeners.push(me):this._listeners=[me]}unsubscribe(me){if(!this._listeners)return;const Ne=this._listeners.indexOf(me);Ne!==-1&&this._listeners.splice(Ne,1)}toAbortSignal(){const me=new AbortController,Ne=Pe=>{me.abort(Pe)};return this.subscribe(Ne),me.signal.unsubscribe=()=>this.unsubscribe(Ne),me.signal}static source(){let me;return{token:new Zi(function(Ne){me=Ne}),cancel:me}}}var di=Zi;function Kn(re){return function(me){return re.apply(null,me)}}function Ys(re){return ve.isObject(re)&&re.isAxiosError===!0}const Yn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yn).forEach(([re,me])=>{Yn[me]=re});var _l=Yn;function Es(re){const me=new Mi(re),Ne=e(Mi.prototype.request,me);return ve.extend(Ne,Mi.prototype,me,{allOwnKeys:!0}),ve.extend(Ne,me,null,{allOwnKeys:!0}),Ne.create=function(Pe){return Es(Vo(re,Pe))},Ne}const Ss=Es(Wi);return Ss.Axios=Mi,Ss.CanceledError=Di,Ss.CancelToken=di,Ss.isCancel=Na,Ss.VERSION=ws,Ss.toFormData=be,Ss.AxiosError=ht,Ss.Cancel=Ss.CanceledError,Ss.all=function(re){return Promise.all(re)},Ss.spread=Kn,Ss.isAxiosError=Ys,Ss.mergeConfig=Vo,Ss.AxiosHeaders=ds,Ss.formToJSON=re=>lt(ve.isHTMLForm(re)?new FormData(re):re),Ss.getAdapter=pr.getAdapter,Ss.HttpStatusCode=_l,Ss.default=Ss,Nw=Ss,Nw}var ak;function f4(){if(ak)return ch;ak=1;var e=ch&&ch.__assign||function(){return e=Object.assign||function(o){for(var u,c=1,a=arguments.length;c<a;c++){u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(o[g]=u[g])}return o},e.apply(this,arguments)};Object.defineProperty(ch,"__esModule",{value:!0}),ch.getRequestHeaders=ch.getAxiosClient=void 0;var t=iI();function n(o,u,c,a,g){return t.default.create({baseURL:o,headers:i(u,a,c,o,g),withCredentials:!0})}ch.getAxiosClient=n;function i(o,u,c,a,g){o===void 0&&(o=!1);var _={Accept:"application/json","Content-Type":"application/json; charset=utf-8"};return o&&u&&c&&(_.Authorization="".concat(u," ").concat(c())),typeof window<"u"&&typeof document<"u"&&(window.location&&(a&&a!==window.location.origin||(_["X-Frappe-Site-Name"]=window.location.hostname)),window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(_["X-Frappe-CSRF-Token"]=window.csrf_token)),e(e({},_),g!=null?g:{})}return ch.getRequestHeaders=i,ch}var ok;function p4(){if(ok)return cu;ok=1;var e=cu&&cu.__assign||function(){return e=Object.assign||function(u){for(var c,a=1,g=arguments.length;a<g;a++){c=arguments[a];for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(u[_]=c[_])}return u},e.apply(this,arguments)},t=cu&&cu.__awaiter||function(u,c,a,g){function _(S){return S instanceof a?S:new a(function(N){N(S)})}return new(a||(a=Promise))(function(S,N){function A(B){try{D(g.next(B))}catch($){N($)}}function E(B){try{D(g.throw(B))}catch($){N($)}}function D(B){B.done?S(B.value):_(B.value).then(A,E)}D((g=g.apply(u,c||[])).next())})},n=cu&&cu.__generator||function(u,c){var a={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},g,_,S,N;return N={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function A(D){return function(B){return E([D,B])}}function E(D){if(g)throw new TypeError("Generator is already executing.");for(;N&&(N=0,D[0]&&(a=0)),a;)try{if(g=1,_&&(S=D[0]&2?_.return:D[0]?_.throw||((S=_.return)&&S.call(_),0):_.next)&&!(S=S.call(_,D[1])).done)return S;switch(_=0,S&&(D=[D[0]&2,S.value]),D[0]){case 0:case 1:S=D;break;case 4:return a.label++,{value:D[1],done:!1};case 5:a.label++,_=D[1],D=[0];continue;case 7:D=a.ops.pop(),a.trys.pop();continue;default:if(S=a.trys,!(S=S.length>0&&S[S.length-1])&&(D[0]===6||D[0]===2)){a=0;continue}if(D[0]===3&&(!S||D[1]>S[0]&&D[1]<S[3])){a.label=D[1];break}if(D[0]===6&&a.label<S[1]){a.label=S[1],S=D;break}if(S&&a.label<S[2]){a.label=S[2],a.ops.push(D);break}S[2]&&a.ops.pop(),a.trys.pop();continue}D=c.call(u,a)}catch(B){D=[6,B],_=0}finally{g=S=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}};Object.defineProperty(cu,"__esModule",{value:!0}),cu.FrappeFileUpload=void 0;var i=f4(),o=function(){function u(c,a,g,_,S,N){this.appURL=c,this.axios=a,this.useToken=g!=null?g:!1,this.token=_,this.tokenType=S,this.customHeaders=N}return u.prototype.uploadFile=function(c,a,g,_){return _===void 0&&(_="upload_file"),t(this,void 0,void 0,function(){var S,N,A,E,D,B,$,G;return n(this,function(W){return S=new FormData,c&&S.append("file",c,c.name),N=a.isPrivate,A=a.folder,E=a.file_url,D=a.doctype,B=a.docname,$=a.fieldname,G=a.otherData,N&&S.append("is_private","1"),A&&S.append("folder",A),E&&S.append("file_url",E),D&&B&&(S.append("doctype",D),S.append("docname",B),$&&S.append("fieldname",$)),G&&Object.keys(G).forEach(function(J){var Z=G[J];S.append(J,Z)}),[2,this.axios.post("/api/method/".concat(_),S,{onUploadProgress:function(J){g&&g(J.loaded,J.total,J)},headers:e(e({},(0,i.getRequestHeaders)(this.useToken,this.tokenType,this.token,this.appURL,this.customHeaders)),{"Content-Type":"multipart/form-data"})}).catch(function(J){var Z,K;throw e(e({},J.response.data),{httpStatus:J.response.status,httpStatusText:J.response.statusText,message:(Z=J.response.data.message)!==null&&Z!==void 0?Z:"There was an error while uploading the file.",exception:(K=J.response.data.exception)!==null&&K!==void 0?K:""})})]})})},u}();return cu.FrappeFileUpload=o,cu}var lk;function sI(){if(lk)return A0;lk=1,Object.defineProperty(A0,"__esModule",{value:!0}),A0.FrappeApp=void 0;var e=m4(),t=d4(),n=h4(),i=p4(),o=f4(),u=function(){function c(a,g,_,S){var N,A;this.url=a,this.name=_!=null?_:"FrappeApp",this.useToken=(N=g==null?void 0:g.useToken)!==null&&N!==void 0?N:!1,this.token=g==null?void 0:g.token,this.tokenType=(A=g==null?void 0:g.type)!==null&&A!==void 0?A:"Bearer",this.customHeaders=S,this.axios=(0,o.getAxiosClient)(this.url,this.useToken,this.token,this.tokenType,this.customHeaders)}return c.prototype.auth=function(){return new e.FrappeAuth(this.url,this.axios,this.useToken,this.token,this.tokenType)},c.prototype.db=function(){return new n.FrappeDB(this.url,this.axios,this.useToken,this.token,this.tokenType)},c.prototype.file=function(){return new i.FrappeFileUpload(this.url,this.axios,this.useToken,this.token,this.tokenType,this.customHeaders)},c.prototype.call=function(){return new t.FrappeCall(this.url,this.axios,this.useToken,this.token,this.tokenType)},c}();return A0.FrappeApp=u,A0}var uu={},ck;function rI(){if(ck)return uu;ck=1;var e=uu&&uu.__assign||function(){return e=Object.assign||function(o){for(var u,c=1,a=arguments.length;c<a;c++){u=arguments[c];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(o[g]=u[g])}return o},e.apply(this,arguments)},t=uu&&uu.__awaiter||function(o,u,c,a){function g(_){return _ instanceof c?_:new c(function(S){S(_)})}return new(c||(c=Promise))(function(_,S){function N(D){try{E(a.next(D))}catch(B){S(B)}}function A(D){try{E(a.throw(D))}catch(B){S(B)}}function E(D){D.done?_(D.value):g(D.value).then(N,A)}E((a=a.apply(o,u||[])).next())})},n=uu&&uu.__generator||function(o,u){var c={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},a,g,_,S;return S={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function N(E){return function(D){return A([E,D])}}function A(E){if(a)throw new TypeError("Generator is already executing.");for(;S&&(S=0,E[0]&&(c=0)),c;)try{if(a=1,g&&(_=E[0]&2?g.return:E[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,E[1])).done)return _;switch(g=0,_&&(E=[E[0]&2,_.value]),E[0]){case 0:case 1:_=E;break;case 4:return c.label++,{value:E[1],done:!1};case 5:c.label++,g=E[1],E=[0];continue;case 7:E=c.ops.pop(),c.trys.pop();continue;default:if(_=c.trys,!(_=_.length>0&&_[_.length-1])&&(E[0]===6||E[0]===2)){c=0;continue}if(E[0]===3&&(!_||E[1]>_[0]&&E[1]<_[3])){c.label=E[1];break}if(E[0]===6&&c.label<_[1]){c.label=_[1],_=E;break}if(_&&c.label<_[2]){c.label=_[2],c.ops.push(E);break}_[2]&&c.ops.pop(),c.trys.pop();continue}E=u.call(o,c)}catch(D){E=[6,D],g=0}finally{a=_=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(uu,"__esModule",{value:!0}),uu.FrappeAuth=void 0;var i=function(){function o(u,c,a,g,_){this.appURL=u,this.axios=c,this.useToken=a!=null?a:!1,this.token=g,this.tokenType=_}return o.prototype.loginWithUsernamePassword=function(u){return t(this,void 0,void 0,function(){return n(this,function(c){return[2,this.axios.post("/api/method/login",{usr:u.username,pwd:u.password,otp:u.otp,tmp_id:u.tmp_id,device:u.device}).then(function(a){return a.data}).catch(function(a){var g,_;throw e(e({},a.response.data),{httpStatus:a.response.status,httpStatusText:a.response.statusText,message:(g=a.response.data.message)!==null&&g!==void 0?g:"There was an error while logging in",exception:(_=a.response.data.exception)!==null&&_!==void 0?_:""})})]})})},o.prototype.getLoggedInUser=function(){return t(this,void 0,void 0,function(){return n(this,function(u){return[2,this.axios.get("/api/method/frappe.auth.get_logged_user").then(function(c){return c.data.message}).catch(function(c){var a;throw e(e({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:"There was an error while fetching the logged in user",exception:(a=c.response.data.exception)!==null&&a!==void 0?a:""})})]})})},o.prototype.logout=function(){return t(this,void 0,void 0,function(){return n(this,function(u){return[2,this.axios.post("/api/method/logout",{}).then(function(){}).catch(function(c){var a,g;throw e(e({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:(a=c.response.data.message)!==null&&a!==void 0?a:"There was an error while logging out",exception:(g=c.response.data.exception)!==null&&g!==void 0?g:""})})]})})},o.prototype.forgetPassword=function(u){return t(this,void 0,void 0,function(){return n(this,function(c){return[2,this.axios.post("/",{cmd:"frappe.core.doctype.user.user.reset_password",user:u}).then(function(){}).catch(function(a){var g,_;throw e(e({},a.response.data),{httpStatus:a.response.status,httpStatusText:a.response.statusText,message:(g=a.response.data.message)!==null&&g!==void 0?g:"There was an error sending password reset email.",exception:(_=a.response.data.exception)!==null&&_!==void 0?_:""})})]})})},o}();return uu.FrappeAuth=i,uu}var uk;function m4(){return uk||(uk=1,function(e){var t=Rg&&Rg.__createBinding||(Object.create?function(i,o,u,c){c===void 0&&(c=u);var a=Object.getOwnPropertyDescriptor(o,u);(!a||("get"in a?!o.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(i,c,a)}:function(i,o,u,c){c===void 0&&(c=u),i[c]=o[u]}),n=Rg&&Rg.__exportStar||function(i,o){for(var u in i)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&t(o,i,u)};Object.defineProperty(e,"__esModule",{value:!0}),n(sI(),e),n(rI(),e),n(h4(),e),n(p4(),e),n(d4(),e)}(Rg)),Rg}var aI=m4(),dk={exports:{}},Mw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hk;function oI(){if(hk)return Mw;hk=1;var e=Rt;function t(N,A){return N===A&&(N!==0||1/N===1/A)||N!==N&&A!==A}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,o=e.useEffect,u=e.useLayoutEffect,c=e.useDebugValue;function a(N,A){var E=A(),D=i({inst:{value:E,getSnapshot:A}}),B=D[0].inst,$=D[1];return u(function(){B.value=E,B.getSnapshot=A,g(B)&&$({inst:B})},[N,E,A]),o(function(){return g(B)&&$({inst:B}),N(function(){g(B)&&$({inst:B})})},[N]),c(E),E}function g(N){var A=N.getSnapshot;N=N.value;try{var E=A();return!n(N,E)}catch(D){return!0}}function _(N,A){return A()}var S=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_:a;return Mw.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:S,Mw}var fk;function lI(){return fk||(fk=1,dk.exports=oI()),dk.exports}var cI=lI();const g4=0,y4=1,x4=2,pk=3;var mk=Object.prototype.hasOwnProperty;function K2(e,t){var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&K2(e[i],t[i]););return i===-1}if(!n||typeof e=="object"){i=0;for(n in e)if(mk.call(e,n)&&++i&&!mk.call(t,n)||!(n in t)||!K2(e[n],t[n]))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}const yh=new WeakMap,If=()=>{},go=If(),jv=Object,Ji=e=>e===go,pu=e=>typeof e=="function",jh=(e,t)=>te(te({},e),t),_4=e=>pu(e.then),Ew={},J_={},Uj="undefined",qx=typeof window!=Uj,Q2=typeof document!=Uj,uI=qx&&"Deno"in window,dI=()=>qx&&typeof window.requestAnimationFrame!=Uj,b4=(e,t)=>{const n=yh.get(e);return[()=>!Ji(t)&&e.get(t)||Ew,i=>{if(!Ji(t)){const o=e.get(t);t in J_||(J_[t]=o),n[5](t,jh(o,i),o||Ew)}},n[6],()=>!Ji(t)&&t in J_?J_[t]:!Ji(t)&&e.get(t)||Ew]};let J2=!0;const hI=()=>J2,[eS,tS]=qx&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[If,If],fI=()=>{const e=Q2&&document.visibilityState;return Ji(e)||e!=="hidden"},pI=e=>(Q2&&document.addEventListener("visibilitychange",e),eS("focus",e),()=>{Q2&&document.removeEventListener("visibilitychange",e),tS("focus",e)}),mI=e=>{const t=()=>{J2=!0,e()},n=()=>{J2=!1};return eS("online",t),eS("offline",n),()=>{tS("online",t),tS("offline",n)}},gI={isOnline:hI,isVisible:fI},yI={initFocus:pI,initReconnect:mI},gk=!Rt.useId,vx=!qx||uI,xI=e=>dI()?window.requestAnimationFrame(e):setTimeout(e,1),Ub=vx?L.useEffect:L.useLayoutEffect,Aw=typeof navigator<"u"&&navigator.connection,yk=!vx&&Aw&&(["slow-2g","2g"].includes(Aw.effectiveType)||Aw.saveData),eb=new WeakMap,Pw=(e,t)=>jv.prototype.toString.call(e)===`[object ${t}]`;let _I=0;const nS=e=>{const t=typeof e,n=Pw(e,"Date"),i=Pw(e,"RegExp"),o=Pw(e,"Object");let u,c;if(jv(e)===e&&!n&&!i){if(u=eb.get(e),u)return u;if(u=++_I+"~",eb.set(e,u),Array.isArray(e)){for(u="@",c=0;c<e.length;c++)u+=nS(e[c])+",";eb.set(e,u)}if(o){u="#";const a=jv.keys(e).sort();for(;!Ji(c=a.pop());)Ji(e[c])||(u+=c+":"+nS(e[c])+",");eb.set(e,u)}}else u=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return u},$j=e=>{if(pu(e))try{e=e()}catch(n){e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?nS(e):"",[e,t]};let bI=0;const iS=()=>++bI;function v4(...e){return Ht(this,null,function*(){const[t,n,i,o]=e,u=jh({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let c=u.populateCache;const a=u.rollbackOnError;let g=u.optimisticData;const _=A=>typeof a=="function"?a(A):a!==!1,S=u.throwOnError;if(pu(n)){const A=n,E=[],D=t.keys();for(const B of D)!/^\$(inf|sub)\$/.test(B)&&A(t.get(B)._k)&&E.push(B);return Promise.all(E.map(N))}return N(n);function N(A){return Ht(this,null,function*(){const[E]=$j(A);if(!E)return;const[D,B]=b4(t,E),[$,G,W,J]=yh.get(t),Z=()=>{const st=$[E];return(pu(u.revalidate)?u.revalidate(D().data,A):u.revalidate!==!1)&&(delete W[E],delete J[E],st&&st[0])?st[0](x4).then(()=>D().data):D().data};if(e.length<3)return Z();let K=i,le;const _e=iS();G[E]=[_e,0];const de=!Ji(g),pe=D(),Oe=pe.data,He=pe._c,We=Ji(He)?Oe:He;if(de&&(g=pu(g)?g(We,Oe):g,B({data:g,_c:We})),pu(K))try{K=K(We)}catch(st){le=st}if(K&&_4(K))if(K=yield K.catch(st=>{le=st}),_e!==G[E][0]){if(le)throw le;return K}else le&&de&&_(le)&&(c=!0,B({data:We,_c:go}));if(c&&!le)if(pu(c)){const st=c(K,We);B({data:st,error:go,_c:go})}else B({data:K,error:go,_c:go});if(G[E][1]=iS(),Promise.resolve(Z()).then(()=>{B({_c:go})}),le){if(S)throw le;return}return K})}})}const xk=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},w4=(e,t)=>{if(!yh.has(e)){const n=jh(yI,t),i=Object.create(null),o=v4.bind(go,e);let u=If;const c=Object.create(null),a=(S,N)=>{const A=c[S]||[];return c[S]=A,A.push(N),()=>A.splice(A.indexOf(N),1)},g=(S,N,A)=>{e.set(S,N);const E=c[S];if(E)for(const D of E)D(N,A)},_=()=>{if(!yh.has(e)&&(yh.set(e,[i,Object.create(null),Object.create(null),Object.create(null),o,g,a]),!vx)){const S=n.initFocus(setTimeout.bind(go,xk.bind(go,i,g4))),N=n.initReconnect(setTimeout.bind(go,xk.bind(go,i,y4)));u=()=>{S&&S(),N&&N(),yh.delete(e)}}};return _(),[e,o,_,u]}return[e,yh.get(e)[4]]},vI=(e,t,n,i,o)=>{const u=n.errorRetryCount,c=o.retryCount,a=~~((Math.random()+.5)*(1<<(c<8?c:8)))*n.errorRetryInterval;!Ji(u)&&c>u||setTimeout(i,a,o)},wI=K2,[Hj,SI]=w4(new Map),S4=jh({onLoadingSlow:If,onSuccess:If,onError:If,onErrorRetry:vI,onDiscarded:If,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:yk?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:yk?5e3:3e3,compare:wI,isPaused:()=>!1,cache:Hj,mutate:SI,fallback:{}},gI),j4=(e,t)=>{const n=jh(e,t);if(t){const{use:i,fallback:o}=e,{use:u,fallback:c}=t;i&&u&&(n.use=i.concat(u)),o&&c&&(n.fallback=jh(o,c))}return n},sS=L.createContext({}),jI=e=>{const{value:t}=e,n=L.useContext(sS),i=pu(t),o=L.useMemo(()=>i?t(n):t,[i,n,t]),u=L.useMemo(()=>i?o:j4(n,o),[i,n,o]),c=o&&o.provider,a=L.useRef(go);c&&!a.current&&(a.current=w4(c(u.cache||Hj),o));const g=a.current;return g&&(u.cache=g[0],u.mutate=g[1]),Ub(()=>{if(g)return g[2]&&g[2](),g[3]},[]),L.createElement(sS.Provider,jh(e,{value:u}))},CI="$inf$",C4=qx&&window.__SWR_DEVTOOLS_USE__,TI=C4?window.__SWR_DEVTOOLS_USE__:[],kI=()=>{C4&&(window.__SWR_DEVTOOLS_REACT__=Rt)},NI=e=>pu(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],T4=()=>jh(S4,L.useContext(sS)),MI=e=>(t,n,i)=>e(t,n&&((...o)=>{const[u]=$j(t),[,,,c]=yh.get(Hj);if(u.startsWith(CI))return n(...o);const a=c[u];return Ji(a)?n(...o):(delete c[u],a)}),i),EI=TI.concat(MI),AI=e=>function(...t){const n=T4(),[i,o,u]=NI(t),c=j4(n,u);let a=e;const{use:g}=c,_=(g||[]).concat(EI);for(let S=_.length;S--;)a=_[S](a);return a(i,o||c.fetcher||null,c)},PI=(e,t,n)=>{const i=t[e]||(t[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o>=0&&(i[o]=i[i.length-1],i.pop())}};kI();const Rw=Rt.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),Dw={dedupe:!0},RI=(e,t,n)=>{const{cache:i,compare:o,suspense:u,fallbackData:c,revalidateOnMount:a,revalidateIfStale:g,refreshInterval:_,refreshWhenHidden:S,refreshWhenOffline:N,keepPreviousData:A}=n,[E,D,B,$]=yh.get(i),[G,W]=$j(e),J=L.useRef(!1),Z=L.useRef(!1),K=L.useRef(G),le=L.useRef(t),_e=L.useRef(n),de=()=>_e.current,pe=()=>de().isVisible()&&de().isOnline(),[Oe,He,We,st]=b4(i,G),At=L.useRef({}).current,vt=Ji(c)?Ji(n.fallback)?go:n.fallback[G]:c,ze=(It,Lt)=>{for(const nn in At){const _n=nn;if(_n==="data"){if(!o(It[_n],Lt[_n])&&(!Ji(It[_n])||!o(ct,Lt[_n])))return!1}else if(Lt[_n]!==It[_n])return!1}return!0},Qe=L.useMemo(()=>{const It=!G||!t?!1:Ji(a)?de().isPaused()||u?!1:g!==!1:a,Lt=ln=>{const Ue=jh(ln);return delete Ue._k,It?te({isValidating:!0,isLoading:!0},Ue):Ue},nn=Oe(),_n=st(),Xn=Lt(nn),Gn=nn===_n?Xn:Lt(_n);let gn=Xn;return[()=>{const ln=Lt(Oe());return ze(ln,gn)?(gn.data=ln.data,gn.isLoading=ln.isLoading,gn.isValidating=ln.isValidating,gn.error=ln.error,gn):(gn=ln,ln)},()=>Gn]},[i,G]),Je=cI.useSyncExternalStore(L.useCallback(It=>We(G,(Lt,nn)=>{ze(nn,Lt)||It()}),[i,G]),Qe[0],Qe[1]),Pt=!J.current,fe=E[G]&&E[G].length>0,Xe=Je.data,tt=Ji(Xe)?vt&&_4(vt)?Rw(vt):vt:Xe,Ae=Je.error,ot=L.useRef(tt),ct=A?Ji(Xe)?Ji(ot.current)?tt:ot.current:Xe:tt,ut=fe&&!Ji(Ae)?!1:Pt&&!Ji(a)?a:de().isPaused()?!1:u?Ji(tt)?!1:g:Ji(tt)||g,tn=!!(G&&t&&Pt&&ut),Ge=Ji(Je.isValidating)?tn:Je.isValidating,Ye=Ji(Je.isLoading)?tn:Je.isLoading,zt=L.useCallback(It=>Ht(null,null,function*(){const Lt=le.current;if(!G||!Lt||Z.current||de().isPaused())return!1;let nn,_n,Xn=!0;const Gn=It||{},gn=!B[G]||!Gn.dedupe,ln=()=>gk?!Z.current&&G===K.current&&J.current:G===K.current,Ue={isValidating:!1,isLoading:!1},ge=()=>{He(Ue)},ve=()=>{const ft=B[G];ft&&ft[1]===_n&&delete B[G]},ht={isValidating:!0};Ji(Oe().data)&&(ht.isLoading=!0);try{if(gn&&(He(ht),n.loadingTimeout&&Ji(Oe().data)&&setTimeout(()=>{Xn&&ln()&&de().onLoadingSlow(G,n)},n.loadingTimeout),B[G]=[Lt(W),iS()]),[nn,_n]=B[G],nn=yield nn,gn&&setTimeout(ve,n.dedupingInterval),!B[G]||B[G][1]!==_n)return gn&&ln()&&de().onDiscarded(G),!1;Ue.error=go;const ft=D[G];if(!Ji(ft)&&(_n<=ft[0]||_n<=ft[1]||ft[1]===0))return ge(),gn&&ln()&&de().onDiscarded(G),!1;const qt=Oe().data;Ue.data=o(qt,nn)?qt:nn,gn&&ln()&&de().onSuccess(nn,G,n)}catch(ft){ve();const qt=de(),{shouldRetryOnError:cn}=qt;qt.isPaused()||(Ue.error=ft,gn&&ln()&&(qt.onError(ft,G,qt),(cn===!0||pu(cn)&&cn(ft))&&(!de().revalidateOnFocus||!de().revalidateOnReconnect||pe())&&qt.onErrorRetry(ft,G,qt,Qt=>{const xt=E[G];xt&&xt[0]&&xt[0](pk,Qt)},{retryCount:(Gn.retryCount||0)+1,dedupe:!0})))}return Xn=!1,ge(),!0}),[G,i]),Bt=L.useCallback((...It)=>v4(i,K.current,...It),[]);if(Ub(()=>{le.current=t,_e.current=n,Ji(Xe)||(ot.current=Xe)}),Ub(()=>{if(!G)return;const It=zt.bind(go,Dw);let Lt=0;de().revalidateOnFocus&&(Lt=Date.now()+de().focusThrottleInterval);const nn=PI(G,E,(_n,Xn={})=>{if(_n==g4){const Gn=Date.now();de().revalidateOnFocus&&Gn>Lt&&pe()&&(Lt=Gn+de().focusThrottleInterval,It())}else if(_n==y4)de().revalidateOnReconnect&&pe()&&It();else{if(_n==x4)return zt();if(_n==pk)return zt(Xn)}});return Z.current=!1,K.current=G,J.current=!0,He({_k:W}),ut&&(Ji(tt)||vx?It():xI(It)),()=>{Z.current=!0,nn()}},[G]),Ub(()=>{let It;function Lt(){const _n=pu(_)?_(Oe().data):_;_n&&It!==-1&&(It=setTimeout(nn,_n))}function nn(){!Oe().error&&(S||de().isVisible())&&(N||de().isOnline())?zt(Dw).then(Lt):Lt()}return Lt(),()=>{It&&(clearTimeout(It),It=-1)}},[_,S,N,G]),L.useDebugValue(ct),u&&Ji(tt)&&G){if(!gk&&vx)throw new Error("Fallback data is required when using Suspense in SSR.");le.current=t,_e.current=n,Z.current=!1;const It=$[G];if(!Ji(It)){const Lt=Bt(It);Rw(Lt)}if(Ji(Ae)){const Lt=zt(Dw);Ji(ct)||(Lt.status="fulfilled",Lt.value=!0),Rw(Lt)}else throw Ae}return{mutate:Bt,get data(){return At.data=!0,ct},get error(){return At.error=!0,Ae},get isValidating(){return At.isValidating=!0,Ge},get isLoading(){return At.isLoading=!0,Ye}}},DI=jv.defineProperty(jI,"defaultValue",{value:S4}),h1=AI(RI);Promise.resolve();const wd=Object.create(null);wd.open="0";wd.close="1";wd.ping="2";wd.pong="3";wd.message="4";wd.upgrade="5";wd.noop="6";const $b=Object.create(null);Object.keys(wd).forEach(e=>{$b[wd[e]]=e});const rS={type:"error",data:"parser error"},k4=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",N4=typeof ArrayBuffer=="function",M4=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,qj=({type:e,data:t},n,i)=>k4&&t instanceof Blob?n?i(t):_k(t,i):N4&&(t instanceof ArrayBuffer||M4(t))?n?i(t):_k(new Blob([t]),i):i(wd[e]+(t||"")),_k=(e,t)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];t("b"+(i||""))},n.readAsDataURL(e)};function bk(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let zw;function zI(e,t){if(k4&&e.data instanceof Blob)return e.data.arrayBuffer().then(bk).then(t);if(N4&&(e.data instanceof ArrayBuffer||M4(e.data)))return t(bk(e.data));qj(e,!1,n=>{zw||(zw=new TextEncoder),t(zw.encode(n))})}const vk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<vk.length;e++)K0[vk.charCodeAt(e)]=e;const II=e=>{let t=e.length*.75,n=e.length,i,o=0,u,c,a,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const _=new ArrayBuffer(t),S=new Uint8Array(_);for(i=0;i<n;i+=4)u=K0[e.charCodeAt(i)],c=K0[e.charCodeAt(i+1)],a=K0[e.charCodeAt(i+2)],g=K0[e.charCodeAt(i+3)],S[o++]=u<<2|c>>4,S[o++]=(c&15)<<4|a>>2,S[o++]=(a&3)<<6|g&63;return _},OI=typeof ArrayBuffer=="function",Gj=(e,t)=>{if(typeof e!="string")return{type:"message",data:E4(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:LI(e.substring(1),t)}:$b[n]?e.length>1?{type:$b[n],data:e.substring(1)}:{type:$b[n]}:rS},LI=(e,t)=>{if(OI){const n=II(e);return E4(n,t)}else return{base64:!0,data:e}},E4=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},A4="",FI=(e,t)=>{const n=e.length,i=new Array(n);let o=0;e.forEach((u,c)=>{qj(u,!1,a=>{i[c]=a,++o===n&&t(i.join(A4))})})},BI=(e,t)=>{const n=e.split(A4),i=[];for(let o=0;o<n.length;o++){const u=Gj(n[o],t);if(i.push(u),u.type==="error")break}return i};function VI(){return new TransformStream({transform(e,t){zI(e,n=>{const i=n.length;let o;if(i<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,i);else if(i<65536){o=new Uint8Array(3);const u=new DataView(o.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{o=new Uint8Array(9);const u=new DataView(o.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(o[0]|=128),t.enqueue(o),t.enqueue(n)})}})}let Iw;function tb(e){return e.reduce((t,n)=>t+n.length,0)}function nb(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let o=0;o<t;o++)n[o]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function UI(e,t){Iw||(Iw=new TextDecoder);const n=[];let i=0,o=-1,u=!1;return new TransformStream({transform(c,a){for(n.push(c);;){if(i===0){if(tb(n)<1)break;const g=nb(n,1);u=(g[0]&128)===128,o=g[0]&127,o<126?i=3:o===126?i=1:i=2}else if(i===1){if(tb(n)<2)break;const g=nb(n,2);o=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),i=3}else if(i===2){if(tb(n)<8)break;const g=nb(n,8),_=new DataView(g.buffer,g.byteOffset,g.length),S=_.getUint32(0);if(S>Math.pow(2,21)-1){a.enqueue(rS);break}o=S*Math.pow(2,32)+_.getUint32(4),i=3}else{if(tb(n)<o)break;const g=nb(n,o);a.enqueue(Gj(u?g:Iw.decode(g),t)),i=0}if(o===0||o>e){a.enqueue(rS);break}}}})}const P4=4;function Zr(e){if(e)return $I(e)}function $I(e){for(var t in Zr.prototype)e[t]=Zr.prototype[t];return e}Zr.prototype.on=Zr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Zr.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Zr.prototype.off=Zr.prototype.removeListener=Zr.prototype.removeAllListeners=Zr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,o=0;o<n.length;o++)if(i=n[o],i===t||i.fn===t){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Zr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,o=n.length;i<o;++i)n[i].apply(this,t)}return this};Zr.prototype.emitReserved=Zr.prototype.emit;Zr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Zr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const yc=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function R4(e,...t){return t.reduce((n,i)=>(e.hasOwnProperty(i)&&(n[i]=e[i]),n),{})}const HI=yc.setTimeout,qI=yc.clearTimeout;function f1(e,t){t.useNativeTimers?(e.setTimeoutFn=HI.bind(yc),e.clearTimeoutFn=qI.bind(yc)):(e.setTimeoutFn=yc.setTimeout.bind(yc),e.clearTimeoutFn=yc.clearTimeout.bind(yc))}const GI=1.33;function WI(e){return typeof e=="string"?ZI(e):Math.ceil((e.byteLength||e.size)*GI)}function ZI(e){let t=0,n=0;for(let i=0,o=e.length;i<o;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}function YI(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function XI(e){let t={},n=e.split("&");for(let i=0,o=n.length;i<o;i++){let u=n[i].split("=");t[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return t}class KI extends Error{constructor(t,n,i){super(t),this.description=n,this.context=i,this.type="TransportError"}}class Wj extends Zr{constructor(t){super(),this.writable=!1,f1(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,n,i){return super.emitReserved("error",new KI(t,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Gj(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=YI(t);return n.length?"?"+n:""}}const D4="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),aS=64,QI={};let wk=0,ib=0,Sk;function jk(e){let t="";do t=D4[e%aS]+t,e=Math.floor(e/aS);while(e>0);return t}function z4(){const e=jk(+new Date);return e!==Sk?(wk=0,Sk=e):e+"."+jk(wk++)}for(;ib<aS;ib++)QI[D4[ib]]=ib;let I4=!1;try{I4=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch(e){}const JI=I4;function O4(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||JI))return new XMLHttpRequest}catch(n){}if(!t)try{return new yc[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(n){}}function eO(){}const tO=function(){return new O4({xdomain:!1}).responseType!=null}();class nO extends Wj{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let o=location.port;o||(o=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||o!==t.port}const n=t&&t.forceBase64;this.supportsBinary=tO&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};BI(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,FI(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=z4()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Jg(this.uri(),t)}doWrite(t,n){const i=this.request({method:"POST",data:t});i.on("success",n),i.on("error",(o,u)=>{this.onError("xhr post error",o,u)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=t}}let Jg=class Hb extends Zr{constructor(t,n){super(),f1(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.data=n.data!==void 0?n.data:null,this.create()}create(){var t;const n=R4(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new O4(n);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this.opts.extraHeaders[o])}}catch(o){}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{i.setRequestHeader("Accept","*/*")}catch(o){}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this.opts.cookieJar)===null||o===void 0||o.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(o){this.setTimeoutFn(()=>{this.onError(o)},0);return}typeof document<"u"&&(this.index=Hb.requestsCount++,Hb.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=eO,t)try{this.xhr.abort()}catch(n){}typeof document<"u"&&delete Hb.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Jg.requestsCount=0;Jg.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ck);else if(typeof addEventListener=="function"){const e="onpagehide"in yc?"pagehide":"unload";addEventListener(e,Ck,!1)}}function Ck(){for(let e in Jg.requests)Jg.requests.hasOwnProperty(e)&&Jg.requests[e].abort()}const Zj=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),sb=yc.WebSocket||yc.MozWebSocket,Tk=!0,iO="arraybuffer",kk=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class sO extends Wj{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,i=kk?{}:R4(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Tk&&!kk?n?new sb(t,n):new sb(t):new sb(t,n,i)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const i=t[n],o=n===t.length-1;qj(i,this.supportsBinary,u=>{try{Tk&&this.ws.send(u)}catch(c){}o&&Zj(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=z4()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}check(){return!!sb}}class rO extends Wj{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const n=UI(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(n).getReader(),o=VI();o.readable.pipeTo(t.writable),this.writer=o.writable.getWriter();const u=()=>{i.read().then(({done:a,value:g})=>{a||(this.onPacket(g),u())}).catch(a=>{})};u();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this.writer.write(c).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const i=t[n],o=n===t.length-1;this.writer.write(i).then(()=>{o&&Zj(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const aO={websocket:sO,webtransport:rO,polling:nO},oO=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,lO=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function oS(e){if(e.length>2e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");n!=-1&&i!=-1&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let o=oO.exec(e||""),u={},c=14;for(;c--;)u[lO[c]]=o[c]||"";return n!=-1&&i!=-1&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=cO(u,u.path),u.queryKey=uO(u,u.query),u}function cO(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function uO(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,o,u){o&&(n[o]=u)}),n}let L4=class Hg extends Zr{constructor(t,n={}){super(),this.binaryType=iO,this.writeBuffer=[],t&&typeof t=="object"&&(n=t,t=null),t?(t=oS(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=oS(n.host).host),f1(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=XI(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=P4,n.transport=t,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new aO[t](i)}open(){let t;if(this.opts.rememberUpgrade&&Hg.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch(n){this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),i=!1;Hg.priorWebsocketSuccess=!1;const o=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",N=>{if(!i)if(N.type==="pong"&&N.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Hg.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(S(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const A=new Error("probe error");A.transport=n.name,this.emitReserved("upgradeError",A)}}))};function u(){i||(i=!0,S(),n.close(),n=null)}const c=N=>{const A=new Error("probe error: "+N);A.transport=n.name,u(),this.emitReserved("upgradeError",A)};function a(){c("transport closed")}function g(){c("socket closed")}function _(N){n&&N.name!==n.name&&u()}const S=()=>{n.removeListener("open",o),n.removeListener("error",c),n.removeListener("close",a),this.off("close",g),this.off("upgrading",_)};n.once("open",o),n.once("error",c),n.once("close",a),this.once("close",g),this.once("upgrading",_),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Hg.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(t+=WI(i)),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}write(t,n,i){return this.sendPacket("message",t,n,i),this}send(t,n,i){return this.sendPacket("message",t,n,i),this}sendPacket(t,n,i,o){if(typeof n=="function"&&(o=n,n=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:t,data:n,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),o&&this.once("flush",o),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){Hg.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let i=0;const o=t.length;for(;i<o;i++)~this.transports.indexOf(t[i])&&n.push(t[i]);return n}};L4.protocol=P4;function dO(e,t="",n){let i=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),i=oS(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}const hO=typeof ArrayBuffer=="function",fO=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,F4=Object.prototype.toString,pO=typeof Blob=="function"||typeof Blob<"u"&&F4.call(Blob)==="[object BlobConstructor]",mO=typeof File=="function"||typeof File<"u"&&F4.call(File)==="[object FileConstructor]";function Yj(e){return hO&&(e instanceof ArrayBuffer||fO(e))||pO&&e instanceof Blob||mO&&e instanceof File}function qb(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,i=e.length;n<i;n++)if(qb(e[n]))return!0;return!1}if(Yj(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return qb(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&qb(e[n]))return!0;return!1}function gO(e){const t=[],n=e.data,i=e;return i.data=lS(n,t),i.attachments=t.length,{packet:i,buffers:t}}function lS(e,t){if(!e)return e;if(Yj(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=lS(e[i],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=lS(e[i],t));return n}return e}function yO(e,t){return e.data=cS(e.data,t),delete e.attachments,e}function cS(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=cS(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=cS(e[n],t));return e}const xO=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_O=5;var qi;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(qi||(qi={}));class bO{constructor(t){this.replacer=t}encode(t){return(t.type===qi.EVENT||t.type===qi.ACK)&&qb(t)?this.encodeAsBinary({type:t.type===qi.EVENT?qi.BINARY_EVENT:qi.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===qi.BINARY_EVENT||t.type===qi.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=gO(t),i=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(i),o}}function Nk(e){return Object.prototype.toString.call(e)==="[object Object]"}class Xj extends Zr{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const i=n.type===qi.BINARY_EVENT;i||n.type===qi.BINARY_ACK?(n.type=i?qi.EVENT:qi.ACK,this.reconstructor=new vO(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Yj(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const i={type:Number(t.charAt(0))};if(qi[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===qi.BINARY_EVENT||i.type===qi.BINARY_ACK){const u=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const c=t.substring(u,n);if(c!=Number(c)||t.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(c)}if(t.charAt(n+1)==="/"){const u=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););i.nsp=t.substring(u,n)}else i.nsp="/";const o=t.charAt(n+1);if(o!==""&&Number(o)==o){const u=n+1;for(;++n;){const c=t.charAt(n);if(c==null||Number(c)!=c){--n;break}if(n===t.length)break}i.id=Number(t.substring(u,n+1))}if(t.charAt(++n)){const u=this.tryParse(t.substr(n));if(Xj.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(n){return!1}}static isPayloadValid(t,n){switch(t){case qi.CONNECT:return Nk(n);case qi.DISCONNECT:return n===void 0;case qi.CONNECT_ERROR:return typeof n=="string"||Nk(n);case qi.EVENT:case qi.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&xO.indexOf(n[0])===-1);case qi.ACK:case qi.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vO{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=yO(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wO=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Xj,Encoder:bO,get PacketType(){return qi},protocol:_O},Symbol.toStringTag,{value:"Module"}));function fu(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const SO=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class B4 extends Zr{constructor(t,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[fu(t,"open",this.onopen.bind(this)),fu(t,"packet",this.onpacket.bind(this)),fu(t,"error",this.onerror.bind(this)),fu(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(SO.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:qi.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,c=n.pop();this._registerAckCallback(u,c),i.id=u}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,n){var i;const o=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(o===void 0){this.acks[t]=n;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},o);this.acks[t]=(...c)=>{this.io.clearTimeoutFn(u),n.apply(this,[null,...c])}}emitWithAck(t,...n){const i=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((o,u)=>{n.push((c,a)=>i?c?u(c):o(a):o(c)),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((o,...u)=>i!==this._queue[0]?void 0:(o!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:qi.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case qi.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qi.EVENT:case qi.BINARY_EVENT:this.onevent(t);break;case qi.ACK:case qi.BINARY_ACK:this.onack(t);break;case qi.DISCONNECT:this.ondisconnect();break;case qi.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let i=!1;return function(...o){i||(i=!0,n.packet({type:qi.ACK,id:t,data:o}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(n.apply(this,t.data),delete this.acks[t.id])}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qi.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(t===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(t===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,t.data)}}}function yy(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}yy.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};yy.prototype.reset=function(){this.attempts=0};yy.prototype.setMin=function(e){this.ms=e};yy.prototype.setMax=function(e){this.max=e};yy.prototype.setJitter=function(e){this.jitter=e};class uS extends Zr{constructor(t,n){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,f1(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new yy({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const o=n.parser||wO;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new L4(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const o=fu(n,"open",function(){i.onopen(),t&&t()}),u=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},c=fu(n,"error",u);if(this._timeout!==!1){const a=this._timeout,g=this.setTimeoutFn(()=>{o(),u(new Error("timeout")),n.close()},a);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(o),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(fu(t,"ping",this.onping.bind(this)),fu(t,"data",this.ondata.bind(this)),fu(t,"error",this.onerror.bind(this)),fu(t,"close",this.onclose.bind(this)),fu(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Zj(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new B4(this,t,n),this.nsps[t]=i),i}_destroy(t){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let i=0;i<n.length;i++)this.engine.write(n[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(o=>{o?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",o)):t.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const P0={};function Gb(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=dO(e,t.path||"/socket.io"),i=n.source,o=n.id,u=n.path,c=P0[o]&&u in P0[o].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let g;return a?g=new uS(i,t):(P0[o]||(P0[o]=new uS(i,t)),g=P0[o]),n.query&&!t.query&&(t.query=n.queryKey),g.socket(n.path,t)}Object.assign(Gb,{Manager:uS,Socket:B4,io:Gb,connect:Gb});class jO{constructor(t,n,i,o){Yp(this,"socket_port"),Yp(this,"host"),Yp(this,"port"),Yp(this,"protocol"),Yp(this,"url"),Yp(this,"site_name"),Yp(this,"socket");var u,c,a,g;if(this.socket_port=i!=null?i:"9000",this.host=(u=window.location)==null?void 0:u.hostname,this.port=(c=window.location)!=null&&c.port?`:${this.socket_port}`:"",this.protocol=((a=window.location)==null?void 0:a.protocol)==="https:"?"https":"http",t){let _=new URL(t);_.port="",i?(_.port=i,this.url=_.toString()):this.url=_.toString()}else this.url=`${this.protocol}://${this.host}${this.port}/`;n&&(this.url=`${this.url}${n}`),this.site_name=n,this.socket=Gb(`${this.url}`,{withCredentials:!0,secure:this.protocol==="https",extraHeaders:o&&o.useToken===!0?{Authorization:`${o.type} ${(g=o.token)==null?void 0:g.call(o)}`}:{}})}}const wc=L.createContext(null),CO=({url:e="",tokenParams:t,socketPort:n,swrConfig:i,siteName:o,enableSocket:u=!0,children:c,customHeaders:a})=>{const g=L.useMemo(()=>{const _=new aI.FrappeApp(e,t,void 0,a);return{url:e,tokenParams:t,app:_,auth:_.auth(),db:_.db(),call:_.call(),file:_.file(),socket:u?new jO(e,o,n,t).socket:void 0,enableSocket:u,socketPort:n}},[e,t,n,u,a]);return l.jsx(wc.Provider,{value:g,children:l.jsx(DI,{value:i,children:c})})},Rm=e=>{const{url:t,auth:n,tokenParams:i}=L.useContext(wc),[o,u]=L.useState(),c=L.useCallback(()=>{const D=document.cookie.split(";").find(B=>B.trim().startsWith("user_id="));if(D){const B=D.split("=")[1];u(B&&B!=="Guest"?B:null)}else u(null)},[]);L.useEffect(()=>{i&&i.useToken?u(null):c()},[]);const{data:a,error:g,isLoading:_,isValidating:S,mutate:N}=h1(()=>i&&i.useToken||o?`${t}/api/method/frappe.auth.get_logged_user`:null,()=>n.getLoggedInUser(),te({onError:()=>{u(null)},shouldRetryOnError:!1,revalidateOnFocus:!1},e)),A=L.useCallback(D=>Ht(null,null,function*(){return n.loginWithUsernamePassword(D).then(B=>(c(),B))}),[]),E=L.useCallback(()=>Ht(null,null,function*(){return n.logout().then(()=>N(null)).then(()=>u(null))}),[]);return{isLoading:o===void 0||_,currentUser:a,isValidating:S,error:g,login:A,logout:E,updateCurrentUser:N,getUserCookie:c}},V4=(e,t,n)=>{let i=`${t}/api/resource/`;return n?i+=`${e}/${n}`:i+=`${e}`,i},Ch=(e,t,n,i)=>{const{url:o,db:u}=L.useContext(wc);return h1(n===void 0?V4(e,o,t):n,()=>u.getDoc(e,t),i)},TO=e=>{var o;var t,n;let i="";if(e!=null&&e.fields&&(i+="fields="+JSON.stringify(e==null?void 0:e.fields)+"&"),e!=null&&e.filters&&(i+="filters="+JSON.stringify(e==null?void 0:e.filters)+"&"),e!=null&&e.orFilters&&(i+="or_filters="+JSON.stringify(e==null?void 0:e.orFilters)+"&"),e!=null&&e.limit_start&&(i+="limit_start="+JSON.stringify(e==null?void 0:e.limit_start)+"&"),e!=null&&e.limit&&(i+="limit="+JSON.stringify(e==null?void 0:e.limit)+"&"),e!=null&&e.groupBy&&(i+="group_by="+String(e.groupBy)+"&"),e!=null&&e.orderBy){const u=`${String((t=e.orderBy)==null?void 0:t.field)} ${(o=(n=e.orderBy)==null?void 0:n.order)!=null?o:"asc"}`;i+="order_by="+u+"&"}return e!=null&&e.asDict&&(i+="as_dict="+e.asDict),i},Cv=(e,t,n,i)=>{const{url:o,db:u}=L.useContext(wc);return h1(`${V4(e,o)}?${TO(t)}`,()=>u.getDocList(e,t),i)},xy=()=>{const{db:e}=L.useContext(wc),[t,n]=L.useState(!1),[i,o]=L.useState(null),[u,c]=L.useState(!1),a=L.useCallback(()=>{n(!1),o(null),c(!1)},[]);return{createDoc:L.useCallback((g,_)=>Ht(null,null,function*(){return o(null),c(!1),n(!0),e.createDoc(g,_).then(S=>(n(!1),c(!0),S)).catch(S=>{throw n(!1),c(!1),o(S),S})}),[]),loading:t,error:i,isCompleted:u,reset:a}},U4=()=>{const{db:e}=L.useContext(wc),[t,n]=L.useState(!1),[i,o]=L.useState(null),[u,c]=L.useState(!1),a=L.useCallback(()=>{n(!1),o(null),c(!1)},[]);return{updateDoc:L.useCallback((g,_,S)=>Ht(null,null,function*(){return o(null),c(!1),n(!0),e.updateDoc(g,_,S).then(N=>(n(!1),c(!0),N)).catch(N=>{throw n(!1),c(!1),o(N),N})}),[]),loading:t,error:i,reset:a,isCompleted:u}},kO=()=>{const{db:e}=L.useContext(wc),[t,n]=L.useState(!1),[i,o]=L.useState(null),[u,c]=L.useState(!1),a=L.useCallback(()=>{n(!1),o(null),c(!1)},[]);return{deleteDoc:L.useCallback((g,_)=>Ht(null,null,function*(){return o(null),c(!1),n(!0),e.deleteDoc(g,_).then(S=>(n(!1),c(!0),S)).catch(S=>{throw n(!1),c(!1),o(S),S})}),[]),loading:t,error:i,reset:a,isCompleted:u}};function NO(e){const t=[];for(let n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}const md=(e,t,n,i,o="GET")=>{const{call:u}=L.useContext(wc),c=NO(t!=null?t:{}),a=`${e}?${c}`;return te({},h1(n===void 0?a:n,o==="GET"?()=>u.get(e,t):()=>u.post(e,t),i))},Tv=e=>{const{call:t}=L.useContext(wc),[n,i]=L.useState(null),[o,u]=L.useState(!1),[c,a]=L.useState(null),[g,_]=L.useState(!1),S=L.useCallback(()=>{i(null),u(!1),a(null),_(!1)},[]);return{call:L.useCallback(N=>Ht(null,null,function*(){return a(null),_(!1),u(!0),i(null),t.post(e,N).then(A=>(i(A),u(!1),_(!0),A)).catch(A=>{throw u(!1),_(!1),a(A),A})}),[]),result:n,loading:o,error:c,reset:S,isCompleted:g}},Kj=()=>{const{file:e}=L.useContext(wc),[t,n]=L.useState(0),[i,o]=L.useState(!1),[u,c]=L.useState(null),[a,g]=L.useState(!1),_=L.useCallback((N,A,E)=>Ht(null,null,function*(){return S(),o(!0),e.uploadFile(N,A,(D,B)=>{B&&n(Math.round(D/B*100))},E).then(D=>(g(!0),n(100),o(!1),D.data.message)).catch(D=>{throw console.error(D),c(D),o(!1),D})}),[]),S=L.useCallback(()=>{n(0),o(!1),c(null),g(!1)},[]);return{upload:_,progress:t,loading:i,isCompleted:a,error:u,reset:S}},MO=(e,t,n=[],i=20,o=250)=>{const u=EO(t,o);return md("frappe.desk.search.search_link",{doctype:e,page_length:i,txt:u,filters:JSON.stringify(n!=null?n:[])})},EO=(e,t)=>{const[n,i]=L.useState(e);return L.useEffect(()=>{const o=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(o)}},[e,t]),n},Mk=(e,t)=>{const{socket:n}=L.useContext(wc);L.useEffect(()=>{n===void 0&&console.warn("Socket is not enabled. Please enable socket in FrappeProvider.");let i=n==null?void 0:n.on(e,t);return()=>{i==null||i.off(e)}},[e,t])};var R0={},Ek;function AO(){if(Ek)return R0;Ek=1,Object.defineProperty(R0,"__esModule",{value:!0}),R0.parse=c,R0.serialize=_;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function c(A,E){const D=new u,B=A.length;if(B<2)return D;const $=(E==null?void 0:E.decode)||S;let G=0;do{const W=A.indexOf("=",G);if(W===-1)break;const J=A.indexOf(";",G),Z=J===-1?B:J;if(W>Z){G=A.lastIndexOf(";",W-1)+1;continue}const K=a(A,G,W),le=g(A,W,K),_e=A.slice(K,le);if(D[_e]===void 0){let de=a(A,W+1,Z),pe=g(A,Z,de);const Oe=$(A.slice(de,pe));D[_e]=Oe}G=Z+1}while(G<B);return D}function a(A,E,D){do{const B=A.charCodeAt(E);if(B!==32&&B!==9)return E}while(++E<D);return D}function g(A,E,D){for(;E>D;){const B=A.charCodeAt(--E);if(B!==32&&B!==9)return E+1}return D}function _(A,E,D){const B=(D==null?void 0:D.encode)||encodeURIComponent;if(!e.test(A))throw new TypeError(`argument name is invalid: ${A}`);const $=B(E);if(!t.test($))throw new TypeError(`argument val is invalid: ${E}`);let G=A+"="+$;if(!D)return G;if(D.maxAge!==void 0){if(!Number.isInteger(D.maxAge))throw new TypeError(`option maxAge is invalid: ${D.maxAge}`);G+="; Max-Age="+D.maxAge}if(D.domain){if(!n.test(D.domain))throw new TypeError(`option domain is invalid: ${D.domain}`);G+="; Domain="+D.domain}if(D.path){if(!i.test(D.path))throw new TypeError(`option path is invalid: ${D.path}`);G+="; Path="+D.path}if(D.expires){if(!N(D.expires)||!Number.isFinite(D.expires.valueOf()))throw new TypeError(`option expires is invalid: ${D.expires}`);G+="; Expires="+D.expires.toUTCString()}if(D.httpOnly&&(G+="; HttpOnly"),D.secure&&(G+="; Secure"),D.partitioned&&(G+="; Partitioned"),D.priority)switch(typeof D.priority=="string"?D.priority.toLowerCase():void 0){case"low":G+="; Priority=Low";break;case"medium":G+="; Priority=Medium";break;case"high":G+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${D.priority}`)}if(D.sameSite)switch(typeof D.sameSite=="string"?D.sameSite.toLowerCase():D.sameSite){case!0:case"strict":G+="; SameSite=Strict";break;case"lax":G+="; SameSite=Lax";break;case"none":G+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${D.sameSite}`)}return G}function S(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch(E){return A}}function N(A){return o.call(A)==="[object Date]"}return R0}AO();var Ak="popstate";function PO(e={}){function t(i,o){let{pathname:u,search:c,hash:a}=i.location;return dS("",{pathname:u,search:c,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:wx(o)}return DO(t,n,null,e)}function or(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function vc(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function RO(){return Math.random().toString(36).substring(2,10)}function Pk(e,t){return{usr:e.state,key:e.key,idx:t}}function dS(e,t,n=null,i){return Me(te({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?_y(t):t),{state:n,key:t&&t.key||i||RO()})}function wx({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function _y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function DO(e,t,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,c=o.history,a="POP",g=null,_=S();_==null&&(_=0,c.replaceState(Me(te({},c.state),{idx:_}),""));function S(){return(c.state||{idx:null}).idx}function N(){a="POP";let $=S(),G=$==null?null:$-_;_=$,g&&g({action:a,location:B.location,delta:G})}function A($,G){a="PUSH";let W=dS(B.location,$,G);_=S()+1;let J=Pk(W,_),Z=B.createHref(W);try{c.pushState(J,"",Z)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(Z)}u&&g&&g({action:a,location:B.location,delta:1})}function E($,G){a="REPLACE";let W=dS(B.location,$,G);_=S();let J=Pk(W,_),Z=B.createHref(W);c.replaceState(J,"",Z),u&&g&&g({action:a,location:B.location,delta:0})}function D($){return zO($)}let B={get action(){return a},get location(){return e(o,c)},listen($){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Ak,N),g=$,()=>{o.removeEventListener(Ak,N),g=null}},createHref($){return t(o,$)},createURL:D,encodeLocation($){let G=D($);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:A,replace:E,go($){return c.go($)}};return B}function zO(e,t=!1){let n="http://localhost";typeof window!="undefined"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),or(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:wx(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function $4(e,t,n="/"){return IO(e,t,n,!1)}function IO(e,t,n,i){let o=typeof t=="string"?_y(t):t,u=Th(o.pathname||"/",n);if(u==null)return null;let c=H4(e);OO(c);let a=null;for(let g=0;a==null&&g<c.length;++g){let _=ZO(u);a=GO(c[g],_,i)}return a}function H4(e,t=[],n=[],i=""){let o=(u,c,a)=>{let g={relativePath:a===void 0?u.path||"":a,caseSensitive:u.caseSensitive===!0,childrenIndex:c,route:u};g.relativePath.startsWith("/")&&(or(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length));let _=vh([i,g.relativePath]),S=n.concat(g);u.children&&u.children.length>0&&(or(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),H4(u.children,t,S,_)),!(u.path==null&&!u.index)&&t.push({path:_,score:HO(_,u.index),routesMeta:S})};return e.forEach((u,c)=>{var a;if(u.path===""||!((a=u.path)!=null&&a.includes("?")))o(u,c);else for(let g of q4(u.path))o(u,c,g)}),t}function q4(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let c=q4(i.join("/")),a=[];return a.push(...c.map(g=>g===""?u:[u,g].join("/"))),o&&a.push(...c),a.map(g=>e.startsWith("/")&&g===""?"/":g)}function OO(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:qO(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var LO=/^:[\w-]+$/,FO=3,BO=2,VO=1,UO=10,$O=-2,Rk=e=>e==="*";function HO(e,t){let n=e.split("/"),i=n.length;return n.some(Rk)&&(i+=$O),t&&(i+=BO),n.filter(o=>!Rk(o)).reduce((o,u)=>o+(LO.test(u)?FO:u===""?VO:UO),i)}function qO(e,t){return e.length===t.length&&e.slice(0,-1).every((i,o)=>i===t[o])?e[e.length-1]-t[t.length-1]:0}function GO(e,t,n=!1){let{routesMeta:i}=e,o={},u="/",c=[];for(let a=0;a<i.length;++a){let g=i[a],_=a===i.length-1,S=u==="/"?t:t.slice(u.length)||"/",N=kv({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},S),A=g.route;if(!N&&_&&n&&!i[i.length-1].route.index&&(N=kv({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},S)),!N)return null;Object.assign(o,N.params),c.push({params:o,pathname:vh([u,N.pathname]),pathnameBase:QO(vh([u,N.pathnameBase])),route:A}),N.pathnameBase!=="/"&&(u=vh([u,N.pathnameBase]))}return c}function kv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=WO(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let u=o[0],c=u.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:i.reduce((_,{paramName:S,isOptional:N},A)=>{if(S==="*"){let D=a[A]||"";c=u.slice(0,u.length-D.length).replace(/(.)\/+$/,"$1")}const E=a[A];return N&&!E?_[S]=void 0:_[S]=(E||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:c,pattern:e}}function WO(e,t=!1,n=!0){vc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,a,g)=>(i.push({paramName:a,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function ZO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Th(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function YO(e,t="/"){let{pathname:n,search:i="",hash:o=""}=typeof e=="string"?_y(e):e;return{pathname:n?n.startsWith("/")?n:XO(n,t):t,search:JO(i),hash:eL(o)}}function XO(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Ow(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KO(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Qj(e){let t=KO(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function Jj(e,t,n,i=!1){let o;typeof e=="string"?o=_y(e):(o=te({},e),or(!o.pathname||!o.pathname.includes("?"),Ow("?","pathname","search",o)),or(!o.pathname||!o.pathname.includes("#"),Ow("#","pathname","hash",o)),or(!o.search||!o.search.includes("#"),Ow("#","search","hash",o)));let u=e===""||o.pathname==="",c=u?"/":o.pathname,a;if(c==null)a=n;else{let N=t.length-1;if(!i&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),N-=1;o.pathname=A.join("/")}a=N>=0?t[N]:"/"}let g=YO(o,a),_=c&&c!=="/"&&c.endsWith("/"),S=(u||c===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(_||S)&&(g.pathname+="/"),g}var vh=e=>e.join("/").replace(/\/\/+/g,"/"),QO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),JO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var G4=["POST","PUT","PATCH","DELETE"];new Set(G4);var nL=["GET",...G4];new Set(nL);var by=L.createContext(null);by.displayName="DataRouter";var p1=L.createContext(null);p1.displayName="DataRouterState";var W4=L.createContext({isTransitioning:!1});W4.displayName="ViewTransition";var iL=L.createContext(new Map);iL.displayName="Fetchers";var sL=L.createContext(null);sL.displayName="Await";var vu=L.createContext(null);vu.displayName="Navigation";var Gx=L.createContext(null);Gx.displayName="Location";var wu=L.createContext({outlet:null,matches:[],isDataRoute:!1});wu.displayName="Route";var eC=L.createContext(null);eC.displayName="RouteError";function rL(e,{relative:t}={}){or(vy(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=L.useContext(vu),{hash:o,pathname:u,search:c}=Wx(e,{relative:t}),a=u;return n!=="/"&&(a=u==="/"?n:vh([n,u])),i.createHref({pathname:a,search:c,hash:o})}function vy(){return L.useContext(Gx)!=null}function pl(){return or(vy(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Gx).location}var Z4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Y4(e){L.useContext(vu).static||L.useLayoutEffect(e)}function ua(){let{isDataRoute:e}=L.useContext(wu);return e?xL():aL()}function aL(){or(vy(),"useNavigate() may be used only in the context of a <Router> component.");let e=L.useContext(by),{basename:t,navigator:n}=L.useContext(vu),{matches:i}=L.useContext(wu),{pathname:o}=pl(),u=JSON.stringify(Qj(i)),c=L.useRef(!1);return Y4(()=>{c.current=!0}),L.useCallback((g,_={})=>{if(vc(c.current,Z4),!c.current)return;if(typeof g=="number"){n.go(g);return}let S=Jj(g,JSON.parse(u),o,_.relative==="path");e==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:vh([t,S.pathname])),(_.replace?n.replace:n.push)(S,_.state,_)},[t,n,u,o,e])}L.createContext(null);function tC(){let{matches:e}=L.useContext(wu),t=e[e.length-1];return t?t.params:{}}function Wx(e,{relative:t}={}){let{matches:n}=L.useContext(wu),{pathname:i}=pl(),o=JSON.stringify(Qj(n));return L.useMemo(()=>Jj(e,JSON.parse(o),i,t==="path"),[e,o,i,t])}function oL(e,t){return X4(e,t)}function X4(e,t,n,i){var G;or(vy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=L.useContext(vu),{matches:u}=L.useContext(wu),c=u[u.length-1],a=c?c.params:{},g=c?c.pathname:"/",_=c?c.pathnameBase:"/",S=c&&c.route;{let W=S&&S.path||"";K4(g,!S||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let N=pl(),A;if(t){let W=typeof t=="string"?_y(t):t;or(_==="/"||((G=W.pathname)==null?void 0:G.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${W.pathname}" was given in the \`location\` prop.`),A=W}else A=N;let E=A.pathname||"/",D=E;if(_!=="/"){let W=_.replace(/^\//,"").split("/");D="/"+E.replace(/^\//,"").split("/").slice(W.length).join("/")}let B=$4(e,{pathname:D});vc(S||B!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),vc(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=hL(B&&B.map(W=>Object.assign({},W,{params:Object.assign({},a,W.params),pathname:vh([_,o.encodeLocation?o.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?_:vh([_,o.encodeLocation?o.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),u,n,i);return t&&$?L.createElement(Gx.Provider,{value:{location:te({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:"POP"}},$):$}function lL(){let e=yL(),t=tL(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=L.createElement(L.Fragment,null,L.createElement("p",null,"💿 Hey developer 👋"),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:u},"ErrorBoundary")," or"," ",L.createElement("code",{style:u},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),n?L.createElement("pre",{style:o},n):null,c)}var cL=L.createElement(lL,null),uL=class extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?L.createElement(wu.Provider,{value:this.props.routeContext},L.createElement(eC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dL({routeContext:e,match:t,children:n}){let i=L.useContext(by);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(wu.Provider,{value:e},n)}function hL(e,t=[],n=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,u=n==null?void 0:n.errors;if(u!=null){let g=o.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);or(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let c=!1,a=-1;if(n)for(let g=0;g<o.length;g++){let _=o[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(a=g),_.route.id){let{loaderData:S,errors:N}=n,A=_.route.loader&&!S.hasOwnProperty(_.route.id)&&(!N||N[_.route.id]===void 0);if(_.route.lazy||A){c=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((g,_,S)=>{let N,A=!1,E=null,D=null;n&&(N=u&&_.route.id?u[_.route.id]:void 0,E=_.route.errorElement||cL,c&&(a<0&&S===0?(K4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,D=null):a===S&&(A=!0,D=_.route.hydrateFallbackElement||null)));let B=t.concat(o.slice(0,S+1)),$=()=>{let G;return N?G=E:A?G=D:_.route.Component?G=L.createElement(_.route.Component,null):_.route.element?G=_.route.element:G=g,L.createElement(dL,{match:_,routeContext:{outlet:g,matches:B,isDataRoute:n!=null},children:G})};return n&&(_.route.ErrorBoundary||_.route.errorElement||S===0)?L.createElement(uL,{location:n.location,revalidation:n.revalidation,component:E,error:N,children:$(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):$()},null)}function nC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fL(e){let t=L.useContext(by);return or(t,nC(e)),t}function pL(e){let t=L.useContext(p1);return or(t,nC(e)),t}function mL(e){let t=L.useContext(wu);return or(t,nC(e)),t}function iC(e){let t=mL(e),n=t.matches[t.matches.length-1];return or(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function gL(){return iC("useRouteId")}function yL(){var i;let e=L.useContext(eC),t=pL("useRouteError"),n=iC("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function xL(){let{router:e}=fL("useNavigate"),t=iC("useNavigate"),n=L.useRef(!1);return Y4(()=>{n.current=!0}),L.useCallback((c,...a)=>Ht(null,[c,...a],function*(o,u={}){vc(n.current,Z4),n.current&&(typeof o=="number"?e.navigate(o):yield e.navigate(o,te({fromRouteId:t},u)))}),[e,t])}var Dk={};function K4(e,t,n){!t&&!Dk[e]&&(Dk[e]=!0,vc(!1,n))}L.memo(_L);function _L({routes:e,future:t,state:n}){return X4(e,void 0,n,t)}function bL({to:e,replace:t,state:n,relative:i}){or(vy(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=L.useContext(vu);vc(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=L.useContext(wu),{pathname:c}=pl(),a=ua(),g=Jj(e,Qj(u),c,i==="path"),_=JSON.stringify(g);return L.useEffect(()=>{a(JSON.parse(_),{replace:t,state:n,relative:i})},[a,_,i,t,n]),null}function Is(e){or(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vL({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:o,static:u=!1}){or(!vy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),a=L.useMemo(()=>({basename:c,navigator:o,static:u,future:{}}),[c,o,u]);typeof n=="string"&&(n=_y(n));let{pathname:g="/",search:_="",hash:S="",state:N=null,key:A="default"}=n,E=L.useMemo(()=>{let D=Th(g,c);return D==null?null:{location:{pathname:D,search:_,hash:S,state:N,key:A},navigationType:i}},[c,g,_,S,N,A,i]);return vc(E!=null,`<Router basename="${c}"> is not able to match the URL "${g}${_}${S}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:L.createElement(vu.Provider,{value:a},L.createElement(Gx.Provider,{children:t,value:E}))}function Q4({children:e,location:t}){return oL(hS(e),t)}function hS(e,t=[]){let n=[];return L.Children.forEach(e,(i,o)=>{if(!L.isValidElement(i))return;let u=[...t,o];if(i.type===L.Fragment){n.push.apply(n,hS(i.props.children,u));return}or(i.type===Is,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),or(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=hS(i.props.children,u)),n.push(c)}),n}var Wb="get",Zb="application/x-www-form-urlencoded";function m1(e){return e!=null&&typeof e.tagName=="string"}function wL(e){return m1(e)&&e.tagName.toLowerCase()==="button"}function SL(e){return m1(e)&&e.tagName.toLowerCase()==="form"}function jL(e){return m1(e)&&e.tagName.toLowerCase()==="input"}function CL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function TL(e,t){return e.button===0&&(!t||t==="_self")&&!CL(e)}function fS(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function kL(e,t){let n=fS(e);return t&&t.forEach((i,o)=>{n.has(o)||t.getAll(o).forEach(u=>{n.append(o,u)})}),n}var rb=null;function NL(){if(rb===null)try{new FormData(document.createElement("form"),0),rb=!1}catch(e){rb=!0}return rb}var ML=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lw(e){return e!=null&&!ML.has(e)?(vc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zb}"`),null):e}function EL(e,t){let n,i,o,u,c;if(SL(e)){let a=e.getAttribute("action");i=a?Th(a,t):null,n=e.getAttribute("method")||Wb,o=Lw(e.getAttribute("enctype"))||Zb,u=new FormData(e)}else if(wL(e)||jL(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||a.getAttribute("action");if(i=g?Th(g,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Wb,o=Lw(e.getAttribute("formenctype"))||Lw(a.getAttribute("enctype"))||Zb,u=new FormData(a,e),!NL()){let{name:_,type:S,value:N}=e;if(S==="image"){let A=_?`${_}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else _&&u.append(_,N)}}else{if(m1(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Wb,i=null,o=Zb,c=e}return u&&o==="text/plain"&&(c=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:c}}function sC(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function AL(e,t){return Ht(this,null,function*(){if(e.id in t)return t[e.id];try{let n=yield import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}function PL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}function RL(e,t,n){return Ht(this,null,function*(){let i=yield Promise.all(e.map(o=>Ht(null,null,function*(){let u=t.routes[o.route.id];if(u){let c=yield AL(u,n);return c.links?c.links():[]}return[]})));return OL(i.flat(1).filter(PL).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?Me(te({},o),{rel:"prefetch",as:"style"}):Me(te({},o),{rel:"prefetch"})))})}function zk(e,t,n,i,o,u){let c=(g,_)=>n[_]?g.route.id!==n[_].route.id:!0,a=(g,_)=>{var S;return n[_].pathname!==g.pathname||((S=n[_].route.path)==null?void 0:S.endsWith("*"))&&n[_].params["*"]!==g.params["*"]};return u==="assets"?t.filter((g,_)=>c(g,_)||a(g,_)):u==="data"?t.filter((g,_)=>{var N;let S=i.routes[g.route.id];if(!S||!S.hasLoader)return!1;if(c(g,_)||a(g,_))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((N=n[0])==null?void 0:N.params)||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function DL(e,t,{includeHydrateFallback:n}={}){return zL(e.map(i=>{let o=t.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function zL(e){return[...new Set(e)]}function IL(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function OL(e,t){let n=new Set;return new Set(t),e.reduce((i,o)=>{let u=JSON.stringify(IL(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var LL=new Set([100,101,204,205]);function FL(e,t){let n=typeof e=="string"?new URL(e,typeof window=="undefined"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Th(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function J4(){let e=L.useContext(by);return sC(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function BL(){let e=L.useContext(p1);return sC(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rC=L.createContext(void 0);rC.displayName="FrameworkContext";function eP(){let e=L.useContext(rC);return sC(e,"You must render this element inside a <HydratedRouter> element"),e}function VL(e,t){let n=L.useContext(rC),[i,o]=L.useState(!1),[u,c]=L.useState(!1),{onFocus:a,onBlur:g,onMouseEnter:_,onMouseLeave:S,onTouchStart:N}=t,A=L.useRef(null);L.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let B=G=>{G.forEach(W=>{c(W.isIntersecting)})},$=new IntersectionObserver(B,{threshold:.5});return A.current&&$.observe(A.current),()=>{$.disconnect()}}},[e]),L.useEffect(()=>{if(i){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[i]);let E=()=>{o(!0)},D=()=>{o(!1),c(!1)};return n?e!=="intent"?[u,A,{}]:[u,A,{onFocus:D0(a,E),onBlur:D0(g,D),onMouseEnter:D0(_,E),onMouseLeave:D0(S,D),onTouchStart:D0(N,E)}]:[!1,A,{}]}function D0(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function UL(n){var i=n,{page:e}=i,t=en(i,["page"]);let{router:o}=J4(),u=L.useMemo(()=>$4(o.routes,e,o.basename),[o.routes,e,o.basename]);return u?L.createElement(HL,te({page:e,matches:u},t)):null}function $L(e){let{manifest:t,routeModules:n}=eP(),[i,o]=L.useState([]);return L.useEffect(()=>{let u=!1;return RL(e,t,n).then(c=>{u||o(c)}),()=>{u=!0}},[e,t,n]),i}function HL(i){var o=i,{page:e,matches:t}=o,n=en(o,["page","matches"]);let u=pl(),{manifest:c,routeModules:a}=eP(),{basename:g}=J4(),{loaderData:_,matches:S}=BL(),N=L.useMemo(()=>zk(e,t,S,c,u,"data"),[e,t,S,c,u]),A=L.useMemo(()=>zk(e,t,S,c,u,"assets"),[e,t,S,c,u]),E=L.useMemo(()=>{if(e===u.pathname+u.search+u.hash)return[];let $=new Set,G=!1;if(t.forEach(J=>{var K;let Z=c.routes[J.route.id];!Z||!Z.hasLoader||(!N.some(le=>le.route.id===J.route.id)&&J.route.id in _&&((K=a[J.route.id])!=null&&K.shouldRevalidate)||Z.hasClientLoader?G=!0:$.add(J.route.id))}),$.size===0)return[];let W=FL(e,g);return G&&$.size>0&&W.searchParams.set("_routes",t.filter(J=>$.has(J.route.id)).map(J=>J.route.id).join(",")),[W.pathname+W.search]},[g,_,u,c,N,t,e,a]),D=L.useMemo(()=>DL(A,c),[A,c]),B=$L(A);return L.createElement(L.Fragment,null,E.map($=>L.createElement("link",te({key:$,rel:"prefetch",as:"fetch",href:$},n))),D.map($=>L.createElement("link",te({key:$,rel:"modulepreload",href:$},n))),B.map(({key:$,link:G})=>L.createElement("link",te({key:$},G))))}function qL(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var tP=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{tP&&(window.__reactRouterVersion="7.6.1")}catch(e){}function GL({basename:e,children:t,window:n}){let i=L.useRef();i.current==null&&(i.current=PO({window:n,v5Compat:!0}));let o=i.current,[u,c]=L.useState({action:o.action,location:o.location}),a=L.useCallback(g=>{L.startTransition(()=>c(g))},[c]);return L.useLayoutEffect(()=>o.listen(a),[o,a]),L.createElement(vL,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:o})}var nP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qs=L.forwardRef(function(D,E){var B=D,{onClick:t,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:c,state:a,target:g,to:_,preventScrollReset:S,viewTransition:N}=B,A=en(B,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let{basename:$}=L.useContext(vu),G=typeof _=="string"&&nP.test(_),W,J=!1;if(typeof _=="string"&&G&&(W=_,tP))try{let He=new URL(window.location.href),We=_.startsWith("//")?new URL(He.protocol+_):new URL(_),st=Th(We.pathname,$);We.origin===He.origin&&st!=null?_=st+We.search+We.hash:J=!0}catch(He){vc(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=rL(_,{relative:o}),[K,le,_e]=VL(i,A),de=XL(_,{replace:c,state:a,target:g,preventScrollReset:S,relative:o,viewTransition:N});function pe(He){t&&t(He),He.defaultPrevented||de(He)}let Oe=L.createElement("a",Me(te(te({},A),_e),{href:W||Z,onClick:J||u?t:pe,ref:qL(E,le),target:g,"data-discover":!G&&n==="render"?"true":void 0}));return K&&!G?L.createElement(L.Fragment,null,Oe,L.createElement(UL,{page:Z})):Oe});Qs.displayName="Link";var WL=L.forwardRef(function(N,S){var A=N,{"aria-current":t="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:c,viewTransition:a,children:g}=A,_=en(A,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let E=Wx(c,{relative:_.relative}),D=pl(),B=L.useContext(p1),{navigator:$,basename:G}=L.useContext(vu),W=B!=null&&t8(E)&&a===!0,J=$.encodeLocation?$.encodeLocation(E).pathname:E.pathname,Z=D.pathname,K=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;n||(Z=Z.toLowerCase(),K=K?K.toLowerCase():null,J=J.toLowerCase()),K&&G&&(K=Th(K,G)||K);const le=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let _e=Z===J||!o&&Z.startsWith(J)&&Z.charAt(le)==="/",de=K!=null&&(K===J||!o&&K.startsWith(J)&&K.charAt(J.length)==="/"),pe={isActive:_e,isPending:de,isTransitioning:W},Oe=_e?t:void 0,He;typeof i=="function"?He=i(pe):He=[i,_e?"active":null,de?"pending":null,W?"transitioning":null].filter(Boolean).join(" ");let We=typeof u=="function"?u(pe):u;return L.createElement(Qs,Me(te({},_),{"aria-current":Oe,className:He,ref:S,style:We,to:c,viewTransition:a}),typeof g=="function"?g(pe):g)});WL.displayName="NavLink";var ZL=L.forwardRef((D,E)=>{var B=D,{discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:o,state:u,method:c=Wb,action:a,onSubmit:g,relative:_,preventScrollReset:S,viewTransition:N}=B,A=en(B,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let $=JL(),G=e8(a,{relative:_}),W=c.toLowerCase()==="get"?"get":"post",J=typeof a=="string"&&nP.test(a),Z=K=>{if(g&&g(K),K.defaultPrevented)return;K.preventDefault();let le=K.nativeEvent.submitter,_e=(le==null?void 0:le.getAttribute("formmethod"))||c;$(le||K.currentTarget,{fetcherKey:t,method:_e,navigate:n,replace:o,state:u,relative:_,preventScrollReset:S,viewTransition:N})};return L.createElement("form",Me(te({ref:E,method:W,action:G,onSubmit:i?g:Z},A),{"data-discover":!J&&e==="render"?"true":void 0}))});ZL.displayName="Form";function YL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iP(e){let t=L.useContext(by);return or(t,YL(e)),t}function XL(e,{target:t,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:c}={}){let a=ua(),g=pl(),_=Wx(e,{relative:u});return L.useCallback(S=>{if(TL(S,t)){S.preventDefault();let N=n!==void 0?n:wx(g)===wx(_);a(e,{replace:N,state:i,preventScrollReset:o,relative:u,viewTransition:c})}},[g,a,_,n,i,t,e,o,u,c])}function sP(e){vc(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=L.useRef(fS(e)),n=L.useRef(!1),i=pl(),o=L.useMemo(()=>kL(i.search,n.current?null:t.current),[i.search]),u=ua(),c=L.useCallback((a,g)=>{const _=fS(typeof a=="function"?a(o):a);n.current=!0,u("?"+_,g)},[u,o]);return[o,c]}var KL=0,QL=()=>`__${String(++KL)}__`;function JL(){let{router:e}=iP("useSubmit"),{basename:t}=L.useContext(vu),n=gL();return L.useCallback((u,...c)=>Ht(null,[u,...c],function*(i,o={}){let{action:a,method:g,encType:_,formData:S,body:N}=EL(i,t);if(o.navigate===!1){let A=o.fetcherKey||QL();yield e.fetch(A,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:S,body:N,formMethod:o.method||g,formEncType:o.encType||_,flushSync:o.flushSync})}else yield e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:S,body:N,formMethod:o.method||g,formEncType:o.encType||_,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})}),[e,t,n])}function e8(e,{relative:t}={}){let{basename:n}=L.useContext(vu),i=L.useContext(wu);or(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u=te({},Wx(e||".",{relative:t})),c=pl();if(e==null){u.search=c.search;let a=new URLSearchParams(u.search),g=a.getAll("index");if(g.some(S=>S==="")){a.delete("index"),g.filter(N=>N).forEach(N=>a.append("index",N));let S=a.toString();u.search=S?`?${S}`:""}}return(!e||e===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:vh([n,u.pathname])),wx(u)}function t8(e,t={}){let n=L.useContext(W4);or(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=iP("useViewTransitionState"),o=Wx(e,{relative:t.relative});if(!n.isTransitioning)return!1;let u=Th(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=Th(n.nextLocation.pathname,i)||n.nextLocation.pathname;return kv(o.pathname,c)!=null||kv(o.pathname,u)!=null}[...LL];var Zx=u4();const rP=Hx(Zx);function Ik(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _m(...e){return t=>{let n=!1;const i=e.map(o=>{const u=Ik(o,t);return!n&&typeof u=="function"&&(n=!0),u});if(n)return()=>{for(let o=0;o<i.length;o++){const u=i[o];typeof u=="function"?u():Ik(e[o],null)}}}}function fr(...e){return L.useCallback(_m(...e),e)}function bm(e){const t=n8(e),n=L.forwardRef((i,o)=>{const _=i,{children:u}=_,c=en(_,["children"]),a=L.Children.toArray(u),g=a.find(s8);if(g){const S=g.props.children,N=a.map(A=>A===g?L.Children.count(S)>1?L.Children.only(null):L.isValidElement(S)?S.props.children:null:A);return l.jsx(t,Me(te({},c),{ref:o,children:L.isValidElement(S)?L.cloneElement(S,void 0,N):null}))}return l.jsx(t,Me(te({},c),{ref:o,children:u}))});return n.displayName=`${e}.Slot`,n}var aC=bm("Slot");function n8(e){const t=L.forwardRef((n,i)=>{const c=n,{children:o}=c,u=en(c,["children"]);if(L.isValidElement(o)){const a=a8(o),g=r8(u,o.props);return o.type!==L.Fragment&&(g.ref=i?_m(i,a):a),L.cloneElement(o,g)}return L.Children.count(o)>1?L.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var i8=Symbol("radix.slottable");function s8(e){return L.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===i8}function r8(e,t){const n=te({},t);for(const i in t){const o=e[i],u=t[i];/^on[A-Z]/.test(i)?o&&u?n[i]=(...a)=>{const g=u(...a);return o(...a),g}:o&&(n[i]=o):i==="style"?n[i]=te(te({},o),u):i==="className"&&(n[i]=[o,u].filter(Boolean).join(" "))}return te(te({},e),n)}function a8(e){var i,o;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function aP(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=aP(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function g1(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=aP(e))&&(i&&(i+=" "),i+=t);return i}const Ok=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Lk=g1,o8=(e,t)=>n=>{var i;if((t==null?void 0:t.variants)==null)return Lk(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:u}=t,c=Object.keys(o).map(_=>{const S=n==null?void 0:n[_],N=u==null?void 0:u[_];if(S===null)return null;const A=Ok(S)||Ok(N);return o[_][A]}),a=n&&Object.entries(n).reduce((_,S)=>{let[N,A]=S;return A===void 0||(_[N]=A),_},{}),g=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((_,S)=>{let D=S,{class:N,className:A}=D,E=en(D,["class","className"]);return Object.entries(E).every(B=>{let[$,G]=B;return Array.isArray(G)?G.includes(te(te({},u),a)[$]):te(te({},u),a)[$]===G})?[..._,N,A]:_},[]);return Lk(e,c,g,n==null?void 0:n.class,n==null?void 0:n.className)},oC="-",l8=e=>{const t=u8(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:c=>{const a=c.split(oC);return a[0]===""&&a.length!==1&&a.shift(),oP(a,t)||c8(c)},getConflictingClassGroupIds:(c,a)=>{const g=n[c]||[];return a&&i[c]?[...g,...i[c]]:g}}},oP=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const n=e[0],i=t.nextPart.get(n),o=i?oP(e.slice(1),i):void 0;if(o)return o;if(t.validators.length===0)return;const u=e.join(oC);return(c=t.validators.find(({validator:a})=>a(u)))==null?void 0:c.classGroupId},Fk=/^\[(.+)\]$/,c8=e=>{if(Fk.test(e)){const t=Fk.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},u8=e=>{const{theme:t,classGroups:n}=e,i={nextPart:new Map,validators:[]};for(const o in n)pS(n[o],i,o,t);return i},pS=(e,t,n,i)=>{e.forEach(o=>{if(typeof o=="string"){const u=o===""?t:Bk(t,o);u.classGroupId=n;return}if(typeof o=="function"){if(d8(o)){pS(o(i),t,n,i);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([u,c])=>{pS(c,Bk(t,u),n,i)})})},Bk=(e,t)=>{let n=e;return t.split(oC).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},d8=e=>e.isThemeGetter,h8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,i=new Map;const o=(u,c)=>{n.set(u,c),t++,t>e&&(t=0,i=n,n=new Map)};return{get(u){let c=n.get(u);if(c!==void 0)return c;if((c=i.get(u))!==void 0)return o(u,c),c},set(u,c){n.has(u)?n.set(u,c):o(u,c)}}},mS="!",gS=":",f8=gS.length,p8=e=>{const{prefix:t,experimentalParseClassName:n}=e;let i=o=>{const u=[];let c=0,a=0,g=0,_;for(let D=0;D<o.length;D++){let B=o[D];if(c===0&&a===0){if(B===gS){u.push(o.slice(g,D)),g=D+f8;continue}if(B==="/"){_=D;continue}}B==="["?c++:B==="]"?c--:B==="("?a++:B===")"&&a--}const S=u.length===0?o:o.substring(g),N=m8(S),A=N!==S,E=_&&_>g?_-g:void 0;return{modifiers:u,hasImportantModifier:A,baseClassName:N,maybePostfixModifierPosition:E}};if(t){const o=t+gS,u=i;i=c=>c.startsWith(o)?u(c.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(n){const o=i;i=u=>n({className:u,parseClassName:o})}return i},m8=e=>e.endsWith(mS)?e.substring(0,e.length-1):e.startsWith(mS)?e.substring(1):e,g8=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const o=[];let u=[];return i.forEach(c=>{c[0]==="["||t[c]?(o.push(...u.sort(),c),u=[]):u.push(c)}),o.push(...u.sort()),o}},y8=e=>te({cache:h8(e.cacheSize),parseClassName:p8(e),sortModifiers:g8(e)},l8(e)),x8=/\s+/,_8=(e,t)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:u}=t,c=[],a=e.trim().split(x8);let g="";for(let _=a.length-1;_>=0;_-=1){const S=a[_],{isExternal:N,modifiers:A,hasImportantModifier:E,baseClassName:D,maybePostfixModifierPosition:B}=n(S);if(N){g=S+(g.length>0?" "+g:g);continue}let $=!!B,G=i($?D.substring(0,B):D);if(!G){if(!$){g=S+(g.length>0?" "+g:g);continue}if(G=i(D),!G){g=S+(g.length>0?" "+g:g);continue}$=!1}const W=u(A).join(":"),J=E?W+mS:W,Z=J+G;if(c.includes(Z))continue;c.push(Z);const K=o(G,$);for(let le=0;le<K.length;++le){const _e=K[le];c.push(J+_e)}g=S+(g.length>0?" "+g:g)}return g};function b8(){let e=0,t,n,i="";for(;e<arguments.length;)(t=arguments[e++])&&(n=lP(t))&&(i&&(i+=" "),i+=n);return i}const lP=e=>{if(typeof e=="string")return e;let t,n="";for(let i=0;i<e.length;i++)e[i]&&(t=lP(e[i]))&&(n&&(n+=" "),n+=t);return n};function v8(e,...t){let n,i,o,u=c;function c(g){const _=t.reduce((S,N)=>N(S),e());return n=y8(_),i=n.cache.get,o=n.cache.set,u=a,a(g)}function a(g){const _=i(g);if(_)return _;const S=_8(g,n);return o(g,S),S}return function(){return u(b8.apply(null,arguments))}}const oa=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},cP=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,uP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,w8=/^\d+\/\d+$/,S8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,j8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,C8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,T8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,k8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dg=e=>w8.test(e),Pi=e=>!!e&&!Number.isNaN(Number(e)),Ef=e=>!!e&&Number.isInteger(Number(e)),Fw=e=>e.endsWith("%")&&Pi(e.slice(0,-1)),uh=e=>S8.test(e),N8=()=>!0,M8=e=>j8.test(e)&&!C8.test(e),dP=()=>!1,E8=e=>T8.test(e),A8=e=>k8.test(e),P8=e=>!Ln(e)&&!Fn(e),R8=e=>wy(e,pP,dP),Ln=e=>cP.test(e),Xp=e=>wy(e,mP,M8),Bw=e=>wy(e,L8,Pi),Vk=e=>wy(e,hP,dP),D8=e=>wy(e,fP,A8),ab=e=>wy(e,gP,E8),Fn=e=>uP.test(e),z0=e=>Sy(e,mP),z8=e=>Sy(e,F8),Uk=e=>Sy(e,hP),I8=e=>Sy(e,pP),O8=e=>Sy(e,fP),ob=e=>Sy(e,gP,!0),wy=(e,t,n)=>{const i=cP.exec(e);return i?i[1]?t(i[1]):n(i[2]):!1},Sy=(e,t,n=!1)=>{const i=uP.exec(e);return i?i[1]?t(i[1]):n:!1},hP=e=>e==="position"||e==="percentage",fP=e=>e==="image"||e==="url",pP=e=>e==="length"||e==="size"||e==="bg-size",mP=e=>e==="length",L8=e=>e==="number",F8=e=>e==="family-name",gP=e=>e==="shadow",B8=()=>{const e=oa("color"),t=oa("font"),n=oa("text"),i=oa("font-weight"),o=oa("tracking"),u=oa("leading"),c=oa("breakpoint"),a=oa("container"),g=oa("spacing"),_=oa("radius"),S=oa("shadow"),N=oa("inset-shadow"),A=oa("text-shadow"),E=oa("drop-shadow"),D=oa("blur"),B=oa("perspective"),$=oa("aspect"),G=oa("ease"),W=oa("animate"),J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],K=()=>[...Z(),Fn,Ln],le=()=>["auto","hidden","clip","visible","scroll"],_e=()=>["auto","contain","none"],de=()=>[Fn,Ln,g],pe=()=>[Dg,"full","auto",...de()],Oe=()=>[Ef,"none","subgrid",Fn,Ln],He=()=>["auto",{span:["full",Ef,Fn,Ln]},Ef,Fn,Ln],We=()=>[Ef,"auto",Fn,Ln],st=()=>["auto","min","max","fr",Fn,Ln],At=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],vt=()=>["start","end","center","stretch","center-safe","end-safe"],ze=()=>["auto",...de()],Qe=()=>[Dg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...de()],Je=()=>[e,Fn,Ln],Pt=()=>[...Z(),Uk,Vk,{position:[Fn,Ln]}],fe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Xe=()=>["auto","cover","contain",I8,R8,{size:[Fn,Ln]}],tt=()=>[Fw,z0,Xp],Ae=()=>["","none","full",_,Fn,Ln],ot=()=>["",Pi,z0,Xp],ct=()=>["solid","dashed","dotted","double"],ut=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],tn=()=>[Pi,Fw,Uk,Vk],Ge=()=>["","none",D,Fn,Ln],Ye=()=>["none",Pi,Fn,Ln],zt=()=>["none",Pi,Fn,Ln],Bt=()=>[Pi,Fn,Ln],It=()=>[Dg,"full",...de()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[uh],breakpoint:[uh],color:[N8],container:[uh],"drop-shadow":[uh],ease:["in","out","in-out"],font:[P8],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[uh],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[uh],shadow:[uh],spacing:["px",Pi],text:[uh],"text-shadow":[uh],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Dg,Ln,Fn,$]}],container:["container"],columns:[{columns:[Pi,Ln,Fn,a]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:K()}],overflow:[{overflow:le()}],"overflow-x":[{"overflow-x":le()}],"overflow-y":[{"overflow-y":le()}],overscroll:[{overscroll:_e()}],"overscroll-x":[{"overscroll-x":_e()}],"overscroll-y":[{"overscroll-y":_e()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:pe()}],"inset-x":[{"inset-x":pe()}],"inset-y":[{"inset-y":pe()}],start:[{start:pe()}],end:[{end:pe()}],top:[{top:pe()}],right:[{right:pe()}],bottom:[{bottom:pe()}],left:[{left:pe()}],visibility:["visible","invisible","collapse"],z:[{z:[Ef,"auto",Fn,Ln]}],basis:[{basis:[Dg,"full","auto",a,...de()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Pi,Dg,"auto","initial","none",Ln]}],grow:[{grow:["",Pi,Fn,Ln]}],shrink:[{shrink:["",Pi,Fn,Ln]}],order:[{order:[Ef,"first","last","none",Fn,Ln]}],"grid-cols":[{"grid-cols":Oe()}],"col-start-end":[{col:He()}],"col-start":[{"col-start":We()}],"col-end":[{"col-end":We()}],"grid-rows":[{"grid-rows":Oe()}],"row-start-end":[{row:He()}],"row-start":[{"row-start":We()}],"row-end":[{"row-end":We()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":st()}],"auto-rows":[{"auto-rows":st()}],gap:[{gap:de()}],"gap-x":[{"gap-x":de()}],"gap-y":[{"gap-y":de()}],"justify-content":[{justify:[...At(),"normal"]}],"justify-items":[{"justify-items":[...vt(),"normal"]}],"justify-self":[{"justify-self":["auto",...vt()]}],"align-content":[{content:["normal",...At()]}],"align-items":[{items:[...vt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...vt(),{baseline:["","last"]}]}],"place-content":[{"place-content":At()}],"place-items":[{"place-items":[...vt(),"baseline"]}],"place-self":[{"place-self":["auto",...vt()]}],p:[{p:de()}],px:[{px:de()}],py:[{py:de()}],ps:[{ps:de()}],pe:[{pe:de()}],pt:[{pt:de()}],pr:[{pr:de()}],pb:[{pb:de()}],pl:[{pl:de()}],m:[{m:ze()}],mx:[{mx:ze()}],my:[{my:ze()}],ms:[{ms:ze()}],me:[{me:ze()}],mt:[{mt:ze()}],mr:[{mr:ze()}],mb:[{mb:ze()}],ml:[{ml:ze()}],"space-x":[{"space-x":de()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":de()}],"space-y-reverse":["space-y-reverse"],size:[{size:Qe()}],w:[{w:[a,"screen",...Qe()]}],"min-w":[{"min-w":[a,"screen","none",...Qe()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[c]},...Qe()]}],h:[{h:["screen","lh",...Qe()]}],"min-h":[{"min-h":["screen","lh","none",...Qe()]}],"max-h":[{"max-h":["screen","lh",...Qe()]}],"font-size":[{text:["base",n,z0,Xp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Fn,Bw]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fw,Ln]}],"font-family":[{font:[z8,Ln,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,Fn,Ln]}],"line-clamp":[{"line-clamp":[Pi,"none",Fn,Bw]}],leading:[{leading:[u,...de()]}],"list-image":[{"list-image":["none",Fn,Ln]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Fn,Ln]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Je()}],"text-color":[{text:Je()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ct(),"wavy"]}],"text-decoration-thickness":[{decoration:[Pi,"from-font","auto",Fn,Xp]}],"text-decoration-color":[{decoration:Je()}],"underline-offset":[{"underline-offset":[Pi,"auto",Fn,Ln]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:de()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fn,Ln]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fn,Ln]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Pt()}],"bg-repeat":[{bg:fe()}],"bg-size":[{bg:Xe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ef,Fn,Ln],radial:["",Fn,Ln],conic:[Ef,Fn,Ln]},O8,D8]}],"bg-color":[{bg:Je()}],"gradient-from-pos":[{from:tt()}],"gradient-via-pos":[{via:tt()}],"gradient-to-pos":[{to:tt()}],"gradient-from":[{from:Je()}],"gradient-via":[{via:Je()}],"gradient-to":[{to:Je()}],rounded:[{rounded:Ae()}],"rounded-s":[{"rounded-s":Ae()}],"rounded-e":[{"rounded-e":Ae()}],"rounded-t":[{"rounded-t":Ae()}],"rounded-r":[{"rounded-r":Ae()}],"rounded-b":[{"rounded-b":Ae()}],"rounded-l":[{"rounded-l":Ae()}],"rounded-ss":[{"rounded-ss":Ae()}],"rounded-se":[{"rounded-se":Ae()}],"rounded-ee":[{"rounded-ee":Ae()}],"rounded-es":[{"rounded-es":Ae()}],"rounded-tl":[{"rounded-tl":Ae()}],"rounded-tr":[{"rounded-tr":Ae()}],"rounded-br":[{"rounded-br":Ae()}],"rounded-bl":[{"rounded-bl":Ae()}],"border-w":[{border:ot()}],"border-w-x":[{"border-x":ot()}],"border-w-y":[{"border-y":ot()}],"border-w-s":[{"border-s":ot()}],"border-w-e":[{"border-e":ot()}],"border-w-t":[{"border-t":ot()}],"border-w-r":[{"border-r":ot()}],"border-w-b":[{"border-b":ot()}],"border-w-l":[{"border-l":ot()}],"divide-x":[{"divide-x":ot()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ot()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ct(),"hidden","none"]}],"divide-style":[{divide:[...ct(),"hidden","none"]}],"border-color":[{border:Je()}],"border-color-x":[{"border-x":Je()}],"border-color-y":[{"border-y":Je()}],"border-color-s":[{"border-s":Je()}],"border-color-e":[{"border-e":Je()}],"border-color-t":[{"border-t":Je()}],"border-color-r":[{"border-r":Je()}],"border-color-b":[{"border-b":Je()}],"border-color-l":[{"border-l":Je()}],"divide-color":[{divide:Je()}],"outline-style":[{outline:[...ct(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Pi,Fn,Ln]}],"outline-w":[{outline:["",Pi,z0,Xp]}],"outline-color":[{outline:Je()}],shadow:[{shadow:["","none",S,ob,ab]}],"shadow-color":[{shadow:Je()}],"inset-shadow":[{"inset-shadow":["none",N,ob,ab]}],"inset-shadow-color":[{"inset-shadow":Je()}],"ring-w":[{ring:ot()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Je()}],"ring-offset-w":[{"ring-offset":[Pi,Xp]}],"ring-offset-color":[{"ring-offset":Je()}],"inset-ring-w":[{"inset-ring":ot()}],"inset-ring-color":[{"inset-ring":Je()}],"text-shadow":[{"text-shadow":["none",A,ob,ab]}],"text-shadow-color":[{"text-shadow":Je()}],opacity:[{opacity:[Pi,Fn,Ln]}],"mix-blend":[{"mix-blend":[...ut(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ut()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Pi]}],"mask-image-linear-from-pos":[{"mask-linear-from":tn()}],"mask-image-linear-to-pos":[{"mask-linear-to":tn()}],"mask-image-linear-from-color":[{"mask-linear-from":Je()}],"mask-image-linear-to-color":[{"mask-linear-to":Je()}],"mask-image-t-from-pos":[{"mask-t-from":tn()}],"mask-image-t-to-pos":[{"mask-t-to":tn()}],"mask-image-t-from-color":[{"mask-t-from":Je()}],"mask-image-t-to-color":[{"mask-t-to":Je()}],"mask-image-r-from-pos":[{"mask-r-from":tn()}],"mask-image-r-to-pos":[{"mask-r-to":tn()}],"mask-image-r-from-color":[{"mask-r-from":Je()}],"mask-image-r-to-color":[{"mask-r-to":Je()}],"mask-image-b-from-pos":[{"mask-b-from":tn()}],"mask-image-b-to-pos":[{"mask-b-to":tn()}],"mask-image-b-from-color":[{"mask-b-from":Je()}],"mask-image-b-to-color":[{"mask-b-to":Je()}],"mask-image-l-from-pos":[{"mask-l-from":tn()}],"mask-image-l-to-pos":[{"mask-l-to":tn()}],"mask-image-l-from-color":[{"mask-l-from":Je()}],"mask-image-l-to-color":[{"mask-l-to":Je()}],"mask-image-x-from-pos":[{"mask-x-from":tn()}],"mask-image-x-to-pos":[{"mask-x-to":tn()}],"mask-image-x-from-color":[{"mask-x-from":Je()}],"mask-image-x-to-color":[{"mask-x-to":Je()}],"mask-image-y-from-pos":[{"mask-y-from":tn()}],"mask-image-y-to-pos":[{"mask-y-to":tn()}],"mask-image-y-from-color":[{"mask-y-from":Je()}],"mask-image-y-to-color":[{"mask-y-to":Je()}],"mask-image-radial":[{"mask-radial":[Fn,Ln]}],"mask-image-radial-from-pos":[{"mask-radial-from":tn()}],"mask-image-radial-to-pos":[{"mask-radial-to":tn()}],"mask-image-radial-from-color":[{"mask-radial-from":Je()}],"mask-image-radial-to-color":[{"mask-radial-to":Je()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Z()}],"mask-image-conic-pos":[{"mask-conic":[Pi]}],"mask-image-conic-from-pos":[{"mask-conic-from":tn()}],"mask-image-conic-to-pos":[{"mask-conic-to":tn()}],"mask-image-conic-from-color":[{"mask-conic-from":Je()}],"mask-image-conic-to-color":[{"mask-conic-to":Je()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Pt()}],"mask-repeat":[{mask:fe()}],"mask-size":[{mask:Xe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Fn,Ln]}],filter:[{filter:["","none",Fn,Ln]}],blur:[{blur:Ge()}],brightness:[{brightness:[Pi,Fn,Ln]}],contrast:[{contrast:[Pi,Fn,Ln]}],"drop-shadow":[{"drop-shadow":["","none",E,ob,ab]}],"drop-shadow-color":[{"drop-shadow":Je()}],grayscale:[{grayscale:["",Pi,Fn,Ln]}],"hue-rotate":[{"hue-rotate":[Pi,Fn,Ln]}],invert:[{invert:["",Pi,Fn,Ln]}],saturate:[{saturate:[Pi,Fn,Ln]}],sepia:[{sepia:["",Pi,Fn,Ln]}],"backdrop-filter":[{"backdrop-filter":["","none",Fn,Ln]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[Pi,Fn,Ln]}],"backdrop-contrast":[{"backdrop-contrast":[Pi,Fn,Ln]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Pi,Fn,Ln]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Pi,Fn,Ln]}],"backdrop-invert":[{"backdrop-invert":["",Pi,Fn,Ln]}],"backdrop-opacity":[{"backdrop-opacity":[Pi,Fn,Ln]}],"backdrop-saturate":[{"backdrop-saturate":[Pi,Fn,Ln]}],"backdrop-sepia":[{"backdrop-sepia":["",Pi,Fn,Ln]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":de()}],"border-spacing-x":[{"border-spacing-x":de()}],"border-spacing-y":[{"border-spacing-y":de()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Fn,Ln]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Pi,"initial",Fn,Ln]}],ease:[{ease:["linear","initial",G,Fn,Ln]}],delay:[{delay:[Pi,Fn,Ln]}],animate:[{animate:["none",W,Fn,Ln]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[B,Fn,Ln]}],"perspective-origin":[{"perspective-origin":K()}],rotate:[{rotate:Ye()}],"rotate-x":[{"rotate-x":Ye()}],"rotate-y":[{"rotate-y":Ye()}],"rotate-z":[{"rotate-z":Ye()}],scale:[{scale:zt()}],"scale-x":[{"scale-x":zt()}],"scale-y":[{"scale-y":zt()}],"scale-z":[{"scale-z":zt()}],"scale-3d":["scale-3d"],skew:[{skew:Bt()}],"skew-x":[{"skew-x":Bt()}],"skew-y":[{"skew-y":Bt()}],transform:[{transform:[Fn,Ln,"","none","gpu","cpu"]}],"transform-origin":[{origin:K()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:It()}],"translate-x":[{"translate-x":It()}],"translate-y":[{"translate-y":It()}],"translate-z":[{"translate-z":It()}],"translate-none":["translate-none"],accent:[{accent:Je()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Je()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fn,Ln]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":de()}],"scroll-mx":[{"scroll-mx":de()}],"scroll-my":[{"scroll-my":de()}],"scroll-ms":[{"scroll-ms":de()}],"scroll-me":[{"scroll-me":de()}],"scroll-mt":[{"scroll-mt":de()}],"scroll-mr":[{"scroll-mr":de()}],"scroll-mb":[{"scroll-mb":de()}],"scroll-ml":[{"scroll-ml":de()}],"scroll-p":[{"scroll-p":de()}],"scroll-px":[{"scroll-px":de()}],"scroll-py":[{"scroll-py":de()}],"scroll-ps":[{"scroll-ps":de()}],"scroll-pe":[{"scroll-pe":de()}],"scroll-pt":[{"scroll-pt":de()}],"scroll-pr":[{"scroll-pr":de()}],"scroll-pb":[{"scroll-pb":de()}],"scroll-pl":[{"scroll-pl":de()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fn,Ln]}],fill:[{fill:["none",...Je()]}],"stroke-w":[{stroke:[Pi,z0,Xp,Bw]}],stroke:[{stroke:["none",...Je()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},V8=v8(B8);function Sr(...e){return V8(g1(e))}const U8=o8("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function $8(u){var c=u,{className:e,variant:t,size:n,asChild:i=!1}=c,o=en(c,["className","variant","size","asChild"]);const a=i?aC:"button";return l.jsx(a,te({"data-slot":"button",className:Sr(U8({variant:t,size:n,className:e}))},o))}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),$k=e=>{const t=q8(e);return t.charAt(0).toUpperCase()+t.slice(1)},yP=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),G8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=L.forwardRef((_,g)=>{var S=_,{color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:c}=S,a=en(S,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return L.createElement("svg",te(te(Me(te({ref:g},W8),{width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:yP("lucide",o)}),!u&&!G8(a)&&{"aria-hidden":"true"}),a),[...c.map(([N,A])=>L.createElement(N,A)),...Array.isArray(u)?u:[u]])});/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=(e,t)=>{const n=L.forwardRef((c,u)=>{var a=c,{className:i}=a,o=en(a,["className"]);return L.createElement(Z8,te({ref:u,iconNode:t,className:yP(`lucide-${H8($k(e))}`,`lucide-${e}`,i)},o))});return n.displayName=$k(e),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],y1=jn("activity",Y8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Nv=jn("arrow-left",X8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Q8=jn("arrow-right",K8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],eF=jn("arrow-up-right",J8);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],yS=jn("bell",tF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],xP=jn("book-open-text",nF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],sF=jn("brain",iF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],_P=jn("building",rF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],xS=jn("calendar-check",aF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xc=jn("calendar",oF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],cF=jn("camera",lF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bP=jn("check",uF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Mv=jn("chevron-down",dF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],fF=jn("chevron-left",hF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vP=jn("chevron-right",pF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gF=jn("chevron-up",mF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],xF=jn("chevrons-up-down",yF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ev=jn("circle-alert",_F);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vF=jn("circle-check-big",bF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hk=jn("circle-check",wF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jF=jn("circle-help",SF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],qk=jn("circle-x",CF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],kF=jn("clipboard-list",TF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],MF=jn("clipboard",NF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ly=jn("clock",EF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],PF=jn("coffee",AF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Gk=jn("coins",RF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lC=jn("credit-card",DF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Av=jn("download",zF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],OF=jn("droplet",IF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],FF=jn("ellipsis",LF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ey=jn("eye-off",BF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hm=jn("eye",VF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vm=jn("file-text",UF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Wk=jn("gift",$F);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],wP=jn("graduation-cap",HF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],GF=jn("grid-3x3",qF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],cC=jn("heart",WF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],YF=jn("history",ZF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]],SP=jn("hospital",XF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],QF=jn("house",KF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],eB=jn("info",JF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],nB=jn("lock",tB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_S=jn("log-out",iB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jP=jn("mail",sB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],fm=jn("map-pin",rB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],oB=jn("menu",aB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Zk=jn("message-circle",lB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],CP=jn("message-square",cB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],dB=jn("move-right",uB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],fB=jn("navigation",hB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],uC=jn("phone",pB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Yb=jn("pill",mB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],TP=jn("plus",gB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Yk=jn("reply",yB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],kP=jn("school",xB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ty=jn("search",_B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Xk=jn("send",bB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wB=jn("settings",vB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],jB=jn("share-2",SB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],TB=jn("shield-alert",CB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],bS=jn("shield",kB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],MB=jn("smile",NB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],AB=jn("sparkles",EB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],dC=jn("stethoscope",PB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]],vS=jn("syringe",RB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],hC=jn("test-tube",DB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],IB=jn("thermometer",zB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zg=jn("trash-2",OB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],fC=jn("trending-up",LB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],BB=jn("triangle-alert",FB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],wS=jn("upload",VB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],NP=jn("user-check",UB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Dm=jn("user",$B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qB=jn("users",HB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],MP=jn("video",GB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],ZB=jn("wind",WB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Sx=jn("x",YB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],KB=jn("zap",XB),QB="/assets/custom/mycard/assets/Health-Dcw6-KnG.jpg",JB=()=>{const e=ua();return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-blue-200 rounded-full opacity-20 blur-3xl animate-pulse"}),l.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-indigo-200 rounded-full opacity-20 blur-3xl animate-pulse delay-1000"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-purple-200 rounded-full opacity-10 blur-3xl animate-pulse delay-500"})]}),l.jsx("div",{className:"relative min-h-screen flex items-center justify-center px-6 py-12",children:l.jsxs("div",{className:"max-w-7xl w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-100 border border-amber-300 rounded-full",children:[l.jsx(Ev,{className:"w-4 h-4 text-amber-600"}),l.jsx("span",{className:"text-sm font-medium text-amber-700",children:"Profile Status"})]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-800 leading-tight mb-4",children:["Medical Profile",l.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:[" ","Not Found"]})]}),l.jsx("p",{className:"text-lg text-gray-600 leading-relaxed mb-6",children:"We couldn't locate your medical profile in our system. You'll need to register as a patient to access all Health Blo Me features."}),l.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl mb-6",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(dC,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),l.jsx("p",{className:"text-sm text-blue-800",children:"Please contact your healthcare provider or system administrator to get your patient profile created."})]})})]}),l.jsx("div",{children:l.jsxs("button",{onClick:()=>e("/"),className:"group bg-white hover:bg-gray-50 text-gray-700 py-3 px-6 rounded-xl font-medium transition-all duration-300 flex items-center gap-3 border border-gray-200 shadow-sm hover:shadow-md",children:[l.jsx(Nv,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),"Back to Dashboard"]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(AB,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h3",{className:"font-semibold text-gray-800 text-lg",children:"Available with Patient Profile"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsx("div",{className:"group p-4 bg-white/80 backdrop-blur rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-blue-200 transition-all duration-300",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-50 rounded-lg group-hover:bg-blue-100 transition-colors",children:l.jsx(xc,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 text-sm",children:"Appointments"}),l.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Schedule & manage visits"})]})]})}),l.jsx("div",{className:"group p-4 bg-white/80 backdrop-blur rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-indigo-200 transition-all duration-300",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg group-hover:bg-indigo-100 transition-colors",children:l.jsx(vm,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 text-sm",children:"Health Records"}),l.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Secure digital history"})]})]})}),l.jsx("div",{className:"group p-4 bg-white/80 backdrop-blur rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-purple-200 transition-all duration-300",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 bg-purple-50 rounded-lg group-hover:bg-purple-100 transition-colors",children:l.jsx(bS,{className:"w-5 h-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 text-sm",children:"Prescriptions"}),l.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Track medications"})]})]})}),l.jsx("div",{className:"group p-4 bg-white/80 backdrop-blur rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-pink-200 transition-all duration-300",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 bg-pink-50 rounded-lg group-hover:bg-pink-100 transition-colors",children:l.jsx(y1,{className:"w-5 h-5 text-pink-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800 text-sm",children:"Lab Results"}),l.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Monitor health data"})]})]})})]})]})]}),l.jsx("div",{className:"flex justify-center lg:justify-end",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-4 bg-white/30 backdrop-blur-xl rounded-3xl"}),l.jsx("img",{src:QB,alt:"Health Regulation Illustration",className:"relative w-full max-w-lg h-auto object-cover rounded-3xl shadow-2xl border-4 border-white/50"}),l.jsx("div",{className:"absolute -top-6 -right-6 w-20 h-20 bg-gradient-to-br from-red-400 via-pink-400 to-purple-400 rounded-2xl flex items-center justify-center shadow-xl animate-float",children:l.jsx(cC,{className:"w-10 h-10 text-white"})}),l.jsx("div",{className:"absolute -bottom-6 -left-6 w-16 h-16 bg-gradient-to-br from-blue-400 via-indigo-400 to-purple-400 rounded-2xl flex items-center justify-center shadow-xl animate-float-delayed",children:l.jsx(bS,{className:"w-8 h-8 text-white"})}),l.jsxs("div",{className:"absolute top-1/2 -left-12 space-y-3",children:[l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full animate-pulse"}),l.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full animate-pulse delay-200"}),l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full animate-pulse delay-500"})]}),l.jsxs("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 space-x-2 flex",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce delay-100"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full animate-bounce delay-200"})]})]})})]})}),l.jsx("style",{jsx:!0,children:`
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) rotate(0deg);
          }
          50% {
            transform: translateY(-10px) rotate(5deg);
          }
        }
        
        @keyframes float-delayed {
          0%, 100% {
            transform: translateY(0px) rotate(0deg);
          }
          50% {
            transform: translateY(-8px) rotate(-5deg);
          }
        }
        
        .animate-float {
          animation: float 4s ease-in-out infinite;
        }
        
        .animate-float-delayed {
          animation: float-delayed 4s ease-in-out infinite;
          animation-delay: 1s;
        }
      `})]})};/*! js-cookie v3.0.5 | MIT */function lb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var e7={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function SS(e,t){function n(o,u,c){if(typeof document!="undefined"){c=lb({},t,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var g in c)c[g]&&(a+="; "+g,c[g]!==!0&&(a+="="+c[g].split(";")[0]));return document.cookie=o+"="+e.write(u,o)+a}}function i(o){if(!(typeof document=="undefined"||arguments.length&&!o)){for(var u=document.cookie?document.cookie.split("; "):[],c={},a=0;a<u.length;a++){var g=u[a].split("="),_=g.slice(1).join("=");try{var S=decodeURIComponent(g[0]);if(c[S]=e.read(_,S),o===S)break}catch(N){}}return o?c[o]:c}}return Object.create({set:n,get:i,remove:function(o,u){n(o,"",lb({},u,{expires:-1}))},withAttributes:function(o){return SS(this.converter,lb({},this.attributes,o))},withConverter:function(o){return SS(lb({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var is=SS(e7,{path:"/"}),Vw={exports:{}},Uw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kk;function t7(){if(Kk)return Uw;Kk=1;var e=d1();function t(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,o=e.useRef,u=e.useEffect,c=e.useMemo,a=e.useDebugValue;return Uw.useSyncExternalStoreWithSelector=function(g,_,S,N,A){var E=o(null);if(E.current===null){var D={hasValue:!1,value:null};E.current=D}else D=E.current;E=c(function(){function $(K){if(!G){if(G=!0,W=K,K=N(K),A!==void 0&&D.hasValue){var le=D.value;if(A(le,K))return J=le}return J=K}if(le=J,n(W,K))return le;var _e=N(K);return A!==void 0&&A(le,_e)?(W=K,le):(W=K,J=_e)}var G=!1,W,J,Z=S===void 0?null:S;return[function(){return $(_())},Z===null?void 0:function(){return $(Z())}]},[_,S,N,A]);var B=i(g,E[0],E[1]);return u(function(){D.hasValue=!0,D.value=B},[B]),a(B),B},Uw}var Qk;function n7(){return Qk||(Qk=1,Vw.exports=t7()),Vw.exports}var i7=n7();function s7(e){e()}function r7(){let e=null,t=null;return{clear(){e=null,t=null},notify(){s7(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var Jk={notify(){},get:()=>[]};function a7(e,t){let n,i=Jk,o=0,u=!1;function c(B){S();const $=i.subscribe(B);let G=!1;return()=>{G||(G=!0,$(),N())}}function a(){i.notify()}function g(){D.onStateChange&&D.onStateChange()}function _(){return u}function S(){o++,n||(n=e.subscribe(g),i=r7())}function N(){o--,n&&o===0&&(n(),n=void 0,i.clear(),i=Jk)}function A(){u||(u=!0,S())}function E(){u&&(u=!1,N())}const D={addNestedSub:c,notifyNestedSubs:a,handleChangeWrapper:g,isSubscribed:_,trySubscribe:A,tryUnsubscribe:E,getListeners:()=>i};return D}var o7=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",l7=o7(),c7=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",u7=c7(),d7=()=>l7||u7?L.useLayoutEffect:L.useEffect,h7=d7(),$w=Symbol.for("react-redux-context"),Hw=typeof globalThis!="undefined"?globalThis:{};function f7(){var n;if(!L.createContext)return{};const e=(n=Hw[$w])!=null?n:Hw[$w]=new Map;let t=e.get(L.createContext);return t||(t=L.createContext(null),e.set(L.createContext,t)),t}var $f=f7();function p7(e){const{children:t,context:n,serverState:i,store:o}=e,u=L.useMemo(()=>{const g=a7(o);return{store:o,subscription:g,getServerState:i?()=>i:void 0}},[o,i]),c=L.useMemo(()=>o.getState(),[o]);h7(()=>{const{subscription:g}=u;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),c!==o.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[u,c]);const a=n||$f;return L.createElement(a.Provider,{value:u},t)}var m7=p7;function pC(e=$f){return function(){return L.useContext(e)}}var EP=pC();function AP(e=$f){const t=e===$f?EP:pC(e),n=()=>{const{store:i}=t();return i};return Object.assign(n,{withTypes:()=>n}),n}var g7=AP();function y7(e=$f){const t=e===$f?g7:AP(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Rh=y7(),x7=(e,t)=>e===t;function _7(e=$f){const t=e===$f?EP:pC(e),n=(i,o={})=>{const{equalityFn:u=x7}=typeof o=="function"?{equalityFn:o}:o,c=t(),{store:a,subscription:g,getServerState:_}=c;L.useRef(!0);const S=L.useCallback({[i.name](A){return i(A)}}[i.name],[i]),N=i7.useSyncExternalStoreWithSelector(g.addNestedSub,a.getState,_||a.getState,S,u);return L.useDebugValue(N),N};return Object.assign(n,{withTypes:()=>n}),n}var hd=_7();function Ua(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var b7=typeof Symbol=="function"&&Symbol.observable||"@@observable",eN=b7,qw=()=>Math.random().toString(36).substring(7).split("").join("."),v7={INIT:`@@redux/INIT${qw()}`,REPLACE:`@@redux/REPLACE${qw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${qw()}`},Pv=v7;function mC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function gC(e,t,n){if(typeof e!="function")throw new Error(Ua(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ua(0));if(typeof t=="function"&&typeof n=="undefined"&&(n=t,t=void 0),typeof n!="undefined"){if(typeof n!="function")throw new Error(Ua(1));return n(gC)(e,t)}let i=e,o=t,u=new Map,c=u,a=0,g=!1;function _(){c===u&&(c=new Map,u.forEach(($,G)=>{c.set(G,$)}))}function S(){if(g)throw new Error(Ua(3));return o}function N($){if(typeof $!="function")throw new Error(Ua(4));if(g)throw new Error(Ua(5));let G=!0;_();const W=a++;return c.set(W,$),function(){if(G){if(g)throw new Error(Ua(6));G=!1,_(),c.delete(W),u=null}}}function A($){if(!mC($))throw new Error(Ua(7));if(typeof $.type=="undefined")throw new Error(Ua(8));if(typeof $.type!="string")throw new Error(Ua(17));if(g)throw new Error(Ua(9));try{g=!0,o=i(o,$)}finally{g=!1}return(u=c).forEach(W=>{W()}),$}function E($){if(typeof $!="function")throw new Error(Ua(10));i=$,A({type:Pv.REPLACE})}function D(){const $=N;return{subscribe(G){if(typeof G!="object"||G===null)throw new Error(Ua(11));function W(){const Z=G;Z.next&&Z.next(S())}return W(),{unsubscribe:$(W)}},[eN](){return this}}}return A({type:Pv.INIT}),{dispatch:A,subscribe:N,getState:S,replaceReducer:E,[eN]:D}}function w7(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Pv.INIT})=="undefined")throw new Error(Ua(12));if(typeof n(void 0,{type:Pv.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Ua(13))})}function PP(e){const t=Object.keys(e),n={};for(let u=0;u<t.length;u++){const c=t[u];typeof e[c]=="function"&&(n[c]=e[c])}const i=Object.keys(n);let o;try{w7(n)}catch(u){o=u}return function(c={},a){if(o)throw o;let g=!1;const _={};for(let S=0;S<i.length;S++){const N=i[S],A=n[N],E=c[N],D=A(E,a);if(typeof D=="undefined")throw a&&a.type,new Error(Ua(14));_[N]=D,g=g||D!==E}return g=g||i.length!==Object.keys(c).length,g?_:c}}function Rv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function S7(...e){return t=>(n,i)=>{const o=t(n,i);let u=()=>{throw new Error(Ua(15))};const c={getState:o.getState,dispatch:(g,..._)=>u(g,..._)},a=e.map(g=>g(c));return u=Rv(...a)(o.dispatch),Me(te({},o),{dispatch:u})}}function j7(e){return mC(e)&&"type"in e&&typeof e.type=="string"}var RP=Symbol.for("immer-nothing"),tN=Symbol.for("immer-draftable"),Bl=Symbol.for("immer-state");function mu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cy=Object.getPrototypeOf;function wm(e){return!!e&&!!e[Bl]}function kh(e){var t;return e?DP(e)||Array.isArray(e)||!!e[tN]||!!((t=e.constructor)!=null&&t[tN])||Yx(e)||_1(e):!1}var C7=Object.prototype.constructor.toString();function DP(e){if(!e||typeof e!="object")return!1;const t=cy(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===C7}function Dv(e,t){x1(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function x1(e){const t=e[Bl];return t?t.type_:Array.isArray(e)?1:Yx(e)?2:_1(e)?3:0}function jS(e,t){return x1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zP(e,t,n){const i=x1(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function T7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Yx(e){return e instanceof Map}function _1(e){return e instanceof Set}function im(e){return e.copy_||e.base_}function CS(e,t){if(Yx(e))return new Map(e);if(_1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=DP(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[Bl];let o=Reflect.ownKeys(i);for(let u=0;u<o.length;u++){const c=o[u],a=i[c];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(i[c]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[c]})}return Object.create(cy(e),i)}else{const i=cy(e);if(i!==null&&n)return te({},e);const o=Object.create(i);return Object.assign(o,e)}}function yC(e,t=!1){return b1(e)||wm(e)||!kh(e)||(x1(e)>1&&Object.defineProperties(e,{set:{value:cb},add:{value:cb},clear:{value:cb},delete:{value:cb}}),Object.freeze(e),t&&Object.values(e).forEach(n=>yC(n,!0))),e}function cb(){mu(2)}function b1(e){return Object.isFrozen(e)}var k7={};function Sm(e){const t=k7[e];return t||mu(0,e),t}var jx;function IP(){return jx}function N7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nN(e,t){t&&(Sm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function TS(e){kS(e),e.drafts_.forEach(M7),e.drafts_=null}function kS(e){e===jx&&(jx=e.parent_)}function iN(e){return jx=N7(jx,e)}function M7(e){const t=e[Bl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function sN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Bl].modified_&&(TS(t),mu(4)),kh(e)&&(e=zv(t,e),t.parent_||Iv(t,e)),t.patches_&&Sm("Patches").generateReplacementPatches_(n[Bl].base_,e,t.patches_,t.inversePatches_)):e=zv(t,n,[]),TS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==RP?e:void 0}function zv(e,t,n){if(b1(t))return t;const i=t[Bl];if(!i)return Dv(t,(o,u)=>rN(e,i,t,o,u,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return Iv(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let u=o,c=!1;i.type_===3&&(u=new Set(o),o.clear(),c=!0),Dv(u,(a,g)=>rN(e,i,o,a,g,n,c)),Iv(e,o,!1),n&&e.patches_&&Sm("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function rN(e,t,n,i,o,u,c){if(wm(o)){const a=u&&t&&t.type_!==3&&!jS(t.assigned_,i)?u.concat(i):void 0,g=zv(e,o,a);if(zP(n,i,g),wm(g))e.canAutoFreeze_=!1;else return}else c&&n.add(o);if(kh(o)&&!b1(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;zv(e,o),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&(Yx(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&Iv(e,o)}}function Iv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yC(t,n)}function E7(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:IP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=i,u=xC;n&&(o=[i],u=Cx);const{revoke:c,proxy:a}=Proxy.revocable(o,u);return i.draft_=a,i.revoke_=c,a}var xC={get(e,t){if(t===Bl)return e;const n=im(e);if(!jS(n,t))return A7(e,n,t);const i=n[t];return e.finalized_||!kh(i)?i:i===Gw(e.base_,t)?(Ww(e),e.copy_[t]=MS(i,e)):i},has(e,t){return t in im(e)},ownKeys(e){return Reflect.ownKeys(im(e))},set(e,t,n){const i=OP(im(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const o=Gw(im(e),t),u=o==null?void 0:o[Bl];if(u&&u.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(T7(n,o)&&(n!==void 0||jS(e.base_,t)))return!0;Ww(e),NS(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Gw(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ww(e),NS(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=im(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){mu(11)},getPrototypeOf(e){return cy(e.base_)},setPrototypeOf(){mu(12)}},Cx={};Dv(xC,(e,t)=>{Cx[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Cx.deleteProperty=function(e,t){return Cx.set.call(this,e,t,void 0)};Cx.set=function(e,t,n){return xC.set.call(this,e[0],t,n,e[0])};function Gw(e,t){const n=e[Bl];return(n?im(n):e)[t]}function A7(e,t,n){var o;const i=OP(t,n);return i?"value"in i?i.value:(o=i.get)==null?void 0:o.call(e.draft_):void 0}function OP(e,t){if(!(t in e))return;let n=cy(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=cy(n)}}function NS(e){e.modified_||(e.modified_=!0,e.parent_&&NS(e.parent_))}function Ww(e){e.copy_||(e.copy_=CS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var P7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const u=n;n=t;const c=this;return function(g=u,..._){return c.produce(g,S=>n.call(this,S,..._))}}typeof n!="function"&&mu(6),i!==void 0&&typeof i!="function"&&mu(7);let o;if(kh(t)){const u=iN(this),c=MS(t,void 0);let a=!0;try{o=n(c),a=!1}finally{a?TS(u):kS(u)}return nN(u,i),sN(o,u)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===RP&&(o=void 0),this.autoFreeze_&&yC(o,!0),i){const u=[],c=[];Sm("Patches").generateReplacementPatches_(t,o,u,c),i(u,c)}return o}else mu(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...a)=>this.produceWithPatches(c,g=>t(g,...a));let i,o;return[this.produce(t,n,(c,a)=>{i=c,o=a}),i,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){kh(e)||mu(8),wm(e)&&(e=R7(e));const t=iN(this),n=MS(e,void 0);return n[Bl].isManual_=!0,kS(t),n}finishDraft(e,t){const n=e&&e[Bl];(!n||!n.isManual_)&&mu(9);const{scope_:i}=n;return nN(i,t),sN(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const i=Sm("Patches").applyPatches_;return wm(e)?i(e,t):this.produce(e,o=>i(o,t))}};function MS(e,t){const n=Yx(e)?Sm("MapSet").proxyMap_(e,t):_1(e)?Sm("MapSet").proxySet_(e,t):E7(e,t);return(t?t.scope_:IP()).drafts_.push(n),n}function R7(e){return wm(e)||mu(10,e),LP(e)}function LP(e){if(!kh(e)||b1(e))return e;const t=e[Bl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=CS(e,t.scope_.immer_.useStrictShallowCopy_)}else n=CS(e,!0);return Dv(n,(i,o)=>{zP(n,i,LP(o))}),t&&(t.finalized_=!1),n}var D7=new P7,FP=D7.produce;function BP(e){return({dispatch:n,getState:i})=>o=>u=>typeof u=="function"?u(n,i,e):o(u)}var z7=BP(),I7=BP,O7=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Rv:Rv.apply(null,arguments)},L7=e=>e&&typeof e.match=="function";function ox(e,t){function n(...i){if(t){let o=t(...i);if(!o)throw new Error(wh(0));return te(te({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:i[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=i=>j7(i)&&i.type===e,n}var VP=class Q0 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Q0.prototype)}static get[Symbol.species](){return Q0}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Q0(...t[0].concat(this)):new Q0(...t.concat(this))}};function aN(e){return kh(e)?FP(e,()=>{}):e}function ub(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function F7(e){return typeof e=="boolean"}var B7=()=>function(t){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:o=!0,actionCreatorCheck:u=!0}=t!=null?t:{};let c=new VP;return n&&(F7(n)?c.push(z7):c.push(I7(n.extraArgument))),c},V7="RTK_autoBatch",oN=e=>t=>{setTimeout(t,e)},U7=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let o=!0,u=!1,c=!1;const a=new Set,g=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:oN(10):e.type==="callback"?e.queueNotification:oN(e.timeout),_=()=>{c=!1,u&&(u=!1,a.forEach(S=>S()))};return Object.assign({},i,{subscribe(S){const N=()=>o&&S(),A=i.subscribe(N);return a.add(S),()=>{A(),a.delete(S)}},dispatch(S){var N;try{return o=!((N=S==null?void 0:S.meta)!=null&&N[V7]),u=!o,u&&(c||(c=!0,g(_))),i.dispatch(S)}finally{o=!0}}})},$7=e=>function(n){const{autoBatch:i=!0}=n!=null?n:{};let o=new VP(e);return i&&o.push(U7(typeof i=="object"?i:void 0)),o};function H7(e){const t=B7(),{reducer:n=void 0,middleware:i,devTools:o=!0,preloadedState:u=void 0,enhancers:c=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(mC(n))a=PP(n);else throw new Error(wh(1));let g;typeof i=="function"?g=i(t):g=t();let _=Rv;o&&(_=O7(te({trace:!1},typeof o=="object"&&o)));const S=S7(...g),N=$7(S);let A=typeof c=="function"?c(N):N();const E=_(...A);return gC(a,u,E)}function UP(e){const t={},n=[];let i;const o={addCase(u,c){const a=typeof u=="string"?u:u.type;if(!a)throw new Error(wh(28));if(a in t)throw new Error(wh(29));return t[a]=c,o},addAsyncThunk(u,c){return c.pending&&(t[u.pending.type]=c.pending),c.rejected&&(t[u.rejected.type]=c.rejected),c.fulfilled&&(t[u.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:u.settled,reducer:c.settled}),o},addMatcher(u,c){return n.push({matcher:u,reducer:c}),o},addDefaultCase(u){return i=u,o}};return e(o),[t,n,i]}function q7(e){return typeof e=="function"}function G7(e,t){let[n,i,o]=UP(t),u;if(q7(e))u=()=>aN(e());else{const a=aN(e);u=()=>a}function c(a=u(),g){let _=[n[g.type],...i.filter(({matcher:S})=>S(g)).map(({reducer:S})=>S)];return _.filter(S=>!!S).length===0&&(_=[o]),_.reduce((S,N)=>{if(N)if(wm(S)){const E=N(S,g);return E===void 0?S:E}else{if(kh(S))return FP(S,A=>N(A,g));{const A=N(S,g);if(A===void 0){if(S===null)return S;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return S},a)}return c.getInitialState=u,c}var W7=(e,t)=>L7(e)?e.match(t):e(t);function Z7(...e){return t=>e.some(n=>W7(n,t))}var Y7="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",X7=(e=21)=>{let t="",n=e;for(;n--;)t+=Y7[Math.random()*64|0];return t},K7=["name","message","stack","code"],Zw=class{constructor(e,t){wn(this,"_type");this.payload=e,this.meta=t}},lN=class{constructor(e,t){wn(this,"_type");this.payload=e,this.meta=t}},Q7=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of K7)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},cN="External signal was aborted",jy=(()=>{function e(t,n,i){const o=ox(t+"/fulfilled",(g,_,S,N)=>({payload:g,meta:Me(te({},N||{}),{arg:S,requestId:_,requestStatus:"fulfilled"})})),u=ox(t+"/pending",(g,_,S)=>({payload:void 0,meta:Me(te({},S||{}),{arg:_,requestId:g,requestStatus:"pending"})})),c=ox(t+"/rejected",(g,_,S,N,A)=>({payload:N,error:(i&&i.serializeError||Q7)(g||"Rejected"),meta:Me(te({},A||{}),{arg:S,requestId:_,rejectedWithValue:!!N,requestStatus:"rejected",aborted:(g==null?void 0:g.name)==="AbortError",condition:(g==null?void 0:g.name)==="ConditionError"})}));function a(g,{signal:_}={}){return(S,N,A)=>{const E=i!=null&&i.idGenerator?i.idGenerator(g):X7(),D=new AbortController;let B,$;function G(J){$=J,D.abort()}_&&(_.aborted?G(cN):_.addEventListener("abort",()=>G(cN),{once:!0}));const W=function(){return Ht(this,null,function*(){var K,le;let J;try{let _e=(K=i==null?void 0:i.condition)==null?void 0:K.call(i,g,{getState:N,extra:A});if(e9(_e)&&(_e=yield _e),_e===!1||D.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const de=new Promise((pe,Oe)=>{B=()=>{Oe({name:"AbortError",message:$||"Aborted"})},D.signal.addEventListener("abort",B)});S(u(E,g,(le=i==null?void 0:i.getPendingMeta)==null?void 0:le.call(i,{requestId:E,arg:g},{getState:N,extra:A}))),J=yield Promise.race([de,Promise.resolve(n(g,{dispatch:S,getState:N,extra:A,requestId:E,signal:D.signal,abort:G,rejectWithValue:(pe,Oe)=>new Zw(pe,Oe),fulfillWithValue:(pe,Oe)=>new lN(pe,Oe)})).then(pe=>{if(pe instanceof Zw)throw pe;return pe instanceof lN?o(pe.payload,E,g,pe.meta):o(pe,E,g)})])}catch(_e){J=_e instanceof Zw?c(null,E,g,_e.payload,_e.meta):c(_e,E,g)}finally{B&&D.signal.removeEventListener("abort",B)}return i&&!i.dispatchConditionRejection&&c.match(J)&&J.meta.condition||S(J),J})}();return Object.assign(W,{abort:G,requestId:E,arg:g,unwrap(){return W.then(J7)}})}}return Object.assign(a,{pending:u,rejected:c,fulfilled:o,settled:Z7(c,o),typePrefix:t})}return e.withTypes=()=>e,e})();function J7(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function e9(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var t9=Symbol.for("rtk-slice-createasyncthunk");function n9(e,t){return`${e}/${t}`}function i9({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[t9];return function(o){const{name:u,reducerPath:c=u}=o;if(!u)throw new Error(wh(11));const a=(typeof o.reducers=="function"?o.reducers(r9()):o.reducers)||{},g=Object.keys(a),_={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},S={addCase(Z,K){const le=typeof Z=="string"?Z:Z.type;if(!le)throw new Error(wh(12));if(le in _.sliceCaseReducersByType)throw new Error(wh(13));return _.sliceCaseReducersByType[le]=K,S},addMatcher(Z,K){return _.sliceMatchers.push({matcher:Z,reducer:K}),S},exposeAction(Z,K){return _.actionCreators[Z]=K,S},exposeCaseReducer(Z,K){return _.sliceCaseReducersByName[Z]=K,S}};g.forEach(Z=>{const K=a[Z],le={reducerName:Z,type:n9(u,Z),createNotation:typeof o.reducers=="function"};o9(K)?c9(le,K,S,t):a9(le,K,S)});function N(){const[Z={},K=[],le=void 0]=typeof o.extraReducers=="function"?UP(o.extraReducers):[o.extraReducers],_e=te(te({},Z),_.sliceCaseReducersByType);return G7(o.initialState,de=>{for(let pe in _e)de.addCase(pe,_e[pe]);for(let pe of _.sliceMatchers)de.addMatcher(pe.matcher,pe.reducer);for(let pe of K)de.addMatcher(pe.matcher,pe.reducer);le&&de.addDefaultCase(le)})}const A=Z=>Z,E=new Map,D=new WeakMap;let B;function $(Z,K){return B||(B=N()),B(Z,K)}function G(){return B||(B=N()),B.getInitialState()}function W(Z,K=!1){function le(de){let pe=de[Z];return typeof pe=="undefined"&&K&&(pe=ub(D,le,G)),pe}function _e(de=A){const pe=ub(E,K,()=>new WeakMap);return ub(pe,de,()=>{var He;const Oe={};for(const[We,st]of Object.entries((He=o.selectors)!=null?He:{}))Oe[We]=s9(st,de,()=>ub(D,de,G),K);return Oe})}return{reducerPath:Z,getSelectors:_e,get selectors(){return _e(le)},selectSlice:le}}const J=Me(te({name:u,reducer:$,actions:_.actionCreators,caseReducers:_.sliceCaseReducersByName,getInitialState:G},W(c)),{injectInto(Z,_e={}){var de=_e,{reducerPath:K}=de,le=en(de,["reducerPath"]);const pe=K!=null?K:c;return Z.inject({reducerPath:pe,reducer:$},le),te(te({},J),W(pe,!0))}});return J}}function s9(e,t,n,i){function o(u,...c){let a=t(u);return typeof a=="undefined"&&i&&(a=n()),e(a,...c)}return o.unwrapped=e,o}var Cy=i9();function r9(){function e(t,n){return te({_reducerDefinitionType:"asyncThunk",payloadCreator:t},n)}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function a9({type:e,reducerName:t,createNotation:n},i,o){let u,c;if("reducer"in i){if(n&&!l9(i))throw new Error(wh(17));u=i.reducer,c=i.prepare}else u=i;o.addCase(e,u).exposeCaseReducer(t,u).exposeAction(t,c?ox(e,c):ox(e))}function o9(e){return e._reducerDefinitionType==="asyncThunk"}function l9(e){return e._reducerDefinitionType==="reducerWithPrepare"}function c9({type:e,reducerName:t},n,i,o){if(!o)throw new Error(wh(18));const{payloadCreator:u,fulfilled:c,pending:a,rejected:g,settled:_,options:S}=n,N=o(e,u,S);i.exposeAction(t,N),c&&i.addCase(N.fulfilled,c),a&&i.addCase(N.pending,a),g&&i.addCase(N.rejected,g),_&&i.addMatcher(N.settled,_),i.exposeCaseReducer(t,{fulfilled:c||db,pending:a||db,rejected:g||db,settled:_||db})}function db(){}function wh(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function $P(e,t){return function(){return e.apply(t,arguments)}}const{toString:u9}=Object.prototype,{getPrototypeOf:_C}=Object,{iterator:v1,toStringTag:HP}=Symbol,w1=(e=>t=>{const n=u9.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Su=e=>(e=e.toLowerCase(),t=>w1(t)===e),S1=e=>t=>typeof t===e,{isArray:Ty}=Array,Tx=S1("undefined");function Xx(e){return e!==null&&!Tx(e)&&e.constructor!==null&&!Tx(e.constructor)&&hl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const qP=Su("ArrayBuffer");function d9(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&qP(e.buffer),t}const h9=S1("string"),hl=S1("function"),GP=S1("number"),Kx=e=>e!==null&&typeof e=="object",f9=e=>e===!0||e===!1,Xb=e=>{if(w1(e)!=="object")return!1;const t=_C(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(HP in e)&&!(v1 in e)},p9=e=>{if(!Kx(e)||Xx(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},m9=Su("Date"),g9=Su("File"),y9=Su("Blob"),x9=Su("FileList"),_9=e=>Kx(e)&&hl(e.pipe),b9=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||hl(e.append)&&((t=w1(e))==="formdata"||t==="object"&&hl(e.toString)&&e.toString()==="[object FormData]"))},v9=Su("URLSearchParams"),[w9,S9,j9,C9]=["ReadableStream","Request","Response","Headers"].map(Su),T9=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qx(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e=="undefined")return;let i,o;if(typeof e!="object"&&(e=[e]),Ty(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{if(Xx(e))return;const u=n?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;let a;for(i=0;i<c;i++)a=u[i],t.call(null,e[a],a,e)}}function WP(e,t){if(Xx(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const om=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,ZP=e=>!Tx(e)&&e!==om;function ES(){const{caseless:e}=ZP(this)&&this||{},t={},n=(i,o)=>{const u=e&&WP(t,o)||o;Xb(t[u])&&Xb(i)?t[u]=ES(t[u],i):Xb(i)?t[u]=ES({},i):Ty(i)?t[u]=i.slice():t[u]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Qx(arguments[i],n);return t}const k9=(e,t,n,{allOwnKeys:i}={})=>(Qx(t,(o,u)=>{n&&hl(o)?e[u]=$P(o,n):e[u]=o},{allOwnKeys:i}),e),N9=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),M9=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},E9=(e,t,n,i)=>{let o,u,c;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),u=o.length;u-- >0;)c=o[u],(!i||i(c,e,t))&&!a[c]&&(t[c]=e[c],a[c]=!0);e=n!==!1&&_C(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},A9=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},P9=e=>{if(!e)return null;if(Ty(e))return e;let t=e.length;if(!GP(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},R9=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&_C(Uint8Array)),D9=(e,t)=>{const i=(e&&e[v1]).call(e);let o;for(;(o=i.next())&&!o.done;){const u=o.value;t.call(e,u[0],u[1])}},z9=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},I9=Su("HTMLFormElement"),O9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),uN=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),L9=Su("RegExp"),YP=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Qx(n,(o,u)=>{let c;(c=t(o,u,e))!==!1&&(i[u]=c||o)}),Object.defineProperties(e,i)},F9=e=>{YP(e,(t,n)=>{if(hl(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(hl(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},B9=(e,t)=>{const n={},i=o=>{o.forEach(u=>{n[u]=!0})};return Ty(e)?i(e):i(String(e).split(t)),n},V9=()=>{},U9=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function $9(e){return!!(e&&hl(e.append)&&e[HP]==="FormData"&&e[v1])}const H9=e=>{const t=new Array(10),n=(i,o)=>{if(Kx(i)){if(t.indexOf(i)>=0)return;if(Xx(i))return i;if(!("toJSON"in i)){t[o]=i;const u=Ty(i)?[]:{};return Qx(i,(c,a)=>{const g=n(c,o+1);!Tx(g)&&(u[a]=g)}),t[o]=void 0,u}}return i};return n(e,0)},q9=Su("AsyncFunction"),G9=e=>e&&(Kx(e)||hl(e))&&hl(e.then)&&hl(e.catch),XP=((e,t)=>e?setImmediate:t?((n,i)=>(om.addEventListener("message",({source:o,data:u})=>{o===om&&u===n&&i.length&&i.shift()()},!1),o=>{i.push(o),om.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",hl(om.postMessage)),W9=typeof queueMicrotask!="undefined"?queueMicrotask.bind(om):typeof process!="undefined"&&process.nextTick||XP,Z9=e=>e!=null&&hl(e[v1]),Ft={isArray:Ty,isArrayBuffer:qP,isBuffer:Xx,isFormData:b9,isArrayBufferView:d9,isString:h9,isNumber:GP,isBoolean:f9,isObject:Kx,isPlainObject:Xb,isEmptyObject:p9,isReadableStream:w9,isRequest:S9,isResponse:j9,isHeaders:C9,isUndefined:Tx,isDate:m9,isFile:g9,isBlob:y9,isRegExp:L9,isFunction:hl,isStream:_9,isURLSearchParams:v9,isTypedArray:R9,isFileList:x9,forEach:Qx,merge:ES,extend:k9,trim:T9,stripBOM:N9,inherits:M9,toFlatObject:E9,kindOf:w1,kindOfTest:Su,endsWith:A9,toArray:P9,forEachEntry:D9,matchAll:z9,isHTMLForm:I9,hasOwnProperty:uN,hasOwnProp:uN,reduceDescriptors:YP,freezeMethods:F9,toObjectSet:B9,toCamelCase:O9,noop:V9,toFiniteNumber:U9,findKey:WP,global:om,isContextDefined:ZP,isSpecCompliantForm:$9,toJSONObject:H9,isAsyncFn:q9,isThenable:G9,setImmediate:XP,asap:W9,isIterable:Z9};function ji(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}Ft.inherits(ji,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ft.toJSONObject(this.config),code:this.code,status:this.status}}});const KP=ji.prototype,QP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{QP[e]={value:e}});Object.defineProperties(ji,QP);Object.defineProperty(KP,"isAxiosError",{value:!0});ji.from=(e,t,n,i,o,u)=>{const c=Object.create(KP);return Ft.toFlatObject(e,c,function(g){return g!==Error.prototype},a=>a!=="isAxiosError"),ji.call(c,e.message,t,n,i,o),c.cause=e,c.name=e.name,u&&Object.assign(c,u),c};const Y9=null;function AS(e){return Ft.isPlainObject(e)||Ft.isArray(e)}function JP(e){return Ft.endsWith(e,"[]")?e.slice(0,-2):e}function dN(e,t,n){return e?e.concat(t).map(function(o,u){return o=JP(o),!n&&u?"["+o+"]":o}).join(n?".":""):t}function X9(e){return Ft.isArray(e)&&!e.some(AS)}const K9=Ft.toFlatObject(Ft,{},null,function(t){return/^is[A-Z]/.test(t)});function j1(e,t,n){if(!Ft.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ft.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,$){return!Ft.isUndefined($[B])});const i=n.metaTokens,o=n.visitor||S,u=n.dots,c=n.indexes,g=(n.Blob||typeof Blob!="undefined"&&Blob)&&Ft.isSpecCompliantForm(t);if(!Ft.isFunction(o))throw new TypeError("visitor must be a function");function _(D){if(D===null)return"";if(Ft.isDate(D))return D.toISOString();if(Ft.isBoolean(D))return D.toString();if(!g&&Ft.isBlob(D))throw new ji("Blob is not supported. Use a Buffer instead.");return Ft.isArrayBuffer(D)||Ft.isTypedArray(D)?g&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function S(D,B,$){let G=D;if(D&&!$&&typeof D=="object"){if(Ft.endsWith(B,"{}"))B=i?B:B.slice(0,-2),D=JSON.stringify(D);else if(Ft.isArray(D)&&X9(D)||(Ft.isFileList(D)||Ft.endsWith(B,"[]"))&&(G=Ft.toArray(D)))return B=JP(B),G.forEach(function(J,Z){!(Ft.isUndefined(J)||J===null)&&t.append(c===!0?dN([B],Z,u):c===null?B:B+"[]",_(J))}),!1}return AS(D)?!0:(t.append(dN($,B,u),_(D)),!1)}const N=[],A=Object.assign(K9,{defaultVisitor:S,convertValue:_,isVisitable:AS});function E(D,B){if(!Ft.isUndefined(D)){if(N.indexOf(D)!==-1)throw Error("Circular reference detected in "+B.join("."));N.push(D),Ft.forEach(D,function(G,W){(!(Ft.isUndefined(G)||G===null)&&o.call(t,G,Ft.isString(W)?W.trim():W,B,A))===!0&&E(G,B?B.concat(W):[W])}),N.pop()}}if(!Ft.isObject(e))throw new TypeError("data must be an object");return E(e),t}function hN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function bC(e,t){this._pairs=[],e&&j1(e,this,t)}const e5=bC.prototype;e5.append=function(t,n){this._pairs.push([t,n])};e5.toString=function(t){const n=t?function(i){return t.call(this,i,hN)}:hN;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Q9(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function t5(e,t,n){if(!t)return e;const i=n&&n.encode||Q9;Ft.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let u;if(o?u=o(t,n):u=Ft.isURLSearchParams(t)?t.toString():new bC(t,n).toString(i),u){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class fN{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ft.forEach(this.handlers,function(i){i!==null&&t(i)})}}const n5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},J9=typeof URLSearchParams!="undefined"?URLSearchParams:bC,eV=typeof FormData!="undefined"?FormData:null,tV=typeof Blob!="undefined"?Blob:null,nV={isBrowser:!0,classes:{URLSearchParams:J9,FormData:eV,Blob:tV},protocols:["http","https","file","blob","url","data"]},vC=typeof window!="undefined"&&typeof document!="undefined",PS=typeof navigator=="object"&&navigator||void 0,iV=vC&&(!PS||["ReactNative","NativeScript","NS"].indexOf(PS.product)<0),sV=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rV=vC&&window.location.href||"http://localhost",aV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:vC,hasStandardBrowserEnv:iV,hasStandardBrowserWebWorkerEnv:sV,navigator:PS,origin:rV},Symbol.toStringTag,{value:"Module"})),yo=te(te({},aV),nV);function oV(e,t){return j1(e,new yo.classes.URLSearchParams,te({visitor:function(n,i,o,u){return yo.isNode&&Ft.isBuffer(n)?(this.append(i,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function lV(e){return Ft.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function cV(e){const t={},n=Object.keys(e);let i;const o=n.length;let u;for(i=0;i<o;i++)u=n[i],t[u]=e[u];return t}function i5(e){function t(n,i,o,u){let c=n[u++];if(c==="__proto__")return!0;const a=Number.isFinite(+c),g=u>=n.length;return c=!c&&Ft.isArray(o)?o.length:c,g?(Ft.hasOwnProp(o,c)?o[c]=[o[c],i]:o[c]=i,!a):((!o[c]||!Ft.isObject(o[c]))&&(o[c]=[]),t(n,i,o[c],u)&&Ft.isArray(o[c])&&(o[c]=cV(o[c])),!a)}if(Ft.isFormData(e)&&Ft.isFunction(e.entries)){const n={};return Ft.forEachEntry(e,(i,o)=>{t(lV(i),o,n,0)}),n}return null}function uV(e,t,n){if(Ft.isString(e))try{return(t||JSON.parse)(e),Ft.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Jx={transitional:n5,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,u=Ft.isObject(t);if(u&&Ft.isHTMLForm(t)&&(t=new FormData(t)),Ft.isFormData(t))return o?JSON.stringify(i5(t)):t;if(Ft.isArrayBuffer(t)||Ft.isBuffer(t)||Ft.isStream(t)||Ft.isFile(t)||Ft.isBlob(t)||Ft.isReadableStream(t))return t;if(Ft.isArrayBufferView(t))return t.buffer;if(Ft.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(u){if(i.indexOf("application/x-www-form-urlencoded")>-1)return oV(t,this.formSerializer).toString();if((a=Ft.isFileList(t))||i.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return j1(a?{"files[]":t}:t,g&&new g,this.formSerializer)}}return u||o?(n.setContentType("application/json",!1),uV(t)):t}],transformResponse:[function(t){const n=this.transitional||Jx.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Ft.isResponse(t)||Ft.isReadableStream(t))return t;if(t&&Ft.isString(t)&&(i&&!this.responseType||o)){const c=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(c)throw a.name==="SyntaxError"?ji.from(a,ji.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yo.classes.FormData,Blob:yo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ft.forEach(["delete","get","head","post","put","patch"],e=>{Jx.headers[e]={}});const dV=Ft.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hV=e=>{const t={};let n,i,o;return e&&e.split(`
`).forEach(function(c){o=c.indexOf(":"),n=c.substring(0,o).trim().toLowerCase(),i=c.substring(o+1).trim(),!(!n||t[n]&&dV[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},pN=Symbol("internals");function I0(e){return e&&String(e).trim().toLowerCase()}function Kb(e){return e===!1||e==null?e:Ft.isArray(e)?e.map(Kb):String(e)}function fV(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const pV=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Yw(e,t,n,i,o){if(Ft.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!Ft.isString(t)){if(Ft.isString(i))return t.indexOf(i)!==-1;if(Ft.isRegExp(i))return i.test(t)}}function mV(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function gV(e,t){const n=Ft.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,u,c){return this[i].call(this,t,o,u,c)},configurable:!0})})}let fl=class{constructor(t){t&&this.set(t)}set(t,n,i){const o=this;function u(a,g,_){const S=I0(g);if(!S)throw new Error("header name must be a non-empty string");const N=Ft.findKey(o,S);(!N||o[N]===void 0||_===!0||_===void 0&&o[N]!==!1)&&(o[N||g]=Kb(a))}const c=(a,g)=>Ft.forEach(a,(_,S)=>u(_,S,g));if(Ft.isPlainObject(t)||t instanceof this.constructor)c(t,n);else if(Ft.isString(t)&&(t=t.trim())&&!pV(t))c(hV(t),n);else if(Ft.isObject(t)&&Ft.isIterable(t)){let a={},g,_;for(const S of t){if(!Ft.isArray(S))throw TypeError("Object iterator must return a key-value pair");a[_=S[0]]=(g=a[_])?Ft.isArray(g)?[...g,S[1]]:[g,S[1]]:S[1]}c(a,n)}else t!=null&&u(n,t,i);return this}get(t,n){if(t=I0(t),t){const i=Ft.findKey(this,t);if(i){const o=this[i];if(!n)return o;if(n===!0)return fV(o);if(Ft.isFunction(n))return n.call(this,o,i);if(Ft.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=I0(t),t){const i=Ft.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Yw(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let o=!1;function u(c){if(c=I0(c),c){const a=Ft.findKey(i,c);a&&(!n||Yw(i,i[a],a,n))&&(delete i[a],o=!0)}}return Ft.isArray(t)?t.forEach(u):u(t),o}clear(t){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const u=n[i];(!t||Yw(this,this[u],u,t,!0))&&(delete this[u],o=!0)}return o}normalize(t){const n=this,i={};return Ft.forEach(this,(o,u)=>{const c=Ft.findKey(i,u);if(c){n[c]=Kb(o),delete n[u];return}const a=t?mV(u):String(u).trim();a!==u&&delete n[u],n[a]=Kb(o),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ft.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&Ft.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[pN]=this[pN]={accessors:{}}).accessors,o=this.prototype;function u(c){const a=I0(c);i[a]||(gV(o,c),i[a]=!0)}return Ft.isArray(t)?t.forEach(u):u(t),this}};fl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ft.reduceDescriptors(fl.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});Ft.freezeMethods(fl);function Xw(e,t){const n=this||Jx,i=t||n,o=fl.from(i.headers);let u=i.data;return Ft.forEach(e,function(a){u=a.call(n,u,o.normalize(),t?t.status:void 0)}),o.normalize(),u}function s5(e){return!!(e&&e.__CANCEL__)}function ky(e,t,n){ji.call(this,e==null?"canceled":e,ji.ERR_CANCELED,t,n),this.name="CanceledError"}Ft.inherits(ky,ji,{__CANCEL__:!0});function r5(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new ji("Request failed with status code "+n.status,[ji.ERR_BAD_REQUEST,ji.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function yV(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function xV(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o=0,u=0,c;return t=t!==void 0?t:1e3,function(g){const _=Date.now(),S=i[u];c||(c=_),n[o]=g,i[o]=_;let N=u,A=0;for(;N!==o;)A+=n[N++],N=N%e;if(o=(o+1)%e,o===u&&(u=(u+1)%e),_-c<t)return;const E=S&&_-S;return E?Math.round(A*1e3/E):void 0}}function _V(e,t){let n=0,i=1e3/t,o,u;const c=(_,S=Date.now())=>{n=S,o=null,u&&(clearTimeout(u),u=null),e(..._)};return[(..._)=>{const S=Date.now(),N=S-n;N>=i?c(_,S):(o=_,u||(u=setTimeout(()=>{u=null,c(o)},i-N)))},()=>o&&c(o)]}const Ov=(e,t,n=3)=>{let i=0;const o=xV(50,250);return _V(u=>{const c=u.loaded,a=u.lengthComputable?u.total:void 0,g=c-i,_=o(g),S=c<=a;i=c;const N={loaded:c,total:a,progress:a?c/a:void 0,bytes:g,rate:_||void 0,estimated:_&&a&&S?(a-c)/_:void 0,event:u,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(N)},n)},mN=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},gN=e=>(...t)=>Ft.asap(()=>e(...t)),bV=yo.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,yo.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(yo.origin),yo.navigator&&/(msie|trident)/i.test(yo.navigator.userAgent)):()=>!0,vV=yo.hasStandardBrowserEnv?{write(e,t,n,i,o,u){const c=[e+"="+encodeURIComponent(t)];Ft.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),Ft.isString(i)&&c.push("path="+i),Ft.isString(o)&&c.push("domain="+o),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wV(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function SV(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function a5(e,t,n){let i=!wV(t);return e&&(i||n==!1)?SV(e,t):t}const yN=e=>e instanceof fl?te({},e):e;function jm(e,t){t=t||{};const n={};function i(_,S,N,A){return Ft.isPlainObject(_)&&Ft.isPlainObject(S)?Ft.merge.call({caseless:A},_,S):Ft.isPlainObject(S)?Ft.merge({},S):Ft.isArray(S)?S.slice():S}function o(_,S,N,A){if(Ft.isUndefined(S)){if(!Ft.isUndefined(_))return i(void 0,_,N,A)}else return i(_,S,N,A)}function u(_,S){if(!Ft.isUndefined(S))return i(void 0,S)}function c(_,S){if(Ft.isUndefined(S)){if(!Ft.isUndefined(_))return i(void 0,_)}else return i(void 0,S)}function a(_,S,N){if(N in t)return i(_,S);if(N in e)return i(void 0,_)}const g={url:u,method:u,data:u,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:a,headers:(_,S,N)=>o(yN(_),yN(S),N,!0)};return Ft.forEach(Object.keys(te(te({},e),t)),function(S){const N=g[S]||o,A=N(e[S],t[S],S);Ft.isUndefined(A)&&N!==a||(n[S]=A)}),n}const o5=e=>{const t=jm({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:u,headers:c,auth:a}=t;t.headers=c=fl.from(c),t.url=t5(a5(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&c.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let g;if(Ft.isFormData(n)){if(yo.hasStandardBrowserEnv||yo.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((g=c.getContentType())!==!1){const[_,...S]=g?g.split(";").map(N=>N.trim()).filter(Boolean):[];c.setContentType([_||"multipart/form-data",...S].join("; "))}}if(yo.hasStandardBrowserEnv&&(i&&Ft.isFunction(i)&&(i=i(t)),i||i!==!1&&bV(t.url))){const _=o&&u&&vV.read(u);_&&c.set(o,_)}return t},jV=typeof XMLHttpRequest!="undefined",CV=jV&&function(e){return new Promise(function(n,i){const o=o5(e);let u=o.data;const c=fl.from(o.headers).normalize();let{responseType:a,onUploadProgress:g,onDownloadProgress:_}=o,S,N,A,E,D;function B(){E&&E(),D&&D(),o.cancelToken&&o.cancelToken.unsubscribe(S),o.signal&&o.signal.removeEventListener("abort",S)}let $=new XMLHttpRequest;$.open(o.method.toUpperCase(),o.url,!0),$.timeout=o.timeout;function G(){if(!$)return;const J=fl.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),K={data:!a||a==="text"||a==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:J,config:e,request:$};r5(function(_e){n(_e),B()},function(_e){i(_e),B()},K),$=null}"onloadend"in $?$.onloadend=G:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(G)},$.onabort=function(){$&&(i(new ji("Request aborted",ji.ECONNABORTED,e,$)),$=null)},$.onerror=function(){i(new ji("Network Error",ji.ERR_NETWORK,e,$)),$=null},$.ontimeout=function(){let Z=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const K=o.transitional||n5;o.timeoutErrorMessage&&(Z=o.timeoutErrorMessage),i(new ji(Z,K.clarifyTimeoutError?ji.ETIMEDOUT:ji.ECONNABORTED,e,$)),$=null},u===void 0&&c.setContentType(null),"setRequestHeader"in $&&Ft.forEach(c.toJSON(),function(Z,K){$.setRequestHeader(K,Z)}),Ft.isUndefined(o.withCredentials)||($.withCredentials=!!o.withCredentials),a&&a!=="json"&&($.responseType=o.responseType),_&&([A,D]=Ov(_,!0),$.addEventListener("progress",A)),g&&$.upload&&([N,E]=Ov(g),$.upload.addEventListener("progress",N),$.upload.addEventListener("loadend",E)),(o.cancelToken||o.signal)&&(S=J=>{$&&(i(!J||J.type?new ky(null,e,$):J),$.abort(),$=null)},o.cancelToken&&o.cancelToken.subscribe(S),o.signal&&(o.signal.aborted?S():o.signal.addEventListener("abort",S)));const W=yV(o.url);if(W&&yo.protocols.indexOf(W)===-1){i(new ji("Unsupported protocol "+W+":",ji.ERR_BAD_REQUEST,e));return}$.send(u||null)})},TV=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,o;const u=function(_){if(!o){o=!0,a();const S=_ instanceof Error?_:this.reason;i.abort(S instanceof ji?S:new ky(S instanceof Error?S.message:S))}};let c=t&&setTimeout(()=>{c=null,u(new ji(`timeout ${t} of ms exceeded`,ji.ETIMEDOUT))},t);const a=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(u):_.removeEventListener("abort",u)}),e=null)};e.forEach(_=>_.addEventListener("abort",u));const{signal:g}=i;return g.unsubscribe=()=>Ft.asap(a),g}},kV=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,o;for(;i<n;)o=i+t,yield e.slice(i,o),i=o},NV=function(e,t){return k0(this,null,function*(){try{for(var n=vw(MV(e)),i,o,u;i=!(o=yield new au(n.next())).done;i=!1){const c=o.value;yield*N0(kV(c,t))}}catch(o){u=[o]}finally{try{i&&(o=n.return)&&(yield new au(o.call(n)))}finally{if(u)throw u[0]}}})},MV=function(e){return k0(this,null,function*(){if(e[Symbol.asyncIterator]){yield*N0(e);return}const t=e.getReader();try{for(;;){const{done:n,value:i}=yield new au(t.read());if(n)break;yield i}}finally{yield new au(t.cancel())}})},xN=(e,t,n,i)=>{const o=NV(e,t);let u=0,c,a=_=>{c||(c=!0,i&&i(_))};return new ReadableStream({pull(_){return Ht(this,null,function*(){try{const{done:S,value:N}=yield o.next();if(S){a(),_.close();return}let A=N.byteLength;if(n){let E=u+=A;n(E)}_.enqueue(new Uint8Array(N))}catch(S){throw a(S),S}})},cancel(_){return a(_),o.return()}},{highWaterMark:2})},C1=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",l5=C1&&typeof ReadableStream=="function",EV=C1&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):e=>Ht(null,null,function*(){return new Uint8Array(yield new Response(e).arrayBuffer())})),c5=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},AV=l5&&c5(()=>{let e=!1;const t=new Request(yo.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),_N=64*1024,RS=l5&&c5(()=>Ft.isReadableStream(new Response("").body)),Lv={stream:RS&&(e=>e.body)};C1&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Lv[t]&&(Lv[t]=Ft.isFunction(e[t])?n=>n[t]():(n,i)=>{throw new ji(`Response type '${t}' is not supported`,ji.ERR_NOT_SUPPORT,i)})})})(new Response);const PV=e=>Ht(null,null,function*(){if(e==null)return 0;if(Ft.isBlob(e))return e.size;if(Ft.isSpecCompliantForm(e))return(yield new Request(yo.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ft.isArrayBufferView(e)||Ft.isArrayBuffer(e))return e.byteLength;if(Ft.isURLSearchParams(e)&&(e=e+""),Ft.isString(e))return(yield EV(e)).byteLength}),RV=(e,t)=>Ht(null,null,function*(){const n=Ft.toFiniteNumber(e.getContentLength());return n==null?PV(t):n}),DV=C1&&(e=>Ht(null,null,function*(){let{url:t,method:n,data:i,signal:o,cancelToken:u,timeout:c,onDownloadProgress:a,onUploadProgress:g,responseType:_,headers:S,withCredentials:N="same-origin",fetchOptions:A}=o5(e);_=_?(_+"").toLowerCase():"text";let E=TV([o,u&&u.toAbortSignal()],c),D;const B=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let $;try{if(g&&AV&&n!=="get"&&n!=="head"&&($=yield RV(S,i))!==0){let K=new Request(t,{method:"POST",body:i,duplex:"half"}),le;if(Ft.isFormData(i)&&(le=K.headers.get("content-type"))&&S.setContentType(le),K.body){const[_e,de]=mN($,Ov(gN(g)));i=xN(K.body,_N,_e,de)}}Ft.isString(N)||(N=N?"include":"omit");const G="credentials"in Request.prototype;D=new Request(t,Me(te({},A),{signal:E,method:n.toUpperCase(),headers:S.normalize().toJSON(),body:i,duplex:"half",credentials:G?N:void 0}));let W=yield fetch(D,A);const J=RS&&(_==="stream"||_==="response");if(RS&&(a||J&&B)){const K={};["status","statusText","headers"].forEach(pe=>{K[pe]=W[pe]});const le=Ft.toFiniteNumber(W.headers.get("content-length")),[_e,de]=a&&mN(le,Ov(gN(a),!0))||[];W=new Response(xN(W.body,_N,_e,()=>{de&&de(),B&&B()}),K)}_=_||"text";let Z=yield Lv[Ft.findKey(Lv,_)||"text"](W,e);return!J&&B&&B(),yield new Promise((K,le)=>{r5(K,le,{data:Z,headers:fl.from(W.headers),status:W.status,statusText:W.statusText,config:e,request:D})})}catch(G){throw B&&B(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new ji("Network Error",ji.ERR_NETWORK,e,D),{cause:G.cause||G}):ji.from(G,G&&G.code,e,D)}})),DS={http:Y9,xhr:CV,fetch:DV};Ft.forEach(DS,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const bN=e=>`- ${e}`,zV=e=>Ft.isFunction(e)||e===null||e===!1,u5={getAdapter:e=>{e=Ft.isArray(e)?e:[e];const{length:t}=e;let n,i;const o={};for(let u=0;u<t;u++){n=e[u];let c;if(i=n,!zV(n)&&(i=DS[(c=String(n)).toLowerCase()],i===void 0))throw new ji(`Unknown adapter '${c}'`);if(i)break;o[c||"#"+u]=i}if(!i){const u=Object.entries(o).map(([a,g])=>`adapter ${a} `+(g===!1?"is not supported by the environment":"is not available in the build"));let c=t?u.length>1?`since :
`+u.map(bN).join(`
`):" "+bN(u[0]):"as no adapter specified";throw new ji("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:DS};function Kw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ky(null,e)}function vN(e){return Kw(e),e.headers=fl.from(e.headers),e.data=Xw.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),u5.getAdapter(e.adapter||Jx.adapter)(e).then(function(i){return Kw(e),i.data=Xw.call(e,e.transformResponse,i),i.headers=fl.from(i.headers),i},function(i){return s5(i)||(Kw(e),i&&i.response&&(i.response.data=Xw.call(e,e.transformResponse,i.response),i.response.headers=fl.from(i.response.headers))),Promise.reject(i)})}const d5="1.11.0",T1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{T1[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const wN={};T1.transitional=function(t,n,i){function o(u,c){return"[Axios v"+d5+"] Transitional option '"+u+"'"+c+(i?". "+i:"")}return(u,c,a)=>{if(t===!1)throw new ji(o(c," has been removed"+(n?" in "+n:"")),ji.ERR_DEPRECATED);return n&&!wN[c]&&(wN[c]=!0,console.warn(o(c," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(u,c,a):!0}};T1.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function IV(e,t,n){if(typeof e!="object")throw new ji("options must be an object",ji.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const u=i[o],c=t[u];if(c){const a=e[u],g=a===void 0||c(a,u,e);if(g!==!0)throw new ji("option "+u+" must be "+g,ji.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ji("Unknown option "+u,ji.ERR_BAD_OPTION)}}const Qb={assertOptions:IV,validators:T1},od=Qb.validators;let pm=class{constructor(t){this.defaults=t||{},this.interceptors={request:new fN,response:new fN}}request(t,n){return Ht(this,null,function*(){try{return yield this._request(t,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const u=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?u&&!String(i.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+u):i.stack=u}catch(c){}}throw i}})}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=jm(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:u}=n;i!==void 0&&Qb.assertOptions(i,{silentJSONParsing:od.transitional(od.boolean),forcedJSONParsing:od.transitional(od.boolean),clarifyTimeoutError:od.transitional(od.boolean)},!1),o!=null&&(Ft.isFunction(o)?n.paramsSerializer={serialize:o}:Qb.assertOptions(o,{encode:od.function,serialize:od.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Qb.assertOptions(n,{baseUrl:od.spelling("baseURL"),withXsrfToken:od.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=u&&Ft.merge(u.common,u[n.method]);u&&Ft.forEach(["delete","get","head","post","put","patch","common"],D=>{delete u[D]}),n.headers=fl.concat(c,u);const a=[];let g=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(n)===!1||(g=g&&B.synchronous,a.unshift(B.fulfilled,B.rejected))});const _=[];this.interceptors.response.forEach(function(B){_.push(B.fulfilled,B.rejected)});let S,N=0,A;if(!g){const D=[vN.bind(this),void 0];for(D.unshift(...a),D.push(..._),A=D.length,S=Promise.resolve(n);N<A;)S=S.then(D[N++],D[N++]);return S}A=a.length;let E=n;for(N=0;N<A;){const D=a[N++],B=a[N++];try{E=D(E)}catch($){B.call(this,$);break}}try{S=vN.call(this,E)}catch(D){return Promise.reject(D)}for(N=0,A=_.length;N<A;)S=S.then(_[N++],_[N++]);return S}getUri(t){t=jm(this.defaults,t);const n=a5(t.baseURL,t.url,t.allowAbsoluteUrls);return t5(n,t.params,t.paramsSerializer)}};Ft.forEach(["delete","get","head","options"],function(t){pm.prototype[t]=function(n,i){return this.request(jm(i||{},{method:t,url:n,data:(i||{}).data}))}});Ft.forEach(["post","put","patch"],function(t){function n(i){return function(u,c,a){return this.request(jm(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:u,data:c}))}}pm.prototype[t]=n(),pm.prototype[t+"Form"]=n(!0)});let OV=class h5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(u){n=u});const i=this;this.promise.then(o=>{if(!i._listeners)return;let u=i._listeners.length;for(;u-- >0;)i._listeners[u](o);i._listeners=null}),this.promise.then=o=>{let u;const c=new Promise(a=>{i.subscribe(a),u=a}).then(o);return c.cancel=function(){i.unsubscribe(u)},c},t(function(u,c,a){i.reason||(i.reason=new ky(u,c,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new h5(function(o){t=o}),cancel:t}}};function LV(e){return function(n){return e.apply(null,n)}}function FV(e){return Ft.isObject(e)&&e.isAxiosError===!0}const zS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zS).forEach(([e,t])=>{zS[t]=e});function f5(e){const t=new pm(e),n=$P(pm.prototype.request,t);return Ft.extend(n,pm.prototype,t,{allOwnKeys:!0}),Ft.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return f5(jm(e,o))},n}const Os=f5(Jx);Os.Axios=pm;Os.CanceledError=ky;Os.CancelToken=OV;Os.isCancel=s5;Os.VERSION=d5;Os.toFormData=j1;Os.AxiosError=ji;Os.Cancel=Os.CanceledError;Os.all=function(t){return Promise.all(t)};Os.spread=LV;Os.isAxiosError=FV;Os.mergeConfig=jm;Os.AxiosHeaders=fl;Os.formToJSON=e=>i5(Ft.isHTMLForm(e)?new FormData(e):e);Os.getAdapter=u5.getAdapter;Os.HttpStatusCode=zS;Os.default=Os;const{Axios:Mae,AxiosError:Eae,CanceledError:Aae,isCancel:Pae,CancelToken:Rae,VERSION:Dae,all:zae,Cancel:Iae,isAxiosError:Oae,spread:Lae,toFormData:Fae,AxiosHeaders:Bae,HttpStatusCode:Vae,formToJSON:Uae,getAdapter:$ae,mergeConfig:Hae}=Os,BV="/api/resource",lx=jy("cardBloMePage1/fetch",(n,i)=>Ht(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{const u=yield Os.get(`${BV}/Card Blo Me Page1/${e}`,{withCredentials:!0});return console.log("data...... in slice",e,u),u.data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),p5=Cy({name:"cardBloMePage1",initialState:{data:null,loading:!1,error:null},reducers:{resetCardBloMePage1:e=>{e.data=null,e.loading=!1,e.error=null},updateCardBloMePage1:(e,t)=>{e.data=t.payload}},extraReducers:e=>{e.addCase(lx.pending,t=>{t.loading=!0,t.error=null,t.data=null}).addCase(lx.fulfilled,(t,n)=>{t.loading=!1,t.data=n.payload}).addCase(lx.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||"Failed to fetch doc"})}}),{resetCardBloMePage1:VV,updateCardBloMePage1:qae}=p5.actions,UV=p5.reducer,$V="/api/resource",Jb=jy("cardBloMePage2/fetch",(n,i)=>Ht(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{return(yield Os.get(`${$V}/Card Blo Me Page2/${e}`,{withCredentials:!0})).data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),m5=Cy({name:"cardBloMePage2",initialState:{data:null,loading:!1,error:null},reducers:{resetCardBloMePage2:e=>{e.data=null,e.loading=!1,e.error=null},updateCardBloMePage2:(e,t)=>{e.data=t.payload}},extraReducers:e=>{e.addCase(Jb.pending,t=>{t.loading=!0,t.error=null,t.data=null}).addCase(Jb.fulfilled,(t,n)=>{t.loading=!1,t.data=n.payload}).addCase(Jb.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||"Failed to fetch doc"})}}),{resetCardBloMePage2:HV,updateCardBloMePage2:Gae}=m5.actions,qV=m5.reducer,GV="/api/resource",ev=jy("cardBloMePage3/fetch",(n,i)=>Ht(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{return(yield Os.get(`${GV}/Card Blo Me Page3/${e}`,{withCredentials:!0})).data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),g5=Cy({name:"cardBloMePage3",initialState:{data:null,loading:!1,error:null},reducers:{resetCardBloMePage3:e=>{e.data=null,e.loading=!1,e.error=null},updateCardBloMePage3:(e,t)=>{e.data=t.payload}},extraReducers:e=>{e.addCase(ev.pending,t=>{t.loading=!0,t.error=null,t.data=null}).addCase(ev.fulfilled,(t,n)=>{t.loading=!1,t.data=n.payload}).addCase(ev.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||"Failed to fetch doc"})}}),{resetCardBloMePage3:WV,updateCardBloMePage3:Wae}=g5.actions,ZV=g5.reducer,YV="/api/resource",tv=jy("cardBloMePage4/fetch",(n,i)=>Ht(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{return(yield Os.get(`${YV}/Card Blo Me Page 4/${e}`,{withCredentials:!0})).data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),y5=Cy({name:"cardBloMePage4",initialState:{data:null,loading:!1,error:null},reducers:{resetCardBloMePage4:e=>{e.data=null,e.loading=!1,e.error=null},updateCardBloMePage4:(e,t)=>{e.data=t.payload}},extraReducers:e=>{e.addCase(tv.pending,t=>{t.loading=!0,t.error=null,t.data=null}).addCase(tv.fulfilled,(t,n)=>{t.loading=!1,t.data=n.payload}).addCase(tv.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||"Failed to fetch doc"})}}),{resetCardBloMePage4:XV,updateCardBloMePage4:Zae}=y5.actions,KV=y5.reducer,QV=()=>{const e=is.get("user_image")||"",t=is.get("full_name"),n=is.get("user_id"),{logout:i}=Rm(),[o,u]=L.useState(!1),[c,a]=L.useState(!1),[g,_]=L.useState(!1),[S,N]=L.useState(!1),[A,E]=L.useState(!1),D=L.useRef(null),B=L.useRef(null),$=L.useRef(null),G=Rh(),W=ua();L.useEffect(()=>{const Oe=He=>{D.current&&!D.current.contains(He.target)&&u(!1),B.current&&!B.current.contains(He.target)&&a(!1)};return document.addEventListener("mousedown",Oe),()=>document.removeEventListener("mousedown",Oe)},[]);const J=()=>{u(!o),a(!1)},Z=()=>{a(!c),u(!1)},K=()=>{_(!g)},le=()=>{N(!S)},_e=()=>{console.log("Logging out..."),localStorage.clear(),G(VV()),G(HV()),G(WV()),G(XV()),i(),window.location.href="/mycard/login"},de=()=>t?t.split(" ").map(Oe=>Oe[0]).join("").toUpperCase():"U",pe=[{icon:lC,label:"Social Blo Me",path:"/social_media"},{icon:Dm,label:"Kad Blo Me",path:"/"},{icon:SP,label:"Health Blo Me",path:"/health"},{icon:_P,label:"Bank Blo Me",path:"/bank"},{icon:fC,label:"Trade Blo Me",path:"/trade"},{icon:kP,label:"Academy Blo Me",path:"/academy"},{icon:xP,label:"Legal Blo Me",path:"/legal"},{icon:wP,label:"Career Me",path:"/career"}];return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"relative",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("nav",{className:"backdrop-blur-xl bg-white/80 dark:bg-gray-900/80 border border-white/20 dark:border-gray-700/30 shadow-2xl shadow-black/5 rounded-2xl relative z-40",children:[l.jsxs("div",{className:"hidden lg:flex items-center justify-between px-6 py-4",children:[l.jsx("div",{className:"flex items-center space-x-8",children:l.jsx("div",{className:"relative group",children:l.jsxs("div",{className:`flex items-center transition-all duration-300 ${A?"bg-white dark:bg-gray-800 shadow-lg shadow-blue-500/20 border-blue-500/50":"bg-gray-50/80 dark:bg-gray-800/50 border-gray-200/50 dark:border-gray-700/50 hover:bg-white hover:shadow-md"} border rounded-xl`,children:[l.jsx(ty,{className:`w-5 h-5 ml-4 transition-colors duration-200 ${A?"text-blue-500":"text-gray-400"}`}),l.jsx("input",{type:"text",placeholder:"Search anything...",className:"w-80 px-4 py-3 bg-transparent border-none outline-none text-gray-700 dark:text-gray-200 placeholder-gray-500",onFocus:()=>E(!0),onBlur:()=>E(!1)}),l.jsx("div",{className:"mr-4 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-md",children:l.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"⌘K"})})]})})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsxs("a",{href:"/mycard",className:"group relative p-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-all duration-200",children:[l.jsx(QF,{size:20,className:"text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"}),l.jsx("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 px-2 py-1 rounded-md whitespace-nowrap z-50",children:"Home"})]}),l.jsxs("button",{className:"group relative p-3 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-xl transition-all duration-200",children:[l.jsx(yS,{size:20,className:"text-gray-600 dark:text-gray-400 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors"}),l.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xs font-medium shadow-lg",children:"3"}),l.jsx("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 px-2 py-1 rounded-md whitespace-nowrap z-50",children:"Notifications"})]}),l.jsxs("button",{onClick:()=>W("/chat"),className:"group relative p-3 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-all duration-200",children:[l.jsx(CP,{size:20,className:"text-gray-600 dark:text-gray-400 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors"}),l.jsx("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 dark:text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 px-2 py-1 rounded-md whitespace-nowrap z-50",children:"Messages"})]})]}),l.jsx("div",{className:"w-px h-8 bg-gray-200 dark:bg-gray-700 mx-2"}),l.jsxs("div",{className:"relative",ref:B,children:[l.jsxs("button",{onClick:Z,className:`group relative p-3 rounded-xl transition-all duration-200 ${c?"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400":"hover:bg-purple-50 dark:hover:bg-purple-900/20 text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400"}`,children:[l.jsx(GF,{size:20,className:"transition-colors"}),l.jsx(Mv,{size:12,className:`absolute -bottom-1 -right-1 transition-transform ${c?"rotate-180":""}`})]}),c&&l.jsxs("div",{className:"absolute top-full right-0 mt-3 w-72 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/30 py-3 animate-in slide-in-from-top-2 duration-200 z-[60]",children:[l.jsx("div",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-800",children:l.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"Applications"})}),l.jsxs("a",{href:"/app",target:"_blank",className:"flex items-center px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors group",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center mr-3 group-hover:scale-105 transition-transform",children:l.jsx("span",{className:"text-white font-bold text-sm",children:"F"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Frappe"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Framework"})]})]}),l.jsxs("a",{href:"/raven",target:"_blank",className:"flex items-center px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors group",children:[l.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center mr-3 group-hover:scale-105 transition-transform",children:l.jsx("span",{className:"text-white font-bold text-sm",children:"R"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Raven"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Chat App"})]})]})]})]}),l.jsxs("div",{className:"relative",ref:D,children:[l.jsxs("button",{className:`flex items-center space-x-3 p-2 pr-3 rounded-xl transition-all duration-200 ${o?"bg-blue-50 dark:bg-blue-900/20 shadow-lg":"hover:bg-gray-50 dark:hover:bg-gray-800/50"}`,onClick:J,children:[e?l.jsx("div",{className:"w-9 h-9 overflow-hidden rounded-xl border-2 border-white shadow-lg",children:l.jsx("img",{src:e||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face",alt:"Profile",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-bold shadow-lg",children:de()}),l.jsxs("div",{className:"hidden xl:block text-left",children:[l.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 leading-tight",children:t}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-tight",children:"Online"})]}),l.jsx(Mv,{size:16,className:`text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&l.jsxs("div",{className:"absolute top-full right-0 mt-3 w-80 bg-white dark:bg-gray-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/30 py-3 animate-in slide-in-from-top-2 duration-200 z-[60]",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-800",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[e?l.jsx("div",{className:"w-14 h-14 overflow-hidden rounded-2xl border-3 border-white shadow-xl",children:l.jsx("img",{src:e,alt:"Profile",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold shadow-xl",children:de()}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:t}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n}),l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 mt-1",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Online"]})]})]})}),l.jsx("div",{className:"py-2",children:l.jsxs("button",{onClick:_e,className:"flex items-center w-full text-left px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors group",children:[l.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center mr-3 group-hover:scale-105 transition-transform",children:l.jsx(_S,{size:18,className:"text-red-600 dark:text-red-400"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Sign out"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sign out of your account"})]})]})})]})]})]})]}),l.jsxs("div",{className:"flex lg:hidden items-center justify-between px-4 py-3",children:[l.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",onClick:K,children:l.jsx(oB,{size:24,className:"text-gray-700 dark:text-gray-300"})}),l.jsx("div",{className:"flex items-center space-x-2"}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",onClick:le,children:l.jsx(ty,{size:20,className:"text-gray-700 dark:text-gray-300"})}),l.jsxs("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors relative",children:[l.jsx(yS,{size:20,className:"text-gray-700 dark:text-gray-300"}),l.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-white text-xs",children:"3"})]}),l.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",onClick:J,children:l.jsx("div",{className:"w-8 h-8 overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700",children:l.jsx("img",{src:e,alt:"Profile",className:"w-full h-full object-cover"})})})]})]}),S&&l.jsx("div",{className:"lg:hidden px-4 pb-4 animate-in slide-in-from-top-2 duration-200",children:l.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[l.jsx(ty,{size:18,className:"text-blue-500 ml-4"}),l.jsx("input",{type:"text",placeholder:"Search anything...",className:"flex-1 px-4 py-3 bg-transparent border-none outline-none text-gray-700 dark:text-gray-200 placeholder-gray-500"}),l.jsx("button",{onClick:le,className:"p-2 mr-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:l.jsx(Sx,{size:18,className:"text-gray-500"})})]})})]})})}),g&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden",onClick:K}),l.jsxs("div",{ref:$,className:"fixed top-0 left-0 h-full w-80 max-w-[85vw] bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl shadow-2xl z-50 transition-transform animate-in slide-in-from-left animate-out slide-out-from-left duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-gray-800",children:[l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx("img",{className:"h-16",src:"/assets/erpnext/images/mycard-logo.png",alt:"MyCard Logo"})}),l.jsx("button",{onClick:K,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl",children:l.jsx(Sx,{size:24,className:"text-gray-700 dark:text-gray-300"})})]}),l.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-800",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-16 overflow-hidden rounded-2xl border-3 border-white shadow-xl",children:l.jsx("img",{src:e,alt:"Profile",className:"w-full h-full object-cover"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:t}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n}),l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 mt-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Online"]})]})]})}),l.jsxs("div",{className:"py-4",children:[pe.map((Oe,He)=>{const We=location.pathname==="/mycard"+Oe.path;return console.log("active status",location.pathname,Oe.path),l.jsxs(Qs,{to:Oe.path,onClick:()=>_(!1),className:`flex items-center w-full px-6 py-4 text-gray-700 dark:text-gray-300 hover:bg-gray-50 
                  ${We?"text-blue-600 bg-blue-50 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}
                 `,children:[l.jsx(Oe.icon,{size:20,className:"mr-4"}),l.jsx("span",{children:Oe.label})]},He)}),l.jsxs("button",{onClick:_e,className:"flex items-center w-full px-6 py-4 text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20",children:[l.jsx(_S,{size:20,className:"mr-4 text-red-500"}),l.jsx("span",{children:"Sign out"})]})]})]})]})]})},JV=({doctype:e,docname:t,children:n})=>{const{data:i,error:o,isLoading:u,mutate:c}=Ch(e,t,{fields:["*"]});return n({data:i,error:o,isLoading:u,mutate:c})};function eU(e){if(typeof document=="undefined")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const tU=e=>{switch(e){case"success":return sU;case"info":return aU;case"warning":return rU;case"error":return oU;default:return null}},nU=Array(12).fill(0),iU=({visible:e,className:t})=>Rt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Rt.createElement("div",{className:"sonner-spinner"},nU.map((n,i)=>Rt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),sU=Rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Rt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),rU=Rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Rt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),aU=Rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Rt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),oU=Rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Rt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),lU=Rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Rt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Rt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),cU=()=>{const[e,t]=Rt.useState(document.hidden);return Rt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let IS=1;class uU{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const g=t,{message:i}=g,o=en(g,["message"]),u=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:IS++,c=this.toasts.find(_=>_.id===u),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),c?this.toasts=this.toasts.map(_=>_.id===u?(this.publish(Me(te(te({},_),t),{id:u,title:i})),Me(te(te({},_),t),{id:u,dismissible:a,title:i})):_):this.addToast(Me(te({title:i},o),{dismissible:a,id:u})),u},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create(Me(te({},n),{message:t})),this.error=(t,n)=>this.create(Me(te({},n),{message:t,type:"error"})),this.success=(t,n)=>this.create(Me(te({},n),{type:"success",message:t})),this.info=(t,n)=>this.create(Me(te({},n),{type:"info",message:t})),this.warning=(t,n)=>this.create(Me(te({},n),{type:"warning",message:t})),this.loading=(t,n)=>this.create(Me(te({},n),{type:"loading",message:t})),this.promise=(t,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create(Me(te({},n),{promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0})));const o=Promise.resolve(t instanceof Function?t():t);let u=i!==void 0,c;const a=o.then(_=>Ht(this,null,function*(){if(c=["resolve",_],Rt.isValidElement(_))u=!1,this.create({id:i,type:"default",message:_});else if(hU(_)&&!_.ok){u=!1;const N=typeof n.error=="function"?yield n.error(`HTTP error! status: ${_.status}`):n.error,A=typeof n.description=="function"?yield n.description(`HTTP error! status: ${_.status}`):n.description,D=typeof N=="object"&&!Rt.isValidElement(N)?N:{message:N};this.create(te({id:i,type:"error",description:A},D))}else if(_ instanceof Error){u=!1;const N=typeof n.error=="function"?yield n.error(_):n.error,A=typeof n.description=="function"?yield n.description(_):n.description,D=typeof N=="object"&&!Rt.isValidElement(N)?N:{message:N};this.create(te({id:i,type:"error",description:A},D))}else if(n.success!==void 0){u=!1;const N=typeof n.success=="function"?yield n.success(_):n.success,A=typeof n.description=="function"?yield n.description(_):n.description,D=typeof N=="object"&&!Rt.isValidElement(N)?N:{message:N};this.create(te({id:i,type:"success",description:A},D))}})).catch(_=>Ht(this,null,function*(){if(c=["reject",_],n.error!==void 0){u=!1;const S=typeof n.error=="function"?yield n.error(_):n.error,N=typeof n.description=="function"?yield n.description(_):n.description,E=typeof S=="object"&&!Rt.isValidElement(S)?S:{message:S};this.create(te({id:i,type:"error",description:N},E))}})).finally(()=>{u&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),g=()=>new Promise((_,S)=>a.then(()=>c[0]==="reject"?S(c[1]):_(c[1])).catch(S));return typeof i!="string"&&typeof i!="number"?{unwrap:g}:Object.assign(i,{unwrap:g})},this.custom=(t,n)=>{const i=(n==null?void 0:n.id)||IS++;return this.create(te({jsx:t(i),id:i},n)),i},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ll=new uU,dU=(e,t)=>{const n=(t==null?void 0:t.id)||IS++;return ll.addToast(Me(te({title:e},t),{id:n})),n},hU=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",fU=dU,pU=()=>ll.toasts,mU=()=>ll.getActiveToasts(),Ha=Object.assign(fU,{success:ll.success,info:ll.info,warning:ll.warning,error:ll.error,custom:ll.custom,message:ll.message,promise:ll.promise,dismiss:ll.dismiss,loading:ll.loading},{getHistory:pU,getToasts:mU});eU("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function hb(e){return e.label!==void 0}const gU=3,yU="24px",xU="16px",SN=4e3,_U=356,bU=14,vU=45,wU=200;function ld(...e){return e.filter(Boolean).join(" ")}function SU(e){const[t,n]=e.split("-"),i=[];return t&&i.push(t),n&&i.push(n),i}const jU=e=>{var t,n,i,o,u,c,a,g,_;const{invert:S,toast:N,unstyled:A,interacting:E,setHeights:D,visibleToasts:B,heights:$,index:G,toasts:W,expanded:J,removeToast:Z,defaultRichColors:K,closeButton:le,style:_e,cancelButtonStyle:de,actionButtonStyle:pe,className:Oe="",descriptionClassName:He="",duration:We,position:st,gap:At,expandByDefault:vt,classNames:ze,icons:Qe,closeButtonAriaLabel:Je="Close toast"}=e,[Pt,fe]=Rt.useState(null),[Xe,tt]=Rt.useState(null),[Ae,ot]=Rt.useState(!1),[ct,ut]=Rt.useState(!1),[tn,Ge]=Rt.useState(!1),[Ye,zt]=Rt.useState(!1),[Bt,It]=Rt.useState(!1),[Lt,nn]=Rt.useState(0),[_n,Xn]=Rt.useState(0),Gn=Rt.useRef(N.duration||We||SN),gn=Rt.useRef(null),ln=Rt.useRef(null),Ue=G===0,ge=G+1<=B,ve=N.type,ht=N.dismissible!==!1,ft=N.className||"",qt=N.descriptionClassName||"",cn=Rt.useMemo(()=>$.findIndex(Ct=>Ct.toastId===N.id)||0,[$,N.id]),Qt=Rt.useMemo(()=>{var Ct;return(Ct=N.closeButton)!=null?Ct:le},[N.closeButton,le]),xt=Rt.useMemo(()=>N.duration||We||SN,[N.duration,We]),je=Rt.useRef(0),ae=Rt.useRef(0),ie=Rt.useRef(0),be=Rt.useRef(null),[ke,Re]=st.split("-"),Q=Rt.useMemo(()=>$.reduce((Ct,Wt,Vt)=>Vt>=cn?Ct:Ct+Wt.height,0),[$,cn]),nt=cU(),et=N.invert||S,Tt=ve==="loading";ae.current=Rt.useMemo(()=>cn*At+Q,[cn,Q]),Rt.useEffect(()=>{Gn.current=xt},[xt]),Rt.useEffect(()=>{ot(!0)},[]),Rt.useEffect(()=>{const Ct=ln.current;if(Ct){const Wt=Ct.getBoundingClientRect().height;return Xn(Wt),D(Vt=>[{toastId:N.id,height:Wt,position:N.position},...Vt]),()=>D(Vt=>Vt.filter(vn=>vn.toastId!==N.id))}},[D,N.id]),Rt.useLayoutEffect(()=>{if(!Ae)return;const Ct=ln.current,Wt=Ct.style.height;Ct.style.height="auto";const Vt=Ct.getBoundingClientRect().height;Ct.style.height=Wt,Xn(Vt),D(vn=>vn.find(Jn=>Jn.toastId===N.id)?vn.map(Jn=>Jn.toastId===N.id?Me(te({},Jn),{height:Vt}):Jn):[{toastId:N.id,height:Vt,position:N.position},...vn])},[Ae,N.title,N.description,D,N.id,N.jsx,N.action,N.cancel]);const Gt=Rt.useCallback(()=>{ut(!0),nn(ae.current),D(Ct=>Ct.filter(Wt=>Wt.toastId!==N.id)),setTimeout(()=>{Z(N)},wU)},[N,Z,D,ae]);Rt.useEffect(()=>{if(N.promise&&ve==="loading"||N.duration===1/0||N.type==="loading")return;let Ct;return J||E||nt?(()=>{if(ie.current<je.current){const vn=new Date().getTime()-je.current;Gn.current=Gn.current-vn}ie.current=new Date().getTime()})():(()=>{Gn.current!==1/0&&(je.current=new Date().getTime(),Ct=setTimeout(()=>{N.onAutoClose==null||N.onAutoClose.call(N,N),Gt()},Gn.current))})(),()=>clearTimeout(Ct)},[J,E,N,ve,nt,Gt]),Rt.useEffect(()=>{N.delete&&(Gt(),N.onDismiss==null||N.onDismiss.call(N,N))},[Gt,N.delete]);function Ot(){var Ct;if(Qe!=null&&Qe.loading){var Wt;return Rt.createElement("div",{className:ld(ze==null?void 0:ze.loader,N==null||(Wt=N.classNames)==null?void 0:Wt.loader,"sonner-loader"),"data-visible":ve==="loading"},Qe.loading)}return Rt.createElement(iU,{className:ld(ze==null?void 0:ze.loader,N==null||(Ct=N.classNames)==null?void 0:Ct.loader),visible:ve==="loading"})}const bn=N.icon||(Qe==null?void 0:Qe[ve])||tU(ve);var Tn,dt;return Rt.createElement("li",{tabIndex:0,ref:ln,className:ld(Oe,ft,ze==null?void 0:ze.toast,N==null||(t=N.classNames)==null?void 0:t.toast,ze==null?void 0:ze.default,ze==null?void 0:ze[ve],N==null||(n=N.classNames)==null?void 0:n[ve]),"data-sonner-toast":"","data-rich-colors":(Tn=N.richColors)!=null?Tn:K,"data-styled":!(N.jsx||N.unstyled||A),"data-mounted":Ae,"data-promise":!!N.promise,"data-swiped":Bt,"data-removed":ct,"data-visible":ge,"data-y-position":ke,"data-x-position":Re,"data-index":G,"data-front":Ue,"data-swiping":tn,"data-dismissible":ht,"data-type":ve,"data-invert":et,"data-swipe-out":Ye,"data-swipe-direction":Xe,"data-expanded":!!(J||vt&&Ae),"data-testid":N.testId,style:te(te({"--index":G,"--toasts-before":G,"--z-index":W.length-G,"--offset":`${ct?Lt:ae.current}px`,"--initial-height":vt?"auto":`${_n}px`},_e),N.style),onDragEnd:()=>{Ge(!1),fe(null),be.current=null},onPointerDown:Ct=>{Ct.button!==2&&(Tt||!ht||(gn.current=new Date,nn(ae.current),Ct.target.setPointerCapture(Ct.pointerId),Ct.target.tagName!=="BUTTON"&&(Ge(!0),be.current={x:Ct.clientX,y:Ct.clientY})))},onPointerUp:()=>{var Ct,Wt,Vt;if(Ye||!ht)return;be.current=null;const vn=Number(((Ct=ln.current)==null?void 0:Ct.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Gi=Number(((Wt=ln.current)==null?void 0:Wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Jn=new Date().getTime()-((Vt=gn.current)==null?void 0:Vt.getTime()),ai=Pt==="x"?vn:Gi,Hn=Math.abs(ai)/Jn;if(Math.abs(ai)>=vU||Hn>.11){nn(ae.current),N.onDismiss==null||N.onDismiss.call(N,N),tt(Pt==="x"?vn>0?"right":"left":Gi>0?"down":"up"),Gt(),zt(!0);return}else{var Bn,xi;(Bn=ln.current)==null||Bn.style.setProperty("--swipe-amount-x","0px"),(xi=ln.current)==null||xi.style.setProperty("--swipe-amount-y","0px")}It(!1),Ge(!1),fe(null)},onPointerMove:Ct=>{var Wt,Vt,vn;if(!be.current||!ht||((Wt=window.getSelection())==null?void 0:Wt.toString().length)>0)return;const Jn=Ct.clientY-be.current.y,ai=Ct.clientX-be.current.x;var Hn;const Bn=(Hn=e.swipeDirections)!=null?Hn:SU(st);!Pt&&(Math.abs(ai)>1||Math.abs(Jn)>1)&&fe(Math.abs(ai)>Math.abs(Jn)?"x":"y");let xi={x:0,y:0};const Xt=lt=>1/(1.5+Math.abs(lt)/20);if(Pt==="y"){if(Bn.includes("top")||Bn.includes("bottom"))if(Bn.includes("top")&&Jn<0||Bn.includes("bottom")&&Jn>0)xi.y=Jn;else{const lt=Jn*Xt(Jn);xi.y=Math.abs(lt)<Math.abs(Jn)?lt:Jn}}else if(Pt==="x"&&(Bn.includes("left")||Bn.includes("right")))if(Bn.includes("left")&&ai<0||Bn.includes("right")&&ai>0)xi.x=ai;else{const lt=ai*Xt(ai);xi.x=Math.abs(lt)<Math.abs(ai)?lt:ai}(Math.abs(xi.x)>0||Math.abs(xi.y)>0)&&It(!0),(Vt=ln.current)==null||Vt.style.setProperty("--swipe-amount-x",`${xi.x}px`),(vn=ln.current)==null||vn.style.setProperty("--swipe-amount-y",`${xi.y}px`)}},Qt&&!N.jsx&&ve!=="loading"?Rt.createElement("button",{"aria-label":Je,"data-disabled":Tt,"data-close-button":!0,onClick:Tt||!ht?()=>{}:()=>{Gt(),N.onDismiss==null||N.onDismiss.call(N,N)},className:ld(ze==null?void 0:ze.closeButton,N==null||(i=N.classNames)==null?void 0:i.closeButton)},(dt=Qe==null?void 0:Qe.close)!=null?dt:lU):null,(ve||N.icon||N.promise)&&N.icon!==null&&((Qe==null?void 0:Qe[ve])!==null||N.icon)?Rt.createElement("div",{"data-icon":"",className:ld(ze==null?void 0:ze.icon,N==null||(o=N.classNames)==null?void 0:o.icon)},N.promise||N.type==="loading"&&!N.icon?N.icon||Ot():null,N.type!=="loading"?bn:null):null,Rt.createElement("div",{"data-content":"",className:ld(ze==null?void 0:ze.content,N==null||(u=N.classNames)==null?void 0:u.content)},Rt.createElement("div",{"data-title":"",className:ld(ze==null?void 0:ze.title,N==null||(c=N.classNames)==null?void 0:c.title)},N.jsx?N.jsx:typeof N.title=="function"?N.title():N.title),N.description?Rt.createElement("div",{"data-description":"",className:ld(He,qt,ze==null?void 0:ze.description,N==null||(a=N.classNames)==null?void 0:a.description)},typeof N.description=="function"?N.description():N.description):null),Rt.isValidElement(N.cancel)?N.cancel:N.cancel&&hb(N.cancel)?Rt.createElement("button",{"data-button":!0,"data-cancel":!0,style:N.cancelButtonStyle||de,onClick:Ct=>{hb(N.cancel)&&ht&&(N.cancel.onClick==null||N.cancel.onClick.call(N.cancel,Ct),Gt())},className:ld(ze==null?void 0:ze.cancelButton,N==null||(g=N.classNames)==null?void 0:g.cancelButton)},N.cancel.label):null,Rt.isValidElement(N.action)?N.action:N.action&&hb(N.action)?Rt.createElement("button",{"data-button":!0,"data-action":!0,style:N.actionButtonStyle||pe,onClick:Ct=>{hb(N.action)&&(N.action.onClick==null||N.action.onClick.call(N.action,Ct),!Ct.defaultPrevented&&Gt())},className:ld(ze==null?void 0:ze.actionButton,N==null||(_=N.classNames)==null?void 0:_.actionButton)},N.action.label):null)};function jN(){if(typeof window=="undefined"||typeof document=="undefined")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function CU(e,t){const n={};return[e,t].forEach((i,o)=>{const u=o===1,c=u?"--mobile-offset":"--offset",a=u?xU:yU;function g(_){["top","right","bottom","left"].forEach(S=>{n[`${c}-${S}`]=typeof _=="number"?`${_}px`:_})}typeof i=="number"||typeof i=="string"?g(i):typeof i=="object"?["top","right","bottom","left"].forEach(_=>{i[_]===void 0?n[`${c}-${_}`]=a:n[`${c}-${_}`]=typeof i[_]=="number"?`${i[_]}px`:i[_]}):g(a)}),n}const CN=Rt.forwardRef(function(t,n){const{id:i,invert:o,position:u="bottom-right",hotkey:c=["altKey","KeyT"],expand:a,closeButton:g,className:_,offset:S,mobileOffset:N,theme:A="light",richColors:E,duration:D,style:B,visibleToasts:$=gU,toastOptions:G,dir:W=jN(),gap:J=bU,icons:Z,containerAriaLabel:K="Notifications"}=t,[le,_e]=Rt.useState([]),de=Rt.useMemo(()=>i?le.filter(Ae=>Ae.toasterId===i):le.filter(Ae=>!Ae.toasterId),[le,i]),pe=Rt.useMemo(()=>Array.from(new Set([u].concat(de.filter(Ae=>Ae.position).map(Ae=>Ae.position)))),[de,u]),[Oe,He]=Rt.useState([]),[We,st]=Rt.useState(!1),[At,vt]=Rt.useState(!1),[ze,Qe]=Rt.useState(A!=="system"?A:typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Je=Rt.useRef(null),Pt=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),fe=Rt.useRef(null),Xe=Rt.useRef(!1),tt=Rt.useCallback(Ae=>{_e(ot=>{var ct;return(ct=ot.find(ut=>ut.id===Ae.id))!=null&&ct.delete||ll.dismiss(Ae.id),ot.filter(({id:ut})=>ut!==Ae.id)})},[]);return Rt.useEffect(()=>ll.subscribe(Ae=>{if(Ae.dismiss){requestAnimationFrame(()=>{_e(ot=>ot.map(ct=>ct.id===Ae.id?Me(te({},ct),{delete:!0}):ct))});return}setTimeout(()=>{rP.flushSync(()=>{_e(ot=>{const ct=ot.findIndex(ut=>ut.id===Ae.id);return ct!==-1?[...ot.slice(0,ct),te(te({},ot[ct]),Ae),...ot.slice(ct+1)]:[Ae,...ot]})})})}),[le]),Rt.useEffect(()=>{if(A!=="system"){Qe(A);return}if(A==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Qe("dark"):Qe("light")),typeof window=="undefined")return;const Ae=window.matchMedia("(prefers-color-scheme: dark)");try{Ae.addEventListener("change",({matches:ot})=>{Qe(ot?"dark":"light")})}catch(ot){Ae.addListener(({matches:ct})=>{try{Qe(ct?"dark":"light")}catch(ut){console.error(ut)}})}},[A]),Rt.useEffect(()=>{le.length<=1&&st(!1)},[le]),Rt.useEffect(()=>{const Ae=ot=>{var ct;if(c.every(Ge=>ot[Ge]||ot.code===Ge)){var tn;st(!0),(tn=Je.current)==null||tn.focus()}ot.code==="Escape"&&(document.activeElement===Je.current||(ct=Je.current)!=null&&ct.contains(document.activeElement))&&st(!1)};return document.addEventListener("keydown",Ae),()=>document.removeEventListener("keydown",Ae)},[c]),Rt.useEffect(()=>{if(Je.current)return()=>{fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null,Xe.current=!1)}},[Je.current]),Rt.createElement("section",{ref:n,"aria-label":`${K} ${Pt}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},pe.map((Ae,ot)=>{var ct;const[ut,tn]=Ae.split("-");return de.length?Rt.createElement("ol",{key:Ae,dir:W==="auto"?jN():W,tabIndex:-1,ref:Je,className:_,"data-sonner-toaster":!0,"data-sonner-theme":ze,"data-y-position":ut,"data-x-position":tn,style:te(te({"--front-toast-height":`${((ct=Oe[0])==null?void 0:ct.height)||0}px`,"--width":`${_U}px`,"--gap":`${J}px`},B),CU(S,N)),onBlur:Ge=>{Xe.current&&!Ge.currentTarget.contains(Ge.relatedTarget)&&(Xe.current=!1,fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null))},onFocus:Ge=>{Ge.target instanceof HTMLElement&&Ge.target.dataset.dismissible==="false"||Xe.current||(Xe.current=!0,fe.current=Ge.relatedTarget)},onMouseEnter:()=>st(!0),onMouseMove:()=>st(!0),onMouseLeave:()=>{At||st(!1)},onDragEnd:()=>st(!1),onPointerDown:Ge=>{Ge.target instanceof HTMLElement&&Ge.target.dataset.dismissible==="false"||vt(!0)},onPointerUp:()=>vt(!1)},de.filter(Ge=>!Ge.position&&ot===0||Ge.position===Ae).map((Ge,Ye)=>{var zt,Bt;return Rt.createElement(jU,{key:Ge.id,icons:Z,index:Ye,toast:Ge,defaultRichColors:E,duration:(zt=G==null?void 0:G.duration)!=null?zt:D,className:G==null?void 0:G.className,descriptionClassName:G==null?void 0:G.descriptionClassName,invert:o,visibleToasts:$,closeButton:(Bt=G==null?void 0:G.closeButton)!=null?Bt:g,interacting:At,position:Ae,style:G==null?void 0:G.style,unstyled:G==null?void 0:G.unstyled,classNames:G==null?void 0:G.classNames,cancelButtonStyle:G==null?void 0:G.cancelButtonStyle,actionButtonStyle:G==null?void 0:G.actionButtonStyle,closeButtonAriaLabel:G==null?void 0:G.closeButtonAriaLabel,removeToast:tt,toasts:de.filter(It=>It.position==Ge.position),heights:Oe.filter(It=>It.position==Ge.position),setHeights:He,expandByDefault:a,gap:J,expanded:We,swipeDirections:t.swipeDirections})})):null}))}),TU=({announcementName:e,mutateAnnouncements:t})=>{const{currentUser:n}=Rm(),{createDoc:i}=xy(),{deleteDoc:o}=kO(),[u,c]=L.useState(!1),[a,g]=L.useState(null),{data:_,mutate:S}=md("custom.mycard.doctype.announcements.fetch_likes.get_likes",{announcement_name:e});L.useEffect(()=>{if(_!=null&&_.message){const D=_.message.find(B=>B.user_name===n);c(!!D),g((D==null?void 0:D.name)||null)}else c(!1),g(null)},[_,n]);const N=L.useCallback(()=>Ht(null,null,function*(){try{const D=yield i("Announcement Likes",{parent:e,parentfield:"likes",parenttype:"Announcements",user_name:n});D!=null&&D.name&&(g(D.name),c(!0),Ha.success("You liked this post!")),t(),S()}catch(D){console.error("Error liking post:",D)}}),[e,i,n,t,S]),A=L.useCallback(()=>Ht(null,null,function*(){if(a)try{const D=yield o("Announcement Likes",a);(D==null?void 0:D.data)==="ok"&&(c(!1),g(null),Ha.success("You unliked this post!"),t(),S())}catch(D){console.error("Error unliking post:",D),(D.httpStatus===403||D.httpStatus===404)&&(c(!1),g(null),t())}}),[a,o,t,S]),E=()=>l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})});return l.jsxs("button",{onClick:u?A:N,className:`flex items-center ${u?"text-blue-600":"text-gray-600"} hover:text-blue-600 transition-colors`,"aria-label":u?"Unlike this post":"Like this post",children:[l.jsx(E,{}),l.jsx("span",{className:"ml-2",children:u?"Unlike":"Like"})]})},kU=()=>{const[e,t]=L.useState(""),[n,i]=L.useState(!1),[o,u]=L.useState(null),[c,a]=L.useState(null),[g,_]=L.useState(null),[S,N]=L.useState({}),[A,E]=L.useState({}),[D,B]=L.useState({}),[$,G]=L.useState("Top"),[W,J]=L.useState(new Set),{currentUser:Z}=Rm(),K=L.useRef(null),[le,_e]=L.useState(!1),{data:de,error:pe,mutate:Oe}=Cv("Announcements",{fields:["*"],orderBy:{field:"creation",order:"desc"}}),{data:He,error:We,mutate:st}=Cv("Comments",{fields:["*"],orderBy:{field:"creation",order:"desc"}}),[At,vt]=L.useState({});L.useEffect(()=>{if(He){const Ge={};He.forEach(Ye=>{if(Ye.a_id){Ge[Ye.a_id]||(Ge[Ye.a_id]=[]);const zt=Me(te({},Ye),{replies:[]});Ge[Ye.a_id].push(zt)}}),Object.keys(Ge).forEach(Ye=>{const zt=Ge[Ye],Bt=zt.filter(Lt=>!Lt.c_id);zt.filter(Lt=>Lt.c_id).forEach(Lt=>{const nn=Bt.find(_n=>_n.name===Lt.c_id);nn&&nn.replies.push(Lt)}),Ge[Ye]=Bt}),vt(Ge)}},[He]);const{createDoc:ze}=xy(),{upload:Qe,reset:Je}=Kj(),Pt=Ge=>Ht(null,null,function*(){const Ye=Ge.target.files[0];if(Ye){const zt=Ye.type.split("/")[0];if(zt==="image"||zt==="video"){u(Ye),_(zt);const Bt=new FileReader;Bt.onloadend=()=>{a(Bt.result)},Bt.readAsDataURL(Ye)}else Ha.error("Please select an image or video file.")}}),fe=Ge=>{K.current&&(K.current.accept=Ge==="image"?"image/*":"video/*",K.current.click())},Xe=()=>Ht(null,null,function*(){if(!(!e.trim()&&!o)){i(!0);try{let Ge=null,Ye=null;if(o)try{Ye=g==="image"?"image":"video",Ge=(yield Qe(o,{isPrivate:!1,doctype:"Announcements",fieldname:Ye})).file_url,console.log(`${g} uploaded:`,Ge),Je()}catch(Lt){console.error(`Error uploading ${g}:`,Lt),Ha.error(`Error uploading ${g}`)}const zt=is.get("full_name")||Z||"Anonymous",Bt=is.get("user_image")||"",It={announcements:e,user_name:zt,image_url:Bt,media_type:g,user_details:[{user_name:zt,image_url:Bt}]};g==="image"?It.image=Ge:g==="video"&&(It.video=Ge),yield ze("Announcements",It),Oe(),Ha.success("Post shared successfully!"),t(""),u(null),a(null),_(null)}catch(Ge){console.error("Error creating announcement:",Ge),Ha.error("Error creating post")}finally{i(!1)}}}),tt=Ge=>{N(Ye=>Me(te({},Ye),{[Ge]:!Ye[Ge]})),A[Ge]||E(Ye=>Me(te({},Ye),{[Ge]:""}))},Ae=(Ge,Ye)=>{E(zt=>Me(te({},zt),{[Ge]:Ye}))},ot=Ge=>Ht(null,null,function*(){const Ye=A[Ge];if(Ye.trim())try{const zt=D[Ge]||null,Bt=is.get("full_name")||Z||"Anonymous",It=is.get("user_image")||"";yield ze("Comments",{comment:Ye,a_id:Ge,c_id:zt,user_name:Bt,user_image:It}),Ae(Ge,""),zt&&B(Lt=>Me(te({},Lt),{[Ge]:null})),st(),Ha.success("Comment posted!")}catch(zt){console.error("Error posting comment:",zt),Ha.error("Error posting comment")}}),ct=(Ge,Ye)=>{B(zt=>Me(te({},zt),{[Ge]:Ye})),setTimeout(()=>{const zt=document.getElementById(`comment-input-${Ge}`);zt&&zt.focus()},0)},ut=Ge=>{B(Ye=>Me(te({},Ye),{[Ge]:null}))},tn=Ge=>{const Ye=new Date(Ge),Bt=Math.floor((new Date-Ye)/1e3);return Bt<60?"Just now":Bt<3600?`${Math.floor(Bt/60)}m`:Bt<86400?`${Math.floor(Bt/3600)}h`:`${Math.floor(Bt/86400)}d`};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 px-2 sm:px-0",children:l.jsxs("div",{className:"w-full lg:max-w-2xl mx-auto",children:[l.jsx("div",{className:"bg-white rounded-3xl shadow-xl shadow-gray-200/50 mb-8 overflow-hidden border border-gray-100 mx-2 sm:mx-4",children:l.jsxs("div",{className:"p-3 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start space-x-0 sm:space-x-4 space-y-4 sm:space-y-0",children:[l.jsxs("div",{className:"relative mb-3 sm:mb-0",children:[l.jsx("img",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl object-cover ring-2 ring-gray-100",src:is.get("user_image")||"https://anantdv.com/construction/img1/transparent%20high%20resolution.png",alt:"Profile"}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),l.jsxs("div",{className:"flex-1 w-full",children:[l.jsx("textarea",{className:"w-full p-2 sm:p-4 bg-gray-50 rounded-2xl resize-none outline-none border-2 border-transparent focus:border-blue-200 focus:bg-white duration-200 text-gray-700 placeholder-gray-400 text-base sm:text-md",placeholder:"What's inspiring you today?",value:e,onChange:Ge=>t(Ge.target.value),rows:3}),c&&l.jsx("div",{className:"relative mt-4 w-full rounded-2xl overflow-hidden",children:l.jsxs("div",{className:"relative",children:[g==="image"?l.jsx("img",{src:c,alt:"Preview",className:"w-full h-auto max-h-56 sm:max-h-64 object-cover"}):l.jsx("video",{src:c,controls:!0,className:"w-full h-auto max-h-56 sm:max-h-64 object-cover"}),l.jsx("button",{onClick:()=>{u(null),a(null),_(null)},className:"absolute top-3 right-3 w-8 h-8 bg-black/50 hover:bg-black/70 backdrop-blur-sm text-white rounded-full flex items-center justify-center transition-all duration-200",children:l.jsx(Sx,{className:"w-4 h-4"})})]})})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-6 pt-4 border-t border-gray-100 space-y-2 sm:space-y-0",children:[l.jsx("input",{ref:K,type:"file",className:"hidden",onChange:Pt}),l.jsxs("div",{className:"flex flex-row flex-wrap gap-1 sm:gap-2",children:[l.jsxs("button",{onClick:()=>fe("image"),className:"flex items-center space-x-2 px-3 py-2 rounded-xl text-blue-600 hover:bg-blue-50 transition-all duration-200 group",children:[l.jsx(cF,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),l.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Photo"})]}),l.jsxs("button",{onClick:()=>fe("video"),className:"flex items-center space-x-2 px-3 py-2 rounded-xl text-purple-600 hover:bg-purple-50 transition-all duration-200 group",children:[l.jsx(MP,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),l.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Video"})]}),l.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 rounded-xl text-yellow-600 hover:bg-yellow-50 transition-all duration-200 group",children:[l.jsx(MB,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),l.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Emoji"})]})]}),l.jsx("button",{className:`w-full sm:w-auto px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform ${n||!e.trim()&&!o?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]"}`,disabled:n||!e.trim()&&!o,onClick:Xe,children:n?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),l.jsx("span",{children:"Posting..."})]}):l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Xk,{className:"w-4 h-4"}),l.jsx("span",{children:"Share"})]})})]})]})}),l.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center mb-6 mx-2 sm:mx-4",children:l.jsx("div",{className:"flex items-center bg-white rounded-2xl shadow-lg border border-gray-100 p-2 flex-wrap gap-2",children:["Top","Latest","Trending"].map(Ge=>l.jsx("button",{onClick:()=>G(Ge),className:`px-4 py-1 sm:px-6 sm:py-2 rounded-xl font-medium transition-all duration-200 ${$===Ge?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:Ge},Ge))})}),l.jsx("div",{className:"space-y-5 sm:space-y-6 mx-2 sm:mx-4 pb-8",children:de&&de.length>0?de.map(Ge=>l.jsx("div",{className:"bg-white rounded-3xl shadow-xl shadow-gray-200/50 overflow-hidden border border-gray-100 group hover:shadow-2xl transition-all duration-300",children:l.jsx(JV,{doctype:"Announcements",docname:Ge.name,children:({data:Ye,error:zt})=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-4 sm:p-6 pb-2 sm:pb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl object-cover ring-2 ring-gray-100",src:Ge.image_url||(Ge.user_info&&Ge.user_info.length>0?Ge.user_info.user_image:"https://anantdv.com/construction/img1/transparent%20high%20resolution.png"),alt:"Profile"}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-900 text-base sm:text-lg",children:Ge.user_name||"Anonymous"}),l.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500 space-x-2",children:[l.jsx("span",{children:"IT Company"}),l.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),l.jsx("span",{children:tn(Ge.creation)})]})]})]}),l.jsx("button",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-xl hover:bg-gray-100 flex items-center justify-center transition-all duration-200 group-hover:bg-gray-50",children:l.jsx(FF,{className:"w-5 h-5 text-gray-500"})})]}),l.jsx("div",{className:"text-gray-800 leading-relaxed mb-3 sm:mb-4",children:le?l.jsxs("p",{children:[Ge.announcements," ",l.jsx("span",{onClick:()=>_e(!1),className:"text-blue-700",children:"see less"})]}):l.jsxs("p",{children:[Ge.announcements.slice(0,250),".... ",l.jsx("span",{onClick:()=>_e(!0),className:"text-blue-700",children:"see more"})]})})]}),(Ge.image||Ge.video)&&l.jsx("div",{className:"relative overflow-hidden",children:Ge.image&&(!Ge.media_type||Ge.media_type==="image")?l.jsx("img",{src:Ge.image,alt:"Post content",className:"w-full h-auto max-h-64 sm:max-h-80 object-cover transition-transform duration-700 group-hover:scale-[1.02]"}):Ge.video&&Ge.media_type==="video"?l.jsx("video",{src:Ge.video,controls:!0,className:"w-full h-auto max-h-64 sm:max-h-80 object-cover"}):null}),l.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4",children:l.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4 items-center justify-between",children:[l.jsx(TU,{announcementName:Ge.name,userName:Z,mutateAnnouncements:Oe}),l.jsxs("button",{onClick:()=>tt(Ge.name),className:`flex items-center space-x-2 px-3 py-2 rounded-xl font-medium transition-all duration-200 group/btn ${S[Ge.name]?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50 hover:text-blue-600"}`,children:[l.jsx(Zk,{className:"w-5 h-5 transition-all duration-200 group-hover/btn:scale-110"}),l.jsx("span",{className:"text-xs sm:text-sm",children:"Comment"})]}),l.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 rounded-xl font-medium text-gray-600 hover:bg-gray-50 hover:text-green-600 transition-all duration-200 group/btn",children:[l.jsx(jB,{className:"w-5 h-5 transition-all duration-200 group-hover/btn:scale-110"}),l.jsx("span",{className:"text-xs sm:text-sm",children:"Share"})]})]})}),S[Ge.name]&&l.jsx("div",{className:"border-t border-gray-100 bg-gradient-to-b from-gray-50/50 to-white",children:l.jsxs("div",{className:"p-4 sm:p-6",children:[D[Ge.name]&&l.jsxs("div",{className:"mb-3 sm:mb-4 flex flex-col sm:flex-row items-center justify-between bg-blue-50 px-4 py-2 rounded-xl",children:[l.jsx("span",{className:"text-sm text-blue-600",children:"Replying to comment"}),l.jsx("button",{onClick:()=>ut(Ge.name),className:"text-sm text-red-500 hover:underline",children:"Cancel"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-start space-x-0 sm:space-x-3 space-y-3 sm:space-y-0 mb-6",children:[l.jsx("img",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-xl object-cover ring-2 ring-gray-100",src:is.get("user_image")||"https://anantdv.com/construction/img1/transparent%20high%20resolution.png",alt:"Your profile"}),l.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row space-y-3 sm:space-x-3 sm:space-y-0",children:[l.jsx("input",{id:`comment-input-${Ge.name}`,type:"text",className:"flex-1 px-2 py-2 sm:px-4 sm:py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200",placeholder:"Write a thoughtful comment...",value:A[Ge.name]||"",onChange:Bt=>Ae(Ge.name,Bt.target.value)}),l.jsx("button",{onClick:()=>ot(Ge.name),className:"px-4 py-2 sm:px-6 sm:py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:l.jsx(Xk,{className:"w-4 h-4"})})]})]}),l.jsx("div",{className:"space-y-3 sm:space-y-4",children:At[Ge.name]&&At[Ge.name].length>0?At[Ge.name].map(Bt=>l.jsxs("div",{className:"group/comment",children:[l.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[l.jsx("img",{className:"w-8 h-8 sm:w-9 sm:h-9 rounded-xl object-cover ring-2 ring-gray-100",src:Bt.user_image||"https://flowbite.com/docs/images/people/profile-picture-2.jpg",alt:Bt.user_name||"User"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"bg-white rounded-2xl px-3 py-2 sm:px-4 sm:py-3 shadow-sm border border-gray-100",children:[l.jsx("div",{className:"font-semibold text-gray-900 text-xs sm:text-sm",children:Bt.user_name||"Anonymous"}),l.jsx("p",{className:"text-gray-700 mt-1",children:Bt.comment})]}),l.jsxs("div",{className:"flex items-center mt-1 sm:mt-2 text-xs text-gray-500 space-x-2 sm:space-x-4",children:[l.jsx("span",{children:tn(Bt.creation)}),l.jsxs("button",{onClick:()=>ct(Ge.name,Bt.name),className:"font-medium hover:text-blue-600 transition-colors duration-200 flex items-center space-x-1",children:[l.jsx(Yk,{className:"w-3 h-3"}),l.jsx("span",{children:"Reply"})]})]})]})]}),Bt.replies&&Bt.replies.length>0&&l.jsx("div",{className:"ml-6 sm:ml-12 mt-2 sm:mt-3 space-y-2 sm:space-y-3",children:Bt.replies.map(It=>l.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[l.jsx("img",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-xl object-cover ring-2 ring-gray-100",src:It.user_image||"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:It.user_name||"User"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"bg-white rounded-2xl px-3 py-2 sm:px-4 sm:py-3 shadow-sm border border-gray-100",children:[l.jsx("div",{className:"font-semibold text-gray-900 text-xs sm:text-sm",children:It.user_name||"Anonymous"}),l.jsx("p",{className:"text-gray-700 mt-1",children:It.comment})]}),l.jsxs("div",{className:"flex items-center mt-1 sm:mt-2 text-xs text-gray-500 space-x-2 sm:space-x-4",children:[l.jsx("span",{children:tn(It.creation)}),l.jsxs("button",{onClick:()=>ct(Ge.name,Bt.name),className:"font-medium hover:text-blue-600 transition-colors duration-200 flex items-center space-x-1",children:[l.jsx(Yk,{className:"w-3 h-3"}),l.jsx("span",{children:"Reply"})]})]})]})]},It.name))})]},Bt.name)):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Zk,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-500 font-medium",children:"No comments yet"}),l.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Be the first to share your thoughts!"})]})})]})})]})})},Ge.name)):l.jsxs("div",{className:"text-center py-16",children:[l.jsx(fC,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 font-medium",children:"No posts yet"}),l.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Start the conversation by sharing your first post!"})]})})]})})},NU=({user:e,setUserChange:t})=>{const{currentUser:n}=Rm(),{createDoc:i,loading:o}=xy();is.get("user_image");const{data:u}=Ch("User",n),{data:c}=Ch("User",e.name),{call:a}=L.useContext(wc),g=L.useMemo(()=>({filters:{channel_name:`${n} _ ${e.name}`},fields:["*"]}),[n,e.name]),{data:_}=Cv("Raven Channel",g),{call:S}=Tv("raven.api.raven_channel.create_direct_message_channel"),N=L.useMemo(()=>{var Z,K;return(K=(Z=u==null?void 0:u.followers)==null?void 0:Z.some(le=>le.user===e.name))!=null?K:!1},[u==null?void 0:u.followers,e.name]),[A,E]=L.useState(!1),[D,B]=L.useState(!1);L.useEffect(()=>{E(N)},[N]);const $=L.useCallback(()=>Ht(null,null,function*(){var Z,K;try{if((Z=_==null?void 0:_[0])!=null&&Z.name){console.log("Channel already exists:",_[0].name);const _e=`/raven/New%20admin%20office%20construction/${_[0].name}`;window.open(_e,"_blank","noopener,noreferrer");return}B(!0);const le=yield S({user_id:e.name});if((K=le==null?void 0:le.message)!=null&&K.name){const _e=`/raven/New%20admin%20office%20construction/${le.message.name}`;window.open(_e,"_blank","noopener,noreferrer"),t&&t(!0)}else throw new Error("Failed to create channel")}catch(le){console.error("Error handling chat:",le),alert("Failed to open chat. Please try again.")}finally{B(!1)}}),[_,S,e.name,t]),G=L.useCallback(()=>Ht(null,null,function*(){if(!(o||N||A))try{E(!0);const[Z]=yield Promise.all([S({user_id:e.name}),i("Followers",{parent:n,parentfield:"followers",parenttype:"User",user:e.name})]);console.log("Successfully followed user and created channel:",Z),t&&t(!0)}catch(Z){console.error("Error following user:",Z),E(!1),alert("Failed to follow user. Please try again.")}}),[o,N,A,S,e.name,i,n,t]),W=o||D,J=N||A;return l.jsxs("div",{className:"flex items-center justify-between mb-3 mt-3 w-[21rem] md:w-[16rem]",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-10 h-10 bg-white rounded-full overflow-hidden",children:l.jsx("img",{className:"w-full h-full object-cover",src:e.user_image||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRF4C_4SdhCeYFSZttXUY-ScXX08wz0dhuurg&s",alt:`${e.first_name} profile`,onError:Z=>{Z.target.src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRF4C_4SdhCeYFSZttXUY-ScXX08wz0dhuurg&s"}})}),l.jsxs("div",{className:"ml-3 mr-6",children:[l.jsx("div",{className:"font-medium",children:e.first_name}),l.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[l.jsx("span",{children:(c==null?void 0:c.designation)||"UI Designer"}),l.jsx("span",{className:"mx-1",children:"•"}),l.jsx("span",{children:"2h"})]})]})]}),J?l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(NP,{size:16,className:"text-green-600"}),l.jsx(uC,{size:16,className:"text-green-600 cursor-pointer hover:text-green-700"}),l.jsx(MP,{size:16,className:"text-green-600 cursor-pointer hover:text-green-700"}),l.jsx(CP,{size:16,onClick:$,className:`text-green-600 cursor-pointer hover:text-green-700 ${D?"opacity-50 cursor-not-allowed":""}`,title:D?"Creating channel...":"Open chat in new tab"})]}):l.jsx("button",{onClick:G,disabled:W,className:`p-1 rounded-full hover:bg-gray-100 transition-colors ${W?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,title:W?"Processing...":"Follow user",children:l.jsx(TP,{className:W?"animate-spin":""})})]})};var x5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TN=Rt.createContext&&Rt.createContext(x5),MU=["attr","size","title"];function EU(e,t){if(e==null)return{};var n=AU(e,t),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)i=u[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function AU(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fv.apply(this,arguments)}function kN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function Bv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kN(Object(n),!0).forEach(function(i){PU(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kN(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function PU(e,t,n){return t=RU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RU(e){var t=DU(e,"string");return typeof t=="symbol"?t:t+""}function DU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _5(e){return e&&e.map((t,n)=>Rt.createElement(t.tag,Bv({key:n},t.attr),_5(t.child)))}function pi(e){return t=>Rt.createElement(zU,Fv({attr:Bv({},e.attr)},t),_5(e.child))}function zU(e){var t=n=>{var{attr:i,size:o,title:u}=e,c=EU(e,MU),a=o||n.size||"1em",g;return n.className&&(g=n.className),e.className&&(g=(g?g+" ":"")+e.className),Rt.createElement("svg",Fv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,c,{className:g,style:Bv(Bv({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),u&&Rt.createElement("title",null,u),e.children)};return TN!==void 0?Rt.createElement(TN.Consumer,null,n=>t(n)):t(x5)}function IU(e){return pi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function OU(e){return pi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}const LU=e=>{const[t,n]=L.useState(!1);return L.useEffect(()=>{function i(u){n(u.matches)}const o=matchMedia(e);return o.addEventListener("change",i),n(o.matches),()=>o.removeEventListener("change",i)},[e]),t},FU=()=>LU("(min-width: 768px)");var e_=e=>e.type==="checkbox",lm=e=>e instanceof Date,Fo=e=>e==null;const b5=e=>typeof e=="object";var Ar=e=>!Fo(e)&&!Array.isArray(e)&&b5(e)&&!lm(e),v5=e=>Ar(e)&&e.target?e_(e.target)?e.target.checked:e.target.value:e,BU=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,w5=(e,t)=>e.has(BU(t)),VU=e=>{const t=e.constructor&&e.constructor.prototype;return Ar(t)&&t.hasOwnProperty("isPrototypeOf")},wC=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function dr(e){let t;const n=Array.isArray(e),i=typeof FileList!="undefined"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(wC&&(e instanceof Blob||i))&&(n||Ar(e)))if(t=n?[]:{},!n&&!VU(e))t=e;else for(const o in e)e.hasOwnProperty(o)&&(t[o]=dr(e[o]));else return e;return t}var t_=e=>Array.isArray(e)?e.filter(Boolean):[],Ks=e=>e===void 0,Sn=(e,t,n)=>{if(!t||!Ar(e))return n;const i=t_(t.split(/[,[\].]+?/)).reduce((o,u)=>Fo(o)?o:o[u],e);return Ks(i)||i===e?Ks(e[t])?n:e[t]:i},Il=e=>typeof e=="boolean",SC=e=>/^\w*$/.test(e),S5=e=>t_(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_s=(e,t,n)=>{let i=-1;const o=SC(t)?[t]:S5(t),u=o.length,c=u-1;for(;++i<u;){const a=o[i];let g=n;if(i!==c){const _=e[a];g=Ar(_)||Array.isArray(_)?_:isNaN(+o[i+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=g,e=e[a]}};const Vv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},_c={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},dh={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},j5=Rt.createContext(null),k1=()=>Rt.useContext(j5),UU=e=>{const i=e,{children:t}=i,n=en(i,["children"]);return Rt.createElement(j5.Provider,{value:n},t)};var C5=(e,t,n,i=!0)=>{const o={defaultValues:t._defaultValues};for(const u in e)Object.defineProperty(o,u,{get:()=>{const c=u;return t._proxyFormState[c]!==_c.all&&(t._proxyFormState[c]=!i||_c.all),n&&(n[c]=!0),e[c]}});return o};const jC=typeof window!="undefined"?L.useLayoutEffect:L.useEffect;function $U(e){const t=k1(),{control:n=t.control,disabled:i,name:o,exact:u}=e||{},[c,a]=Rt.useState(n._formState),g=Rt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return jC(()=>n._subscribe({name:o,formState:g.current,exact:u,callback:_=>{!i&&a(te(te({},n._formState),_))}}),[o,i,u]),Rt.useEffect(()=>{g.current.isValid&&n._setValid(!0)},[n]),Rt.useMemo(()=>C5(c,n,g.current,!1),[c,n])}var pd=e=>typeof e=="string",T5=(e,t,n,i,o)=>pd(e)?(i&&t.watch.add(e),Sn(n,e,o)):Array.isArray(e)?e.map(u=>(i&&t.watch.add(u),Sn(n,u))):(i&&(t.watchAll=!0),n);function HU(e){const t=k1(),{control:n=t.control,name:i,defaultValue:o,disabled:u,exact:c}=e||{},a=Rt.useRef(o),[g,_]=Rt.useState(n._getWatch(i,a.current));return jC(()=>n._subscribe({name:i,formState:{values:!0},exact:c,callback:S=>!u&&_(T5(i,n._names,S.values||n._formValues,!1,a.current))}),[i,n,u,c]),Rt.useEffect(()=>n._removeUnmounted()),g}function qU(e){const t=k1(),{name:n,disabled:i,control:o=t.control,shouldUnregister:u}=e,c=w5(o._names.array,n),a=HU({control:o,name:n,defaultValue:Sn(o._formValues,n,Sn(o._defaultValues,n,e.defaultValue)),exact:!0}),g=$U({control:o,name:n,exact:!0}),_=Rt.useRef(e),S=Rt.useRef(o.register(n,te(Me(te({},e.rules),{value:a}),Il(e.disabled)?{disabled:e.disabled}:{}))),N=Rt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Sn(g.errors,n)},isDirty:{enumerable:!0,get:()=>!!Sn(g.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Sn(g.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Sn(g.validatingFields,n)},error:{enumerable:!0,get:()=>Sn(g.errors,n)}}),[g,n]),A=Rt.useCallback($=>S.current.onChange({target:{value:v5($),name:n},type:Vv.CHANGE}),[n]),E=Rt.useCallback(()=>S.current.onBlur({target:{value:Sn(o._formValues,n),name:n},type:Vv.BLUR}),[n,o._formValues]),D=Rt.useCallback($=>{const G=Sn(o._fields,n);G&&$&&(G._f.ref={focus:()=>$.focus(),select:()=>$.select(),setCustomValidity:W=>$.setCustomValidity(W),reportValidity:()=>$.reportValidity()})},[o._fields,n]),B=Rt.useMemo(()=>Me(te({name:n,value:a},Il(i)||g.disabled?{disabled:g.disabled||i}:{}),{onChange:A,onBlur:E,ref:D}),[n,i,g.disabled,A,E,D,a]);return Rt.useEffect(()=>{const $=o._options.shouldUnregister||u;o.register(n,te(te({},_.current.rules),Il(_.current.disabled)?{disabled:_.current.disabled}:{}));const G=(W,J)=>{const Z=Sn(o._fields,W);Z&&Z._f&&(Z._f.mount=J)};if(G(n,!0),$){const W=dr(Sn(o._options.defaultValues,n));_s(o._defaultValues,n,W),Ks(Sn(o._formValues,n))&&_s(o._formValues,n,W)}return!c&&o.register(n),()=>{(c?$&&!o._state.action:$)?o.unregister(n):G(n,!1)}},[n,o,c,u]),Rt.useEffect(()=>{o._setDisabledField({disabled:i,name:n})},[i,n,o]),Rt.useMemo(()=>({field:B,formState:g,fieldState:N}),[B,g,N])}const GU=e=>e.render(qU(e));var WU=(e,t,n,i,o)=>t?Me(te({},n[e]),{types:Me(te({},n[e]&&n[e].types?n[e].types:{}),{[i]:o||!0})}):{},ul=e=>Array.isArray(e)?e:[e],NN=()=>{let e=[];return{get observers(){return e},next:o=>{for(const u of e)u.next&&u.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(u=>u!==o)}}),unsubscribe:()=>{e=[]}}},OS=e=>Fo(e)||!b5(e);function zf(e,t){if(OS(e)||OS(t))return e===t;if(lm(e)&&lm(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const o of n){const u=e[o];if(!i.includes(o))return!1;if(o!=="ref"){const c=t[o];if(lm(u)&&lm(c)||Ar(u)&&Ar(c)||Array.isArray(u)&&Array.isArray(c)?!zf(u,c):u!==c)return!1}}return!0}var po=e=>Ar(e)&&!Object.keys(e).length,CC=e=>e.type==="file",gu=e=>typeof e=="function",Uv=e=>{if(!wC)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},k5=e=>e.type==="select-multiple",TC=e=>e.type==="radio",ZU=e=>TC(e)||e_(e),Qw=e=>Uv(e)&&e.isConnected;function YU(e,t){const n=t.slice(0,-1).length;let i=0;for(;i<n;)e=Ks(e)?i++:e[t[i++]];return e}function XU(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ks(e[t]))return!1;return!0}function Gr(e,t){const n=Array.isArray(t)?t:SC(t)?[t]:S5(t),i=n.length===1?e:YU(e,n),o=n.length-1,u=n[o];return i&&delete i[u],o!==0&&(Ar(i)&&po(i)||Array.isArray(i)&&XU(i))&&Gr(e,n.slice(0,-1)),e}var N5=e=>{for(const t in e)if(gu(e[t]))return!0;return!1};function $v(e,t={}){const n=Array.isArray(e);if(Ar(e)||n)for(const i in e)Array.isArray(e[i])||Ar(e[i])&&!N5(e[i])?(t[i]=Array.isArray(e[i])?[]:{},$v(e[i],t[i])):Fo(e[i])||(t[i]=!0);return t}function M5(e,t,n){const i=Array.isArray(e);if(Ar(e)||i)for(const o in e)Array.isArray(e[o])||Ar(e[o])&&!N5(e[o])?Ks(t)||OS(n[o])?n[o]=Array.isArray(e[o])?$v(e[o],[]):te({},$v(e[o])):M5(e[o],Fo(t)?{}:t[o],n[o]):n[o]=!zf(e[o],t[o]);return n}var O0=(e,t)=>M5(e,t,$v(t));const MN={value:!1,isValid:!1},EN={value:!0,isValid:!0};var E5=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ks(e[0].attributes.value)?Ks(e[0].value)||e[0].value===""?EN:{value:e[0].value,isValid:!0}:EN:MN}return MN},A5=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:i})=>Ks(e)?e:t?e===""?NaN:e&&+e:n&&pd(e)?new Date(e):i?i(e):e;const AN={isValid:!1,value:null};var P5=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,AN):AN;function PN(e){const t=e.ref;return CC(t)?t.files:TC(t)?P5(e.refs).value:k5(t)?[...t.selectedOptions].map(({value:n})=>n):e_(t)?E5(e.refs).value:A5(Ks(t.value)?e.ref.value:t.value,e)}var KU=(e,t,n,i)=>{const o={};for(const u of e){const c=Sn(t,u);c&&_s(o,u,c._f)}return{criteriaMode:n,names:[...e],fields:o,shouldUseNativeValidation:i}},Hv=e=>e instanceof RegExp,L0=e=>Ks(e)?e:Hv(e)?e.source:Ar(e)?Hv(e.value)?e.value.source:e.value:e,Wg=e=>({isOnSubmit:!e||e===_c.onSubmit,isOnBlur:e===_c.onBlur,isOnChange:e===_c.onChange,isOnAll:e===_c.all,isOnTouch:e===_c.onTouched});const RN="AsyncFunction";var QU=e=>!!e&&!!e.validate&&!!(gu(e.validate)&&e.validate.constructor.name===RN||Ar(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===RN)),JU=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),LS=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ny=(e,t,n,i)=>{for(const u of n||Object.keys(e)){const c=Sn(e,u);if(c){const o=c,{_f:a}=o,g=en(o,["_f"]);if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],u)&&!i)return!0;if(a.ref&&t(a.ref,a.name)&&!i)return!0;if(ny(g,t))break}else if(Ar(g)&&ny(g,t))break}}};function DN(e,t,n){const i=Sn(e,n);if(i||SC(n))return{error:i,name:n};const o=n.split(".");for(;o.length;){const u=o.join("."),c=Sn(t,u),a=Sn(e,u);if(c&&!Array.isArray(c)&&n!==u)return{name:n};if(a&&a.type)return{name:u,error:a};o.pop()}return{name:n}}var e$=(e,t,n,i)=>{n(e);const c=e,{name:o}=c,u=en(c,["name"]);return po(u)||Object.keys(u).length>=Object.keys(t).length||Object.keys(u).find(a=>t[a]===(!i||_c.all))},t$=(e,t,n)=>!e||!t||e===t||ul(e).some(i=>i&&(n?i===t:i.startsWith(t)||t.startsWith(i))),n$=(e,t,n,i,o)=>o.isOnAll?!1:!n&&o.isOnTouch?!(t||e):(n?i.isOnBlur:o.isOnBlur)?!e:(n?i.isOnChange:o.isOnChange)?e:!0,i$=(e,t)=>!t_(Sn(e,t)).length&&Gr(e,t),R5=(e,t,n)=>{const i=ul(Sn(e,n));return _s(i,"root",t[n]),_s(e,n,i),e},nv=e=>pd(e);function zN(e,t,n="validate"){if(nv(e)||Array.isArray(e)&&e.every(nv)||Il(e)&&!e)return{type:n,message:nv(e)?e:"",ref:t}}var Ig=e=>Ar(e)&&!Hv(e)?e:{value:e,message:""},FS=(e,t,n,i,o,u)=>Ht(null,null,function*(){const{ref:c,refs:a,required:g,maxLength:_,minLength:S,min:N,max:A,pattern:E,validate:D,name:B,valueAsNumber:$,mount:G}=e._f,W=Sn(n,B);if(!G||t.has(B))return{};const J=a?a[0]:c,Z=We=>{o&&J.reportValidity&&(J.setCustomValidity(Il(We)?"":We||""),J.reportValidity())},K={},le=TC(c),_e=e_(c),de=le||_e,pe=($||CC(c))&&Ks(c.value)&&Ks(W)||Uv(c)&&c.value===""||W===""||Array.isArray(W)&&!W.length,Oe=WU.bind(null,B,i,K),He=(We,st,At,vt=dh.maxLength,ze=dh.minLength)=>{const Qe=We?st:At;K[B]=te({type:We?vt:ze,message:Qe,ref:c},Oe(We?vt:ze,Qe))};if(u?!Array.isArray(W)||!W.length:g&&(!de&&(pe||Fo(W))||Il(W)&&!W||_e&&!E5(a).isValid||le&&!P5(a).isValid)){const{value:We,message:st}=nv(g)?{value:!!g,message:g}:Ig(g);if(We&&(K[B]=te({type:dh.required,message:st,ref:J},Oe(dh.required,st)),!i))return Z(st),K}if(!pe&&(!Fo(N)||!Fo(A))){let We,st;const At=Ig(A),vt=Ig(N);if(!Fo(W)&&!isNaN(W)){const ze=c.valueAsNumber||W&&+W;Fo(At.value)||(We=ze>At.value),Fo(vt.value)||(st=ze<vt.value)}else{const ze=c.valueAsDate||new Date(W),Qe=fe=>new Date(new Date().toDateString()+" "+fe),Je=c.type=="time",Pt=c.type=="week";pd(At.value)&&W&&(We=Je?Qe(W)>Qe(At.value):Pt?W>At.value:ze>new Date(At.value)),pd(vt.value)&&W&&(st=Je?Qe(W)<Qe(vt.value):Pt?W<vt.value:ze<new Date(vt.value))}if((We||st)&&(He(!!We,At.message,vt.message,dh.max,dh.min),!i))return Z(K[B].message),K}if((_||S)&&!pe&&(pd(W)||u&&Array.isArray(W))){const We=Ig(_),st=Ig(S),At=!Fo(We.value)&&W.length>+We.value,vt=!Fo(st.value)&&W.length<+st.value;if((At||vt)&&(He(At,We.message,st.message),!i))return Z(K[B].message),K}if(E&&!pe&&pd(W)){const{value:We,message:st}=Ig(E);if(Hv(We)&&!W.match(We)&&(K[B]=te({type:dh.pattern,message:st,ref:c},Oe(dh.pattern,st)),!i))return Z(st),K}if(D){if(gu(D)){const We=yield D(W,n),st=zN(We,J);if(st&&(K[B]=te(te({},st),Oe(dh.validate,st.message)),!i))return Z(st.message),K}else if(Ar(D)){let We={};for(const st in D){if(!po(We)&&!i)break;const At=zN(yield D[st](W,n),J,st);At&&(We=te(te({},At),Oe(st,At.message)),Z(At.message),i&&(K[B]=We))}if(!po(We)&&(K[B]=te({ref:J},We),!i))return K}}return Z(!0),K});const s$={mode:_c.onSubmit,reValidateMode:_c.onChange,shouldFocusError:!0};function r$(e={}){let t=te(te({},s$),e),n={submitCount:0,isDirty:!1,isReady:!1,isLoading:gu(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const i={};let o=Ar(t.defaultValues)||Ar(t.values)?dr(t.defaultValues||t.values)||{}:{},u=t.shouldUnregister?{}:dr(o),c={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,_=0;const S={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let N=te({},S);const A={array:NN(),state:NN()},E=t.criteriaMode===_c.all,D=Ue=>ge=>{clearTimeout(_),_=setTimeout(Ue,ge)},B=Ue=>Ht(null,null,function*(){if(!t.disabled&&(S.isValid||N.isValid||Ue)){const ge=t.resolver?po((yield _e()).errors):yield pe(i,!0);ge!==n.isValid&&A.state.next({isValid:ge})}}),$=(Ue,ge)=>{!t.disabled&&(S.isValidating||S.validatingFields||N.isValidating||N.validatingFields)&&((Ue||Array.from(a.mount)).forEach(ve=>{ve&&(ge?_s(n.validatingFields,ve,ge):Gr(n.validatingFields,ve))}),A.state.next({validatingFields:n.validatingFields,isValidating:!po(n.validatingFields)}))},G=(Ue,ge=[],ve,ht,ft=!0,qt=!0)=>{if(ht&&ve&&!t.disabled){if(c.action=!0,qt&&Array.isArray(Sn(i,Ue))){const cn=ve(Sn(i,Ue),ht.argA,ht.argB);ft&&_s(i,Ue,cn)}if(qt&&Array.isArray(Sn(n.errors,Ue))){const cn=ve(Sn(n.errors,Ue),ht.argA,ht.argB);ft&&_s(n.errors,Ue,cn),i$(n.errors,Ue)}if((S.touchedFields||N.touchedFields)&&qt&&Array.isArray(Sn(n.touchedFields,Ue))){const cn=ve(Sn(n.touchedFields,Ue),ht.argA,ht.argB);ft&&_s(n.touchedFields,Ue,cn)}(S.dirtyFields||N.dirtyFields)&&(n.dirtyFields=O0(o,u)),A.state.next({name:Ue,isDirty:He(Ue,ge),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else _s(u,Ue,ge)},W=(Ue,ge)=>{_s(n.errors,Ue,ge),A.state.next({errors:n.errors})},J=Ue=>{n.errors=Ue,A.state.next({errors:n.errors,isValid:!1})},Z=(Ue,ge,ve,ht)=>{const ft=Sn(i,Ue);if(ft){const qt=Sn(u,Ue,Ks(ve)?Sn(o,Ue):ve);Ks(qt)||ht&&ht.defaultChecked||ge?_s(u,Ue,ge?qt:PN(ft._f)):At(Ue,qt),c.mount&&B()}},K=(Ue,ge,ve,ht,ft)=>{let qt=!1,cn=!1;const Qt={name:Ue};if(!t.disabled){if(!ve||ht){(S.isDirty||N.isDirty)&&(cn=n.isDirty,n.isDirty=Qt.isDirty=He(),qt=cn!==Qt.isDirty);const xt=zf(Sn(o,Ue),ge);cn=!!Sn(n.dirtyFields,Ue),xt?Gr(n.dirtyFields,Ue):_s(n.dirtyFields,Ue,!0),Qt.dirtyFields=n.dirtyFields,qt=qt||(S.dirtyFields||N.dirtyFields)&&cn!==!xt}if(ve){const xt=Sn(n.touchedFields,Ue);xt||(_s(n.touchedFields,Ue,ve),Qt.touchedFields=n.touchedFields,qt=qt||(S.touchedFields||N.touchedFields)&&xt!==ve)}qt&&ft&&A.state.next(Qt)}return qt?Qt:{}},le=(Ue,ge,ve,ht)=>{const ft=Sn(n.errors,Ue),qt=(S.isValid||N.isValid)&&Il(ge)&&n.isValid!==ge;if(t.delayError&&ve?(g=D(()=>W(Ue,ve)),g(t.delayError)):(clearTimeout(_),g=null,ve?_s(n.errors,Ue,ve):Gr(n.errors,Ue)),(ve?!zf(ft,ve):ft)||!po(ht)||qt){const cn=Me(te(te({},ht),qt&&Il(ge)?{isValid:ge}:{}),{errors:n.errors,name:Ue});n=te(te({},n),cn),A.state.next(cn)}},_e=Ue=>Ht(null,null,function*(){$(Ue,!0);const ge=yield t.resolver(u,t.context,KU(Ue||a.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return $(Ue),ge}),de=Ue=>Ht(null,null,function*(){const{errors:ge}=yield _e(Ue);if(Ue)for(const ve of Ue){const ht=Sn(ge,ve);ht?_s(n.errors,ve,ht):Gr(n.errors,ve)}else n.errors=ge;return ge}),pe=(ht,ft,...qt)=>Ht(null,[ht,ft,...qt],function*(Ue,ge,ve={valid:!0}){for(const Qt in Ue){const xt=Ue[Qt];if(xt){const cn=xt,{_f:je}=cn,ae=en(cn,["_f"]);if(je){const ie=a.array.has(je.name),be=xt._f&&QU(xt._f);be&&S.validatingFields&&$([Qt],!0);const ke=yield FS(xt,a.disabled,u,E,t.shouldUseNativeValidation&&!ge,ie);if(be&&S.validatingFields&&$([Qt]),ke[je.name]&&(ve.valid=!1,ge))break;!ge&&(Sn(ke,je.name)?ie?R5(n.errors,ke,je.name):_s(n.errors,je.name,ke[je.name]):Gr(n.errors,je.name))}!po(ae)&&(yield pe(ae,ge,ve))}}return ve.valid}),Oe=()=>{for(const Ue of a.unMount){const ge=Sn(i,Ue);ge&&(ge._f.refs?ge._f.refs.every(ve=>!Qw(ve)):!Qw(ge._f.ref))&&tn(Ue)}a.unMount=new Set},He=(Ue,ge)=>!t.disabled&&(Ue&&ge&&_s(u,Ue,ge),!zf(fe(),o)),We=(Ue,ge,ve)=>T5(Ue,a,te({},c.mount?u:Ks(ge)?o:pd(Ue)?{[Ue]:ge}:ge),ve,ge),st=Ue=>t_(Sn(c.mount?u:o,Ue,t.shouldUnregister?Sn(o,Ue,[]):[])),At=(Ue,ge,ve={})=>{const ht=Sn(i,Ue);let ft=ge;if(ht){const qt=ht._f;qt&&(!qt.disabled&&_s(u,Ue,A5(ge,qt)),ft=Uv(qt.ref)&&Fo(ge)?"":ge,k5(qt.ref)?[...qt.ref.options].forEach(cn=>cn.selected=ft.includes(cn.value)):qt.refs?e_(qt.ref)?qt.refs.forEach(cn=>{(!cn.defaultChecked||!cn.disabled)&&(Array.isArray(ft)?cn.checked=!!ft.find(Qt=>Qt===cn.value):cn.checked=ft===cn.value||!!ft)}):qt.refs.forEach(cn=>cn.checked=cn.value===ft):CC(qt.ref)?qt.ref.value="":(qt.ref.value=ft,qt.ref.type||A.state.next({name:Ue,values:dr(u)})))}(ve.shouldDirty||ve.shouldTouch)&&K(Ue,ft,ve.shouldTouch,ve.shouldDirty,!0),ve.shouldValidate&&Pt(Ue)},vt=(Ue,ge,ve)=>{for(const ht in ge){if(!ge.hasOwnProperty(ht))return;const ft=ge[ht],qt=`${Ue}.${ht}`,cn=Sn(i,qt);(a.array.has(Ue)||Ar(ft)||cn&&!cn._f)&&!lm(ft)?vt(qt,ft,ve):At(qt,ft,ve)}},ze=(Ue,ge,ve={})=>{const ht=Sn(i,Ue),ft=a.array.has(Ue),qt=dr(ge);_s(u,Ue,qt),ft?(A.array.next({name:Ue,values:dr(u)}),(S.isDirty||S.dirtyFields||N.isDirty||N.dirtyFields)&&ve.shouldDirty&&A.state.next({name:Ue,dirtyFields:O0(o,u),isDirty:He(Ue,qt)})):ht&&!ht._f&&!Fo(qt)?vt(Ue,qt,ve):At(Ue,qt,ve),LS(Ue,a)&&A.state.next(te({},n)),A.state.next({name:c.mount?Ue:void 0,values:dr(u)})},Qe=Ue=>Ht(null,null,function*(){c.mount=!0;const ge=Ue.target;let ve=ge.name,ht=!0;const ft=Sn(i,ve),qt=xt=>{ht=Number.isNaN(xt)||lm(xt)&&isNaN(xt.getTime())||zf(xt,Sn(u,ve,xt))},cn=Wg(t.mode),Qt=Wg(t.reValidateMode);if(ft){let xt,je;const ae=ge.type?PN(ft._f):v5(Ue),ie=Ue.type===Vv.BLUR||Ue.type===Vv.FOCUS_OUT,be=!JU(ft._f)&&!t.resolver&&!Sn(n.errors,ve)&&!ft._f.deps||n$(ie,Sn(n.touchedFields,ve),n.isSubmitted,Qt,cn),ke=LS(ve,a,ie);_s(u,ve,ae),ie?(ft._f.onBlur&&ft._f.onBlur(Ue),g&&g(0)):ft._f.onChange&&ft._f.onChange(Ue);const Re=K(ve,ae,ie),Q=!po(Re)||ke;if(!ie&&A.state.next({name:ve,type:Ue.type,values:dr(u)}),be)return(S.isValid||N.isValid)&&(t.mode==="onBlur"?ie&&B():ie||B()),Q&&A.state.next(te({name:ve},ke?{}:Re));if(!ie&&ke&&A.state.next(te({},n)),t.resolver){const{errors:nt}=yield _e([ve]);if(qt(ae),ht){const et=DN(n.errors,i,ve),Tt=DN(nt,i,et.name||ve);xt=Tt.error,ve=Tt.name,je=po(nt)}}else $([ve],!0),xt=(yield FS(ft,a.disabled,u,E,t.shouldUseNativeValidation))[ve],$([ve]),qt(ae),ht&&(xt?je=!1:(S.isValid||N.isValid)&&(je=yield pe(i,!0)));ht&&(ft._f.deps&&Pt(ft._f.deps),le(ve,je,xt,Re))}}),Je=(Ue,ge)=>{if(Sn(n.errors,ge)&&Ue.focus)return Ue.focus(),1},Pt=(ve,...ht)=>Ht(null,[ve,...ht],function*(Ue,ge={}){let ft,qt;const cn=ul(Ue);if(t.resolver){const Qt=yield de(Ks(Ue)?Ue:cn);ft=po(Qt),qt=Ue?!cn.some(xt=>Sn(Qt,xt)):ft}else Ue?(qt=(yield Promise.all(cn.map(Qt=>Ht(null,null,function*(){const xt=Sn(i,Qt);return yield pe(xt&&xt._f?{[Qt]:xt}:xt)})))).every(Boolean),!(!qt&&!n.isValid)&&B()):qt=ft=yield pe(i);return A.state.next(Me(te(te({},!pd(Ue)||(S.isValid||N.isValid)&&ft!==n.isValid?{}:{name:Ue}),t.resolver||!Ue?{isValid:ft}:{}),{errors:n.errors})),ge.shouldFocus&&!qt&&ny(i,Je,Ue?cn:a.mount),qt}),fe=Ue=>{const ge=te({},c.mount?u:o);return Ks(Ue)?ge:pd(Ue)?Sn(ge,Ue):Ue.map(ve=>Sn(ge,ve))},Xe=(Ue,ge)=>({invalid:!!Sn((ge||n).errors,Ue),isDirty:!!Sn((ge||n).dirtyFields,Ue),error:Sn((ge||n).errors,Ue),isValidating:!!Sn(n.validatingFields,Ue),isTouched:!!Sn((ge||n).touchedFields,Ue)}),tt=Ue=>{Ue&&ul(Ue).forEach(ge=>Gr(n.errors,ge)),A.state.next({errors:Ue?n.errors:{}})},Ae=(Ue,ge,ve)=>{const ht=(Sn(i,Ue,{_f:{}})._f||{}).ref,je=Sn(n.errors,Ue)||{},{ref:qt,message:cn,type:Qt}=je,xt=en(je,["ref","message","type"]);_s(n.errors,Ue,Me(te(te({},xt),ge),{ref:ht})),A.state.next({name:Ue,errors:n.errors,isValid:!1}),ve&&ve.shouldFocus&&ht&&ht.focus&&ht.focus()},ot=(Ue,ge)=>gu(Ue)?A.state.subscribe({next:ve=>Ue(We(void 0,ge),ve)}):We(Ue,ge,!0),ct=Ue=>A.state.subscribe({next:ge=>{t$(Ue.name,ge.name,Ue.exact)&&e$(ge,Ue.formState||S,Gn,Ue.reRenderRoot)&&Ue.callback(te(te({values:te({},u)},n),ge))}}).unsubscribe,ut=Ue=>(c.mount=!0,N=te(te({},N),Ue.formState),ct(Me(te({},Ue),{formState:N}))),tn=(Ue,ge={})=>{for(const ve of Ue?ul(Ue):a.mount)a.mount.delete(ve),a.array.delete(ve),ge.keepValue||(Gr(i,ve),Gr(u,ve)),!ge.keepError&&Gr(n.errors,ve),!ge.keepDirty&&Gr(n.dirtyFields,ve),!ge.keepTouched&&Gr(n.touchedFields,ve),!ge.keepIsValidating&&Gr(n.validatingFields,ve),!t.shouldUnregister&&!ge.keepDefaultValue&&Gr(o,ve);A.state.next({values:dr(u)}),A.state.next(te(te({},n),ge.keepDirty?{isDirty:He()}:{})),!ge.keepIsValid&&B()},Ge=({disabled:Ue,name:ge})=>{(Il(Ue)&&c.mount||Ue||a.disabled.has(ge))&&(Ue?a.disabled.add(ge):a.disabled.delete(ge))},Ye=(Ue,ge={})=>{let ve=Sn(i,Ue);const ht=Il(ge.disabled)||Il(t.disabled);return _s(i,Ue,Me(te({},ve||{}),{_f:te(Me(te({},ve&&ve._f?ve._f:{ref:{name:Ue}}),{name:Ue,mount:!0}),ge)})),a.mount.add(Ue),ve?Ge({disabled:Il(ge.disabled)?ge.disabled:t.disabled,name:Ue}):Z(Ue,!0,ge.value),Me(te(te({},ht?{disabled:ge.disabled||t.disabled}:{}),t.progressive?{required:!!ge.required,min:L0(ge.min),max:L0(ge.max),minLength:L0(ge.minLength),maxLength:L0(ge.maxLength),pattern:L0(ge.pattern)}:{}),{name:Ue,onChange:Qe,onBlur:Qe,ref:ft=>{if(ft){Ye(Ue,ge),ve=Sn(i,Ue);const qt=Ks(ft.value)&&ft.querySelectorAll&&ft.querySelectorAll("input,select,textarea")[0]||ft,cn=ZU(qt),Qt=ve._f.refs||[];if(cn?Qt.find(xt=>xt===qt):qt===ve._f.ref)return;_s(i,Ue,{_f:te(te({},ve._f),cn?{refs:[...Qt.filter(Qw),qt,...Array.isArray(Sn(o,Ue))?[{}]:[]],ref:{type:qt.type,name:Ue}}:{ref:qt})}),Z(Ue,!1,void 0,qt)}else ve=Sn(i,Ue,{}),ve._f&&(ve._f.mount=!1),(t.shouldUnregister||ge.shouldUnregister)&&!(w5(a.array,Ue)&&c.action)&&a.unMount.add(Ue)}})},zt=()=>t.shouldFocusError&&ny(i,Je,a.mount),Bt=Ue=>{Il(Ue)&&(A.state.next({disabled:Ue}),ny(i,(ge,ve)=>{const ht=Sn(i,ve);ht&&(ge.disabled=ht._f.disabled||Ue,Array.isArray(ht._f.refs)&&ht._f.refs.forEach(ft=>{ft.disabled=ht._f.disabled||Ue}))},0,!1))},It=(Ue,ge)=>ve=>Ht(null,null,function*(){let ht;ve&&(ve.preventDefault&&ve.preventDefault(),ve.persist&&ve.persist());let ft=dr(u);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:qt,values:cn}=yield _e();n.errors=qt,ft=cn}else yield pe(i);if(a.disabled.size)for(const qt of a.disabled)_s(ft,qt,void 0);if(Gr(n.errors,"root"),po(n.errors)){A.state.next({errors:{}});try{yield Ue(ft,ve)}catch(qt){ht=qt}}else ge&&(yield ge(te({},n.errors),ve)),zt(),setTimeout(zt);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:po(n.errors)&&!ht,submitCount:n.submitCount+1,errors:n.errors}),ht)throw ht}),Lt=(Ue,ge={})=>{Sn(i,Ue)&&(Ks(ge.defaultValue)?ze(Ue,dr(Sn(o,Ue))):(ze(Ue,ge.defaultValue),_s(o,Ue,dr(ge.defaultValue))),ge.keepTouched||Gr(n.touchedFields,Ue),ge.keepDirty||(Gr(n.dirtyFields,Ue),n.isDirty=ge.defaultValue?He(Ue,dr(Sn(o,Ue))):He()),ge.keepError||(Gr(n.errors,Ue),S.isValid&&B()),A.state.next(te({},n)))},nn=(Ue,ge={})=>{const ve=Ue?dr(Ue):o,ht=dr(ve),ft=po(Ue),qt=ft?o:ht;if(ge.keepDefaultValues||(o=ve),!ge.keepValues){if(ge.keepDirtyValues){const cn=new Set([...a.mount,...Object.keys(O0(o,u))]);for(const Qt of Array.from(cn))Sn(n.dirtyFields,Qt)?_s(qt,Qt,Sn(u,Qt)):ze(Qt,Sn(qt,Qt))}else{if(wC&&Ks(Ue))for(const cn of a.mount){const Qt=Sn(i,cn);if(Qt&&Qt._f){const xt=Array.isArray(Qt._f.refs)?Qt._f.refs[0]:Qt._f.ref;if(Uv(xt)){const je=xt.closest("form");if(je){je.reset();break}}}}for(const cn of a.mount)ze(cn,Sn(qt,cn))}u=dr(qt),A.array.next({values:te({},qt)}),A.state.next({values:te({},qt)})}a={mount:ge.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!S.isValid||!!ge.keepIsValid||!!ge.keepDirtyValues,c.watch=!!t.shouldUnregister,A.state.next({submitCount:ge.keepSubmitCount?n.submitCount:0,isDirty:ft?!1:ge.keepDirty?n.isDirty:!!(ge.keepDefaultValues&&!zf(Ue,o)),isSubmitted:ge.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ft?{}:ge.keepDirtyValues?ge.keepDefaultValues&&u?O0(o,u):n.dirtyFields:ge.keepDefaultValues&&Ue?O0(o,Ue):ge.keepDirty?n.dirtyFields:{},touchedFields:ge.keepTouched?n.touchedFields:{},errors:ge.keepErrors?n.errors:{},isSubmitSuccessful:ge.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},_n=(Ue,ge)=>nn(gu(Ue)?Ue(u):Ue,ge),Xn=(Ue,ge={})=>{const ve=Sn(i,Ue),ht=ve&&ve._f;if(ht){const ft=ht.refs?ht.refs[0]:ht.ref;ft.focus&&(ft.focus(),ge.shouldSelect&&gu(ft.select)&&ft.select())}},Gn=Ue=>{n=te(te({},n),Ue)},ln={control:{register:Ye,unregister:tn,getFieldState:Xe,handleSubmit:It,setError:Ae,_subscribe:ct,_runSchema:_e,_getWatch:We,_getDirty:He,_setValid:B,_setFieldArray:G,_setDisabledField:Ge,_setErrors:J,_getFieldArray:st,_reset:nn,_resetDefaultValues:()=>gu(t.defaultValues)&&t.defaultValues().then(Ue=>{_n(Ue,t.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:Oe,_disableForm:Bt,_subjects:A,_proxyFormState:S,get _fields(){return i},get _formValues(){return u},get _state(){return c},set _state(Ue){c=Ue},get _defaultValues(){return o},get _names(){return a},set _names(Ue){a=Ue},get _formState(){return n},get _options(){return t},set _options(Ue){t=te(te({},t),Ue)}},subscribe:ut,trigger:Pt,register:Ye,handleSubmit:It,watch:ot,setValue:ze,getValues:fe,reset:_n,resetField:Lt,clearErrors:tt,unregister:tn,setError:Ae,setFocus:Xn,getFieldState:Xe};return Me(te({},ln),{formControl:ln})}var Af=()=>{const e=typeof performance=="undefined"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(Math.random()*16+e)%16|0;return(t=="x"?n:n&3|8).toString(16)})},Jw=(e,t,n={})=>n.shouldFocus||Ks(n.shouldFocus)?n.focusName||`${e}.${Ks(n.focusIndex)?t:n.focusIndex}.`:"",e2=(e,t)=>[...e,...ul(t)],t2=e=>Array.isArray(e)?e.map(()=>{}):void 0;function n2(e,t,n){return[...e.slice(0,t),...ul(n),...e.slice(t)]}var i2=(e,t,n)=>Array.isArray(e)?(Ks(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[],s2=(e,t)=>[...ul(t),...ul(e)];function a$(e,t){let n=0;const i=[...e];for(const o of t)i.splice(o-n,1),n++;return t_(i).length?i:[]}var r2=(e,t)=>Ks(t)?[]:a$(e,ul(t).sort((n,i)=>n-i)),a2=(e,t,n)=>{[e[t],e[n]]=[e[n],e[t]]},IN=(e,t,n)=>(e[t]=n,e);function Og(e){const t=k1(),{control:n=t.control,name:i,keyName:o="id",shouldUnregister:u,rules:c}=e,[a,g]=Rt.useState(n._getFieldArray(i)),_=Rt.useRef(n._getFieldArray(i).map(Af)),S=Rt.useRef(a),N=Rt.useRef(i),A=Rt.useRef(!1);N.current=i,S.current=a,n._names.array.add(i),c&&n.register(i,c),Rt.useEffect(()=>n._subjects.array.subscribe({next:({values:le,name:_e})=>{if(_e===N.current||!_e){const de=Sn(le,N.current);Array.isArray(de)&&(g(de),_.current=de.map(Af))}}}).unsubscribe,[n]);const E=Rt.useCallback(le=>{A.current=!0,n._setFieldArray(i,le)},[n,i]),D=(le,_e)=>{const de=ul(dr(le)),pe=e2(n._getFieldArray(i),de);n._names.focus=Jw(i,pe.length-1,_e),_.current=e2(_.current,de.map(Af)),E(pe),g(pe),n._setFieldArray(i,pe,e2,{argA:t2(le)})},B=(le,_e)=>{const de=ul(dr(le)),pe=s2(n._getFieldArray(i),de);n._names.focus=Jw(i,0,_e),_.current=s2(_.current,de.map(Af)),E(pe),g(pe),n._setFieldArray(i,pe,s2,{argA:t2(le)})},$=le=>{const _e=r2(n._getFieldArray(i),le);_.current=r2(_.current,le),E(_e),g(_e),!Array.isArray(Sn(n._fields,i))&&_s(n._fields,i,void 0),n._setFieldArray(i,_e,r2,{argA:le})},G=(le,_e,de)=>{const pe=ul(dr(_e)),Oe=n2(n._getFieldArray(i),le,pe);n._names.focus=Jw(i,le,de),_.current=n2(_.current,le,pe.map(Af)),E(Oe),g(Oe),n._setFieldArray(i,Oe,n2,{argA:le,argB:t2(_e)})},W=(le,_e)=>{const de=n._getFieldArray(i);a2(de,le,_e),a2(_.current,le,_e),E(de),g(de),n._setFieldArray(i,de,a2,{argA:le,argB:_e},!1)},J=(le,_e)=>{const de=n._getFieldArray(i);i2(de,le,_e),i2(_.current,le,_e),E(de),g(de),n._setFieldArray(i,de,i2,{argA:le,argB:_e},!1)},Z=(le,_e)=>{const de=dr(_e),pe=IN(n._getFieldArray(i),le,de);_.current=[...pe].map((Oe,He)=>!Oe||He===le?Af():_.current[He]),E(pe),g([...pe]),n._setFieldArray(i,pe,IN,{argA:le,argB:de},!0,!1)},K=le=>{const _e=ul(dr(le));_.current=_e.map(Af),E([..._e]),g([..._e]),n._setFieldArray(i,[..._e],de=>de,{},!0,!1)};return Rt.useEffect(()=>{if(n._state.action=!1,LS(i,n._names)&&n._subjects.state.next(te({},n._formState)),A.current&&(!Wg(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!Wg(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([i]).then(le=>{const _e=Sn(le.errors,i),de=Sn(n._formState.errors,i);(de?!_e&&de.type||_e&&(de.type!==_e.type||de.message!==_e.message):_e&&_e.type)&&(_e?_s(n._formState.errors,i,_e):Gr(n._formState.errors,i),n._subjects.state.next({errors:n._formState.errors}))});else{const le=Sn(n._fields,i);le&&le._f&&!(Wg(n._options.reValidateMode).isOnSubmit&&Wg(n._options.mode).isOnSubmit)&&FS(le,n._names.disabled,n._formValues,n._options.criteriaMode===_c.all,n._options.shouldUseNativeValidation,!0).then(_e=>!po(_e)&&n._subjects.state.next({errors:R5(n._formState.errors,_e,i)}))}n._subjects.state.next({name:i,values:dr(n._formValues)}),n._names.focus&&ny(n._fields,(le,_e)=>{if(n._names.focus&&_e.startsWith(n._names.focus)&&le.focus)return le.focus(),1}),n._names.focus="",n._setValid(),A.current=!1},[a,i,n]),Rt.useEffect(()=>(!Sn(n._formValues,i)&&n._setFieldArray(i),()=>{const le=(_e,de)=>{const pe=Sn(n._fields,_e);pe&&pe._f&&(pe._f.mount=de)};n._options.shouldUnregister||u?n.unregister(i):le(i,!1)}),[i,n,o,u]),{swap:Rt.useCallback(W,[E,i,n]),move:Rt.useCallback(J,[E,i,n]),prepend:Rt.useCallback(B,[E,i,n]),append:Rt.useCallback(D,[E,i,n]),remove:Rt.useCallback($,[E,i,n]),insert:Rt.useCallback(G,[E,i,n]),update:Rt.useCallback(Z,[E,i,n]),replace:Rt.useCallback(K,[E,i,n]),fields:Rt.useMemo(()=>a.map((le,_e)=>Me(te({},le),{[o]:_.current[_e]||Af()})),[a,o])}}function BS(e={}){const t=Rt.useRef(void 0),n=Rt.useRef(void 0),[i,o]=Rt.useState({isDirty:!1,isValidating:!1,isLoading:gu(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:gu(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=Me(te({},e.formControl?e.formControl:r$(e)),{formState:i}),e.formControl&&e.defaultValues&&!gu(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const u=t.current.control;return u._options=e,jC(()=>{const c=u._subscribe({formState:u._proxyFormState,callback:()=>o(te({},u._formState)),reRenderRoot:!0});return o(a=>Me(te({},a),{isReady:!0})),u._formState.isReady=!0,c},[u]),Rt.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),Rt.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode),e.errors&&!po(e.errors)&&u._setErrors(e.errors)},[u,e.errors,e.mode,e.reValidateMode]),Rt.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),Rt.useEffect(()=>{if(u._proxyFormState.isDirty){const c=u._getDirty();c!==i.isDirty&&u._subjects.state.next({isDirty:c})}},[u,i.isDirty]),Rt.useEffect(()=>{e.values&&!zf(e.values,n.current)?(u._reset(e.values,u._options.resetOptions),n.current=e.values,o(c=>te({},c))):u._resetDefaultValues()},[u,e.values]),Rt.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next(te({},u._formState))),u._removeUnmounted()}),t.current.formState=C5(i,u),t.current}function o$(e){return pi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm7.931 9h-2.764a14.67 14.67 0 0 0-1.792-6.243A8.013 8.013 0 0 1 19.931 11zM12.53 4.027c1.035 1.364 2.427 3.78 2.627 6.973H9.03c.139-2.596.994-5.028 2.451-6.974.172-.01.344-.026.519-.026.179 0 .354.016.53.027zm-3.842.7C7.704 6.618 7.136 8.762 7.03 11H4.069a8.013 8.013 0 0 1 4.619-6.273zM4.069 13h2.974c.136 2.379.665 4.478 1.556 6.23A8.01 8.01 0 0 1 4.069 13zm7.381 6.973C10.049 18.275 9.222 15.896 9.041 13h6.113c-.208 2.773-1.117 5.196-2.603 6.972-.182.012-.364.028-.551.028-.186 0-.367-.016-.55-.027zm4.011-.772c.955-1.794 1.538-3.901 1.691-6.201h2.778a8.005 8.005 0 0 1-4.469 6.201z"},child:[]}]})(e)}function l$(e){return pi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z"},child:[]}]})(e)}function c$(e){return pi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"},child:[]},{tag:"path",attr:{d:"M11 11h2v6h-2zm0-4h2v2h-2z"},child:[]}]})(e)}function u$(e){return pi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C9.243 2 7 4.243 7 7v3H6c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-8c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5zm6 10 .002 8H6v-8h12zm-9-2V7c0-1.654 1.346-3 3-3s3 1.346 3 3v3H9z"},child:[]}]})(e)}const d$=({className:e})=>l.jsxs("svg",{className:g1("animate-spin h-4 w-4 dark:text-white text-gray-900",e),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});var h$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ui=h$.reduce((e,t)=>{const n=bm(`Primitive.${t}`),i=L.forwardRef((o,u)=>{const _=o,{asChild:c}=_,a=en(_,["asChild"]),g=c?n:t;return typeof window!="undefined"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(g,Me(te({},a),{ref:u}))});return i.displayName=`Primitive.${t}`,Me(te({},e),{[t]:i})},{});function f$(e,t){e&&Zx.flushSync(()=>e.dispatchEvent(t))}var D5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),p$="VisuallyHidden",m$=L.forwardRef((e,t)=>l.jsx(Ui.span,Me(te({},e),{ref:t,style:te(te({},D5),e.style)})));m$.displayName=p$;function g$(e,t){const n=L.createContext(t),i=u=>{const _=u,{children:c}=_,a=en(_,["children"]),g=L.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:g,children:c})};i.displayName=e+"Provider";function o(u){const c=L.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${u}\` must be used within \`${e}\``)}return[i,o]}function n_(e,t=[]){let n=[];function i(u,c){const a=L.createContext(c),g=n.length;n=[...n,c];const _=N=>{var W;const G=N,{scope:A,children:E}=G,D=en(G,["scope","children"]),B=((W=A==null?void 0:A[e])==null?void 0:W[g])||a,$=L.useMemo(()=>D,Object.values(D));return l.jsx(B.Provider,{value:$,children:E})};_.displayName=u+"Provider";function S(N,A){var B;const E=((B=A==null?void 0:A[e])==null?void 0:B[g])||a,D=L.useContext(E);if(D)return D;if(c!==void 0)return c;throw new Error(`\`${N}\` must be used within \`${u}\``)}return[_,S]}const o=()=>{const u=n.map(c=>L.createContext(c));return function(a){const g=(a==null?void 0:a[e])||u;return L.useMemo(()=>({[`__scope${e}`]:Me(te({},a),{[e]:g})}),[a,g])}};return o.scopeName=e,[i,y$(o,...t)]}function y$(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(u){const c=i.reduce((a,{useScope:g,scopeName:_})=>{const N=g(u)[`__scope${_}`];return te(te({},a),N)},{});return L.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}function x$(e){const t=e+"CollectionProvider",[n,i]=n_(t),[o,u]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=B=>{const{scope:$,children:G}=B,W=Rt.useRef(null),J=Rt.useRef(new Map).current;return l.jsx(o,{scope:$,itemMap:J,collectionRef:W,children:G})};c.displayName=t;const a=e+"CollectionSlot",g=bm(a),_=Rt.forwardRef((B,$)=>{const{scope:G,children:W}=B,J=u(a,G),Z=fr($,J.collectionRef);return l.jsx(g,{ref:Z,children:W})});_.displayName=a;const S=e+"CollectionItemSlot",N="data-radix-collection-item",A=bm(S),E=Rt.forwardRef((B,$)=>{const _e=B,{scope:G,children:W}=_e,J=en(_e,["scope","children"]),Z=Rt.useRef(null),K=fr($,Z),le=u(S,G);return Rt.useEffect(()=>(le.itemMap.set(Z,te({ref:Z},J)),()=>void le.itemMap.delete(Z))),l.jsx(A,{[N]:"",ref:K,children:W})});E.displayName=S;function D(B){const $=u(e+"CollectionConsumer",B);return Rt.useCallback(()=>{const W=$.collectionRef.current;if(!W)return[];const J=Array.from(W.querySelectorAll(`[${N}]`));return Array.from($.itemMap.values()).sort((le,_e)=>J.indexOf(le.ref.current)-J.indexOf(_e.ref.current))},[$.collectionRef,$.itemMap])}return[{Provider:c,Slot:_,ItemSlot:E},D,i]}function ms(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}var bo=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},_$=c4[" useInsertionEffect ".trim().toString()]||bo;function qv({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[o,u,c]=b$({defaultProp:t,onChange:n}),a=e!==void 0,g=a?e:o;{const S=L.useRef(e!==void 0);L.useEffect(()=>{const N=S.current;N!==a&&console.warn(`${i} is changing from ${N?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),S.current=a},[a,i])}const _=L.useCallback(S=>{var N;if(a){const A=v$(S)?S(e):S;A!==e&&((N=c.current)==null||N.call(c,A))}else u(S)},[a,e,u,c]);return[g,_]}function b$({defaultProp:e,onChange:t}){const[n,i]=L.useState(e),o=L.useRef(n),u=L.useRef(t);return _$(()=>{u.current=t},[t]),L.useEffect(()=>{var c;o.current!==n&&((c=u.current)==null||c.call(u,n),o.current=n)},[n,o]),[n,i,u]}function v$(e){return typeof e=="function"}function w$(e,t){return L.useReducer((n,i)=>{const o=t[n][i];return o!=null?o:n},e)}var Ny=e=>{const{present:t,children:n}=e,i=S$(t),o=typeof n=="function"?n({present:i.isPresent}):L.Children.only(n),u=fr(i.ref,j$(o));return typeof n=="function"||i.isPresent?L.cloneElement(o,{ref:u}):null};Ny.displayName="Presence";function S$(e){const[t,n]=L.useState(),i=L.useRef(null),o=L.useRef(e),u=L.useRef("none"),c=e?"mounted":"unmounted",[a,g]=w$(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const _=fb(i.current);u.current=a==="mounted"?_:"none"},[a]),bo(()=>{const _=i.current,S=o.current;if(S!==e){const A=u.current,E=fb(_);e?g("MOUNT"):E==="none"||(_==null?void 0:_.display)==="none"?g("UNMOUNT"):g(S&&A!==E?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,g]),bo(()=>{var _;if(t){let S;const N=(_=t.ownerDocument.defaultView)!=null?_:window,A=D=>{const $=fb(i.current).includes(D.animationName);if(D.target===t&&$&&(g("ANIMATION_END"),!o.current)){const G=t.style.animationFillMode;t.style.animationFillMode="forwards",S=N.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=G)})}},E=D=>{D.target===t&&(u.current=fb(i.current))};return t.addEventListener("animationstart",E),t.addEventListener("animationcancel",A),t.addEventListener("animationend",A),()=>{N.clearTimeout(S),t.removeEventListener("animationstart",E),t.removeEventListener("animationcancel",A),t.removeEventListener("animationend",A)}}else g("ANIMATION_END")},[t,g]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:L.useCallback(_=>{i.current=_?getComputedStyle(_):null,n(_)},[])}}function fb(e){return(e==null?void 0:e.animationName)||"none"}function j$(e){var i,o;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var C$=c4[" useId ".trim().toString()]||(()=>{}),T$=0;function Ll(e){const[t,n]=L.useState(C$());return bo(()=>{n(i=>i!=null?i:String(T$++))},[e]),e||(t?`radix-${t}`:"")}var k$=L.createContext(void 0);function N$(e){const t=L.useContext(k$);return e||t||"ltr"}function Cm(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>{var i;return(i=t.current)==null?void 0:i.call(t,...n)},[])}function M$(e,t=globalThis==null?void 0:globalThis.document){const n=Cm(e);L.useEffect(()=>{const i=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var E$="DismissableLayer",VS="dismissableLayer.update",A$="dismissableLayer.pointerDownOutside",P$="dismissableLayer.focusOutside",ON,z5=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),N1=L.forwardRef((e,t)=>{var de;const _e=e,{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:u,onInteractOutside:c,onDismiss:a}=_e,g=en(_e,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),_=L.useContext(z5),[S,N]=L.useState(null),A=(de=S==null?void 0:S.ownerDocument)!=null?de:globalThis==null?void 0:globalThis.document,[,E]=L.useState({}),D=fr(t,pe=>N(pe)),B=Array.from(_.layers),[$]=[..._.layersWithOutsidePointerEventsDisabled].slice(-1),G=B.indexOf($),W=S?B.indexOf(S):-1,J=_.layersWithOutsidePointerEventsDisabled.size>0,Z=W>=G,K=z$(pe=>{const Oe=pe.target,He=[..._.branches].some(We=>We.contains(Oe));!Z||He||(o==null||o(pe),c==null||c(pe),pe.defaultPrevented||a==null||a())},A),le=I$(pe=>{const Oe=pe.target;[..._.branches].some(We=>We.contains(Oe))||(u==null||u(pe),c==null||c(pe),pe.defaultPrevented||a==null||a())},A);return M$(pe=>{W===_.layers.size-1&&(i==null||i(pe),!pe.defaultPrevented&&a&&(pe.preventDefault(),a()))},A),L.useEffect(()=>{if(S)return n&&(_.layersWithOutsidePointerEventsDisabled.size===0&&(ON=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),_.layersWithOutsidePointerEventsDisabled.add(S)),_.layers.add(S),LN(),()=>{n&&_.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=ON)}},[S,A,n,_]),L.useEffect(()=>()=>{S&&(_.layers.delete(S),_.layersWithOutsidePointerEventsDisabled.delete(S),LN())},[S,_]),L.useEffect(()=>{const pe=()=>E({});return document.addEventListener(VS,pe),()=>document.removeEventListener(VS,pe)},[]),l.jsx(Ui.div,Me(te({},g),{ref:D,style:te({pointerEvents:J?Z?"auto":"none":void 0},e.style),onFocusCapture:ms(e.onFocusCapture,le.onFocusCapture),onBlurCapture:ms(e.onBlurCapture,le.onBlurCapture),onPointerDownCapture:ms(e.onPointerDownCapture,K.onPointerDownCapture)}))});N1.displayName=E$;var R$="DismissableLayerBranch",D$=L.forwardRef((e,t)=>{const n=L.useContext(z5),i=L.useRef(null),o=fr(t,i);return L.useEffect(()=>{const u=i.current;if(u)return n.branches.add(u),()=>{n.branches.delete(u)}},[n.branches]),l.jsx(Ui.div,Me(te({},e),{ref:o}))});D$.displayName=R$;function z$(e,t=globalThis==null?void 0:globalThis.document){const n=Cm(e),i=L.useRef(!1),o=L.useRef(()=>{});return L.useEffect(()=>{const u=a=>{if(a.target&&!i.current){let g=function(){I5(A$,n,_,{discrete:!0})};const _={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=g,t.addEventListener("click",o.current,{once:!0})):g()}else t.removeEventListener("click",o.current);i.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",u),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function I$(e,t=globalThis==null?void 0:globalThis.document){const n=Cm(e),i=L.useRef(!1);return L.useEffect(()=>{const o=u=>{u.target&&!i.current&&I5(P$,n,{originalEvent:u},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function LN(){const e=new CustomEvent(VS);document.dispatchEvent(e)}function I5(e,t,n,{discrete:i}){const o=n.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?f$(o,u):o.dispatchEvent(u)}var o2="focusScope.autoFocusOnMount",l2="focusScope.autoFocusOnUnmount",FN={bubbles:!1,cancelable:!0},O$="FocusScope",M1=L.forwardRef((e,t)=>{const B=e,{loop:n=!1,trapped:i=!1,onMountAutoFocus:o,onUnmountAutoFocus:u}=B,c=en(B,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[a,g]=L.useState(null),_=Cm(o),S=Cm(u),N=L.useRef(null),A=fr(t,$=>g($)),E=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(i){let $=function(Z){if(E.paused||!a)return;const K=Z.target;a.contains(K)?N.current=K:Rf(N.current,{select:!0})},G=function(Z){if(E.paused||!a)return;const K=Z.relatedTarget;K!==null&&(a.contains(K)||Rf(N.current,{select:!0}))},W=function(Z){if(document.activeElement===document.body)for(const le of Z)le.removedNodes.length>0&&Rf(a)};document.addEventListener("focusin",$),document.addEventListener("focusout",G);const J=new MutationObserver(W);return a&&J.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",$),document.removeEventListener("focusout",G),J.disconnect()}}},[i,a,E.paused]),L.useEffect(()=>{if(a){VN.add(E);const $=document.activeElement;if(!a.contains($)){const W=new CustomEvent(o2,FN);a.addEventListener(o2,_),a.dispatchEvent(W),W.defaultPrevented||(L$($$(O5(a)),{select:!0}),document.activeElement===$&&Rf(a))}return()=>{a.removeEventListener(o2,_),setTimeout(()=>{const W=new CustomEvent(l2,FN);a.addEventListener(l2,S),a.dispatchEvent(W),W.defaultPrevented||Rf($!=null?$:document.body,{select:!0}),a.removeEventListener(l2,S),VN.remove(E)},0)}}},[a,_,S,E]);const D=L.useCallback($=>{if(!n&&!i||E.paused)return;const G=$.key==="Tab"&&!$.altKey&&!$.ctrlKey&&!$.metaKey,W=document.activeElement;if(G&&W){const J=$.currentTarget,[Z,K]=F$(J);Z&&K?!$.shiftKey&&W===K?($.preventDefault(),n&&Rf(Z,{select:!0})):$.shiftKey&&W===Z&&($.preventDefault(),n&&Rf(K,{select:!0})):W===J&&$.preventDefault()}},[n,i,E.paused]);return l.jsx(Ui.div,Me(te({tabIndex:-1},c),{ref:A,onKeyDown:D}))});M1.displayName=O$;function L$(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(Rf(i,{select:t}),document.activeElement!==n)return}function F$(e){const t=O5(e),n=BN(t,e),i=BN(t.reverse(),e);return[n,i]}function O5(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function BN(e,t){for(const n of e)if(!B$(n,{upTo:t}))return n}function B$(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function V$(e){return e instanceof HTMLInputElement&&"select"in e}function Rf(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&V$(e)&&t&&e.select()}}var VN=U$();function U$(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=UN(e,t),e.unshift(t)},remove(t){var n;e=UN(e,t),(n=e[0])==null||n.resume()}}}function UN(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function $$(e){return e.filter(t=>t.tagName!=="A")}var H$="Portal",E1=L.forwardRef((e,t)=>{var g;const a=e,{container:n}=a,i=en(a,["container"]),[o,u]=L.useState(!1);bo(()=>u(!0),[]);const c=n||o&&((g=globalThis==null?void 0:globalThis.document)==null?void 0:g.body);return c?rP.createPortal(l.jsx(Ui.div,Me(te({},i),{ref:t})),c):null});E1.displayName=H$;var c2=0;function kC(){L.useEffect(()=>{var t,n;const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=e[0])!=null?t:$N()),document.body.insertAdjacentElement("beforeend",(n=e[1])!=null?n:$N()),c2++,()=>{c2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),c2--}},[])}function $N(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fd=function(){return fd=Object.assign||function(t){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},fd.apply(this,arguments)};function L5(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function q$(e,t,n){if(n||arguments.length===2)for(var i=0,o=t.length,u;i<o;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))}var iv="right-scroll-bar-position",sv="width-before-scroll-bar",G$="with-scroll-bars-hidden",W$="--removed-body-scroll-bar-size";function u2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Z$(e,t){var n=L.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var o=n.value;o!==i&&(n.value=i,n.callback(i,o))}}}})[0];return n.callback=t,n.facade}var Y$=typeof window!="undefined"?L.useLayoutEffect:L.useEffect,HN=new WeakMap;function X$(e,t){var n=Z$(null,function(i){return e.forEach(function(o){return u2(o,i)})});return Y$(function(){var i=HN.get(n);if(i){var o=new Set(i),u=new Set(e),c=n.current;o.forEach(function(a){u.has(a)||u2(a,null)}),u.forEach(function(a){o.has(a)||u2(a,c)})}HN.set(n,e)},[e]),n}function K$(e){return e}function Q$(e,t){t===void 0&&(t=K$);var n=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(u){var c=t(u,i);return n.push(c),function(){n=n.filter(function(a){return a!==c})}},assignSyncMedium:function(u){for(i=!0;n.length;){var c=n;n=[],c.forEach(u)}n={push:function(a){return u(a)},filter:function(){return n}}},assignMedium:function(u){i=!0;var c=[];if(n.length){var a=n;n=[],a.forEach(u),c=n}var g=function(){var S=c;c=[],S.forEach(u)},_=function(){return Promise.resolve().then(g)};_(),n={push:function(S){c.push(S),_()},filter:function(S){return c=c.filter(S),n}}}};return o}function J$(e){e===void 0&&(e={});var t=Q$(null);return t.options=fd({async:!0,ssr:!1},e),t}var F5=function(e){var t=e.sideCar,n=L5(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return L.createElement(i,fd({},n))};F5.isSideCarExport=!0;function eH(e,t){return e.useMedium(t),F5}var B5=J$(),d2=function(){},A1=L.forwardRef(function(e,t){var n=L.useRef(null),i=L.useState({onScrollCapture:d2,onWheelCapture:d2,onTouchMoveCapture:d2}),o=i[0],u=i[1],c=e.forwardProps,a=e.children,g=e.className,_=e.removeScrollBar,S=e.enabled,N=e.shards,A=e.sideCar,E=e.noRelative,D=e.noIsolation,B=e.inert,$=e.allowPinchZoom,G=e.as,W=G===void 0?"div":G,J=e.gapMode,Z=L5(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),K=A,le=X$([n,t]),_e=fd(fd({},Z),o);return L.createElement(L.Fragment,null,S&&L.createElement(K,{sideCar:B5,removeScrollBar:_,shards:N,noRelative:E,noIsolation:D,inert:B,setCallbacks:u,allowPinchZoom:!!$,lockRef:n,gapMode:J}),c?L.cloneElement(L.Children.only(a),fd(fd({},_e),{ref:le})):L.createElement(W,fd({},_e,{className:g,ref:le}),a))});A1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};A1.classNames={fullWidth:sv,zeroRight:iv};var tH=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function nH(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=tH();return t&&e.setAttribute("nonce",t),e}function iH(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function sH(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var rH=function(){var e=0,t=null;return{add:function(n){e==0&&(t=nH())&&(iH(t,n),sH(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},aH=function(){var e=rH();return function(t,n){L.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},V5=function(){var e=aH(),t=function(n){var i=n.styles,o=n.dynamic;return e(i,o),null};return t},oH={left:0,top:0,right:0,gap:0},h2=function(e){return parseInt(e||"",10)||0},lH=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[h2(n),h2(i),h2(o)]},cH=function(e){if(e===void 0&&(e="margin"),typeof window=="undefined")return oH;var t=lH(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},uH=V5(),iy="data-scroll-locked",dH=function(e,t,n,i){var o=e.left,u=e.top,c=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(G$,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(iy,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(iv,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(sv,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(iv," .").concat(iv,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(sv," .").concat(sv,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(iy,`] {
    `).concat(W$,": ").concat(a,`px;
  }
`)},qN=function(){var e=parseInt(document.body.getAttribute(iy)||"0",10);return isFinite(e)?e:0},hH=function(){L.useEffect(function(){return document.body.setAttribute(iy,(qN()+1).toString()),function(){var e=qN()-1;e<=0?document.body.removeAttribute(iy):document.body.setAttribute(iy,e.toString())}},[])},fH=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,o=i===void 0?"margin":i;hH();var u=L.useMemo(function(){return cH(o)},[o]);return L.createElement(uH,{styles:dH(u,!t,o,n?"":"!important")})},US=!1;if(typeof window!="undefined")try{var pb=Object.defineProperty({},"passive",{get:function(){return US=!0,!0}});window.addEventListener("test",pb,pb),window.removeEventListener("test",pb,pb)}catch(e){US=!1}var Lg=US?{passive:!1}:!1,pH=function(e){return e.tagName==="TEXTAREA"},U5=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!pH(e)&&n[t]==="visible")},mH=function(e){return U5(e,"overflowY")},gH=function(e){return U5(e,"overflowX")},GN=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot!="undefined"&&i instanceof ShadowRoot&&(i=i.host);var o=$5(e,i);if(o){var u=H5(e,i),c=u[1],a=u[2];if(c>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},yH=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},xH=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},$5=function(e,t){return e==="v"?mH(t):gH(t)},H5=function(e,t){return e==="v"?yH(t):xH(t)},_H=function(e,t){return e==="h"&&t==="rtl"?-1:1},bH=function(e,t,n,i,o){var u=_H(e,window.getComputedStyle(t).direction),c=u*i,a=n.target,g=t.contains(a),_=!1,S=c>0,N=0,A=0;do{var E=H5(e,a),D=E[0],B=E[1],$=E[2],G=B-$-u*D;(D||G)&&$5(e,a)&&(N+=G,A+=D),a=a.parentNode.host||a.parentNode}while(!g&&a!==document.body||g&&(t.contains(a)||t===a));return(S&&Math.abs(N)<1||!S&&Math.abs(A)<1)&&(_=!0),_},mb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},WN=function(e){return[e.deltaX,e.deltaY]},ZN=function(e){return e&&"current"in e?e.current:e},vH=function(e,t){return e[0]===t[0]&&e[1]===t[1]},wH=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},SH=0,Fg=[];function jH(e){var t=L.useRef([]),n=L.useRef([0,0]),i=L.useRef(),o=L.useState(SH++)[0],u=L.useState(V5)[0],c=L.useRef(e);L.useEffect(function(){c.current=e},[e]),L.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var B=q$([e.lockRef.current],(e.shards||[]).map(ZN),!0).filter(Boolean);return B.forEach(function($){return $.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),B.forEach(function($){return $.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=L.useCallback(function(B,$){if("touches"in B&&B.touches.length===2||B.type==="wheel"&&B.ctrlKey)return!c.current.allowPinchZoom;var G=mb(B),W=n.current,J="deltaX"in B?B.deltaX:W[0]-G[0],Z="deltaY"in B?B.deltaY:W[1]-G[1],K,le=B.target,_e=Math.abs(J)>Math.abs(Z)?"h":"v";if("touches"in B&&_e==="h"&&le.type==="range")return!1;var de=GN(_e,le);if(!de)return!0;if(de?K=_e:(K=_e==="v"?"h":"v",de=GN(_e,le)),!de)return!1;if(!i.current&&"changedTouches"in B&&(J||Z)&&(i.current=K),!K)return!0;var pe=i.current||K;return bH(pe,$,B,pe==="h"?J:Z)},[]),g=L.useCallback(function(B){var $=B;if(!(!Fg.length||Fg[Fg.length-1]!==u)){var G="deltaY"in $?WN($):mb($),W=t.current.filter(function(K){return K.name===$.type&&(K.target===$.target||$.target===K.shadowParent)&&vH(K.delta,G)})[0];if(W&&W.should){$.cancelable&&$.preventDefault();return}if(!W){var J=(c.current.shards||[]).map(ZN).filter(Boolean).filter(function(K){return K.contains($.target)}),Z=J.length>0?a($,J[0]):!c.current.noIsolation;Z&&$.cancelable&&$.preventDefault()}}},[]),_=L.useCallback(function(B,$,G,W){var J={name:B,delta:$,target:G,should:W,shadowParent:CH(G)};t.current.push(J),setTimeout(function(){t.current=t.current.filter(function(Z){return Z!==J})},1)},[]),S=L.useCallback(function(B){n.current=mb(B),i.current=void 0},[]),N=L.useCallback(function(B){_(B.type,WN(B),B.target,a(B,e.lockRef.current))},[]),A=L.useCallback(function(B){_(B.type,mb(B),B.target,a(B,e.lockRef.current))},[]);L.useEffect(function(){return Fg.push(u),e.setCallbacks({onScrollCapture:N,onWheelCapture:N,onTouchMoveCapture:A}),document.addEventListener("wheel",g,Lg),document.addEventListener("touchmove",g,Lg),document.addEventListener("touchstart",S,Lg),function(){Fg=Fg.filter(function(B){return B!==u}),document.removeEventListener("wheel",g,Lg),document.removeEventListener("touchmove",g,Lg),document.removeEventListener("touchstart",S,Lg)}},[]);var E=e.removeScrollBar,D=e.inert;return L.createElement(L.Fragment,null,D?L.createElement(u,{styles:wH(o)}):null,E?L.createElement(fH,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function CH(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const TH=eH(B5,jH);var P1=L.forwardRef(function(e,t){return L.createElement(A1,fd({},e,{ref:t,sideCar:TH}))});P1.classNames=A1.classNames;var kH=function(e){if(typeof document=="undefined")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Bg=new WeakMap,gb=new WeakMap,yb={},f2=0,q5=function(e){return e&&(e.host||q5(e.parentNode))},NH=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=q5(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},MH=function(e,t,n,i){var o=NH(t,Array.isArray(e)?e:[e]);yb[n]||(yb[n]=new WeakMap);var u=yb[n],c=[],a=new Set,g=new Set(o),_=function(N){!N||a.has(N)||(a.add(N),_(N.parentNode))};o.forEach(_);var S=function(N){!N||g.has(N)||Array.prototype.forEach.call(N.children,function(A){if(a.has(A))S(A);else try{var E=A.getAttribute(i),D=E!==null&&E!=="false",B=(Bg.get(A)||0)+1,$=(u.get(A)||0)+1;Bg.set(A,B),u.set(A,$),c.push(A),B===1&&D&&gb.set(A,!0),$===1&&A.setAttribute(n,"true"),D||A.setAttribute(i,"true")}catch(G){console.error("aria-hidden: cannot operate on ",A,G)}})};return S(t),a.clear(),f2++,function(){c.forEach(function(N){var A=Bg.get(N)-1,E=u.get(N)-1;Bg.set(N,A),u.set(N,E),A||(gb.has(N)||N.removeAttribute(i),gb.delete(N)),E||N.removeAttribute(n)}),f2--,f2||(Bg=new WeakMap,Bg=new WeakMap,gb=new WeakMap,yb={})}},NC=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),o=kH(e);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live], script"))),MH(i,o,n,"aria-hidden")):function(){return null}},R1="Dialog",[G5,Yae]=n_(R1),[EH,ju]=G5(R1),W5=e=>{const{__scopeDialog:t,children:n,open:i,defaultOpen:o,onOpenChange:u,modal:c=!0}=e,a=L.useRef(null),g=L.useRef(null),[_,S]=qv({prop:i,defaultProp:o!=null?o:!1,onChange:u,caller:R1});return l.jsx(EH,{scope:t,triggerRef:a,contentRef:g,contentId:Ll(),titleId:Ll(),descriptionId:Ll(),open:_,onOpenChange:S,onOpenToggle:L.useCallback(()=>S(N=>!N),[S]),modal:c,children:n})};W5.displayName=R1;var Z5="DialogTrigger",AH=L.forwardRef((e,t)=>{const c=e,{__scopeDialog:n}=c,i=en(c,["__scopeDialog"]),o=ju(Z5,n),u=fr(t,o.triggerRef);return l.jsx(Ui.button,Me(te({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":AC(o.open)},i),{ref:u,onClick:ms(e.onClick,o.onOpenToggle)}))});AH.displayName=Z5;var MC="DialogPortal",[PH,Y5]=G5(MC,{forceMount:void 0}),X5=e=>{const{__scopeDialog:t,forceMount:n,children:i,container:o}=e,u=ju(MC,t);return l.jsx(PH,{scope:t,forceMount:n,children:L.Children.map(i,c=>l.jsx(Ny,{present:n||u.open,children:l.jsx(E1,{asChild:!0,container:o,children:c})}))})};X5.displayName=MC;var Gv="DialogOverlay",K5=L.forwardRef((e,t)=>{const n=Y5(Gv,e.__scopeDialog),c=e,{forceMount:i=n.forceMount}=c,o=en(c,["forceMount"]),u=ju(Gv,e.__scopeDialog);return u.modal?l.jsx(Ny,{present:i||u.open,children:l.jsx(DH,Me(te({},o),{ref:t}))}):null});K5.displayName=Gv;var RH=bm("DialogOverlay.RemoveScroll"),DH=L.forwardRef((e,t)=>{const u=e,{__scopeDialog:n}=u,i=en(u,["__scopeDialog"]),o=ju(Gv,n);return l.jsx(P1,{as:RH,allowPinchZoom:!0,shards:[o.contentRef],children:l.jsx(Ui.div,Me(te({"data-state":AC(o.open)},i),{ref:t,style:te({pointerEvents:"auto"},i.style)}))})}),Tm="DialogContent",Q5=L.forwardRef((e,t)=>{const n=Y5(Tm,e.__scopeDialog),c=e,{forceMount:i=n.forceMount}=c,o=en(c,["forceMount"]),u=ju(Tm,e.__scopeDialog);return l.jsx(Ny,{present:i||u.open,children:u.modal?l.jsx(zH,Me(te({},o),{ref:t})):l.jsx(IH,Me(te({},o),{ref:t}))})});Q5.displayName=Tm;var zH=L.forwardRef((e,t)=>{const n=ju(Tm,e.__scopeDialog),i=L.useRef(null),o=fr(t,n.contentRef,i);return L.useEffect(()=>{const u=i.current;if(u)return NC(u)},[]),l.jsx(J5,Me(te({},e),{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ms(e.onCloseAutoFocus,u=>{var c;u.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:ms(e.onPointerDownOutside,u=>{const c=u.detail.originalEvent,a=c.button===0&&c.ctrlKey===!0;(c.button===2||a)&&u.preventDefault()}),onFocusOutside:ms(e.onFocusOutside,u=>u.preventDefault())}))}),IH=L.forwardRef((e,t)=>{const n=ju(Tm,e.__scopeDialog),i=L.useRef(!1),o=L.useRef(!1);return l.jsx(J5,Me(te({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var c,a;(c=e.onCloseAutoFocus)==null||c.call(e,u),u.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),u.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:u=>{var g,_;(g=e.onInteractOutside)==null||g.call(e,u),u.defaultPrevented||(i.current=!0,u.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=u.target;((_=n.triggerRef.current)==null?void 0:_.contains(c))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&o.current&&u.preventDefault()}}))}),J5=L.forwardRef((e,t)=>{const S=e,{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:u}=S,c=en(S,["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),a=ju(Tm,n),g=L.useRef(null),_=fr(t,g);return kC(),l.jsxs(l.Fragment,{children:[l.jsx(M1,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:u,children:l.jsx(N1,Me(te({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":AC(a.open)},c),{ref:_,onDismiss:()=>a.onOpenChange(!1)}))}),l.jsxs(l.Fragment,{children:[l.jsx(BH,{titleId:a.titleId}),l.jsx(UH,{contentRef:g,descriptionId:a.descriptionId})]})]})}),EC="DialogTitle",OH=L.forwardRef((e,t)=>{const u=e,{__scopeDialog:n}=u,i=en(u,["__scopeDialog"]),o=ju(EC,n);return l.jsx(Ui.h2,Me(te({id:o.titleId},i),{ref:t}))});OH.displayName=EC;var e3="DialogDescription",LH=L.forwardRef((e,t)=>{const u=e,{__scopeDialog:n}=u,i=en(u,["__scopeDialog"]),o=ju(e3,n);return l.jsx(Ui.p,Me(te({id:o.descriptionId},i),{ref:t}))});LH.displayName=e3;var t3="DialogClose",FH=L.forwardRef((e,t)=>{const u=e,{__scopeDialog:n}=u,i=en(u,["__scopeDialog"]),o=ju(t3,n);return l.jsx(Ui.button,Me(te({type:"button"},i),{ref:t,onClick:ms(e.onClick,()=>o.onOpenChange(!1))}))});FH.displayName=t3;function AC(e){return e?"open":"closed"}var n3="DialogTitleWarning",[Xae,i3]=g$(n3,{contentName:Tm,titleName:EC,docsSlug:"dialog"}),BH=({titleId:e})=>{const t=i3(n3),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return L.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},VH="DialogDescriptionWarning",UH=({contentRef:e,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${i3(VH).contentName}}.`;return L.useEffect(()=>{var u;const o=(u=e.current)==null?void 0:u.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(i))},[i,e,t]),null},$H=W5,HH=X5,qH=K5,GH=Q5;function WH(e){const t=L.useRef({value:e,previous:e});return L.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function ZH(e){const[t,n]=L.useState(void 0);return bo(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const u=o[0];let c,a;if("borderBoxSize"in u){const g=u.borderBoxSize,_=Array.isArray(g)?g[0]:g;c=_.inlineSize,a=_.blockSize}else c=e.offsetWidth,a=e.offsetHeight;n({width:c,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}const YH=["top","right","bottom","left"],Hf=Math.min,Ol=Math.max,Wv=Math.round,xb=Math.floor,gd=e=>({x:e,y:e}),XH={left:"right",right:"left",bottom:"top",top:"bottom"},KH={start:"end",end:"start"};function $S(e,t,n){return Ol(e,Hf(t,n))}function Nh(e,t){return typeof e=="function"?e(t):e}function Mh(e){return e.split("-")[0]}function My(e){return e.split("-")[1]}function PC(e){return e==="x"?"y":"x"}function RC(e){return e==="y"?"height":"width"}function Sh(e){return["top","bottom"].includes(Mh(e))?"y":"x"}function DC(e){return PC(Sh(e))}function QH(e,t,n){n===void 0&&(n=!1);const i=My(e),o=DC(e),u=RC(o);let c=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(c=Zv(c)),[c,Zv(c)]}function JH(e){const t=Zv(e);return[HS(e),t,HS(t)]}function HS(e){return e.replace(/start|end/g,t=>KH[t])}function eq(e,t,n){const i=["left","right"],o=["right","left"],u=["top","bottom"],c=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:i:t?i:o;case"left":case"right":return t?u:c;default:return[]}}function tq(e,t,n,i){const o=My(e);let u=eq(Mh(e),n==="start",i);return o&&(u=u.map(c=>c+"-"+o),t&&(u=u.concat(u.map(HS)))),u}function Zv(e){return e.replace(/left|right|bottom|top/g,t=>XH[t])}function nq(e){return te({top:0,right:0,bottom:0,left:0},e)}function s3(e){return typeof e!="number"?nq(e):{top:e,right:e,bottom:e,left:e}}function Yv(e){const{x:t,y:n,width:i,height:o}=e;return{width:i,height:o,top:n,left:t,right:t+i,bottom:n+o,x:t,y:n}}function YN(e,t,n){let{reference:i,floating:o}=e;const u=Sh(t),c=DC(t),a=RC(c),g=Mh(t),_=u==="y",S=i.x+i.width/2-o.width/2,N=i.y+i.height/2-o.height/2,A=i[a]/2-o[a]/2;let E;switch(g){case"top":E={x:S,y:i.y-o.height};break;case"bottom":E={x:S,y:i.y+i.height};break;case"right":E={x:i.x+i.width,y:N};break;case"left":E={x:i.x-o.width,y:N};break;default:E={x:i.x,y:i.y}}switch(My(t)){case"start":E[c]-=A*(n&&_?-1:1);break;case"end":E[c]+=A*(n&&_?-1:1);break}return E}const iq=(e,t,n)=>Ht(null,null,function*(){const{placement:i="bottom",strategy:o="absolute",middleware:u=[],platform:c}=n,a=u.filter(Boolean),g=yield c.isRTL==null?void 0:c.isRTL(t);let _=yield c.getElementRects({reference:e,floating:t,strategy:o}),{x:S,y:N}=YN(_,i,g),A=i,E={},D=0;for(let B=0;B<a.length;B++){const{name:$,fn:G}=a[B],{x:W,y:J,data:Z,reset:K}=yield G({x:S,y:N,initialPlacement:i,placement:A,strategy:o,middlewareData:E,rects:_,platform:c,elements:{reference:e,floating:t}});S=W!=null?W:S,N=J!=null?J:N,E=Me(te({},E),{[$]:te(te({},E[$]),Z)}),K&&D<=50&&(D++,typeof K=="object"&&(K.placement&&(A=K.placement),K.rects&&(_=K.rects===!0?yield c.getElementRects({reference:e,floating:t,strategy:o}):K.rects),{x:S,y:N}=YN(_,A,g)),B=-1)}return{x:S,y:N,placement:A,strategy:o,middlewareData:E}});function kx(e,t){return Ht(this,null,function*(){var n;t===void 0&&(t={});const{x:i,y:o,platform:u,rects:c,elements:a,strategy:g}=e,{boundary:_="clippingAncestors",rootBoundary:S="viewport",elementContext:N="floating",altBoundary:A=!1,padding:E=0}=Nh(t,e),D=s3(E),$=a[A?N==="floating"?"reference":"floating":N],G=Yv(yield u.getClippingRect({element:(n=yield u.isElement==null?void 0:u.isElement($))==null||n?$:$.contextElement||(yield u.getDocumentElement==null?void 0:u.getDocumentElement(a.floating)),boundary:_,rootBoundary:S,strategy:g})),W=N==="floating"?{x:i,y:o,width:c.floating.width,height:c.floating.height}:c.reference,J=yield u.getOffsetParent==null?void 0:u.getOffsetParent(a.floating),Z=(yield u.isElement==null?void 0:u.isElement(J))?(yield u.getScale==null?void 0:u.getScale(J))||{x:1,y:1}:{x:1,y:1},K=Yv(u.convertOffsetParentRelativeRectToViewportRelativeRect?yield u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:W,offsetParent:J,strategy:g}):W);return{top:(G.top-K.top+D.top)/Z.y,bottom:(K.bottom-G.bottom+D.bottom)/Z.y,left:(G.left-K.left+D.left)/Z.x,right:(K.right-G.right+D.right)/Z.x}})}const sq=e=>({name:"arrow",options:e,fn(n){return Ht(this,null,function*(){const{x:i,y:o,placement:u,rects:c,platform:a,elements:g,middlewareData:_}=n,{element:S,padding:N=0}=Nh(e,n)||{};if(S==null)return{};const A=s3(N),E={x:i,y:o},D=DC(u),B=RC(D),$=yield a.getDimensions(S),G=D==="y",W=G?"top":"left",J=G?"bottom":"right",Z=G?"clientHeight":"clientWidth",K=c.reference[B]+c.reference[D]-E[D]-c.floating[B],le=E[D]-c.reference[D],_e=yield a.getOffsetParent==null?void 0:a.getOffsetParent(S);let de=_e?_e[Z]:0;(!de||!(yield a.isElement==null?void 0:a.isElement(_e)))&&(de=g.floating[Z]||c.floating[B]);const pe=K/2-le/2,Oe=de/2-$[B]/2-1,He=Hf(A[W],Oe),We=Hf(A[J],Oe),st=He,At=de-$[B]-We,vt=de/2-$[B]/2+pe,ze=$S(st,vt,At),Qe=!_.arrow&&My(u)!=null&&vt!==ze&&c.reference[B]/2-(vt<st?He:We)-$[B]/2<0,Je=Qe?vt<st?vt-st:vt-At:0;return{[D]:E[D]+Je,data:te({[D]:ze,centerOffset:vt-ze-Je},Qe&&{alignmentOffset:Je}),reset:Qe}})}}),rq=function(e){return e===void 0&&(e={}),{name:"flip",options:e,fn(n){return Ht(this,null,function*(){var i,o;const{placement:u,middlewareData:c,rects:a,initialPlacement:g,platform:_,elements:S}=n,ze=Nh(e,n),{mainAxis:N=!0,crossAxis:A=!0,fallbackPlacements:E,fallbackStrategy:D="bestFit",fallbackAxisSideDirection:B="none",flipAlignment:$=!0}=ze,G=en(ze,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((i=c.arrow)!=null&&i.alignmentOffset)return{};const W=Mh(u),J=Sh(g),Z=Mh(g)===g,K=yield _.isRTL==null?void 0:_.isRTL(S.floating),le=E||(Z||!$?[Zv(g)]:JH(g)),_e=B!=="none";!E&&_e&&le.push(...tq(g,$,B,K));const de=[g,...le],pe=yield kx(n,G),Oe=[];let He=((o=c.flip)==null?void 0:o.overflows)||[];if(N&&Oe.push(pe[W]),A){const Qe=QH(u,a,K);Oe.push(pe[Qe[0]],pe[Qe[1]])}if(He=[...He,{placement:u,overflows:Oe}],!Oe.every(Qe=>Qe<=0)){var We,st;const Qe=(((We=c.flip)==null?void 0:We.index)||0)+1,Je=de[Qe];if(Je){var At;const fe=A==="alignment"?J!==Sh(Je):!1,Xe=((At=He[0])==null?void 0:At.overflows[0])>0;if(!fe||Xe)return{data:{index:Qe,overflows:He},reset:{placement:Je}}}let Pt=(st=He.filter(fe=>fe.overflows[0]<=0).sort((fe,Xe)=>fe.overflows[1]-Xe.overflows[1])[0])==null?void 0:st.placement;if(!Pt)switch(D){case"bestFit":{var vt;const fe=(vt=He.filter(Xe=>{if(_e){const tt=Sh(Xe.placement);return tt===J||tt==="y"}return!0}).map(Xe=>[Xe.placement,Xe.overflows.filter(tt=>tt>0).reduce((tt,Ae)=>tt+Ae,0)]).sort((Xe,tt)=>Xe[1]-tt[1])[0])==null?void 0:vt[0];fe&&(Pt=fe);break}case"initialPlacement":Pt=g;break}if(u!==Pt)return{reset:{placement:Pt}}}return{}})}}};function XN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function KN(e){return YH.some(t=>e[t]>=0)}const aq=function(e){return e===void 0&&(e={}),{name:"hide",options:e,fn(n){return Ht(this,null,function*(){const{rects:i}=n,c=Nh(e,n),{strategy:o="referenceHidden"}=c,u=en(c,["strategy"]);switch(o){case"referenceHidden":{const a=yield kx(n,Me(te({},u),{elementContext:"reference"})),g=XN(a,i.reference);return{data:{referenceHiddenOffsets:g,referenceHidden:KN(g)}}}case"escaped":{const a=yield kx(n,Me(te({},u),{altBoundary:!0})),g=XN(a,i.floating);return{data:{escapedOffsets:g,escaped:KN(g)}}}default:return{}}})}}};function oq(e,t){return Ht(this,null,function*(){const{placement:n,platform:i,elements:o}=e,u=yield i.isRTL==null?void 0:i.isRTL(o.floating),c=Mh(n),a=My(n),g=Sh(n)==="y",_=["left","top"].includes(c)?-1:1,S=u&&g?-1:1,N=Nh(t,e);let{mainAxis:A,crossAxis:E,alignmentAxis:D}=typeof N=="number"?{mainAxis:N,crossAxis:0,alignmentAxis:null}:{mainAxis:N.mainAxis||0,crossAxis:N.crossAxis||0,alignmentAxis:N.alignmentAxis};return a&&typeof D=="number"&&(E=a==="end"?D*-1:D),g?{x:E*S,y:A*_}:{x:A*_,y:E*S}})}const lq=function(e){return e===void 0&&(e=0),{name:"offset",options:e,fn(n){return Ht(this,null,function*(){var i,o;const{x:u,y:c,placement:a,middlewareData:g}=n,_=yield oq(n,e);return a===((i=g.offset)==null?void 0:i.placement)&&(o=g.arrow)!=null&&o.alignmentOffset?{}:{x:u+_.x,y:c+_.y,data:Me(te({},_),{placement:a})}})}}},cq=function(e){return e===void 0&&(e={}),{name:"shift",options:e,fn(n){return Ht(this,null,function*(){const{x:i,y:o,placement:u}=n,G=Nh(e,n),{mainAxis:c=!0,crossAxis:a=!1,limiter:g={fn:W=>{let{x:J,y:Z}=W;return{x:J,y:Z}}}}=G,_=en(G,["mainAxis","crossAxis","limiter"]),S={x:i,y:o},N=yield kx(n,_),A=Sh(Mh(u)),E=PC(A);let D=S[E],B=S[A];if(c){const W=E==="y"?"top":"left",J=E==="y"?"bottom":"right",Z=D+N[W],K=D-N[J];D=$S(Z,D,K)}if(a){const W=A==="y"?"top":"left",J=A==="y"?"bottom":"right",Z=B+N[W],K=B-N[J];B=$S(Z,B,K)}const $=g.fn(Me(te({},n),{[E]:D,[A]:B}));return Me(te({},$),{data:{x:$.x-i,y:$.y-o,enabled:{[E]:c,[A]:a}}})})}}},uq=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:o,rects:u,middlewareData:c}=t,{offset:a=0,mainAxis:g=!0,crossAxis:_=!0}=Nh(e,t),S={x:n,y:i},N=Sh(o),A=PC(N);let E=S[A],D=S[N];const B=Nh(a,t),$=typeof B=="number"?{mainAxis:B,crossAxis:0}:te({mainAxis:0,crossAxis:0},B);if(g){const J=A==="y"?"height":"width",Z=u.reference[A]-u.floating[J]+$.mainAxis,K=u.reference[A]+u.reference[J]-$.mainAxis;E<Z?E=Z:E>K&&(E=K)}if(_){var G,W;const J=A==="y"?"width":"height",Z=["top","left"].includes(Mh(o)),K=u.reference[N]-u.floating[J]+(Z&&((G=c.offset)==null?void 0:G[N])||0)+(Z?0:$.crossAxis),le=u.reference[N]+u.reference[J]+(Z?0:((W=c.offset)==null?void 0:W[N])||0)-(Z?$.crossAxis:0);D<K?D=K:D>le&&(D=le)}return{[A]:E,[N]:D}}}},dq=function(e){return e===void 0&&(e={}),{name:"size",options:e,fn(n){return Ht(this,null,function*(){var i,o;const{placement:u,rects:c,platform:a,elements:g}=n,He=Nh(e,n),{apply:_=()=>{}}=He,S=en(He,["apply"]),N=yield kx(n,S),A=Mh(u),E=My(u),D=Sh(u)==="y",{width:B,height:$}=c.floating;let G,W;A==="top"||A==="bottom"?(G=A,W=E===((yield a.isRTL==null?void 0:a.isRTL(g.floating))?"start":"end")?"left":"right"):(W=A,G=E==="end"?"top":"bottom");const J=$-N.top-N.bottom,Z=B-N.left-N.right,K=Hf($-N[G],J),le=Hf(B-N[W],Z),_e=!n.middlewareData.shift;let de=K,pe=le;if((i=n.middlewareData.shift)!=null&&i.enabled.x&&(pe=Z),(o=n.middlewareData.shift)!=null&&o.enabled.y&&(de=J),_e&&!E){const We=Ol(N.left,0),st=Ol(N.right,0),At=Ol(N.top,0),vt=Ol(N.bottom,0);D?pe=B-2*(We!==0||st!==0?We+st:Ol(N.left,N.right)):de=$-2*(At!==0||vt!==0?At+vt:Ol(N.top,N.bottom))}yield _(Me(te({},n),{availableWidth:pe,availableHeight:de}));const Oe=yield a.getDimensions(g.floating);return B!==Oe.width||$!==Oe.height?{reset:{rects:!0}}:{}})}}};function D1(){return typeof window!="undefined"}function Ey(e){return r3(e)?(e.nodeName||"").toLowerCase():"#document"}function Fl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function jd(e){var t;return(t=(r3(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function r3(e){return D1()?e instanceof Node||e instanceof Fl(e).Node:!1}function _u(e){return D1()?e instanceof Element||e instanceof Fl(e).Element:!1}function Sd(e){return D1()?e instanceof HTMLElement||e instanceof Fl(e).HTMLElement:!1}function QN(e){return!D1()||typeof ShadowRoot=="undefined"?!1:e instanceof ShadowRoot||e instanceof Fl(e).ShadowRoot}function i_(e){const{overflow:t,overflowX:n,overflowY:i,display:o}=bu(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(o)}function hq(e){return["table","td","th"].includes(Ey(e))}function z1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(n){return!1}})}function zC(e){const t=IC(),n=_u(e)?bu(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function fq(e){let t=qf(e);for(;Sd(t)&&!uy(t);){if(zC(t))return t;if(z1(t))return null;t=qf(t)}return null}function IC(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function uy(e){return["html","body","#document"].includes(Ey(e))}function bu(e){return Fl(e).getComputedStyle(e)}function I1(e){return _u(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qf(e){if(Ey(e)==="html")return e;const t=e.assignedSlot||e.parentNode||QN(e)&&e.host||jd(e);return QN(t)?t.host:t}function a3(e){const t=qf(e);return uy(t)?e.ownerDocument?e.ownerDocument.body:e.body:Sd(t)&&i_(t)?t:a3(t)}function Nx(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=a3(e),u=o===((i=e.ownerDocument)==null?void 0:i.body),c=Fl(o);if(u){const a=qS(c);return t.concat(c,c.visualViewport||[],i_(o)?o:[],a&&n?Nx(a):[])}return t.concat(o,Nx(o,[],n))}function qS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function o3(e){const t=bu(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const o=Sd(e),u=o?e.offsetWidth:n,c=o?e.offsetHeight:i,a=Wv(n)!==u||Wv(i)!==c;return a&&(n=u,i=c),{width:n,height:i,$:a}}function OC(e){return _u(e)?e:e.contextElement}function sy(e){const t=OC(e);if(!Sd(t))return gd(1);const n=t.getBoundingClientRect(),{width:i,height:o,$:u}=o3(t);let c=(u?Wv(n.width):n.width)/i,a=(u?Wv(n.height):n.height)/o;return(!c||!Number.isFinite(c))&&(c=1),(!a||!Number.isFinite(a))&&(a=1),{x:c,y:a}}const pq=gd(0);function l3(e){const t=Fl(e);return!IC()||!t.visualViewport?pq:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mq(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Fl(e)?!1:t}function km(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),u=OC(e);let c=gd(1);t&&(i?_u(i)&&(c=sy(i)):c=sy(e));const a=mq(u,n,i)?l3(u):gd(0);let g=(o.left+a.x)/c.x,_=(o.top+a.y)/c.y,S=o.width/c.x,N=o.height/c.y;if(u){const A=Fl(u),E=i&&_u(i)?Fl(i):i;let D=A,B=qS(D);for(;B&&i&&E!==D;){const $=sy(B),G=B.getBoundingClientRect(),W=bu(B),J=G.left+(B.clientLeft+parseFloat(W.paddingLeft))*$.x,Z=G.top+(B.clientTop+parseFloat(W.paddingTop))*$.y;g*=$.x,_*=$.y,S*=$.x,N*=$.y,g+=J,_+=Z,D=Fl(B),B=qS(D)}}return Yv({width:S,height:N,x:g,y:_})}function LC(e,t){const n=I1(e).scrollLeft;return t?t.left+n:km(jd(e)).left+n}function c3(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=i.left+t.scrollLeft-(n?0:LC(e,i)),u=i.top+t.scrollTop;return{x:o,y:u}}function gq(e){let{elements:t,rect:n,offsetParent:i,strategy:o}=e;const u=o==="fixed",c=jd(i),a=t?z1(t.floating):!1;if(i===c||a&&u)return n;let g={scrollLeft:0,scrollTop:0},_=gd(1);const S=gd(0),N=Sd(i);if((N||!N&&!u)&&((Ey(i)!=="body"||i_(c))&&(g=I1(i)),Sd(i))){const E=km(i);_=sy(i),S.x=E.x+i.clientLeft,S.y=E.y+i.clientTop}const A=c&&!N&&!u?c3(c,g,!0):gd(0);return{width:n.width*_.x,height:n.height*_.y,x:n.x*_.x-g.scrollLeft*_.x+S.x+A.x,y:n.y*_.y-g.scrollTop*_.y+S.y+A.y}}function yq(e){return Array.from(e.getClientRects())}function xq(e){const t=jd(e),n=I1(e),i=e.ownerDocument.body,o=Ol(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),u=Ol(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let c=-n.scrollLeft+LC(e);const a=-n.scrollTop;return bu(i).direction==="rtl"&&(c+=Ol(t.clientWidth,i.clientWidth)-o),{width:o,height:u,x:c,y:a}}function _q(e,t){const n=Fl(e),i=jd(e),o=n.visualViewport;let u=i.clientWidth,c=i.clientHeight,a=0,g=0;if(o){u=o.width,c=o.height;const _=IC();(!_||_&&t==="fixed")&&(a=o.offsetLeft,g=o.offsetTop)}return{width:u,height:c,x:a,y:g}}function bq(e,t){const n=km(e,!0,t==="fixed"),i=n.top+e.clientTop,o=n.left+e.clientLeft,u=Sd(e)?sy(e):gd(1),c=e.clientWidth*u.x,a=e.clientHeight*u.y,g=o*u.x,_=i*u.y;return{width:c,height:a,x:g,y:_}}function JN(e,t,n){let i;if(t==="viewport")i=_q(e,n);else if(t==="document")i=xq(jd(e));else if(_u(t))i=bq(t,n);else{const o=l3(e);i={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Yv(i)}function u3(e,t){const n=qf(e);return n===t||!_u(n)||uy(n)?!1:bu(n).position==="fixed"||u3(n,t)}function vq(e,t){const n=t.get(e);if(n)return n;let i=Nx(e,[],!1).filter(a=>_u(a)&&Ey(a)!=="body"),o=null;const u=bu(e).position==="fixed";let c=u?qf(e):e;for(;_u(c)&&!uy(c);){const a=bu(c),g=zC(c);!g&&a.position==="fixed"&&(o=null),(u?!g&&!o:!g&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||i_(c)&&!g&&u3(e,c))?i=i.filter(S=>S!==c):o=a,c=qf(c)}return t.set(e,i),i}function wq(e){let{element:t,boundary:n,rootBoundary:i,strategy:o}=e;const c=[...n==="clippingAncestors"?z1(t)?[]:vq(t,this._c):[].concat(n),i],a=c[0],g=c.reduce((_,S)=>{const N=JN(t,S,o);return _.top=Ol(N.top,_.top),_.right=Hf(N.right,_.right),_.bottom=Hf(N.bottom,_.bottom),_.left=Ol(N.left,_.left),_},JN(t,a,o));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function Sq(e){const{width:t,height:n}=o3(e);return{width:t,height:n}}function jq(e,t,n){const i=Sd(t),o=jd(t),u=n==="fixed",c=km(e,!0,u,t);let a={scrollLeft:0,scrollTop:0};const g=gd(0);function _(){g.x=LC(o)}if(i||!i&&!u)if((Ey(t)!=="body"||i_(o))&&(a=I1(t)),i){const E=km(t,!0,u,t);g.x=E.x+t.clientLeft,g.y=E.y+t.clientTop}else o&&_();u&&!i&&o&&_();const S=o&&!i&&!u?c3(o,a):gd(0),N=c.left+a.scrollLeft-g.x-S.x,A=c.top+a.scrollTop-g.y-S.y;return{x:N,y:A,width:c.width,height:c.height}}function p2(e){return bu(e).position==="static"}function eM(e,t){if(!Sd(e)||bu(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return jd(e)===n&&(n=n.ownerDocument.body),n}function d3(e,t){const n=Fl(e);if(z1(e))return n;if(!Sd(e)){let o=qf(e);for(;o&&!uy(o);){if(_u(o)&&!p2(o))return o;o=qf(o)}return n}let i=eM(e,t);for(;i&&hq(i)&&p2(i);)i=eM(i,t);return i&&uy(i)&&p2(i)&&!zC(i)?n:i||fq(e)||n}const Cq=function(e){return Ht(this,null,function*(){const t=this.getOffsetParent||d3,n=this.getDimensions,i=yield n(e.floating);return{reference:jq(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}})};function Tq(e){return bu(e).direction==="rtl"}const kq={convertOffsetParentRelativeRectToViewportRelativeRect:gq,getDocumentElement:jd,getClippingRect:wq,getOffsetParent:d3,getElementRects:Cq,getClientRects:yq,getDimensions:Sq,getScale:sy,isElement:_u,isRTL:Tq};function h3(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Nq(e,t){let n=null,i;const o=jd(e);function u(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function c(a,g){a===void 0&&(a=!1),g===void 0&&(g=1),u();const _=e.getBoundingClientRect(),{left:S,top:N,width:A,height:E}=_;if(a||t(),!A||!E)return;const D=xb(N),B=xb(o.clientWidth-(S+A)),$=xb(o.clientHeight-(N+E)),G=xb(S),J={rootMargin:-D+"px "+-B+"px "+-$+"px "+-G+"px",threshold:Ol(0,Hf(1,g))||1};let Z=!0;function K(le){const _e=le[0].intersectionRatio;if(_e!==g){if(!Z)return c();_e?c(!1,_e):i=setTimeout(()=>{c(!1,1e-7)},1e3)}_e===1&&!h3(_,e.getBoundingClientRect())&&c(),Z=!1}try{n=new IntersectionObserver(K,Me(te({},J),{root:o.ownerDocument}))}catch(le){n=new IntersectionObserver(K,J)}n.observe(e)}return c(!0),u}function Mq(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:u=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:g=!1}=i,_=OC(e),S=o||u?[..._?Nx(_):[],...Nx(t)]:[];S.forEach(G=>{o&&G.addEventListener("scroll",n,{passive:!0}),u&&G.addEventListener("resize",n)});const N=_&&a?Nq(_,n):null;let A=-1,E=null;c&&(E=new ResizeObserver(G=>{let[W]=G;W&&W.target===_&&E&&(E.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var J;(J=E)==null||J.observe(t)})),n()}),_&&!g&&E.observe(_),E.observe(t));let D,B=g?km(e):null;g&&$();function $(){const G=km(e);B&&!h3(B,G)&&n(),B=G,D=requestAnimationFrame($)}return n(),()=>{var G;S.forEach(W=>{o&&W.removeEventListener("scroll",n),u&&W.removeEventListener("resize",n)}),N==null||N(),(G=E)==null||G.disconnect(),E=null,g&&cancelAnimationFrame(D)}}const Eq=lq,Aq=cq,Pq=rq,Rq=dq,Dq=aq,tM=sq,zq=uq,Iq=(e,t,n)=>{const i=new Map,o=te({platform:kq},n),u=Me(te({},o.platform),{_c:i});return iq(e,t,Me(te({},o),{platform:u}))};var rv=typeof document!="undefined"?L.useLayoutEffect:L.useEffect;function Xv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!Xv(e[i],t[i]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,o[i]))return!1;for(i=n;i--!==0;){const u=o[i];if(!(u==="_owner"&&e.$$typeof)&&!Xv(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function f3(e){return typeof window=="undefined"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function nM(e,t){const n=f3(e);return Math.round(t*n)/n}function m2(e){const t=L.useRef(e);return rv(()=>{t.current=e}),t}function Oq(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:o,elements:{reference:u,floating:c}={},transform:a=!0,whileElementsMounted:g,open:_}=e,[S,N]=L.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[A,E]=L.useState(i);Xv(A,i)||E(i);const[D,B]=L.useState(null),[$,G]=L.useState(null),W=L.useCallback(Je=>{Je!==le.current&&(le.current=Je,B(Je))},[]),J=L.useCallback(Je=>{Je!==_e.current&&(_e.current=Je,G(Je))},[]),Z=u||D,K=c||$,le=L.useRef(null),_e=L.useRef(null),de=L.useRef(S),pe=g!=null,Oe=m2(g),He=m2(o),We=m2(_),st=L.useCallback(()=>{if(!le.current||!_e.current)return;const Je={placement:t,strategy:n,middleware:A};He.current&&(Je.platform=He.current),Iq(le.current,_e.current,Je).then(Pt=>{const fe=Me(te({},Pt),{isPositioned:We.current!==!1});At.current&&!Xv(de.current,fe)&&(de.current=fe,Zx.flushSync(()=>{N(fe)}))})},[A,t,n,He,We]);rv(()=>{_===!1&&de.current.isPositioned&&(de.current.isPositioned=!1,N(Je=>Me(te({},Je),{isPositioned:!1})))},[_]);const At=L.useRef(!1);rv(()=>(At.current=!0,()=>{At.current=!1}),[]),rv(()=>{if(Z&&(le.current=Z),K&&(_e.current=K),Z&&K){if(Oe.current)return Oe.current(Z,K,st);st()}},[Z,K,st,Oe,pe]);const vt=L.useMemo(()=>({reference:le,floating:_e,setReference:W,setFloating:J}),[W,J]),ze=L.useMemo(()=>({reference:Z,floating:K}),[Z,K]),Qe=L.useMemo(()=>{const Je={position:n,left:0,top:0};if(!ze.floating)return Je;const Pt=nM(ze.floating,S.x),fe=nM(ze.floating,S.y);return a?te(Me(te({},Je),{transform:"translate("+Pt+"px, "+fe+"px)"}),f3(ze.floating)>=1.5&&{willChange:"transform"}):{position:n,left:Pt,top:fe}},[n,a,ze.floating,S.x,S.y]);return L.useMemo(()=>Me(te({},S),{update:st,refs:vt,elements:ze,floatingStyles:Qe}),[S,st,vt,ze,Qe])}const Lq=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:o}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?tM({element:i.current,padding:o}).fn(n):{}:i?tM({element:i,padding:o}).fn(n):{}}}},Fq=(e,t)=>Me(te({},Eq(e)),{options:[e,t]}),Bq=(e,t)=>Me(te({},Aq(e)),{options:[e,t]}),Vq=(e,t)=>Me(te({},zq(e)),{options:[e,t]}),Uq=(e,t)=>Me(te({},Pq(e)),{options:[e,t]}),$q=(e,t)=>Me(te({},Rq(e)),{options:[e,t]}),Hq=(e,t)=>Me(te({},Dq(e)),{options:[e,t]}),qq=(e,t)=>Me(te({},Lq(e)),{options:[e,t]});var Gq="Arrow",p3=L.forwardRef((e,t)=>{const c=e,{children:n,width:i=10,height:o=5}=c,u=en(c,["children","width","height"]);return l.jsx(Ui.svg,Me(te({},u),{ref:t,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})}))});p3.displayName=Gq;var Wq=p3,FC="Popper",[m3,O1]=n_(FC),[Zq,g3]=m3(FC),y3=e=>{const{__scopePopper:t,children:n}=e,[i,o]=L.useState(null);return l.jsx(Zq,{scope:t,anchor:i,onAnchorChange:o,children:n})};y3.displayName=FC;var x3="PopperAnchor",_3=L.forwardRef((e,t)=>{const g=e,{__scopePopper:n,virtualRef:i}=g,o=en(g,["__scopePopper","virtualRef"]),u=g3(x3,n),c=L.useRef(null),a=fr(t,c);return L.useEffect(()=>{u.onAnchorChange((i==null?void 0:i.current)||c.current)}),i?null:l.jsx(Ui.div,Me(te({},o),{ref:a}))});_3.displayName=x3;var BC="PopperContent",[Yq,Xq]=m3(BC),b3=L.forwardRef((e,t)=>{var Ge,Ye,zt,Bt,It,Lt,nn,_n;const tn=e,{__scopePopper:n,side:i="bottom",sideOffset:o=0,align:u="center",alignOffset:c=0,arrowPadding:a=0,avoidCollisions:g=!0,collisionBoundary:_=[],collisionPadding:S=0,sticky:N="partial",hideWhenDetached:A=!1,updatePositionStrategy:E="optimized",onPlaced:D}=tn,B=en(tn,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),$=g3(BC,n),[G,W]=L.useState(null),J=fr(t,Xn=>W(Xn)),[Z,K]=L.useState(null),le=ZH(Z),_e=(Ge=le==null?void 0:le.width)!=null?Ge:0,de=(Ye=le==null?void 0:le.height)!=null?Ye:0,pe=i+(u!=="center"?"-"+u:""),Oe=typeof S=="number"?S:te({top:0,right:0,bottom:0,left:0},S),He=Array.isArray(_)?_:[_],We=He.length>0,st={padding:Oe,boundary:He.filter(Qq),altBoundary:We},{refs:At,floatingStyles:vt,placement:ze,isPositioned:Qe,middlewareData:Je}=Oq({strategy:"fixed",placement:pe,whileElementsMounted:(...Xn)=>Mq(...Xn,{animationFrame:E==="always"}),elements:{reference:$.anchor},middleware:[Fq({mainAxis:o+de,alignmentAxis:c}),g&&Bq(te({mainAxis:!0,crossAxis:!1,limiter:N==="partial"?Vq():void 0},st)),g&&Uq(te({},st)),$q(Me(te({},st),{apply:({elements:Xn,rects:Gn,availableWidth:gn,availableHeight:ln})=>{const{width:Ue,height:ge}=Gn.reference,ve=Xn.floating.style;ve.setProperty("--radix-popper-available-width",`${gn}px`),ve.setProperty("--radix-popper-available-height",`${ln}px`),ve.setProperty("--radix-popper-anchor-width",`${Ue}px`),ve.setProperty("--radix-popper-anchor-height",`${ge}px`)}})),Z&&qq({element:Z,padding:a}),Jq({arrowWidth:_e,arrowHeight:de}),A&&Hq(te({strategy:"referenceHidden"},st))]}),[Pt,fe]=S3(ze),Xe=Cm(D);bo(()=>{Qe&&(Xe==null||Xe())},[Qe,Xe]);const tt=(zt=Je.arrow)==null?void 0:zt.x,Ae=(Bt=Je.arrow)==null?void 0:Bt.y,ot=((It=Je.arrow)==null?void 0:It.centerOffset)!==0,[ct,ut]=L.useState();return bo(()=>{G&&ut(window.getComputedStyle(G).zIndex)},[G]),l.jsx("div",{ref:At.setFloating,"data-radix-popper-content-wrapper":"",style:te(Me(te({},vt),{transform:Qe?vt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ct,"--radix-popper-transform-origin":[(Lt=Je.transformOrigin)==null?void 0:Lt.x,(nn=Je.transformOrigin)==null?void 0:nn.y].join(" ")}),((_n=Je.hide)==null?void 0:_n.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:l.jsx(Yq,{scope:n,placedSide:Pt,onArrowChange:K,arrowX:tt,arrowY:Ae,shouldHideArrow:ot,children:l.jsx(Ui.div,Me(te({"data-side":Pt,"data-align":fe},B),{ref:J,style:Me(te({},B.style),{animation:Qe?void 0:"none"})}))})})});b3.displayName=BC;var v3="PopperArrow",Kq={top:"bottom",right:"left",bottom:"top",left:"right"},w3=L.forwardRef(function(t,n){const a=t,{__scopePopper:i}=a,o=en(a,["__scopePopper"]),u=Xq(v3,i),c=Kq[u.placedSide];return l.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:l.jsx(Wq,Me(te({},o),{ref:n,style:Me(te({},o.style),{display:"block"})}))})});w3.displayName=v3;function Qq(e){return e!==null}var Jq=e=>({name:"transformOrigin",options:e,fn(t){var $,G,W,J,Z;const{placement:n,rects:i,middlewareData:o}=t,c=(($=o.arrow)==null?void 0:$.centerOffset)!==0,a=c?0:e.arrowWidth,g=c?0:e.arrowHeight,[_,S]=S3(n),N={start:"0%",center:"50%",end:"100%"}[S],A=((W=(G=o.arrow)==null?void 0:G.x)!=null?W:0)+a/2,E=((Z=(J=o.arrow)==null?void 0:J.y)!=null?Z:0)+g/2;let D="",B="";return _==="bottom"?(D=c?N:`${A}px`,B=`${-g}px`):_==="top"?(D=c?N:`${A}px`,B=`${i.floating.height+g}px`):_==="right"?(D=`${-g}px`,B=c?N:`${E}px`):_==="left"&&(D=`${i.floating.width+g}px`,B=c?N:`${E}px`),{data:{x:D,y:B}}}});function S3(e){const[t,n="center"]=e.split("-");return[t,n]}var j3=y3,VC=_3,C3=b3,T3=w3;function iM(e,[t,n]){return Math.min(n,Math.max(t,e))}var L1="Popover",[k3,Kae]=n_(L1,[O1]),s_=O1(),[eG,Kf]=k3(L1),N3=e=>{const{__scopePopover:t,children:n,open:i,defaultOpen:o,onOpenChange:u,modal:c=!1}=e,a=s_(t),g=L.useRef(null),[_,S]=L.useState(!1),[N,A]=qv({prop:i,defaultProp:o!=null?o:!1,onChange:u,caller:L1});return l.jsx(j3,Me(te({},a),{children:l.jsx(eG,{scope:t,contentId:Ll(),triggerRef:g,open:N,onOpenChange:A,onOpenToggle:L.useCallback(()=>A(E=>!E),[A]),hasCustomAnchor:_,onCustomAnchorAdd:L.useCallback(()=>S(!0),[]),onCustomAnchorRemove:L.useCallback(()=>S(!1),[]),modal:c,children:n})}))};N3.displayName=L1;var M3="PopoverAnchor",tG=L.forwardRef((e,t)=>{const g=e,{__scopePopover:n}=g,i=en(g,["__scopePopover"]),o=Kf(M3,n),u=s_(n),{onCustomAnchorAdd:c,onCustomAnchorRemove:a}=o;return L.useEffect(()=>(c(),()=>a()),[c,a]),l.jsx(VC,Me(te(te({},u),i),{ref:t}))});tG.displayName=M3;var E3="PopoverTrigger",A3=L.forwardRef((e,t)=>{const g=e,{__scopePopover:n}=g,i=en(g,["__scopePopover"]),o=Kf(E3,n),u=s_(n),c=fr(t,o.triggerRef),a=l.jsx(Ui.button,Me(te({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":I3(o.open)},i),{ref:c,onClick:ms(e.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?a:l.jsx(VC,Me(te({asChild:!0},u),{children:a}))});A3.displayName=E3;var UC="PopoverPortal",[nG,iG]=k3(UC,{forceMount:void 0}),P3=e=>{const{__scopePopover:t,forceMount:n,children:i,container:o}=e,u=Kf(UC,t);return l.jsx(nG,{scope:t,forceMount:n,children:l.jsx(Ny,{present:n||u.open,children:l.jsx(E1,{asChild:!0,container:o,children:i})})})};P3.displayName=UC;var dy="PopoverContent",R3=L.forwardRef((e,t)=>{const n=iG(dy,e.__scopePopover),c=e,{forceMount:i=n.forceMount}=c,o=en(c,["forceMount"]),u=Kf(dy,e.__scopePopover);return l.jsx(Ny,{present:i||u.open,children:u.modal?l.jsx(rG,Me(te({},o),{ref:t})):l.jsx(aG,Me(te({},o),{ref:t}))})});R3.displayName=dy;var sG=bm("PopoverContent.RemoveScroll"),rG=L.forwardRef((e,t)=>{const n=Kf(dy,e.__scopePopover),i=L.useRef(null),o=fr(t,i),u=L.useRef(!1);return L.useEffect(()=>{const c=i.current;if(c)return NC(c)},[]),l.jsx(P1,{as:sG,allowPinchZoom:!0,children:l.jsx(D3,Me(te({},e),{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ms(e.onCloseAutoFocus,c=>{var a;c.preventDefault(),u.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ms(e.onPointerDownOutside,c=>{const a=c.detail.originalEvent,g=a.button===0&&a.ctrlKey===!0,_=a.button===2||g;u.current=_},{checkForDefaultPrevented:!1}),onFocusOutside:ms(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})}))})}),aG=L.forwardRef((e,t)=>{const n=Kf(dy,e.__scopePopover),i=L.useRef(!1),o=L.useRef(!1);return l.jsx(D3,Me(te({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var c,a;(c=e.onCloseAutoFocus)==null||c.call(e,u),u.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),u.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:u=>{var g,_;(g=e.onInteractOutside)==null||g.call(e,u),u.defaultPrevented||(i.current=!0,u.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=u.target;((_=n.triggerRef.current)==null?void 0:_.contains(c))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&o.current&&u.preventDefault()}}))}),D3=L.forwardRef((e,t)=>{const D=e,{__scopePopover:n,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:u,disableOutsidePointerEvents:c,onEscapeKeyDown:a,onPointerDownOutside:g,onFocusOutside:_,onInteractOutside:S}=D,N=en(D,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),A=Kf(dy,n),E=s_(n);return kC(),l.jsx(M1,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:u,children:l.jsx(N1,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:S,onEscapeKeyDown:a,onPointerDownOutside:g,onFocusOutside:_,onDismiss:()=>A.onOpenChange(!1),children:l.jsx(C3,Me(te(te({"data-state":I3(A.open),role:"dialog",id:A.contentId},E),N),{ref:t,style:Me(te({},N.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),z3="PopoverClose",oG=L.forwardRef((e,t)=>{const u=e,{__scopePopover:n}=u,i=en(u,["__scopePopover"]),o=Kf(z3,n);return l.jsx(Ui.button,Me(te({type:"button"},i),{ref:t,onClick:ms(e.onClick,()=>o.onOpenChange(!1))}))});oG.displayName=z3;var lG="PopoverArrow",cG=L.forwardRef((e,t)=>{const u=e,{__scopePopover:n}=u,i=en(u,["__scopePopover"]),o=s_(n);return l.jsx(T3,Me(te(te({},o),i),{ref:t}))});cG.displayName=lG;function I3(e){return e?"open":"closed"}var uG=N3,dG=A3,hG=P3,fG=R3,pG=[" ","Enter","ArrowUp","ArrowDown"],mG=[" ","Enter"],Nm="Select",[F1,B1,gG]=x$(Nm),[Ay,Qae]=n_(Nm,[gG,O1]),V1=O1(),[yG,Qf]=Ay(Nm),[xG,_G]=Ay(Nm),O3=e=>{const{__scopeSelect:t,children:n,open:i,defaultOpen:o,onOpenChange:u,value:c,defaultValue:a,onValueChange:g,dir:_,name:S,autoComplete:N,disabled:A,required:E,form:D}=e,B=V1(t),[$,G]=L.useState(null),[W,J]=L.useState(null),[Z,K]=L.useState(!1),le=N$(_),[_e,de]=qv({prop:i,defaultProp:o!=null?o:!1,onChange:u,caller:Nm}),[pe,Oe]=qv({prop:c,defaultProp:a,onChange:g,caller:Nm}),He=L.useRef(null),We=$?D||!!$.closest("form"):!0,[st,At]=L.useState(new Set),vt=Array.from(st).map(ze=>ze.props.value).join(";");return l.jsx(j3,Me(te({},B),{children:l.jsxs(yG,{required:E,scope:t,trigger:$,onTriggerChange:G,valueNode:W,onValueNodeChange:J,valueNodeHasChildren:Z,onValueNodeHasChildrenChange:K,contentId:Ll(),value:pe,onValueChange:Oe,open:_e,onOpenChange:de,dir:le,triggerPointerDownPosRef:He,disabled:A,children:[l.jsx(F1.Provider,{scope:t,children:l.jsx(xG,{scope:e.__scopeSelect,onNativeOptionAdd:L.useCallback(ze=>{At(Qe=>new Set(Qe).add(ze))},[]),onNativeOptionRemove:L.useCallback(ze=>{At(Qe=>{const Je=new Set(Qe);return Je.delete(ze),Je})},[]),children:n})}),We?l.jsxs(o6,{"aria-hidden":!0,required:E,tabIndex:-1,name:S,autoComplete:N,value:pe,onChange:ze=>Oe(ze.target.value),disabled:A,form:D,children:[pe===void 0?l.jsx("option",{value:""}):null,Array.from(st)]},vt):null]})}))};O3.displayName=Nm;var L3="SelectTrigger",F3=L.forwardRef((e,t)=>{const B=e,{__scopeSelect:n,disabled:i=!1}=B,o=en(B,["__scopeSelect","disabled"]),u=V1(n),c=Qf(L3,n),a=c.disabled||i,g=fr(t,c.onTriggerChange),_=B1(n),S=L.useRef("touch"),[N,A,E]=c6($=>{const G=_().filter(Z=>!Z.disabled),W=G.find(Z=>Z.value===c.value),J=u6(G,$,W);J!==void 0&&c.onValueChange(J.value)}),D=$=>{a||(c.onOpenChange(!0),E()),$&&(c.triggerPointerDownPosRef.current={x:Math.round($.pageX),y:Math.round($.pageY)})};return l.jsx(VC,Me(te({asChild:!0},u),{children:l.jsx(Ui.button,Me(te({type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":l6(c.value)?"":void 0},o),{ref:g,onClick:ms(o.onClick,$=>{$.currentTarget.focus(),S.current!=="mouse"&&D($)}),onPointerDown:ms(o.onPointerDown,$=>{S.current=$.pointerType;const G=$.target;G.hasPointerCapture($.pointerId)&&G.releasePointerCapture($.pointerId),$.button===0&&$.ctrlKey===!1&&$.pointerType==="mouse"&&(D($),$.preventDefault())}),onKeyDown:ms(o.onKeyDown,$=>{const G=N.current!=="";!($.ctrlKey||$.altKey||$.metaKey)&&$.key.length===1&&A($.key),!(G&&$.key===" ")&&pG.includes($.key)&&(D(),$.preventDefault())})}))}))});F3.displayName=L3;var B3="SelectValue",V3=L.forwardRef((e,t)=>{const A=e,{__scopeSelect:n,className:i,style:o,children:u,placeholder:c=""}=A,a=en(A,["__scopeSelect","className","style","children","placeholder"]),g=Qf(B3,n),{onValueNodeHasChildrenChange:_}=g,S=u!==void 0,N=fr(t,g.onValueNodeChange);return bo(()=>{_(S)},[_,S]),l.jsx(Ui.span,Me(te({},a),{ref:N,style:{pointerEvents:"none"},children:l6(g.value)?l.jsx(l.Fragment,{children:c}):u}))});V3.displayName=B3;var bG="SelectIcon",U3=L.forwardRef((e,t)=>{const u=e,{__scopeSelect:n,children:i}=u,o=en(u,["__scopeSelect","children"]);return l.jsx(Ui.span,Me(te({"aria-hidden":!0},o),{ref:t,children:i||"▼"}))});U3.displayName=bG;var vG="SelectPortal",$3=e=>l.jsx(E1,te({asChild:!0},e));$3.displayName=vG;var Mm="SelectContent",H3=L.forwardRef((e,t)=>{const n=Qf(Mm,e.__scopeSelect),[i,o]=L.useState();if(bo(()=>{o(new DocumentFragment)},[]),!n.open){const u=i;return u?Zx.createPortal(l.jsx(q3,{scope:e.__scopeSelect,children:l.jsx(F1.Slot,{scope:e.__scopeSelect,children:l.jsx("div",{children:e.children})})}),u):null}return l.jsx(G3,Me(te({},e),{ref:t}))});H3.displayName=Mm;var du=10,[q3,Jf]=Ay(Mm),wG="SelectContentImpl",SG=bm("SelectContent.RemoveScroll"),G3=L.forwardRef((e,t)=>{const tn=e,{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:u,onPointerDownOutside:c,side:a,sideOffset:g,align:_,alignOffset:S,arrowPadding:N,collisionBoundary:A,collisionPadding:E,sticky:D,hideWhenDetached:B,avoidCollisions:$}=tn,G=en(tn,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),W=Qf(Mm,n),[J,Z]=L.useState(null),[K,le]=L.useState(null),_e=fr(t,Ge=>Z(Ge)),[de,pe]=L.useState(null),[Oe,He]=L.useState(null),We=B1(n),[st,At]=L.useState(!1),vt=L.useRef(!1);L.useEffect(()=>{if(J)return NC(J)},[J]),kC();const ze=L.useCallback(Ge=>{const[Ye,...zt]=We().map(Lt=>Lt.ref.current),[Bt]=zt.slice(-1),It=document.activeElement;for(const Lt of Ge)if(Lt===It||(Lt==null||Lt.scrollIntoView({block:"nearest"}),Lt===Ye&&K&&(K.scrollTop=0),Lt===Bt&&K&&(K.scrollTop=K.scrollHeight),Lt==null||Lt.focus(),document.activeElement!==It))return},[We,K]),Qe=L.useCallback(()=>ze([de,J]),[ze,de,J]);L.useEffect(()=>{st&&Qe()},[st,Qe]);const{onOpenChange:Je,triggerPointerDownPosRef:Pt}=W;L.useEffect(()=>{if(J){let Ge={x:0,y:0};const Ye=Bt=>{var It,Lt,nn,_n;Ge={x:Math.abs(Math.round(Bt.pageX)-((Lt=(It=Pt.current)==null?void 0:It.x)!=null?Lt:0)),y:Math.abs(Math.round(Bt.pageY)-((_n=(nn=Pt.current)==null?void 0:nn.y)!=null?_n:0))}},zt=Bt=>{Ge.x<=10&&Ge.y<=10?Bt.preventDefault():J.contains(Bt.target)||Je(!1),document.removeEventListener("pointermove",Ye),Pt.current=null};return Pt.current!==null&&(document.addEventListener("pointermove",Ye),document.addEventListener("pointerup",zt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ye),document.removeEventListener("pointerup",zt,{capture:!0})}}},[J,Je,Pt]),L.useEffect(()=>{const Ge=()=>Je(!1);return window.addEventListener("blur",Ge),window.addEventListener("resize",Ge),()=>{window.removeEventListener("blur",Ge),window.removeEventListener("resize",Ge)}},[Je]);const[fe,Xe]=c6(Ge=>{const Ye=We().filter(It=>!It.disabled),zt=Ye.find(It=>It.ref.current===document.activeElement),Bt=u6(Ye,Ge,zt);Bt&&setTimeout(()=>Bt.ref.current.focus())}),tt=L.useCallback((Ge,Ye,zt)=>{const Bt=!vt.current&&!zt;(W.value!==void 0&&W.value===Ye||Bt)&&(pe(Ge),Bt&&(vt.current=!0))},[W.value]),Ae=L.useCallback(()=>J==null?void 0:J.focus(),[J]),ot=L.useCallback((Ge,Ye,zt)=>{const Bt=!vt.current&&!zt;(W.value!==void 0&&W.value===Ye||Bt)&&He(Ge)},[W.value]),ct=i==="popper"?GS:W3,ut=ct===GS?{side:a,sideOffset:g,align:_,alignOffset:S,arrowPadding:N,collisionBoundary:A,collisionPadding:E,sticky:D,hideWhenDetached:B,avoidCollisions:$}:{};return l.jsx(q3,{scope:n,content:J,viewport:K,onViewportChange:le,itemRefCallback:tt,selectedItem:de,onItemLeave:Ae,itemTextRefCallback:ot,focusSelectedItem:Qe,selectedItemText:Oe,position:i,isPositioned:st,searchRef:fe,children:l.jsx(P1,{as:SG,allowPinchZoom:!0,children:l.jsx(M1,{asChild:!0,trapped:W.open,onMountAutoFocus:Ge=>{Ge.preventDefault()},onUnmountAutoFocus:ms(o,Ge=>{var Ye;(Ye=W.trigger)==null||Ye.focus({preventScroll:!0}),Ge.preventDefault()}),children:l.jsx(N1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:Ge=>Ge.preventDefault(),onDismiss:()=>W.onOpenChange(!1),children:l.jsx(ct,Me(te(te({role:"listbox",id:W.contentId,"data-state":W.open?"open":"closed",dir:W.dir,onContextMenu:Ge=>Ge.preventDefault()},G),ut),{onPlaced:()=>At(!0),ref:_e,style:te({display:"flex",flexDirection:"column",outline:"none"},G.style),onKeyDown:ms(G.onKeyDown,Ge=>{const Ye=Ge.ctrlKey||Ge.altKey||Ge.metaKey;if(Ge.key==="Tab"&&Ge.preventDefault(),!Ye&&Ge.key.length===1&&Xe(Ge.key),["ArrowUp","ArrowDown","Home","End"].includes(Ge.key)){let Bt=We().filter(It=>!It.disabled).map(It=>It.ref.current);if(["ArrowUp","End"].includes(Ge.key)&&(Bt=Bt.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ge.key)){const It=Ge.target,Lt=Bt.indexOf(It);Bt=Bt.slice(Lt+1)}setTimeout(()=>ze(Bt)),Ge.preventDefault()}})}))})})})})});G3.displayName=wG;var jG="SelectItemAlignedPosition",W3=L.forwardRef((e,t)=>{const _e=e,{__scopeSelect:n,onPlaced:i}=_e,o=en(_e,["__scopeSelect","onPlaced"]),u=Qf(Mm,n),c=Jf(Mm,n),[a,g]=L.useState(null),[_,S]=L.useState(null),N=fr(t,de=>S(de)),A=B1(n),E=L.useRef(!1),D=L.useRef(!0),{viewport:B,selectedItem:$,selectedItemText:G,focusSelectedItem:W}=c,J=L.useCallback(()=>{if(u.trigger&&u.valueNode&&a&&_&&B&&$&&G){const de=u.trigger.getBoundingClientRect(),pe=_.getBoundingClientRect(),Oe=u.valueNode.getBoundingClientRect(),He=G.getBoundingClientRect();if(u.dir!=="rtl"){const It=He.left-pe.left,Lt=Oe.left-It,nn=de.left-Lt,_n=de.width+nn,Xn=Math.max(_n,pe.width),Gn=window.innerWidth-du,gn=iM(Lt,[du,Math.max(du,Gn-Xn)]);a.style.minWidth=_n+"px",a.style.left=gn+"px"}else{const It=pe.right-He.right,Lt=window.innerWidth-Oe.right-It,nn=window.innerWidth-de.right-Lt,_n=de.width+nn,Xn=Math.max(_n,pe.width),Gn=window.innerWidth-du,gn=iM(Lt,[du,Math.max(du,Gn-Xn)]);a.style.minWidth=_n+"px",a.style.right=gn+"px"}const We=A(),st=window.innerHeight-du*2,At=B.scrollHeight,vt=window.getComputedStyle(_),ze=parseInt(vt.borderTopWidth,10),Qe=parseInt(vt.paddingTop,10),Je=parseInt(vt.borderBottomWidth,10),Pt=parseInt(vt.paddingBottom,10),fe=ze+Qe+At+Pt+Je,Xe=Math.min($.offsetHeight*5,fe),tt=window.getComputedStyle(B),Ae=parseInt(tt.paddingTop,10),ot=parseInt(tt.paddingBottom,10),ct=de.top+de.height/2-du,ut=st-ct,tn=$.offsetHeight/2,Ge=$.offsetTop+tn,Ye=ze+Qe+Ge,zt=fe-Ye;if(Ye<=ct){const It=We.length>0&&$===We[We.length-1].ref.current;a.style.bottom="0px";const Lt=_.clientHeight-B.offsetTop-B.offsetHeight,nn=Math.max(ut,tn+(It?ot:0)+Lt+Je),_n=Ye+nn;a.style.height=_n+"px"}else{const It=We.length>0&&$===We[0].ref.current;a.style.top="0px";const nn=Math.max(ct,ze+B.offsetTop+(It?Ae:0)+tn)+zt;a.style.height=nn+"px",B.scrollTop=Ye-ct+B.offsetTop}a.style.margin=`${du}px 0`,a.style.minHeight=Xe+"px",a.style.maxHeight=st+"px",i==null||i(),requestAnimationFrame(()=>E.current=!0)}},[A,u.trigger,u.valueNode,a,_,B,$,G,u.dir,i]);bo(()=>J(),[J]);const[Z,K]=L.useState();bo(()=>{_&&K(window.getComputedStyle(_).zIndex)},[_]);const le=L.useCallback(de=>{de&&D.current===!0&&(J(),W==null||W(),D.current=!1)},[J,W]);return l.jsx(TG,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:E,onScrollButtonChange:le,children:l.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Z},children:l.jsx(Ui.div,Me(te({},o),{ref:N,style:te({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})});W3.displayName=jG;var CG="SelectPopperPosition",GS=L.forwardRef((e,t)=>{const a=e,{__scopeSelect:n,align:i="start",collisionPadding:o=du}=a,u=en(a,["__scopeSelect","align","collisionPadding"]),c=V1(n);return l.jsx(C3,Me(te(te({},c),u),{ref:t,align:i,collisionPadding:o,style:Me(te({boxSizing:"border-box"},u.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});GS.displayName=CG;var[TG,$C]=Ay(Mm,{}),WS="SelectViewport",Z3=L.forwardRef((e,t)=>{const _=e,{__scopeSelect:n,nonce:i}=_,o=en(_,["__scopeSelect","nonce"]),u=Jf(WS,n),c=$C(WS,n),a=fr(t,u.onViewportChange),g=L.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),l.jsx(F1.Slot,{scope:n,children:l.jsx(Ui.div,Me(te({"data-radix-select-viewport":"",role:"presentation"},o),{ref:a,style:te({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:ms(o.onScroll,S=>{const N=S.currentTarget,{contentWrapper:A,shouldExpandOnScrollRef:E}=c;if(E!=null&&E.current&&A){const D=Math.abs(g.current-N.scrollTop);if(D>0){const B=window.innerHeight-du*2,$=parseFloat(A.style.minHeight),G=parseFloat(A.style.height),W=Math.max($,G);if(W<B){const J=W+D,Z=Math.min(B,J),K=J-Z;A.style.height=Z+"px",A.style.bottom==="0px"&&(N.scrollTop=K>0?K:0,A.style.justifyContent="flex-end")}}}g.current=N.scrollTop})}))})]})});Z3.displayName=WS;var Y3="SelectGroup",[kG,NG]=Ay(Y3),X3=L.forwardRef((e,t)=>{const u=e,{__scopeSelect:n}=u,i=en(u,["__scopeSelect"]),o=Ll();return l.jsx(kG,{scope:n,id:o,children:l.jsx(Ui.div,Me(te({role:"group","aria-labelledby":o},i),{ref:t}))})});X3.displayName=Y3;var K3="SelectLabel",Q3=L.forwardRef((e,t)=>{const u=e,{__scopeSelect:n}=u,i=en(u,["__scopeSelect"]),o=NG(K3,n);return l.jsx(Ui.div,Me(te({id:o.id},i),{ref:t}))});Q3.displayName=K3;var Kv="SelectItem",[MG,J3]=Ay(Kv),e6=L.forwardRef((e,t)=>{const W=e,{__scopeSelect:n,value:i,disabled:o=!1,textValue:u}=W,c=en(W,["__scopeSelect","value","disabled","textValue"]),a=Qf(Kv,n),g=Jf(Kv,n),_=a.value===i,[S,N]=L.useState(u!=null?u:""),[A,E]=L.useState(!1),D=fr(t,J=>{var Z;return(Z=g.itemRefCallback)==null?void 0:Z.call(g,J,i,o)}),B=Ll(),$=L.useRef("touch"),G=()=>{o||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(MG,{scope:n,value:i,disabled:o,textId:B,isSelected:_,onItemTextChange:L.useCallback(J=>{N(Z=>{var K;return Z||((K=J==null?void 0:J.textContent)!=null?K:"").trim()})},[]),children:l.jsx(F1.ItemSlot,{scope:n,value:i,disabled:o,textValue:S,children:l.jsx(Ui.div,Me(te({role:"option","aria-labelledby":B,"data-highlighted":A?"":void 0,"aria-selected":_&&A,"data-state":_?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},c),{ref:D,onFocus:ms(c.onFocus,()=>E(!0)),onBlur:ms(c.onBlur,()=>E(!1)),onClick:ms(c.onClick,()=>{$.current!=="mouse"&&G()}),onPointerUp:ms(c.onPointerUp,()=>{$.current==="mouse"&&G()}),onPointerDown:ms(c.onPointerDown,J=>{$.current=J.pointerType}),onPointerMove:ms(c.onPointerMove,J=>{var Z;$.current=J.pointerType,o?(Z=g.onItemLeave)==null||Z.call(g):$.current==="mouse"&&J.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ms(c.onPointerLeave,J=>{var Z;J.currentTarget===document.activeElement&&((Z=g.onItemLeave)==null||Z.call(g))}),onKeyDown:ms(c.onKeyDown,J=>{var K;((K=g.searchRef)==null?void 0:K.current)!==""&&J.key===" "||(mG.includes(J.key)&&G(),J.key===" "&&J.preventDefault())})}))})})});e6.displayName=Kv;var J0="SelectItemText",t6=L.forwardRef((e,t)=>{const G=e,{__scopeSelect:n,className:i,style:o}=G,u=en(G,["__scopeSelect","className","style"]),c=Qf(J0,n),a=Jf(J0,n),g=J3(J0,n),_=_G(J0,n),[S,N]=L.useState(null),A=fr(t,W=>N(W),g.onItemTextChange,W=>{var J;return(J=a.itemTextRefCallback)==null?void 0:J.call(a,W,g.value,g.disabled)}),E=S==null?void 0:S.textContent,D=L.useMemo(()=>l.jsx("option",{value:g.value,disabled:g.disabled,children:E},g.value),[g.disabled,g.value,E]),{onNativeOptionAdd:B,onNativeOptionRemove:$}=_;return bo(()=>(B(D),()=>$(D)),[B,$,D]),l.jsxs(l.Fragment,{children:[l.jsx(Ui.span,Me(te({id:g.textId},u),{ref:A})),g.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Zx.createPortal(u.children,c.valueNode):null]})});t6.displayName=J0;var n6="SelectItemIndicator",i6=L.forwardRef((e,t)=>{const u=e,{__scopeSelect:n}=u,i=en(u,["__scopeSelect"]);return J3(n6,n).isSelected?l.jsx(Ui.span,Me(te({"aria-hidden":!0},i),{ref:t})):null});i6.displayName=n6;var ZS="SelectScrollUpButton",s6=L.forwardRef((e,t)=>{const n=Jf(ZS,e.__scopeSelect),i=$C(ZS,e.__scopeSelect),[o,u]=L.useState(!1),c=fr(t,i.onScrollButtonChange);return bo(()=>{if(n.viewport&&n.isPositioned){let a=function(){const _=g.scrollTop>0;u(_)};const g=n.viewport;return a(),g.addEventListener("scroll",a),()=>g.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?l.jsx(a6,Me(te({},e),{ref:c,onAutoScroll:()=>{const{viewport:a,selectedItem:g}=n;a&&g&&(a.scrollTop=a.scrollTop-g.offsetHeight)}})):null});s6.displayName=ZS;var YS="SelectScrollDownButton",r6=L.forwardRef((e,t)=>{const n=Jf(YS,e.__scopeSelect),i=$C(YS,e.__scopeSelect),[o,u]=L.useState(!1),c=fr(t,i.onScrollButtonChange);return bo(()=>{if(n.viewport&&n.isPositioned){let a=function(){const _=g.scrollHeight-g.clientHeight,S=Math.ceil(g.scrollTop)<_;u(S)};const g=n.viewport;return a(),g.addEventListener("scroll",a),()=>g.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?l.jsx(a6,Me(te({},e),{ref:c,onAutoScroll:()=>{const{viewport:a,selectedItem:g}=n;a&&g&&(a.scrollTop=a.scrollTop+g.offsetHeight)}})):null});r6.displayName=YS;var a6=L.forwardRef((e,t)=>{const _=e,{__scopeSelect:n,onAutoScroll:i}=_,o=en(_,["__scopeSelect","onAutoScroll"]),u=Jf("SelectScrollButton",n),c=L.useRef(null),a=B1(n),g=L.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return L.useEffect(()=>()=>g(),[g]),bo(()=>{var N;const S=a().find(A=>A.ref.current===document.activeElement);(N=S==null?void 0:S.ref.current)==null||N.scrollIntoView({block:"nearest"})},[a]),l.jsx(Ui.div,Me(te({"aria-hidden":!0},o),{ref:t,style:te({flexShrink:0},o.style),onPointerDown:ms(o.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:ms(o.onPointerMove,()=>{var S;(S=u.onItemLeave)==null||S.call(u),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:ms(o.onPointerLeave,()=>{g()})}))}),EG="SelectSeparator",AG=L.forwardRef((e,t)=>{const o=e,{__scopeSelect:n}=o,i=en(o,["__scopeSelect"]);return l.jsx(Ui.div,Me(te({"aria-hidden":!0},i),{ref:t}))});AG.displayName=EG;var XS="SelectArrow",PG=L.forwardRef((e,t)=>{const a=e,{__scopeSelect:n}=a,i=en(a,["__scopeSelect"]),o=V1(n),u=Qf(XS,n),c=Jf(XS,n);return u.open&&c.position==="popper"?l.jsx(T3,Me(te(te({},o),i),{ref:t})):null});PG.displayName=XS;var RG="SelectBubbleInput",o6=L.forwardRef((o,i)=>{var u=o,{__scopeSelect:e,value:t}=u,n=en(u,["__scopeSelect","value"]);const c=L.useRef(null),a=fr(i,c),g=WH(t);return L.useEffect(()=>{const _=c.current;if(!_)return;const S=window.HTMLSelectElement.prototype,A=Object.getOwnPropertyDescriptor(S,"value").set;if(g!==t&&A){const E=new Event("change",{bubbles:!0});A.call(_,t),_.dispatchEvent(E)}},[g,t]),l.jsx(Ui.select,Me(te({},n),{style:te(te({},D5),n.style),ref:a,defaultValue:t}))});o6.displayName=RG;function l6(e){return e===""||e===void 0}function c6(e){const t=Cm(e),n=L.useRef(""),i=L.useRef(0),o=L.useCallback(c=>{const a=n.current+c;t(a),function g(_){n.current=_,window.clearTimeout(i.current),_!==""&&(i.current=window.setTimeout(()=>g(""),1e3))}(a)},[t]),u=L.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return L.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,o,u]}function u6(e,t,n){const o=t.length>1&&Array.from(t).every(_=>_===t[0])?t[0]:t,u=n?e.indexOf(n):-1;let c=DG(e,Math.max(u,0));o.length===1&&(c=c.filter(_=>_!==n));const g=c.find(_=>_.textValue.toLowerCase().startsWith(o.toLowerCase()));return g!==n?g:void 0}function DG(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var zG=O3,IG=F3,OG=V3,LG=U3,FG=$3,BG=H3,VG=Z3,UG=X3,$G=Q3,HG=e6,qG=t6,GG=i6,WG=s6,ZG=r6,g2={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var sM;function YG(){return sM||(sM=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var u="",c=0;c<arguments.length;c++){var a=arguments[c];a&&(u=o(u,i(a)))}return u}function i(u){if(typeof u=="string"||typeof u=="number")return u;if(typeof u!="object")return"";if(Array.isArray(u))return n.apply(null,u);if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]"))return u.toString();var c="";for(var a in u)t.call(u,a)&&u[a]&&(c=o(c,a));return c}function o(u,c){return c?u?u+" "+c:u+c:u}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(g2)),g2.exports}var XG=YG();const Of=Hx(XG),d6={asChild:{type:"boolean"}},h6=["gray","gold","bronze","brown","yellow","amber","orange","tomato","red","ruby","crimson","pink","plum","purple","violet","iris","indigo","blue","cyan","teal","jade","green","grass","lime","mint","sky"],KG={color:{type:"enum",values:h6,default:void 0}},QG={color:{type:"enum",values:h6,default:""}},f6={highContrast:{type:"boolean",className:"rt-high-contrast",default:void 0}},JG=["normal","start","end","both"],eW={trim:{type:"enum",className:"rt-r-lt",values:JG,responsive:!0}},tW=["left","center","right"],nW={align:{type:"enum",className:"rt-r-ta",values:tW,responsive:!0}},iW=["wrap","nowrap","pretty","balance"],sW={wrap:{type:"enum",className:"rt-r-tw",values:iW,responsive:!0}},rW={truncate:{type:"boolean",className:"rt-truncate"}},aW=["light","regular","medium","bold"],oW={weight:{type:"enum",className:"rt-r-weight",values:aW,responsive:!0}},HC=["initial","xs","sm","md","lg","xl"];function p6(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function cx(e){return typeof e=="object"&&Object.keys(e).some(t=>HC.includes(t))}function lW(i){var o=i,{className:e,customProperties:t}=o,n=en(o,["className","customProperties"]);const u=m6(te({allowArbitraryValues:!0,className:e},n)),c=cW(te({customProperties:t},n));return[u,c]}function m6({allowArbitraryValues:e,value:t,className:n,propValues:i,parseValue:o=u=>u}){const u=[];if(t){if(typeof t=="string"&&i.includes(t))return rM(n,t,o);if(cx(t)){const c=t;for(const a in c){if(!p6(c,a)||!HC.includes(a))continue;const g=c[a];if(g!==void 0){if(i.includes(g)){const _=rM(n,g,o),S=a==="initial"?_:`${a}:${_}`;u.push(S)}else if(e){const _=a==="initial"?n:`${a}:${n}`;u.push(_)}}}return u.join(" ")}if(e)return n}}function rM(e,t,n){const i=e?"-":"",o=n(t),u=o==null?void 0:o.startsWith("-"),c=u?"-":"",a=u?o==null?void 0:o.substring(1):o;return`${c}${e}${i}${a}`}function cW({customProperties:e,value:t,propValues:n,parseValue:i=o=>o}){let o={};if(!(!t||typeof t=="string"&&n.includes(t))){if(typeof t=="string"&&(o=Object.fromEntries(e.map(u=>[u,t]))),cx(t)){const u=t;for(const c in u){if(!p6(u,c)||!HC.includes(c))continue;const a=u[c];if(!n.includes(a))for(const g of e)o=te({[c==="initial"?g:`${g}-${c}`]:a},o)}}for(const u in o){const c=o[u];c!==void 0&&(o[u]=i(c))}return o}}function aM(...e){let t={};for(const n of e)n&&(t=te(te({},t),n));return Object.keys(t).length?t:void 0}function uW(...e){return Object.assign({},...e)}function g6(e,...t){let n,i;const o=te({},e),u=uW(...t);for(const c in u){let a=o[c];const g=u[c];if(g.default!==void 0&&a===void 0&&(a=g.default),g.type==="enum"&&![g.default,...g.values].includes(a)&&!cx(a)&&(a=g.default),o[c]=a,"className"in g&&g.className){delete o[c];const _="responsive"in g;if(!a||cx(a)&&!_)continue;if(cx(a)&&(g.default!==void 0&&a.initial===void 0&&(a.initial=g.default),g.type==="enum"&&([g.default,...g.values].includes(a.initial)||(a.initial=g.default))),g.type==="enum"){const S=m6({allowArbitraryValues:!1,value:a,className:g.className,propValues:g.values,parseValue:g.parseValue});n=Of(n,S);continue}if(g.type==="string"||g.type==="enum | string"){const S=g.type==="string"?[]:g.values,[N,A]=lW({className:g.className,customProperties:g.customProperties,propValues:S,parseValue:g.parseValue,value:a});i=aM(i,A),n=Of(n,N);continue}if(g.type==="boolean"&&a){n=Of(n,g.className);continue}}}return o.className=Of(n,e.className),o.style=aM(i,e.style),o}const Kp=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],y6={m:{type:"enum | string",values:Kp,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:Kp,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:Kp,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:Kp,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:Kp,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:Kp,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:Kp,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},dW=["span","div","label","p"],hW=["1","2","3","4","5","6","7","8","9"],fW=te(te(te(te(te(te(te(Me(te({as:{type:"enum",values:dW,default:"span"}},d6),{size:{type:"enum",className:"rt-r-size",values:hW,responsive:!0}}),oW),nW),eW),rW),sW),KG),f6),qC=L.forwardRef((e,t)=>{const g=g6(e,fW,y6),{children:n,className:i,asChild:o,as:u="span",color:c}=g,a=en(g,["children","className","asChild","as","color"]);return L.createElement(aC,Me(te({"data-accent-color":c},a),{ref:t,className:Of("rt-Text",i)}),o?n:L.createElement(u,null,n))});qC.displayName="Text";function pW(e,t){if(e!==void 0)return typeof e=="string"?t(e):Object.fromEntries(Object.entries(e).map(([n,i])=>[n,t(i)]))}function mW(e){return e==="3"?"3":"2"}const gW=["1","2","3"],yW=["soft","surface","outline"],oM=te(te(Me(te({},d6),{size:{type:"enum",className:"rt-r-size",values:gW,default:"2",responsive:!0},variant:{type:"enum",className:"rt-variant",values:yW,default:"soft"}}),QG),f6),x6=L.createContext({}),_6=L.forwardRef((e,t)=>{const{size:n=oM.size.default}=e,_=g6(e,oM,y6),{asChild:i,children:o,className:u,color:c}=_,a=en(_,["asChild","children","className","color"]),g=i?aC:"div";return L.createElement(g,Me(te({"data-accent-color":c},a),{className:Of("rt-CalloutRoot",u),ref:t}),L.createElement(x6.Provider,{value:L.useMemo(()=>({size:n}),[n])},o))});_6.displayName="Callout.Root";const b6=L.forwardRef((i,n)=>{var o=i,{className:e}=o,t=en(o,["className"]);return L.createElement("div",Me(te({},t),{className:Of("rt-CalloutIcon",e),ref:n}))});b6.displayName="Callout.Icon";const v6=L.forwardRef((i,n)=>{var o=i,{className:e}=o,t=en(o,["className"]);const{size:u}=L.useContext(x6);return L.createElement(qC,Me(te({as:"p",size:pW(u,mW)},t),{asChild:!1,ref:n,className:Of("rt-CalloutText",e)}))});v6.displayName="Callout.Text";const w6=({rootProps:e,iconProps:t,textProps:n,textChildren:i,iconChildren:o})=>l.jsxs(_6,Me(te({},e),{className:g1("animate-fadein",e==null?void 0:e.className),children:[l.jsx(b6,Me(te({},t),{children:o})),l.jsx(v6,Me(te({},n),{children:i}))]})),xW=n=>{var i=n,{children:e}=i,t=en(i,["children"]);return l.jsx(w6,{rootProps:{color:"red"},iconChildren:l.jsx(IU,{size:"18"}),textChildren:e||t.message||"An error occurred"})},_W=({error:e,overrideHeading:t,children:n})=>{const i=L.useMemo(()=>{var u,c;if(!e)return[];let o=e!=null&&e._server_messages?JSON.parse(e==null?void 0:e._server_messages):[];if(o=o.map(a=>{try{return JSON.parse(a)}catch(g){return a}}),o.length===0){const a=(u=e==null?void 0:e.exception)==null?void 0:u.indexOf(":");if(a!==-1){const g=(c=e==null?void 0:e.exception)==null?void 0:c.slice(a+1);g&&(o=[{message:g,title:"Error"}])}o.length===0&&(o=[{message:e==null?void 0:e.message,title:"Error",indicator:"red"}])}return o},[e]);return i.length===0||!e?null:l.jsxs(xW,{children:[t&&l.jsx(qC,{weight:"bold",size:"2",children:t}),i.map((o,u)=>l.jsx("div",{dangerouslySetInnerHTML:{__html:o.message}},u)),n]})};function bW(e,t){return e.replace(/{(\d+)}/g,function(n,i){return typeof t[i]!="undefined"?t[i]:n})}function vW(e,t,n=null){var c,a;const i=((a=(c=window==null?void 0:window.frappe)==null?void 0:c.boot)==null?void 0:a.__messages)||{};let o="";if(n){let g=`${e}:${n}`;i[g]&&(o=i[g])}return o||(o=i[e]||e),/{\d+}/.test(e)?bW(o,t):o}const la=vW,wW=({isOpen:e,setIsOpen:t,refreshChannels:n})=>{const i="New admin office construction";ua();const{mutate:o}=T4(),{data:u}=md("raven.api.workspaces.can_create_channel",{workspace:i},void 0),c=BS({defaultValues:{type:"Public",channel_name:"",channel_description:""}}),{register:a,handleSubmit:g,watch:_,control:S,setValue:N,reset:A,formState:{errors:E}}=c,{createDoc:D,error:B,loading:$,reset:G}=xy(),W=(Oe,He)=>{Oe&&(window.location.href=`https://mycardpng.com/raven/${He}/${Oe}`,o(["channel_members",Oe])),t(!1),J()},J=()=>{G(),A()},Z=Oe=>{D("Raven Channel",Me(te({},Oe),{workspace:i})).then(He=>{He&&(o("channel_list",We=>({message:Me(te({},We.message),{channels:[...We.message.channels,te({},He)]})}),{revalidate:!1}),Ha.success(la("Channel created")),n(),W(He.name,i))})},K=L.useCallback(Oe=>{var He;N("channel_name",(He=Oe.target.value)==null?void 0:He.toLowerCase().replace(" ","-"))},[N]),le=_("type"),{channelIcon:_e,header:de,helperText:pe}=L.useMemo(()=>{switch(le){case"Private":return{channelIcon:l.jsx(u$,{}),header:la("Create a private channel"),helperText:la("Only invited users can view or join.")};case"Open":return{channelIcon:l.jsx(o$,{}),header:la("Create an open channel"),helperText:la("Everyone in the workspace is a member.")};default:return{channelIcon:l.jsx(l$,{}),header:la("Create a public channel"),helperText:la("Anyone can read messages. Members can post.")}}},[le]);return l.jsx(UU,Me(te({},c),{children:l.jsxs("form",{onSubmit:g(Z),className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:de}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:la("Channels are best when organized around a topic.")})]}),!(u!=null&&u.message)&&l.jsx(w6,{iconChildren:l.jsx(c$,{size:"18"}),rootProps:{color:"yellow",variant:"surface"},textChildren:l.jsx("p",{className:"text-yellow-800",children:"You cannot create a new channel since you're not an admin. Ask an admin to create one or make you an admin."})}),l.jsx(_W,{error:B}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"channel_name",className:"block font-medium mb-1",children:[la("Name")," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx(GU,{name:"channel_name",control:S,rules:{required:la("Please add a channel name"),minLength:{value:3,message:la("Minimum 3 characters.")},maxLength:{value:50,message:la("Maximum 50 characters.")},pattern:{value:/^[a-zA-Z0-9][a-zA-Z0-9-]*$/,message:la("Only letters, numbers, and hyphens allowed.")}},render:({field:Oe,fieldState:{error:He}})=>l.jsx("input",Me(te({type:"text"},Oe),{onChange:K,maxLength:50,className:`w-full px-4 py-2 border rounded-md ${He?"border-red-500":"border-gray-300"}`,placeholder:"e.g. project-x-team"}))}),E.channel_name&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.channel_name.message})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"channel_description",className:"block font-medium mb-1",children:[la("Description")," ",l.jsxs("span",{className:"text-sm text-gray-400",children:["(",la("optional"),")"]})]}),l.jsx("textarea",Me(te({id:"channel_description"},a("channel_description",{maxLength:{value:140,message:la("Max 140 characters.")}})),{className:"w-full px-4 py-2 border border-gray-300 rounded-md resize-none",maxLength:140,placeholder:"Describe the channel’s purpose..."})),E.channel_description&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.channel_description.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2",children:"Channel Type"}),l.jsx("div",{className:"flex space-x-4",children:["Public","Private","Open"].map(Oe=>l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",value:Oe,checked:le===Oe,onChange:()=>N("type",Oe)}),l.jsx("span",{children:Oe})]},Oe))}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:pe})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded border text-gray-700 hover:bg-gray-100",onClick:()=>t(!1),disabled:$,children:la("Cancel")}),l.jsx("button",{type:"submit",className:"px-4 py-2 rounded text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",disabled:$,children:$?l.jsxs(l.Fragment,{children:[l.jsx(d$,{className:"inline mr-2"}),la("Saving")]}):la("Save")})]})]})}))},S6=({refreshChannels:e})=>{const[t,n]=L.useState(!1);return FU(),l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-600 dark:text-white","aria-label":"Create Channel",onClick:()=>n(!0),children:l.jsx(OU,{size:16})}),t&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-transparent ",children:l.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-[#151518] rounded-lg shadow-lg relative p-6",children:[l.jsx("button",{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800",onClick:()=>n(!1),children:"✕"}),l.jsx(wW,{isOpen:t,setIsOpen:n,refreshChannels:e})]})})]})},SW=()=>{var n;ua();const{data:e,mutate:t}=md("raven.api.raven_channel.get_all_channels",{hide_archived:!0});return console.log("channelList",e),l.jsxs("div",{className:"w-60 bg-white shadow-sm rounded-[20px] text-xs mt-5",children:[l.jsxs("div",{className:"w-full flex justify-between items-center p-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(S6,{refreshChannels:t}),l.jsx("h1",{children:"Group"})]}),l.jsx("p",{children:(n=e==null?void 0:e.message)==null?void 0:n.channels.length})]}),l.jsx("div",{className:"h-[1px] w-full bg-gray-200"}),e&&e.message.channels.map((i,o)=>l.jsxs("div",{onClick:()=>window.location.href=`https://mycard.anantdv.com/raven/New%20admin%20office%20construction/${i.name}`,className:"w-full flex items-center gap-2 p-3 cursor-pointer hover:bg-gray-100",children:[l.jsx("div",{className:"bg-blue-500 text-white flex items-center justify-center rounded-full h-10 w-10",children:i.channel_name[0].toUpperCase()}),l.jsx("p",{children:i.channel_name})]},o))]})},jW=()=>{const[e,t]=L.useState(!1);ua();const n=is.get("user_id");is.get("user_image"),is.get("full_name");const{data:i}=Ch("User",n,{fields:["*"]}),{data:o}=md("raven.api.raven_users.get_list");return l.jsxs("div",{className:"flex mx-4 md:mx-12 flex-col md:flex-row justify-between h-screen overflow-hidden",children:[l.jsx("div",{className:"hidden lg:block lg:sticky lg:top-5 h-screen overflow-y-auto left-side mt-5"}),l.jsx("div",{className:"middle flex-grow overflow-y-auto w-full md:mx-4",children:l.jsx(kU,{})}),l.jsxs("div",{className:"hidden lg:block right-side mt-5 lg:top-5 h-66 no-scrollbar",children:[l.jsxs("div",{className:"lg:w-76 bg-white shadow-sm rounded-[20px] flex flex-col justify-center items-center text-xs",children:[l.jsxs("div",{className:"w-full flex justify-between p-3",children:[l.jsx("h1",{children:"Add to your feed"}),l.jsx(dB,{})]}),l.jsx("div",{className:"h-[1px] w-full bg-gray-200"}),l.jsx("div",{className:"h-66 overflow-y-auto no-scrollbar",children:o&&o.message.map((u,c)=>l.jsxs("div",{className:"w-full px-5",children:[l.jsx(NU,{setUserChange:t,user:u}),c!==o.length-1&&l.jsx("div",{className:"h-[1px] w-full bg-gray-200"})]},c))})]}),l.jsx(SW,{})]})]})};function CW(t){var e=en(t,[]);return l.jsx(zG,te({"data-slot":"select"},e))}function TW(t){var e=en(t,[]);return l.jsx(UG,te({"data-slot":"select-group"},e))}function kW(t){var e=en(t,[]);return l.jsx(OG,te({"data-slot":"select-value"},e))}function NW(o){var u=o,{className:e,size:t="default",children:n}=u,i=en(u,["className","size","children"]);return l.jsxs(IG,Me(te({"data-slot":"select-trigger","data-size":t,className:Sr("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e)},i),{children:[n,l.jsx(LG,{asChild:!0,children:l.jsx(Mv,{className:"size-4 opacity-50"})})]}))}function MW(o){var u=o,{className:e,children:t,position:n="popper"}=u,i=en(u,["className","children","position"]);return l.jsx(FG,{children:l.jsxs(BG,Me(te({"data-slot":"select-content",className:Sr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n},i),{children:[l.jsx(PW,{}),l.jsx(VG,{className:Sr("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),l.jsx(RW,{})]}))})}function EW(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx($G,te({"data-slot":"select-label",className:Sr("text-muted-foreground px-2 py-1.5 text-xs",e)},t))}function AW(i){var o=i,{className:e,children:t}=o,n=en(o,["className","children"]);return l.jsxs(HG,Me(te({"data-slot":"select-item",className:Sr("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e)},n),{children:[l.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:l.jsx(GG,{children:l.jsx(bP,{className:"size-4"})})}),l.jsx(qG,{children:t})]}))}function PW(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx(WG,Me(te({"data-slot":"select-scroll-up-button",className:Sr("flex cursor-default items-center justify-center py-1",e)},t),{children:l.jsx(gF,{className:"size-4"})}))}function RW(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx(ZG,Me(te({"data-slot":"select-scroll-down-button",className:Sr("flex cursor-default items-center justify-center py-1",e)},t),{children:l.jsx(Mv,{className:"size-4"})}))}const j6=L.createContext({});function DW(e){const t=L.useRef(null);return t.current===null&&(t.current=e()),t.current}const GC=typeof window!="undefined",zW=GC?L.useLayoutEffect:L.useEffect,WC=L.createContext(null);function ZC(e,t){e.indexOf(t)===-1&&e.push(t)}function YC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Eh=(e,t,n)=>n>t?t:n<e?e:n;let XC=()=>{};const Ah={},C6=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function T6(e){return typeof e=="object"&&e!==null}const k6=e=>/^0[^.\s]+$/u.test(e);function KC(e){let t;return()=>(t===void 0&&(t=e()),t)}const bc=e=>e,IW=(e,t)=>n=>t(e(n)),r_=(...e)=>e.reduce(IW),Mx=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class QC{constructor(){this.subscriptions=[]}add(t){return ZC(this.subscriptions,t),()=>YC(this.subscriptions,t)}notify(t,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,i);else for(let u=0;u<o;u++){const c=this.subscriptions[u];c&&c(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yd=e=>e*1e3,xd=e=>e/1e3;function N6(e,t){return t?e*(1e3/t):0}const M6=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,OW=1e-7,LW=12;function FW(e,t,n,i,o){let u,c,a=0;do c=t+(n-t)/2,u=M6(c,i,o)-e,u>0?n=c:t=c;while(Math.abs(u)>OW&&++a<LW);return c}function a_(e,t,n,i){if(e===t&&n===i)return bc;const o=u=>FW(u,0,1,e,n);return u=>u===0||u===1?u:M6(o(u),t,i)}const E6=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,A6=e=>t=>1-e(1-t),P6=a_(.33,1.53,.69,.99),JC=A6(P6),R6=E6(JC),D6=e=>(e*=2)<1?.5*JC(e):.5*(2-Math.pow(2,-10*(e-1))),eT=e=>1-Math.sin(Math.acos(e)),z6=A6(eT),I6=E6(eT),BW=a_(.42,0,1,1),VW=a_(0,0,.58,1),O6=a_(.42,0,.58,1),UW=e=>Array.isArray(e)&&typeof e[0]!="number",L6=e=>Array.isArray(e)&&typeof e[0]=="number",$W={linear:bc,easeIn:BW,easeInOut:O6,easeOut:VW,circIn:eT,circInOut:I6,circOut:z6,backIn:JC,backInOut:R6,backOut:P6,anticipate:D6},HW=e=>typeof e=="string",lM=e=>{if(L6(e)){XC(e.length===4);const[t,n,i,o]=e;return a_(t,n,i,o)}else if(HW(e))return $W[e];return e},_b=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function qW(e,t){let n=new Set,i=new Set,o=!1,u=!1;const c=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function g(S){c.has(S)&&(_.schedule(S),e()),S(a)}const _={schedule:(S,N=!1,A=!1)=>{const D=A&&o?n:i;return N&&c.add(S),D.has(S)||D.add(S),S},cancel:S=>{i.delete(S),c.delete(S)},process:S=>{if(a=S,o){u=!0;return}o=!0,[n,i]=[i,n],n.forEach(g),n.clear(),o=!1,u&&(u=!1,_.process(S))}};return _}const GW=40;function F6(e,t){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,c=_b.reduce((J,Z)=>(J[Z]=qW(u),J),{}),{setup:a,read:g,resolveKeyframes:_,preUpdate:S,update:N,preRender:A,render:E,postRender:D}=c,B=()=>{const J=Ah.useManualTiming?o.timestamp:performance.now();n=!1,Ah.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(J-o.timestamp,GW),1)),o.timestamp=J,o.isProcessing=!0,a.process(o),g.process(o),_.process(o),S.process(o),N.process(o),A.process(o),E.process(o),D.process(o),o.isProcessing=!1,n&&t&&(i=!1,e(B))},$=()=>{n=!0,i=!0,o.isProcessing||e(B)};return{schedule:_b.reduce((J,Z)=>{const K=c[Z];return J[Z]=(le,_e=!1,de=!1)=>(n||$(),K.schedule(le,_e,de)),J},{}),cancel:J=>{for(let Z=0;Z<_b.length;Z++)c[_b[Z]].cancel(J)},state:o,steps:c}}const{schedule:rr,cancel:Gf,state:$a,steps:y2}=F6(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:bc,!0);let av;function WW(){av=void 0}const dl={now:()=>(av===void 0&&dl.set($a.isProcessing||Ah.useManualTiming?$a.timestamp:performance.now()),av),set:e=>{av=e,queueMicrotask(WW)}},B6=e=>t=>typeof t=="string"&&t.startsWith(e),tT=B6("--"),ZW=B6("var(--"),nT=e=>ZW(e)?YW.test(e.split("/*")[0].trim()):!1,YW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Py={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ex=Me(te({},Py),{transform:e=>Eh(0,1,e)}),bb=Me(te({},Py),{default:1}),ux=e=>Math.round(e*1e5)/1e5,iT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XW(e){return e==null}const KW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sT=(e,t)=>n=>!!(typeof n=="string"&&KW.test(n)&&n.startsWith(e)||t&&!XW(n)&&Object.prototype.hasOwnProperty.call(n,t)),V6=(e,t,n)=>i=>{if(typeof i!="string")return i;const[o,u,c,a]=i.match(iT);return{[e]:parseFloat(o),[t]:parseFloat(u),[n]:parseFloat(c),alpha:a!==void 0?parseFloat(a):1}},QW=e=>Eh(0,255,e),x2=Me(te({},Py),{transform:e=>Math.round(QW(e))}),cm={test:sT("rgb","red"),parse:V6("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+x2.transform(e)+", "+x2.transform(t)+", "+x2.transform(n)+", "+ux(Ex.transform(i))+")"};function JW(e){let t="",n="",i="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,i+=i,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const KS={test:sT("#"),parse:JW,transform:cm.transform},o_=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Df=o_("deg"),_d=o_("%"),hi=o_("px"),eZ=o_("vh"),tZ=o_("vw"),cM=Me(te({},_d),{parse:e=>_d.parse(e)/100,transform:e=>_d.transform(e*100)}),Zg={test:sT("hsl","hue"),parse:V6("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+_d.transform(ux(t))+", "+_d.transform(ux(n))+", "+ux(Ex.transform(i))+")"},Wr={test:e=>cm.test(e)||KS.test(e)||Zg.test(e),parse:e=>cm.test(e)?cm.parse(e):Zg.test(e)?Zg.parse(e):KS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?cm.transform(e):Zg.transform(e),getAnimatableNone:e=>{const t=Wr.parse(e);return t.alpha=0,Wr.transform(t)}},nZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function iZ(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(iT))==null?void 0:t.length)||0)+(((n=e.match(nZ))==null?void 0:n.length)||0)>0}const U6="number",$6="color",sZ="var",rZ="var(",uM="${}",aZ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ax(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},o=[];let u=0;const a=t.replace(aZ,g=>(Wr.test(g)?(i.color.push(u),o.push($6),n.push(Wr.parse(g))):g.startsWith(rZ)?(i.var.push(u),o.push(sZ),n.push(g)):(i.number.push(u),o.push(U6),n.push(parseFloat(g))),++u,uM)).split(uM);return{values:n,split:a,indexes:i,types:o}}function H6(e){return Ax(e).values}function q6(e){const{split:t,types:n}=Ax(e),i=t.length;return o=>{let u="";for(let c=0;c<i;c++)if(u+=t[c],o[c]!==void 0){const a=n[c];a===U6?u+=ux(o[c]):a===$6?u+=Wr.transform(o[c]):u+=o[c]}return u}}const oZ=e=>typeof e=="number"?0:Wr.test(e)?Wr.getAnimatableNone(e):e;function lZ(e){const t=H6(e);return q6(e)(t.map(oZ))}const Wf={test:iZ,parse:H6,createTransformer:q6,getAnimatableNone:lZ};function _2(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function cZ({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let o=0,u=0,c=0;if(!t)o=u=c=n;else{const a=n<.5?n*(1+t):n+t-n*t,g=2*n-a;o=_2(g,a,e+1/3),u=_2(g,a,e),c=_2(g,a,e-1/3)}return{red:Math.round(o*255),green:Math.round(u*255),blue:Math.round(c*255),alpha:i}}function Qv(e,t){return n=>n>0?t:e}const hr=(e,t,n)=>e+(t-e)*n,b2=(e,t,n)=>{const i=e*e,o=n*(t*t-i)+i;return o<0?0:Math.sqrt(o)},uZ=[KS,cm,Zg],dZ=e=>uZ.find(t=>t.test(e));function dM(e){const t=dZ(e);if(!t)return!1;let n=t.parse(e);return t===Zg&&(n=cZ(n)),n}const hM=(e,t)=>{const n=dM(e),i=dM(t);if(!n||!i)return Qv(e,t);const o=te({},n);return u=>(o.red=b2(n.red,i.red,u),o.green=b2(n.green,i.green,u),o.blue=b2(n.blue,i.blue,u),o.alpha=hr(n.alpha,i.alpha,u),cm.transform(o))},QS=new Set(["none","hidden"]);function hZ(e,t){return QS.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function fZ(e,t){return n=>hr(e,t,n)}function rT(e){return typeof e=="number"?fZ:typeof e=="string"?nT(e)?Qv:Wr.test(e)?hM:gZ:Array.isArray(e)?G6:typeof e=="object"?Wr.test(e)?hM:pZ:Qv}function G6(e,t){const n=[...e],i=n.length,o=e.map((u,c)=>rT(u)(u,t[c]));return u=>{for(let c=0;c<i;c++)n[c]=o[c](u);return n}}function pZ(e,t){const n=te(te({},e),t),i={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(i[o]=rT(e[o])(e[o],t[o]));return o=>{for(const u in i)n[u]=i[u](o);return n}}function mZ(e,t){var o;const n=[],i={color:0,var:0,number:0};for(let u=0;u<t.values.length;u++){const c=t.types[u],a=e.indexes[c][i[c]],g=(o=e.values[a])!=null?o:0;n[u]=g,i[c]++}return n}const gZ=(e,t)=>{const n=Wf.createTransformer(t),i=Ax(e),o=Ax(t);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?QS.has(e)&&!o.values.length||QS.has(t)&&!i.values.length?hZ(e,t):r_(G6(mZ(i,o),o.values),n):Qv(e,t)};function W6(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?hr(e,t,n):rT(e)(e,t)}const yZ=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>rr.update(t,n),stop:()=>Gf(t),now:()=>$a.isProcessing?$a.timestamp:dl.now()}},Z6=(e,t,n=10)=>{let i="";const o=Math.max(Math.round(t/n),2);for(let u=0;u<o;u++)i+=Math.round(e(u/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Jv=2e4;function aT(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Jv;)t+=n,i=e.next(t);return t>=Jv?1/0:t}function xZ(e,t=100,n){const i=n(Me(te({},e),{keyframes:[0,t]})),o=Math.min(aT(i),Jv);return{type:"keyframes",ease:u=>i.next(o*u).value/t,duration:xd(o)}}const _Z=5;function Y6(e,t,n){const i=Math.max(t-_Z,0);return N6(n-e(i),t-i)}const vr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fM=.001;function bZ({duration:e=vr.duration,bounce:t=vr.bounce,velocity:n=vr.velocity,mass:i=vr.mass}){let o,u,c=1-t;c=Eh(vr.minDamping,vr.maxDamping,c),e=Eh(vr.minDuration,vr.maxDuration,xd(e)),c<1?(o=_=>{const S=_*c,N=S*e,A=S-n,E=JS(_,c),D=Math.exp(-N);return fM-A/E*D},u=_=>{const N=_*c*e,A=N*n+n,E=Math.pow(c,2)*Math.pow(_,2)*e,D=Math.exp(-N),B=JS(Math.pow(_,2),c);return(-o(_)+fM>0?-1:1)*((A-E)*D)/B}):(o=_=>{const S=Math.exp(-_*e),N=(_-n)*e+1;return-.001+S*N},u=_=>{const S=Math.exp(-_*e),N=(n-_)*(e*e);return S*N});const a=5/e,g=wZ(o,u,a);if(e=yd(e),isNaN(g))return{stiffness:vr.stiffness,damping:vr.damping,duration:e};{const _=Math.pow(g,2)*i;return{stiffness:_,damping:c*2*Math.sqrt(i*_),duration:e}}}const vZ=12;function wZ(e,t,n){let i=n;for(let o=1;o<vZ;o++)i=i-e(i)/t(i);return i}function JS(e,t){return e*Math.sqrt(1-t*t)}const SZ=["duration","bounce"],jZ=["stiffness","damping","mass"];function pM(e,t){return t.some(n=>e[n]!==void 0)}function CZ(e){let t=te({velocity:vr.velocity,stiffness:vr.stiffness,damping:vr.damping,mass:vr.mass,isResolvedFromDuration:!1},e);if(!pM(e,jZ)&&pM(e,SZ))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,u=2*Eh(.05,1,1-(e.bounce||0))*Math.sqrt(o);t=Me(te({},t),{mass:vr.mass,stiffness:o,damping:u})}else{const n=bZ(e);t=Me(te(te({},t),n),{mass:vr.mass}),t.isResolvedFromDuration=!0}return t}function e1(e=vr.visualDuration,t=vr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:o}=n;const u=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],a={done:!1,value:u},{stiffness:g,damping:_,mass:S,duration:N,velocity:A,isResolvedFromDuration:E}=CZ(Me(te({},n),{velocity:-xd(n.velocity||0)})),D=A||0,B=_/(2*Math.sqrt(g*S)),$=c-u,G=xd(Math.sqrt(g/S)),W=Math.abs($)<5;i||(i=W?vr.restSpeed.granular:vr.restSpeed.default),o||(o=W?vr.restDelta.granular:vr.restDelta.default);let J;if(B<1){const K=JS(G,B);J=le=>{const _e=Math.exp(-B*G*le);return c-_e*((D+B*G*$)/K*Math.sin(K*le)+$*Math.cos(K*le))}}else if(B===1)J=K=>c-Math.exp(-G*K)*($+(D+G*$)*K);else{const K=G*Math.sqrt(B*B-1);J=le=>{const _e=Math.exp(-B*G*le),de=Math.min(K*le,300);return c-_e*((D+B*G*$)*Math.sinh(de)+K*$*Math.cosh(de))/K}}const Z={calculatedDuration:E&&N||null,next:K=>{const le=J(K);if(E)a.done=K>=N;else{let _e=K===0?D:0;B<1&&(_e=K===0?yd(D):Y6(J,K,le));const de=Math.abs(_e)<=i,pe=Math.abs(c-le)<=o;a.done=de&&pe}return a.value=a.done?c:le,a},toString:()=>{const K=Math.min(aT(Z),Jv),le=Z6(_e=>Z.next(K*_e).value,K,30);return K+"ms "+le},toTransition:()=>{}};return Z}e1.applyToOptions=e=>{const t=xZ(e,100,e1);return e.ease=t.ease,e.duration=yd(t.duration),e.type="keyframes",e};function ej({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:u=500,modifyTarget:c,min:a,max:g,restDelta:_=.5,restSpeed:S}){const N=e[0],A={done:!1,value:N},E=de=>a!==void 0&&de<a||g!==void 0&&de>g,D=de=>a===void 0?g:g===void 0||Math.abs(a-de)<Math.abs(g-de)?a:g;let B=n*t;const $=N+B,G=c===void 0?$:c($);G!==$&&(B=G-N);const W=de=>-B*Math.exp(-de/i),J=de=>G+W(de),Z=de=>{const pe=W(de),Oe=J(de);A.done=Math.abs(pe)<=_,A.value=A.done?G:Oe};let K,le;const _e=de=>{E(A.value)&&(K=de,le=e1({keyframes:[A.value,D(A.value)],velocity:Y6(J,de,A.value),damping:o,stiffness:u,restDelta:_,restSpeed:S}))};return _e(0),{calculatedDuration:null,next:de=>{let pe=!1;return!le&&K===void 0&&(pe=!0,Z(de),_e(de)),K!==void 0&&de>=K?le.next(de-K):(!pe&&Z(de),A)}}}function TZ(e,t,n){const i=[],o=n||Ah.mix||W6,u=e.length-1;for(let c=0;c<u;c++){let a=o(e[c],e[c+1]);if(t){const g=Array.isArray(t)?t[c]||bc:t;a=r_(g,a)}i.push(a)}return i}function kZ(e,t,{clamp:n=!0,ease:i,mixer:o}={}){const u=e.length;if(XC(u===t.length),u===1)return()=>t[0];if(u===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[u-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=TZ(t,i,o),g=a.length,_=S=>{if(c&&S<e[0])return t[0];let N=0;if(g>1)for(;N<e.length-2&&!(S<e[N+1]);N++);const A=Mx(e[N],e[N+1],S);return a[N](A)};return n?S=>_(Eh(e[0],e[u-1],S)):_}function NZ(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const o=Mx(0,t,i);e.push(hr(n,1,o))}}function MZ(e){const t=[0];return NZ(t,e.length-1),t}function EZ(e,t){return e.map(n=>n*t)}function AZ(e,t){return e.map(()=>t||O6).splice(0,e.length-1)}function dx({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const o=UW(i)?i.map(lM):lM(i),u={done:!1,value:t[0]},c=EZ(n&&n.length===t.length?n:MZ(t),e),a=kZ(c,t,{ease:Array.isArray(o)?o:AZ(t,o)});return{calculatedDuration:e,next:g=>(u.value=a(g),u.done=g>=e,u)}}const PZ=e=>e!==null;function oT(e,{repeat:t,repeatType:n="loop"},i,o=1){const u=e.filter(PZ),a=o<0||t&&n!=="loop"&&t%2===1?0:u.length-1;return!a||i===void 0?u[a]:i}const RZ={decay:ej,inertia:ej,tween:dx,keyframes:dx,spring:e1};function X6(e){typeof e.type=="string"&&(e.type=RZ[e.type])}class lT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const DZ=e=>e/100;class cT extends lT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,o;const{motionValue:n}=this.options;n&&n.updatedAt!==dl.now()&&this.tick(dl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(i=this.options).onStop)==null||o.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;X6(t);const{type:n=dx,repeat:i=0,repeatDelay:o=0,repeatType:u,velocity:c=0}=t;let{keyframes:a}=t;const g=n||dx;g!==dx&&typeof a[0]!="number"&&(this.mixKeyframes=r_(DZ,W6(a[0],a[1])),a=[0,100]);const _=g(Me(te({},t),{keyframes:a}));u==="mirror"&&(this.mirroredGenerator=g(Me(te({},t),{keyframes:[...a].reverse(),velocity:-c}))),_.calculatedDuration===null&&(_.calculatedDuration=aT(_));const{calculatedDuration:S}=_;this.calculatedDuration=S,this.resolvedDuration=S+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=_}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:o,mixKeyframes:u,mirroredGenerator:c,resolvedDuration:a,calculatedDuration:g}=this;if(this.startTime===null)return i.next(0);const{delay:_=0,keyframes:S,repeat:N,repeatType:A,repeatDelay:E,type:D,onUpdate:B,finalKeyframe:$}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const G=this.currentTime-_*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?G<0:G>o;this.currentTime=Math.max(G,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let J=this.currentTime,Z=i;if(N){const de=Math.min(this.currentTime,o)/a;let pe=Math.floor(de),Oe=de%1;!Oe&&de>=1&&(Oe=1),Oe===1&&pe--,pe=Math.min(pe,N+1),!!(pe%2)&&(A==="reverse"?(Oe=1-Oe,E&&(Oe-=E/a)):A==="mirror"&&(Z=c)),J=Eh(0,1,Oe)*a}const K=W?{done:!1,value:S[0]}:Z.next(J);u&&(K.value=u(K.value));let{done:le}=K;!W&&g!==null&&(le=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const _e=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&le);return _e&&D!==ej&&(K.value=oT(S,this.options,$,this.speed)),B&&B(K.value),_e&&this.finish(),K}then(t,n){return this.finished.then(t,n)}get duration(){return xd(this.calculatedDuration)}get time(){return xd(this.currentTime)}set time(t){var n;t=yd(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(dl.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=xd(this.currentTime))}play(){var o,u;if(this.isStopped)return;const{driver:t=yZ,startTime:n}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),(u=(o=this.options).onPlay)==null||u.call(o);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n!=null?n:i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(dl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function zZ(e){var t;for(let n=1;n<e.length;n++)(t=e[n])!=null||(e[n]=e[n-1])}const um=e=>e*180/Math.PI,tj=e=>{const t=um(Math.atan2(e[1],e[0]));return nj(t)},IZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:tj,rotateZ:tj,skewX:e=>um(Math.atan(e[1])),skewY:e=>um(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},nj=e=>(e=e%360,e<0&&(e+=360),e),mM=tj,gM=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),yM=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),OZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gM,scaleY:yM,scale:e=>(gM(e)+yM(e))/2,rotateX:e=>nj(um(Math.atan2(e[6],e[5]))),rotateY:e=>nj(um(Math.atan2(-e[2],e[0]))),rotateZ:mM,rotate:mM,skewX:e=>um(Math.atan(e[4])),skewY:e=>um(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ij(e){return e.includes("scale")?1:0}function sj(e,t){if(!e||e==="none")return ij(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=OZ,o=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=IZ,o=a}if(!o)return ij(t);const u=i[t],c=o[1].split(",").map(FZ);return typeof u=="function"?u(c):c[u]}const LZ=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return sj(n,t)};function FZ(e){return parseFloat(e.trim())}const Ry=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Dy=new Set(Ry),xM=e=>e===Py||e===hi,BZ=new Set(["x","y","z"]),VZ=Ry.filter(e=>!BZ.has(e));function UZ(e){const t=[];return VZ.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const mm={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>sj(t,"x"),y:(e,{transform:t})=>sj(t,"y")};mm.translateX=mm.x;mm.translateY=mm.y;const gm=new Set;let rj=!1,aj=!1,oj=!1;function K6(){if(aj){const e=Array.from(gm).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const o=UZ(i);o.length&&(n.set(i,o),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([u,c])=>{var a;(a=i.getValue(u))==null||a.set(c)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}aj=!1,rj=!1,gm.forEach(e=>e.complete(oj)),gm.clear()}function Q6(){gm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(aj=!0)})}function $Z(){oj=!0,Q6(),K6(),oj=!1}class uT{constructor(t,n,i,o,u,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=o,this.element=u,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(gm.add(this),rj||(rj=!0,rr.read(Q6),rr.resolveKeyframes(K6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:o}=this;if(t[0]===null){const u=o==null?void 0:o.get(),c=t[t.length-1];if(u!==void 0)t[0]=u;else if(i&&n){const a=i.readValue(n,c);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=c),o&&u===void 0&&o.set(t[0])}zZ(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),gm.delete(this)}cancel(){this.state==="scheduled"&&(gm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const HZ=e=>e.startsWith("--");function qZ(e,t,n){HZ(t)?e.style.setProperty(t,n):e.style[t]=n}const GZ=KC(()=>window.ScrollTimeline!==void 0),WZ={};function ZZ(e,t){const n=KC(e);return()=>{var i;return(i=WZ[t])!=null?i:n()}}const J6=ZZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),ex=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,_M={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ex([0,.65,.55,1]),circOut:ex([.55,0,1,.45]),backIn:ex([.31,.01,.66,-.59]),backOut:ex([.33,1.53,.69,.99])};function eR(e,t){if(e)return typeof e=="function"?J6()?Z6(e,t):"ease-out":L6(e)?ex(e):Array.isArray(e)?e.map(n=>eR(n,t)||_M.easeOut):_M[e]}function YZ(e,t,n,{delay:i=0,duration:o=300,repeat:u=0,repeatType:c="loop",ease:a="easeOut",times:g}={},_=void 0){const S={[t]:n};g&&(S.offset=g);const N=eR(a,o);Array.isArray(N)&&(S.easing=N);const A={delay:i,duration:o,easing:Array.isArray(N)?"linear":N,fill:"both",iterations:u+1,direction:c==="reverse"?"alternate":"normal"};return _&&(A.pseudoElement=_),e.animate(S,A)}function tR(e){return typeof e=="function"&&"applyToOptions"in e}function XZ(n){var i=n,{type:e}=i,t=en(i,["type"]);var o,u;return tR(e)&&J6()?e.applyToOptions(t):((o=t.duration)!=null||(t.duration=300),(u=t.ease)!=null||(t.ease="easeOut"),t)}class KZ extends lT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:o,pseudoElement:u,allowFlatten:c=!1,finalKeyframe:a,onComplete:g}=t;this.isPseudoElement=!!u,this.allowFlatten=c,this.options=t,XC(typeof t.type!="string");const _=XZ(t);this.animation=YZ(n,i,o,_,u),_.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const S=oT(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(S):qZ(n,i,S),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch(t){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return xd(Number(t))}get time(){return xd(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=yd(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&GZ()?(this.animation.timeline=t,bc):n(this)}}const nR={anticipate:D6,backInOut:R6,circInOut:I6};function QZ(e){return e in nR}function JZ(e){typeof e.ease=="string"&&QZ(e.ease)&&(e.ease=nR[e.ease])}const bM=10;class eY extends KZ{constructor(t){JZ(t),X6(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){var S;const _=this.options,{motionValue:n,onUpdate:i,onComplete:o,element:u}=_,c=en(_,["motionValue","onUpdate","onComplete","element"]);if(!n)return;if(t!==void 0){n.set(t);return}const a=new cT(Me(te({},c),{autoplay:!1})),g=yd((S=this.finishedTime)!=null?S:this.time);n.setWithVelocity(a.sample(g-bM).value,a.sample(g).value,bM),a.stop()}}const vM=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Wf.test(e)||e==="0")&&!e.startsWith("url("));function tY(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function nY(e,t,n,i){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const u=e[e.length-1],c=vM(o,t),a=vM(u,t);return!c||!a?!1:tY(e)||(n==="spring"||tR(n))&&i}function lj(e){e.duration=0,e.type}const iY=new Set(["opacity","clipPath","filter","transform"]),sY=KC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function rY(e){var S;const{motionValue:t,name:n,repeatDelay:i,repeatType:o,damping:u,type:c}=e;if(!(((S=t==null?void 0:t.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:_}=t.owner.getProps();return sY()&&n&&iY.has(n)&&(n!=="transform"||!_)&&!g&&!i&&o!=="mirror"&&u!==0&&c!=="inertia"}const aY=40;class oY extends lT{constructor(A){var E=A,{autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:c="loop",keyframes:a,name:g,motionValue:_,element:S}=E,N=en(E,["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"]);var $;super(),this.stop=()=>{var G,W;this._animation&&(this._animation.stop(),(G=this.stopTimeline)==null||G.call(this)),(W=this.keyframeResolver)==null||W.cancel()},this.createdAt=dl.now();const D=te({autoplay:t,delay:n,type:i,repeat:o,repeatDelay:u,repeatType:c,name:g,motionValue:_,element:S},N),B=(S==null?void 0:S.KeyframeResolver)||uT;this.keyframeResolver=new B(a,(G,W,J)=>this.onKeyframesResolved(G,W,D,!J),g,_,S),($=this.keyframeResolver)==null||$.scheduleResolve()}onKeyframesResolved(t,n,i,o){this.keyframeResolver=void 0;const{name:u,type:c,velocity:a,delay:g,isHandoff:_,onUpdate:S}=i;this.resolvedAt=dl.now(),nY(t,u,c,a)||((Ah.instantAnimations||!g)&&(S==null||S(oT(t,i,n))),t[0]=t[t.length-1],lj(i),i.repeat=0);const N=o?this.resolvedAt?this.resolvedAt-this.createdAt>aY?this.resolvedAt:this.createdAt:this.createdAt:void 0,A=Me(te({startTime:N,finalKeyframe:n},i),{keyframes:t}),E=!_&&rY(A)?new eY(Me(te({},A),{element:A.motionValue.owner.current})):new cT(A);E.finished.then(()=>this.notifyFinished()).catch(bc),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),$Z()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const lY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cY(e){const t=lY.exec(e);if(!t)return[,];const[,n,i,o]=t;return[`--${n!=null?n:i}`,o]}function iR(e,t,n=1){const[i,o]=cY(e);if(!i)return;const u=window.getComputedStyle(t).getPropertyValue(i);if(u){const c=u.trim();return C6(c)?parseFloat(c):c}return nT(o)?iR(o,t,n+1):o}function dT(e,t){var n,i;return(i=(n=e==null?void 0:e[t])!=null?n:e==null?void 0:e.default)!=null?i:e}const sR=new Set(["width","height","top","left","right","bottom",...Ry]),uY={test:e=>e==="auto",parse:e=>e},rR=e=>t=>t.test(e),aR=[Py,hi,_d,Df,tZ,eZ,uY],wM=e=>aR.find(rR(e));function dY(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||k6(e):!0}const hY=new Set(["brightness","contrast","saturate","opacity"]);function fY(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(iT)||[];if(!i)return e;const o=n.replace(i,"");let u=hY.has(t)?1:0;return i!==n&&(u*=100),t+"("+u+o+")"}const pY=/\b([a-z-]*)\(.*?\)/gu,cj=Me(te({},Wf),{getAnimatableNone:e=>{const t=e.match(pY);return t?t.map(fY).join(" "):e}}),SM=Me(te({},Py),{transform:Math.round}),mY={rotate:Df,rotateX:Df,rotateY:Df,rotateZ:Df,scale:bb,scaleX:bb,scaleY:bb,scaleZ:bb,skew:Df,skewX:Df,skewY:Df,distance:hi,translateX:hi,translateY:hi,translateZ:hi,x:hi,y:hi,z:hi,perspective:hi,transformPerspective:hi,opacity:Ex,originX:cM,originY:cM,originZ:hi},hT=Me(te({borderWidth:hi,borderTopWidth:hi,borderRightWidth:hi,borderBottomWidth:hi,borderLeftWidth:hi,borderRadius:hi,radius:hi,borderTopLeftRadius:hi,borderTopRightRadius:hi,borderBottomRightRadius:hi,borderBottomLeftRadius:hi,width:hi,maxWidth:hi,height:hi,maxHeight:hi,top:hi,right:hi,bottom:hi,left:hi,padding:hi,paddingTop:hi,paddingRight:hi,paddingBottom:hi,paddingLeft:hi,margin:hi,marginTop:hi,marginRight:hi,marginBottom:hi,marginLeft:hi,backgroundPositionX:hi,backgroundPositionY:hi},mY),{zIndex:SM,fillOpacity:Ex,strokeOpacity:Ex,numOctaves:SM}),gY=Me(te({},hT),{color:Wr,backgroundColor:Wr,outlineColor:Wr,fill:Wr,stroke:Wr,borderColor:Wr,borderTopColor:Wr,borderRightColor:Wr,borderBottomColor:Wr,borderLeftColor:Wr,filter:cj,WebkitFilter:cj}),oR=e=>gY[e];function lR(e,t){let n=oR(e);return n!==cj&&(n=Wf),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const yY=new Set(["auto","none","0"]);function xY(e,t,n){let i=0,o;for(;i<e.length&&!o;){const u=e[i];typeof u=="string"&&!yY.has(u)&&Ax(u).values.length&&(o=e[i]),i++}if(o&&n)for(const u of t)e[u]=lR(n,o)}class _Y extends uT{constructor(t,n,i,o,u){super(t,n,i,o,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let g=0;g<t.length;g++){let _=t[g];if(typeof _=="string"&&(_=_.trim(),nT(_))){const S=iR(_,n.current);S!==void 0&&(t[g]=S),g===t.length-1&&(this.finalKeyframe=_)}}if(this.resolveNoneKeyframes(),!sR.has(i)||t.length!==2)return;const[o,u]=t,c=wM(o),a=wM(u);if(c!==a)if(xM(c)&&xM(a))for(let g=0;g<t.length;g++){const _=t[g];typeof _=="string"&&(t[g]=parseFloat(_))}else mm[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let o=0;o<t.length;o++)(t[o]===null||dY(t[o]))&&i.push(o);i.length&&xY(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mm[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(i,o).jump(o,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const u=i.length-1,c=i[u];i[u]=mm[n](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([g,_])=>{t.getValue(g).set(_)}),this.resolveNoneKeyframes()}}function bY(e,t,n){var i;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;const u=(i=n==null?void 0:n[e])!=null?i:o.querySelectorAll(e);return u?Array.from(u):[]}return Array.from(e)}const cR=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function vY(e){return T6(e)&&"offsetHeight"in e}const jM=30,wY=e=>!isNaN(parseFloat(e));class SY{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var u;const o=dl.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=dl.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=wY(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new QC);const i=this.events[t].add(n);return t==="change"?()=>{i(),rr.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=dl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>jM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jM);return N6(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hy(e,t){return new SY(e,t)}const{schedule:fT}=F6(queueMicrotask,!1),hu={x:!1,y:!1};function uR(){return hu.x||hu.y}function jY(e){return e==="x"||e==="y"?hu[e]?null:(hu[e]=!0,()=>{hu[e]=!1}):hu.x||hu.y?null:(hu.x=hu.y=!0,()=>{hu.x=hu.y=!1})}function dR(e,t){const n=bY(e),i=new AbortController,o=Me(te({passive:!0},t),{signal:i.signal});return[n,o,()=>i.abort()]}function CM(e){return!(e.pointerType==="touch"||uR())}function CY(e,t,n={}){const[i,o,u]=dR(e,n),c=a=>{if(!CM(a))return;const{target:g}=a,_=t(g,a);if(typeof _!="function"||!g)return;const S=N=>{CM(N)&&(_(N),g.removeEventListener("pointerleave",S))};g.addEventListener("pointerleave",S,o)};return i.forEach(a=>{a.addEventListener("pointerenter",c,o)}),u}const hR=(e,t)=>t?e===t?!0:hR(e,t.parentElement):!1,pT=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,TY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kY(e){return TY.has(e.tagName)||e.tabIndex!==-1}const ov=new WeakSet;function TM(e){return t=>{t.key==="Enter"&&e(t)}}function v2(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const NY=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=TM(()=>{if(ov.has(n))return;v2(n,"down");const o=TM(()=>{v2(n,"up")}),u=()=>v2(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",u,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function kM(e){return pT(e)&&!uR()}function MY(e,t,n={}){const[i,o,u]=dR(e,n),c=a=>{const g=a.currentTarget;if(!kM(a))return;ov.add(g);const _=t(g,a),S=(E,D)=>{window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",A),ov.has(g)&&ov.delete(g),kM(E)&&typeof _=="function"&&_(E,{success:D})},N=E=>{S(E,g===window||g===document||n.useGlobalTarget||hR(g,E.target))},A=E=>{S(E,!1)};window.addEventListener("pointerup",N,o),window.addEventListener("pointercancel",A,o)};return i.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",c,o),vY(a)&&(a.addEventListener("focus",_=>NY(_,o)),!kY(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),u}function fR(e){return T6(e)&&"ownerSVGElement"in e}function EY(e){return fR(e)&&e.tagName==="svg"}const xo=e=>!!(e&&e.getVelocity),AY=[...aR,Wr,Wf],PY=e=>AY.find(rR(e)),pR=L.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function RY(e=!0){const t=L.useContext(WC);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=t,u=L.useId();L.useEffect(()=>{if(e)return o(u)},[e]);const c=L.useCallback(()=>e&&i&&i(u),[u,i,e]);return!n&&i?[!1,c]:[!0]}const mR=L.createContext({strict:!1}),NM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fy={};for(const e in NM)fy[e]={isEnabled:t=>NM[e].some(n=>!!t[n])};function DY(e){for(const t in e)fy[t]=te(te({},fy[t]),e[t])}const zY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function t1(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||zY.has(e)}let gR=e=>!t1(e);function IY(e){typeof e=="function"&&(gR=t=>t.startsWith("on")?!t1(t):e(t))}try{IY(require("@emotion/is-prop-valid").default)}catch(e){}function OY(e,t,n){const i={};for(const o in e)o==="values"&&typeof e.values=="object"||(gR(o)||n===!0&&t1(o)||!t&&!t1(o)||e.draggable&&o.startsWith("onDrag"))&&(i[o]=e[o]);return i}const U1=L.createContext({});function $1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Px(e){return typeof e=="string"||Array.isArray(e)}const mT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gT=["initial",...mT];function H1(e){return $1(e.animate)||gT.some(t=>Px(e[t]))}function yR(e){return!!(H1(e)||e.variants)}function LY(e,t){if(H1(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Px(n)?n:void 0,animate:Px(i)?i:void 0}}return e.inherit!==!1?t:{}}function FY(e){const{initial:t,animate:n}=LY(e,L.useContext(U1));return L.useMemo(()=>({initial:t,animate:n}),[MM(t),MM(n)])}function MM(e){return Array.isArray(e)?e.join(" "):e}const Rx={};function BY(e){for(const t in e)Rx[t]=e[t],tT(t)&&(Rx[t].isCSSVariable=!0)}function xR(e,{layout:t,layoutId:n}){return Dy.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Rx[e]||e==="opacity")}const VY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},UY=Ry.length;function $Y(e,t,n){let i="",o=!0;for(let u=0;u<UY;u++){const c=Ry[u],a=e[c];if(a===void 0)continue;let g=!0;if(typeof a=="number"?g=a===(c.startsWith("scale")?1:0):g=parseFloat(a)===0,!g||n){const _=cR(a,hT[c]);if(!g){o=!1;const S=VY[c]||c;i+=`${S}(${_}) `}n&&(t[c]=_)}}return i=i.trim(),n?i=n(t,o?"":i):o&&(i="none"),i}function yT(e,t,n){const{style:i,vars:o,transformOrigin:u}=e;let c=!1,a=!1;for(const g in t){const _=t[g];if(Dy.has(g)){c=!0;continue}else if(tT(g)){o[g]=_;continue}else{const S=cR(_,hT[g]);g.startsWith("origin")?(a=!0,u[g]=S):i[g]=S}}if(t.transform||(c||n?i.transform=$Y(t,e.transform,n):i.transform&&(i.transform="none")),a){const{originX:g="50%",originY:_="50%",originZ:S=0}=u;i.transformOrigin=`${g} ${_} ${S}`}}const xT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _R(e,t,n){for(const i in t)!xo(t[i])&&!xR(i,n)&&(e[i]=t[i])}function HY({transformTemplate:e},t){return L.useMemo(()=>{const n=xT();return yT(n,t,e),Object.assign({},n.vars,n.style)},[t])}function qY(e,t){const n=e.style||{},i={};return _R(i,n,e),Object.assign(i,HY(e,t)),i}function GY(e,t){const n={},i=qY(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const WY={offset:"stroke-dashoffset",array:"stroke-dasharray"},ZY={offset:"strokeDashoffset",array:"strokeDasharray"};function YY(e,t,n=1,i=0,o=!0){e.pathLength=1;const u=o?WY:ZY;e[u.offset]=hi.transform(-i);const c=hi.transform(t),a=hi.transform(n);e[u.array]=`${c} ${a}`}function bR(e,N,g,_,S){var A=N,{attrX:t,attrY:n,attrScale:i,pathLength:o,pathSpacing:u=1,pathOffset:c=0}=A,a=en(A,["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"]);var B,$;if(yT(e,a,_),g){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:E,style:D}=e;E.transform&&(D.transform=E.transform,delete E.transform),(D.transform||E.transformOrigin)&&(D.transformOrigin=(B=E.transformOrigin)!=null?B:"50% 50%",delete E.transformOrigin),D.transform&&(D.transformBox=($=S==null?void 0:S.transformBox)!=null?$:"fill-box",delete E.transformBox),t!==void 0&&(E.x=t),n!==void 0&&(E.y=n),i!==void 0&&(E.scale=i),o!==void 0&&YY(E,o,u,c,!1)}const vR=()=>Me(te({},xT()),{attrs:{}}),wR=e=>typeof e=="string"&&e.toLowerCase()==="svg";function XY(e,t,n,i){const o=L.useMemo(()=>{const u=vR();return bR(u,t,wR(i),e.transformTemplate,e.style),Me(te({},u.attrs),{style:te({},u.style)})},[t]);if(e.style){const u={};_R(u,e.style,e),o.style=te(te({},u),o.style)}return o}const KY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _T(e){return typeof e!="string"||e.includes("-")?!1:!!(KY.indexOf(e)>-1||/[A-Z]/u.test(e))}function QY(e,t,n,{latestValues:i},o,u=!1){const a=(_T(e)?XY:GY)(t,i,o,e),g=OY(t,typeof e=="string",u),_=e!==L.Fragment?Me(te(te({},g),a),{ref:n}):{},{children:S}=t,N=L.useMemo(()=>xo(S)?S.get():S,[S]);return L.createElement(e,Me(te({},_),{children:N}))}function EM(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function bT(e,t,n,i){if(typeof t=="function"){const[o,u]=EM(i);t=t(n!==void 0?n:e.custom,o,u)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,u]=EM(i);t=t(n!==void 0?n:e.custom,o,u)}return t}function lv(e){return xo(e)?e.get():e}function JY({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,o){return{latestValues:eX(n,i,o,e),renderState:t()}}function eX(e,t,n,i){const o={},u=i(e,{});for(const E in u)o[E]=lv(u[E]);let{initial:c,animate:a}=e;const g=H1(e),_=yR(e);t&&_&&!g&&e.inherit!==!1&&(c===void 0&&(c=t.initial),a===void 0&&(a=t.animate));let S=n?n.initial===!1:!1;S=S||c===!1;const N=S?a:c;if(N&&typeof N!="boolean"&&!$1(N)){const E=Array.isArray(N)?N:[N];for(let D=0;D<E.length;D++){const B=bT(e,E[D]);if(B){const A=B,{transitionEnd:$,transition:G}=A,W=en(A,["transitionEnd","transition"]);for(const J in W){let Z=W[J];if(Array.isArray(Z)){const K=S?Z.length-1:0;Z=Z[K]}Z!==null&&(o[J]=Z)}for(const J in $)o[J]=$[J]}}}return o}const SR=e=>(t,n)=>{const i=L.useContext(U1),o=L.useContext(WC),u=()=>JY(e,t,i,o);return n?u():DW(u)};function vT(e,t,n){var u;const{style:i}=e,o={};for(const c in i)(xo(i[c])||t.style&&xo(t.style[c])||xR(c,e)||((u=n==null?void 0:n.getValue(c))==null?void 0:u.liveStyle)!==void 0)&&(o[c]=i[c]);return o}const tX=SR({scrapeMotionValuesFromProps:vT,createRenderState:xT});function jR(e,t,n){const i=vT(e,t,n);for(const o in e)if(xo(e[o])||xo(t[o])){const u=Ry.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[u]=e[o]}return i}const nX=SR({scrapeMotionValuesFromProps:jR,createRenderState:vR}),iX=Symbol.for("motionComponentSymbol");function Yg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function sX(e,t,n){return L.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Yg(n)&&(n.current=i))},[t])}const wT=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rX="framerAppearId",CR="data-"+wT(rX),TR=L.createContext({});function aX(e,t,n,i,o){var B,$;const{visualElement:u}=L.useContext(U1),c=L.useContext(mR),a=L.useContext(WC),g=L.useContext(pR).reducedMotion,_=L.useRef(null);i=i||c.renderer,!_.current&&i&&(_.current=i(e,{visualState:t,parent:u,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:g}));const S=_.current,N=L.useContext(TR);S&&!S.projection&&o&&(S.type==="html"||S.type==="svg")&&oX(_.current,n,o,N);const A=L.useRef(!1);L.useInsertionEffect(()=>{S&&A.current&&S.update(n,a)});const E=n[CR],D=L.useRef(!!E&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,E))&&(($=window.MotionHasOptimisedAnimation)==null?void 0:$.call(window,E)));return zW(()=>{S&&(A.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),D.current&&S.animationState&&S.animationState.animateChanges())}),L.useEffect(()=>{S&&(!D.current&&S.animationState&&S.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var G;(G=window.MotionHandoffMarkAsComplete)==null||G.call(window,E)}),D.current=!1),S.enteringChildren=void 0)}),S}function oX(e,t,n,i){const{layoutId:o,layout:u,drag:c,dragConstraints:a,layoutScroll:g,layoutRoot:_,layoutCrossfade:S}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:kR(e.parent)),e.projection.setOptions({layoutId:o,layout:u,alwaysMeasureLayout:!!c||a&&Yg(a),visualElement:e,animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,crossfade:S,layoutScroll:g,layoutRoot:_})}function kR(e){if(e)return e.options.allowProjection!==!1?e.projection:kR(e.parent)}function w2(e,{forwardMotionProps:t=!1}={},n,i){var a,g;n&&DY(n);const o=_T(e)?nX:tX;function u(_,S){let N;const A=Me(te(te({},L.useContext(pR)),_),{layoutId:lX(_)}),{isStatic:E}=A,D=FY(_),B=o(_,E);if(!E&&GC){cX();const $=uX(A);N=$.MeasureLayout,D.visualElement=aX(e,B,A,i,$.ProjectionNode)}return l.jsxs(U1.Provider,{value:D,children:[N&&D.visualElement?l.jsx(N,te({visualElement:D.visualElement},A)):null,QY(e,_,sX(B,D.visualElement,S),B,E,t)]})}u.displayName=`motion.${typeof e=="string"?e:`create(${(g=(a=e.displayName)!=null?a:e.name)!=null?g:""})`}`;const c=L.forwardRef(u);return c[iX]=e,c}function lX({layoutId:e}){const t=L.useContext(j6).id;return t&&e!==void 0?t+"-"+e:e}function cX(e,t){L.useContext(mR).strict}function uX(e){const{drag:t,layout:n}=fy;if(!t&&!n)return{};const i=te(te({},t),n);return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function dX(e,t){if(typeof Proxy=="undefined")return w2;const n=new Map,i=(u,c)=>w2(u,c,e,t),o=(u,c)=>i(u,c);return new Proxy(o,{get:(u,c)=>c==="create"?i:(n.has(c)||n.set(c,w2(c,void 0,e,t)),n.get(c))})}function NR({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function hX({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function fX(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function S2(e){return e===void 0||e===1}function uj({scale:e,scaleX:t,scaleY:n}){return!S2(e)||!S2(t)||!S2(n)}function sm(e){return uj(e)||MR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function MR(e){return AM(e.x)||AM(e.y)}function AM(e){return e&&e!=="0%"}function n1(e,t,n){const i=e-n,o=t*i;return n+o}function PM(e,t,n,i,o){return o!==void 0&&(e=n1(e,o,i)),n1(e,n,i)+t}function dj(e,t=0,n=1,i,o){e.min=PM(e.min,t,n,i,o),e.max=PM(e.max,t,n,i,o)}function ER(e,{x:t,y:n}){dj(e.x,t.translate,t.scale,t.originPoint),dj(e.y,n.translate,n.scale,n.originPoint)}const RM=.999999999999,DM=1.0000000000001;function pX(e,t,n,i=!1){const o=n.length;if(!o)return;t.x=t.y=1;let u,c;for(let a=0;a<o;a++){u=n[a],c=u.projectionDelta;const{visualElement:g}=u.options;g&&g.props.style&&g.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Kg(e,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,ER(e,c)),i&&sm(u.latestValues)&&Kg(e,u.latestValues))}t.x<DM&&t.x>RM&&(t.x=1),t.y<DM&&t.y>RM&&(t.y=1)}function Xg(e,t){e.min=e.min+t,e.max=e.max+t}function zM(e,t,n,i,o=.5){const u=hr(e.min,e.max,o);dj(e,t,n,u,i)}function Kg(e,t){zM(e.x,t.x,t.scaleX,t.scale,t.originX),zM(e.y,t.y,t.scaleY,t.scale,t.originY)}function AR(e,t){return NR(fX(e.getBoundingClientRect(),t))}function mX(e,t,n){const i=AR(e,n),{scroll:o}=t;return o&&(Xg(i.x,o.offset.x),Xg(i.y,o.offset.y)),i}const IM=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qg=()=>({x:IM(),y:IM()}),OM=()=>({min:0,max:0}),Mr=()=>({x:OM(),y:OM()}),hj={current:null},PR={current:!1};function gX(){if(PR.current=!0,!!GC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>hj.current=e.matches;e.addEventListener("change",t),t()}else hj.current=!1}const yX=new WeakMap;function xX(e,t,n){for(const i in t){const o=t[i],u=n[i];if(xo(o))e.addValue(i,o);else if(xo(u))e.addValue(i,hy(o,{owner:e}));else if(u!==o)if(e.hasValue(i)){const c=e.getValue(i);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=e.getStaticValue(i);e.addValue(i,hy(c!==void 0?c:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const LM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _X{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:u,visualState:c},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=uT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=dl.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,rr.render(this.render,!1,!0))};const{latestValues:g,renderState:_}=c;this.latestValues=g,this.baseTarget=te({},g),this.initialValues=n.initial?te({},g):{},this.renderState=_,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!u,this.isControllingVariants=H1(n),this.isVariantNode=yR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const A=this.scrapeMotionValuesFromProps(n,{},this),{willChange:S}=A,N=en(A,["willChange"]);for(const E in N){const D=N[E];g[E]!==void 0&&xo(D)&&D.set(g[E])}}mount(t){var n;this.current=t,yX.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),PR.current||gX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hj.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Gf(this.notifyUpdate),Gf(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){var n;this.children.add(t),(n=this.enteringChildren)!=null||(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Dy.has(t);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&rr.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),u&&u(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in fy){const n=fy[t];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[t]&&o&&i(this.props)&&(this.features[t]=new o(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<LM.length;i++){const o=LM[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u="on"+o,c=t[u];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=xX(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=hy(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){var o;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(o=this.getBaseTargetFromProps(this.props,t))!=null?o:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(C6(i)||k6(i))?i=parseFloat(i):!PY(i)&&Wf.test(n)&&(i=lR(t,n)),this.setBaseTarget(t,xo(i)?i.get():i)),xo(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var u;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const c=bT(this.props,n,(u=this.presenceContext)==null?void 0:u.custom);c&&(i=c[t])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!xo(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new QC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){fT.render(this.render)}}class RR extends _X{constructor(){super(...arguments),this.KeyframeResolver=_Y}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;xo(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function DR(e,{style:t,vars:n},i,o){const u=e.style;let c;for(c in t)u[c]=t[c];o==null||o.applyProjectionStyles(u,i);for(c in n)u.setProperty(c,n[c])}function bX(e){return window.getComputedStyle(e)}class vX extends RR{constructor(){super(...arguments),this.type="html",this.renderInstance=DR}readValueFromInstance(t,n){var i;if(Dy.has(n))return(i=this.projection)!=null&&i.isProjecting?ij(n):LZ(t,n);{const o=bX(t),u=(tT(n)?o.getPropertyValue(n):o[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:n}){return AR(t,n)}build(t,n,i){yT(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return vT(t,n,i)}}const zR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wX(e,t,n,i){DR(e,t,void 0,i);for(const o in t.attrs)e.setAttribute(zR.has(o)?o:wT(o),t.attrs[o])}class SX extends RR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Dy.has(n)){const i=oR(n);return i&&i.default||0}return n=zR.has(n)?n:wT(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return jR(t,n,i)}build(t,n,i){bR(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,o){wX(t,n,i,o)}mount(t){this.isSVGTag=wR(t.tagName),super.mount(t)}}const jX=(e,t)=>_T(e)?new SX(t):new vX(t,{allowProjection:e!==L.Fragment});function ry(e,t,n){const i=e.getProps();return bT(i,t,n!==void 0?n:i.custom,e)}const fj=e=>Array.isArray(e);function CX(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,hy(n))}function TX(e){return fj(e)?e[e.length-1]||0:e}function kX(e,t){let c=ry(e,t)||{},{transitionEnd:i={},transition:o={}}=c,u=en(c,["transitionEnd","transition"]);u=te(te({},u),i);for(const a in u){const g=TX(u[a]);CX(e,a,g)}}function NX(e){return!!(xo(e)&&e.add)}function pj(e,t){const n=e.getValue("willChange");if(NX(n))return n.add(t);if(!n&&Ah.WillChange){const i=new Ah.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function IR(e){return e.props[CR]}const MX=e=>e!==null;function EX(e,{repeat:t,repeatType:n="loop"},i){const o=e.filter(MX),u=t&&n!=="loop"&&t%2===1?0:o.length-1;return o[u]}const AX={type:"spring",stiffness:500,damping:25,restSpeed:10},PX=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),RX={type:"keyframes",duration:.8},DX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zX=(e,{keyframes:t})=>t.length>2?RX:Dy.has(e)?e.startsWith("scale")?PX(t[1]):AX:DX;function IX(N){var A=N,{when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:u,repeatType:c,repeatDelay:a,from:g,elapsed:_}=A,S=en(A,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(S).length}const ST=(e,t,n,i={},o,u)=>c=>{const a=dT(i,e)||{},g=a.delay||i.delay||0;let{elapsed:_=0}=i;_=_-yd(g);const S=Me(te({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},a),{delay:-_,onUpdate:A=>{t.set(A),a.onUpdate&&a.onUpdate(A)},onComplete:()=>{c(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:u?void 0:o});IX(a)||Object.assign(S,zX(e,S)),S.duration&&(S.duration=yd(S.duration)),S.repeatDelay&&(S.repeatDelay=yd(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let N=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(lj(S),S.delay===0&&(N=!0)),(Ah.instantAnimations||Ah.skipAnimations)&&(N=!0,lj(S),S.delay=0),S.allowFlatten=!a.type&&!a.ease,N&&!u&&t.get()!==void 0){const A=EX(S.keyframes,a);if(A!==void 0){rr.update(()=>{S.onUpdate(A),S.onComplete()});return}}return a.isSync?new cT(S):new oY(S)};function OX({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function OR(e,t,{delay:n=0,transitionOverride:i,type:o}={}){var N;let S=t,{transition:u=e.getDefaultTransition(),transitionEnd:c}=S,a=en(S,["transition","transitionEnd"]);i&&(u=i);const g=[],_=o&&e.animationState&&e.animationState.getState()[o];for(const A in a){const E=e.getValue(A,(N=e.latestValues[A])!=null?N:null),D=a[A];if(D===void 0||_&&OX(_,A))continue;const B=te({delay:n},dT(u||{},A)),$=E.get();if($!==void 0&&!E.isAnimating&&!Array.isArray(D)&&D===$&&!B.velocity)continue;let G=!1;if(window.MotionHandoffAnimation){const J=IR(e);if(J){const Z=window.MotionHandoffAnimation(J,A,rr);Z!==null&&(B.startTime=Z,G=!0)}}pj(e,A),E.start(ST(A,E,D,e.shouldReduceMotion&&sR.has(A)?{type:!1}:B,e,G));const W=E.animation;W&&g.push(W)}return c&&Promise.all(g).then(()=>{rr.update(()=>{c&&kX(e,c)})}),g}function LR(e,t,n,i=0,o=1){const u=Array.from(e).sort((_,S)=>_.sortNodePosition(S)).indexOf(t),c=e.size,a=(c-1)*i;return typeof n=="function"?n(u,c):o===1?u*i:a-u*i}function mj(e,t,n={}){var g;const i=ry(e,t,n.type==="exit"?(g=e.presenceContext)==null?void 0:g.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const u=i?()=>Promise.all(OR(e,i,n)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(_=0)=>{const{delayChildren:S=0,staggerChildren:N,staggerDirection:A}=o;return LX(e,t,_,S,N,A,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[_,S]=a==="beforeChildren"?[u,c]:[c,u];return _().then(()=>S())}else return Promise.all([u(),c(n.delay)])}function LX(e,t,n=0,i=0,o=0,u=1,c){const a=[];for(const g of e.variantChildren)g.notify("AnimationStart",t),a.push(mj(g,t,Me(te({},c),{delay:n+(typeof i=="function"?0:i)+LR(e.variantChildren,g,i,o,u)})).then(()=>g.notify("AnimationComplete",t)));return Promise.all(a)}function FX(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const o=t.map(u=>mj(e,u,n));i=Promise.all(o)}else if(typeof t=="string")i=mj(e,t,n);else{const o=typeof t=="function"?ry(e,t,n.custom):t;i=Promise.all(OR(e,o,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function FR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const BX=gT.length;function BR(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?BR(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<BX;n++){const i=gT[n],o=e.props[i];(Px(o)||o===!1)&&(t[i]=o)}return t}const VX=[...mT].reverse(),UX=mT.length;function $X(e){return t=>Promise.all(t.map(({animation:n,options:i})=>FX(e,n,i)))}function HX(e){let t=$X(e),n=FM(),i=!0;const o=g=>(_,S)=>{var A;const N=ry(e,S,g==="exit"?(A=e.presenceContext)==null?void 0:A.custom:void 0);if(N){const E=N,{transition:D,transitionEnd:B}=E,$=en(E,["transition","transitionEnd"]);_=te(te(te({},_),$),B)}return _};function u(g){t=g(e)}function c(g){const{props:_}=e,S=BR(e.parent)||{},N=[],A=new Set;let E={},D=1/0;for(let $=0;$<UX;$++){const G=VX[$],W=n[G],J=_[G]!==void 0?_[G]:S[G],Z=Px(J),K=G===g?W.isActive:null;K===!1&&(D=$);let le=J===S[G]&&J!==_[G]&&Z;if(le&&i&&e.manuallyAnimateOnMount&&(le=!1),W.protectedKeys=te({},E),!W.isActive&&K===null||!J&&!W.prevProp||$1(J)||typeof J=="boolean")continue;const _e=qX(W.prevProp,J);let de=_e||G===g&&W.isActive&&!le&&Z||$>D&&Z,pe=!1;const Oe=Array.isArray(J)?J:[J];let He=Oe.reduce(o(G),{});K===!1&&(He={});const{prevResolvedValues:We={}}=W,st=te(te({},We),He),At=Qe=>{de=!0,A.has(Qe)&&(pe=!0,A.delete(Qe)),W.needsAnimating[Qe]=!0;const Je=e.getValue(Qe);Je&&(Je.liveStyle=!1)};for(const Qe in st){const Je=He[Qe],Pt=We[Qe];if(E.hasOwnProperty(Qe))continue;let fe=!1;fj(Je)&&fj(Pt)?fe=!FR(Je,Pt):fe=Je!==Pt,fe?Je!=null?At(Qe):A.add(Qe):Je!==void 0&&A.has(Qe)?At(Qe):W.protectedKeys[Qe]=!0}W.prevProp=J,W.prevResolvedValues=He,W.isActive&&(E=te(te({},E),He)),i&&e.blockInitialAnimation&&(de=!1);const vt=le&&_e;de&&(!vt||pe)&&N.push(...Oe.map(Qe=>{const Je={type:G};if(typeof Qe=="string"&&i&&!vt&&e.manuallyAnimateOnMount&&e.parent){const{parent:Pt}=e,fe=ry(Pt,Qe);if(Pt.enteringChildren&&fe){const{delayChildren:Xe}=fe.transition||{};Je.delay=LR(Pt.enteringChildren,e,Xe)}}return{animation:Qe,options:Je}}))}if(A.size){const $={};if(typeof _.initial!="boolean"){const G=ry(e,Array.isArray(_.initial)?_.initial[0]:_.initial);G&&G.transition&&($.transition=G.transition)}A.forEach(G=>{const W=e.getBaseTarget(G),J=e.getValue(G);J&&(J.liveStyle=!0),$[G]=W!=null?W:null}),N.push({animation:$})}let B=!!N.length;return i&&(_.initial===!1||_.initial===_.animate)&&!e.manuallyAnimateOnMount&&(B=!1),i=!1,B?t(N):Promise.resolve()}function a(g,_){var N;if(n[g].isActive===_)return Promise.resolve();(N=e.variantChildren)==null||N.forEach(A=>{var E;return(E=A.animationState)==null?void 0:E.setActive(g,_)}),n[g].isActive=_;const S=c(g);for(const A in n)n[A].protectedKeys={};return S}return{animateChanges:c,setActive:a,setAnimateFunction:u,getState:()=>n,reset:()=>{n=FM(),i=!0}}}function qX(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!FR(t,e):!1}function Qp(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function FM(){return{animate:Qp(!0),whileInView:Qp(),whileHover:Qp(),whileTap:Qp(),whileDrag:Qp(),whileFocus:Qp(),exit:Qp()}}class ep{constructor(t){this.isMounted=!1,this.node=t}update(){}}class GX extends ep{constructor(t){super(t),t.animationState||(t.animationState=HX(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();$1(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let WX=0;class ZX extends ep{constructor(){super(...arguments),this.id=WX++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const YX={animation:{Feature:GX},exit:{Feature:ZX}};function Dx(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function l_(e){return{point:{x:e.pageX,y:e.pageY}}}const XX=e=>t=>pT(t)&&e(t,l_(t));function hx(e,t,n,i){return Dx(e,t,XX(n),i)}const VR=1e-4,KX=1-VR,QX=1+VR,UR=.01,JX=0-UR,eK=0+UR;function Bo(e){return e.max-e.min}function tK(e,t,n){return Math.abs(e-t)<=n}function BM(e,t,n,i=.5){e.origin=i,e.originPoint=hr(t.min,t.max,e.origin),e.scale=Bo(n)/Bo(t),e.translate=hr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=KX&&e.scale<=QX||isNaN(e.scale))&&(e.scale=1),(e.translate>=JX&&e.translate<=eK||isNaN(e.translate))&&(e.translate=0)}function fx(e,t,n,i){BM(e.x,t.x,n.x,i?i.originX:void 0),BM(e.y,t.y,n.y,i?i.originY:void 0)}function VM(e,t,n){e.min=n.min+t.min,e.max=e.min+Bo(t)}function nK(e,t,n){VM(e.x,t.x,n.x),VM(e.y,t.y,n.y)}function UM(e,t,n){e.min=t.min-n.min,e.max=e.min+Bo(t)}function px(e,t,n){UM(e.x,t.x,n.x),UM(e.y,t.y,n.y)}function gc(e){return[e("x"),e("y")]}const $R=({current:e})=>e?e.ownerDocument.defaultView:null,$M=(e,t)=>Math.abs(e-t);function iK(e,t){const n=$M(e.x,t.x),i=$M(e.y,t.y);return Math.sqrt(Pg(n,2)+Pg(i,2))}class HR{constructor(t,n,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:u=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=C2(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,D=iK(A.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!D)return;const{point:B}=A,{timestamp:$}=$a;this.history.push(Me(te({},B),{timestamp:$}));const{onStart:G,onMove:W}=this.handlers;E||(G&&G(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,A)},this.handlePointerMove=(A,E)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=j2(E,this.transformPagePoint),rr.update(this.updatePoint,!0)},this.handlePointerUp=(A,E)=>{this.end();const{onEnd:D,onSessionEnd:B,resumeAnimation:$}=this.handlers;if(this.dragSnapToOrigin&&$&&$(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const G=C2(A.type==="pointercancel"?this.lastMoveEventInfo:j2(E,this.transformPagePoint),this.history);this.startEvent&&D&&D(A,G),B&&B(A,G)},!pT(t))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=o||window;const a=l_(t),g=j2(a,this.transformPagePoint),{point:_}=g,{timestamp:S}=$a;this.history=[Me(te({},_),{timestamp:S})];const{onSessionStart:N}=n;N&&N(t,C2(g,this.history)),this.removeListeners=r_(hx(this.contextWindow,"pointermove",this.handlePointerMove),hx(this.contextWindow,"pointerup",this.handlePointerUp),hx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Gf(this.updatePoint)}}function j2(e,t){return t?{point:t(e.point)}:e}function HM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function C2({point:e},t){return{point:e,delta:HM(e,qR(t)),offset:HM(e,sK(t)),velocity:rK(t,.1)}}function sK(e){return e[0]}function qR(e){return e[e.length-1]}function rK(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const o=qR(e);for(;n>=0&&(i=e[n],!(o.timestamp-i.timestamp>yd(t)));)n--;if(!i)return{x:0,y:0};const u=xd(o.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const c={x:(o.x-i.x)/u,y:(o.y-i.y)/u};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function aK(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?hr(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?hr(n,e,i.max):Math.min(e,n)),e}function qM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function oK(e,{top:t,left:n,bottom:i,right:o}){return{x:qM(e.x,n,o),y:qM(e.y,t,i)}}function GM(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function lK(e,t){return{x:GM(e.x,t.x),y:GM(e.y,t.y)}}function cK(e,t){let n=.5;const i=Bo(e),o=Bo(t);return o>i?n=Mx(t.min,t.max-i,e.min):i>o&&(n=Mx(e.min,e.max-o,t.min)),Eh(0,1,n)}function uK(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const gj=.35;function dK(e=gj){return e===!1?e=0:e===!0&&(e=gj),{x:WM(e,"left","right"),y:WM(e,"top","bottom")}}function WM(e,t,n){return{min:ZM(e,t),max:ZM(e,n)}}function ZM(e,t){return typeof e=="number"?e:e[t]||0}const hK=new WeakMap;class fK{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const u=N=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(l_(N).point)},c=(N,A)=>{const{drag:E,dragPropagation:D,onDragStart:B}=this.getProps();if(E&&!D&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jY(E),!this.openDragLock))return;this.latestPointerEvent=N,this.latestPanInfo=A,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gc(G=>{let W=this.getAxisMotionValue(G).get()||0;if(_d.test(W)){const{projection:J}=this.visualElement;if(J&&J.layout){const Z=J.layout.layoutBox[G];Z&&(W=Bo(Z)*(parseFloat(W)/100))}}this.originPoint[G]=W}),B&&rr.postRender(()=>B(N,A)),pj(this.visualElement,"transform");const{animationState:$}=this.visualElement;$&&$.setActive("whileDrag",!0)},a=(N,A)=>{this.latestPointerEvent=N,this.latestPanInfo=A;const{dragPropagation:E,dragDirectionLock:D,onDirectionLock:B,onDrag:$}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:G}=A;if(D&&this.currentDirection===null){this.currentDirection=pK(G),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",A.point,G),this.updateAxis("y",A.point,G),this.visualElement.render(),$&&$(N,A)},g=(N,A)=>{this.latestPointerEvent=N,this.latestPanInfo=A,this.stop(N,A),this.latestPointerEvent=null,this.latestPanInfo=null},_=()=>gc(N=>{var A;return this.getAnimationState(N)==="paused"&&((A=this.getAxisMotionValue(N).animation)==null?void 0:A.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new HR(t,{onSessionStart:u,onStart:c,onMove:a,onSessionEnd:g,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:i,contextWindow:$R(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,o=n||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!o||!i)return;const{velocity:c}=o;this.startAnimation(c);const{onDragEnd:a}=this.getProps();a&&rr.postRender(()=>a(i,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:o}=this.getProps();if(!i||!vb(t,o,this.currentDirection))return;const u=this.getAxisMotionValue(t);let c=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(c=aK(c,this.constraints[t],this.elastic[t])),u.set(c)}resolveConstraints(){var u;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,o=this.constraints;t&&Yg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=oK(i.layoutBox,t):this.constraints=!1,this.elastic=dK(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&gc(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=uK(i.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Yg(t))return!1;const i=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=mX(i,o.root,this.visualElement.getTransformPagePoint());let c=lK(o.layout.layoutBox,u);if(n){const a=n(hX(c));this.hasMutatedConstraints=!!a,a&&(c=NR(a))}return c}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:u,dragSnapToOrigin:c,onDragTransitionEnd:a}=this.getProps(),g=this.constraints||{},_=gc(S=>{if(!vb(S,n,this.currentDirection))return;let N=g&&g[S]||{};c&&(N={min:0,max:0});const A=o?200:1e6,E=o?40:1e7,D=te(te({type:"inertia",velocity:i?t[S]:0,bounceStiffness:A,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10},u),N);return this.startAxisValueAnimation(S,D)});return Promise.all(_).then(a)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return pj(this.visualElement,t),i.start(ST(t,i,0,n,this.visualElement,!1))}stopAnimation(){gc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gc(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){gc(n=>{const{drag:i}=this.getProps();if(!vb(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(n);if(o&&o.layout){const{min:c,max:a}=o.layout.layoutBox[n];u.set(t[n]-hr(c,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Yg(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};gc(c=>{const a=this.getAxisMotionValue(c);if(a&&this.constraints!==!1){const g=a.get();o[c]=cK({min:g,max:g},this.constraints[c])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),gc(c=>{if(!vb(c,t,null))return;const a=this.getAxisMotionValue(c),{min:g,max:_}=this.constraints[c];a.set(hr(g,_,o[c]))})}addListeners(){if(!this.visualElement.current)return;hK.set(this.visualElement,this);const t=this.visualElement.current,n=hx(t,"pointerdown",g=>{const{drag:_,dragListener:S=!0}=this.getProps();_&&S&&this.start(g)}),i=()=>{const{dragConstraints:g}=this.getProps();Yg(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),rr.read(i);const c=Dx(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_})=>{this.isDragging&&_&&(gc(S=>{const N=this.getAxisMotionValue(S);N&&(this.originPoint[S]+=g[S].translate,N.set(N.get()+g[S].translate))}),this.visualElement.render())});return()=>{c(),n(),u(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:c=gj,dragMomentum:a=!0}=t;return Me(te({},t),{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:u,dragElastic:c,dragMomentum:a})}}function vb(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function pK(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class mK extends ep{constructor(t){super(t),this.removeGroupControls=bc,this.removeListeners=bc,this.controls=new fK(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bc}unmount(){this.removeGroupControls(),this.removeListeners()}}const YM=e=>(t,n)=>{e&&rr.postRender(()=>e(t,n))};class gK extends ep{constructor(){super(...arguments),this.removePointerDownListener=bc}onPointerDown(t){this.session=new HR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$R(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:YM(t),onStart:YM(n),onMove:i,onEnd:(u,c)=>{delete this.session,o&&rr.postRender(()=>o(u,c))}}}mount(){this.removePointerDownListener=hx(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function XM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const F0={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(hi.test(e))e=parseFloat(e);else return e;const n=XM(e,t.target.x),i=XM(e,t.target.y);return`${n}% ${i}%`}},yK={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,o=Wf.parse(e);if(o.length>5)return i;const u=Wf.createTransformer(e),c=typeof o[0]!="number"?1:0,a=n.x.scale*t.x,g=n.y.scale*t.y;o[0+c]/=a,o[1+c]/=g;const _=hr(a,g,.5);return typeof o[2+c]=="number"&&(o[2+c]/=_),typeof o[3+c]=="number"&&(o[3+c]/=_),u(o)}};let T2=!1;class xK extends L.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:u}=t;BY(_K),u&&(n.group&&n.group.add(u),i&&i.register&&o&&i.register(u),T2&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions(Me(te({},u.options),{onExitComplete:()=>this.safeToRemove()}))),cv.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:o,isPresent:u}=this.props,{projection:c}=i;return c&&(c.isPresent=u,T2=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==u?c.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?c.promote():c.relegate()||rr.postRender(()=>{const a=c.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),fT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=t;T2=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function GR(e){const[t,n]=RY(),i=L.useContext(j6);return l.jsx(xK,Me(te({},e),{layoutGroup:i,switchLayoutGroup:L.useContext(TR),isPresent:t,safeToRemove:n}))}const _K={borderRadius:Me(te({},F0),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:F0,borderTopRightRadius:F0,borderBottomLeftRadius:F0,borderBottomRightRadius:F0,boxShadow:yK};function bK(e,t,n){const i=xo(e)?e:hy(e);return i.start(ST("",i,t,n)),i.animation}const vK=(e,t)=>e.depth-t.depth;class wK{constructor(){this.children=[],this.isDirty=!1}add(t){ZC(this.children,t),this.isDirty=!0}remove(t){YC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(vK),this.isDirty=!1,this.children.forEach(t)}}function SK(e,t){const n=dl.now(),i=({timestamp:o})=>{const u=o-n;u>=t&&(Gf(i),e(u-t))};return rr.setup(i,!0),()=>Gf(i)}const WR=["TopLeft","TopRight","BottomLeft","BottomRight"],jK=WR.length,KM=e=>typeof e=="string"?parseFloat(e):e,QM=e=>typeof e=="number"||hi.test(e);function CK(e,t,n,i,o,u){var c,a,g,_;o?(e.opacity=hr(0,(c=n.opacity)!=null?c:1,TK(i)),e.opacityExit=hr((a=t.opacity)!=null?a:1,0,kK(i))):u&&(e.opacity=hr((g=t.opacity)!=null?g:1,(_=n.opacity)!=null?_:1,i));for(let S=0;S<jK;S++){const N=`border${WR[S]}Radius`;let A=JM(t,N),E=JM(n,N);if(A===void 0&&E===void 0)continue;A||(A=0),E||(E=0),A===0||E===0||QM(A)===QM(E)?(e[N]=Math.max(hr(KM(A),KM(E),i),0),(_d.test(E)||_d.test(A))&&(e[N]+="%")):e[N]=E}(t.rotate||n.rotate)&&(e.rotate=hr(t.rotate||0,n.rotate||0,i))}function JM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const TK=ZR(0,.5,z6),kK=ZR(.5,.95,bc);function ZR(e,t,n){return i=>i<e?0:i>t?1:n(Mx(e,t,i))}function eE(e,t){e.min=t.min,e.max=t.max}function pc(e,t){eE(e.x,t.x),eE(e.y,t.y)}function tE(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function nE(e,t,n,i,o){return e-=t,e=n1(e,1/n,i),o!==void 0&&(e=n1(e,1/o,i)),e}function NK(e,t=0,n=1,i=.5,o,u=e,c=e){if(_d.test(t)&&(t=parseFloat(t),t=hr(c.min,c.max,t/100)-c.min),typeof t!="number")return;let a=hr(u.min,u.max,i);e===u&&(a-=t),e.min=nE(e.min,t,n,a,o),e.max=nE(e.max,t,n,a,o)}function iE(e,t,[n,i,o],u,c){NK(e,t[n],t[i],t[o],t.scale,u,c)}const MK=["x","scaleX","originX"],EK=["y","scaleY","originY"];function sE(e,t,n,i){iE(e.x,t,MK,n?n.x:void 0,i?i.x:void 0),iE(e.y,t,EK,n?n.y:void 0,i?i.y:void 0)}function rE(e){return e.translate===0&&e.scale===1}function YR(e){return rE(e.x)&&rE(e.y)}function aE(e,t){return e.min===t.min&&e.max===t.max}function AK(e,t){return aE(e.x,t.x)&&aE(e.y,t.y)}function oE(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function XR(e,t){return oE(e.x,t.x)&&oE(e.y,t.y)}function lE(e){return Bo(e.x)/Bo(e.y)}function cE(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class PK{constructor(){this.members=[]}add(t){ZC(this.members,t),t.scheduleRender()}remove(t){if(YC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RK(e,t,n){let i="";const o=e.x.translate/t.x,u=e.y.translate/t.y,c=(n==null?void 0:n.z)||0;if((o||u||c)&&(i=`translate3d(${o}px, ${u}px, ${c}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:_,rotate:S,rotateX:N,rotateY:A,skewX:E,skewY:D}=n;_&&(i=`perspective(${_}px) ${i}`),S&&(i+=`rotate(${S}deg) `),N&&(i+=`rotateX(${N}deg) `),A&&(i+=`rotateY(${A}deg) `),E&&(i+=`skewX(${E}deg) `),D&&(i+=`skewY(${D}deg) `)}const a=e.x.scale*t.x,g=e.y.scale*t.y;return(a!==1||g!==1)&&(i+=`scale(${a}, ${g})`),i||"none"}const k2=["","X","Y","Z"],DK=1e3;let zK=0;function N2(e,t,n,i){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),i&&(i[e]=0))}function KR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=IR(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:u}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",rr,!(o||u))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&KR(i)}function QR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(c={},a=t==null?void 0:t()){this.id=zK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(LK),this.nodes.forEach(UK),this.nodes.forEach($K),this.nodes.forEach(FK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new wK)}addEventListener(c,a){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new QC),this.eventHandlers.get(c).add(a)}notifyListeners(c,...a){const g=this.eventHandlers.get(c);g&&g.notify(...a)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=fR(c)&&!EY(c),this.instance=c;const{layoutId:a,layout:g,visualElement:_}=this.options;if(_&&!_.current&&_.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||a)&&(this.isLayoutDirty=!0),e){let S,N=0;const A=()=>this.root.updateBlockedByResize=!1;rr.read(()=>{N=window.innerWidth}),e(c,()=>{const E=window.innerWidth;E!==N&&(N=E,this.root.updateBlockedByResize=!0,S&&S(),S=SK(A,250),cv.hasAnimatedSinceResize&&(cv.hasAnimatedSinceResize=!1,this.nodes.forEach(hE)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&_&&(a||g)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:N,hasRelativeLayoutChanged:A,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||_.getDefaultTransition()||ZK,{onLayoutAnimationStart:B,onLayoutAnimationComplete:$}=_.getProps(),G=!this.targetLayout||!XR(this.targetLayout,E),W=!N&&A;if(this.options.layoutRoot||this.resumeFrom||W||N&&(G||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const J=Me(te({},dT(D,"layout")),{onPlay:B,onComplete:$});(_.shouldReduceMotion||this.options.layoutRoot)&&(J.delay=0,J.type=!1),this.startAnimation(J),this.setAnimationOrigin(S,W)}else N||hE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Gf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(HK),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const N=this.path[S];N.shouldResetTransform=!0,N.updateScroll("snapshot"),N.options.layoutRoot&&N.willUpdate(!1)}const{layoutId:a,layout:g}=this.options;if(a===void 0&&!g)return;const _=this.getTransformTemplate();this.prevTransformTemplateValue=_?_(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(uE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(dE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(VK),this.nodes.forEach(IK),this.nodes.forEach(OK)):this.nodes.forEach(dE),this.clearAllSnapshots();const a=dl.now();$a.delta=Eh(0,1e3/60,a-$a.timestamp),$a.timestamp=a,$a.isProcessing=!0,y2.update.process($a),y2.preRender.process($a),y2.render.process($a),$a.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BK),this.sharedNodes.forEach(qK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bo(this.snapshot.measuredBox.x)&&!Bo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(a=!1),a&&this.instance){const g=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:g,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!YR(this.projectionDelta),g=this.getTransformTemplate(),_=g?g(this.latestValues,""):void 0,S=_!==this.prevTransformTemplateValue;c&&this.instance&&(a||sm(this.latestValues)||S)&&(o(this.instance,_),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const a=this.measurePageBox();let g=this.removeElementScroll(a);return c&&(g=this.removeTransform(g)),YK(g),{animationId:this.root.animationId,measuredBox:a,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var _;const{visualElement:c}=this.options;if(!c)return Mr();const a=c.measureViewportBox();if(!(((_=this.scroll)==null?void 0:_.wasRoot)||this.path.some(XK))){const{scroll:S}=this.root;S&&(Xg(a.x,S.offset.x),Xg(a.y,S.offset.y))}return a}removeElementScroll(c){var g;const a=Mr();if(pc(a,c),(g=this.scroll)!=null&&g.wasRoot)return a;for(let _=0;_<this.path.length;_++){const S=this.path[_],{scroll:N,options:A}=S;S!==this.root&&N&&A.layoutScroll&&(N.wasRoot&&pc(a,c),Xg(a.x,N.offset.x),Xg(a.y,N.offset.y))}return a}applyTransform(c,a=!1){const g=Mr();pc(g,c);for(let _=0;_<this.path.length;_++){const S=this.path[_];!a&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Kg(g,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),sm(S.latestValues)&&Kg(g,S.latestValues)}return sm(this.latestValues)&&Kg(g,this.latestValues),g}removeTransform(c){const a=Mr();pc(a,c);for(let g=0;g<this.path.length;g++){const _=this.path[g];if(!_.instance||!sm(_.latestValues))continue;uj(_.latestValues)&&_.updateSnapshot();const S=Mr(),N=_.measurePageBox();pc(S,N),sE(a,_.latestValues,_.snapshot?_.snapshot.layoutBox:void 0,S)}return sm(this.latestValues)&&sE(a,this.latestValues),a}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options=Me(te(te({},this.options),c),{crossfade:c.crossfade!==void 0?c.crossfade:!0})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$a.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var A;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==a;if(!(c||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:N}=this.options;if(!(!this.layout||!(S||N))){if(this.resolvedRelativeTargetAt=$a.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mr(),this.relativeTargetOrigin=Mr(),px(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),pc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mr(),this.targetWithTransforms=Mr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pc(this.target,this.layout.layoutBox),ER(this.target,this.targetDelta)):pc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mr(),this.relativeTargetOrigin=Mr(),px(this.relativeTargetOrigin,this.target,E.target),pc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||uj(this.parent.latestValues)||MR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var D;const c=this.getLead(),a=!!this.resumingFrom||this!==c;let g=!0;if((this.isProjectionDirty||(D=this.parent)!=null&&D.isProjectionDirty)&&(g=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===$a.timestamp&&(g=!1),g)return;const{layout:_,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_||S))return;pc(this.layoutCorrected,this.layout.layoutBox);const N=this.treeScale.x,A=this.treeScale.y;pX(this.layoutCorrected,this.treeScale,this.path,a),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Mr());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(tE(this.prevProjectionDelta.x,this.projectionDelta.x),tE(this.prevProjectionDelta.y,this.projectionDelta.y)),fx(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==N||this.treeScale.y!==A||!cE(this.projectionDelta.x,this.prevProjectionDelta.x)||!cE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),c){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qg(),this.projectionDelta=Qg(),this.projectionDeltaWithTransform=Qg()}setAnimationOrigin(c,a=!1){const g=this.snapshot,_=g?g.latestValues:{},S=te({},this.latestValues),N=Qg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const A=Mr(),E=g?g.source:void 0,D=this.layout?this.layout.source:void 0,B=E!==D,$=this.getStack(),G=!$||$.members.length<=1,W=!!(B&&!G&&this.options.crossfade===!0&&!this.path.some(WK));this.animationProgress=0;let J;this.mixTargetDelta=Z=>{const K=Z/1e3;fE(N.x,c.x,K),fE(N.y,c.y,K),this.setTargetDelta(N),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(px(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GK(this.relativeTarget,this.relativeTargetOrigin,A,K),J&&AK(this.relativeTarget,J)&&(this.isProjectionDirty=!1),J||(J=Mr()),pc(J,this.relativeTarget)),B&&(this.animationValues=S,CK(S,_,this.latestValues,K,W,G)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var a,g,_;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(_=(g=this.resumingFrom)==null?void 0:g.currentAnimation)==null||_.stop(),this.pendingAnimation&&(Gf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rr.update(()=>{cv.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hy(0)),this.currentAnimation=bK(this.motionValue,[0,1e3],Me(te({},c),{velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),c.onUpdate&&c.onUpdate(S)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:a,target:g,layout:_,latestValues:S}=c;if(!(!a||!g||!_)){if(this!==c&&this.layout&&_&&JR(this.options.animationType,this.layout.layoutBox,_.layoutBox)){g=this.target||Mr();const N=Bo(this.layout.layoutBox.x);g.x.min=c.target.x.min,g.x.max=g.x.min+N;const A=Bo(this.layout.layoutBox.y);g.y.min=c.target.y.min,g.y.max=g.y.min+A}pc(a,g),Kg(a,S),fx(this.projectionDeltaWithTransform,this.layoutCorrected,a,S)}}registerSharedNode(c,a){this.sharedNodes.has(c)||this.sharedNodes.set(c,new PK),this.sharedNodes.get(c).add(a);const _=a.options.initialPromotionConfig;a.promote({transition:_?_.transition:void 0,preserveFollowOpacity:_&&_.shouldPreserveFollowOpacity?_.shouldPreserveFollowOpacity(a):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var a;const{layoutId:c}=this.options;return c?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:c}=this.options;return c?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:a,preserveFollowOpacity:g}={}){const _=this.getStack();_&&_.promote(this,g),c&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let a=!1;const{latestValues:g}=c;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(a=!0),!a)return;const _={};g.z&&N2("z",c,_,this.animationValues);for(let S=0;S<k2.length;S++)N2(`rotate${k2[S]}`,c,_,this.animationValues),N2(`skew${k2[S]}`,c,_,this.animationValues);c.render();for(const S in _)c.setStaticValue(S,_[S]),this.animationValues&&(this.animationValues[S]=_[S]);c.scheduleRender()}applyProjectionStyles(c,a){var D,B;if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=lv(a==null?void 0:a.pointerEvents)||"",c.transform=g?g(this.latestValues,""):"none";return}const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=lv(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!sm(this.latestValues)&&(c.transform=g?g({},""):"none",this.hasProjected=!1);return}c.visibility="";const S=_.animationValues||_.latestValues;this.applyTransformsToTarget();let N=RK(this.projectionDeltaWithTransform,this.treeScale,S);g&&(N=g(S,N)),c.transform=N;const{x:A,y:E}=this.projectionDelta;c.transformOrigin=`${A.origin*100}% ${E.origin*100}% 0`,_.animationValues?c.opacity=_===this?(B=(D=S.opacity)!=null?D:this.latestValues.opacity)!=null?B:1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:c.opacity=_===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const $ in Rx){if(S[$]===void 0)continue;const{correct:G,applyTo:W,isCSSVariable:J}=Rx[$],Z=N==="none"?S[$]:G(S[$],_);if(W){const K=W.length;for(let le=0;le<K;le++)c[W[le]]=Z}else J?this.options.visualElement.renderState.vars[$]=Z:c[$]=Z}this.options.layoutId&&(c.pointerEvents=_===this?lv(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var a;return(a=c.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(uE),this.root.sharedNodes.clear()}}}function IK(e){e.updateLayout()}function OK(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=e.layout,{animationType:u}=e.options,c=t.source!==e.layout.source;u==="size"?gc(N=>{const A=c?t.measuredBox[N]:t.layoutBox[N],E=Bo(A);A.min=i[N].min,A.max=A.min+E}):JR(u,t.layoutBox,i)&&gc(N=>{const A=c?t.measuredBox[N]:t.layoutBox[N],E=Bo(i[N]);A.max=A.min+E,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[N].max=e.relativeTarget[N].min+E)});const a=Qg();fx(a,i,t.layoutBox);const g=Qg();c?fx(g,e.applyTransform(o,!0),t.measuredBox):fx(g,i,t.layoutBox);const _=!YR(a);let S=!1;if(!e.resumeFrom){const N=e.getClosestProjectingParent();if(N&&!N.resumeFrom){const{snapshot:A,layout:E}=N;if(A&&E){const D=Mr();px(D,t.layoutBox,A.layoutBox);const B=Mr();px(B,i,E.layoutBox),XR(D,B)||(S=!0),N.options.layoutRoot&&(e.relativeTarget=B,e.relativeTargetOrigin=D,e.relativeParent=N)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:g,layoutDelta:a,hasLayoutChanged:_,hasRelativeLayoutChanged:S})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function LK(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function FK(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function BK(e){e.clearSnapshot()}function uE(e){e.clearMeasurements()}function dE(e){e.isLayoutDirty=!1}function VK(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function hE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function UK(e){e.resolveTargetDelta()}function $K(e){e.calcProjection()}function HK(e){e.resetSkewAndRotation()}function qK(e){e.removeLeadSnapshot()}function fE(e,t,n){e.translate=hr(t.translate,0,n),e.scale=hr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function pE(e,t,n,i){e.min=hr(t.min,n.min,i),e.max=hr(t.max,n.max,i)}function GK(e,t,n,i){pE(e.x,t.x,n.x,i),pE(e.y,t.y,n.y,i)}function WK(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ZK={duration:.45,ease:[.4,0,.1,1]},mE=e=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),gE=mE("applewebkit/")&&!mE("chrome/")?Math.round:bc;function yE(e){e.min=gE(e.min),e.max=gE(e.max)}function YK(e){yE(e.x),yE(e.y)}function JR(e,t,n){return e==="position"||e==="preserve-aspect"&&!tK(lE(t),lE(n),.2)}function XK(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const KK=QR({attachResizeListener:(e,t)=>Dx(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),M2={current:void 0},eD=QR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!M2.current){const e=new KK({});e.mount(window),e.setOptions({layoutScroll:!0}),M2.current=e}return M2.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),QK={pan:{Feature:gK},drag:{Feature:mK,ProjectionNode:eD,MeasureLayout:GR}};function xE(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,u=i[o];u&&rr.postRender(()=>u(t,l_(t)))}class JK extends ep{mount(){const{current:t}=this.node;t&&(this.unmount=CY(t,(n,i)=>(xE(this.node,i,"Start"),o=>xE(this.node,o,"End"))))}unmount(){}}class eQ extends ep{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(n){t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=r_(Dx(this.node.current,"focus",()=>this.onFocus()),Dx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _E(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),u=i[o];u&&rr.postRender(()=>u(t,l_(t)))}class tQ extends ep{mount(){const{current:t}=this.node;t&&(this.unmount=MY(t,(n,i)=>(_E(this.node,i,"Start"),(o,{success:u})=>_E(this.node,o,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yj=new WeakMap,E2=new WeakMap,nQ=e=>{const t=yj.get(e.target);t&&t(e)},iQ=e=>{e.forEach(nQ)};function sQ(n){var i=n,{root:e}=i,t=en(i,["root"]);const o=e||document;E2.has(o)||E2.set(o,{});const u=E2.get(o),c=JSON.stringify(t);return u[c]||(u[c]=new IntersectionObserver(iQ,te({root:e},t))),u[c]}function rQ(e,t,n){const i=sQ(t);return yj.set(e,n),i.observe(e),()=>{yj.delete(e),i.unobserve(e)}}const aQ={some:0,all:1};class oQ extends ep{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:u}=t,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:aQ[o]},a=g=>{const{isIntersecting:_}=g;if(this.isInView===_||(this.isInView=_,u&&!_&&this.hasEnteredView))return;_&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",_);const{onViewportEnter:S,onViewportLeave:N}=this.node.getProps(),A=_?S:N;A&&A(g)};return rQ(this.node.current,c,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(lQ(t,n))&&this.startObserver()}unmount(){}}function lQ({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const cQ={inView:{Feature:oQ},tap:{Feature:tQ},focus:{Feature:eQ},hover:{Feature:JK}},uQ={layout:{ProjectionNode:eD,MeasureLayout:GR}},dQ=te(te(te(te({},YX),cQ),QK),uQ),Xs=dX(dQ,jX),tD="/assets/custom/mycard/assets/new-logo-CUf3m9o7.png",hQ=({isOpen:e,onClose:t})=>{if(!e)return null;const n=ua();return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 mx-4",children:l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:l.jsx("svg",{className:"h-10 w-10 text-green-500 dark:text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Account Created Successfully!"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Your account has been created successfully. You can now log in with your credentials."}),l.jsx("div",{className:"flex space-x-2 w-full",children:l.jsx("button",{onClick:()=>n("/login"),className:"w-full px-5 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Continue to Login"})})]})})})},fQ=["Female","Male","Prefer not to say","Non-Conforming","Genderqueer","Transgender","Other"],pQ={hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.6,ease:"easeOut",when:"beforeChildren",staggerChildren:.1}}},Lo={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.3}}};function mQ(){const[e,t]=L.useState(!1),[n,i]=L.useState(!1),[o,u]=L.useState(!1),[c,a]=L.useState(""),[g,_]=L.useState(!1),[S,N]=L.useState({first_name:"",last_name:"",email:"",gender:"",birth_date:"2025-04-02",mobile_no:"",new_password:"",confirm_password:"",role_profile_name:"User All Access"}),A=S.new_password&&S.confirm_password&&S.new_password===S.confirm_password,E=()=>S.new_password!==S.confirm_password?(a("Passwords do not match"),!1):S.new_password.length<6?(a("Password must be at least 6 characters long"),!1):(a(""),!0),D=J=>{const{name:Z,value:K}=J.target;N(le=>Me(te({},le),{[Z]:K})),(Z==="new_password"||Z==="confirm_password")&&a("")},B=J=>{N(Z=>Me(te({},Z),{gender:J}))},$=()=>t(!1),G=J=>{const Z=new Headers;Z.append("Authorization","token 3533a01fba5c78a:12e33572bb13e99"),Z.append("Content-Type","application/json"),console.log("create user",S);const K=JSON.stringify({first_name:S.first_name,email:S.email,gender:S.gender,last_name:S.last_name,birth_date:"2025-04-02",mobile_no:"",new_password:S.new_password,role_profile_name:"User All Access"});fetch("/api/resource/User",{method:"POST",headers:Z,body:K,redirect:"follow",credentials:"omit"}).then(_e=>_e.json()).then(_e=>{_e.data?t(!0):_e.exception&&a(_e.exception)}).catch(_e=>console.error(_e))},W=J=>Ht(null,null,function*(){if(J.preventDefault(),!E())return;const Z={first_name:S.first_name,email:S.email,gender:S.gender,full_name:S.full_name,birth_date:"2025-04-02",mobile_no:S.mobile_no,new_password:S.new_password,role_profile_name:"User All Access"};console.log("USER data....",Z);try{G(Z),_(!1)}catch(K){console.error("Error creating user:",K)}});return l.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 to-purple-100 overflow-hidden px-4",children:[l.jsx(Xs.div,{className:"absolute top-[-10%] left-[-12%] w-60 h-60 bg-blue-400 opacity-20 rounded-full blur-3xl",animate:{scale:[1,1.15,1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),l.jsx(Xs.div,{className:"absolute bottom-[-10%] right-[-12%] w-72 h-72 bg-purple-500 opacity-25 rounded-full blur-3xl",animate:{scale:[1,.9,1]},transition:{duration:9,repeat:1/0,ease:"easeInOut"}}),l.jsxs(Xs.div,{variants:pQ,initial:"hidden",animate:"visible",className:"relative z-10 w-full max-w-md p-8 rounded-3xl bg-white/50 backdrop-blur-xl shadow-lg border border-blue-200",children:[l.jsx(Xs.img,{variants:Lo,src:tD,alt:"Logo",className:"mx-auto mb-5 h-14 rounded-full shadow-sm"}),l.jsx(Xs.h2,{variants:Lo,className:"text-center text-3xl font-extrabold text-blue-700 mb-2",children:"Create your account"}),l.jsx(Xs.p,{variants:Lo,className:"text-center text-blue-400 mb-8",children:"Signup to get started"}),l.jsxs("form",{onSubmit:W,className:"space-y-5",children:[l.jsxs(Xs.div,{variants:Lo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Email Address"}),l.jsx("input",{type:"email",name:"email",value:S.email,onChange:D,disabled:g,required:!0,className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"name@company.com"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs(Xs.div,{variants:Lo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"First Name"}),l.jsx("input",{type:"text",name:"first_name",value:S.first_name,onChange:D,disabled:g,required:!0,placeholder:"First Name",className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"})]}),l.jsxs(Xs.div,{variants:Lo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Last Name"}),l.jsx("input",{type:"text",name:"last_name",value:S.last_name,onChange:D,disabled:g,required:!0,placeholder:"Last Name",className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs(Xs.div,{variants:Lo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Gender"}),l.jsxs(CW,{onValueChange:B,value:S.gender,children:[l.jsx(NW,{className:"w-full h-11 rounded-lg border border-blue-300 bg-white/70 focus:ring-2 focus:ring-blue-400 transition",children:l.jsx(kW,{placeholder:"Select Gender"})}),l.jsx(MW,{className:"rounded-xl",children:l.jsxs(TW,{children:[l.jsx(EW,{children:"Gender"}),fQ.map((J,Z)=>l.jsx(AW,{value:J,children:J},Z))]})})]})]}),l.jsxs(Xs.div,{variants:Lo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Mobile Number"}),l.jsx("input",{type:"tel",name:"mobile_no",value:S.mobile_no,onChange:D,disabled:g,placeholder:"Mobile Number",className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs(Xs.div,{variants:Lo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:n?"text":"password",name:"new_password",value:S.new_password,onChange:D,disabled:g,placeholder:"Enter password",required:!0,className:"w-full rounded-lg border border-blue-300 bg-white/70 px-4 py-3 pr-11 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"}),l.jsx("button",{type:"button",className:"absolute right-3 top-3 text-blue-600 hover:text-blue-800 transition",onClick:()=>i(J=>!J),disabled:g,"aria-label":"Toggle Password Visibility",children:n?l.jsx(ey,{size:20}):l.jsx(hm,{size:20})})]})]}),l.jsxs(Xs.div,{variants:Lo,children:[l.jsx("label",{className:"block mb-1 text-sm font-semibold text-blue-700",children:"Confirm Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:o?"text":"password",name:"confirm_password",value:S.confirm_password,onChange:D,disabled:g,placeholder:"Confirm password",required:!0,className:`w-full rounded-lg border px-4 py-3 pr-11 text-blue-900 placeholder-blue-400 shadow-sm focus:outline-none focus:ring-2 transition ${c?"border-red-400 focus:ring-red-400":A&&S.confirm_password?"border-green-400 focus:ring-green-400":"border-blue-300 focus:ring-blue-400"} bg-white/70`}),l.jsx("div",{className:"absolute right-10 top-3",children:S.confirm_password&&(A?l.jsx(Hk,{size:20,className:"text-green-500"}):l.jsx(Ev,{size:20,className:"text-red-500"}))}),l.jsx("button",{type:"button",className:"absolute right-3 top-3 text-blue-600 hover:text-blue-800 transition",onClick:()=>u(J=>!J),disabled:g,"aria-label":"Toggle Confirm Password Visibility",children:o?l.jsx(ey,{size:20}):l.jsx(hm,{size:20})})]})]})]}),c&&l.jsxs(Xs.div,{variants:Lo,className:"flex items-center gap-2 text-red-600 bg-red-50 rounded-lg p-2 text-sm",children:[l.jsx(Ev,{size:16})," ",l.jsx("span",{children:c})]}),A&&S.confirm_password&&!c&&l.jsxs(Xs.div,{variants:Lo,className:"flex items-center gap-2 text-green-600 bg-green-50 rounded-lg p-2 text-sm",children:[l.jsx(Hk,{size:16})," ",l.jsx("span",{children:"Passwords match perfectly!"})]}),l.jsxs(Xs.div,{variants:Lo,className:"flex items-center space-x-2 text-blue-600 text-sm",children:[l.jsx("input",{type:"checkbox",id:"terms",required:!0,className:"w-4 h-4 rounded border border-blue-400 checked:bg-blue-600 focus:ring-2 focus:ring-blue-400"}),l.jsxs("label",{htmlFor:"terms",className:"select-none",children:["I agree to the"," ",l.jsx("a",{target:"_blank",href:"/mycard/terms_and_condition",className:"font-semibold hover:underline",children:"Terms and Conditions"})," ","and"," ",l.jsx("a",{target:"_blank",href:"/mycard/terms_and_condition",className:"font-semibold hover:underline",children:"Privacy Policy"})]})]}),l.jsx(Xs.button,{variants:Lo,type:"submit",disabled:g||c||!A||!S.email||!S.first_name||!S.new_password,className:"w-full py-3 rounded-xl font-bold text-white bg-gradient-to-r from-blue-600 to-purple-600 shadow-lg hover:brightness-110 hover:scale-105 transition transform disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Creating Account...":"Create Account"})]}),l.jsxs(Xs.p,{variants:Lo,className:"text-center text-sm text-blue-700 mt-6",children:["Already have an account?"," ",l.jsx("a",{href:"/mycard/login",className:"font-semibold hover:underline",children:"Sign in here"})]}),l.jsx(hQ,{isOpen:e,onClose:$})]})]})}const nD="/api/resource",uv=jy("user/fetchUser",(n,i)=>Ht(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{const u=yield Os.get(`${nD}/User/${e}`,{withCredentials:!0});return console.log("my user ka detail",u,e),u.data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),A2=jy("user/fetchUserList",(n,i)=>Ht(null,[n,i],function*(e,{rejectWithValue:t}){var o;try{return(yield Os.get(`${nD}/User`,{withCredentials:!0})).data.data}catch(u){return t(((o=u.response)==null?void 0:o.data)||u.message)}})),iD=Cy({name:"user",initialState:{currentUser:null,userList:[],loading:!1,error:null},reducers:{resetUser:e=>{e.currentUser=null,e.error=null,e.loading=!1}},extraReducers:e=>{e.addCase(uv.pending,t=>{t.loading=!0,t.error=null}).addCase(uv.fulfilled,(t,n)=>{t.loading=!1,t.currentUser=n.payload}).addCase(uv.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(A2.pending,t=>{t.loading=!0}).addCase(A2.fulfilled,(t,n)=>{t.loading=!1,t.userList=n.payload}).addCase(A2.rejected,(t,n)=>{t.loading=!1,t.error=n.payload})}}),{resetUser:eoe}=iD.actions,gQ=iD.reducer;function yQ(){const[e,t]=L.useState({username:"",password:""}),[n,i]=L.useState(!1),[o,u]=L.useState(""),[c,a]=L.useState(!1),{login:g}=Rm(),_=Rh(),[S,N]=L.useState(!1),A=ua(),{user:E,loading:D,error:B}=hd(W=>W.user),$=W=>t(Me(te({},e),{[W.target.name]:W.target.value}));L.useEffect(()=>{S&&E&&!D&&!B?A("/"):S&&B&&(u("Failed to fetch user data"),N(!1),a(!1))},[E,D,B,S]);const G=W=>Ht(null,null,function*(){W.preventDefault(),u(""),a(!0);try{if(e.username===""||e.password==="")throw new Error("Please fill in all fields");const J=yield g(e);if((J==null?void 0:J.message)==="Logged In")_(uv(e.username)),console.log("login success, fetching user data..."),setTimeout(()=>{A("/")},100),N(!0);else throw new Error((J==null?void 0:J.message)||"Login failed")}catch(J){u(J.message),a(!1)}});return l.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-white overflow-hidden",children:[l.jsx(Xs.div,{className:"absolute top-[-12%] left-[-10%] w-[360px] h-[360px] bg-blue-600 opacity-[0.12] morphing-blob blur-[110px] z-0",animate:{scale:[1,1.12,1]},transition:{repeat:1/0,duration:10,ease:"easeInOut"}}),l.jsx(Xs.div,{className:"absolute bottom-[-12%] right-[-10%] w-[400px] h-[400px] bg-blue-700 opacity-[0.15] morphing-blob blur-[120px] z-0",animate:{scale:[1,.95,1]},transition:{repeat:1/0,duration:9,ease:"easeInOut"}}),l.jsxs(Xs.div,{initial:{y:60,opacity:0,scale:.96},animate:{y:0,opacity:1,scale:1},transition:{duration:.8,type:"spring"},className:"relative z-10 p-10 w-full max-w-md rounded-2xl bg-white shadow-2xl border border-blue-200",children:[l.jsx(Xs.img,{src:tD,alt:"Logo",className:"mx-auto mb-6 h-14 rounded-full glow",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.7}}),l.jsx(Xs.h2,{className:"font-bold text-3xl text-blue-700 text-center mb-2",initial:{opacity:0,y:14},animate:{opacity:1,y:0},transition:{delay:.45},children:"Welcome Back!"}),l.jsx("p",{className:"text-blue-400 text-center mb-8",children:"Sign in to your account"}),l.jsxs("form",{onSubmit:G,className:"space-y-6",children:[l.jsxs(Xs.div,{initial:{opacity:0,x:48},animate:{opacity:1,x:0},transition:{delay:.59,type:"spring"},children:[l.jsx("label",{htmlFor:"username",className:"text-sm font-semibold text-blue-700",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(jP,{className:"absolute left-3 top-3 w-5 h-5 text-blue-300"}),l.jsx("input",{id:"username",name:"username",type:"email",autoComplete:"email",value:e.username,onChange:$,disabled:c,required:!0,className:"w-full pl-10 pr-4 py-3 rounded-lg bg-white border border-blue-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-400 text-blue-900 shadow-sm focus:shadow-lg transition-all duration-300 outline-none",placeholder:"you@example.com"})]})]}),l.jsxs(Xs.div,{initial:{opacity:0,x:70},animate:{opacity:1,x:0},transition:{delay:.69,type:"spring"},children:[l.jsx("label",{htmlFor:"password",className:"text-sm font-semibold text-blue-700",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(nB,{className:"absolute left-3 top-3 w-5 h-5 text-blue-300"}),l.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",value:e.password,onChange:$,disabled:c,required:!0,className:"w-full pl-10 pr-12 py-3 rounded-lg bg-white border border-blue-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-400 text-blue-900 shadow-sm focus:shadow-lg transition-all duration-300 outline-none",placeholder:"********"}),l.jsx("button",{type:"button","aria-label":"Toggle password visibility",className:"absolute right-2 top-3 text-blue-500 hover:text-blue-700",onClick:()=>i(W=>!W),disabled:c,children:n?l.jsx(ey,{}):l.jsx(hm,{})})]})]}),l.jsx("button",{type:"submit",disabled:c,className:`w-full py-3 rounded-full bg-gradient-to-r from-blue-600 to-blue-900 font-bold text-white text-lg shadow-lg transition-all duration-300 flex justify-center items-center ${c?"cursor-not-allowed opacity-70":"hover:scale-105"}`,children:c?l.jsxs("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Sign In"})]}),o&&l.jsx("p",{className:"mt-4 p-2 text-red-600 bg-red-50 rounded-lg",children:o}),l.jsxs("p",{className:"text-sm text-blue-500 text-center mt-6",children:["Don't have an account?"," ",l.jsx("a",{href:"/mycard/signup",className:"font-bold text-blue-700 hover:underline",children:"Sign up"})]})]})]})}const xQ=()=>{const[e,t]=L.useState(""),[n,i]=L.useState(null),[o,u]=L.useState([]),{id:c}=tC(),{data:a,isLoading:g,error:_,mutate:S}=Cv("Comments",{fields:["*"]}),{createDoc:N}=xy();console.log("Params",c),L.useEffect(()=>{if(a){const $=a.filter(G=>G.a_id&&!G.c_id).map(G=>{const W=a.filter(J=>J.c_id===G.name);return Me(te({},G),{replies:W})});u($)}},[a]);const A=B=>Ht(null,null,function*(){if(B.preventDefault(),!!e.trim())try{yield N("Comments",{comment:e,a_id:c,c_id:n||null}),t(""),i(null),S()}catch($){console.error("Error posting comment:",$)}}),E=B=>{i(B),document.getElementById("comment").focus()},D=()=>{i(null)};return l.jsx("section",{className:"bg-white dark:bg-gray-900 py-8 lg:py-16 antialiased",children:l.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsxs("h2",{className:"text-lg lg:text-2xl font-bold text-gray-900 dark:text-white",children:["Discussion (",o.length,")"]})}),l.jsxs("form",{className:"mb-6",onSubmit:A,children:[n&&l.jsxs("div",{className:"mb-2 flex items-center",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Replying to comment"}),l.jsx("button",{type:"button",onClick:D,className:"ml-2 text-xs text-red-500 hover:underline",children:"Cancel"})]}),l.jsxs("div",{className:"py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[l.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Your comment"}),l.jsx("textarea",{id:"comment",rows:"6",className:"px-0 w-full text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none dark:text-white dark:placeholder-gray-400 dark:bg-gray-800",placeholder:"Write a comment...",value:e,onChange:B=>t(B.target.value),required:!0})]}),l.jsx("button",{type:"submit",className:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-900 hover:bg-blue-800",children:n?"Post reply":"Post comment"})]}),g&&l.jsx("p",{className:"text-center",children:"Loading comments..."}),_&&l.jsx("p",{className:"text-center text-red-500",children:"Error loading comments"}),o.map(B=>l.jsxs("div",{children:[l.jsxs("article",{className:"p-6 text-base bg-white rounded-lg dark:bg-gray-900",children:[l.jsxs("footer",{className:"flex justify-between items-center mb-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("p",{className:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold",children:[l.jsx("img",{className:"mr-2 w-6 h-6 rounded-full",src:B.user_image||"https://flowbite.com/docs/images/people/profile-picture-2.jpg",alt:B.user_name||"User"}),B.owner||"Anonymous"]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.jsx("time",{pubdate:!0,dateTime:B.creation,children:new Date(B.creation).toLocaleDateString()})})]}),l.jsxs("button",{id:`dropdownComment${B.name}`,"data-dropdown-toggle":`dropdownComment${B.name}`,className:"inline-flex items-center p-2 text-sm font-medium text-center text-gray-500 dark:text-gray-400 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-50 dark:bg-gray-900 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button",children:[l.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 3",children:l.jsx("path",{d:"M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"})}),l.jsx("span",{className:"sr-only",children:"Comment settings"})]}),l.jsx("div",{id:`dropdownComment${B.name}`,className:"hidden z-10 w-36 bg-white rounded divide-y divide-gray-100 shadow dark:bg-gray-700 dark:divide-gray-600",children:l.jsxs("ul",{className:"py-1 text-sm text-gray-700 dark:text-gray-200",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:"Edit"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:"Remove"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:"Report"})})]})})]}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:B.comment}),l.jsx("div",{className:"flex items-center mt-4 space-x-4",children:l.jsxs("button",{type:"button",onClick:()=>E(B.name),className:"flex items-center text-sm text-gray-500 hover:underline dark:text-gray-400 font-medium",children:[l.jsx("svg",{className:"mr-1.5 w-3.5 h-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 18",children:l.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 5h5M5 8h2m6-3h2m-5 3h6m2-7H2a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h3v5l5-5h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"})}),"Reply"]})})]}),B.replies&&B.replies.map($=>l.jsxs("article",{className:"p-6 mb-3 ml-6 lg:ml-12 text-base bg-white rounded-lg dark:bg-gray-900",children:[l.jsxs("footer",{className:"flex justify-between items-center mb-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("p",{className:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold",children:[l.jsx("img",{className:"mr-2 w-6 h-6 rounded-full",src:$.user_image||"https://flowbite.com/docs/images/people/profile-picture-5.jpg",alt:$.user_name||"User"}),$.owner||"Anonymous"]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.jsx("time",{pubdate:!0,dateTime:$.creation,children:new Date($.creation).toLocaleDateString()})})]}),l.jsxs("button",{id:`dropdownComment${$.name}`,"data-dropdown-toggle":`dropdownComment${$.name}`,className:"inline-flex items-center p-2 text-sm font-medium text-center text-gray-500 dark:text-gray-400 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-50 dark:bg-gray-900 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button",children:[l.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 3",children:l.jsx("path",{d:"M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"})}),l.jsx("span",{className:"sr-only",children:"Comment settings"})]})]}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:$.comment}),l.jsx("div",{className:"flex items-center mt-4 space-x-4",children:l.jsxs("button",{type:"button",onClick:()=>E(B.name),className:"flex items-center text-sm text-gray-500 hover:underline dark:text-gray-400 font-medium",children:[l.jsx("svg",{className:"mr-1.5 w-3.5 h-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 18",children:l.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 5h5M5 8h2m6-3h2m-5 3h6m2-7H2a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h3v5l5-5h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"})}),"Reply"]})})]},$.name))]},B.name))]})})};function B0(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:l.jsx("table",te({"data-slot":"table",className:Sr("w-full caption-bottom text-sm",e)},t))})}function V0(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx("thead",te({"data-slot":"table-header",className:Sr("[&_tr]:border-b",e)},t))}function U0(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx("tbody",te({"data-slot":"table-body",className:Sr("[&_tr:last-child]:border-0",e)},t))}function cd(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx("tr",te({"data-slot":"table-row",className:Sr("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e)},t))}function Hr(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx("th",te({"data-slot":"table-head",className:Sr("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e)},t))}function qr(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx("td",te({"data-slot":"table-cell",className:Sr("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e)},t))}function bE(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx("caption",te({"data-slot":"table-caption",className:Sr("text-muted-foreground mt-4 text-sm",e)},t))}var vE=1,_Q=.9,bQ=.8,vQ=.17,P2=.1,R2=.999,wQ=.9999,SQ=.99,jQ=/[\\\/_+.#"@\[\(\{&]/,CQ=/[\\\/_+.#"@\[\(\{&]/g,TQ=/[\s-]/,sD=/[\s-]/g;function xj(e,t,n,i,o,u,c){if(u===t.length)return o===e.length?vE:SQ;var a=`${o},${u}`;if(c[a]!==void 0)return c[a];for(var g=i.charAt(u),_=n.indexOf(g,o),S=0,N,A,E,D;_>=0;)N=xj(e,t,n,i,_+1,u+1,c),N>S&&(_===o?N*=vE:jQ.test(e.charAt(_-1))?(N*=bQ,E=e.slice(o,_-1).match(CQ),E&&o>0&&(N*=Math.pow(R2,E.length))):TQ.test(e.charAt(_-1))?(N*=_Q,D=e.slice(o,_-1).match(sD),D&&o>0&&(N*=Math.pow(R2,D.length))):(N*=vQ,o>0&&(N*=Math.pow(R2,_-o))),e.charAt(_)!==t.charAt(u)&&(N*=wQ)),(N<P2&&n.charAt(_-1)===i.charAt(u+1)||i.charAt(u+1)===i.charAt(u)&&n.charAt(_-1)!==i.charAt(u))&&(A=xj(e,t,n,i,_+1,u+2,c),A*P2>N&&(N=A*P2)),N>S&&(S=N),_=n.indexOf(g,_+1);return c[a]=S,S}function wE(e){return e.toLowerCase().replace(sD," ")}function kQ(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,xj(e,t,wE(e),wE(t),0,0,{})}var $0='[cmdk-group=""]',D2='[cmdk-group-items=""]',NQ='[cmdk-group-heading=""]',rD='[cmdk-item=""]',SE=`${rD}:not([aria-disabled="true"])`,_j="cmdk-item-select",qg="data-value",MQ=(e,t,n)=>kQ(e,t,n),aD=L.createContext(void 0),c_=()=>L.useContext(aD),oD=L.createContext(void 0),jT=()=>L.useContext(oD),lD=L.createContext(void 0),cD=L.forwardRef((e,t)=>{let n=Gg(()=>{var Ae,ot;return{search:"",value:(ot=(Ae=e.value)!=null?Ae:e.defaultValue)!=null?ot:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),i=Gg(()=>new Set),o=Gg(()=>new Map),u=Gg(()=>new Map),c=Gg(()=>new Set),a=uD(e),tt=e,{label:g,children:_,value:S,onValueChange:N,filter:A,shouldFilter:E,loop:D,disablePointerSelection:B=!1,vimBindings:$=!0}=tt,G=en(tt,["label","children","value","onValueChange","filter","shouldFilter","loop","disablePointerSelection","vimBindings"]),W=Ll(),J=Ll(),Z=Ll(),K=L.useRef(null),le=BQ();Em(()=>{if(S!==void 0){let Ae=S.trim();n.current.value=Ae,_e.emit()}},[S]),Em(()=>{le(6,st)},[]);let _e=L.useMemo(()=>({subscribe:Ae=>(c.current.add(Ae),()=>c.current.delete(Ae)),snapshot:()=>n.current,setState:(Ae,ot,ct)=>{var ut,tn,Ge,Ye;if(!Object.is(n.current[Ae],ot)){if(n.current[Ae]=ot,Ae==="search")We(),Oe(),le(1,He);else if(Ae==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let zt=document.getElementById(Z);zt?zt.focus():(ut=document.getElementById(W))==null||ut.focus()}if(le(7,()=>{var zt;n.current.selectedItemId=(zt=At())==null?void 0:zt.id,_e.emit()}),ct||le(5,st),((tn=a.current)==null?void 0:tn.value)!==void 0){let zt=ot!=null?ot:"";(Ye=(Ge=a.current).onValueChange)==null||Ye.call(Ge,zt);return}}_e.emit()}},emit:()=>{c.current.forEach(Ae=>Ae())}}),[]),de=L.useMemo(()=>({value:(Ae,ot,ct)=>{var ut;ot!==((ut=u.current.get(Ae))==null?void 0:ut.value)&&(u.current.set(Ae,{value:ot,keywords:ct}),n.current.filtered.items.set(Ae,pe(ot,ct)),le(2,()=>{Oe(),_e.emit()}))},item:(Ae,ot)=>(i.current.add(Ae),ot&&(o.current.has(ot)?o.current.get(ot).add(Ae):o.current.set(ot,new Set([Ae]))),le(3,()=>{We(),Oe(),n.current.value||He(),_e.emit()}),()=>{u.current.delete(Ae),i.current.delete(Ae),n.current.filtered.items.delete(Ae);let ct=At();le(4,()=>{We(),(ct==null?void 0:ct.getAttribute("id"))===Ae&&He(),_e.emit()})}),group:Ae=>(o.current.has(Ae)||o.current.set(Ae,new Set),()=>{u.current.delete(Ae),o.current.delete(Ae)}),filter:()=>a.current.shouldFilter,label:g||e["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:W,inputId:Z,labelId:J,listInnerRef:K}),[]);function pe(Ae,ot){var ct,ut;let tn=(ut=(ct=a.current)==null?void 0:ct.filter)!=null?ut:MQ;return Ae?tn(Ae,n.current.search,ot):0}function Oe(){if(!n.current.search||a.current.shouldFilter===!1)return;let Ae=n.current.filtered.items,ot=[];n.current.filtered.groups.forEach(ut=>{let tn=o.current.get(ut),Ge=0;tn.forEach(Ye=>{let zt=Ae.get(Ye);Ge=Math.max(zt,Ge)}),ot.push([ut,Ge])});let ct=K.current;vt().sort((ut,tn)=>{var Ge,Ye;let zt=ut.getAttribute("id"),Bt=tn.getAttribute("id");return((Ge=Ae.get(Bt))!=null?Ge:0)-((Ye=Ae.get(zt))!=null?Ye:0)}).forEach(ut=>{let tn=ut.closest(D2);tn?tn.appendChild(ut.parentElement===tn?ut:ut.closest(`${D2} > *`)):ct.appendChild(ut.parentElement===ct?ut:ut.closest(`${D2} > *`))}),ot.sort((ut,tn)=>tn[1]-ut[1]).forEach(ut=>{var tn;let Ge=(tn=K.current)==null?void 0:tn.querySelector(`${$0}[${qg}="${encodeURIComponent(ut[0])}"]`);Ge==null||Ge.parentElement.appendChild(Ge)})}function He(){let Ae=vt().find(ct=>ct.getAttribute("aria-disabled")!=="true"),ot=Ae==null?void 0:Ae.getAttribute(qg);_e.setState("value",ot||void 0)}function We(){var Ae,ot,ct,ut;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=i.current.size;return}n.current.filtered.groups=new Set;let tn=0;for(let Ge of i.current){let Ye=(ot=(Ae=u.current.get(Ge))==null?void 0:Ae.value)!=null?ot:"",zt=(ut=(ct=u.current.get(Ge))==null?void 0:ct.keywords)!=null?ut:[],Bt=pe(Ye,zt);n.current.filtered.items.set(Ge,Bt),Bt>0&&tn++}for(let[Ge,Ye]of o.current)for(let zt of Ye)if(n.current.filtered.items.get(zt)>0){n.current.filtered.groups.add(Ge);break}n.current.filtered.count=tn}function st(){var Ae,ot,ct;let ut=At();ut&&(((Ae=ut.parentElement)==null?void 0:Ae.firstChild)===ut&&((ct=(ot=ut.closest($0))==null?void 0:ot.querySelector(NQ))==null||ct.scrollIntoView({block:"nearest"})),ut.scrollIntoView({block:"nearest"}))}function At(){var Ae;return(Ae=K.current)==null?void 0:Ae.querySelector(`${rD}[aria-selected="true"]`)}function vt(){var Ae;return Array.from(((Ae=K.current)==null?void 0:Ae.querySelectorAll(SE))||[])}function ze(Ae){let ot=vt()[Ae];ot&&_e.setState("value",ot.getAttribute(qg))}function Qe(Ae){var ot;let ct=At(),ut=vt(),tn=ut.findIndex(Ye=>Ye===ct),Ge=ut[tn+Ae];(ot=a.current)!=null&&ot.loop&&(Ge=tn+Ae<0?ut[ut.length-1]:tn+Ae===ut.length?ut[0]:ut[tn+Ae]),Ge&&_e.setState("value",Ge.getAttribute(qg))}function Je(Ae){let ot=At(),ct=ot==null?void 0:ot.closest($0),ut;for(;ct&&!ut;)ct=Ae>0?LQ(ct,$0):FQ(ct,$0),ut=ct==null?void 0:ct.querySelector(SE);ut?_e.setState("value",ut.getAttribute(qg)):Qe(Ae)}let Pt=()=>ze(vt().length-1),fe=Ae=>{Ae.preventDefault(),Ae.metaKey?Pt():Ae.altKey?Je(1):Qe(1)},Xe=Ae=>{Ae.preventDefault(),Ae.metaKey?ze(0):Ae.altKey?Je(-1):Qe(-1)};return L.createElement(Ui.div,Me(te({ref:t,tabIndex:-1},G),{"cmdk-root":"",onKeyDown:Ae=>{var ot;(ot=G.onKeyDown)==null||ot.call(G,Ae);let ct=Ae.nativeEvent.isComposing||Ae.keyCode===229;if(!(Ae.defaultPrevented||ct))switch(Ae.key){case"n":case"j":{$&&Ae.ctrlKey&&fe(Ae);break}case"ArrowDown":{fe(Ae);break}case"p":case"k":{$&&Ae.ctrlKey&&Xe(Ae);break}case"ArrowUp":{Xe(Ae);break}case"Home":{Ae.preventDefault(),ze(0);break}case"End":{Ae.preventDefault(),Pt();break}case"Enter":{Ae.preventDefault();let ut=At();if(ut){let tn=new Event(_j);ut.dispatchEvent(tn)}}}}}),L.createElement("label",{"cmdk-label":"",htmlFor:de.inputId,id:de.labelId,style:UQ},g),q1(e,Ae=>L.createElement(oD.Provider,{value:_e},L.createElement(aD.Provider,{value:de},Ae))))}),EQ=L.forwardRef((e,t)=>{var n,i;let o=Ll(),u=L.useRef(null),c=L.useContext(lD),a=c_(),g=uD(e),_=(i=(n=g.current)==null?void 0:n.forceMount)!=null?i:c==null?void 0:c.forceMount;Em(()=>{if(!_)return a.item(o,c==null?void 0:c.id)},[_]);let S=dD(o,u,[e.value,e.children,u],e.keywords),N=jT(),A=Zf(_e=>_e.value&&_e.value===S.current),E=Zf(_e=>_||a.filter()===!1?!0:_e.search?_e.filtered.items.get(o)>0:!0);L.useEffect(()=>{let _e=u.current;if(!(!_e||e.disabled))return _e.addEventListener(_j,D),()=>_e.removeEventListener(_j,D)},[E,e.onSelect,e.disabled]);function D(){var _e,de;B(),(de=(_e=g.current).onSelect)==null||de.call(_e,S.current)}function B(){N.setState("value",S.current,!0)}if(!E)return null;let le=e,{disabled:$,value:G,onSelect:W,forceMount:J,keywords:Z}=le,K=en(le,["disabled","value","onSelect","forceMount","keywords"]);return L.createElement(Ui.div,Me(te({ref:_m(u,t)},K),{id:o,"cmdk-item":"",role:"option","aria-disabled":!!$,"aria-selected":!!A,"data-disabled":!!$,"data-selected":!!A,onPointerMove:$||a.getDisablePointerSelection()?void 0:B,onClick:$?void 0:D}),e.children)}),AQ=L.forwardRef((e,t)=>{let E=e,{heading:n,children:i,forceMount:o}=E,u=en(E,["heading","children","forceMount"]),c=Ll(),a=L.useRef(null),g=L.useRef(null),_=Ll(),S=c_(),N=Zf(D=>o||S.filter()===!1?!0:D.search?D.filtered.groups.has(c):!0);Em(()=>S.group(c),[]),dD(c,a,[e.value,e.heading,g]);let A=L.useMemo(()=>({id:c,forceMount:o}),[o]);return L.createElement(Ui.div,Me(te({ref:_m(a,t)},u),{"cmdk-group":"",role:"presentation",hidden:N?void 0:!0}),n&&L.createElement("div",{ref:g,"cmdk-group-heading":"","aria-hidden":!0,id:_},n),q1(e,D=>L.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?_:void 0},L.createElement(lD.Provider,{value:A},D))))}),PQ=L.forwardRef((e,t)=>{let c=e,{alwaysRender:n}=c,i=en(c,["alwaysRender"]),o=L.useRef(null),u=Zf(a=>!a.search);return!n&&!u?null:L.createElement(Ui.div,Me(te({ref:_m(o,t)},i),{"cmdk-separator":"",role:"separator"}))}),RQ=L.forwardRef((e,t)=>{let _=e,{onValueChange:n}=_,i=en(_,["onValueChange"]),o=e.value!=null,u=jT(),c=Zf(S=>S.search),a=Zf(S=>S.selectedItemId),g=c_();return L.useEffect(()=>{e.value!=null&&u.setState("search",e.value)},[e.value]),L.createElement(Ui.input,Me(te({ref:t},i),{"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":g.listId,"aria-labelledby":g.labelId,"aria-activedescendant":a,id:g.inputId,type:"text",value:o?e.value:c,onChange:S=>{o||u.setState("search",S.target.value),n==null||n(S.target.value)}}))}),DQ=L.forwardRef((e,t)=>{let _=e,{children:n,label:i="Suggestions"}=_,o=en(_,["children","label"]),u=L.useRef(null),c=L.useRef(null),a=Zf(S=>S.selectedItemId),g=c_();return L.useEffect(()=>{if(c.current&&u.current){let S=c.current,N=u.current,A,E=new ResizeObserver(()=>{A=requestAnimationFrame(()=>{let D=S.offsetHeight;N.style.setProperty("--cmdk-list-height",D.toFixed(1)+"px")})});return E.observe(S),()=>{cancelAnimationFrame(A),E.unobserve(S)}}},[]),L.createElement(Ui.div,Me(te({ref:_m(u,t)},o),{"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":i,id:g.listId}),q1(e,S=>L.createElement("div",{ref:_m(c,g.listInnerRef),"cmdk-list-sizer":""},S)))}),zQ=L.forwardRef((e,t)=>{let g=e,{open:n,onOpenChange:i,overlayClassName:o,contentClassName:u,container:c}=g,a=en(g,["open","onOpenChange","overlayClassName","contentClassName","container"]);return L.createElement($H,{open:n,onOpenChange:i},L.createElement(HH,{container:c},L.createElement(qH,{"cmdk-overlay":"",className:o}),L.createElement(GH,{"aria-label":e.label,"cmdk-dialog":"",className:u},L.createElement(cD,te({ref:t},a)))))}),IQ=L.forwardRef((e,t)=>Zf(n=>n.filtered.count===0)?L.createElement(Ui.div,Me(te({ref:t},e),{"cmdk-empty":"",role:"presentation"})):null),OQ=L.forwardRef((e,t)=>{let c=e,{progress:n,children:i,label:o="Loading..."}=c,u=en(c,["progress","children","label"]);return L.createElement(Ui.div,Me(te({ref:t},u),{"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o}),q1(e,a=>L.createElement("div",{"aria-hidden":!0},a)))}),zy=Object.assign(cD,{List:DQ,Item:EQ,Input:RQ,Group:AQ,Separator:PQ,Dialog:zQ,Empty:IQ,Loading:OQ});function LQ(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function FQ(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function uD(e){let t=L.useRef(e);return Em(()=>{t.current=e}),t}var Em=typeof window=="undefined"?L.useEffect:L.useLayoutEffect;function Gg(e){let t=L.useRef();return t.current===void 0&&(t.current=e()),t}function Zf(e){let t=jT(),n=()=>e(t.snapshot());return L.useSyncExternalStore(t.subscribe,n,n)}function dD(e,t,n,i=[]){let o=L.useRef(),u=c_();return Em(()=>{var c;let a=(()=>{var _;for(let S of n){if(typeof S=="string")return S.trim();if(typeof S=="object"&&"current"in S)return S.current?(_=S.current.textContent)==null?void 0:_.trim():o.current}})(),g=i.map(_=>_.trim());u.value(e,a,g),(c=t.current)==null||c.setAttribute(qg,a),o.current=a}),o}var BQ=()=>{let[e,t]=L.useState(),n=Gg(()=>new Map);return Em(()=>{n.current.forEach(i=>i()),n.current=new Map},[e]),(i,o)=>{n.current.set(i,o),t({})}};function VQ(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function q1({asChild:e,children:t},n){return e&&L.isValidElement(t)?L.cloneElement(VQ(t),{ref:t.ref},n(t.props.children)):n(t)}var UQ={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function $Q(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx(zy,te({"data-slot":"command",className:Sr("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e)},t))}function HQ(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[l.jsx(ty,{className:"size-4 shrink-0 opacity-50"}),l.jsx(zy.Input,te({"data-slot":"command-input",className:Sr("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e)},t))]})}function qQ(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx(zy.List,te({"data-slot":"command-list",className:Sr("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e)},t))}function GQ(t){var e=en(t,[]);return l.jsx(zy.Empty,te({"data-slot":"command-empty",className:"py-6 text-center text-sm"},e))}function WQ(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx(zy.Group,te({"data-slot":"command-group",className:Sr("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e)},t))}function ZQ(n){var i=n,{className:e}=i,t=en(i,["className"]);return l.jsx(zy.Item,te({"data-slot":"command-item",className:Sr("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e)},t))}function YQ(t){var e=en(t,[]);return l.jsx(uG,te({"data-slot":"popover"},e))}function XQ(t){var e=en(t,[]);return l.jsx(dG,te({"data-slot":"popover-trigger"},e))}function KQ(o){var u=o,{className:e,align:t="center",sideOffset:n=4}=u,i=en(u,["className","align","sideOffset"]);return l.jsx(hG,{children:l.jsx(fG,te({"data-slot":"popover-content",align:t,sideOffset:n,className:Sr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e)},i))})}const H0=({value:e,onChange:t,doctype:n})=>{var g;const[i,o]=L.useState(!1),[u,c]=L.useState(""),{data:a}=MO(n,u);return console.log("Link data",a),l.jsxs(YQ,{open:i,onOpenChange:o,children:[l.jsx(XQ,{asChild:!0,children:l.jsxs($8,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-[200px] justify-between",children:[e||`select ${n}`,l.jsx(xF,{className:"opacity-50"})]})}),l.jsx(KQ,{className:"w-[200px] p-0",children:l.jsxs($Q,{shouldFilter:!1,children:[l.jsx(HQ,{placeholder:"Search ...",className:"h-9",value:u,onValueChange:c}),l.jsxs(qQ,{children:[l.jsxs(GQ,{children:["No ",n," found."]}),l.jsxs(WQ,{children:[(a==null?void 0:a.message.length)===0&&l.jsxs("span",{className:"py-6 text-center text-sm",children:["No ",n," found."]}),(g=a==null?void 0:a.message)==null?void 0:g.map(_=>l.jsxs(ZQ,{value:_.value,onSelect:S=>{t(S===e?"":S),o(!1)},children:[_.value,l.jsx(bP,{className:Sr("ml-auto",e===_.value?"opacity-100":"opacity-0")})]},_.value))]})]})]})})]})};L.createContext({});L.createContext({});const QQ=()=>{var Gt,Ot,bn,Tn,dt;BS();const{currentUser:e,login:t}=Rm(),{data:n,loading:i,error:o,mutate:u}=Ch("User",e),{updateDoc:c,loading:a}=U4(),[g,_]=L.useState(""),[S,N]=L.useState(""),[A,E]=L.useState(""),[D,B]=L.useState(""),[$,G]=L.useState(""),[W,J]=L.useState(""),[Z,K]=L.useState(""),[le,_e]=L.useState([]),[de,pe]=L.useState([]),[Oe,He]=L.useState([]),[We,st]=L.useState([]),[At,vt]=L.useState([]),[ze,Qe]=L.useState([]),[Je,Pt]=L.useState([]),[fe,Xe]=L.useState(""),[tt,Ae]=L.useState(""),[ot,ct]=L.useState(""),[ut,tn]=L.useState(!1),[Ge,Ye]=L.useState(!1),[zt,Bt]=L.useState(!1),[It,Lt]=L.useState(null),[nn,_n]=L.useState(""),[Xn,Gn]=L.useState(!1),{upload:gn}=Kj(),{register:ln,handleSubmit:Ue,control:ge}=BS();ua();const{data:ve}=Ch("User",e);console.log("User details",ve),L.useEffect(()=>{n&&(N(n.first_name||""),E(n.last_name||""),B(n.birth_date||""),G(n.gender||""),J(n.mobile_no||""),K(n.bio||""),_n(n.user_image||""))},[n]);const ht=()=>Ht(null,null,function*(){if(!fe||!tt){Ha.warning("Please fill both password fields");return}if(tt!==ot){Ha.error("New password and Confirm password are not matching");return}console.log("Current password",fe);try{yield t({username:e,password:fe}).then(Vt=>Ht(null,null,function*(){Vt.message==="Logged In"&&tt===ot&&(yield c("User",e,{new_password:tt}),Xe(""),Ae(""),Ha.success("Password updated successfully"))}))}catch(Ct){console.log("login error",Ct),Ha.error(Ct.message)}}),ft=Ct=>{const Wt=Ct.target.files[0];Wt&&(Lt(Wt),_n(URL.createObjectURL(Wt)))},qt=()=>{Lt(null),_n("")},cn=()=>Ht(null,null,function*(){if(It&&It){const Ct=yield gn(It,{isPrivate:!0,doctype:"User",fieldname:"user_image"});Ct&&(Lt(Ct.file_url),yield c("User",e,{user_image:Ct.file_url}),u(),alert("Profile picture uploaded successfully"))}}),Qt=()=>Ht(null,null,function*(){if(!Xn){Gn(!0);return}try{alert("Account deletion ")}catch(Ct){console.error("Error deleting account:",Ct),alert("Failed to delete account")}});if(i)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading user data..."});if(o)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:"Error loading user data"});const xt=()=>S&&A?(S[0]+A[0]).toUpperCase():S?S[0].toUpperCase():e?e[0].toUpperCase():"U",je=Og({control:ge,name:"identifications"}),ae=Og({control:ge,name:"identification_type"}),ie=Og({control:ge,name:"biometric_details"}),be=Og({control:ge,name:"bank_account_details"}),ke=Og({control:ge,name:"details_of_spouse"}),Re=Og({control:ge,name:"details_of_children"}),Q=Ct=>Ht(null,null,function*(){console.log("Form submitted:",Ct);const Wt=Object.fromEntries(Object.entries({title:Ct.title,first_name:Ct.first_name,middle_name:Ct.middle_name,last_name:Ct.last_name,gender:Ct.gender,nationality:Ct.nationality,resident_status:Ct.resident_status,marital_status:Ct.marital_status,origin:Ct.origin,portion_nolot_no:Ct.portion_nolot_no,villagestreet:Ct.villagestreet,town:Ct.town,district:Ct.district,province:Ct.province,country:Ct.country,po_box:Ct.po_box,postal_code:Ct.postal_code,portion_lot_no:Ct.portion_lot_no,village_street:Ct.village_street,town1:Ct.town1,district1:Ct.district1,province1:Ct.province1,country1:Ct.country1,po_box1:Ct.po_box1,postal_code1:Ct.postal_code1,office_no:Ct.office_no,home:Ct.home,mobile_no:Ct.mobile_no,office_email:Ct.office_email,personal_email:Ct.personal_email,phone_no:Ct.phone_no,email_id:Ct.email_id,dd:Ct.identifications,identification_type:Ct.biometric_details,table_64:Ct.bank_account_details,details_of_spose:Ct.details_of_spouse,details_of_children:Ct.details_of_children,name1:Ct.name1,relationship:Ct.relationship,crm_no:Ct.crm_no}).filter(([Vt,vn])=>vn!=null));try{yield c("Prospect Details","CRM-0000010",Wt),Xe(""),Ae(""),Ha.success("Data updated successfully")}catch(Vt){console.error("Error updating data:",Vt),Ha.error("Failed to update data")}}),nt=Ct=>{switch(Ct){case"identifications":je.append({identification_type:"",number:""});break;case"identification_type":ae.append({identification_type:"",status:""});break;case"education":educationArray.append({institution:"",degree:"",year:""});break;case"employment":employmentArray.append({company:"",position:"",duration:""});break;case"biometric_details":ie.append({identification_type:"",status:""});break;case"bank_account_details":be.append({bank_account:"",account_number:"",branch_name:""});break;case"details_of_spouse":ke.append({name1:"",crm_no:"",age:""});break;case"details_of_children":Re.append({children_name:"",spouse_name:"",crm_no:"",age:""});break;default:console.error("Unknown table type:",Ct)}},et=(Ct,Wt)=>{switch(Ct){case"identifications":_e(Vt=>Vt.includes(Wt)?Vt.filter(vn=>vn!==Wt):[...Vt,Wt]);break;case"identification_type":Qe(Vt=>Vt.includes(Wt)?Vt.filter(vn=>vn!==Wt):[...Vt,Wt]);break;case"employment":Pt(Vt=>Vt.includes(Wt)?Vt.filter(vn=>vn!==Wt):[...Vt,Wt]);break;default:console.error("Unknown table type:",Ct)}},Tt=Ct=>{let Wt,Vt,vn;switch(Ct){case"identifications":Wt=le,Vt=je,vn=_e;break;case"identification_type":Wt=ze,Vt=ae,vn=Qe;break;case"employment":Wt=Je,Vt=employmentArray,vn=Pt;break;default:console.error("Unknown table type:",Ct);return}[...Wt].sort((Jn,ai)=>ai-Jn).forEach(Jn=>{Vt.remove(Jn)}),vn([])};return l.jsx("div",{className:"min-h-screen bg-[#f2f9ff] text-gray-700 py-8 px-4",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold mb-8 text-blue-800",children:"Edit Profile"}),l.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-center",children:[l.jsx("div",{className:"mb-4 sm:mb-0 sm:mr-6",children:nn?l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsx("img",{src:nn,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-blue-100"}),l.jsx("button",{onClick:qt,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:l.jsx(Sx,{size:16})})]}):l.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-500 flex items-center justify-center text-white text-3xl font-bold",children:xt()})}),l.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[l.jsx("p",{className:"text-lg font-medium mb-3",children:"Profile Picture"}),l.jsxs("div",{className:"flex flex-wrap gap-3 justify-center sm:justify-start",children:[l.jsxs("label",{className:"px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 cursor-pointer flex items-center transition",children:[l.jsx(Dm,{size:18,className:"mr-2"}),"Select Image",l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ft})]}),l.jsxs("button",{onClick:cn,disabled:!It,className:`px-4 py-2 rounded-lg flex items-center transition ${It?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[l.jsx(wS,{size:18,className:"mr-2"}),"Upload"]})]})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Basic Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Title"}),l.jsxs("select",Me(te({},ln("title")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select Title"}),l.jsx("option",{value:"Mr.",children:"Mr."}),l.jsx("option",{value:"Mrs.",children:"Mrs."}),l.jsx("option",{value:"Miss.",children:"Miss."})]}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Gender"}),l.jsxs("select",Me(te({},ln("gender")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select Gender"}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"}),l.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"First Name"}),l.jsx("input",Me(te({type:"text"},ln("first_name")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Nationality"}),l.jsx("input",Me(te({type:"text"},ln("nationality")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Middle Name"}),l.jsx("input",Me(te({type:"text"},ln("middle_name")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Resident Status"}),l.jsxs("select",Me(te({},ln("resident_status")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select Status"}),l.jsx("option",{value:"Resident",children:"Resident"}),l.jsx("option",{value:"Non-Resident",children:"Non-Resident"})]}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Last Name"}),l.jsx("input",Me(te({type:"text"},ln("last_name")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Marital Status"}),l.jsxs("select",Me(te({},ln("marital_status")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select Status"}),l.jsx("option",{value:"Married",children:"Married"}),l.jsx("option",{value:"Unmarried",children:"Unmarried"})]}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Date of Birth"}),l.jsx("input",Me(te({type:"date"},ln("date_of_birth")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Origin"}),l.jsx("input",Me(te({type:"text"},ln("origin")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("input",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Permanent Address"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Portion No/Lot No"}),l.jsx("input",Me(te({type:"text"},ln("portion_lot_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Province"}),l.jsx("input",Me(te({type:"text"},ln("province")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Village/Street"}),l.jsx("input",Me(te({type:"text"},ln("villagestreet")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Country"}),l.jsx("input",Me(te({type:"text"},ln("country")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Town"}),l.jsx("input",Me(te({type:"text"},ln("town")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"PO Box"}),l.jsx("input",Me(te({type:"text"},ln("po_box")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"District"}),l.jsx("input",Me(te({type:"text"},ln("district")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Postal Code"}),l.jsx("input",Me(te({type:"text"},ln("postal_code")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Current Location / Correspondence Address"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Portion No/Lot No"}),l.jsx("input",Me(te({type:"text"},ln("portion_nolot_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Province"}),l.jsx("input",Me(te({type:"text"},ln("province1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Village/Street"}),l.jsx("input",Me(te({type:"text"},ln("village_street")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Country"}),l.jsx("input",Me(te({type:"text"},ln("country1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Town"}),l.jsx("input",Me(te({type:"text"},ln("town1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"PO Box"}),l.jsx("input",Me(te({type:"text"},ln("po_box1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"District"}),l.jsx("input",Me(te({type:"text"},ln("district1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Postal Code"}),l.jsx("input",Me(te({type:"text"},ln("postal_code1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Contact Number"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Office No"}),l.jsx("input",Me(te({type:"text"},ln("office_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Mobile No"}),l.jsx("input",Me(te({type:"number"},ln("mobile_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Home"}),l.jsx("input",Me(te({type:"text"},ln("home")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Email Id"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Office Email"}),l.jsx("input",Me(te({type:"text"},ln("office_email")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Personal Email"}),l.jsx("input",Me(te({type:"email"},ln("personal_email")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Preferred Secured Communication"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Phone No"}),l.jsx("input",Me(te({type:"number"},ln("phone_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Email Id"}),l.jsx("input",Me(te({type:"email"},ln("email_id")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Identification Details"}),l.jsxs(B0,{className:"w-full bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(V0,{children:l.jsxs(cd,{children:[l.jsx(Hr,{className:"w-[100px]",children:"No."}),l.jsx(Hr,{children:"Identification Type"}),l.jsx(Hr,{children:"Number"}),l.jsx(Hr,{children:"Attached"})]})}),l.jsxs(U0,{className:"bg-white border border-blue-100",children:[(Gt=je==null?void 0:je.fields)==null?void 0:Gt.map((Ct,Wt)=>{var Vt;return l.jsxs(cd,{children:[l.jsxs(qr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:le.includes(Wt),onChange:()=>et(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(qr,{children:l.jsx(H0,{doctype:"indentify",placeholder:"Select Identification Type",value:(Vt=je.fields[Wt])==null?void 0:Vt.identification_type,onChange:vn=>{je.update(Wt,Me(te({},je.fields[Wt]),{identification_type:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(qr,{children:l.jsx("input",Me(te({type:"number",placeholder:"Number"},ln(`identifications.${Wt}.number`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(qr,{children:l.jsxs("button",{className:"px-4 py-2 rounded-lg flex items-center transition  bg-gray-200 text-gray-400",children:[l.jsx(wS,{size:18,className:"mr-2"}),"Upload"]})})]},Ct.id)}),je.fields.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("identifications"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>Tt("identifications"),disabled:le.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${le.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(zg,{size:18,className:"mr-2"}),"Delete Selected (",le.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Biometric Details"}),l.jsxs(B0,{className:"w-full bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(V0,{children:l.jsxs(cd,{children:[l.jsx(Hr,{className:"w-[100px]",children:"No."}),l.jsx(Hr,{children:"Identification Type"}),l.jsx(Hr,{children:"Status"})]})}),l.jsxs(U0,{className:"bg-white border border-blue-100",children:[(Ot=ie==null?void 0:ie.fields)==null?void 0:Ot.map((Ct,Wt)=>{var Vt;return l.jsxs(cd,{children:[l.jsxs(qr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:ze.includes(Wt),onChange:()=>et(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(qr,{children:l.jsx(H0,{doctype:"Biometric",placeholder:"Select Biometric",value:(Vt=ie==null?void 0:ie.fields[Wt])==null?void 0:Vt.identification_type,onChange:vn=>{ie.update(Wt,Me(te({},ie==null?void 0:ie.fields[Wt]),{identification_type:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(qr,{children:l.jsx("input",Me(te({type:"checkbox"},ln(`biometric_details.${Wt}.identification_type`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))})]},Ct.id)}),(ie==null?void 0:ie.fields.length)===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("biometric_details"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>Tt("biometric_details"),disabled:ze.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${ze.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(zg,{size:18,className:"mr-2"}),"Delete Selected (",ze.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Bank Account Details"}),l.jsxs(B0,{className:"w-full bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(V0,{children:l.jsxs(cd,{children:[l.jsx(Hr,{className:"w-[100px]",children:"No."}),l.jsx(Hr,{children:"Account Name"}),l.jsx(Hr,{children:"Account Number"}),l.jsx(Hr,{children:"Branch Name"})]})}),l.jsxs(U0,{className:"bg-white border border-blue-100",children:[(bn=be==null?void 0:be.fields)==null?void 0:bn.map((Ct,Wt)=>{var Vt;return l.jsxs(cd,{children:[l.jsxs(qr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:le.includes(Wt),onChange:()=>et(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(qr,{children:l.jsx(H0,{doctype:"Bank Account Summary",placeholder:"Select Bank Account Summary",value:(Vt=be==null?void 0:be.fields[Wt])==null?void 0:Vt.bank_account,onChange:vn=>{be.update(Wt,Me(te({},be.fields[Wt]),{bank_account:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(qr,{children:l.jsx("input",Me(te({type:"number",placeholder:"Account Number"},ln(`bank_account_details.${Wt}.account_number`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(qr,{children:l.jsx("input",Me(te({type:"text",placeholder:"Branch Name"},ln(`bank_account_details.${Wt}.branch_name`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))})]},Wt)}),(be==null?void 0:be.fields.length)===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("bank_account_details"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>Tt("bank_account_details"),disabled:le.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${le.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(zg,{size:18,className:"mr-2"}),"Delete Selected (",le.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Employement Details"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.jsx("div",{children:l.jsx("input",Me(te({type:"text"},ln("employement_details")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))})}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Healthcare Information"}),l.jsxs(B0,{className:"w-full bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(bE,{children:"Deatils of spouse"}),l.jsx(V0,{children:l.jsxs(cd,{children:[l.jsx(Hr,{className:"w-[100px]",children:"No."}),l.jsx(Hr,{children:"Name"}),l.jsx(Hr,{children:"CRM ID"}),l.jsx(Hr,{children:"Age"})]})}),l.jsxs(U0,{className:"bg-white border border-blue-100",children:[(Tn=ke==null?void 0:ke.fields)==null?void 0:Tn.map((Ct,Wt)=>{var Vt;return l.jsxs(cd,{children:[l.jsxs(qr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:le.includes(Wt),onChange:()=>et(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(qr,{children:l.jsx("input",Me(te({type:"text",placeholder:"Name"},ln(`details_of_spouse.${Wt}.name1`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(qr,{children:l.jsx(H0,{doctype:"Prospect Details",placeholder:"Select CRM ID",value:(Vt=ke==null?void 0:ke.fields[Wt])==null?void 0:Vt.crm_no,onChange:vn=>{ke.update(Wt,Me(te({},ke.fields[Wt]),{crm_no:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(qr,{children:l.jsx("input",Me(te({type:"number",placeholder:"Age"},ln(`details_of_spouse.${Wt}.age`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))})]},Ct.id)}),ke.fields.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("details_of_spouse"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>Tt("details_of_spouse"),disabled:le.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${le.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(zg,{size:18,className:"mr-2"}),"Delete Selected (",le.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]}),l.jsxs(B0,{className:"w-full mt-10 bg-blue-50 text-gray-700 rounded-lg p-3 ",children:[l.jsx(bE,{children:"Deatils of children"}),l.jsx(V0,{children:l.jsxs(cd,{children:[l.jsx(Hr,{className:"w-[100px]",children:"No."}),l.jsx(Hr,{children:"Children Name"}),l.jsx(Hr,{children:"Father's/Mother's Name"}),l.jsx(Hr,{children:"CRM ID"}),l.jsx(Hr,{children:"Age"})]})}),l.jsxs(U0,{className:"bg-white border border-blue-100",children:[(dt=Re==null?void 0:Re.fields)==null?void 0:dt.map((Ct,Wt)=>{var Vt;return l.jsxs(cd,{children:[l.jsxs(qr,{className:"font-medium flex items-center justify-center gap-2 md:h-[56px]",children:[l.jsx("input",{type:"checkbox",checked:le.includes(Wt),onChange:()=>et(Wt),className:"h-4 w-4"}),Wt+1]}),l.jsx(qr,{children:l.jsx("input",Me(te({type:"text",placeholder:"Children Name"},ln(`details_of_children.${Wt}.children_name`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(qr,{children:l.jsx("input",Me(te({type:"text",placeholder:"Father's/Mother's Name"},ln(`details_of_children.${Wt}.spouse_name`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))}),l.jsx(qr,{children:l.jsx(H0,{doctype:"Prospect Details",placeholder:"Select CRM ID",value:(Vt=Re==null?void 0:Re.fields[Wt])==null?void 0:Vt.crm_no,onChange:vn=>{Re.update(Wt,Me(te({},Re.fields[Wt]),{crm_no:vn}))},className:"w-full p-3 bg-[#f4f5f7] text-black transition"})}),l.jsx(qr,{children:l.jsx("input",Me(te({type:"number",placeholder:"Age"},ln(`details_of_children.${Wt}.age`)),{className:" w-full p-3 bg-[#f4f5f7] text-black transition"}))})]},Ct.id)}),(Re==null?void 0:Re.fields.length)===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:'No identification records added. Click "Add Row" to add one.'})})]})]}),l.jsxs("div",{className:"flex gap-5",children:[l.jsx("button",{type:"button",onClick:()=>nt("details_of_children"),className:"mt-5 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Row"}),l.jsxs("button",{type:"button",onClick:()=>Tt("details_of_children"),disabled:le.length===0,className:` mt-5 px-4 py-2 rounded-lg flex items-center transition ${le.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-400"}`,children:[l.jsx(zg,{size:18,className:"mr-2"}),"Delete Selected (",le.length,")"]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsx("form",{onSubmit:Ue(Q),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Next Of Kin"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Name"}),l.jsx("input",Me(te({type:"text"},ln("name1")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"CRM Id"}),l.jsx("input",Me(te({type:"text"},ln("crm_no")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}))]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Relationship"}),l.jsxs("select",Me(te({},ln("relationship")),{className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent appearance-none",style:{backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M5 8l5 5 5-5" fill="none" stroke="%23666" stroke-width="1.5"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[l.jsx("option",{value:"",children:"Select relationship"}),l.jsx("option",{value:"Father",children:"Father"}),l.jsx("option",{value:"Mother",children:"Mother"}),l.jsx("option",{value:"Spouse",children:"Spouse"}),l.jsx("option",{value:"Daughter",children:"Daughter"}),l.jsx("option",{value:"Son",children:"Son"}),l.jsx("option",{value:"Sister",children:"Sister"}),l.jsx("option",{value:"Brother",children:"Brother"})]}))]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:a?"Saving...":"Save Changes"})]})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-blue-800 border-b border-gray-200 pb-2",children:"Update Password"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Current Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:ut?"text":"password",value:fe,onChange:Ct=>Xe(Ct.target.value),placeholder:"Enter Current Password",className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),l.jsx("button",{type:"button",onClick:()=>tn(!ut),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:ut?l.jsx(ey,{size:20}):l.jsx(hm,{size:20})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:Ge?"text":"password",value:tt,onChange:Ct=>Ae(Ct.target.value),placeholder:"Enter New Password",className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),l.jsx("button",{type:"button",onClick:()=>Ye(!Ge),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Ge?l.jsx(ey,{size:20}):l.jsx(hm,{size:20})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-2 font-medium text-gray-600",children:"Confirm Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:zt?"text":"password",value:ot,onChange:Ct=>ct(Ct.target.value),placeholder:"Enter New Password",className:"w-full bg-blue-50 border border-blue-100 text-gray-700 rounded-lg p-3 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),l.jsx("button",{type:"button",onClick:()=>Bt(!zt),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:zt?l.jsx(ey,{size:20}):l.jsx(hm,{size:20})})]})]})]}),l.jsxs("div",{className:"flex justify-end mt-6 gap-3",children:[l.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),l.jsx("button",{onClick:ht,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Update Password"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-red-500",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start",children:[l.jsx("div",{className:"bg-red-100 p-3 rounded-full mb-4 sm:mb-0 sm:mr-4",children:l.jsx(zg,{size:24,className:"text-red-500"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-xl font-bold mb-2 text-red-600",children:"Delete Account"}),l.jsx("p",{className:"mb-2 text-gray-700",children:"Would you like to delete your account?"}),l.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This account may contain important information. Deleting your account is permanent and will remove all the content associated with it."}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{onClick:()=>Gn(!Xn),className:"px-5 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition",children:Xn?"Cancel":"Delete Account"}),Xn&&l.jsx("button",{onClick:Qt,className:"ml-3 px-5 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Confirm Deletion"})]})]})]})})]})})},JQ=({onSelectChannel:e,currentUser:t})=>{const[n,i]=L.useState(""),[o,u]=L.useState([]),{data:c,error:a,isLoading:g,mutate:_}=md("raven.api.raven_channel.get_all_channels",{hide_archived:!0}),{data:S,isLoading:N}=md("raven.api.raven_users.get_list"),{data:A}=md("raven.api.raven_message.get_unread_count_for_channels"),{call:E}=Tv("raven.api.raven_channel.create_direct_message_channel");L.useEffect(()=>{if(S&&S.message&&c&&c.message){const Z=new Set;c.message.dm_channels&&c.message.dm_channels.forEach(le=>{const _e=le.peer_user_id;_e&&Z.add(_e)});const K=S.message.filter(le=>le.name!==t).filter(le=>!Z.has(le.name)).filter(le=>le.name.toLowerCase().includes(n.toLowerCase())||le.full_name&&le.full_name.toLowerCase().includes(n.toLowerCase()));u(K),console.log("Available users",K)}},[c,S,n,t]);const D=Z=>Z.full_name?`${Z.full_name} (${Z.name})`:Z.name,B=Z=>{if(!Z)return"";const K=new Date(Z),_e=Math.floor((new Date-K)/(1e3*60*60*24));return _e===0?K.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):_e===1?"Yesterday":_e<7?K.toLocaleDateString([],{weekday:"short"}):K.toLocaleDateString([],{month:"short",day:"numeric"})},$=Z=>!A||!A.unread_count?0:A.unread_count[Z]||0,G=(Z,K)=>{e&&e(Z,K)},W=Z=>Ht(null,null,function*(){try{const K=yield E({user_id:Z});K&&K.message&&(_(),G(K.message,Z))}catch(K){console.error("Failed to create conversation:",K)}});if(g||N)return l.jsx("div",{className:"p-4 text-center",children:"Loading conversations..."});if(a)return l.jsx("div",{className:"p-4 text-red-500",children:"Error loading conversations"});const J=c&&c.message&&c.message.dm_channels?c.message.dm_channels.filter(Z=>Z.peer_user_id&&Z.peer_user_id.toLowerCase().includes(n.toLowerCase())):[];return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"p-3",children:l.jsx("input",{type:"text",placeholder:"Search users...",value:n,onChange:Z=>i(Z.target.value),className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-300"})}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.jsx("h3",{className:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Direct Messages"}),J.length>0?J.map(Z=>{const K=$(Z.name);return l.jsxs("div",{onClick:()=>G(Z.name,Z.peer_user_id),className:"p-3 hover:bg-gray-100 cursor-pointer flex justify-between border-b",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:Z.peer_user_id}),l.jsxs("div",{className:"text-sm text-gray-500 truncate",children:[Z.last_message?Z.last_message.substring(0,30):"No messages",Z.last_message&&Z.last_message.length>30?"...":""]})]}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("div",{className:"text-xs text-gray-500",children:B(Z.modified)}),K>0&&l.jsx("div",{className:"mt-1 px-2 py-1 text-xs bg-blue-500 text-white rounded-full",children:K})]})]},Z.name)}):l.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No conversations yet"}),o.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"px-3 py-2 mt-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start New Conversation"}),o.map(Z=>l.jsxs("div",{onClick:()=>W(Z.name),className:"p-3 hover:bg-gray-100 cursor-pointer flex items-center border-b",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-500 rounded-full flex items-center justify-center mr-3",children:Z.name.substring(0,1).toUpperCase()}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:D(Z)}),Z.user_status&&l.jsx("div",{className:"text-xs text-gray-500",children:l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:`w-2 h-2 ${Z.user_status==="Online"?"bg-green-500":"bg-gray-300"} rounded-full mr-1`}),Z.user_status]})})]})]},Z.name))]})]})]})},eJ=({channelId:e,channelName:t})=>{var de;const[n,i]=L.useState(""),[o,u]=L.useState(null),c=L.useRef(null),a=L.useRef(null),{currentUser:g}=Rm(),[_,S]=L.useState({lastEventTime:null,eventsReceived:0,socketConnected:!1}),{data:N,error:A,isLoading:E,mutate:D}=md("raven.api.chat_stream.get_messages",{channel_id:e,limit:50},{key:`get_messages_for_channel_${e}`},{revalidateOnFocus:!0}),{call:B,loading:$}=Tv("raven.api.raven_message.send_message"),{call:G}=Tv("raven.api.raven_message.mark_channel_as_read");L.useEffect(()=>{N&&N.message&&e&&G({channel:e})},[N,e,G]),L.useEffect(()=>{console.log(`RavenDirectMessage component initialized for channel: ${e}`);const pe=()=>{S(He=>Me(te({},He),{socketConnected:window.socket&&window.socket.readyState===1}))};pe();const Oe=setInterval(pe,5e3);return()=>{clearInterval(Oe),console.log(`RavenDirectMessage component unmounted for channel: ${e}`)}},[e]),L.useEffect(()=>{A&&(console.error("Error loading messages:",A),u("Failed to load messages"))},[A]),L.useEffect(()=>{c.current&&W()},[N]);const W=(pe="auto")=>{if(!a.current)return;requestAnimationFrame(()=>{a.current&&a.current.scrollTo({top:a.current.scrollHeight,behavior:pe})});const Oe=setTimeout(()=>{a.current&&a.current.scrollTo({top:a.current.scrollHeight,behavior:pe})},100),He=setTimeout(()=>{a.current&&a.current.scrollTo({top:a.current.scrollHeight,behavior:pe})},500);return()=>{clearTimeout(Oe),clearTimeout(He)}};L.useEffect(()=>()=>{},[]),Mk("*",pe=>{console.log("WebSocket event received:",pe),S(Oe=>Me(te({},Oe),{eventsReceived:Oe.eventsReceived+1,lastEventTime:new Date().toISOString()}))}),Mk("message_created",pe=>{console.log("Raw message_created event received:",pe),console.log(`Current channelId: ${e}, Event channelId: ${pe.channel_id}`),pe.channel_id===e?(console.log("New message received via WebSocket for this channel:",pe),D(Oe=>{if(!Oe||!Oe.message)return Oe;const He=Oe.message.messages||[],We=He.findIndex(At=>At.name===pe.message_details.name);if(We===-1){const At=[...He,pe.message_details];return At.sort((vt,ze)=>new Date(vt.creation).getTime()-new Date(ze.creation).getTime()),Me(te({},Oe),{message:Me(te({},Oe.message),{messages:At,has_new_messages:!1,has_old_messages:Oe.message.has_old_messages})})}const st=[...He];return st[We]=pe.message_details,Me(te({},Oe),{message:Me(te({},Oe.message),{messages:st,has_new_messages:!1,has_old_messages:Oe.message.has_old_messages})})},{revalidate:!1}).then(()=>{a.current&&(a.current.scrollTop+a.current.clientHeight>=a.current.scrollHeight-100||pe.message_details.owner===g)&&W("smooth")})):console.log("Message received for different channel - ignoring")});const J=pe=>Ht(null,null,function*(){if(pe.preventDefault(),!(!n.trim()||!e)){console.log(`Attempting to send message to channel: ${e}`);try{const Oe={content:n,owner:g,creation:new Date().toISOString(),name:`temp-${Date.now()}`,message_type:"Text"};D(We=>{if(!We||!We.message)return We;const At=[...We.message.messages||[],Oe];return At.sort((vt,ze)=>new Date(vt.creation).getTime()-new Date(ze.creation).getTime()),Me(te({},We),{message:Me(te({},We.message),{messages:At})})},{revalidate:!1}),i(""),console.log("Sending message to server...");const He=yield B({channel_id:e,text:n,message_type:"DM"});console.log("Server response:",He)}catch(Oe){console.error("Failed to send message:",Oe),u("Failed to send message"),D(He=>!He||!He.message?He:Me(te({},He),{message:Me(te({},He.message),{messages:He.message.messages.filter(We=>!We.name.startsWith("temp-"))})}),{revalidate:!1})}}}),Z=pe=>pe?new Date(pe).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",K=pe=>{if(!pe)return"";const Oe=new Date(pe),He=new Date,We=new Date(He);return We.setDate(We.getDate()-1),Oe.toDateString()===He.toDateString()?"Today":Oe.toDateString()===We.toDateString()?"Yesterday":Oe.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"})},le=()=>{var st;const pe=((st=N==null?void 0:N.message)==null?void 0:st.messages)||[],Oe=[];let He=null,We=[];return pe.forEach(At=>{const vt=At.creation?K(At.creation):"";vt!==He?(We.length>0&&Oe.push({date:He,messages:We}),He=vt,We=[At]):We.push(At)}),We.length>0&&Oe.push({date:He,messages:We}),Oe};if(E)return l.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading messages..."});if(o)return l.jsxs("div",{className:"text-red-500 p-4",children:["Error: ",o]});const _e=le();return l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"bg-gray-100 p-3 border-b",children:[l.jsxs("h2",{className:"font-medium",children:["Conversation with ",t]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.jsxs("span",{children:["WebSocket: ",_.socketConnected?"✅ Connected":"❌ Disconnected"]})," |",l.jsxs("span",{children:[" Events: ",_.eventsReceived]}),_.lastEventTime&&l.jsxs("span",{children:[" | Last event: ",new Date(_.lastEventTime).toLocaleTimeString()]})]})]}),l.jsxs("div",{ref:a,className:"flex-1 overflow-y-auto p-4",children:[!((de=N==null?void 0:N.message)!=null&&de.messages)||N.message.messages.length===0?l.jsx("div",{className:"text-center text-gray-500 my-8",children:"No messages yet. Start a conversation!"}):_e.map((pe,Oe)=>l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-center",children:l.jsx("span",{className:"text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded-full",children:pe.date})}),pe.messages.map((He,We)=>{var st,At;return l.jsx("div",{id:`message-${He.name}`,className:`mt-4 flex ${He.owner===g?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-3/4 p-3 rounded-lg ${He.owner===g?`bg-blue-500 text-white rounded-br-none ${(st=He.name)!=null&&st.startsWith("temp-")?"opacity-70":""}`:"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[l.jsx("div",{children:He.content}),l.jsxs("div",{className:`text-xs mt-1 ${He.owner===g?"text-blue-100":"text-gray-500"}`,children:[Z(He.creation),((At=He.name)==null?void 0:At.startsWith("temp-"))&&" (sending...)"]})]})},He.name||`temp-${We}`)})]},Oe)),l.jsx("div",{ref:c})]}),l.jsxs("form",{onSubmit:J,className:"border-t p-3 flex",children:[l.jsx("input",{type:"text",value:n,onChange:pe=>i(pe.target.value),placeholder:"Type a message...",className:"flex-1 p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-300"}),l.jsx("button",{type:"submit",disabled:$||!n.trim(),className:"bg-blue-500 text-white px-4 py-2 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:bg-blue-300",children:"Send"})]})]})},tJ=()=>{var A;const[e,t]=L.useState(null),[n,i]=L.useState(null),[o,u]=L.useState(window.innerWidth<768),[c,a]=L.useState(!0),{data:g}=md("raven.api.raven_users.get_current_raven_user");console.log("User data",g);const _=(A=g==null?void 0:g.message)==null?void 0:A.user;L.useEffect(()=>{const E=()=>{const D=window.innerWidth<768;u(D),D||a(!0)};return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const S=(E,D)=>{t(E),i(D),o&&a(!1)},N=()=>{a(!0)};return _?l.jsxs("div",{className:"h-screen flex flex-col",children:[l.jsxs("div",{className:"bg-white shadow-sm border-b p-3 flex justify-between items-center",children:[l.jsx("h1",{className:"text-xl font-bold",children:"Raven Chat"}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Logged in as: ",_]})]}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[(!o||c)&&l.jsx("div",{className:`${o?"w-full":"w-1/3 border-r"} bg-white`,children:l.jsx(JQ,{onSelectChannel:S,currentUser:_})}),(!o||!c)&&l.jsx("div",{className:`${o?"w-full":"w-2/3"} bg-white flex flex-col`,children:e?l.jsxs(l.Fragment,{children:[o&&l.jsx("button",{onClick:N,className:"p-2 m-2 bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center",children:"←"}),l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(eJ,{channelId:e,channelName:n})})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a conversation to start chatting"})})]})]}):l.jsx("div",{className:"p-4 text-center",children:"Loading user data..."})},jE=()=>l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-8",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-transparent bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 animate-spin",children:l.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 m-1"})}),l.jsx("div",{className:"absolute inset-4 w-24 h-24 rounded-full bg-gradient-to-r from-cyan-400 to-purple-400 animate-pulse opacity-80 flex items-center justify-center",children:l.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:l.jsx("div",{className:"w-3 h-3 rounded-full bg-white animate-bounce"})})}),l.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 rounded-full bg-pink-400 animate-ping"}),l.jsx("div",{className:"absolute -top-1 -right-3 w-3 h-3 rounded-full bg-cyan-400 animate-ping animation-delay-300"}),l.jsx("div",{className:"absolute -bottom-2 -left-3 w-2 h-2 rounded-full bg-purple-400 animate-ping animation-delay-700"}),l.jsx("div",{className:"absolute -bottom-1 -right-2 w-3 h-3 rounded-full bg-yellow-400 animate-ping animation-delay-1000"}),l.jsxs("div",{className:"absolute inset-0 animate-spin animation-duration-3000",children:[l.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 rounded-full bg-gradient-to-r from-pink-400 to-red-400"}),l.jsx("div",{className:"absolute top-1/2 -right-1 transform -translate-y-1/2 w-2 h-2 rounded-full bg-gradient-to-r from-cyan-400 to-blue-400"}),l.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-2 h-2 rounded-full bg-gradient-to-r from-green-400 to-emerald-400"}),l.jsx("div",{className:"absolute top-1/2 -left-1 transform -translate-y-1/2 w-2 h-2 rounded-full bg-gradient-to-r from-yellow-400 to-orange-400"})]})]}),l.jsx("div",{className:"absolute bottom-1/3 left-1/2 transform -translate-x-1/2",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("div",{className:"text-white font-semibold text-lg animate-pulse",children:"Loading"}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce animation-delay-300"}),l.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce animation-delay-700"})]})]})}),l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 rounded-full bg-purple-500/10 animate-pulse animation-delay-500"}),l.jsx("div",{className:"absolute top-40 right-32 w-24 h-24 rounded-full bg-cyan-500/10 animate-pulse animation-delay-1000"}),l.jsx("div",{className:"absolute bottom-32 left-40 w-20 h-20 rounded-full bg-pink-500/10 animate-pulse animation-delay-1500"}),l.jsx("div",{className:"absolute bottom-20 right-20 w-28 h-28 rounded-full bg-yellow-500/10 animate-pulse animation-delay-2000"})]}),l.jsx("style",{jsx:!0,children:`
        .animation-delay-300 {
          animation-delay: 0.3s;
        }
        .animation-delay-500 {
          animation-delay: 0.5s;
        }
        .animation-delay-700 {
          animation-delay: 0.7s;
        }
        .animation-delay-1000 {
          animation-delay: 1s;
        }
        .animation-delay-1500 {
          animation-delay: 1.5s;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-duration-3000 {
          animation-duration: 3s;
        }
      `})]}),nJ=()=>{const[e,t]=L.useState(null),[n,i]=L.useState(null),[o,u]=L.useState(!1),[c,a]=L.useState(null),{id:g}=tC();return L.useEffect(()=>{Ht(null,null,function*(){var S;u(!0),a(null);try{const A=yield(yield fetch("https://lblerp.anantdv.com/api/method/erpnext.allow_login.login",{method:"GET",headers:{"Content-Type":"application/json"},redirect:"follow"})).json(),E=(S=A==null?void 0:A.message)==null?void 0:S.sid;if(t(E),E){const B=yield(yield fetch(`https://lblerp.anantdv.com/api/resource/Prospect Details/${g}?sid=${E}`,{method:"GET",headers:new Headers,redirect:"follow"})).json();B.data?i(B.data):a(new Error("No prospect data found"))}else a(new Error("Session ID not found"))}catch(N){a(N)}finally{u(!1)}})},[g]),n&&(console.log(n),console.log(`https://lblerp.anantdv.com${n.profile_image}`)),o?l.jsx(jE,{}):c?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-500 text-xl mb-2",children:"⚠️"}),l.jsx("p",{className:"text-red-600",children:"Error loading prospect details"}),l.jsx("p",{className:"text-gray-500 text-sm mt-2",children:c.message})]})}):n?l.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("div",{className:"mb-8",children:l.jsx("h1",{className:"text-3xl font-bold text-blue-600 text-center",children:"Prospect Profile"})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsx("div",{className:"relative",children:l.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:n.profile_image?l.jsx("img",{src:`https://lblerp.anantdv.com${n.profile_image}?sid=${e}`,alt:"Profile",className:"w-full h-full object-cover"}):l.jsx(Dm,{className:"w-8 h-8 text-gray-400"})})}),l.jsx("div",{children:l.jsxs("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:[n==null?void 0:n.title," ",n==null?void 0:n.first_name," ",n==null?void 0:n.last_name]})})]})}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-6",children:"Basic Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Title"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.title||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Gender"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.gender||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"First Name"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.first_name||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Nationality"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.nationality||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Middle Name"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.middle_name||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Resident Status"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.resident_status||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Last Name"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.last_name||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Marital Status"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.marital_status||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Date of Birth"}),l.jsxs("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700 flex items-center",children:[l.jsx(xc,{className:"w-4 h-4 mr-2 text-gray-400"}),n.date_of_birth?new Date(n.date_of_birth).toLocaleDateString():"Not provided"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Origin"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.origin||"Not specified"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-blue-600 mb-6 flex items-center",children:[l.jsx(fm,{className:"w-5 h-5 mr-2"}),"Permanent Address"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Portion No/Lot No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.portion_nolot_no||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Province"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.province||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Village/Street"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.villagestreet||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Country"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.country||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Town"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.town||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"PO Box"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.po_box||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"District"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.district||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Postal Code"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.postal_code||"Not provided"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-blue-600 mb-6 flex items-center",children:[l.jsx(fm,{className:"w-5 h-5 mr-2"}),"Current Location / Correspondence Address"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Portion No/Lot No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.portion_lot_no||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Province"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.province1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Village/Street"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.village_street||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Country"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.country1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Town"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.town1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"PO Box"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.po_box1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"District"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.district1||"Not provided"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Postal Code"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.postal_code1||"Not provided"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-6",children:"Contact Number"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Office No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.office_no||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Mobile No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.mobile_no||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Home"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.home||"Not provided"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-6",children:"Email Id"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Office Email"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.office_email||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Personal Email"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.personal_email||"Not specified"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-6",children:"Preferred Secured Communication"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Phone No"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.phone_no||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Email Id"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:n.email_id||"Not specified"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-blue-600 mb-6 flex items-center",children:[l.jsx(vm,{className:"w-5 h-5 mr-2"}),"Identification Details"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"No."}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Identification Type"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Number"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Attached"})]})}),l.jsx("tbody",{children:n.dd&&n.dd.length>0?n.dd.map((_,S)=>l.jsxs("tr",{className:"border-b border-gray-100",children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:S+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.identification_type||"Not specified"}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.number||"Not provided"}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.attached?l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Yes"}):l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"No"})})]},S)):l.jsx("tr",{children:l.jsx("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"No identification records available."})})})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-blue-600 mb-6 flex items-center",children:[l.jsx(vm,{className:"w-5 h-5 mr-2"}),"Biometric Details"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"No."}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Identification Type"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600 border-b",children:"Status"})]})}),l.jsx("tbody",{children:n.identification_type&&n.identification_type.length>0?n.identification_type.map((_,S)=>l.jsxs("tr",{className:"border-b border-gray-100",children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:S+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.identification_type||"Not specified"}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.status==1?l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Yes"}):l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"No"})})]},S)):l.jsx("tr",{children:l.jsx("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"No identification records available."})})})]})})]})]})}):l.jsx(jE,{})},iJ=()=>{const e=ua(),t=pl(),[n,i]=L.useState(!1),[o,u]=L.useState(0),[c,a]=L.useState(!0),[g,_]=L.useState(null),[S,N]=L.useState(!1),[A,E]=L.useState(null),[D,B]=L.useState(!1),$=is.get("user_id"),{data:G}=Ch("User",$),W=pe=>Ht(null,null,function*(){var We;console.log("----------------->",pe);const Oe=new Headers;Oe.append("Authorization","token e0723ce34466cea:79dca2f515d4e2c");const He={method:"GET",headers:Oe,redirect:"follow"};try{const At=yield(yield fetch(`https://lblerp.anantdv.com/api/resource/Patient?filters=[["card_blo_me_number", "=", "${pe}"]]&fields=["*"]&limit=1`,He)).json();console.log("Testing.....Patient",At),((We=At==null?void 0:At.data)==null?void 0:We.length)>0?E(At.data):E([])}catch(st){console.error("Error fetching patient:",st),E([])}});L.useEffect(()=>{G!=null&&G.card_blo_me_number&&W(G==null?void 0:G.card_blo_me_number)},[G]),L.useEffect(()=>{if(D)N(!0);else{const pe=A&&A.length>0;_(pe),N(!1)}},[A,D]);const J=pe=>Ht(null,null,function*(){var We,st;const Oe=new Headers;Oe.append("Authorization","token e0723ce34466cea:79dca2f515d4e2c");const He={method:"GET",headers:Oe,redirect:"follow"};try{const vt=yield(yield fetch(`https://lblerp.anantdv.com/api/resource/Customer?filters=[["cbm_id", "=", "${pe}"]]&limit=1`,He)).json();return(st=(We=vt==null?void 0:vt.data)==null?void 0:We[0])==null?void 0:st.name}catch(At){return console.error("Error fetching customer:",At),null}}),Z=()=>Ht(null,null,function*(){var He,We;if(!(G!=null&&G.card_blo_me_number)){a(!1);return}let pe=G==null?void 0:G.card_blo_me_number,Oe=yield J(pe);if(!Oe){a(!1);return}try{a(!0);const st=new Headers;st.append("Authorization","token e0723ce34466cea:79dca2f515d4e2c"),st.append("Content-Type","application/json");const At=JSON.stringify({party_type:"Customer",party:Oe,loyalty_program:"Card Blo me Points"}),ze=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.accounts.party.get_dashboard_info_m",{method:"POST",headers:st,body:At,redirect:"follow"});if(!ze.ok)throw new Error(`HTTP error! status: ${ze.status}`);const Qe=yield ze.json(),Je=((We=(He=Qe==null?void 0:Qe.message)==null?void 0:He[0])==null?void 0:We.loyalty_points)||0;u(Je)}catch(st){console.log("error in loyalty fetch",st),u(0)}finally{a(!1)}});L.useEffect(()=>{G&&Z()},[G]);const K=[{icon:lC,label:"Social Blo Me",path:"/social_media"},{icon:Dm,label:"Kad Blo Me",path:"/"},{icon:SP,label:"Health Blo Me",path:"/health"},{icon:_P,label:"Bank Blo Me",path:"/bank"},{icon:fC,label:"Trade Blo Me",path:"/trade"},{icon:kP,label:"Academy Blo Me",path:"/academy"},{icon:xP,label:"Legal Blo Me",path:"/legal"},{icon:wP,label:"Career Me",path:"/career"}],le=[{icon:wB,label:"Settings",path:"/settings"},{icon:jF,label:"Help",path:"/help"},{icon:_S,label:"Logout",path:"/logout"}],_e=()=>{i(!n)};L.useEffect(()=>{if(D)N(!0);else{const pe=A&&A.length>0;_(pe),N(!1)}},[A,D]),L.useEffect(()=>{const pe=setTimeout(()=>{S&&(N(!1),_(!1))},1e4);return()=>clearTimeout(pe)},[S]);const de=pe=>Oe=>{if(pe.path==="/social_media"&&(!(G!=null&&G.card_blo_me_number)||G.card_blo_me_number==="")){Oe.preventDefault(),e("/");return}if(pe.path==="/health"){if(Oe.preventDefault(),S)return;if(console.log("patient exists",g),!g){e("/patient-not-found");return}e(pe.path);return}e(pe.path)};return l.jsxs("div",{className:`${n?"w-16":"w-52"} hidden lg:block bg-white rounded-lg shadow-lg transition-all duration-300 ease-in-out relative`,children:[l.jsx("button",{onClick:_e,className:"absolute -right-3 top-6 bg-white border border-gray-200 rounded-full p-1 shadow-md hover:shadow-lg transition-shadow z-10",children:n?l.jsx(vP,{size:16,className:"text-gray-600"}):l.jsx(fF,{size:16,className:"text-gray-600"})}),l.jsx("div",{className:"p-6 flex items-center justify-center",children:n?l.jsx("img",{className:"h-8",src:"/assets/erpnext/images/mycard-logo.png",alt:"MyCard Logo"}):l.jsx("img",{className:"h-16",src:"/assets/erpnext/images/mycard-logo.png",alt:"MyCard Logo"})}),l.jsx("div",{className:`mx-6 mb-6 ${n?"mx-2":""}`,children:n?l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-2 border border-blue-100 flex justify-center",children:l.jsx(Gk,{size:18,className:"text-blue-600"})}),l.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:c?"...":`${o} Credits`})]}):l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[l.jsx("p",{className:"text-center text-xl font-bold text-blue-600",children:(G==null?void 0:G.card_blo_me_number)||""}),l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Gk,{size:18,className:"text-blue-600"}),l.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Wallet Points"})]}),l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c?"...":o}),l.jsx("div",{onClick:()=>e("/loyalty"),className:"text-xs text-gray-500 mt-1 cursor-pointer",children:"Available Balance"})]})}),l.jsxs("nav",{children:[!n&&l.jsx("div",{className:"px-6 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"MENU"}),l.jsx("div",{className:"space-y-1",children:K.map((pe,Oe)=>{const He=t.pathname===pe.path,st=pe.path==="/health"&&S;return l.jsxs(Qs,{to:pe.path,onClick:de(pe),className:`flex items-center gap-3 px-6 py-3 group relative
                  ${He?"text-blue-600 bg-blue-50 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}
                  ${n?"justify-center":""}
                  ${st?"opacity-60 cursor-wait":""}
                `,title:n?pe.label:"",children:[l.jsx(pe.icon,{size:20}),!n&&l.jsxs("span",{className:"flex items-center gap-2",children:[pe.label,st&&l.jsx("div",{className:"w-3 h-3 border border-blue-400 border-t-transparent rounded-full animate-spin"})]}),n&&l.jsxs("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:[pe.label,st&&" (Checking...)"]})]},Oe)})}),!n&&l.jsx("div",{className:"px-6 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 mt-8",children:"GENERAL"}),l.jsx("div",{className:`space-y-1 ${n?"mt-8":""}`,children:le.map((pe,Oe)=>l.jsxs(Qs,{to:pe.path,className:`flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 group relative
                ${n?"justify-center":"gap-3"}
              `,title:n?pe.label:"",children:[l.jsx(pe.icon,{size:20}),!n&&l.jsx("span",{children:pe.label}),n&&l.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:pe.label})]},Oe))})]})]})},sJ=({totalAppointments:e,pastAppointments:t,totalLabReports:n,completedLabTests:i,activeMainTab:o,setActiveMainTab:u})=>(console.log("Active tab.......",o),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[l.jsxs("div",{onClick:()=>u("Total Appointments"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(xS,{className:"w-8 h-8 text-blue-500 group-hover:text-blue-600 transition-colors"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors",children:e})]}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Total Appointments"})]}),l.jsxs("div",{onClick:()=>u("Prescriptions"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(vm,{className:"w-8 h-8 text-green-500 group-hover:text-blue-500 transition-colors"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors",children:t==null?void 0:t.length})]}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Prescriptions"})]}),l.jsxs("div",{onClick:()=>u("Lab Reports"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(hC,{className:"w-8 h-8 text-purple-500 group-hover:text-blue-500 transition-colors"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors",children:n})]}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Lab Reports"})]}),l.jsxs("div",{onClick:()=>u("Vaccinations"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(vS,{className:"w-8 h-8 text-orange-500 group-hover:text-blue-500 transition-colors"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors",children:3})]}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Vaccinations"})]}),l.jsxs("div",{onClick:()=>u("Get Medicine"),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors cursor-pointer group",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx(vS,{className:"w-8 h-8 text-orange-500 group-hover:text-blue-500 transition-colors"})}),l.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 transition-colors",children:"Get Medicine"})]})]})),rJ=({showPatientDetails:e,setShowPatientDetails:t,patientData:n,patientLoading:i,patientError:o,userImage:u,user_name:c})=>{var _,S,N,A,E,D,B,$,G,W,J,Z;const a=()=>c&&c!=="Guest User"?c.split(" ").map(K=>K[0]).join("").toUpperCase():"U",g=K=>{if(!K)return"Not specified";const le=new Date(K),_e=new Date;if(isNaN(le.getTime()))return"Not specified";let de=_e.getFullYear()-le.getFullYear(),pe=_e.getMonth()-le.getMonth(),Oe=_e.getDate()-le.getDate();return pe<0&&(de--,pe+=12),Oe<0&&(pe--,pe<0&&(de--,pe+=12)),de===0&&pe===0?"Less than 1 month":de===0?`${pe} month${pe!==1?"s":""}`:pe===0?`${de} yr${de!==1?"s":""}`:`${de} yr${de!==1?"s":""} ${pe} month${pe!==1?"s":""}`};return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[l.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>t(!e),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[u?l.jsx("div",{className:"w-14 h-14 overflow-hidden rounded-full border-2 border-blue-200 shadow-lg",children:l.jsx("img",{src:u,alt:"Profile",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold shadow-lg",children:a()}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Patient Information"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Click to view your medical profile"})]})]}),l.jsx(vP,{className:`w-5 h-5 text-gray-400 transition-transform ${e?"rotate-90":""}`})]})}),e&&l.jsx("div",{className:"px-6 pb-6 border-t border-gray-100",children:i?l.jsx("div",{className:"mt-4 flex items-center justify-center py-8",children:l.jsx("div",{className:"text-gray-500",children:"Loading patient information..."})}):o?l.jsx("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:l.jsxs("p",{className:"text-red-600 text-sm",children:["Error loading patient data: ",o.message]})}):n&&n.length>0?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Full Name"}),l.jsx("p",{className:"font-medium text-gray-800",children:(_=n[0])==null?void 0:_.patient_name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Patient ID"}),l.jsx("p",{className:"font-medium text-gray-800",children:(S=n[0])==null?void 0:S.name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Age"}),l.jsx("p",{className:"font-medium text-gray-800",children:g((N=n[0])==null?void 0:N.dob)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Blood Group"}),l.jsx("p",{className:"font-medium text-gray-800",children:((A=n[0])==null?void 0:A.blood_group)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Gender"}),l.jsx("p",{className:"font-medium text-gray-800",children:((E=n[0])==null?void 0:E.sex)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Contact"}),l.jsx("p",{className:"font-medium text-gray-800",children:((D=n[0])==null?void 0:D.phone)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Email"}),l.jsx("p",{className:"font-medium text-gray-800",children:(B=n[0])==null?void 0:B.email})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emergency Contact"}),l.jsx("p",{className:"font-medium text-gray-800",children:(($=n[0])==null?void 0:$.mobile)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Occupation"}),l.jsx("p",{className:"font-medium text-gray-800",children:((G=n[0])==null?void 0:G.occupation)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Marital Status"}),l.jsx("p",{className:"font-medium text-gray-800",children:((W=n[0])==null?void 0:W.marital_status)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Customer Group"}),l.jsx("p",{className:"font-medium text-gray-800",children:((J=n[0])==null?void 0:J.customer_group)||"Not specified"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Card Blo Me Number"}),l.jsx("p",{className:"font-medium text-gray-800",children:((Z=n[0])==null?void 0:Z.card_blo_me_number)||"Not assigned"})]})]}):l.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:l.jsxs("p",{className:"text-yellow-800 text-sm",children:[l.jsx("strong",{children:"Note:"})," No patient record found. Please complete your patient registration to see detailed medical information."]})})})]})},hD=(e,t)=>Ht(null,null,function*(){try{if(console.log("Downloading prescription for appointment:",e),t){const n=`https://lblerp.anantdv.com/api/method/frappe.utils.print_format.download_pdf?doctype=Sales Invoice&name=${t}&format=Standard&no_letterhead=0`,i=document.createElement("a");i.href=n,i.download=`Invoice_${t}.pdf`,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)}else{const n=`https://lblerp.anantdv.com/api/method/frappe.utils.print_format.download_pdf?doctype=Patient Appointment&name=${e}&format=Prescription&no_letterhead=0`,i=document.createElement("a");i.href=n,i.download=`Prescription_${e}.pdf`,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)}console.log("Download initiated successfully")}catch(n){console.error("Error downloading prescription:",n),alert("Failed to download prescription. Please try again.")}}),fD=e=>Ht(null,null,function*(){try{console.log("Downloading lab report:",e);const t=`https://lblerp.anantdv.com/api/method/frappe.utils.print_format.download_pdf?doctype=Lab Test&name=${e}&format=Lab Test Report&no_letterhead=0`,n=document.createElement("a");n.href=t,n.download=`LabReport_${e}.pdf`,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log("Lab report download initiated")}catch(t){console.error("Error downloading lab report:",t),alert("Failed to download lab report. Please try again.")}}),aJ=({allAppointments:e,appointmentLoading:t,setShowAppointmentModal:n})=>{console.log("all appointment list.....",e);const i=o=>{hD(o.appointmentId,o.refInvoice)};return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"All Appointments"}),l.jsxs("button",{onClick:()=>n(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[l.jsx(TP,{className:"w-4 h-4 mr-2"}),"Book Appointment"]})]}),l.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t?l.jsx("div",{className:"text-center py-8",children:l.jsx("div",{className:"text-gray-500",children:"Loading appointments..."})}):e&&e.length>0?e.map(o=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(dC,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-800",children:o.doctor}),l.jsx("p",{className:"text-sm text-gray-500",children:o.specialty}),l.jsxs("div",{className:"flex items-center mt-2 text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 mr-1"}),o.date,l.jsx(ly,{className:"w-4 h-4 ml-3 mr-1"}),o.time,o.duration&&l.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",o.duration," min)"]})]}),l.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-600",children:[l.jsx(fm,{className:"w-4 h-4 mr-1"}),o.location]}),l.jsxs("div",{className:"mt-1",children:[l.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["Type: ",o.appointmentType]}),o.refInvoice&&l.jsxs("span",{className:"text-xs text-gray-500",children:["Invoice: ",o.refInvoice]})]})]})]}),l.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[l.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${o.status==="Closed"?"bg-green-100 text-green-700":o.status==="Confirmed"?"bg-blue-100 text-blue-700":o.status==="Open"||o.status==="Scheduled"?"bg-yellow-100 text-yellow-700":o.status==="No Show"?"bg-red-100 text-red-700":(o.status==="Cancelled","bg-gray-100 text-gray-700")}`,children:[o.status==="Closed"?l.jsx(vF,{className:"w-3 h-3 inline mr-1"}):o.status==="No Show"?l.jsx(qk,{className:"w-3 h-3 inline mr-1"}):o.status==="Cancelled"?l.jsx(qk,{className:"w-3 h-3 inline mr-1"}):l.jsx(ly,{className:"w-3 h-3 inline mr-1"}),o.status]}),o.invoiced&&l.jsxs("button",{onClick:()=>i(o),className:"flex items-center px-2 py-1 bg-green-50 text-green-600 rounded text-xs hover:bg-green-100 transition-colors",children:[l.jsx(Av,{className:"w-3 h-3 mr-1"}),"Invoice"]})]})]})},o.id)):l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No appointments found"})})]})},oJ=({activeTab:e,setActiveTab:t,appointmentData:n,appointmentLoading:i,labReports:o,labTestLoading:u,patientData:c,allAppointments:a})=>{const g=[{id:"appointments",label:"All Appointments",icon:xc},{id:"lab-reports",label:"Lab Reports",icon:hC},{id:"medical-history",label:"Medical History",icon:YF},{id:"allergies",label:"Allergies",icon:TB},{id:"medications",label:"Medications",icon:Yb},{id:"vaccinations",label:"Vaccinations",icon:vS}],_=c&&c.length>0&&c[0].medical_history?[{id:1,condition:c[0].medical_history,diagnosedDate:"Not specified",status:"Ongoing",doctor:"Not specified"}]:[{id:1,condition:"No medical history recorded",diagnosedDate:"-",status:"-",doctor:"-"}],S=c&&c.length>0&&c[0].allergies?c[0].allergies.split(`
`).map((D,B)=>({id:B+1,allergen:D.trim(),reaction:"Not specified",severity:"Not specified"})):[{id:1,allergen:"No allergies recorded",reaction:"-",severity:"-"}],N=c&&c.length>0&&c[0].medication?[{id:1,name:c[0].medication,dosage:"As prescribed",frequency:"As prescribed",prescribedBy:"Not specified",startDate:"Not specified"}]:[{id:1,name:"No current medications",dosage:"-",frequency:"-",prescribedBy:"-",startDate:"-"}],A=[{id:1,vaccine:"COVID-19 (Pfizer)",date:"Jan 2025",nextDue:"Jan 2026"},{id:2,vaccine:"Influenza",date:"Oct 2024",nextDue:"Oct 2025"},{id:3,vaccine:"Tetanus",date:"March 2020",nextDue:"March 2030"}],E=()=>{switch(e){case"appointments":return l.jsx("div",{className:"space-y-4",children:i?l.jsx("div",{className:"text-center py-8",children:l.jsx("div",{className:"text-gray-500",children:"Loading appointments..."})}):a&&a.length>0?a.map(D=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:D.doctor}),l.jsx("p",{className:"text-sm text-gray-500",children:D.specialty}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 inline mr-1"}),D.date]}),l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(ly,{className:"w-4 h-4 inline mr-1"}),D.time]}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Type: ",l.jsx("span",{className:"font-medium",children:D.appointmentType})]})]}),D.serviceUnit&&l.jsx("div",{className:"mt-1",children:l.jsxs("span",{className:"text-sm text-gray-600",children:["Unit: ",l.jsx("span",{className:"font-medium",children:D.serviceUnit})]})}),l.jsx("div",{className:"mt-2",children:l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${D.status==="Closed"?"bg-green-100 text-green-700":D.status==="No Show"?"bg-red-100 text-red-700":D.status==="Cancelled"?"bg-gray-100 text-gray-700":D.status==="Confirmed"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:D.status})})]}),D.invoiced&&l.jsxs("button",{onClick:()=>hD(D.appointmentId,D.refInvoice),className:"flex items-center px-3 py-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition-colors text-sm",children:[l.jsx(Av,{className:"w-4 h-4 mr-2"}),"Invoice"]})]})},D.id)):l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No appointments found"})});case"lab-reports":return l.jsx("div",{className:"space-y-4",children:u?l.jsx("div",{className:"text-center py-8",children:l.jsx("div",{className:"text-gray-500",children:"Loading lab reports..."})}):o&&o.length>0?o.map(D=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:D.testName}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Ordered by: ",D.doctor]}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 inline mr-1"}),D.date]}),l.jsx("span",{className:`text-sm font-medium ${D.status==="Completed"||D.status==="Normal"?"text-green-600":D.status==="Pending"?"text-yellow-600":"text-orange-600"}`,children:D.status}),D.department&&l.jsxs("span",{className:"text-sm text-gray-600",children:["Dept: ",D.department]})]}),D.invoiced&&l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700 mt-1",children:"Invoiced"})]}),D.downloadable&&l.jsxs("button",{onClick:()=>fD(D.labTestId),className:"flex items-center px-3 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors text-sm",children:[l.jsx(Av,{className:"w-4 h-4 mr-2"}),"Download"]})]})},D.id)):l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No lab reports found"})});case"medical-history":return l.jsx("div",{className:"space-y-4",children:_.map(D=>l.jsxs("div",{className:"border border-gray-100 rounded-lg p-4",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:D.condition}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Diagnosed by ",D.doctor]}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 inline mr-1"}),D.diagnosedDate]}),l.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D.status==="Ongoing"?"bg-red-100 text-red-700":D.status==="Managed"?"bg-yellow-100 text-yellow-700":D.status==="-"?"bg-gray-100 text-gray-700":"bg-green-100 text-green-700"}`,children:D.status})]})]})}),c&&c.length>0&&c[0].surgical_history&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Surgical History:"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c[0].surgical_history})]})]},D.id))});case"allergies":return l.jsx("div",{className:"space-y-4",children:S.map(D=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:D.allergen}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Reaction: ",D.reaction]})]}),l.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${D.severity==="Severe"?"bg-red-100 text-red-700":D.severity==="Moderate"?"bg-yellow-100 text-yellow-700":D.severity==="-"?"bg-gray-100 text-gray-700":"bg-green-100 text-green-700"}`,children:D.severity})]})},D.id))});case"medications":return l.jsx("div",{className:"space-y-4",children:N.map(D=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-gray-800",children:D.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:[D.dosage," - ",D.frequency]}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:["Prescribed by: ",D.prescribedBy]}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Since: ",D.startDate]})]})]})},D.id))});case"vaccinations":return l.jsx("div",{className:"space-y-4",children:A.map(D=>l.jsx("div",{className:"border border-gray-100 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:D.vaccine}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:[l.jsx(xc,{className:"w-4 h-4 inline mr-1"}),"Last: ",D.date]}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Next Due: ",D.nextDue]})]})]}),l.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:"Up to Date"})]})},D.id))});default:return null}};return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Medical Records"}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-6 border-b border-gray-200",children:g.map(D=>{const B=D.icon;return l.jsxs("button",{onClick:()=>t(D.id),className:`flex items-center px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${e===D.id?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[l.jsx(B,{className:"w-4 h-4 mr-2"}),D.label]},D.id)})}),E()]})},lJ=({vitalSignData:e})=>{var n,i,o,u;const t=[{label:"Blood Pressure",value:(i=(n=e[0])==null?void 0:n.bp)==null?void 0:i.split(" ")[0],unit:"mmHg",icon:cC,color:"text-red-500",bgColor:"bg-red-50"},{label:"Heart Rate",value:(o=e[0])==null?void 0:o.pulse,unit:"bpm",icon:y1,color:"text-pink-500",bgColor:"bg-pink-50"},{label:"Temperature",value:(u=e[0])==null?void 0:u.temperature,unit:"°F",icon:IB,color:"text-orange-500",bgColor:"bg-orange-50"},{label:"Oxygen",value:"98",unit:"%",icon:ZB,color:"text-blue-500",bgColor:"bg-blue-50"}];return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Vital Signs"}),l.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Last updated: Today, 9:00 AM"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.map((c,a)=>{const g=c.icon;return l.jsxs("div",{className:`${c.bgColor} rounded-lg p-3`,children:[l.jsx(g,{className:`w-5 h-5 ${c.color} mb-2`}),l.jsx("p",{className:"text-xs text-gray-600",children:c.label}),l.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[c.value," ",l.jsx("span",{className:"text-xs text-gray-500",children:c.unit})]})]},a)})})]})},cJ=({recentLabTests:e,labTestLoading:t,setActiveTab:n})=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Recent Lab Tests"}),l.jsx("button",{onClick:()=>n("lab-reports"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"})]}),l.jsx("div",{className:"space-y-3",children:t?l.jsx("div",{className:"text-center py-4",children:l.jsx("div",{className:"text-gray-500 text-sm",children:"Loading tests..."})}):e&&e.length>0?e.map((i,o)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-800",children:i.name}),l.jsx("p",{className:"text-xs text-gray-500",children:i.date})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:`text-xs font-medium ${i.status==="completed"?i.result==="Normal"?"text-green-600":"text-orange-600":"text-gray-400"}`,children:i.result}),i.status==="completed"&&l.jsxs("button",{onClick:()=>fD(i.labTestId),className:"block mt-1 text-xs text-blue-600 hover:text-blue-700",children:[l.jsx(Av,{className:"w-3 h-3 inline mr-1"}),"Download"]})]})]},o)):l.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No recent lab tests"})})]}),uJ=()=>{const e=[{name:"General Physician",icon:NP,color:"bg-teal-500"},{name:"Neurologist",icon:sF,color:"bg-purple-500"},{name:"ENT",icon:hm,color:"bg-indigo-500"},{name:"Urology",icon:OF,color:"bg-blue-500"},{name:"Cardio",icon:cC,color:"bg-red-500"},{name:"Gynaecology",icon:bS,color:"bg-pink-500"},{name:"Oncology",icon:y1,color:"bg-orange-500"},{name:"Trauma",icon:Ev,color:"bg-yellow-500"}];return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Search by Departments"}),l.jsx("div",{className:"grid grid-cols-4 gap-3",children:e.map((t,n)=>{const i=t.icon;return l.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[l.jsx("div",{className:`w-12 h-12 ${t.color} rounded-lg flex items-center justify-center mb-2 group-hover:scale-110 transition-transform`,children:l.jsx(i,{className:"w-6 h-6 text-white"})}),l.jsx("span",{className:"text-xs text-gray-600",children:t.name})]},n)})})]})},dJ=()=>{const e=t=>{console.log(`Quick action: ${t}`)};return l.jsxs("div",{className:"bg-gray-900 rounded-xl p-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-6 text-white",children:"Quick Actions"}),l.jsxs("div",{className:"relative space-y-4",children:[l.jsx("div",{onClick:()=>e("enroll"),className:"relative bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"New"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Enroll Patient"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(Dm,{className:"w-6 h-6 text-purple-600"})})]})}),l.jsx("div",{onClick:()=>e("emergency"),className:"relative bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 -mt-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"911"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Emergency Call"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(uC,{className:"w-6 h-6 text-red-500"})})]})}),l.jsx("div",{onClick:()=>e("history"),className:"relative bg-gradient-to-r from-green-500 to-teal-500 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 -mt-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"View"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Medical History"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(kF,{className:"w-6 h-6 text-green-500"})})]})}),l.jsx("div",{onClick:()=>e("reminder"),className:"relative bg-gradient-to-r from-orange-500 to-yellow-500 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 -mt-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"Set"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Medicine Reminder"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(yS,{className:"w-6 h-6 text-orange-500"})})]})}),l.jsx("div",{onClick:()=>e("findDoctor"),className:"relative bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl p-6 cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 -mt-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white text-xl font-bold mb-1",children:"Find"}),l.jsx("div",{className:"text-white text-sm opacity-90",children:"Find Doctor"})]}),l.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:l.jsx(ty,{className:"w-6 h-6 text-indigo-500"})})]})})]})]})},hJ=({showModal:e,setShowModal:t,patientData:n,patientId:i,user_name:o,cardBloMeNumber:u,refreshAppointments:c,departmentsData:a,departmentsLoading:g,appointmentTypesData:_,practitionersData:S})=>{const[N,A]=L.useState(!1),[E,D]=L.useState({patient:"",patient_name:"",appointment_for:"Patient",appointment_date:"",appointment_time:"",department:"",practitioner:"",practitioner_name:"",appointment_type:"New",service_unit:"",duration:30,mode_of_payment:"Cash",paid_amount:0,add_video_conferencing:!1,status:"Open"}),[B,$]=L.useState(),[G,W]=L.useState([]),[J,Z]=L.useState(!1);console.log("------------------------------------------",S),xy(),L.useEffect(()=>{e&&n&&n.length>0&&D(pe=>Me(te({},pe),{patient:n[0].name,patient_name:n[0].patient_name||o,appointment_for:"Patient"}))},[e,n,o]);const K=L.useCallback(pe=>{const{name:Oe,value:He,type:We,checked:st}=pe.target;Oe==="appointment_date"&&_e(E.practitioner,He),Oe==="practitioner"&&($(He),_e(He,E.appointment_date)),D(At=>Me(te({},At),{[Oe]:We==="checkbox"?st:He})),Oe==="department"&&D(At=>Me(te({},At),{practitioner:"",practitioner_name:""})),Oe==="practitioner"&&($(He),D(At=>Me(te({},At),{practitioner_name:He})))},[E.practitioner,E.appointment_date]),le=L.useCallback(pe=>Ht(null,null,function*(){if(pe.preventDefault(),pe.stopPropagation(),!N){A(!0),console.log("appointment form------>",E);try{const Oe={doctype:"Patient Appointment",patient:E.patient,patient_name:E.patient_name,appointment_date:E.appointment_date,appointment_time:E.appointment_time,department:E.department,practitioner:E.practitioner,appointment_type:E.appointment_type||"New",duration:parseInt(E.duration),status:"Open"},He=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.create_appointment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 73fb1eefb9d16d3:5b665ea071ecae4"},credentials:"omit",body:JSON.stringify({appointmentForm1:Oe})});if(!He.ok){const st=yield He.text()}const We=yield He.json();console.log("patient created succesfully",We),alert("Appointment booked successfully!"),c&&c(),t(!1),de()}catch(Oe){console.error("Error creating appointment:",Oe),alert("Failed to book appointment. Please try again.")}finally{A(!1)}return!1}}),[E,c,N,t]),_e=L.useCallback((pe,Oe)=>Ht(null,null,function*(){var He,We;if(console.log("Practitioner:",pe,"Date:",Oe),!pe||!Oe){W([]);return}Z(!0);try{const st=new Headers;st.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),st.append("Content-Type","application/json"),st.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const At=JSON.stringify({practitioner:pe,date:Oe}),Qe=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.healthcare.doctype.patient_appointment.patient_appointment.get_availability_data",{method:"POST",headers:st,body:At,redirect:"follow"});if(!Qe.ok)throw new Error(`HTTP error! status: ${Qe.status}`);const Je=yield Qe.text(),Pt=JSON.parse(Je);console.log("get availability data.........",Pt),Pt&&Pt.message&&Pt.message.slot_details?W((We=(He=Pt==null?void 0:Pt.message)==null?void 0:He.slot_details[0])==null?void 0:We.avail_slot):W([])}catch(st){console.log(st),W([])}finally{Z(!1)}})),de=L.useCallback(()=>{D({patient:"",patient_name:"",appointment_for:"Patient",appointment_date:"",appointment_time:"",department:"",practitioner:"",practitioner_name:"",appointment_type:"New",service_unit:"",duration:30,mode_of_payment:"Cash",paid_amount:0,add_video_conferencing:!1,status:"Open"}),W([]),Z(!1)},[]);return e?l.jsx("div",{className:"fixed inset-0 bg-transparent backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto animate-in slide-in-from-bottom duration-300 border border-gray-200",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(xc,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Book New Appointment"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[o," with Dr. ",E.practitioner_name||"..."]})]})]}),l.jsx("button",{onClick:()=>{t(!1),de()},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Sx,{className:"w-5 h-5 text-gray-500"})})]}),l.jsxs("form",{onSubmit:le,className:"p-6",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[l.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-3 flex items-center",children:[l.jsx(Dm,{className:"w-4 h-4 mr-2"}),"Patient Details"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name"}),l.jsx("input",{type:"text",name:"patient_name",value:E.patient_name,readOnly:!0,className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient ID"}),l.jsx("input",{type:"text",name:"patient",value:E.patient||"Not Registered",readOnly:!0,className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-700"})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[l.jsx(dC,{className:"w-4 h-4 mr-2"}),"Consultation Details"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Department ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{name:"department",value:E.department,onChange:K,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-100",children:[l.jsx("option",{value:"",children:"Select Department"}),a&&a.map(pe=>l.jsx("option",{value:pe.name,children:pe.name},pe.name))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Practitioner ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{name:"practitioner",value:E.practitioner,onChange:K,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-100",children:[l.jsx("option",{value:"",children:"Select Practitioner"}),S&&S.map(pe=>l.jsx("option",{value:pe.name,children:pe.name},pe.name))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Appointment Date ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"date",name:"appointment_date",value:E.appointment_date,onChange:K,min:new Date().toISOString().split("T")[0],required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appointment Type"}),l.jsx("select",{name:"appointment_type",value:E.appointment_type,onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-100",children:_&&_.map(pe=>l.jsx("option",{value:pe.name,children:pe.name},pe.name))})]})]})]}),l.jsx("div",{className:"space-y-6",children:E.practitioner&&E.appointment_date&&l.jsxs("div",{children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[l.jsx(xS,{className:"w-4 h-4 mr-2"}),E.practitioner_name?`${E.practitioner_name}'s Schedule`:"Available Time Slots"]}),J?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{className:"ml-3 text-gray-600",children:"Loading available slots..."})]}):G.length>0?l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3",children:G.map((pe,Oe)=>(typeof pe=="string"||pe.slot_name||pe.avail_slot||pe.time,l.jsx("button",{type:"button",onClick:()=>{D(He=>Me(te({},He),{appointment_time:pe==null?void 0:pe.from_time}))},className:`px-4 py-2.5 rounded-lg border-2 text-sm font-medium transition-all cursor-pointer
                             ${E.appointment_time===(pe==null?void 0:pe.from_time)?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:(pe==null?void 0:pe.from_time)||"N/A"},Oe)))}):l.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsx(eB,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),l.jsx("p",{className:"text-gray-600",children:"No available slots for this date"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Please select a different date or practitioner"})]})]})}),l.jsx("div",{className:"space-y-6"}),l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 flex items-center justify-end space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>{t(!1),de()},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center",children:N?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Booking..."]}):l.jsxs(l.Fragment,{children:[l.jsx(xS,{className:"w-4 h-4 mr-2"}),"Book Appointment"]})})]})]})]})}):null},fJ=({prescriptions:e=[],selectedPrescription:t,setSelectedPrescription:n})=>{const i=ua();console.log("selected Prescription....",t);const o=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",u=c=>c?c.slice(0,5):"";return l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsxs("div",{className:"w-96 bg-white border-r border-gray-200 overflow-y-auto",children:[l.jsxs("div",{className:"p-6 border-b border-gray-200",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Prescriptions"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[e.length," total"]})]}),l.jsx("div",{className:"p-4 space-y-3",children:e.map(c=>l.jsxs("div",{onClick:()=>n(c),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${(t==null?void 0:t.name)===c.name?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:c.patient_name}),l.jsx("span",{className:"text-xs text-gray-500",children:o(c.encounter_date)})]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[l.jsx(Dm,{size:14,className:"mr-2"}),l.jsx("span",{children:c.practitioner_name})]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[l.jsx(Yb,{size:14,className:"mr-2"}),l.jsx("span",{className:"truncate",children:c.drug_name})]}),l.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-100",children:[l.jsx("span",{className:"text-xs text-blue-600 font-medium",children:c.appointment}),l.jsx("span",{className:"text-xs text-gray-500",children:c.dosage_form})]})]},c.name))})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:t?l.jsx("div",{className:"p-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Prescription Details"}),l.jsx("span",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:t.docstatus===1?"Submitted":"Draft"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Name"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.patient_name}),l.jsx("p",{className:"text-sm text-gray-600",children:t.patient})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Patient Details"}),l.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[t.patient_sex,t.patient_age&&`, ${t.patient_age} years`]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Prescribed By"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.practitioner_name}),l.jsx("p",{className:"text-sm text-gray-600",children:t.practitioner})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Appointment"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.appointment||"N/A"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Encounter Date"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(xc,{size:18,className:"mr-2 text-gray-600"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:o(t.encounter_date)})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Encounter Time"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(ly,{size:18,className:"mr-2 text-gray-600"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:u(t.encounter_time)})]})]})]})]}),(t.company||t.medical_department)&&l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[l.jsx(y1,{className:"mr-2",size:22}),"Organization Details"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.company&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.company})]}),t.medical_department&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Department"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.medical_department})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[l.jsx(Yb,{className:"mr-2",size:22}),"Medication Details"]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-lg text-gray-800 mb-4",children:t.drug_name}),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Drug Code"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.drug_code})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Dosage"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.dosage})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Dosage Form"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.dosage_form})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Period"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.period})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Interval"}),l.jsxs("p",{className:"text-gray-700 font-medium",children:[t.interval," ",t.interval_uom]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Update Schedule"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.update_schedule?"Yes":"No"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[l.jsx(MF,{className:"mr-2",size:22}),"Additional Information"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Print Diagnosis"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.diagnosis_in_print?"Yes":"No"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Print Symptoms"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.symptoms_in_print?"Yes":"No"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Invoiced"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.invoiced?"Yes":"No"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Record ID"}),l.jsx("p",{className:"text-gray-700 font-medium",children:t.name})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[l.jsx(Yb,{className:"mr-2",size:22}),"Prescription Attachment"]}),l.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:l.jsx("img",{src:`https://lblerp.anantdv.com${t==null?void 0:t.attach_prescription}`,alt:""})})]}),l.jsx("div",{className:"w-full flex items-center justify-center ",children:l.jsx("button",{onClick:()=>i("/get_medicine"),className:"py-3 px-5 bg-blue-200 rounded-md font-medium cursor-pointer",children:"Get Medicine"})})]})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx(vm,{size:64,className:"mx-auto text-gray-300 mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Prescription Selected"}),l.jsx("p",{className:"text-gray-500",children:"Select a prescription from the list to view details"})]})})})]})};function pJ({city:e,setCity:t}){const[n,i]=L.useState(!0),[o,u]=L.useState(!1),c=()=>{i(!1),u(!0)},a=()=>{t(""),console.log("City submitted:",e),u(!1)},g=()=>{u(!1),t("")};return l.jsxs("div",{className:"min-h-screen bg-gray-100 p-8",children:[n&&l.jsx("div",{className:"fixed inset-0 backdrop-blur-md flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden",children:[l.jsx("div",{className:"bg-red-500 text-white px-6 py-4 flex items-center justify-between",children:l.jsx("h2",{className:"text-xl font-semibold",children:"Warning"})}),l.jsxs("div",{className:"p-8 text-center",children:[l.jsx("p",{className:"text-red-500 text-lg font-medium mb-6",children:"Please Enable Location"}),l.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-600 text-white font-medium px-8 py-3 rounded-lg shadow-md transition-colors",children:"Done"})]})]})}),o&&l.jsx("div",{className:"fixed inset-0 backdrop-blur-md flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-8",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Help us serve you better!"}),l.jsx("div",{className:"flex justify-center mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(fm,{size:80,className:"text-yellow-500 fill-yellow-500"}),l.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full"}),l.jsx("div",{className:"absolute top-8 right-2 w-4 h-4 bg-yellow-300 rounded-full"}),l.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-10 h-10 bg-teal-700 rounded-full border-4 border-white"})]})}),l.jsx("p",{className:"text-gray-700 mb-6",children:"Please provide us your delivery city name for faster and seamless deliveries."}),l.jsxs("div",{className:"mb-2",children:[l.jsx("label",{className:"block text-gray-800 font-medium mb-2",children:"Delivery City"}),l.jsx("input",{type:"text",placeholder:"Enter city name here",value:e,onChange:_=>t(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"*Enter your city name to proceed"}),l.jsxs("div",{className:"flex gap-4 justify-end",children:[l.jsx("button",{onClick:g,className:"px-6 py-2 text-teal-600 font-medium hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),l.jsx("button",{onClick:a,className:"px-6 py-2 bg-teal-600 hover:bg-teal-700 text-white font-medium rounded-lg transition-colors",children:"Submit"})]})]})})]})}var dv={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.9.0/LICENSE.txt
 */var mJ=dv.exports,CE;function gJ(){return CE||(CE=1,function(e,t){(function(n,i){e.exports=i()})(mJ,function(){var n={},i={};function o(c,a,g){if(i[c]=g,c==="index"){var _="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",S={};return i.shared(S),i.index(n,S),typeof window!="undefined"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([_],{type:"text/javascript"}))),n}}o("shared",["exports"],function(c){function a(f,r,d,y){return new(d||(d=Promise))(function(v,C){function M(V){try{I(y.next(V))}catch(H){C(H)}}function R(V){try{I(y.throw(V))}catch(H){C(H)}}function I(V){var H;V.done?v(V.value):(H=V.value,H instanceof d?H:new d(function(X){X(H)})).then(M,R)}I((y=y.apply(f,r||[])).next())})}function g(f,r){this.x=f,this.y=r}function _(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var S,N;typeof SuppressedError=="function"&&SuppressedError,g.prototype={clone(){return new g(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,r){return this.clone()._rotateAround(f,r)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const r=f.x-this.x,d=f.y-this.y;return r*r+d*d},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,r){return Math.atan2(this.x*r-this.y*f,this.x*f+this.y*r)},_matMult(f){const r=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=r,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const r=Math.cos(f),d=Math.sin(f),y=d*this.x+r*this.y;return this.x=r*this.x-d*this.y,this.y=y,this},_rotateAround(f,r){const d=Math.cos(f),y=Math.sin(f),v=r.y+y*(this.x-r.x)+d*(this.y-r.y);return this.x=r.x+d*(this.x-r.x)-y*(this.y-r.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:g},g.convert=function(f){if(f instanceof g)return f;if(Array.isArray(f))return new g(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new g(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var A=function(){if(N)return S;function f(r,d,y,v){this.cx=3*r,this.bx=3*(y-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(v-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=d,this.p2x=y,this.p2y=v}return N=1,S=f,f.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,d){if(d===void 0&&(d=1e-6),r<0)return 0;if(r>1)return 1;for(var y=r,v=0;v<8;v++){var C=this.sampleCurveX(y)-r;if(Math.abs(C)<d)return y;var M=this.sampleCurveDerivativeX(y);if(Math.abs(M)<1e-6)break;y-=C/M}var R=0,I=1;for(y=r,v=0;v<20&&(C=this.sampleCurveX(y),!(Math.abs(C-r)<d));v++)r>C?R=y:I=y,y=.5*(I-R)+R;return y},solve:function(r,d){return this.sampleCurveY(this.solveCurveX(r,d))}},S}(),E=_(A);let D,B;function $(){return D==null&&(D=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),D}function G(){if(B==null&&(B=!1,$())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let y=0;y<5*5;y++){const v=4*y;r.fillStyle=`rgb(${v},${v+1},${v+2})`,r.fillRect(y%5,Math.floor(y/5),1,1)}const d=r.getImageData(0,0,5,5).data;for(let y=0;y<5*5*4;y++)if(y%4!=3&&d[y]!==y){B=!0;break}}}return B||!1}var W=1e-6,J=typeof Float32Array!="undefined"?Float32Array:Array;function Z(){var f=new J(9);return J!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function K(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function le(){var f=new J(3);return J!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function _e(f){var r=f[0],d=f[1],y=f[2];return Math.sqrt(r*r+d*d+y*y)}function de(f,r,d){var y=new J(3);return y[0]=f,y[1]=r,y[2]=d,y}function pe(f,r,d){return f[0]=r[0]+d[0],f[1]=r[1]+d[1],f[2]=r[2]+d[2],f}function Oe(f,r,d){return f[0]=r[0]*d,f[1]=r[1]*d,f[2]=r[2]*d,f}function He(f,r,d){var y=r[0],v=r[1],C=r[2],M=d[0],R=d[1],I=d[2];return f[0]=v*I-C*R,f[1]=C*M-y*I,f[2]=y*R-v*M,f}var We,st=_e;function At(f,r,d){var y=r[0],v=r[1],C=r[2],M=r[3];return f[0]=d[0]*y+d[4]*v+d[8]*C+d[12]*M,f[1]=d[1]*y+d[5]*v+d[9]*C+d[13]*M,f[2]=d[2]*y+d[6]*v+d[10]*C+d[14]*M,f[3]=d[3]*y+d[7]*v+d[11]*C+d[15]*M,f}function vt(){var f=new J(4);return J!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function ze(f,r,d,y){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",C=Math.PI/360;r*=C,y*=C,d*=C;var M=Math.sin(r),R=Math.cos(r),I=Math.sin(d),V=Math.cos(d),H=Math.sin(y),X=Math.cos(y);switch(v){case"xyz":f[0]=M*V*X+R*I*H,f[1]=R*I*X-M*V*H,f[2]=R*V*H+M*I*X,f[3]=R*V*X-M*I*H;break;case"xzy":f[0]=M*V*X-R*I*H,f[1]=R*I*X-M*V*H,f[2]=R*V*H+M*I*X,f[3]=R*V*X+M*I*H;break;case"yxz":f[0]=M*V*X+R*I*H,f[1]=R*I*X-M*V*H,f[2]=R*V*H-M*I*X,f[3]=R*V*X+M*I*H;break;case"yzx":f[0]=M*V*X+R*I*H,f[1]=R*I*X+M*V*H,f[2]=R*V*H-M*I*X,f[3]=R*V*X-M*I*H;break;case"zxy":f[0]=M*V*X-R*I*H,f[1]=R*I*X+M*V*H,f[2]=R*V*H+M*I*X,f[3]=R*V*X-M*I*H;break;case"zyx":f[0]=M*V*X-R*I*H,f[1]=R*I*X+M*V*H,f[2]=R*V*H-M*I*X,f[3]=R*V*X+M*I*H;break;default:throw new Error("Unknown angle order "+v)}return f}function Qe(){var f=new J(2);return J!=Float32Array&&(f[0]=0,f[1]=0),f}function Je(f,r){var d=new J(2);return d[0]=f,d[1]=r,d}le(),We=new J(4),J!=Float32Array&&(We[0]=0,We[1]=0,We[2]=0,We[3]=0),le(),de(1,0,0),de(0,1,0),vt(),vt(),Z(),Qe();const Pt=8192;function fe(f,r,d){return r*(Pt/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function Xe(f,r){return(f%r+r)%r}function tt(f,r,d){return f*(1-d)+r*d}function Ae(f){if(f<=0)return 0;if(f>=1)return 1;const r=f*f,d=r*f;return 4*(f<.5?d:3*(f-r)+d-.75)}function ot(f,r,d,y){const v=new E(f,r,d,y);return C=>v.solve(C)}const ct=ot(.25,.1,.25,1);function ut(f,r,d){return Math.min(d,Math.max(r,f))}function tn(f,r,d){const y=d-r,v=((f-r)%y+y)%y+r;return v===r?d:v}function Ge(f,...r){for(const d of r)for(const y in d)f[y]=d[y];return f}let Ye=1;function zt(f,r,d){const y={};for(const v in f)y[v]=r.call(this,f[v],v,f);return y}function Bt(f,r,d){const y={};for(const v in f)r.call(this,f[v],v,f)&&(y[v]=f[v]);return y}function It(f){return Array.isArray(f)?f.map(It):typeof f=="object"&&f?zt(f,It):f}const Lt={};function nn(f){Lt[f]||(typeof console!="undefined"&&console.warn(f),Lt[f]=!0)}function _n(f,r,d){return(d.y-f.y)*(r.x-f.x)>(r.y-f.y)*(d.x-f.x)}function Xn(f){return typeof WorkerGlobalScope!="undefined"&&f!==void 0&&f instanceof WorkerGlobalScope}let Gn=null;function gn(f){if(Gn==null){const r=f.navigator?f.navigator.userAgent:null;Gn=!!f.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Gn}function ln(f){return typeof ImageBitmap!="undefined"&&f instanceof ImageBitmap}const Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ge(f,r,d,y,v){return a(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");const C=new VideoFrame(f,{timestamp:0});try{const M=C==null?void 0:C.format;if(!M||!M.startsWith("BGR")&&!M.startsWith("RGB"))throw new Error(`Unrecognized format ${M}`);const R=M.startsWith("BGR"),I=new Uint8ClampedArray(y*v*4);if(yield C.copyTo(I,function(V,H,X,se,ce){const he=4*Math.max(-H,0),xe=(Math.max(0,X)-X)*se*4+he,Se=4*se,De=Math.max(0,H),at=Math.max(0,X);return{rect:{x:De,y:at,width:Math.min(V.width,H+se)-De,height:Math.min(V.height,X+ce)-at},layout:[{offset:xe,stride:Se}]}}(f,r,d,y,v)),R)for(let V=0;V<I.length;V+=4){const H=I[V];I[V]=I[V+2],I[V+2]=H}return I}finally{C.close()}})}let ve,ht;function ft(f,r,d,y){return f.addEventListener(r,d,y),{unsubscribe:()=>{f.removeEventListener(r,d,y)}}}function qt(f){return f*Math.PI/180}function cn(f){return f/Math.PI*180}const Qt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},xt={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},je="AbortError";function ae(){return new Error(je)}const ie={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function be(f){return ie.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const ke="global-dispatcher";class Re extends Error{constructor(r,d,y,v){super(`AJAXError: ${d} (${r}): ${y}`),this.status=r,this.statusText=d,this.url=y,this.body=v}}const Q=()=>Xn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,nt=function(f,r){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const y=be(f.url);if(y)return y(f,r);if(Xn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:ke},r)}if(!(/^file:/.test(d=f.url)||/^file:/.test(Q())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(y,v){return a(this,void 0,void 0,function*(){const C=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:Q(),signal:v.signal});let M,R;y.type!=="json"||C.headers.has("Accept")||C.headers.set("Accept","application/json");try{M=yield fetch(C)}catch(V){throw new Re(0,V.message,y.url,new Blob)}if(!M.ok){const V=yield M.blob();throw new Re(M.status,M.statusText,y.url,V)}R=y.type==="arrayBuffer"||y.type==="image"?M.arrayBuffer():y.type==="json"?M.json():M.text();const I=yield R;if(v.signal.aborted)throw ae();return{data:I,cacheControl:M.headers.get("Cache-Control"),expires:M.headers.get("Expires")}})}(f,r);if(Xn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:ke},r)}var d;return function(y,v){return new Promise((C,M)=>{var R;const I=new XMLHttpRequest;I.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(I.responseType="arraybuffer");for(const V in y.headers)I.setRequestHeader(V,y.headers[V]);y.type==="json"&&(I.responseType="text",!((R=y.headers)===null||R===void 0)&&R.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=y.credentials==="include",I.onerror=()=>{M(new Error(I.statusText))},I.onload=()=>{if(!v.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let V=I.response;if(y.type==="json")try{V=JSON.parse(I.response)}catch(H){return void M(H)}C({data:V,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const V=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});M(new Re(I.status,I.statusText,y.url,V))}},v.signal.addEventListener("abort",()=>{I.abort(),M(ae())}),I.send(y.body)})}(f,r)};function et(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const r=new URL(f),d=window.location;return r.protocol===d.protocol&&r.host===d.host}function Tt(f,r,d){d[f]&&d[f].indexOf(r)!==-1||(d[f]=d[f]||[],d[f].push(r))}function Gt(f,r,d){if(d&&d[f]){const y=d[f].indexOf(r);y!==-1&&d[f].splice(y,1)}}class Ot{constructor(r,d={}){Ge(this,d),this.type=r}}class bn extends Ot{constructor(r,d={}){super("error",Ge({error:r},d))}}class Tn{on(r,d){return this._listeners=this._listeners||{},Tt(r,d,this._listeners),{unsubscribe:()=>{this.off(r,d)}}}off(r,d){return Gt(r,d,this._listeners),Gt(r,d,this._oneTimeListeners),this}once(r,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},Tt(r,d,this._oneTimeListeners),this):new Promise(y=>this.once(r,y))}fire(r,d){typeof r=="string"&&(r=new Ot(r,d||{}));const y=r.type;if(this.listens(y)){r.target=this;const v=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const R of v)R.call(this,r);const C=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const R of C)Gt(y,R,this._oneTimeListeners),R.call(this,r);const M=this._eventedParent;M&&(Ge(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(r))}else r instanceof bn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,d){return this._eventedParent=r,this._eventedParentData=d,this}}var dt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ct=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Wt(f,r){const d={};for(const y in f)y!=="ref"&&(d[y]=f[y]);return Ct.forEach(y=>{y in r&&(d[y]=r[y])}),d}function Vt(f,r){if(Array.isArray(f)){if(!Array.isArray(r)||f.length!==r.length)return!1;for(let d=0;d<f.length;d++)if(!Vt(f[d],r[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&r!==null){if(typeof r!="object"||Object.keys(f).length!==Object.keys(r).length)return!1;for(const d in f)if(!Vt(f[d],r[d]))return!1;return!0}return f===r}function vn(f,r){f.push(r)}function Gi(f,r,d){vn(d,{command:"addSource",args:[f,r[f]]})}function Jn(f,r,d){vn(r,{command:"removeSource",args:[f]}),d[f]=!0}function ai(f,r,d,y){Jn(f,d,y),Gi(f,r,d)}function Hn(f,r,d){let y;for(y in f[d])if(Object.prototype.hasOwnProperty.call(f[d],y)&&y!=="data"&&!Vt(f[d][y],r[d][y]))return!1;for(y in r[d])if(Object.prototype.hasOwnProperty.call(r[d],y)&&y!=="data"&&!Vt(f[d][y],r[d][y]))return!1;return!0}function Bn(f,r,d,y,v,C){f=f||{},r=r||{};for(const M in f)Object.prototype.hasOwnProperty.call(f,M)&&(Vt(f[M],r[M])||d.push({command:C,args:[y,M,r[M],v]}));for(const M in r)Object.prototype.hasOwnProperty.call(r,M)&&!Object.prototype.hasOwnProperty.call(f,M)&&(Vt(f[M],r[M])||d.push({command:C,args:[y,M,r[M],v]}))}function xi(f){return f.id}function Xt(f,r){return f[r.id]=r,f}class lt{constructor(r,d,y,v){this.message=(r?`${r}: `:"")+y,v&&(this.identifier=v),d!=null&&d.__line__&&(this.line=d.__line__)}}function Ri(f,...r){for(const d of r)for(const y in d)f[y]=d[y];return f}class li extends Error{constructor(r,d){super(d),this.message=d,this.key=r}}class Wi{constructor(r,d=[]){this.parent=r,this.bindings={};for(const[y,v]of d)this.bindings[y]=v}concat(r){return new Wi(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const us={kind:"null"},sn={kind:"number"},ei={kind:"string"},On={kind:"boolean"},vs={kind:"color"},Ii={kind:"projectionDefinition"},Yr={kind:"object"},Vn={kind:"value"},Xr={kind:"collator"},Pr={kind:"formatted"},da={kind:"padding"},ds={kind:"colorArray"},Kr={kind:"numberArray"},Na={kind:"resolvedImage"},Di={kind:"variableAnchorOffsetCollection"};function es(f,r){return{kind:"array",itemType:f,N:r}}function ti(f){if(f.kind==="array"){const r=ti(f.itemType);return typeof f.N=="number"?`array<${r}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${r}>`}return f.kind}const ml=[us,sn,ei,On,vs,Ii,Pr,Yr,es(Vn),da,Kr,ds,Na,Di];function gl(f,r){if(r.kind==="error")return null;if(f.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!gl(f.itemType,r.itemType))&&(typeof f.N!="number"||f.N===r.N))return null}else{if(f.kind===r.kind)return null;if(f.kind==="value"){for(const d of ml)if(!gl(d,r))return null}}return`Expected ${ti(f)} but found ${ti(r)} instead.`}function Ma(f,r){return r.some(d=>d.kind===f.kind)}function qa(f,r){return r.some(d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f)}function ha(f,r){return f.kind==="array"&&r.kind==="array"?f.itemType.kind===r.itemType.kind&&typeof f.N=="number":f.kind===r.kind}const zh=.96422,Cu=.82521,Qr=4/29,yl=6/29,Cd=3*yl*yl,Sc=yl*yl*yl,Vo=Math.PI/180,jc=180/Math.PI;function Ih(f){return(f%=360)<0&&(f+=360),f}function Rr([f,r,d,y]){let v,C;const M=Tu((.2225045*(f=wo(f))+.7168786*(r=wo(r))+.0606169*(d=wo(d)))/1);f===r&&r===d?v=C=M:(v=Tu((.4360747*f+.3850649*r+.1430804*d)/zh),C=Tu((.0139322*f+.0971045*r+.7141733*d)/Cu));const R=116*M-16;return[R<0?0:R,500*(v-M),200*(M-C),y]}function wo(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Tu(f){return f>Sc?Math.pow(f,1/3):f/Cd+Qr}function ku([f,r,d,y]){let v=(f+16)/116,C=isNaN(r)?v:v+r/500,M=isNaN(d)?v:v-d/200;return v=1*xl(v),C=zh*xl(C),M=Cu*xl(M),[Jr(3.1338561*C-1.6168667*v-.4906146*M),Jr(-.9787684*C+1.9161415*v+.033454*M),Jr(.0719453*C-.2289914*v+1.4052427*M),y]}function Jr(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function xl(f){return f>yl?f*f*f:Cd*(f-Qr)}const Td=Object.hasOwn||function(f,r){return Object.prototype.hasOwnProperty.call(f,r)};function Ga(f,r){return Td(f,r)?f[r]:void 0}function Vl(f){return parseInt(f.padEnd(2,f),16)/255}function Nu(f,r){return lr(r?f/100:f,0,1)}function lr(f,r,d){return Math.min(Math.max(r,f),d)}function ci(f){return!f.some(Number.isNaN)}const So={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function jr(f,r,d){return f+d*(r-f)}function Wa(f,r,d){return f.map((y,v)=>jr(y,r[v],d))}class ui{constructor(r,d,y,v=1,C=!0){this.r=r,this.g=d,this.b=y,this.a=v,C||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[r,d,y,v]))}static parse(r){if(r instanceof ui)return r;if(typeof r!="string")return;const d=function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=Ga(So,y);if(v){const[M,R,I]=v;return[M/255,R/255,I/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const M=y.length<6?1:2;let R=1;return[Vl(y.slice(R,R+=M)),Vl(y.slice(R,R+=M)),Vl(y.slice(R,R+=M)),Vl(y.slice(R,R+M)||"ff")]}if(y.startsWith("rgb")){const M=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){const[R,I,V,H,X,se,ce,he,xe,Se,De,at]=M,Ve=[H||" ",ce||" ",Se].join("");if(Ve==="  "||Ve==="  /"||Ve===",,"||Ve===",,,"){const Ze=[V,se,xe].join(""),bt=Ze==="%%%"?100:Ze===""?255:0;if(bt){const Et=[lr(+I/bt,0,1),lr(+X/bt,0,1),lr(+he/bt,0,1),De?Nu(+De,at):1];if(ci(Et))return Et}}return}}const C=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[M,R,I,V,H,X,se,ce,he]=C,xe=[I||" ",H||" ",se].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const Se=[+R,lr(+V,0,100),lr(+X,0,100),ce?Nu(+ce,he):1];if(ci(Se))return function([De,at,Ve,Ze]){function bt(Et){const Zt=(Et+De/30)%12,un=at*Math.min(Ve,1-Ve);return Ve-un*Math.max(-1,Math.min(Zt-3,9-Zt,1))}return De=Ih(De),at/=100,Ve/=100,[bt(0),bt(8),bt(4),Ze]}(Se)}}}(r);return d?new ui(...d,!1):void 0}get rgb(){const{r,g:d,b:y,a:v}=this,C=v||1/0;return this.overwriteGetter("rgb",[r/C,d/C,y/C,v])}get hcl(){return this.overwriteGetter("hcl",function(r){const[d,y,v,C]=Rr(r),M=Math.sqrt(y*y+v*v);return[Math.round(1e4*M)?Ih(Math.atan2(v,y)*jc):NaN,M,d,C]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Rr(this.rgb))}overwriteGetter(r,d){return Object.defineProperty(this,r,{value:d}),d}toString(){const[r,d,y,v]=this.rgb;return`rgba(${[r,d,y].map(C=>Math.round(255*C)).join(",")},${v})`}static interpolate(r,d,y,v="rgb"){switch(v){case"rgb":{const[C,M,R,I]=Wa(r.rgb,d.rgb,y);return new ui(C,M,R,I,!1)}case"hcl":{const[C,M,R,I]=r.hcl,[V,H,X,se]=d.hcl;let ce,he;if(isNaN(C)||isNaN(V))isNaN(C)?isNaN(V)?ce=NaN:(ce=V,R!==1&&R!==0||(he=H)):(ce=C,X!==1&&X!==0||(he=M));else{let Ve=V-C;V>C&&Ve>180?Ve-=360:V<C&&C-V>180&&(Ve+=360),ce=C+y*Ve}const[xe,Se,De,at]=function([Ve,Ze,bt,Et]){return Ve=isNaN(Ve)?0:Ve*Vo,ku([bt,Math.cos(Ve)*Ze,Math.sin(Ve)*Ze,Et])}([ce,he!=null?he:jr(M,H,y),jr(R,X,y),jr(I,se,y)]);return new ui(xe,Se,De,at,!1)}case"lab":{const[C,M,R,I]=ku(Wa(r.lab,d.lab,y));return new ui(C,M,R,I,!1)}}}}ui.black=new ui(0,0,0,1),ui.white=new ui(1,1,1,1),ui.transparent=new ui(0,0,0,0),ui.red=new ui(1,0,0,1);class jo{constructor(r,d,y){this.sensitivity=r?d?"variant":"case":d?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,d){return this.collator.compare(r,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ea=["bottom","center","top"];class Aa{constructor(r,d,y,v,C,M){this.text=r,this.image=d,this.scale=y,this.fontStack=v,this.textColor=C,this.verticalAlign=M}}class pr{constructor(r){this.sections=r}static fromString(r){return new pr([new Aa(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof pr?r:pr.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Ms{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ms)return r;if(typeof r=="number")return new Ms([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const d of r)if(typeof d!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Ms(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,d,y){return new Ms(Wa(r.values,d.values,y))}}class Ls{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ls)return r;if(typeof r=="number")return new Ls([r]);if(Array.isArray(r)){for(const d of r)if(typeof d!="number")return;return new Ls(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,d,y){return new Ls(Wa(r.values,d.values,y))}}class ws{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof ws)return r;if(typeof r=="string"){const y=ui.parse(r);return y?new ws([y]):void 0}if(!Array.isArray(r))return;const d=[];for(const y of r){if(typeof y!="string")return;const v=ui.parse(y);if(!v)return;d.push(v)}return new ws(d)}toString(){return JSON.stringify(this.values)}static interpolate(r,d,y,v="rgb"){const C=[];if(r.values.length!=d.values.length)throw new Error(`colorArray: Arrays have mismatched length (${r.values.length} vs. ${d.values.length}), cannot interpolate.`);for(let M=0;M<r.values.length;M++)C.push(ui.interpolate(r.values[M],d.values[M],y,v));return new ws(C)}}class vi extends Error{constructor(r){super(r),this.name="RuntimeError"}toJSON(){return this.message}}const Co=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zs{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Zs)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let d=0;d<r.length;d+=2){const y=r[d],v=r[d+1];if(typeof y!="string"||!Co.has(y)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Zs(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,d,y){const v=r.values,C=d.values;if(v.length!==C.length)throw new vi(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${d.toString()}`);const M=[];for(let R=0;R<v.length;R+=2){if(v[R]!==C[R])throw new vi(`Cannot interpolate values containing mismatched anchors. from[${R}]: ${v[R]}, to[${R}]: ${C[R]}`);M.push(v[R]);const[I,V]=v[R+1],[H,X]=C[R+1];M.push([jr(I,H,y),jr(V,X,y)])}return new Zs(M)}}class gs{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new gs({name:r,available:!1}):null}}class rs{constructor(r,d,y){this.from=r,this.to=d,this.transition=y}static interpolate(r,d,y){return new rs(r,d,y)}static parse(r){return r instanceof rs?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new rs(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new rs(r.from,r.to,r.transition):typeof r=="string"?new rs(r,r,1):void 0}}function Pa(f,r,d,y){return typeof f=="number"&&f>=0&&f<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof d=="number"&&d>=0&&d<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[f,r,d,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[f,r,d,y]:[f,r,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Mi(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof rs||f instanceof ui||f instanceof jo||f instanceof pr||f instanceof Ms||f instanceof Ls||f instanceof ws||f instanceof Zs||f instanceof gs)return!0;if(Array.isArray(f)){for(const r of f)if(!Mi(r))return!1;return!0}if(typeof f=="object"){for(const r in f)if(!Mi(f[r]))return!1;return!0}return!1}function Zi(f){if(f===null)return us;if(typeof f=="string")return ei;if(typeof f=="boolean")return On;if(typeof f=="number")return sn;if(f instanceof ui)return vs;if(f instanceof rs)return Ii;if(f instanceof jo)return Xr;if(f instanceof pr)return Pr;if(f instanceof Ms)return da;if(f instanceof Ls)return Kr;if(f instanceof ws)return ds;if(f instanceof Zs)return Di;if(f instanceof gs)return Na;if(Array.isArray(f)){const r=f.length;let d;for(const y of f){const v=Zi(y);if(d){if(d===v)continue;d=Vn;break}d=v}return es(d||Vn,r)}return Yr}function di(f){const r=typeof f;return f===null?"":r==="string"||r==="number"||r==="boolean"?String(f):f instanceof ui||f instanceof rs||f instanceof pr||f instanceof Ms||f instanceof Ls||f instanceof ws||f instanceof Zs||f instanceof gs?f.toString():JSON.stringify(f)}class Kn{constructor(r,d){this.type=r,this.value=d}static parse(r,d){if(r.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Mi(r[1]))return d.error("invalid value");const y=r[1];let v=Zi(y);const C=d.expectedType;return v.kind!=="array"||v.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(v=C),new Kn(v,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ys={string:ei,number:sn,boolean:On,object:Yr};class Yn{constructor(r,d){this.type=r,this.args=d}static parse(r,d){if(r.length<2)return d.error("Expected at least one argument.");let y,v=1;const C=r[0];if(C==="array"){let R,I;if(r.length>2){const V=r[1];if(typeof V!="string"||!(V in Ys)||V==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);R=Ys[V],v++}else R=Vn;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return d.error('The length argument to "array" must be a positive integer literal',2);I=r[2],v++}y=es(R,I)}else{if(!Ys[C])throw new Error(`Types doesn't contain name = ${C}`);y=Ys[C]}const M=[];for(;v<r.length;v++){const R=d.parse(r[v],v,Vn);if(!R)return null;M.push(R)}return new Yn(y,M)}evaluate(r){for(let d=0;d<this.args.length;d++){const y=this.args[d].evaluate(r);if(!gl(this.type,Zi(y)))return y;if(d===this.args.length-1)throw new vi(`Expected value to be of type ${ti(this.type)}, but found ${ti(Zi(y))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const _l={"to-boolean":On,"to-color":vs,"to-number":sn,"to-string":ei};class Es{constructor(r,d){this.type=r,this.args=d}static parse(r,d){if(r.length<2)return d.error("Expected at least one argument.");const y=r[0];if(!_l[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&r.length!==2)return d.error("Expected one argument.");const v=_l[y],C=[];for(let M=1;M<r.length;M++){const R=d.parse(r[M],M,Vn);if(!R)return null;C.push(R)}return new Es(v,C)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let d,y;for(const v of this.args){if(d=v.evaluate(r),y=null,d instanceof ui)return d;if(typeof d=="string"){const C=r.parseColor(d);if(C)return C}else if(Array.isArray(d)&&(y=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:Pa(d[0],d[1],d[2],d[3]),!y))return new ui(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new vi(y||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const y of this.args){d=y.evaluate(r);const v=Ms.parse(d);if(v)return v}throw new vi(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"numberArray":{let d;for(const y of this.args){d=y.evaluate(r);const v=Ls.parse(d);if(v)return v}throw new vi(`Could not parse numberArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"colorArray":{let d;for(const y of this.args){d=y.evaluate(r);const v=ws.parse(d);if(v)return v}throw new vi(`Could not parse colorArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const y of this.args){d=y.evaluate(r);const v=Zs.parse(d);if(v)return v}throw new vi(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const y of this.args){if(d=y.evaluate(r),d===null)return 0;const v=Number(d);if(!isNaN(v))return v}throw new vi(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return pr.fromString(di(this.args[0].evaluate(r)));case"resolvedImage":return gs.fromString(di(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return di(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Ss=["Unknown","Point","LineString","Polygon"];class re{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ss[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let d=this._parseColorCache.get(r);return d||(d=ui.parse(r),this._parseColorCache.set(r,d)),d}}class me{constructor(r,d,y=[],v,C=new Wi,M=[]){this.registry=r,this.path=y,this.key=y.map(R=>`[${R}]`).join(""),this.scope=C,this.errors=M,this.expectedType=v,this._isConstant=d}parse(r,d,y,v,C={}){return d?this.concat(d,y,v)._parse(r,C):this._parse(r,C)}_parse(r,d){function y(v,C,M){return M==="assert"?new Yn(C,[v]):M==="coerce"?new Es(C,[v]):v}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=r[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[v];if(C){let M=C.parse(r,this);if(!M)return null;if(this.expectedType){const R=this.expectedType,I=M.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||I.kind!=="value"){if(R.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(R.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(R.kind)&&["value","number","array"].includes(I.kind)||R.kind==="colorArray"&&["value","string","array"].includes(I.kind)||R.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))M=y(M,R,d.typeAnnotation||"coerce");else if(this.checkSubtype(R,I))return null}else M=y(M,R,d.typeAnnotation||"assert")}if(!(M instanceof Kn)&&M.type.kind!=="resolvedImage"&&this._isConstant(M)){const R=new re;try{M=new Kn(M.type,M.evaluate(R))}catch(I){return this.error(I.message),null}}return M}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,d,y){const v=typeof r=="number"?this.path.concat(r):this.path,C=y?this.scope.concat(y):this.scope;return new me(this.registry,this._isConstant,v,d||null,C,this.errors)}error(r,...d){const y=`${this.key}${d.map(v=>`[${v}]`).join("")}`;this.errors.push(new li(y,r))}checkSubtype(r,d){const y=gl(r,d);return y&&this.error(y),y}}class Ne{constructor(r,d){this.type=d.type,this.bindings=[].concat(r),this.result=d}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const d of this.bindings)r(d[1]);r(this.result)}static parse(r,d){if(r.length<4)return d.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const y=[];for(let C=1;C<r.length-1;C+=2){const M=r[C];if(typeof M!="string")return d.error(`Expected string, but found ${typeof M} instead.`,C);if(/[^a-zA-Z0-9_]/.test(M))return d.error("Variable names must contain only alphanumeric characters or '_'.",C);const R=d.parse(r[C+1],C+1);if(!R)return null;y.push([M,R])}const v=d.parse(r[r.length-1],r.length-1,d.expectedType,y);return v?new Ne(y,v):null}outputDefined(){return this.result.outputDefined()}}class Pe{constructor(r,d){this.type=d.type,this.name=r,this.boundExpression=d}static parse(r,d){if(r.length!==2||typeof r[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const y=r[1];return d.scope.has(y)?new Pe(y,d.scope.get(y)):d.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class pt{constructor(r,d,y){this.type=r,this.index=d,this.input=y}static parse(r,d){if(r.length!==3)return d.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const y=d.parse(r[1],1,sn),v=d.parse(r[2],2,es(d.expectedType||Vn));return y&&v?new pt(v.type.itemType,y,v):null}evaluate(r){const d=this.index.evaluate(r),y=this.input.evaluate(r);if(d<0)throw new vi(`Array index out of bounds: ${d} < 0.`);if(d>=y.length)throw new vi(`Array index out of bounds: ${d} > ${y.length-1}.`);if(d!==Math.floor(d))throw new vi(`Array index must be an integer, but found ${d} instead.`);return y[d]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class yt{constructor(r,d){this.type=On,this.needle=r,this.haystack=d}static parse(r,d){if(r.length!==3)return d.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const y=d.parse(r[1],1,Vn),v=d.parse(r[2],2,Vn);return y&&v?Ma(y.type,[On,ei,sn,us,Vn])?new yt(y,v):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ti(y.type)} instead`):null}evaluate(r){const d=this.needle.evaluate(r),y=this.haystack.evaluate(r);if(!y)return!1;if(!qa(d,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${ti(Zi(d))} instead.`);if(!qa(y,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${ti(Zi(y))} instead.`);return y.indexOf(d)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class kt{constructor(r,d,y){this.type=sn,this.needle=r,this.haystack=d,this.fromIndex=y}static parse(r,d){if(r.length<=2||r.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const y=d.parse(r[1],1,Vn),v=d.parse(r[2],2,Vn);if(!y||!v)return null;if(!Ma(y.type,[On,ei,sn,us,Vn]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ti(y.type)} instead`);if(r.length===4){const C=d.parse(r[3],3,sn);return C?new kt(y,v,C):null}return new kt(y,v)}evaluate(r){const d=this.needle.evaluate(r),y=this.haystack.evaluate(r);if(!qa(d,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${ti(Zi(d))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(r)),qa(y,["string"])){const C=y.indexOf(d,v);return C===-1?-1:[...y.slice(0,C)].length}if(qa(y,["array"]))return y.indexOf(d,v);throw new vi(`Expected second argument to be of type array or string, but found ${ti(Zi(y))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class dn{constructor(r,d,y,v,C,M){this.inputType=r,this.type=d,this.input=y,this.cases=v,this.outputs=C,this.otherwise=M}static parse(r,d){if(r.length<5)return d.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return d.error("Expected an even number of arguments.");let y,v;d.expectedType&&d.expectedType.kind!=="value"&&(v=d.expectedType);const C={},M=[];for(let V=2;V<r.length-1;V+=2){let H=r[V];const X=r[V+1];Array.isArray(H)||(H=[H]);const se=d.concat(V);if(H.length===0)return se.error("Expected at least one branch label.");for(const he of H){if(typeof he!="number"&&typeof he!="string")return se.error("Branch labels must be numbers or strings.");if(typeof he=="number"&&Math.abs(he)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof he=="number"&&Math.floor(he)!==he)return se.error("Numeric branch labels must be integer values.");if(y){if(se.checkSubtype(y,Zi(he)))return null}else y=Zi(he);if(C[String(he)]!==void 0)return se.error("Branch labels must be unique.");C[String(he)]=M.length}const ce=d.parse(X,V,v);if(!ce)return null;v=v||ce.type,M.push(ce)}const R=d.parse(r[1],1,Vn);if(!R)return null;const I=d.parse(r[r.length-1],r.length-1,v);return I?R.type.kind!=="value"&&d.concat(1).checkSubtype(y,R.type)?null:new dn(y,v,R,C,M,I):null}evaluate(r){const d=this.input.evaluate(r);return(Zi(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class kn{constructor(r,d,y){this.type=r,this.branches=d,this.otherwise=y}static parse(r,d){if(r.length<4)return d.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return d.error("Expected an odd number of arguments.");let y;d.expectedType&&d.expectedType.kind!=="value"&&(y=d.expectedType);const v=[];for(let M=1;M<r.length-1;M+=2){const R=d.parse(r[M],M,On);if(!R)return null;const I=d.parse(r[M+1],M+1,y);if(!I)return null;v.push([R,I]),y=y||I.type}const C=d.parse(r[r.length-1],r.length-1,y);if(!C)return null;if(!y)throw new Error("Can't infer output type");return new kn(y,v,C)}evaluate(r){for(const[d,y]of this.branches)if(d.evaluate(r))return y.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[d,y]of this.branches)r(d),r(y);r(this.otherwise)}outputDefined(){return this.branches.every(([r,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class yn{constructor(r,d,y,v){this.type=r,this.input=d,this.beginIndex=y,this.endIndex=v}static parse(r,d){if(r.length<=2||r.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const y=d.parse(r[1],1,Vn),v=d.parse(r[2],2,sn);if(!y||!v)return null;if(!Ma(y.type,[es(Vn),ei,Vn]))return d.error(`Expected first argument to be of type array or string, but found ${ti(y.type)} instead`);if(r.length===4){const C=d.parse(r[3],3,sn);return C?new yn(y.type,y,v,C):null}return new yn(y.type,y,v)}evaluate(r){const d=this.input.evaluate(r),y=this.beginIndex.evaluate(r);let v;if(this.endIndex&&(v=this.endIndex.evaluate(r)),qa(d,["string"]))return[...d].slice(y,v).join("");if(qa(d,["array"]))return d.slice(y,v);throw new vi(`Expected first argument to be of type array or string, but found ${ti(Zi(d))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Cn(f,r){const d=f.length-1;let y,v,C=0,M=d,R=0;for(;C<=M;)if(R=Math.floor((C+M)/2),y=f[R],v=f[R+1],y<=r){if(R===d||r<v)return R;C=R+1}else{if(!(y>r))throw new vi("Input is not a number.");M=R-1}return 0}class Un{constructor(r,d,y){this.type=r,this.input=d,this.labels=[],this.outputs=[];for(const[v,C]of y)this.labels.push(v),this.outputs.push(C)}static parse(r,d){if(r.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return d.error("Expected an even number of arguments.");const y=d.parse(r[1],1,sn);if(!y)return null;const v=[];let C=null;d.expectedType&&d.expectedType.kind!=="value"&&(C=d.expectedType);for(let M=1;M<r.length;M+=2){const R=M===1?-1/0:r[M],I=r[M+1],V=M,H=M+1;if(typeof R!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(v.length&&v[v.length-1][0]>=R)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const X=d.parse(I,H,C);if(!X)return null;C=C||X.type,v.push([R,X])}return new Un(C,y,v)}evaluate(r){const d=this.labels,y=this.outputs;if(d.length===1)return y[0].evaluate(r);const v=this.input.evaluate(r);if(v<=d[0])return y[0].evaluate(r);const C=d.length;return v>=d[C-1]?y[C-1].evaluate(r):y[Cn(d,v)].evaluate(r)}eachChild(r){r(this.input);for(const d of this.outputs)r(d)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function oi(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var ri,qn,Rn=function(){if(qn)return ri;function f(r,d,y,v){this.cx=3*r,this.bx=3*(y-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(v-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=d,this.p2x=y,this.p2y=v}return qn=1,ri=f,f.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,d){if(d===void 0&&(d=1e-6),r<0)return 0;if(r>1)return 1;for(var y=r,v=0;v<8;v++){var C=this.sampleCurveX(y)-r;if(Math.abs(C)<d)return y;var M=this.sampleCurveDerivativeX(y);if(Math.abs(M)<1e-6)break;y-=C/M}var R=0,I=1;for(y=r,v=0;v<20&&(C=this.sampleCurveX(y),!(Math.abs(C-r)<d));v++)r>C?R=y:I=y,y=.5*(I-R)+R;return y},solve:function(r,d){return this.sampleCurveY(this.solveCurveX(r,d))}},ri}(),mr=oi(Rn);class Si{constructor(r,d,y,v,C){this.type=r,this.operator=d,this.interpolation=y,this.input=v,this.labels=[],this.outputs=[];for(const[M,R]of C)this.labels.push(M),this.outputs.push(R)}static interpolationFactor(r,d,y,v){let C=0;if(r.name==="exponential")C=ts(d,r.base,y,v);else if(r.name==="linear")C=ts(d,1,y,v);else if(r.name==="cubic-bezier"){const M=r.controlPoints;C=new mr(M[0],M[1],M[2],M[3]).solve(ts(d,1,y,v))}return C}static parse(r,d){let[y,v,C,...M]=r;if(!Array.isArray(v)||v.length===0)return d.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const V=v[1];if(typeof V!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:V}}else{if(v[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const V=v.slice(1);if(V.length!==4||V.some(H=>typeof H!="number"||H<0||H>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:V}}}if(r.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(C=d.parse(C,2,sn),!C)return null;const R=[];let I=null;y!=="interpolate-hcl"&&y!=="interpolate-lab"||d.expectedType==ds?d.expectedType&&d.expectedType.kind!=="value"&&(I=d.expectedType):I=vs;for(let V=0;V<M.length;V+=2){const H=M[V],X=M[V+1],se=V+3,ce=V+4;if(typeof H!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(R.length&&R[R.length-1][0]>=H)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);const he=d.parse(X,ce,I);if(!he)return null;I=I||he.type,R.push([H,he])}return ha(I,sn)||ha(I,Ii)||ha(I,vs)||ha(I,da)||ha(I,Kr)||ha(I,ds)||ha(I,Di)||ha(I,es(sn))?new Si(I,y,v,C,R):d.error(`Type ${ti(I)} is not interpolatable.`)}evaluate(r){const d=this.labels,y=this.outputs;if(d.length===1)return y[0].evaluate(r);const v=this.input.evaluate(r);if(v<=d[0])return y[0].evaluate(r);const C=d.length;if(v>=d[C-1])return y[C-1].evaluate(r);const M=Cn(d,v),R=Si.interpolationFactor(this.interpolation,v,d[M],d[M+1]),I=y[M].evaluate(r),V=y[M+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return jr(I,V,R);case"color":return ui.interpolate(I,V,R);case"padding":return Ms.interpolate(I,V,R);case"colorArray":return ws.interpolate(I,V,R);case"numberArray":return Ls.interpolate(I,V,R);case"variableAnchorOffsetCollection":return Zs.interpolate(I,V,R);case"array":return Wa(I,V,R);case"projectionDefinition":return rs.interpolate(I,V,R)}case"interpolate-hcl":switch(this.type.kind){case"color":return ui.interpolate(I,V,R,"hcl");case"colorArray":return ws.interpolate(I,V,R,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ui.interpolate(I,V,R,"lab");case"colorArray":return ws.interpolate(I,V,R,"lab")}}}eachChild(r){r(this.input);for(const d of this.outputs)r(d)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function ts(f,r,d,y){const v=y-d,C=f-d;return v===0?0:r===1?C/v:(Math.pow(r,C)-1)/(Math.pow(r,v)-1)}const As={color:ui.interpolate,number:jr,padding:Ms.interpolate,numberArray:Ls.interpolate,colorArray:ws.interpolate,variableAnchorOffsetCollection:Zs.interpolate,array:Wa};class Uo{constructor(r,d){this.type=r,this.args=d}static parse(r,d){if(r.length<2)return d.error("Expected at least one argument.");let y=null;const v=d.expectedType;v&&v.kind!=="value"&&(y=v);const C=[];for(const R of r.slice(1)){const I=d.parse(R,1+C.length,y,void 0,{typeAnnotation:"omit"});if(!I)return null;y=y||I.type,C.push(I)}if(!y)throw new Error("No output type");const M=v&&C.some(R=>gl(v,R.type));return new Uo(M?Vn:y,C)}evaluate(r){let d,y=null,v=0;for(const C of this.args)if(v++,y=C.evaluate(r),y&&y instanceof gs&&!y.available&&(d||(d=y.name),y=null,v===this.args.length&&(y=d)),y!==null)break;return y}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Za(f,r){return f==="=="||f==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Ya(f,r,d,y){return y.compare(r,d)===0}function fa(f,r,d){const y=f!=="=="&&f!=="!=";return class pD{constructor(C,M,R){this.type=On,this.lhs=C,this.rhs=M,this.collator=R,this.hasUntypedArgument=C.type.kind==="value"||M.type.kind==="value"}static parse(C,M){if(C.length!==3&&C.length!==4)return M.error("Expected two or three arguments.");const R=C[0];let I=M.parse(C[1],1,Vn);if(!I)return null;if(!Za(R,I.type))return M.concat(1).error(`"${R}" comparisons are not supported for type '${ti(I.type)}'.`);let V=M.parse(C[2],2,Vn);if(!V)return null;if(!Za(R,V.type))return M.concat(2).error(`"${R}" comparisons are not supported for type '${ti(V.type)}'.`);if(I.type.kind!==V.type.kind&&I.type.kind!=="value"&&V.type.kind!=="value")return M.error(`Cannot compare types '${ti(I.type)}' and '${ti(V.type)}'.`);y&&(I.type.kind==="value"&&V.type.kind!=="value"?I=new Yn(V.type,[I]):I.type.kind!=="value"&&V.type.kind==="value"&&(V=new Yn(I.type,[V])));let H=null;if(C.length===4){if(I.type.kind!=="string"&&V.type.kind!=="string"&&I.type.kind!=="value"&&V.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(H=M.parse(C[3],3,Xr),!H)return null}return new pD(I,V,H)}evaluate(C){const M=this.lhs.evaluate(C),R=this.rhs.evaluate(C);if(y&&this.hasUntypedArgument){const I=Zi(M),V=Zi(R);if(I.kind!==V.kind||I.kind!=="string"&&I.kind!=="number")throw new vi(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${I.kind}, ${V.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const I=Zi(M),V=Zi(R);if(I.kind!=="string"||V.kind!=="string")return r(C,M,R)}return this.collator?d(C,M,R,this.collator.evaluate(C)):r(C,M,R)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const Dr=fa("==",function(f,r,d){return r===d},Ya),kd=fa("!=",function(f,r,d){return r!==d},function(f,r,d,y){return!Ya(0,r,d,y)}),Oh=fa("<",function(f,r,d){return r<d},function(f,r,d,y){return y.compare(r,d)<0}),Iy=fa(">",function(f,r,d){return r>d},function(f,r,d,y){return y.compare(r,d)>0}),np=fa("<=",function(f,r,d){return r<=d},function(f,r,d,y){return y.compare(r,d)<=0}),Oy=fa(">=",function(f,r,d){return r>=d},function(f,r,d,y){return y.compare(r,d)>=0});class Lh{constructor(r,d,y){this.type=Xr,this.locale=y,this.caseSensitive=r,this.diacriticSensitive=d}static parse(r,d){if(r.length!==2)return d.error("Expected one argument.");const y=r[1];if(typeof y!="object"||Array.isArray(y))return d.error("Collator options argument must be an object.");const v=d.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,On);if(!v)return null;const C=d.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,On);if(!C)return null;let M=null;return y.locale&&(M=d.parse(y.locale,1,ei),!M)?null:new Lh(v,C,M)}evaluate(r){return new jo(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class ip{constructor(r,d,y,v,C){this.type=ei,this.number=r,this.locale=d,this.currency=y,this.minFractionDigits=v,this.maxFractionDigits=C}static parse(r,d){if(r.length!==3)return d.error("Expected two arguments.");const y=d.parse(r[1],1,sn);if(!y)return null;const v=r[2];if(typeof v!="object"||Array.isArray(v))return d.error("NumberFormat options argument must be an object.");let C=null;if(v.locale&&(C=d.parse(v.locale,1,ei),!C))return null;let M=null;if(v.currency&&(M=d.parse(v.currency,1,ei),!M))return null;let R=null;if(v["min-fraction-digits"]&&(R=d.parse(v["min-fraction-digits"],1,sn),!R))return null;let I=null;return v["max-fraction-digits"]&&(I=d.parse(v["max-fraction-digits"],1,sn),!I)?null:new ip(y,C,M,R,I)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Fh{constructor(r){this.type=Pr,this.sections=r}static parse(r,d){if(r.length<2)return d.error("Expected at least one argument.");const y=r[1];if(!Array.isArray(y)&&typeof y=="object")return d.error("First argument must be an image or text section.");const v=[];let C=!1;for(let M=1;M<=r.length-1;++M){const R=r[M];if(C&&typeof R=="object"&&!Array.isArray(R)){C=!1;let I=null;if(R["font-scale"]&&(I=d.parse(R["font-scale"],1,sn),!I))return null;let V=null;if(R["text-font"]&&(V=d.parse(R["text-font"],1,es(ei)),!V))return null;let H=null;if(R["text-color"]&&(H=d.parse(R["text-color"],1,vs),!H))return null;let X=null;if(R["vertical-align"]){if(typeof R["vertical-align"]=="string"&&!Ea.includes(R["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${R["vertical-align"]}' instead.`);if(X=d.parse(R["vertical-align"],1,ei),!X)return null}const se=v[v.length-1];se.scale=I,se.font=V,se.textColor=H,se.verticalAlign=X}else{const I=d.parse(r[M],1,Vn);if(!I)return null;const V=I.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,v.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Fh(v)}evaluate(r){return new pr(this.sections.map(d=>{const y=d.content.evaluate(r);return Zi(y)===Na?new Aa("",y,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(r):null):new Aa(di(y),null,d.scale?d.scale.evaluate(r):null,d.font?d.font.evaluate(r).join(","):null,d.textColor?d.textColor.evaluate(r):null,d.verticalAlign?d.verticalAlign.evaluate(r):null)}))}eachChild(r){for(const d of this.sections)r(d.content),d.scale&&r(d.scale),d.font&&r(d.font),d.textColor&&r(d.textColor),d.verticalAlign&&r(d.verticalAlign)}outputDefined(){return!1}}class Ul{constructor(r){this.type=Na,this.input=r}static parse(r,d){if(r.length!==2)return d.error("Expected two arguments.");const y=d.parse(r[1],1,ei);return y?new Ul(y):d.error("No image name provided.")}evaluate(r){const d=this.input.evaluate(r),y=gs.fromString(d);return y&&r.availableImages&&(y.available=r.availableImages.indexOf(d)>-1),y}eachChild(r){r(this.input)}outputDefined(){return!1}}class Cc{constructor(r){this.type=sn,this.input=r}static parse(r,d){if(r.length!==2)return d.error(`Expected 1 argument, but found ${r.length-1} instead.`);const y=d.parse(r[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${ti(y.type)} instead.`):new Cc(y):null}evaluate(r){const d=this.input.evaluate(r);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new vi(`Expected value to be of type string or array, but found ${ti(Zi(d))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const To=8192;function sp(f,r){const d=(180+f[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,v=Math.pow(2,r.z);return[Math.round(d*v*To),Math.round(y*v*To)]}function Bh(f,r){const d=Math.pow(2,r.z);return[(v=(f[0]/To+r.x)/d,360*v-180),(y=(f[1]/To+r.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,v}function Tc(f,r){f[0]=Math.min(f[0],r[0]),f[1]=Math.min(f[1],r[1]),f[2]=Math.max(f[2],r[0]),f[3]=Math.max(f[3],r[1])}function Mu(f,r){return!(f[0]<=r[0]||f[2]>=r[2]||f[1]<=r[1]||f[3]>=r[3])}function Im(f,r,d){const y=f[0]-r[0],v=f[1]-r[1],C=f[0]-d[0],M=f[1]-d[1];return y*M-C*v==0&&y*C<=0&&v*M<=0}function bl(f,r,d,y){return(v=[y[0]-d[0],y[1]-d[1]])[0]*(C=[r[0]-f[0],r[1]-f[1]])[1]-v[1]*C[0]!=0&&!(!Au(f,r,d,y)||!Au(d,y,f,r));var v,C}function Ly(f,r,d){for(const y of d)for(let v=0;v<y.length-1;++v)if(bl(f,r,y[v],y[v+1]))return!0;return!1}function Eu(f,r,d=!1){let y=!1;for(const R of r)for(let I=0;I<R.length-1;I++){if(Im(f,R[I],R[I+1]))return d;(C=R[I])[1]>(v=f)[1]!=(M=R[I+1])[1]>v[1]&&v[0]<(M[0]-C[0])*(v[1]-C[1])/(M[1]-C[1])+C[0]&&(y=!y)}var v,C,M;return y}function Om(f,r){for(const d of r)if(Eu(f,d))return!0;return!1}function Vh(f,r){for(const d of f)if(!Eu(d,r))return!1;for(let d=0;d<f.length-1;++d)if(Ly(f[d],f[d+1],r))return!1;return!0}function rp(f,r){for(const d of r)if(Vh(f,d))return!0;return!1}function Au(f,r,d,y){const v=y[0]-d[0],C=y[1]-d[1],M=(f[0]-d[0])*C-v*(f[1]-d[1]),R=(r[0]-d[0])*C-v*(r[1]-d[1]);return M>0&&R<0||M<0&&R>0}function kc(f,r,d){const y=[];for(let v=0;v<f.length;v++){const C=[];for(let M=0;M<f[v].length;M++){const R=sp(f[v][M],d);Tc(r,R),C.push(R)}y.push(C)}return y}function Lm(f,r,d){const y=[];for(let v=0;v<f.length;v++){const C=kc(f[v],r,d);y.push(C)}return y}function Nd(f,r,d,y){if(f[0]<d[0]||f[0]>d[2]){const v=.5*y;let C=f[0]-d[0]>v?-y:d[0]-f[0]>v?y:0;C===0&&(C=f[0]-d[2]>v?-y:d[2]-f[0]>v?y:0),f[0]+=C}Tc(r,f)}function Pu(f,r,d,y){const v=Math.pow(2,y.z)*To,C=[y.x*To,y.y*To],M=[];for(const R of f)for(const I of R){const V=[I.x+C[0],I.y+C[1]];Nd(V,r,d,v),M.push(V)}return M}function ap(f,r,d,y){const v=Math.pow(2,y.z)*To,C=[y.x*To,y.y*To],M=[];for(const I of f){const V=[];for(const H of I){const X=[H.x+C[0],H.y+C[1]];Tc(r,X),V.push(X)}M.push(V)}if(r[2]-r[0]<=v/2){(R=r)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const I of M)for(const V of I)Nd(V,r,d,v)}var R;return M}class vl{constructor(r,d){this.type=On,this.geojson=r,this.geometries=d}static parse(r,d){if(r.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Mi(r[1])){const y=r[1];if(y.type==="FeatureCollection"){const v=[];for(const C of y.features){const{type:M,coordinates:R}=C.geometry;M==="Polygon"&&v.push(R),M==="MultiPolygon"&&v.push(...R)}if(v.length)return new vl(y,{type:"MultiPolygon",coordinates:v})}else if(y.type==="Feature"){const v=y.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new vl(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new vl(y,y)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(d,y){const v=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],M=d.canonicalID();if(y.type==="Polygon"){const R=kc(y.coordinates,C,M),I=Pu(d.geometry(),v,C,M);if(!Mu(v,C))return!1;for(const V of I)if(!Eu(V,R))return!1}if(y.type==="MultiPolygon"){const R=Lm(y.coordinates,C,M),I=Pu(d.geometry(),v,C,M);if(!Mu(v,C))return!1;for(const V of I)if(!Om(V,R))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(d,y){const v=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],M=d.canonicalID();if(y.type==="Polygon"){const R=kc(y.coordinates,C,M),I=ap(d.geometry(),v,C,M);if(!Mu(v,C))return!1;for(const V of I)if(!Vh(V,R))return!1}if(y.type==="MultiPolygon"){const R=Lm(y.coordinates,C,M),I=ap(d.geometry(),v,C,M);if(!Mu(v,C))return!1;for(const V of I)if(!rp(V,R))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Uh=class{constructor(f=[],r=(d,y)=>d<y?-1:d>y?1:0){if(this.data=f,this.length=this.data.length,this.compare=r,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:r,compare:d}=this,y=r[f];for(;f>0;){const v=f-1>>1,C=r[v];if(d(y,C)>=0)break;r[f]=C,f=v}r[f]=y}_down(f){const{data:r,compare:d}=this,y=this.length>>1,v=r[f];for(;f<y;){let C=1+(f<<1);const M=C+1;if(M<this.length&&d(r[M],r[C])<0&&(C=M),d(r[C],v)>=0)break;r[f]=r[C],f=C}r[f]=v}};function op(f,r,d=0,y=f.length-1,v=lp){for(;y>d;){if(y-d>600){const I=y-d+1,V=r-d+1,H=Math.log(I),X=.5*Math.exp(2*H/3),se=.5*Math.sqrt(H*X*(I-X)/I)*(V-I/2<0?-1:1);op(f,r,Math.max(d,Math.floor(r-V*X/I+se)),Math.min(y,Math.floor(r+(I-V)*X/I+se)),v)}const C=f[r];let M=d,R=y;for($l(f,d,r),v(f[y],C)>0&&$l(f,d,y);M<R;){for($l(f,M,R),M++,R--;v(f[M],C)<0;)M++;for(;v(f[R],C)>0;)R--}v(f[d],C)===0?$l(f,d,R):(R++,$l(f,R,y)),R<=r&&(d=R+1),r<=R&&(y=R-1)}}function $l(f,r,d){const y=f[r];f[r]=f[d],f[d]=y}function lp(f,r){return f<r?-1:f>r?1:0}function $h(f,r){if(f.length<=1)return[f];const d=[];let y,v;for(const C of f){const M=Fm(C);M!==0&&(C.area=Math.abs(M),v===void 0&&(v=M<0),v===M<0?(y&&d.push(y),y=[C]):y.push(C))}if(y&&d.push(y),r>1)for(let C=0;C<d.length;C++)d[C].length<=r||(op(d[C],r,1,d[C].length-1,Fy),d[C]=d[C].slice(0,r));return d}function Fy(f,r){return r.area-f.area}function Fm(f){let r=0;for(let d,y,v=0,C=f.length,M=C-1;v<C;M=v++)d=f[v],y=f[M],r+=(y.x-d.x)*(d.y+y.y);return r}const cp=1/298.257223563,Bm=cp*(2-cp),pa=Math.PI/180;class Nc{constructor(r){const d=6378.137*pa*1e3,y=Math.cos(r*pa),v=1/(1-Bm*(1-y*y)),C=Math.sqrt(v);this.kx=d*C*y,this.ky=d*C*v*(1-Bm)}distance(r,d){const y=this.wrap(r[0]-d[0])*this.kx,v=(r[1]-d[1])*this.ky;return Math.sqrt(y*y+v*v)}pointOnLine(r,d){let y,v,C,M,R=1/0;for(let I=0;I<r.length-1;I++){let V=r[I][0],H=r[I][1],X=this.wrap(r[I+1][0]-V)*this.kx,se=(r[I+1][1]-H)*this.ky,ce=0;X===0&&se===0||(ce=(this.wrap(d[0]-V)*this.kx*X+(d[1]-H)*this.ky*se)/(X*X+se*se),ce>1?(V=r[I+1][0],H=r[I+1][1]):ce>0&&(V+=X/this.kx*ce,H+=se/this.ky*ce)),X=this.wrap(d[0]-V)*this.kx,se=(d[1]-H)*this.ky;const he=X*X+se*se;he<R&&(R=he,y=V,v=H,C=I,M=ce)}return{point:[y,v],index:C,t:Math.max(0,Math.min(1,M))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Hh(f,r){return r[0]-f[0]}function Md(f){return f[1]-f[0]+1}function $o(f,r){return f[1]>=f[0]&&f[1]<r}function qh(f,r){if(f[0]>f[1])return[null,null];const d=Md(f);if(r){if(d===2)return[f,null];const v=Math.floor(d/2);return[[f[0],f[0]+v],[f[0]+v,f[1]]]}if(d===1)return[f,null];const y=Math.floor(d/2)-1;return[[f[0],f[0]+y],[f[0]+y+1,f[1]]]}function Ed(f,r){if(!$o(r,f.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let y=r[0];y<=r[1];++y)Tc(d,f[y]);return d}function zi(f){const r=[1/0,1/0,-1/0,-1/0];for(const d of f)for(const y of d)Tc(r,y);return r}function Mc(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Ad(f,r,d){if(!Mc(f)||!Mc(r))return NaN;let y=0,v=0;return f[2]<r[0]&&(y=r[0]-f[2]),f[0]>r[2]&&(y=f[0]-r[2]),f[1]>r[3]&&(v=f[1]-r[3]),f[3]<r[1]&&(v=r[1]-f[3]),d.distance([0,0],[y,v])}function ko(f,r,d){const y=d.pointOnLine(r,f);return d.distance(f,y.point)}function Pd(f,r,d,y,v){const C=Math.min(ko(f,[d,y],v),ko(r,[d,y],v)),M=Math.min(ko(d,[f,r],v),ko(y,[f,r],v));return Math.min(C,M)}function Vm(f,r,d,y,v){if(!$o(r,f.length)||!$o(y,d.length))return 1/0;let C=1/0;for(let M=r[0];M<r[1];++M){const R=f[M],I=f[M+1];for(let V=y[0];V<y[1];++V){const H=d[V],X=d[V+1];if(bl(R,I,H,X))return 0;C=Math.min(C,Pd(R,I,H,X,v))}}return C}function Ec(f,r,d,y,v){if(!$o(r,f.length)||!$o(y,d.length))return NaN;let C=1/0;for(let M=r[0];M<=r[1];++M)for(let R=y[0];R<=y[1];++R)if(C=Math.min(C,v.distance(f[M],d[R])),C===0)return C;return C}function Ru(f,r,d){if(Eu(f,r,!0))return 0;let y=1/0;for(const v of r){const C=v[0],M=v[v.length-1];if(C!==M&&(y=Math.min(y,ko(f,[M,C],d)),y===0))return y;const R=d.pointOnLine(v,f);if(y=Math.min(y,d.distance(f,R.point)),y===0)return y}return y}function up(f,r,d,y){if(!$o(r,f.length))return NaN;for(let C=r[0];C<=r[1];++C)if(Eu(f[C],d,!0))return 0;let v=1/0;for(let C=r[0];C<r[1];++C){const M=f[C],R=f[C+1];for(const I of d)for(let V=0,H=I.length,X=H-1;V<H;X=V++){const se=I[X],ce=I[V];if(bl(M,R,se,ce))return 0;v=Math.min(v,Pd(M,R,se,ce,y))}}return v}function dp(f,r){for(const d of f)for(const y of d)if(Eu(y,r,!0))return!0;return!1}function Ac(f,r,d,y=1/0){const v=zi(f),C=zi(r);if(y!==1/0&&Ad(v,C,d)>=y)return y;if(Mu(v,C)){if(dp(f,r))return 0}else if(dp(r,f))return 0;let M=1/0;for(const R of f)for(let I=0,V=R.length,H=V-1;I<V;H=I++){const X=R[H],se=R[I];for(const ce of r)for(let he=0,xe=ce.length,Se=xe-1;he<xe;Se=he++){const De=ce[Se],at=ce[he];if(bl(X,se,De,at))return 0;M=Math.min(M,Pd(X,se,De,at,d))}}return M}function hp(f,r,d,y,v,C){if(!C)return;const M=Ad(Ed(y,C),v,d);M<r&&f.push([M,C,[0,0]])}function Rd(f,r,d,y,v,C,M){if(!C||!M)return;const R=Ad(Ed(y,C),Ed(v,M),d);R<r&&f.push([R,C,M])}function Dd(f,r,d,y,v=1/0){let C=Math.min(y.distance(f[0],d[0][0]),v);if(C===0)return C;const M=new Uh([[0,[0,f.length-1],[0,0]]],Hh),R=zi(d);for(;M.length>0;){const I=M.pop();if(I[0]>=C)continue;const V=I[1],H=r?50:100;if(Md(V)<=H){if(!$o(V,f.length))return NaN;if(r){const X=up(f,V,d,y);if(isNaN(X)||X===0)return X;C=Math.min(C,X)}else for(let X=V[0];X<=V[1];++X){const se=Ru(f[X],d,y);if(C=Math.min(C,se),C===0)return 0}}else{const X=qh(V,r);hp(M,C,y,f,R,X[0]),hp(M,C,y,f,R,X[1])}}return C}function Gh(f,r,d,y,v,C=1/0){let M=Math.min(C,v.distance(f[0],d[0]));if(M===0)return M;const R=new Uh([[0,[0,f.length-1],[0,d.length-1]]],Hh);for(;R.length>0;){const I=R.pop();if(I[0]>=M)continue;const V=I[1],H=I[2],X=r?50:100,se=y?50:100;if(Md(V)<=X&&Md(H)<=se){if(!$o(V,f.length)&&$o(H,d.length))return NaN;let ce;if(r&&y)ce=Vm(f,V,d,H,v),M=Math.min(M,ce);else if(r&&!y){const he=f.slice(V[0],V[1]+1);for(let xe=H[0];xe<=H[1];++xe)if(ce=ko(d[xe],he,v),M=Math.min(M,ce),M===0)return M}else if(!r&&y){const he=d.slice(H[0],H[1]+1);for(let xe=V[0];xe<=V[1];++xe)if(ce=ko(f[xe],he,v),M=Math.min(M,ce),M===0)return M}else ce=Ec(f,V,d,H,v),M=Math.min(M,ce)}else{const ce=qh(V,r),he=qh(H,y);Rd(R,M,v,f,d,ce[0],he[0]),Rd(R,M,v,f,d,ce[0],he[1]),Rd(R,M,v,f,d,ce[1],he[0]),Rd(R,M,v,f,d,ce[1],he[1])}}return M}function fp(f){return f.type==="MultiPolygon"?f.coordinates.map(r=>({type:"Polygon",coordinates:r})):f.type==="MultiLineString"?f.coordinates.map(r=>({type:"LineString",coordinates:r})):f.type==="MultiPoint"?f.coordinates.map(r=>({type:"Point",coordinates:r})):[f]}class Pc{constructor(r,d){this.type=sn,this.geojson=r,this.geometries=d}static parse(r,d){if(r.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Mi(r[1])){const y=r[1];if(y.type==="FeatureCollection")return new Pc(y,y.features.map(v=>fp(v.geometry)).flat());if(y.type==="Feature")return new Pc(y,fp(y.geometry));if("type"in y&&"coordinates"in y)return new Pc(y,fp(y))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(d,y){const v=d.geometry(),C=v.flat().map(I=>Bh([I.x,I.y],d.canonical));if(v.length===0)return NaN;const M=new Nc(C[0][1]);let R=1/0;for(const I of y){switch(I.type){case"Point":R=Math.min(R,Gh(C,!1,[I.coordinates],!1,M,R));break;case"LineString":R=Math.min(R,Gh(C,!1,I.coordinates,!0,M,R));break;case"Polygon":R=Math.min(R,Dd(C,!1,I.coordinates,M,R))}if(R===0)return R}return R}(r,this.geometries);if(r.geometryType()==="LineString")return function(d,y){const v=d.geometry(),C=v.flat().map(I=>Bh([I.x,I.y],d.canonical));if(v.length===0)return NaN;const M=new Nc(C[0][1]);let R=1/0;for(const I of y){switch(I.type){case"Point":R=Math.min(R,Gh(C,!0,[I.coordinates],!1,M,R));break;case"LineString":R=Math.min(R,Gh(C,!0,I.coordinates,!0,M,R));break;case"Polygon":R=Math.min(R,Dd(C,!0,I.coordinates,M,R))}if(R===0)return R}return R}(r,this.geometries);if(r.geometryType()==="Polygon")return function(d,y){const v=d.geometry();if(v.length===0||v[0].length===0)return NaN;const C=$h(v,0).map(I=>I.map(V=>V.map(H=>Bh([H.x,H.y],d.canonical)))),M=new Nc(C[0][0][0][1]);let R=1/0;for(const I of y)for(const V of C){switch(I.type){case"Point":R=Math.min(R,Dd([I.coordinates],!1,V,M,R));break;case"LineString":R=Math.min(R,Dd(I.coordinates,!0,V,M,R));break;case"Polygon":R=Math.min(R,Ac(V,I.coordinates,M,R))}if(R===0)return R}return R}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Du{constructor(r){this.type=Vn,this.key=r}static parse(r,d){if(r.length!==2)return d.error(`Expected 1 argument, but found ${r.length-1} instead.`);const y=r[1];return y==null?d.error("Global state property must be defined."):typeof y!="string"?d.error(`Global state property must be string, but found ${typeof r[1]} instead.`):new Du(y)}evaluate(r){var d;const y=(d=r.globals)===null||d===void 0?void 0:d.globalState;return y&&Object.keys(y).length!==0?Ga(y,this.key):null}eachChild(){}outputDefined(){return!1}}const Rc={"==":Dr,"!=":kd,">":Iy,"<":Oh,">=":Oy,"<=":np,array:Yn,at:pt,boolean:Yn,case:kn,coalesce:Uo,collator:Lh,format:Fh,image:Ul,in:yt,"index-of":kt,interpolate:Si,"interpolate-hcl":Si,"interpolate-lab":Si,length:Cc,let:Ne,literal:Kn,match:dn,number:Yn,"number-format":ip,object:Yn,slice:yn,step:Un,string:Yn,"to-boolean":Es,"to-color":Es,"to-number":Es,"to-string":Es,var:Pe,within:vl,distance:Pc,"global-state":Du};class ma{constructor(r,d,y,v){this.name=r,this.type=d,this._evaluate=y,this.args=v}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,d){const y=r[0],v=ma.definitions[y];if(!v)return d.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(v)?v[0]:v.type,M=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,R=M.filter(([V])=>!Array.isArray(V)||V.length===r.length-1);let I=null;for(const[V,H]of R){I=new me(d.registry,wl,d.path,null,d.scope);const X=[];let se=!1;for(let ce=1;ce<r.length;ce++){const he=r[ce],xe=Array.isArray(V)?V[ce-1]:V.type,Se=I.parse(he,1+X.length,xe);if(!Se){se=!0;break}X.push(Se)}if(!se)if(Array.isArray(V)&&V.length!==X.length)I.error(`Expected ${V.length} arguments, but found ${X.length} instead.`);else{for(let ce=0;ce<X.length;ce++){const he=Array.isArray(V)?V[ce]:V.type,xe=X[ce];I.concat(ce+1).checkSubtype(he,xe.type)}if(I.errors.length===0)return new ma(y,C,H,X)}}if(R.length===1)d.errors.push(...I.errors);else{const V=(R.length?R:M).map(([X])=>{return se=X,Array.isArray(se)?`(${se.map(ti).join(", ")})`:`(${ti(se.type)}...)`;var se}).join(" | "),H=[];for(let X=1;X<r.length;X++){const se=d.parse(r[X],1+H.length);if(!se)return null;H.push(ti(se.type))}d.error(`Expected arguments of type ${V}, but found (${H.join(", ")}) instead.`)}return null}static register(r,d){ma.definitions=d;for(const y in d)r[y]=ma}}function Xa(f,[r,d,y,v]){r=r.evaluate(f),d=d.evaluate(f),y=y.evaluate(f);const C=v?v.evaluate(f):1,M=Pa(r,d,y,C);if(M)throw new vi(M);return new ui(r/255,d/255,y/255,C,!1)}function pp(f,r){return f in r}function ga(f,r){const d=r[f];return d===void 0?null:d}function gr(f){return{type:f}}function wl(f){if(f instanceof Pe)return wl(f.boundExpression);if(f instanceof ma&&f.name==="error"||f instanceof Lh||f instanceof vl||f instanceof Pc||f instanceof Du)return!1;const r=f instanceof Es||f instanceof Yn;let d=!0;return f.eachChild(y=>{d=r?d&&wl(y):d&&y instanceof Kn}),!!d&&zu(f)&&Dc(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function zu(f){if(f instanceof ma&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof vl||f instanceof Pc)return!1;let r=!0;return f.eachChild(d=>{r&&!zu(d)&&(r=!1)}),r}function Hl(f){if(f instanceof ma&&f.name==="feature-state")return!1;let r=!0;return f.eachChild(d=>{r&&!Hl(d)&&(r=!1)}),r}function Dc(f,r){if(f instanceof ma&&r.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild(y=>{d&&!Dc(y,r)&&(d=!1)}),d}function Wh(f){return{result:"success",value:f}}function No(f){return{result:"error",value:f}}function zc(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function zd(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Ho(f){return!!f.expression&&f.expression.interpolated}function _i(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function zr(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Zi(f)===Yr}function mp(f){return f}function Mo(f,r){const d=f.stops&&typeof f.stops[0][0]=="object",y=d||!(d||f.property!==void 0),v=f.type||(Ho(r)?"exponential":"interval"),C=function(H){switch(H.type){case"color":return ui.parse;case"padding":return Ms.parse;case"numberArray":return Ls.parse;case"colorArray":return ws.parse;default:return null}}(r);if(C&&((f=Ri({},f)).stops&&(f.stops=f.stops.map(H=>[H[0],C(H[1])])),f.default=C(f.default?f.default:r.default)),f.colorSpace&&(M=f.colorSpace)!=="rgb"&&M!=="hcl"&&M!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var M;const R=function(H){switch(H){case"exponential":return Id;case"interval":return qo;case"categorical":return Zh;case"identity":return gp;default:throw new Error(`Unknown function type "${H}"`)}}(v);let I,V;if(v==="categorical"){I=Object.create(null);for(const H of f.stops)I[H[0]]=H[1];V=typeof f.stops[0][0]}if(d){const H={},X=[];for(let he=0;he<f.stops.length;he++){const xe=f.stops[he],Se=xe[0].zoom;H[Se]===void 0&&(H[Se]={zoom:Se,type:f.type,property:f.property,default:f.default,stops:[]},X.push(Se)),H[Se].stops.push([xe[0].value,xe[1]])}const se=[];for(const he of X)se.push([H[he].zoom,Mo(H[he],r)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:Si.interpolationFactor.bind(void 0,ce),zoomStops:se.map(he=>he[0]),evaluate:({zoom:he},xe)=>Id({stops:se,base:f.base},r,he).evaluate(he,xe)}}if(y){const H=v==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:H,interpolationFactor:Si.interpolationFactor.bind(void 0,H),zoomStops:f.stops.map(X=>X[0]),evaluate:({zoom:X})=>R(f,r,X,I,V)}}return{kind:"source",evaluate(H,X){const se=X&&X.properties?X.properties[f.property]:void 0;return se===void 0?Iu(f.default,r.default):R(f,r,se,I,V)}}}function Iu(f,r,d){return f!==void 0?f:r!==void 0?r:d!==void 0?d:void 0}function Zh(f,r,d,y,v){return Iu(typeof d===v?y[d]:void 0,f.default,r.default)}function qo(f,r,d){if(_i(d)!=="number")return Iu(f.default,r.default);const y=f.stops.length;if(y===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[y-1][0])return f.stops[y-1][1];const v=Cn(f.stops.map(C=>C[0]),d);return f.stops[v][1]}function Id(f,r,d){const y=f.base!==void 0?f.base:1;if(_i(d)!=="number")return Iu(f.default,r.default);const v=f.stops.length;if(v===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[v-1][0])return f.stops[v-1][1];const C=Cn(f.stops.map(H=>H[0]),d),M=function(H,X,se,ce){const he=ce-se,xe=H-se;return he===0?0:X===1?xe/he:(Math.pow(X,xe)-1)/(Math.pow(X,he)-1)}(d,y,f.stops[C][0],f.stops[C+1][0]),R=f.stops[C][1],I=f.stops[C+1][1],V=As[r.type]||mp;return typeof R.evaluate=="function"?{evaluate(...H){const X=R.evaluate.apply(void 0,H),se=I.evaluate.apply(void 0,H);if(X!==void 0&&se!==void 0)return V(X,se,M,f.colorSpace)}}:V(R,I,M,f.colorSpace)}function gp(f,r,d){switch(r.type){case"color":d=ui.parse(d);break;case"formatted":d=pr.fromString(d.toString());break;case"resolvedImage":d=gs.fromString(d.toString());break;case"padding":d=Ms.parse(d);break;case"colorArray":d=ws.parse(d);break;case"numberArray":d=Ls.parse(d);break;default:_i(d)===r.type||r.type==="enum"&&r.values[d]||(d=void 0)}return Iu(d,f.default,r.default)}ma.register(Rc,{error:[{kind:"error"},[ei],(f,[r])=>{throw new vi(r.evaluate(f))}],typeof:[ei,[Vn],(f,[r])=>ti(Zi(r.evaluate(f)))],"to-rgba":[es(sn,4),[vs],(f,[r])=>{const[d,y,v,C]=r.evaluate(f).rgb;return[255*d,255*y,255*v,C]}],rgb:[vs,[sn,sn,sn],Xa],rgba:[vs,[sn,sn,sn,sn],Xa],has:{type:On,overloads:[[[ei],(f,[r])=>pp(r.evaluate(f),f.properties())],[[ei,Yr],(f,[r,d])=>pp(r.evaluate(f),d.evaluate(f))]]},get:{type:Vn,overloads:[[[ei],(f,[r])=>ga(r.evaluate(f),f.properties())],[[ei,Yr],(f,[r,d])=>ga(r.evaluate(f),d.evaluate(f))]]},"feature-state":[Vn,[ei],(f,[r])=>ga(r.evaluate(f),f.featureState||{})],properties:[Yr,[],f=>f.properties()],"geometry-type":[ei,[],f=>f.geometryType()],id:[Vn,[],f=>f.id()],zoom:[sn,[],f=>f.globals.zoom],"heatmap-density":[sn,[],f=>f.globals.heatmapDensity||0],elevation:[sn,[],f=>f.globals.elevation||0],"line-progress":[sn,[],f=>f.globals.lineProgress||0],accumulated:[Vn,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[sn,gr(sn),(f,r)=>{let d=0;for(const y of r)d+=y.evaluate(f);return d}],"*":[sn,gr(sn),(f,r)=>{let d=1;for(const y of r)d*=y.evaluate(f);return d}],"-":{type:sn,overloads:[[[sn,sn],(f,[r,d])=>r.evaluate(f)-d.evaluate(f)],[[sn],(f,[r])=>-r.evaluate(f)]]},"/":[sn,[sn,sn],(f,[r,d])=>r.evaluate(f)/d.evaluate(f)],"%":[sn,[sn,sn],(f,[r,d])=>r.evaluate(f)%d.evaluate(f)],ln2:[sn,[],()=>Math.LN2],pi:[sn,[],()=>Math.PI],e:[sn,[],()=>Math.E],"^":[sn,[sn,sn],(f,[r,d])=>Math.pow(r.evaluate(f),d.evaluate(f))],sqrt:[sn,[sn],(f,[r])=>Math.sqrt(r.evaluate(f))],log10:[sn,[sn],(f,[r])=>Math.log(r.evaluate(f))/Math.LN10],ln:[sn,[sn],(f,[r])=>Math.log(r.evaluate(f))],log2:[sn,[sn],(f,[r])=>Math.log(r.evaluate(f))/Math.LN2],sin:[sn,[sn],(f,[r])=>Math.sin(r.evaluate(f))],cos:[sn,[sn],(f,[r])=>Math.cos(r.evaluate(f))],tan:[sn,[sn],(f,[r])=>Math.tan(r.evaluate(f))],asin:[sn,[sn],(f,[r])=>Math.asin(r.evaluate(f))],acos:[sn,[sn],(f,[r])=>Math.acos(r.evaluate(f))],atan:[sn,[sn],(f,[r])=>Math.atan(r.evaluate(f))],min:[sn,gr(sn),(f,r)=>Math.min(...r.map(d=>d.evaluate(f)))],max:[sn,gr(sn),(f,r)=>Math.max(...r.map(d=>d.evaluate(f)))],abs:[sn,[sn],(f,[r])=>Math.abs(r.evaluate(f))],round:[sn,[sn],(f,[r])=>{const d=r.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[sn,[sn],(f,[r])=>Math.floor(r.evaluate(f))],ceil:[sn,[sn],(f,[r])=>Math.ceil(r.evaluate(f))],"filter-==":[On,[ei,Vn],(f,[r,d])=>f.properties()[r.value]===d.value],"filter-id-==":[On,[Vn],(f,[r])=>f.id()===r.value],"filter-type-==":[On,[ei],(f,[r])=>f.geometryType()===r.value],"filter-<":[On,[ei,Vn],(f,[r,d])=>{const y=f.properties()[r.value],v=d.value;return typeof y==typeof v&&y<v}],"filter-id-<":[On,[Vn],(f,[r])=>{const d=f.id(),y=r.value;return typeof d==typeof y&&d<y}],"filter->":[On,[ei,Vn],(f,[r,d])=>{const y=f.properties()[r.value],v=d.value;return typeof y==typeof v&&y>v}],"filter-id->":[On,[Vn],(f,[r])=>{const d=f.id(),y=r.value;return typeof d==typeof y&&d>y}],"filter-<=":[On,[ei,Vn],(f,[r,d])=>{const y=f.properties()[r.value],v=d.value;return typeof y==typeof v&&y<=v}],"filter-id-<=":[On,[Vn],(f,[r])=>{const d=f.id(),y=r.value;return typeof d==typeof y&&d<=y}],"filter->=":[On,[ei,Vn],(f,[r,d])=>{const y=f.properties()[r.value],v=d.value;return typeof y==typeof v&&y>=v}],"filter-id->=":[On,[Vn],(f,[r])=>{const d=f.id(),y=r.value;return typeof d==typeof y&&d>=y}],"filter-has":[On,[Vn],(f,[r])=>r.value in f.properties()],"filter-has-id":[On,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[On,[es(ei)],(f,[r])=>r.value.indexOf(f.geometryType())>=0],"filter-id-in":[On,[es(Vn)],(f,[r])=>r.value.indexOf(f.id())>=0],"filter-in-small":[On,[ei,es(Vn)],(f,[r,d])=>d.value.indexOf(f.properties()[r.value])>=0],"filter-in-large":[On,[ei,es(Vn)],(f,[r,d])=>function(y,v,C,M){for(;C<=M;){const R=C+M>>1;if(v[R]===y)return!0;v[R]>y?M=R-1:C=R+1}return!1}(f.properties()[r.value],d.value,0,d.value.length-1)],all:{type:On,overloads:[[[On,On],(f,[r,d])=>r.evaluate(f)&&d.evaluate(f)],[gr(On),(f,r)=>{for(const d of r)if(!d.evaluate(f))return!1;return!0}]]},any:{type:On,overloads:[[[On,On],(f,[r,d])=>r.evaluate(f)||d.evaluate(f)],[gr(On),(f,r)=>{for(const d of r)if(d.evaluate(f))return!0;return!1}]]},"!":[On,[On],(f,[r])=>!r.evaluate(f)],"is-supported-script":[On,[ei],(f,[r])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(r.evaluate(f))}],upcase:[ei,[ei],(f,[r])=>r.evaluate(f).toUpperCase()],downcase:[ei,[ei],(f,[r])=>r.evaluate(f).toLowerCase()],concat:[ei,gr(Vn),(f,r)=>r.map(d=>di(d.evaluate(f))).join("")],"resolved-locale":[ei,[Xr],(f,[r])=>r.evaluate(f).resolvedLocale()]});class ql{constructor(r,d,y){this.expression=r,this._warningHistory={},this._evaluator=new re,this._defaultValue=d?function(v){if(v.type==="color"&&zr(v.default))return new ui(0,0,0,0);switch(v.type){case"color":return ui.parse(v.default)||null;case"padding":return Ms.parse(v.default)||null;case"numberArray":return Ls.parse(v.default)||null;case"colorArray":return ws.parse(v.default)||null;case"variableAnchorOffsetCollection":return Zs.parse(v.default)||null;case"projectionDefinition":return rs.parse(v.default)||null;default:return v.default===void 0?null:v.default}}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null,this._globalState=y}evaluateWithoutErrorHandling(r,d,y,v,C,M){return this._globalState&&(r=Da(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=d,this._evaluator.featureState=y,this._evaluator.canonical=v,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(r,d,y,v,C,M){this._globalState&&(r=Da(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=d||null,this._evaluator.featureState=y||null,this._evaluator.canonical=v,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=M||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new vi(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console!="undefined"&&console.warn(R.message)),this._defaultValue}}}function Sl(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Rc}function Ic(f,r,d){const y=new me(Rc,wl,[],r?function(C){const M={color:vs,string:ei,number:sn,enum:ei,boolean:On,formatted:Pr,padding:da,numberArray:Kr,colorArray:ds,projectionDefinition:Ii,resolvedImage:Na,variableAnchorOffsetCollection:Di};return C.type==="array"?es(M[C.value]||Vn,C.length):M[C.type]}(r):void 0),v=y.parse(f,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Wh(new ql(v,r,d)):No(y.errors)}class Oc{constructor(r,d,y){this.kind=r,this._styleExpression=d,this.isStateDependent=r!=="constant"&&!Hl(d.expression),this.globalStateRefs=Ra(d.expression),this._globalState=y}evaluateWithoutErrorHandling(r,d,y,v,C,M){return this._globalState&&(r=Da(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,d,y,v,C,M)}evaluate(r,d,y,v,C,M){return this._globalState&&(r=Da(r,this._globalState)),this._styleExpression.evaluate(r,d,y,v,C,M)}}class ea{constructor(r,d,y,v,C){this.kind=r,this.zoomStops=y,this._styleExpression=d,this.isStateDependent=r!=="camera"&&!Hl(d.expression),this.globalStateRefs=Ra(d.expression),this.interpolationType=v,this._globalState=C}evaluateWithoutErrorHandling(r,d,y,v,C,M){return this._globalState&&(r=Da(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,d,y,v,C,M)}evaluate(r,d,y,v,C,M){return this._globalState&&(r=Da(r,this._globalState)),this._styleExpression.evaluate(r,d,y,v,C,M)}interpolationFactor(r,d,y){return this.interpolationType?Si.interpolationFactor(this.interpolationType,r,d,y):0}}function ya(f,r,d){const y=Ic(f,r,d);if(y.result==="error")return y;const v=y.value.expression,C=zu(v);if(!C&&!zc(r))return No([new li("","data expressions not supported")]);const M=Dc(v,["zoom"]);if(!M&&!zd(r))return No([new li("","zoom expressions not supported")]);const R=Ka(v);return R||M?R instanceof li?No([R]):R instanceof Si&&!Ho(r)?No([new li("",'"interpolate" expressions cannot be used with this property')]):Wh(R?new ea(C?"camera":"composite",y.value,R.labels,R instanceof Si?R.interpolation:void 0,d):new Oc(C?"constant":"source",y.value,d)):No([new li("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Go{constructor(r,d){this._parameters=r,this._specification=d,Ri(this,Mo(this._parameters,this._specification))}static deserialize(r){return new Go(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Ka(f){let r=null;if(f instanceof Ne)r=Ka(f.result);else if(f instanceof Uo){for(const d of f.args)if(r=Ka(d),r)break}else(f instanceof Un||f instanceof Si)&&f.input instanceof ma&&f.input.name==="zoom"&&(r=f);return r instanceof li||f.eachChild(d=>{const y=Ka(d);y instanceof li?r=y:!r&&y?r=new li("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&y&&r!==y&&(r=new li("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ra(f,r=new Set){return f instanceof Du&&r.add(f.key),f.eachChild(d=>{Ra(d,r)}),r}function Da(f,r){const{zoom:d,heatmapDensity:y,elevation:v,lineProgress:C,isSupportedScript:M,accumulated:R}=f!=null?f:{};return{zoom:d,heatmapDensity:y,elevation:v,lineProgress:C,isSupportedScript:M,accumulated:R,globalState:r}}function Od(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const r of f.slice(1))if(!Od(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const yp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Lc(f,r){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Od(f)||(f=Ei(f));const d=Ic(f,yp,r);if(d.result==="error")throw new Error(d.value.map(y=>`${y.key}: ${y.message}`).join(", "));return{filter:(y,v,C)=>d.value.evaluate(y,v,{},C),needGeometry:Ps(f),getGlobalStateRefs:()=>Ra(d.value.expression)}}function ta(f,r){return f<r?-1:f>r?1:0}function Ps(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let r=1;r<f.length;r++)if(Ps(f[r]))return!0;return!1}function Ei(f){if(!f)return!0;const r=f[0];return f.length<=1?r!=="any":r==="=="?Wo(f[1],f[2],"=="):r==="!="?Qa(Wo(f[1],f[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Wo(f[1],f[2],r):r==="any"?(d=f.slice(1),["any"].concat(d.map(Ei))):r==="all"?["all"].concat(f.slice(1).map(Ei)):r==="none"?["all"].concat(f.slice(1).map(Ei).map(Qa)):r==="in"?za(f[1],f.slice(2)):r==="!in"?Qa(za(f[1],f.slice(2))):r==="has"?Ou(f[1]):r!=="!has"||Qa(Ou(f[1]));var d}function Wo(f,r,d){switch(f){case"$type":return[`filter-type-${d}`,r];case"$id":return[`filter-id-${d}`,r];default:return[`filter-${d}`,f,r]}}function za(f,r){if(r.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(d=>typeof d!=typeof r[0])?["filter-in-large",f,["literal",r.sort(ta)]]:["filter-in-small",f,["literal",r]]}}function Ou(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Qa(f){return["!",f]}function Lu(f){const r=typeof f;if(r==="number"||r==="boolean"||r==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let v="[";for(const C of f)v+=`${Lu(C)},`;return`${v}]`}const d=Object.keys(f).sort();let y="{";for(let v=0;v<d.length;v++)y+=`${JSON.stringify(d[v])}:${Lu(f[d[v]])},`;return`${y}}`}function Ld(f){let r="";for(const d of Ct)r+=`/${Lu(f[d])}`;return r}function Fu(f){const r=f.value;return r?[new lt(f.key,r,"constants have been deprecated as of v8")]:[]}function hs(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Gl(f){if(Array.isArray(f))return f.map(Gl);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const r={};for(const d in f)r[d]=Gl(f[d]);return r}return hs(f)}function Ir(f){const r=f.key,d=f.value,y=f.valueSpec||{},v=f.objectElementValidators||{},C=f.style,M=f.styleSpec,R=f.validateSpec;let I=[];const V=_i(d);if(V!=="object")return[new lt(r,d,`object expected, ${V} found`)];for(const H in d){const X=H.split(".")[0],se=Ga(y,X)||y["*"];let ce;if(Ga(v,X))ce=v[X];else if(Ga(y,X))ce=R;else if(v["*"])ce=v["*"];else{if(!y["*"]){I.push(new lt(r,d[H],`unknown property "${H}"`));continue}ce=R}I=I.concat(ce({key:(r&&`${r}.`)+H,value:d[H],valueSpec:se,style:C,styleSpec:M,object:d,objectKey:H,validateSpec:R},d))}for(const H in y)v[H]||y[H].required&&y[H].default===void 0&&d[H]===void 0&&I.push(new lt(r,d,`missing required property "${H}"`));return I}function Fd(f){const r=f.value,d=f.valueSpec,y=f.style,v=f.styleSpec,C=f.key,M=f.arrayElementValidator||f.validateSpec;if(_i(r)!=="array")return[new lt(C,r,`array expected, ${_i(r)} found`)];if(d.length&&r.length!==d.length)return[new lt(C,r,`array length ${d.length} expected, length ${r.length} found`)];if(d["min-length"]&&r.length<d["min-length"])return[new lt(C,r,`array length at least ${d["min-length"]} expected, length ${r.length} found`)];let R={type:d.value,values:d.values};v.$version<7&&(R.function=d.function),_i(d.value)==="object"&&(R=d.value);let I=[];for(let V=0;V<r.length;V++)I=I.concat(M({array:r,arrayIndex:V,value:r[V],valueSpec:R,validateSpec:f.validateSpec,style:y,styleSpec:v,key:`${C}[${V}]`}));return I}function Zo(f){const r=f.key,d=f.value,y=f.valueSpec;let v=_i(d);return v==="number"&&d!=d&&(v="NaN"),v!=="number"?[new lt(r,d,`number expected, ${v} found`)]:"minimum"in y&&d<y.minimum?[new lt(r,d,`${d} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&d>y.maximum?[new lt(r,d,`${d} is greater than the maximum value ${y.maximum}`)]:[]}function Eo(f){const r=f.valueSpec,d=hs(f.value.type);let y,v,C,M={};const R=d!=="categorical"&&f.value.property===void 0,I=!R,V=_i(f.value.stops)==="array"&&_i(f.value.stops[0])==="array"&&_i(f.value.stops[0][0])==="object",H=Ir({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(ce){if(d==="identity")return[new lt(ce.key,ce.value,'identity function may not have a "stops" property')];let he=[];const xe=ce.value;return he=he.concat(Fd({key:ce.key,value:xe,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:X})),_i(xe)==="array"&&xe.length===0&&he.push(new lt(ce.key,xe,"array must have at least one stop")),he},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:r,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return d==="identity"&&R&&H.push(new lt(f.key,f.value,'missing required property "property"')),d==="identity"||f.value.stops||H.push(new lt(f.key,f.value,'missing required property "stops"')),d==="exponential"&&f.valueSpec.expression&&!Ho(f.valueSpec)&&H.push(new lt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(I&&!zc(f.valueSpec)?H.push(new lt(f.key,f.value,"property functions not supported")):R&&!zd(f.valueSpec)&&H.push(new lt(f.key,f.value,"zoom functions not supported"))),d!=="categorical"&&!V||f.value.property!==void 0||H.push(new lt(f.key,f.value,'"property" property is required')),H;function X(ce){let he=[];const xe=ce.value,Se=ce.key;if(_i(xe)!=="array")return[new lt(Se,xe,`array expected, ${_i(xe)} found`)];if(xe.length!==2)return[new lt(Se,xe,`array length 2 expected, length ${xe.length} found`)];if(V){if(_i(xe[0])!=="object")return[new lt(Se,xe,`object expected, ${_i(xe[0])} found`)];if(xe[0].zoom===void 0)return[new lt(Se,xe,"object stop key must have zoom")];if(xe[0].value===void 0)return[new lt(Se,xe,"object stop key must have value")];if(C&&C>hs(xe[0].zoom))return[new lt(Se,xe[0].zoom,"stop zoom values must appear in ascending order")];hs(xe[0].zoom)!==C&&(C=hs(xe[0].zoom),v=void 0,M={}),he=he.concat(Ir({key:`${Se}[0]`,value:xe[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Zo,value:se}}))}else he=he.concat(se({key:`${Se}[0]`,value:xe[0],validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},xe));return Sl(Gl(xe[1]))?he.concat([new lt(`${Se}[1]`,xe[1],"expressions are not allowed in function stops.")]):he.concat(ce.validateSpec({key:`${Se}[1]`,value:xe[1],valueSpec:r,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function se(ce,he){const xe=_i(ce.value),Se=hs(ce.value),De=ce.value!==null?ce.value:he;if(y){if(xe!==y)return[new lt(ce.key,De,`${xe} stop domain type must match previous stop domain type ${y}`)]}else y=xe;if(xe!=="number"&&xe!=="string"&&xe!=="boolean")return[new lt(ce.key,De,"stop domain value must be a number, string, or boolean")];if(xe!=="number"&&d!=="categorical"){let at=`number expected, ${xe} found`;return zc(r)&&d===void 0&&(at+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new lt(ce.key,De,at)]}return d!=="categorical"||xe!=="number"||isFinite(Se)&&Math.floor(Se)===Se?d!=="categorical"&&xe==="number"&&v!==void 0&&Se<v?[new lt(ce.key,De,"stop domain values must appear in ascending order")]:(v=Se,d==="categorical"&&Se in M?[new lt(ce.key,De,"stop domain values must be unique")]:(M[Se]=!0,[])):[new lt(ce.key,De,`integer expected, found ${Se}`)]}}function xa(f){const r=(f.expressionContext==="property"?ya:Ic)(Gl(f.value),f.valueSpec);if(r.result==="error")return r.value.map(y=>new lt(`${f.key}${y.key}`,f.value,y.message));const d=r.value.expression||r.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!d.outputDefined())return[new lt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Hl(d))return[new lt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Hl(d))return[new lt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Dc(d,["zoom","feature-state"]))return[new lt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!zu(d))return[new lt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function _a(f){const r=f.key,d=f.value,y=_i(d);return y!=="string"?[new lt(r,d,`color expected, ${y} found`)]:ui.parse(String(d))?[]:[new lt(r,d,`color expected, "${d}" found`)]}function Fc(f){const r=f.key,d=f.value,y=f.valueSpec,v=[];return Array.isArray(y.values)?y.values.indexOf(hs(d))===-1&&v.push(new lt(r,d,`expected one of [${y.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(y.values).indexOf(hs(d))===-1&&v.push(new lt(r,d,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(d)} found`)),v}function Bu(f){return Od(Gl(f.value))?xa(Ri({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bc(f)}function Bc(f){const r=f.value,d=f.key;if(_i(r)!=="array")return[new lt(d,r,`array expected, ${_i(r)} found`)];const y=f.styleSpec;let v,C=[];if(r.length<1)return[new lt(d,r,"filter array must have at least 1 element")];switch(C=C.concat(Fc({key:`${d}[0]`,value:r[0],valueSpec:y.filter_operator,style:f.style,styleSpec:f.styleSpec})),hs(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&hs(r[1])==="$type"&&C.push(new lt(d,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&C.push(new lt(d,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(v=_i(r[1]),v!=="string"&&C.push(new lt(`${d}[1]`,r[1],`string expected, ${v} found`)));for(let M=2;M<r.length;M++)v=_i(r[M]),hs(r[1])==="$type"?C=C.concat(Fc({key:`${d}[${M}]`,value:r[M],valueSpec:y.geometry_type,style:f.style,styleSpec:f.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&C.push(new lt(`${d}[${M}]`,r[M],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let M=1;M<r.length;M++)C=C.concat(Bc({key:`${d}[${M}]`,value:r[M],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":v=_i(r[1]),r.length!==2?C.push(new lt(d,r,`filter array for "${r[0]}" operator must have 2 elements`)):v!=="string"&&C.push(new lt(`${d}[1]`,r[1],`string expected, ${v} found`))}return C}function Bd(f,r){const d=f.key,y=f.validateSpec,v=f.style,C=f.styleSpec,M=f.value,R=f.objectKey,I=C[`${r}_${f.layerType}`];if(!I)return[];const V=R.match(/^(.*)-transition$/);if(r==="paint"&&V&&I[V[1]]&&I[V[1]].transition)return y({key:d,value:M,valueSpec:C.transition,style:v,styleSpec:C});const H=f.valueSpec||I[R];if(!H)return[new lt(d,M,`unknown property "${R}"`)];let X;if(_i(M)==="string"&&zc(H)&&!H.tokens&&(X=/^{([^}]+)}$/.exec(M)))return[new lt(d,M,`"${R}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(X[1])} }\`.`)];const se=[];return f.layerType==="symbol"&&(R==="text-field"&&v&&!v.glyphs&&se.push(new lt(d,M,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&zr(Gl(M))&&hs(M.type)==="identity"&&se.push(new lt(d,M,'"text-font" does not support identity functions'))),se.concat(y({key:f.key,value:M,valueSpec:H,style:v,styleSpec:C,expressionContext:"property",propertyType:r,propertyKey:R}))}function jl(f){return Bd(f,"paint")}function yr(f){return Bd(f,"layout")}function Cl(f){let r=[];const d=f.value,y=f.key,v=f.style,C=f.styleSpec;if(_i(d)!=="object")return[new lt(y,d,`object expected, ${_i(d)} found`)];d.type||d.ref||r.push(new lt(y,d,'either "type" or "ref" is required'));let M=hs(d.type);const R=hs(d.ref);if(d.id){const I=hs(d.id);for(let V=0;V<f.arrayIndex;V++){const H=v.layers[V];hs(H.id)===I&&r.push(new lt(y,d.id,`duplicate layer id "${d.id}", previously used at line ${H.id.__line__}`))}}if("ref"in d){let I;["type","source","source-layer","filter","layout"].forEach(V=>{V in d&&r.push(new lt(y,d[V],`"${V}" is prohibited for ref layers`))}),v.layers.forEach(V=>{hs(V.id)===R&&(I=V)}),I?I.ref?r.push(new lt(y,d.ref,"ref cannot reference another ref layer")):M=hs(I.type):r.push(new lt(y,d.ref,`ref layer "${R}" not found`))}else if(M!=="background")if(d.source){const I=v.sources&&v.sources[d.source],V=I&&hs(I.type);I?V==="vector"&&M==="raster"?r.push(new lt(y,d.source,`layer "${d.id}" requires a raster source`)):V!=="raster-dem"&&M==="hillshade"||V!=="raster-dem"&&M==="color-relief"?r.push(new lt(y,d.source,`layer "${d.id}" requires a raster-dem source`)):V==="raster"&&M!=="raster"?r.push(new lt(y,d.source,`layer "${d.id}" requires a vector source`)):V!=="vector"||d["source-layer"]?V==="raster-dem"&&M!=="hillshade"&&M!=="color-relief"?r.push(new lt(y,d.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):M!=="line"||!d.paint||!d.paint["line-gradient"]||V==="geojson"&&I.lineMetrics||r.push(new lt(y,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new lt(y,d,`layer "${d.id}" must specify a "source-layer"`)):r.push(new lt(y,d.source,`source "${d.source}" not found`))}else r.push(new lt(y,d,'missing required property "source"'));return r=r.concat(Ir({key:y,value:d,valueSpec:C.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${y}.type`,value:d.type,valueSpec:C.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:d,objectKey:"type"}),filter:Bu,layout:I=>Ir({layer:d,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":V=>yr(Ri({layerType:M},V))}}),paint:I=>Ir({layer:d,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":V=>jl(Ri({layerType:M},V))}})}})),r}function Wl(f){const r=f.value,d=f.key,y=_i(r);return y!=="string"?[new lt(d,r,`string expected, ${y} found`)]:[]}const Um={promoteId:function({key:f,value:r}){if(_i(r)==="string")return Wl({key:f,value:r});{const d=[];for(const y in r)d.push(...Wl({key:`${f}.${y}`,value:r[y]}));return d}}};function $m(f){const r=f.value,d=f.key,y=f.styleSpec,v=f.style,C=f.validateSpec;if(!r.type)return[new lt(d,r,'"type" is required')];const M=hs(r.type);let R;switch(M){case"vector":case"raster":return R=Ir({key:d,value:r,valueSpec:y[`source_${M.replace("-","_")}`],style:f.style,styleSpec:y,objectElementValidators:Um,validateSpec:C}),R;case"raster-dem":return R=function(I){var V;const H=(V=I.sourceName)!==null&&V!==void 0?V:"",X=I.value,se=I.styleSpec,ce=se.source_raster_dem,he=I.style;let xe=[];const Se=_i(X);if(X===void 0)return xe;if(Se!=="object")return xe.push(new lt("source_raster_dem",X,`object expected, ${Se} found`)),xe;const De=hs(X.encoding)==="custom",at=["redFactor","greenFactor","blueFactor","baseShift"],Ve=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Ze in X)!De&&at.includes(Ze)?xe.push(new lt(Ze,X[Ze],`In "${H}": "${Ze}" is only valid when "encoding" is set to "custom". ${Ve} encoding found`)):ce[Ze]?xe=xe.concat(I.validateSpec({key:Ze,value:X[Ze],valueSpec:ce[Ze],validateSpec:I.validateSpec,style:he,styleSpec:se})):xe.push(new lt(Ze,X[Ze],`unknown property "${Ze}"`));return xe}({sourceName:d,value:r,style:f.style,styleSpec:y,validateSpec:C}),R;case"geojson":if(R=Ir({key:d,value:r,valueSpec:y.source_geojson,style:v,styleSpec:y,validateSpec:C,objectElementValidators:Um}),r.cluster)for(const I in r.clusterProperties){const[V,H]=r.clusterProperties[I],X=typeof V=="string"?[V,["accumulated"],["get",I]]:V;R.push(...xa({key:`${d}.${I}.map`,value:H,expressionContext:"cluster-map"})),R.push(...xa({key:`${d}.${I}.reduce`,value:X,expressionContext:"cluster-reduce"}))}return R;case"video":return Ir({key:d,value:r,valueSpec:y.source_video,style:v,validateSpec:C,styleSpec:y});case"image":return Ir({key:d,value:r,valueSpec:y.source_image,style:v,validateSpec:C,styleSpec:y});case"canvas":return[new lt(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fc({key:`${d}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Hm(f){const r=f.value,d=f.styleSpec,y=d.light,v=f.style;let C=[];const M=_i(r);if(r===void 0)return C;if(M!=="object")return C=C.concat([new lt("light",r,`object expected, ${M} found`)]),C;for(const R in r){const I=R.match(/^(.*)-transition$/);C=C.concat(I&&y[I[1]]&&y[I[1]].transition?f.validateSpec({key:R,value:r[R],valueSpec:d.transition,validateSpec:f.validateSpec,style:v,styleSpec:d}):y[R]?f.validateSpec({key:R,value:r[R],valueSpec:y[R],validateSpec:f.validateSpec,style:v,styleSpec:d}):[new lt(R,r[R],`unknown property "${R}"`)])}return C}function er(f){const r=f.value,d=f.styleSpec,y=d.sky,v=f.style,C=_i(r);if(r===void 0)return[];if(C!=="object")return[new lt("sky",r,`object expected, ${C} found`)];let M=[];for(const R in r)M=M.concat(y[R]?f.validateSpec({key:R,value:r[R],valueSpec:y[R],style:v,styleSpec:d}):[new lt(R,r[R],`unknown property "${R}"`)]);return M}function Yh(f){const r=f.value,d=f.styleSpec,y=d.terrain,v=f.style;let C=[];const M=_i(r);if(r===void 0)return C;if(M!=="object")return C=C.concat([new lt("terrain",r,`object expected, ${M} found`)]),C;for(const R in r)C=C.concat(y[R]?f.validateSpec({key:R,value:r[R],valueSpec:y[R],validateSpec:f.validateSpec,style:v,styleSpec:d}):[new lt(R,r[R],`unknown property "${R}"`)]);return C}function Yo(f){let r=[];const d=f.value,y=f.key;if(Array.isArray(d)){const v=[],C=[];for(const M in d)d[M].id&&v.includes(d[M].id)&&r.push(new lt(y,d,`all the sprites' ids must be unique, but ${d[M].id} is duplicated`)),v.push(d[M].id),d[M].url&&C.includes(d[M].url)&&r.push(new lt(y,d,`all the sprites' URLs must be unique, but ${d[M].url} is duplicated`)),C.push(d[M].url),r=r.concat(Ir({key:`${y}[${M}]`,value:d[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return r}return Wl({key:y,value:d})}function Xo(f){return r=f.value,r&&r.constructor===Object?[]:[new lt(f.key,f.value,`object expected, ${_i(f.value)} found`)];var r}const Or={"*":()=>[],array:Fd,boolean:function(f){const r=f.value,d=f.key,y=_i(r);return y!=="boolean"?[new lt(d,r,`boolean expected, ${y} found`)]:[]},number:Zo,color:_a,constants:Fu,enum:Fc,filter:Bu,function:Eo,layer:Cl,object:Ir,source:$m,light:Hm,sky:er,terrain:Yh,projection:function(f){const r=f.value,d=f.styleSpec,y=d.projection,v=f.style,C=_i(r);if(r===void 0)return[];if(C!=="object")return[new lt("projection",r,`object expected, ${C} found`)];let M=[];for(const R in r)M=M.concat(y[R]?f.validateSpec({key:R,value:r[R],valueSpec:y[R],style:v,styleSpec:d}):[new lt(R,r[R],`unknown property "${R}"`)]);return M},projectionDefinition:function(f){const r=f.key;let d=f.value;d=d instanceof String?d.valueOf():d;const y=_i(d);return y!=="array"||function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"}(d)||function(v){return!!["interpolate","step","literal"].includes(v[0])}(d)?["array","string"].includes(y)?[]:[new lt(r,d,`projection expected, invalid type "${y}" found`)]:[new lt(r,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:Wl,formatted:function(f){return Wl(f).length===0?[]:xa(f)},resolvedImage:function(f){return Wl(f).length===0?[]:xa(f)},padding:function(f){const r=f.key,d=f.value;if(_i(d)==="array"){if(d.length<1||d.length>4)return[new lt(r,d,`padding requires 1 to 4 values; ${d.length} values found`)];const y={type:"number"};let v=[];for(let C=0;C<d.length;C++)v=v.concat(f.validateSpec({key:`${r}[${C}]`,value:d[C],validateSpec:f.validateSpec,valueSpec:y}));return v}return Zo({key:r,value:d,valueSpec:{}})},numberArray:function(f){const r=f.key,d=f.value;if(_i(d)==="array"){const y={type:"number"};if(d.length<1)return[new lt(r,d,"array length at least 1 expected, length 0 found")];let v=[];for(let C=0;C<d.length;C++)v=v.concat(f.validateSpec({key:`${r}[${C}]`,value:d[C],validateSpec:f.validateSpec,valueSpec:y}));return v}return Zo({key:r,value:d,valueSpec:{}})},colorArray:function(f){const r=f.key,d=f.value;if(_i(d)==="array"){if(d.length<1)return[new lt(r,d,"array length at least 1 expected, length 0 found")];let y=[];for(let v=0;v<d.length;v++)y=y.concat(_a({key:`${r}[${v}]`,value:d[v]}));return y}return _a({key:r,value:d})},variableAnchorOffsetCollection:function(f){const r=f.key,d=f.value,y=_i(d),v=f.styleSpec;if(y!=="array"||d.length<1||d.length%2!=0)return[new lt(r,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let M=0;M<d.length;M+=2)C=C.concat(Fc({key:`${r}[${M}]`,value:d[M],valueSpec:v.layout_symbol["text-anchor"]})),C=C.concat(Fd({key:`${r}[${M+1}]`,value:d[M+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:v}));return C},sprite:Yo,state:Xo};function Ia(f){const r=f.value,d=f.valueSpec,y=f.styleSpec;return f.validateSpec=Ia,d.expression&&zr(hs(r))?Eo(f):d.expression&&Sl(Gl(r))?xa(f):d.type&&Or[d.type]?Or[d.type](f):Ir(Ri({},f,{valueSpec:d.type?y[d.type]:d}))}function Zl(f){const r=f.value,d=f.key,y=Wl(f);return y.length||(r.indexOf("{fontstack}")===-1&&y.push(new lt(d,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&y.push(new lt(d,r,'"glyphs" url must include a "{range}" token'))),y}function Ja(f,r=dt){let d=[];return d=d.concat(Ia({key:"",value:f,valueSpec:r.$root,styleSpec:r,style:f,validateSpec:Ia,objectElementValidators:{glyphs:Zl,"*":()=>[]}})),f.constants&&(d=d.concat(Fu({key:"constants",value:f.constants}))),Vu(d)}function eo(f){return function(r){return f(Object.assign({},r,{validateSpec:Ia}))}}function Vu(f){return[].concat(f).sort((r,d)=>r.line-d.line)}function Oa(f){return function(...r){return Vu(f.apply(this,r))}}Ja.source=Oa(eo($m)),Ja.sprite=Oa(eo(Yo)),Ja.glyphs=Oa(eo(Zl)),Ja.light=Oa(eo(Hm)),Ja.sky=Oa(eo(er)),Ja.terrain=Oa(eo(Yh)),Ja.state=Oa(eo(Xo)),Ja.layer=Oa(eo(Cl)),Ja.filter=Oa(eo(Bu)),Ja.paintProperty=Oa(eo(jl)),Ja.layoutProperty=Oa(eo(yr));const ba=Ja,xp=ba.light,Uu=ba.sky,qm=ba.paintProperty,Tl=ba.layoutProperty;function _p(f,r){let d=!1;if(r&&r.length)for(const y of r)f.fire(new bn(new Error(y.message))),d=!0;return d}class Yl{constructor(r,d,y){const v=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const M=new Int32Array(this.arrayBuffer);r=M[0],this.d=(d=M[1])+2*(y=M[2]);for(let I=0;I<this.d*this.d;I++){const V=M[3+I],H=M[3+I+1];v.push(V===H?null:M.subarray(V,H))}const R=M[3+v.length+1];this.keys=M.subarray(M[3+v.length],R),this.bboxes=M.subarray(R),this.insert=this._insertReadonly}else{this.d=d+2*y;for(let M=0;M<this.d*this.d;M++)v.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=r,this.padding=y,this.scale=d/r,this.uid=0;const C=y/d*r;this.min=-C,this.max=r+C}insert(r,d,y,v,C){this._forEachCell(d,y,v,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(v),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,d,y,v,C,M){this.cells[C].push(M)}query(r,d,y,v,C){const M=this.min,R=this.max;if(r<=M&&d<=M&&R<=y&&R<=v&&!C)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(r,d,y,v,this._queryCell,I,{},C),I}}_queryCell(r,d,y,v,C,M,R,I){const V=this.cells[C];if(V!==null){const H=this.keys,X=this.bboxes;for(let se=0;se<V.length;se++){const ce=V[se];if(R[ce]===void 0){const he=4*ce;(I?I(X[he+0],X[he+1],X[he+2],X[he+3]):r<=X[he+2]&&d<=X[he+3]&&y>=X[he+0]&&v>=X[he+1])?(R[ce]=!0,M.push(H[ce])):R[ce]=!1}}}}_forEachCell(r,d,y,v,C,M,R,I){const V=this._convertToCellCoord(r),H=this._convertToCellCoord(d),X=this._convertToCellCoord(y),se=this._convertToCellCoord(v);for(let ce=V;ce<=X;ce++)for(let he=H;he<=se;he++){const xe=this.d*he+ce;if((!I||I(this._convertFromCellCoord(ce),this._convertFromCellCoord(he),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(he+1)))&&C.call(this,r,d,y,v,xe,M,R,I))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,d=3+this.cells.length+1+1;let y=0;for(let M=0;M<this.cells.length;M++)y+=this.cells[M].length;const v=new Int32Array(d+y+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let C=d;for(let M=0;M<r.length;M++){const R=r[M];v[3+M]=C,v.set(R,C),C+=R.length}return v[3+r.length]=C,v.set(this.keys,C),C+=this.keys.length,v[3+r.length+1]=C,v.set(this.bboxes,C),C+=this.bboxes.length,v.buffer}static serialize(r,d){const y=r.toArrayBuffer();return d&&d.push(y),{buffer:y}}static deserialize(r){return new Yl(r.buffer)}}const Ao={};function xn(f,r,d={}){if(Ao[f])throw new Error(`${f} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:f,writeable:!1}),Ao[f]={klass:r,omit:d.omit||[],shallow:d.shallow||[]}}xn("Object",Object),xn("Set",Set),xn("TransferableGridIndex",Yl),xn("Color",ui),xn("Error",Error),xn("AJAXError",Re),xn("ResolvedImage",gs),xn("StylePropertyFunction",Go),xn("StyleExpression",ql,{omit:["_evaluator"]}),xn("ZoomDependentExpression",ea),xn("ZoomConstantExpression",Oc),xn("CompoundExpression",ma,{omit:["_evaluate"]});for(const f in Rc)Rc[f]._classRegistryKey||xn(`Expression_${f}`,Rc[f]);function Vd(f){return f&&typeof ArrayBuffer!="undefined"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Xh(f){return f.$name||f.constructor._classRegistryKey}function kl(f){return!function(r){if(r===null||typeof r!="object")return!1;const d=Xh(r);return!(!d||d==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||Vd(f)||ln(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function $u(f,r){if(kl(f))return(Vd(f)||ln(f))&&r&&r.push(f),ArrayBuffer.isView(f)&&r&&r.push(f.buffer),f instanceof ImageData&&r&&r.push(f.data.buffer),f;if(Array.isArray(f)){const C=[];for(const M of f)C.push($u(M,r));return C}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const d=Xh(f);if(!d)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Ao[d])throw new Error(`${d} is not registered.`);const{klass:y}=Ao[d],v=y.serialize?y.serialize(f,r):{};if(y.serialize){if(r&&v===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in f){if(!f.hasOwnProperty(C)||Ao[d].omit.indexOf(C)>=0)continue;const M=f[C];v[C]=Ao[d].shallow.indexOf(C)>=0?M:$u(M,r)}f instanceof Error&&(v.message=f.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(v.$name=d),v}function Xl(f){if(kl(f))return f;if(Array.isArray(f))return f.map(Xl);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const r=Xh(f)||"Object";if(!Ao[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:d}=Ao[r];if(!d)throw new Error(`can't deserialize unregistered class ${r}`);if(d.deserialize)return d.deserialize(f);const y=Object.create(d.prototype);for(const v of Object.keys(f)){if(v==="$name")continue;const C=f[v];y[v]=Ao[r].shallow.indexOf(v)>=0?C:Xl(C)}return y}class La{constructor(){this.first=!0}update(r,d){const y=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=d),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=y,!0))}}const mi={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Hu(f){for(const r of f)if(Kl(r.charCodeAt(0)))return!0;return!1}function Nl(f){for(const r of f)if(!Kh(r.charCodeAt(0)))return!1;return!0}function Po(f){const r=f.map(d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch(y){return null}}).filter(d=>d);return new RegExp(r.join("|"),"u")}const Vc=Po(["Arab","Dupl","Mong","Ougr","Syrc"]);function Kh(f){return!Vc.test(String.fromCodePoint(f))}const Qh=Po(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Kl(f){return!(f!==746&&f!==747&&(f<4352||!(mi["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||mi["CJK Compatibility"](f)||mi["CJK Strokes"](f)||!(!mi["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||mi["Enclosed CJK Letters and Months"](f)||mi["Ideographic Description Characters"](f)||mi.Kanbun(f)||mi.Katakana(f)&&f!==12540||!(!mi["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!mi["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||mi["Vertical Forms"](f)||mi["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||Qh.test(String.fromCodePoint(f)))))}function qu(f){return!(Kl(f)||function(r){return!!(mi["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||mi["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||mi["Letterlike Symbols"](r)||mi["Number Forms"](r)||mi["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||mi["Control Pictures"](r)&&r!==9251||mi["Optical Character Recognition"](r)||mi["Enclosed Alphanumerics"](r)||mi["Geometric Shapes"](r)||mi["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||mi["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||mi["CJK Symbols and Punctuation"](r)||mi.Katakana(r)||mi["Private Use Area"](r)||mi["CJK Compatibility Forms"](r)||mi["Small Form Variants"](r)||mi["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(f))}const bp=Po(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function vp(f){return bp.test(String.fromCodePoint(f))}function Uc(f,r){return!(!r&&vp(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||mi.Khmer(f))}function Ud(f){for(const r of f)if(vp(r.charCodeAt(0)))return!0;return!1}const Ml=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Ml.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,r){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const d=f.pluginURL,y=new Promise(C=>{this.loadScriptResolve=C});r(d);const v=new Promise(C=>setTimeout(()=>C(),this.TIMEOUT));if(yield Promise.race([y,v]),this.isParsed()){const C={pluginStatus:"loaded",pluginURL:d};return this.setState(C),C}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)})}};class Yi{constructor(r,d){this.isSupportedScript=Jh,this.zoom=r,d?(this.now=d.now||0,this.fadeDuration=d.fadeDuration||0,this.zoomHistory=d.zoomHistory||new La,this.transition=d.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new La,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,d=r-Math.floor(r),y=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*d}}}function Jh(f){return function(r,d){for(const y of r)if(!Uc(y.charCodeAt(0),d))return!1;return!0}(f,Ml.getRTLTextPluginStatus()==="loaded")}class to{constructor(r,d,y){this.property=r,this.value=d,this.expression=function(v,C,M){if(zr(v))return new Go(v,C);if(Sl(v)){const R=ya(v,C,M);if(R.result==="error")throw new Error(R.value.map(I=>`${I.key}: ${I.message}`).join(", "));return R.value}{let R=v;return C.type==="color"&&typeof v=="string"?R=ui.parse(v):C.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?C.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?C.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?C.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?R=Zs.parse(v):C.type==="projectionDefinition"&&typeof v=="string"&&(R=rs.parse(v)):R=ws.parse(v):R=Ls.parse(v):R=Ms.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>R}}}(d===void 0?r.specification.default:d,r.specification,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(r,d,y){return this.property.possiblyEvaluate(this,r,d,y)}}class gi{constructor(r,d){this.property=r,this.value=new to(r,void 0,d)}transitioned(r,d){return new js(this.property,this.value,d,Ge({},r.transition,this.transition),r.now)}untransitioned(){return new js(this.property,this.value,null,{},0)}}class Xi{constructor(r,d){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._globalState=d}getValue(r){return It(this._values[r].value.value)}setValue(r,d){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new gi(this._values[r].property,this._globalState)),this._values[r].value=new to(this._values[r].property,d===null?void 0:It(d),this._globalState)}getTransition(r){return It(this._values[r].transition)}setTransition(r,d){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new gi(this._values[r].property,this._globalState)),this._values[r].transition=It(d)||void 0}serialize(){const r={};for(const d of Object.keys(this._values)){const y=this.getValue(d);y!==void 0&&(r[d]=y);const v=this.getTransition(d);v!==void 0&&(r[`${d}-transition`]=v)}return r}transitioned(r,d){const y=new $d(this._properties);for(const v of Object.keys(this._values))y._values[v]=this._values[v].transitioned(r,d._values[v]);return y}untransitioned(){const r=new $d(this._properties);for(const d of Object.keys(this._values))r._values[d]=this._values[d].untransitioned();return r}}class js{constructor(r,d,y,v,C){this.property=r,this.value=d,this.begin=C+v.delay||0,this.end=this.begin+v.duration||0,r.specification.transition&&(v.delay||v.duration)&&(this.prior=y)}possiblyEvaluate(r,d,y){const v=r.now||0,C=this.value.possiblyEvaluate(r,d,y),M=this.prior;if(M){if(v>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(v<this.begin)return M.possiblyEvaluate(r,d,y);{const R=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(r,d,y),C,Ae(R))}}return C}}class $d{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,d,y){const v=new $c(this._properties);for(const C of Object.keys(this._values))v._values[C]=this._values[C].possiblyEvaluate(r,d,y);return v}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Ql{constructor(r,d){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._globalState=d}hasValue(r){return this._values[r].value!==void 0}getValue(r){return It(this._values[r].value)}setValue(r,d){this._values[r]=new to(this._values[r].property,d===null?void 0:It(d),this._globalState)}serialize(){const r={};for(const d of Object.keys(this._values)){const y=this.getValue(d);y!==void 0&&(r[d]=y)}return r}possiblyEvaluate(r,d,y){const v=new $c(this._properties);for(const C of Object.keys(this._values))v._values[C]=this._values[C].possiblyEvaluate(r,d,y);return v}}class Lr{constructor(r,d,y){this.property=r,this.value=d,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,d,y,v){return this.property.evaluate(this.value,this.parameters,r,d,y,v)}}class $c{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Nn{constructor(r){this.specification=r}possiblyEvaluate(r,d){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(d)}interpolate(r,d,y){const v=As[this.specification.type];return v?v(r,d,y):r}}class Dn{constructor(r,d){this.specification=r,this.overrides=d}possiblyEvaluate(r,d,y,v){return new Lr(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(d,null,{},y,v)}:r.expression,d)}interpolate(r,d,y){if(r.value.kind!=="constant"||d.value.kind!=="constant")return r;if(r.value.value===void 0||d.value.value===void 0)return new Lr(this,{kind:"constant",value:void 0},r.parameters);const v=As[this.specification.type];if(v){const C=v(r.value.value,d.value.value,y);return new Lr(this,{kind:"constant",value:C},r.parameters)}return r}evaluate(r,d,y,v,C,M){return r.kind==="constant"?r.value:r.evaluate(d,y,v,C,M)}}class Gu extends Dn{possiblyEvaluate(r,d,y,v){if(r.value===void 0)return new Lr(this,{kind:"constant",value:void 0},d);if(r.expression.kind==="constant"){const C=r.expression.evaluate(d,null,{},y,v),M=r.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,R=this._calculate(M,M,M,d);return new Lr(this,{kind:"constant",value:R},d)}if(r.expression.kind==="camera"){const C=this._calculate(r.expression.evaluate({zoom:d.zoom-1}),r.expression.evaluate({zoom:d.zoom}),r.expression.evaluate({zoom:d.zoom+1}),d);return new Lr(this,{kind:"constant",value:C},d)}return new Lr(this,r.expression,d)}evaluate(r,d,y,v,C,M){if(r.kind==="source"){const R=r.evaluate(d,y,v,C,M);return this._calculate(R,R,R,d)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(d.zoom)-1},y,v),r.evaluate({zoom:Math.floor(d.zoom)},y,v),r.evaluate({zoom:Math.floor(d.zoom)+1},y,v),d):r.value}_calculate(r,d,y,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:r,to:d}:{from:y,to:d}}interpolate(r){return r}}class Fs{constructor(r){this.specification=r}possiblyEvaluate(r,d,y,v){if(r.value!==void 0){if(r.expression.kind==="constant"){const C=r.expression.evaluate(d,null,{},y,v);return this._calculate(C,C,C,d)}return this._calculate(r.expression.evaluate(new Yi(Math.floor(d.zoom-1),d)),r.expression.evaluate(new Yi(Math.floor(d.zoom),d)),r.expression.evaluate(new Yi(Math.floor(d.zoom+1),d)),d)}}_calculate(r,d,y,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:r,to:d}:{from:y,to:d}}interpolate(r){return r}}class Wu{constructor(r){this.specification=r}possiblyEvaluate(r,d,y,v){return!!r.expression.evaluate(d,null,{},y,v)}interpolate(){return!1}}class Cr{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in r){const y=r[d];y.specification.overridable&&this.overridableProperties.push(d);const v=this.defaultPropertyValues[d]=new to(y,void 0,void 0),C=this.defaultTransitionablePropertyValues[d]=new gi(y,void 0);this.defaultTransitioningPropertyValues[d]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=v.possiblyEvaluate({})}}}xn("DataDrivenProperty",Dn),xn("DataConstantProperty",Nn),xn("CrossFadedDataDrivenProperty",Gu),xn("CrossFadedProperty",Fs),xn("ColorRampProperty",Wu);const wp="-transition";class no extends Tn{constructor(r,d,y){if(super(),this.id=r.id,this.type=r.type,this._globalState=y,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter,this._featureFilter=Lc(r.filter,y)),d.layout&&(this._unevaluatedLayout=new Ql(d.layout,y)),d.paint)){this._transitionablePaint=new Xi(d.paint,y);for(const v in r.paint)this.setPaintProperty(v,r.paint[v],{validate:!1});for(const v in r.layout)this.setLayoutProperty(v,r.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $c(d.paint)}}setFilter(r){this.filter=r,this._featureFilter=Lc(r,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}getLayoutAffectingGlobalStateRefs(){const r=new Set;if(this._unevaluatedLayout)for(const d in this._unevaluatedLayout._values){const y=this._unevaluatedLayout._values[d];for(const v of y.getGlobalStateRefs())r.add(v)}for(const d of this._featureFilter.getGlobalStateRefs())r.add(d);return r}getPaintAffectingGlobalStateRefs(){var r;const d=new globalThis.Map;if(this._transitionablePaint)for(const y in this._transitionablePaint._values){const v=this._transitionablePaint._values[y].value;for(const C of v.getGlobalStateRefs()){const M=(r=d.get(C))!==null&&r!==void 0?r:[];M.push({name:y,value:v.value}),d.set(C,M)}}return d}setLayoutProperty(r,d,y={}){d!=null&&this._validate(Tl,`layers.${this.id}.layout.${r}`,r,d,y)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,d):this.visibility=d)}getPaintProperty(r){return r.endsWith(wp)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,d,y={}){if(d!=null&&this._validate(qm,`layers.${this.id}.paint.${r}`,r,d,y))return!1;if(r.endsWith(wp))return this._transitionablePaint.setTransition(r.slice(0,-11),d||void 0),!1;{const v=this._transitionablePaint._values[r],C=v.property.specification["property-type"]==="cross-faded-data-driven",M=v.value.isDataDriven(),R=v.value;this._transitionablePaint.setValue(r,d),this._handleSpecialPaintPropertyUpdate(r);const I=this._transitionablePaint._values[r].value;return I.isDataDriven()||M||C||this._handleOverridablePaintPropertyUpdate(r,R,I)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,d,y){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,d){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,d)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Bt(r,(d,y)=>!(d===void 0||y==="layout"&&!Object.keys(d).length||y==="paint"&&!Object.keys(d).length))}_validate(r,d,y,v,C={}){return(!C||C.validate!==!1)&&_p(this,r.call(ba,{key:d,layerType:this.type,objectKey:y,value:v,styleSpec:dt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const d=this.paint.get(r);if(d instanceof Lr&&zc(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}let Hc;var Sp={get paint(){return Hc=Hc||new Cr({"raster-opacity":new Nn(dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Nn(dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Nn(dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Nn(dt.paint_raster["raster-brightness-max"]),"raster-saturation":new Nn(dt.paint_raster["raster-saturation"]),"raster-contrast":new Nn(dt.paint_raster["raster-contrast"]),"raster-resampling":new Nn(dt.paint_raster["raster-resampling"]),"raster-fade-duration":new Nn(dt.paint_raster["raster-fade-duration"])})}};class jp extends no{constructor(r,d){super(r,Sp,d)}}const Cp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class cr{constructor(r,d){this._structArray=r,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class fi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,d){return r._trim(),d&&(r.isTransferred=!0,d.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const d=Object.create(this.prototype);return d.arrayBuffer=r.arrayBuffer,d.length=r.length,d.capacity=r.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Cs(f,r=1){let d=0,y=0;return{members:f.map(v=>{const C=Cp[v.type].BYTES_PER_ELEMENT,M=d=io(d,Math.max(r,C)),R=v.components||1;return y=Math.max(y,C),d+=C*R,{name:v.name,type:v.type,components:R,offset:M}}),size:io(d,Math.max(y,r)),alignment:r}}function io(f,r){return Math.ceil(f/r)*r}class El extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d){const y=this.length;return this.resize(y+1),this.emplace(y,r,d)}emplace(r,d,y){const v=2*r;return this.int16[v+0]=d,this.int16[v+1]=y,r}}El.prototype.bytesPerElement=4,xn("StructArrayLayout2i4",El);class Jl extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=3*r;return this.int16[C+0]=d,this.int16[C+1]=y,this.int16[C+2]=v,r}}Jl.prototype.bytesPerElement=6,xn("StructArrayLayout3i6",Jl);class so extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v){const C=this.length;return this.resize(C+1),this.emplace(C,r,d,y,v)}emplace(r,d,y,v,C){const M=4*r;return this.int16[M+0]=d,this.int16[M+1]=y,this.int16[M+2]=v,this.int16[M+3]=C,r}}so.prototype.bytesPerElement=8,xn("StructArrayLayout4i8",so);class ec extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M){const R=this.length;return this.resize(R+1),this.emplace(R,r,d,y,v,C,M)}emplace(r,d,y,v,C,M,R){const I=6*r;return this.int16[I+0]=d,this.int16[I+1]=y,this.int16[I+2]=v,this.int16[I+3]=C,this.int16[I+4]=M,this.int16[I+5]=R,r}}ec.prototype.bytesPerElement=12,xn("StructArrayLayout2i4i12",ec);class Hd extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M){const R=this.length;return this.resize(R+1),this.emplace(R,r,d,y,v,C,M)}emplace(r,d,y,v,C,M,R){const I=4*r,V=8*r;return this.int16[I+0]=d,this.int16[I+1]=y,this.uint8[V+4]=v,this.uint8[V+5]=C,this.uint8[V+6]=M,this.uint8[V+7]=R,r}}Hd.prototype.bytesPerElement=8,xn("StructArrayLayout2i4ub8",Hd);class Ko extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d){const y=this.length;return this.resize(y+1),this.emplace(y,r,d)}emplace(r,d,y){const v=2*r;return this.float32[v+0]=d,this.float32[v+1]=y,r}}Ko.prototype.bytesPerElement=8,xn("StructArrayLayout2f8",Ko);class tc extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V,H){const X=this.length;return this.resize(X+1),this.emplace(X,r,d,y,v,C,M,R,I,V,H)}emplace(r,d,y,v,C,M,R,I,V,H,X){const se=10*r;return this.uint16[se+0]=d,this.uint16[se+1]=y,this.uint16[se+2]=v,this.uint16[se+3]=C,this.uint16[se+4]=M,this.uint16[se+5]=R,this.uint16[se+6]=I,this.uint16[se+7]=V,this.uint16[se+8]=H,this.uint16[se+9]=X,r}}tc.prototype.bytesPerElement=20,xn("StructArrayLayout10ui20",tc);class ef extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I){const V=this.length;return this.resize(V+1),this.emplace(V,r,d,y,v,C,M,R,I)}emplace(r,d,y,v,C,M,R,I,V){const H=8*r;return this.uint16[H+0]=d,this.uint16[H+1]=y,this.uint16[H+2]=v,this.uint16[H+3]=C,this.uint16[H+4]=M,this.uint16[H+5]=R,this.uint16[H+6]=I,this.uint16[H+7]=V,r}}ef.prototype.bytesPerElement=16,xn("StructArrayLayout8ui16",ef);class qd extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V,H,X,se){const ce=this.length;return this.resize(ce+1),this.emplace(ce,r,d,y,v,C,M,R,I,V,H,X,se)}emplace(r,d,y,v,C,M,R,I,V,H,X,se,ce){const he=12*r;return this.int16[he+0]=d,this.int16[he+1]=y,this.int16[he+2]=v,this.int16[he+3]=C,this.uint16[he+4]=M,this.uint16[he+5]=R,this.uint16[he+6]=I,this.uint16[he+7]=V,this.int16[he+8]=H,this.int16[he+9]=X,this.int16[he+10]=se,this.int16[he+11]=ce,r}}qd.prototype.bytesPerElement=24,xn("StructArrayLayout4i4ui4i24",qd);class nc extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=3*r;return this.float32[C+0]=d,this.float32[C+1]=y,this.float32[C+2]=v,r}}nc.prototype.bytesPerElement=12,xn("StructArrayLayout3f12",nc);class tf extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const d=this.length;return this.resize(d+1),this.emplace(d,r)}emplace(r,d){return this.uint32[1*r+0]=d,r}}tf.prototype.bytesPerElement=4,xn("StructArrayLayout1ul4",tf);class nf extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V){const H=this.length;return this.resize(H+1),this.emplace(H,r,d,y,v,C,M,R,I,V)}emplace(r,d,y,v,C,M,R,I,V,H){const X=10*r,se=5*r;return this.int16[X+0]=d,this.int16[X+1]=y,this.int16[X+2]=v,this.int16[X+3]=C,this.int16[X+4]=M,this.int16[X+5]=R,this.uint32[se+3]=I,this.uint16[X+8]=V,this.uint16[X+9]=H,r}}nf.prototype.bytesPerElement=20,xn("StructArrayLayout6i1ul2ui20",nf);class Zu extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M){const R=this.length;return this.resize(R+1),this.emplace(R,r,d,y,v,C,M)}emplace(r,d,y,v,C,M,R){const I=6*r;return this.int16[I+0]=d,this.int16[I+1]=y,this.int16[I+2]=v,this.int16[I+3]=C,this.int16[I+4]=M,this.int16[I+5]=R,r}}Zu.prototype.bytesPerElement=12,xn("StructArrayLayout2i2i2i12",Zu);class sf extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,d,y,v,C)}emplace(r,d,y,v,C,M){const R=4*r,I=8*r;return this.float32[R+0]=d,this.float32[R+1]=y,this.float32[R+2]=v,this.int16[I+6]=C,this.int16[I+7]=M,r}}sf.prototype.bytesPerElement=16,xn("StructArrayLayout2f1f2i16",sf);class j extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M){const R=this.length;return this.resize(R+1),this.emplace(R,r,d,y,v,C,M)}emplace(r,d,y,v,C,M,R){const I=16*r,V=4*r,H=8*r;return this.uint8[I+0]=d,this.uint8[I+1]=y,this.float32[V+1]=v,this.float32[V+2]=C,this.int16[H+6]=M,this.int16[H+7]=R,r}}j.prototype.bytesPerElement=16,xn("StructArrayLayout2ub2f2i16",j);class s extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=3*r;return this.uint16[C+0]=d,this.uint16[C+1]=y,this.uint16[C+2]=v,r}}s.prototype.bytesPerElement=6,xn("StructArrayLayout3ui6",s);class p extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V,H,X,se,ce,he,xe,Se,De){const at=this.length;return this.resize(at+1),this.emplace(at,r,d,y,v,C,M,R,I,V,H,X,se,ce,he,xe,Se,De)}emplace(r,d,y,v,C,M,R,I,V,H,X,se,ce,he,xe,Se,De,at){const Ve=24*r,Ze=12*r,bt=48*r;return this.int16[Ve+0]=d,this.int16[Ve+1]=y,this.uint16[Ve+2]=v,this.uint16[Ve+3]=C,this.uint32[Ze+2]=M,this.uint32[Ze+3]=R,this.uint32[Ze+4]=I,this.uint16[Ve+10]=V,this.uint16[Ve+11]=H,this.uint16[Ve+12]=X,this.float32[Ze+7]=se,this.float32[Ze+8]=ce,this.uint8[bt+36]=he,this.uint8[bt+37]=xe,this.uint8[bt+38]=Se,this.uint32[Ze+10]=De,this.int16[Ve+22]=at,r}}p.prototype.bytesPerElement=48,xn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",p);class x extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y,v,C,M,R,I,V,H,X,se,ce,he,xe,Se,De,at,Ve,Ze,bt,Et,Zt,un,on,hn,En,fn){const pn=this.length;return this.resize(pn+1),this.emplace(pn,r,d,y,v,C,M,R,I,V,H,X,se,ce,he,xe,Se,De,at,Ve,Ze,bt,Et,Zt,un,on,hn,En,fn)}emplace(r,d,y,v,C,M,R,I,V,H,X,se,ce,he,xe,Se,De,at,Ve,Ze,bt,Et,Zt,un,on,hn,En,fn,pn){const Ut=32*r,Wn=16*r;return this.int16[Ut+0]=d,this.int16[Ut+1]=y,this.int16[Ut+2]=v,this.int16[Ut+3]=C,this.int16[Ut+4]=M,this.int16[Ut+5]=R,this.int16[Ut+6]=I,this.int16[Ut+7]=V,this.uint16[Ut+8]=H,this.uint16[Ut+9]=X,this.uint16[Ut+10]=se,this.uint16[Ut+11]=ce,this.uint16[Ut+12]=he,this.uint16[Ut+13]=xe,this.uint16[Ut+14]=Se,this.uint16[Ut+15]=De,this.uint16[Ut+16]=at,this.uint16[Ut+17]=Ve,this.uint16[Ut+18]=Ze,this.uint16[Ut+19]=bt,this.uint16[Ut+20]=Et,this.uint16[Ut+21]=Zt,this.uint16[Ut+22]=un,this.uint32[Wn+12]=on,this.float32[Wn+13]=hn,this.float32[Wn+14]=En,this.uint16[Ut+30]=fn,this.uint16[Ut+31]=pn,r}}x.prototype.bytesPerElement=64,xn("StructArrayLayout8i15ui1ul2f2ui64",x);class w extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const d=this.length;return this.resize(d+1),this.emplace(d,r)}emplace(r,d){return this.float32[1*r+0]=d,r}}w.prototype.bytesPerElement=4,xn("StructArrayLayout1f4",w);class T extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=3*r;return this.uint16[6*r+0]=d,this.float32[C+1]=y,this.float32[C+2]=v,r}}T.prototype.bytesPerElement=12,xn("StructArrayLayout1ui2f12",T);class P extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,d,y)}emplace(r,d,y,v){const C=4*r;return this.uint32[2*r+0]=d,this.uint16[C+2]=y,this.uint16[C+3]=v,r}}P.prototype.bytesPerElement=8,xn("StructArrayLayout1ul2ui8",P);class O extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,d){const y=this.length;return this.resize(y+1),this.emplace(y,r,d)}emplace(r,d,y){const v=2*r;return this.uint16[v+0]=d,this.uint16[v+1]=y,r}}O.prototype.bytesPerElement=4,xn("StructArrayLayout2ui4",O);class F extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const d=this.length;return this.resize(d+1),this.emplace(d,r)}emplace(r,d){return this.uint16[1*r+0]=d,r}}F.prototype.bytesPerElement=2,xn("StructArrayLayout1ui2",F);class q extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,d,y,v){const C=this.length;return this.resize(C+1),this.emplace(C,r,d,y,v)}emplace(r,d,y,v,C){const M=4*r;return this.float32[M+0]=d,this.float32[M+1]=y,this.float32[M+2]=v,this.float32[M+3]=C,r}}q.prototype.bytesPerElement=16,xn("StructArrayLayout4f16",q);class Y extends cr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new g(this.anchorPointX,this.anchorPointY)}}Y.prototype.size=20;class ne extends nf{get(r){return new Y(this,r)}}xn("CollisionBoxArray",ne);class ee extends cr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ee.prototype.size=48;class ue extends p{get(r){return new ee(this,r)}}xn("PlacedSymbolArray",ue);class ye extends cr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ye.prototype.size=64;class Te extends x{get(r){return new ye(this,r)}}xn("SymbolInstanceArray",Te);class Ce extends w{getoffsetX(r){return this.float32[1*r+0]}}xn("GlyphOffsetArray",Ce);class Ee extends Jl{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}xn("SymbolLineVertexArray",Ee);class Ie extends cr{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ie.prototype.size=12;class Be extends T{get(r){return new Ie(this,r)}}xn("TextAnchorOffsetArray",Be);class Le extends cr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Le.prototype.size=8;class qe extends P{get(r){return new Le(this,r)}}xn("FeatureIndexArray",qe);class Ke extends El{}class Fe extends El{}class it extends El{}class Mt extends ec{}class _t extends Hd{}class wt extends Ko{}class St extends tc{}class rn extends ef{}class an extends qd{}class Yt extends nc{}class Mn extends tf{}class ni extends Zu{}class Fi extends j{}class Bi extends s{}class Qi extends O{}const Ts=Cs([{name:"a_pos",components:2,type:"Int16"}],4),{members:ns}=Ts;class yi{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,d,y,v){const C=this.segments[this.segments.length-1];return r>yi.MAX_VERTEX_ARRAY_LENGTH&&nn(`Max vertices per segment is ${yi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${yi.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!C||C.vertexLength+r>yi.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==v?this.createNewSegment(d,y,v):C}createNewSegment(r,d,y){const v={vertexOffset:r.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(v.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(r,d,y){return this.prepareSegment(0,r,d,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const d in r.vaos)r.vaos[d].destroy()}static simpleSegment(r,d,y,v){return new yi([{vertexOffset:r,primitiveOffset:d,vertexLength:y,primitiveLength:v,vaos:{},sortKey:0}])}}function as(f,r){return 256*(f=ut(Math.floor(f),0,255))+ut(Math.floor(r),0,255)}yi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xn("SegmentVector",yi);const tr=Cs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Bs=Cs([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Vs,xr,Al,ro={exports:{}},ic={exports:{}},ao={exports:{}},sc=function(){if(Al)return ro.exports;Al=1;var f=(Vs||(Vs=1,ic.exports=function(d,y){var v,C,M,R,I,V,H,X;for(C=d.length-(v=3&d.length),M=y,I=3432918353,V=461845907,X=0;X<C;)H=255&d.charCodeAt(X)|(255&d.charCodeAt(++X))<<8|(255&d.charCodeAt(++X))<<16|(255&d.charCodeAt(++X))<<24,++X,M=27492+(65535&(R=5*(65535&(M=(M^=H=(65535&(H=(H=(65535&H)*I+(((H>>>16)*I&65535)<<16)&4294967295)<<15|H>>>17))*V+(((H>>>16)*V&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(R>>>16)&65535)<<16);switch(H=0,v){case 3:H^=(255&d.charCodeAt(X+2))<<16;case 2:H^=(255&d.charCodeAt(X+1))<<8;case 1:M^=H=(65535&(H=(H=(65535&(H^=255&d.charCodeAt(X)))*I+(((H>>>16)*I&65535)<<16)&4294967295)<<15|H>>>17))*V+(((H>>>16)*V&65535)<<16)&4294967295}return M^=d.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0}),ic.exports),r=(xr||(xr=1,ao.exports=function(d,y){for(var v,C=d.length,M=y^C,R=0;C>=4;)v=1540483477*(65535&(v=255&d.charCodeAt(R)|(255&d.charCodeAt(++R))<<8|(255&d.charCodeAt(++R))<<16|(255&d.charCodeAt(++R))<<24))+((1540483477*(v>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),C-=4,++R;switch(C){case 3:M^=(255&d.charCodeAt(R+2))<<16;case 2:M^=(255&d.charCodeAt(R+1))<<8;case 1:M=1540483477*(65535&(M^=255&d.charCodeAt(R)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0}),ao.exports);return ro.exports=f,ro.exports.murmur3=f,ro.exports.murmur2=r,ro.exports}(),Pl=_(sc);class Fa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,d,y,v){this.ids.push(Fr(r)),this.positions.push(d,y,v)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Fr(r);let y=0,v=this.ids.length-1;for(;y<v;){const M=y+v>>1;this.ids[M]>=d?v=M:y=M+1}const C=[];for(;this.ids[y]===d;)C.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return C}static serialize(r,d){const y=new Float64Array(r.ids),v=new Uint32Array(r.positions);return Ro(y,v,0,y.length-1),d&&d.push(y.buffer,v.buffer),{ids:y,positions:v}}static deserialize(r){const d=new Fa;return d.ids=r.ids,d.positions=r.positions,d.indexed=!0,d}}function Fr(f){const r=+f;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Pl(String(f))}function Ro(f,r,d,y){for(;d<y;){const v=f[d+y>>1];let C=d-1,M=y+1;for(;;){do C++;while(f[C]<v);do M--;while(f[M]>v);if(C>=M)break;Do(f,C,M),Do(r,3*C,3*M),Do(r,3*C+1,3*M+1),Do(r,3*C+2,3*M+2)}M-d<y-M?(Ro(f,r,d,M),d=M+1):(Ro(f,r,M+1,y),y=M)}}function Do(f,r,d){const y=f[r];f[r]=f[d],f[d]=y}xn("FeaturePositionMap",Fa);class _r{constructor(r,d){this.gl=r.gl,this.location=d}}class Rs extends _r{constructor(r,d){super(r,d),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Ki extends _r{constructor(r,d){super(r,d),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Us extends _r{constructor(r,d){super(r,d),this.current=ui.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const ys=new Float32Array(16);function rf(f){return[as(255*f.r,255*f.g),as(255*f.b,255*f.a)]}class oo{constructor(r,d,y){this.value=r,this.uniformNames=d.map(v=>`u_${v}`),this.type=y}setUniform(r,d,y){r.set(y.constantOr(this.value))}getBinding(r,d,y){return this.type==="color"?new Us(r,d):new Rs(r,d)}}class na{constructor(r,d){this.uniformNames=d.map(y=>`u_${y}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=r.tlbr}setConstantDashPositions(r,d){this.dashTo=[0,r.y,r.height,r.width],this.dashFrom=[0,d.y,d.height,d.width]}setUniform(r,d,y,v){let C=null;v==="u_pattern_to"?C=this.patternTo:v==="u_pattern_from"?C=this.patternFrom:v==="u_dasharray_to"?C=this.dashTo:v==="u_dasharray_from"?C=this.dashFrom:v==="u_pixel_ratio_to"?C=this.pixelRatioTo:v==="u_pixel_ratio_from"&&(C=this.pixelRatioFrom),C!==null&&r.set(C)}getBinding(r,d,y){return y.substr(0,9)==="u_pattern"||y.substr(0,12)==="u_dasharray_"?new Ki(r,d):new Rs(r,d)}}class os{constructor(r,d,y,v){this.expression=r,this.type=y,this.maxValue=0,this.paintVertexAttributes=d.map(C=>({name:`a_${C}`,type:"Float32",components:y==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(r,d,y){const v=this.paintVertexArray.length,C=this.expression.evaluate(new Yi(0,y),d,{},y.canonical,[],y.formattedSection);this.paintVertexArray.resize(r),this._setPaintValue(v,r,C)}updatePaintArray(r,d,y,v,C){const M=this.expression.evaluate(new Yi(0,C),y,v);this._setPaintValue(r,d,M)}_setPaintValue(r,d,y){if(this.type==="color"){const v=rf(y);for(let C=r;C<d;C++)this.paintVertexArray.emplace(C,v[0],v[1])}else{for(let v=r;v<d;v++)this.paintVertexArray.emplace(v,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class va{constructor(r,d,y,v,C,M){this.expression=r,this.uniformNames=d.map(R=>`u_${R}_t`),this.type=y,this.useIntegerZoom=v,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=d.map(R=>({name:`a_${R}`,type:"Float32",components:y==="color"?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(r,d,y){const v=this.expression.evaluate(new Yi(this.zoom,y),d,{},y.canonical,[],y.formattedSection),C=this.expression.evaluate(new Yi(this.zoom+1,y),d,{},y.canonical,[],y.formattedSection),M=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(M,r,v,C)}updatePaintArray(r,d,y,v,C){const M=this.expression.evaluate(new Yi(this.zoom,C),y,v),R=this.expression.evaluate(new Yi(this.zoom+1,C),y,v);this._setPaintValue(r,d,M,R)}_setPaintValue(r,d,y,v){if(this.type==="color"){const C=rf(y),M=rf(v);for(let R=r;R<d;R++)this.paintVertexArray.emplace(R,C[0],C[1],M[0],M[1])}else{for(let C=r;C<d;C++)this.paintVertexArray.emplace(C,y,v);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(v))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,d){const y=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,v=ut(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);r.set(v)}getBinding(r,d,y){return new Rs(r,d)}}class Qo{constructor(r,d,y,v,C,M){this.expression=r,this.type=d,this.useIntegerZoom=y,this.zoom=v,this.layerId=M,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(r,d,y){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(v,r,this.getPositionIds(d),y)}updatePaintArray(r,d,y,v,C){this._setPaintValues(r,d,this.getPositionIds(y),C)}_setPaintValues(r,d,y,v){const C=this.getPositions(v);if(!C||!y)return;const M=C[y.min],R=C[y.mid],I=C[y.max];if(M&&R&&I)for(let V=r;V<d;V++)this.emplace(this.zoomInPaintVertexArray,V,R,M),this.emplace(this.zoomOutPaintVertexArray,V,R,I)}upload(r){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const d=this.getVertexAttributes();this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,d,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,d,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Jo extends Qo{getPositions(r){return r.imagePositions}getPositionIds(r){return r.patterns&&r.patterns[this.layerId]}getVertexAttributes(){return tr.members}emplace(r,d,y,v){r.emplace(d,y.tlbr[0],y.tlbr[1],y.tlbr[2],y.tlbr[3],v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],y.pixelRatio,v.pixelRatio)}}class af extends Qo{getPositions(r){return r.dashPositions}getPositionIds(r){return r.dashes&&r.dashes[this.layerId]}getVertexAttributes(){return Bs.members}emplace(r,d,y,v){r.emplace(d,0,y.y,y.height,y.width,0,v.y,v.height,v.width)}}class of{constructor(r,d,y){this.binders={},this._buffers=[];const v=[];for(const C in r.paint._values){if(!y(C))continue;const M=r.paint.get(C);if(!(M instanceof Lr&&zc(M.property.specification)))continue;const R=Yu(C,r.type),I=M.value,V=M.property.specification.type,H=M.property.useIntegerZoom,X=M.property.specification["property-type"],se=X==="cross-faded"||X==="cross-faded-data-driven";if(I.kind==="constant")this.binders[C]=se?new na(I.value,R):new oo(I.value,R,V),v.push(`/u_${C}`);else if(I.kind==="source"||se){const ce=lf(C,V,"source");this.binders[C]=se?C==="line-dasharray"?new af(I,V,H,d,ce,r.id):new Jo(I,V,H,d,ce,r.id):new os(I,R,V,ce),v.push(`/a_${C}`)}else{const ce=lf(C,V,"composite");this.binders[C]=new va(I,R,V,H,d,ce),v.push(`/z_${C}`)}}this.cacheKey=v.sort().join("")}getMaxValue(r){const d=this.binders[r];return d instanceof os||d instanceof va?d.maxValue:0}populatePaintArrays(r,d,y){for(const v in this.binders){const C=this.binders[v];(C instanceof os||C instanceof va||C instanceof Qo)&&C.populatePaintArray(r,d,y)}}setConstantPatternPositions(r,d){for(const y in this.binders){const v=this.binders[y];v instanceof na&&v.setConstantPatternPositions(r,d)}}setConstantDashPositions(r,d){for(const y in this.binders){const v=this.binders[y];v instanceof na&&v.setConstantDashPositions(r,d)}}updatePaintArrays(r,d,y,v,C){let M=!1;for(const R in r){const I=d.getPositions(R);for(const V of I){const H=y.feature(V.index);for(const X in this.binders){const se=this.binders[X];if((se instanceof os||se instanceof va||se instanceof Qo)&&se.expression.isStateDependent===!0){const ce=v.paint.get(X);se.expression=ce.value,se.updatePaintArray(V.start,V.end,H,r[R],C),M=!0}}}}return M}defines(){const r=[];for(const d in this.binders){const y=this.binders[d];(y instanceof oo||y instanceof na)&&r.push(...y.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return r}getBinderAttributes(){const r=[];for(const d in this.binders){const y=this.binders[d];if(y instanceof os||y instanceof va)for(let v=0;v<y.paintVertexAttributes.length;v++)r.push(y.paintVertexAttributes[v].name);else if(y instanceof Qo){const v=y.getVertexAttributes();for(const C of v)r.push(C.name)}}return r}getBinderUniforms(){const r=[];for(const d in this.binders){const y=this.binders[d];if(y instanceof oo||y instanceof na||y instanceof va)for(const v of y.uniformNames)r.push(v)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,d){const y=[];for(const v in this.binders){const C=this.binders[v];if(C instanceof oo||C instanceof na||C instanceof va){for(const M of C.uniformNames)if(d[M]){const R=C.getBinding(r,d[M],M);y.push({name:M,property:v,binding:R})}}}return y}setUniforms(r,d,y,v){for(const{name:C,property:M,binding:R}of d)this.binders[M].setUniform(R,v,y.get(M),C)}updatePaintBuffers(r){this._buffers=[];for(const d in this.binders){const y=this.binders[d];if(r&&y instanceof Qo){const v=r.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(y instanceof os||y instanceof va)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(r){for(const d in this.binders){const y=this.binders[d];(y instanceof os||y instanceof va||y instanceof Qo)&&y.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const d=this.binders[r];(d instanceof os||d instanceof va||d instanceof Qo)&&d.destroy()}}}class wa{constructor(r,d,y=()=>!0){this.programConfigurations={};for(const v of r)this.programConfigurations[v.id]=new of(v,d,y);this.needsUpload=!1,this._featureMap=new Fa,this._bufferOffset=0}populatePaintArrays(r,d,y,v){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(r,d,v);d.id!==void 0&&this._featureMap.add(d.id,y,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,d,y,v){for(const C of y)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(r,this._featureMap,d,C,v)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Yu(f,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${r}-`,"").replace(/-/g,"_")]}function lf(f,r,d){const y={color:{source:Ko,composite:q},number:{source:w,composite:Ko}},v=function(C){return{"line-pattern":{source:St,composite:St},"fill-pattern":{source:St,composite:St},"fill-extrusion-pattern":{source:St,composite:St},"line-dasharray":{source:rn,composite:rn}}[C]}(f);return v&&v[d]||y[r][d]}xn("ConstantBinder",oo),xn("CrossFadedConstantBinder",na),xn("SourceExpressionBinder",os),xn("CrossFadedPatternBinder",Jo),xn("CrossFadedDasharrayBinder",af),xn("CompositeExpressionBinder",va),xn("ProgramConfiguration",of,{omit:["_buffers"]}),xn("ProgramConfigurationSet",wa);const Xu=Math.pow(2,14)-1,By=-Xu-1;function rc(f){const r=Pt/f.extent,d=f.loadGeometry();for(let y=0;y<d.length;y++){const v=d[y];for(let C=0;C<v.length;C++){const M=v[C],R=Math.round(M.x*r),I=Math.round(M.y*r);M.x=ut(R,By,Xu),M.y=ut(I,By,Xu),(R<M.x||R>M.x+1||I<M.y||I>M.y+1)&&nn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Ku(f,r){return{type:f.type,id:f.id,properties:f.properties,geometry:r?rc(f):[]}}const Gm=-32768;function h_(f,r,d,y,v){f.emplaceBack(Gm+8*r+y,Gm+8*d+v)}class Wm{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(d=>d.id),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new Fe,this.indexArray=new Bi,this.segments=new yi,this.programConfigurations=new wa(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(r,d,y){const v=this.layers[0],C=[];let M=null,R=!1,I=v.type==="heatmap";if(v.type==="circle"){const H=v;M=H.layout.get("circle-sort-key"),R=!M.isConstant(),I=I||H.paint.get("circle-pitch-alignment")==="map"}const V=I?d.subdivisionGranularity.circle:1;for(const{feature:H,id:X,index:se,sourceLayerIndex:ce}of r){const he=this.layers[0]._featureFilter.needGeometry,xe=Ku(H,he);if(!this.layers[0]._featureFilter.filter(new Yi(this.zoom),xe,y))continue;const Se=R?M.evaluate(xe,{},y):void 0,De={id:X,properties:H.properties,type:H.type,sourceLayerIndex:ce,index:se,geometry:he?xe.geometry:rc(H),patterns:{},sortKey:Se};C.push(De)}R&&C.sort((H,X)=>H.sortKey-X.sortKey);for(const H of C){const{geometry:X,index:se,sourceLayerIndex:ce}=H,he=r[se].feature;this.addFeature(H,X,se,y,V),d.featureIndex.insert(he,X,se,ce,this.index)}}update(r,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,d,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ns),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,d,y,v,C=1){let M;switch(C){case 1:M=[0,7];break;case 3:M=[0,2,5,7];break;case 5:M=[0,1,3,4,6,7];break;case 7:M=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${C}; valid values are 1, 3, 5, 7.`)}const R=M.length;for(const I of d)for(const V of I){const H=V.x,X=V.y;if(H<0||H>=Pt||X<0||X>=Pt)continue;const se=this.segments.prepareSegment(R*R,this.layoutVertexArray,this.indexArray,r.sortKey),ce=se.vertexLength;for(let he=0;he<R;he++)for(let xe=0;xe<R;xe++)h_(this.layoutVertexArray,H,X,M[xe],M[he]);for(let he=0;he<R-1;he++)for(let xe=0;xe<R-1;xe++){const Se=ce+he*R+xe,De=ce+(he+1)*R+xe;this.indexArray.emplaceBack(Se,De+1,Se+1),this.indexArray.emplaceBack(Se,De,De+1)}se.vertexLength+=R*R,se.primitiveLength+=(R-1)*(R-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,y,{imagePositions:{},canonical:v})}}function f_(f,r){for(let d=0;d<f.length;d++)if(qc(r,f[d]))return!0;for(let d=0;d<r.length;d++)if(qc(f,r[d]))return!0;return!!Zm(f,r)}function Tp(f,r,d){return!!qc(f,r)||!!Ym(r,f,d)}function Tr(f,r){if(f.length===1)return Uy(r,f[0]);for(let d=0;d<r.length;d++){const y=r[d];for(let v=0;v<y.length;v++)if(qc(f,y[v]))return!0}for(let d=0;d<f.length;d++)if(Uy(r,f[d]))return!0;for(let d=0;d<r.length;d++)if(Zm(f,r[d]))return!0;return!1}function ia(f,r,d){if(f.length>1){if(Zm(f,r))return!0;for(let y=0;y<r.length;y++)if(Ym(r[y],f,d))return!0}for(let y=0;y<f.length;y++)if(Ym(f[y],r,d))return!0;return!1}function Zm(f,r){if(f.length===0||r.length===0)return!1;for(let d=0;d<f.length-1;d++){const y=f[d],v=f[d+1];for(let C=0;C<r.length-1;C++)if(p_(y,v,r[C],r[C+1]))return!0}return!1}function p_(f,r,d,y){return _n(f,d,y)!==_n(r,d,y)&&_n(f,r,d)!==_n(f,r,y)}function Ym(f,r,d){const y=d*d;if(r.length===1)return f.distSqr(r[0])<y;for(let v=1;v<r.length;v++)if(Vy(f,r[v-1],r[v])<y)return!0;return!1}function Vy(f,r,d){const y=r.distSqr(d);if(y===0)return f.distSqr(r);const v=((f.x-r.x)*(d.x-r.x)+(f.y-r.y)*(d.y-r.y))/y;return f.distSqr(v<0?r:v>1?d:d.sub(r)._mult(v)._add(r))}function Uy(f,r){let d,y,v,C=!1;for(let M=0;M<f.length;M++){d=f[M];for(let R=0,I=d.length-1;R<d.length;I=R++)y=d[R],v=d[I],y.y>r.y!=v.y>r.y&&r.x<(v.x-y.x)*(r.y-y.y)/(v.y-y.y)+y.x&&(C=!C)}return C}function qc(f,r){let d=!1;for(let y=0,v=f.length-1;y<f.length;v=y++){const C=f[y],M=f[v];C.y>r.y!=M.y>r.y&&r.x<(M.x-C.x)*(r.y-C.y)/(M.y-C.y)+C.x&&(d=!d)}return d}function $y(f,r,d){const y=d[0],v=d[2];if(f.x<y.x&&r.x<y.x||f.x>v.x&&r.x>v.x||f.y<y.y&&r.y<y.y||f.y>v.y&&r.y>v.y)return!1;const C=_n(f,r,d[0]);return C!==_n(f,r,d[1])||C!==_n(f,r,d[2])||C!==_n(f,r,d[3])}function Gd(f,r,d){const y=r.paint.get(f).value;return y.kind==="constant"?y.value:d.programConfigurations.get(r.id).getMaxValue(f)}function kp(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Np(f,r,d,y,v){if(!r[0]&&!r[1])return f;const C=g.convert(r)._mult(v);d==="viewport"&&C._rotate(-y);const M=[];for(let R=0;R<f.length;R++)M.push(f[R].sub(C));return M}function Hy({queryGeometry:f,size:r},d){return Tp(f,d,r)}function qy({queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v},C){return Tp(f,C,r*(d.projectTileCoordinates(C.x,C.y,y,v).signedDistanceFromCamera/d.cameraToCenterDistance))}function Gy({queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v},C){const M=d.projectTileCoordinates(C.x,C.y,y,v).signedDistanceFromCamera,R=r*(d.cameraToCenterDistance/M);return Tp(f,cf(C,d,y,v),R)}function m_({queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v},C){return Tp(f,cf(C,d,y,v),r)}function Xm({queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v,pitchAlignment:C="map",pitchScale:M="map"},R){const I=C==="map"?M==="map"?Hy:qy:M==="map"?Gy:m_,V={queryGeometry:f,size:r,transform:d,unwrappedTileID:y,getElevation:v};for(const H of R)for(const X of H)if(I(V,X))return!0;return!1}function cf(f,r,d,y){const v=r.projectTileCoordinates(f.x,f.y,d,y).point;return new g((.5*v.x+.5)*r.width,(.5*-v.y+.5)*r.height)}let Km,Wy;xn("CircleBucket",Wm,{omit:["layers"]});var Zy={get paint(){return Wy=Wy||new Cr({"circle-radius":new Dn(dt.paint_circle["circle-radius"]),"circle-color":new Dn(dt.paint_circle["circle-color"]),"circle-blur":new Dn(dt.paint_circle["circle-blur"]),"circle-opacity":new Dn(dt.paint_circle["circle-opacity"]),"circle-translate":new Nn(dt.paint_circle["circle-translate"]),"circle-translate-anchor":new Nn(dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Nn(dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Nn(dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Dn(dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Dn(dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Dn(dt.paint_circle["circle-stroke-opacity"])})},get layout(){return Km=Km||new Cr({"circle-sort-key":new Dn(dt.layout_circle["circle-sort-key"])})}};class g_ extends no{constructor(r,d){super(r,Zy,d)}createBucket(r){return new Wm(r)}queryRadius(r){const d=r;return Gd("circle-radius",this,d)+Gd("circle-stroke-width",this,d)+kp(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:d,featureState:y,geometry:v,transform:C,pixelsToTileUnits:M,unwrappedTileID:R,getElevation:I}){const V=Np(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-C.bearingInRadians,M),H=this.paint.get("circle-radius").evaluate(d,y)+this.paint.get("circle-stroke-width").evaluate(d,y),X=this.paint.get("circle-pitch-scale"),se=this.paint.get("circle-pitch-alignment");let ce,he;return se==="map"?(ce=V,he=H*M):(ce=function(xe,Se,De,at){return xe.map(Ve=>cf(Ve,Se,De,at))}(V,C,R,I),he=H),Xm({queryGeometry:ce,size:he,transform:C,unwrappedTileID:R,getElevation:I,pitchAlignment:se,pitchScale:X},v)}}class ac extends Wm{}let Qm;xn("HeatmapBucket",ac,{omit:["layers"]});var ew={get paint(){return Qm=Qm||new Cr({"heatmap-radius":new Dn(dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Dn(dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Nn(dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wu(dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Nn(dt.paint_heatmap["heatmap-opacity"])})}};function Jm(f,{width:r,height:d},y,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==r*d*y)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${r*d*y}`)}else v=new Uint8Array(r*d*y);return f.width=r,f.height=d,f.data=v,f}function oc(f,{width:r,height:d},y){if(r===f.width&&d===f.height)return;const v=Jm({},{width:r,height:d},y);eg(f,v,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,r),height:Math.min(f.height,d)},y),f.width=r,f.height=d,f.data=v.data}function eg(f,r,d,y,v,C){if(v.width===0||v.height===0)return r;if(v.width>f.width||v.height>f.height||d.x>f.width-v.width||d.y>f.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>r.width||v.height>r.height||y.x>r.width-v.width||y.y>r.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const M=f.data,R=r.data;if(M===R)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<v.height;I++){const V=((d.y+I)*f.width+d.x)*C,H=((y.y+I)*r.width+y.x)*C;for(let X=0;X<v.width*C;X++)R[H+X]=M[V+X]}return r}class Qu{constructor(r,d){Jm(this,r,1,d)}resize(r){oc(this,r,1)}clone(){return new Qu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,d,y,v,C){eg(r,d,y,v,C,1)}}class kr{constructor(r,d){Jm(this,r,4,d)}resize(r){oc(this,r,4)}replace(r,d){d?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new kr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,d,y,v,C){eg(r,d,y,v,C,4)}setPixel(r,d,y){const v=4*(r*this.width+d);this.data[v+0]=Math.round(255*y.r/y.a),this.data[v+1]=Math.round(255*y.g/y.a),this.data[v+2]=Math.round(255*y.b/y.a),this.data[v+3]=Math.round(255*y.a)}}function $s(f){const r={},d=f.resolution||256,y=f.clips?f.clips.length:1,v=f.image||new kr({width:d,height:y});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const C=(M,R,I)=>{r[f.evaluationKey]=I;const V=f.expression.evaluate(r);v.setPixel(M/4/d,R/4,V)};if(f.clips)for(let M=0,R=0;M<y;++M,R+=4*d)for(let I=0,V=0;I<d;I++,V+=4){const H=I/(d-1),{start:X,end:se}=f.clips[M];C(R,V,X*(1-H)+se*H)}else for(let M=0,R=0;M<d;M++,R+=4)C(0,R,M/(d-1));return v}xn("AlphaImage",Qu),xn("RGBAImage",kr);const Yy="big-fb";class tw extends no{createBucket(r){return new ac(r)}constructor(r,d){super(r,ew,d),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$s({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Yy)&&this.heatmapFbos.delete(Yy)}queryRadius(r){return Gd("heatmap-radius",this,r)}queryIntersectsFeature({queryGeometry:r,feature:d,featureState:y,geometry:v,transform:C,pixelsToTileUnits:M,unwrappedTileID:R,getElevation:I}){return Xm({queryGeometry:r,size:this.paint.get("heatmap-radius").evaluate(d,y)*M,transform:C,unwrappedTileID:R,getElevation:I},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Xy;var Mp={get paint(){return Xy=Xy||new Cr({"hillshade-illumination-direction":new Nn(dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Nn(dt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Nn(dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Nn(dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Nn(dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Nn(dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Nn(dt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Nn(dt.paint_hillshade["hillshade-method"])})}};class Ju extends no{constructor(r,d){super(r,Mp,d),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let r=this.paint.get("hillshade-illumination-direction").values,d=this.paint.get("hillshade-illumination-altitude").values,y=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const C=Math.max(r.length,d.length,y.length,v.length);r=r.concat(Array(C-r.length).fill(r.at(-1))),d=d.concat(Array(C-d.length).fill(d.at(-1))),y=y.concat(Array(C-y.length).fill(y.at(-1))),v=v.concat(Array(C-v.length).fill(v.at(-1)));const M=d.map(qt);return{directionRadians:r.map(qt),altitudeRadians:M,shadowColor:v,highlightColor:y}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Ky;var y_={get paint(){return Ky=Ky||new Cr({"color-relief-opacity":new Nn(dt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Wu(dt["paint_color-relief"]["color-relief-color"])})}};class Wd{constructor(r,d,y,v){this.context=r,this.format=y,this.texture=r.gl.createTexture(),this.update(d,v)}update(r,d,y){const{width:v,height:C}=r,M=!(this.size&&this.size[0]===v&&this.size[1]===C||y),{context:R}=this,{gl:I}=R;if(this.useMipmap=!!(d&&d.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!d||d.premultiply!==!1)),M)this.size=[v,C],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||ln(r)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,r):I.texImage2D(I.TEXTURE_2D,0,this.format,v,C,0,this.format,I.UNSIGNED_BYTE,r.data);else{const{x:V,y:H}=y||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||ln(r)?I.texSubImage2D(I.TEXTURE_2D,0,V,H,I.RGBA,I.UNSIGNED_BYTE,r):I.texSubImage2D(I.TEXTURE_2D,0,V,H,v,C,I.RGBA,I.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),R.pixelStoreUnpackFlipY.setDefault(),R.pixelStoreUnpack.setDefault(),R.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,d,y){const{context:v}=this,{gl:C}=v;C.bindTexture(C.TEXTURE_2D,this.texture),y!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=C.LINEAR),r!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,r),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,y||r),this.filter=r),d!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,d),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class Rl{constructor(r,d,y,v=1,C=1,M=1,R=0){if(this.uid=r,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void nn(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const I=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=C,this.blueFactor=M,this.baseShift=R;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<I;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(I,V)]=this.data[this._idx(I-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,I)]=this.data[this._idx(V,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<I;V++)for(let H=0;H<I;H++){const X=this.get(V,H);X>this.max&&(this.max=X),X<this.min&&(this.min=X)}}get(r,d){const y=new Uint8Array(this.data.buffer),v=4*this._idx(r,d);return this.unpack(y[v],y[v+1],y[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,d){if(r<-1||r>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(r+1)}unpack(r,d,y){return r*this.redFactor+d*this.greenFactor+y*this.blueFactor-this.baseShift}pack(r){return Qy(r,this.getUnpackVector())}getPixels(){return new kr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,d,y){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let v=d*this.dim,C=d*this.dim+this.dim,M=y*this.dim,R=y*this.dim+this.dim;switch(d){case-1:v=C-1;break;case 1:C=v+1}switch(y){case-1:M=R-1;break;case 1:R=M+1}const I=-d*this.dim,V=-y*this.dim;for(let H=M;H<R;H++)for(let X=v;X<C;X++)this.data[this._idx(X,H)]=r.data[this._idx(X+I,H+V)]}}function Qy(f,r){const d=r[0],y=r[1],v=r[2],C=r[3],M=Math.min(d,y,v),R=Math.round((f+C)/M);return{r:Math.floor(R*M/d)%256,g:Math.floor(R*M/y)%256,b:Math.floor(R*M/v)%256}}xn("DEMData",Rl);class Jy extends no{constructor(r,d){super(r,y_,d)}_createColorRamp(r){const d={elevationStops:[],colorStops:[]},y=this._transitionablePaint._values["color-relief-color"].value.expression;if(y instanceof Oc&&y._styleExpression.expression instanceof Si){this.colorRampExpression=y;const M=y._styleExpression.expression;d.elevationStops=M.labels,d.colorStops=[];for(const R of d.elevationStops)d.colorStops.push(M.evaluate({globals:{elevation:R}}))}if(d.elevationStops.length<1&&(d.elevationStops=[0],d.colorStops=[ui.transparent]),d.elevationStops.length<2&&(d.elevationStops.push(d.elevationStops[0]+1),d.colorStops.push(d.colorStops[0])),d.elevationStops.length<=r)return d;const v={elevationStops:[],colorStops:[]},C=(d.elevationStops.length-1)/(r-1);for(let M=0;M<d.elevationStops.length-.5;M+=C)v.elevationStops.push(d.elevationStops[Math.round(M)]),v.colorStops.push(d.colorStops[Math.round(M)]);return nn(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(r,d,y){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(d),C=new kr({width:v.colorStops.length,height:1}),M=new kr({width:v.colorStops.length,height:1});for(let R=0;R<v.elevationStops.length;R++){const I=Qy(v.elevationStops[R],y);M.setPixel(0,R,new ui(I.r/255,I.g/255,I.b/255,1)),C.setPixel(0,R,v.colorStops[R])}return this.colorRampTextures={elevationTexture:new Wd(r,M,r.gl.RGBA),colorTexture:new Wd(r,C,r.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const x_=Cs([{name:"a_pos",components:2,type:"Int16"}],4),{members:e0}=x_;function uf(f,r,d){const y=d.patternDependencies;let v=!1;for(const C of r){const M=C.paint.get(`${f}-pattern`);M.isConstant()||(v=!0);const R=M.constantOr(null);R&&(v=!0,y[R.to]=!0,y[R.from]=!0)}return v}function df(f,r,d,y,v){const{zoom:C}=y,M=v.patternDependencies;for(const R of r){const I=R.paint.get(`${f}-pattern`).value;if(I.kind!=="constant"){let V=I.evaluate({zoom:C-1},d,{},v.availableImages),H=I.evaluate({zoom:C},d,{},v.availableImages),X=I.evaluate({zoom:C+1},d,{},v.availableImages);V=V&&V.name?V.name:V,H=H&&H.name?H.name:H,X=X&&X.name?X.name:X,M[V]=!0,M[H]=!0,M[X]=!0,d.patterns[R.id]={min:V,mid:H,max:X}}}return d}function t0(f,r,d,y,v){let C;if(v===function(M,R,I,V){let H=0;for(let X=R,se=I-V;X<I;X+=V)H+=(M[se]-M[X])*(M[X+1]+M[se+1]),se=X;return H}(f,r,d,y)>0)for(let M=r;M<d;M+=y)C=ed(M/y|0,f[M],f[M+1],C);else for(let M=d-y;M>=r;M-=y)C=ed(M/y|0,f[M],f[M+1],C);return C&&Vr(C,C.next)&&(tl(C),C=C.next),C}function Ba(f,r){if(!f)return f;r||(r=f);let d,y=f;do if(d=!1,y.steiner||!Vr(y,y.next)&&zs(y.prev,y,y.next)!==0)y=y.next;else{if(tl(y),y=r=y.prev,y===y.next)break;d=!0}while(d||y!==r);return r}function Ds(f,r,d,y,v,C,M){if(!f)return;!M&&C&&function(I,V,H,X){let se=I;do se.z===0&&(se.z=Sa(se.x,se.y,V,H,X)),se.prevZ=se.prev,se.nextZ=se.next,se=se.next;while(se!==I);se.prevZ.nextZ=null,se.prevZ=null,function(ce){let he,xe=1;do{let Se,De=ce;ce=null;let at=null;for(he=0;De;){he++;let Ve=De,Ze=0;for(let Et=0;Et<xe&&(Ze++,Ve=Ve.nextZ,Ve);Et++);let bt=xe;for(;Ze>0||bt>0&&Ve;)Ze!==0&&(bt===0||!Ve||De.z<=Ve.z)?(Se=De,De=De.nextZ,Ze--):(Se=Ve,Ve=Ve.nextZ,bt--),at?at.nextZ=Se:ce=Se,Se.prevZ=at,at=Se;De=Ve}at.nextZ=null,xe*=2}while(he>1)}(se)}(f,y,v,C);let R=f;for(;f.prev!==f.next;){const I=f.prev,V=f.next;if(C?__(f,y,v,C):n0(f))r.push(I.i,f.i,V.i),tl(f),f=V.next,R=V.next;else if((f=V)===R){M?M===1?Ds(f=Br(Ba(f),r),r,d,y,v,C,2):M===2&&nw(f,r,d,y,v,C):Ds(Ba(f),r,d,y,v,C,1);break}}}function n0(f){const r=f.prev,d=f,y=f.next;if(zs(r,d,y)>=0)return!1;const v=r.x,C=d.x,M=y.x,R=r.y,I=d.y,V=y.y,H=Math.min(v,C,M),X=Math.min(R,I,V),se=Math.max(v,C,M),ce=Math.max(R,I,V);let he=y.next;for(;he!==r;){if(he.x>=H&&he.x<=se&&he.y>=X&&he.y<=ce&&hf(v,R,C,I,M,V,he.x,he.y)&&zs(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function __(f,r,d,y){const v=f.prev,C=f,M=f.next;if(zs(v,C,M)>=0)return!1;const R=v.x,I=C.x,V=M.x,H=v.y,X=C.y,se=M.y,ce=Math.min(R,I,V),he=Math.min(H,X,se),xe=Math.max(R,I,V),Se=Math.max(H,X,se),De=Sa(ce,he,r,d,y),at=Sa(xe,Se,r,d,y);let Ve=f.prevZ,Ze=f.nextZ;for(;Ve&&Ve.z>=De&&Ze&&Ze.z<=at;){if(Ve.x>=ce&&Ve.x<=xe&&Ve.y>=he&&Ve.y<=Se&&Ve!==v&&Ve!==M&&hf(R,H,I,X,V,se,Ve.x,Ve.y)&&zs(Ve.prev,Ve,Ve.next)>=0||(Ve=Ve.prevZ,Ze.x>=ce&&Ze.x<=xe&&Ze.y>=he&&Ze.y<=Se&&Ze!==v&&Ze!==M&&hf(R,H,I,X,V,se,Ze.x,Ze.y)&&zs(Ze.prev,Ze,Ze.next)>=0))return!1;Ze=Ze.nextZ}for(;Ve&&Ve.z>=De;){if(Ve.x>=ce&&Ve.x<=xe&&Ve.y>=he&&Ve.y<=Se&&Ve!==v&&Ve!==M&&hf(R,H,I,X,V,se,Ve.x,Ve.y)&&zs(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.prevZ}for(;Ze&&Ze.z<=at;){if(Ze.x>=ce&&Ze.x<=xe&&Ze.y>=he&&Ze.y<=Se&&Ze!==v&&Ze!==M&&hf(R,H,I,X,V,se,Ze.x,Ze.y)&&zs(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.nextZ}return!0}function Br(f,r){let d=f;do{const y=d.prev,v=d.next.next;!Vr(y,v)&&el(y,d,d.next,v)&&ff(y,v)&&ff(v,y)&&(r.push(y.i,d.i,v.i),tl(d),tl(d.next),d=f=v),d=d.next}while(d!==f);return Ba(d)}function nw(f,r,d,y,v,C){let M=f;do{let R=M.next.next;for(;R!==M.prev;){if(M.i!==R.i&&iw(M,R)){let I=Wc(M,R);return M=Ba(M,M.next),I=Ba(I,I.next),Ds(M,r,d,y,v,C,0),void Ds(I,r,d,y,v,C,0)}R=R.next}M=M.next}while(M!==f)}function b_(f,r){let d=f.x-r.x;return d===0&&(d=f.y-r.y,d===0)&&(d=(f.next.y-f.y)/(f.next.x-f.x)-(r.next.y-r.y)/(r.next.x-r.x)),d}function v_(f,r){const d=function(v,C){let M=C;const R=v.x,I=v.y;let V,H=-1/0;if(Vr(v,M))return M;do{if(Vr(v,M.next))return M.next;if(I<=M.y&&I>=M.next.y&&M.next.y!==M.y){const xe=M.x+(I-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(xe<=R&&xe>H&&(H=xe,V=M.x<M.next.x?M:M.next,xe===R))return V}M=M.next}while(M!==C);if(!V)return null;const X=V,se=V.x,ce=V.y;let he=1/0;M=V;do{if(R>=M.x&&M.x>=se&&R!==M.x&&i0(I<ce?R:H,I,se,ce,I<ce?H:R,I,M.x,M.y)){const xe=Math.abs(I-M.y)/(R-M.x);ff(M,v)&&(xe<he||xe===he&&(M.x>V.x||M.x===V.x&&Hs(V,M)))&&(V=M,he=xe)}M=M.next}while(M!==X);return V}(f,r);if(!d)return r;const y=Wc(d,f);return Ba(y,y.next),Ba(d,d.next)}function Hs(f,r){return zs(f.prev,f,r.prev)<0&&zs(r.next,f,f.next)<0}function Sa(f,r,d,y,v){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*v|0)|f<<8))|f<<4))|f<<2))|f<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-y)*v|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Gc(f){let r=f,d=f;do(r.x<d.x||r.x===d.x&&r.y<d.y)&&(d=r),r=r.next;while(r!==f);return d}function i0(f,r,d,y,v,C,M,R){return(v-M)*(r-R)>=(f-M)*(C-R)&&(f-M)*(y-R)>=(d-M)*(r-R)&&(d-M)*(C-R)>=(v-M)*(y-R)}function hf(f,r,d,y,v,C,M,R){return!(f===M&&r===R)&&i0(f,r,d,y,v,C,M,R)}function iw(f,r){return f.next.i!==r.i&&f.prev.i!==r.i&&!function(d,y){let v=d;do{if(v.i!==d.i&&v.next.i!==d.i&&v.i!==y.i&&v.next.i!==y.i&&el(v,v.next,d,y))return!0;v=v.next}while(v!==d);return!1}(f,r)&&(ff(f,r)&&ff(r,f)&&function(d,y){let v=d,C=!1;const M=(d.x+y.x)/2,R=(d.y+y.y)/2;do v.y>R!=v.next.y>R&&v.next.y!==v.y&&M<(v.next.x-v.x)*(R-v.y)/(v.next.y-v.y)+v.x&&(C=!C),v=v.next;while(v!==d);return C}(f,r)&&(zs(f.prev,f,r.prev)||zs(f,r.prev,r))||Vr(f,r)&&zs(f.prev,f,f.next)>0&&zs(r.prev,r,r.next)>0)}function zs(f,r,d){return(r.y-f.y)*(d.x-r.x)-(r.x-f.x)*(d.y-r.y)}function Vr(f,r){return f.x===r.x&&f.y===r.y}function el(f,r,d,y){const v=ja(zs(f,r,d)),C=ja(zs(f,r,y)),M=ja(zs(d,y,f)),R=ja(zs(d,y,r));return v!==C&&M!==R||!(v!==0||!Ep(f,d,r))||!(C!==0||!Ep(f,y,r))||!(M!==0||!Ep(d,f,y))||!(R!==0||!Ep(d,r,y))}function Ep(f,r,d){return r.x<=Math.max(f.x,d.x)&&r.x>=Math.min(f.x,d.x)&&r.y<=Math.max(f.y,d.y)&&r.y>=Math.min(f.y,d.y)}function ja(f){return f>0?1:f<0?-1:0}function ff(f,r){return zs(f.prev,f,f.next)<0?zs(f,r,f.next)>=0&&zs(f,f.prev,r)>=0:zs(f,r,f.prev)<0||zs(f,f.next,r)<0}function Wc(f,r){const d=Ap(f.i,f.x,f.y),y=Ap(r.i,r.x,r.y),v=f.next,C=r.prev;return f.next=r,r.prev=f,d.next=v,v.prev=d,y.next=d,d.prev=y,C.next=y,y.prev=C,y}function ed(f,r,d,y){const v=Ap(f,r,d);return y?(v.next=y.next,v.prev=y,y.next.prev=v,y.next=v):(v.prev=v,v.next=v),v}function tl(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Ap(f,r,d){return{i:f,x:r,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class td{constructor(r,d){if(d>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=d}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class zo{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}zo.noSubdivision=new zo({fill:new td(0,0),line:new td(0,0),tile:new td(0,0),stencil:new td(0,0),circle:1}),xn("SubdivisionGranularityExpression",td),xn("SubdivisionGranularitySetting",zo);const Zd=-32768,lc=32767;class Pp{constructor(r,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=Pt/r,this._canonical=d}_getKey(r,d){return(r+=32768)<<16|d+32768}_vertexToIndex(r,d){if(r<-32768||d<-32768||r>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(r),v=0|Math.round(d),C=this._getKey(y,v);if(this._vertexDictionary.has(C))return this._vertexDictionary.get(C);const M=this._vertexBuffer.length/2;return this._vertexDictionary.set(C,M),this._vertexBuffer.push(y,v),M}_subdivideTrianglesScanline(r){if(this._granularity<2)return function(v,C){const M=[];for(let R=0;R<C.length;R+=3){const I=C[R],V=C[R+1],H=C[R+2],X=v[2*I],se=v[2*I+1];(v[2*V]-X)*(v[2*H+1]-se)-(v[2*V+1]-se)*(v[2*H]-X)>0?(M.push(I),M.push(H),M.push(V)):(M.push(I),M.push(V),M.push(H))}return M}(this._vertexBuffer,r);const d=[],y=r.length;for(let v=0;v<y;v+=3){const C=[r[v+0],r[v+1],r[v+2]],M=[this._vertexBuffer[2*r[v+0]+0],this._vertexBuffer[2*r[v+0]+1],this._vertexBuffer[2*r[v+1]+0],this._vertexBuffer[2*r[v+1]+1],this._vertexBuffer[2*r[v+2]+0],this._vertexBuffer[2*r[v+2]+1]];let R=1/0,I=1/0,V=-1/0,H=-1/0;for(let xe=0;xe<3;xe++){const Se=M[2*xe],De=M[2*xe+1];R=Math.min(R,Se),V=Math.max(V,Se),I=Math.min(I,De),H=Math.max(H,De)}if(R===V||I===H)continue;const X=Math.floor(R/this._granularityCellSize),se=Math.ceil(V/this._granularityCellSize),ce=Math.floor(I/this._granularityCellSize),he=Math.ceil(H/this._granularityCellSize);if(X!==se||ce!==he)for(let xe=ce;xe<he;xe++){const Se=this._scanlineGenerateVertexRingForCellRow(xe,M,C);w_(this._vertexBuffer,Se,d)}else d.push(...C)}return d}_scanlineGenerateVertexRingForCellRow(r,d,y){const v=r*this._granularityCellSize,C=v+this._granularityCellSize,M=[];for(let R=0;R<3;R++){const I=d[2*R],V=d[2*R+1],H=d[2*(R+1)%6],X=d[(2*(R+1)+1)%6],se=d[2*(R+2)%6],ce=d[(2*(R+2)+1)%6],he=H-I,xe=X-V,Se=he===0,De=xe===0,at=(v-V)/xe,Ve=(C-V)/xe,Ze=Math.min(at,Ve),bt=Math.max(at,Ve);if(!De&&(Ze>=1||bt<=0)||De&&(V<v||V>C)){X>=v&&X<=C&&M.push(y[(R+1)%3]);continue}!De&&Ze>0&&M.push(this._vertexToIndex(I+he*Ze,V+xe*Ze));const Et=I+he*Math.max(Ze,0),Zt=I+he*Math.min(bt,1);Se||this._generateIntraEdgeVertices(M,I,V,H,X,Et,Zt),!De&&bt<1&&M.push(this._vertexToIndex(I+he*bt,V+xe*bt)),(De||X>=v&&X<=C)&&M.push(y[(R+1)%3]),!De&&(X<=v||X>=C)&&this._generateInterEdgeVertices(M,I,V,H,X,se,ce,Zt,v,C)}return M}_generateIntraEdgeVertices(r,d,y,v,C,M,R){const I=v-d,V=C-y,H=V===0,X=H?Math.min(d,v):Math.min(M,R),se=H?Math.max(d,v):Math.max(M,R),ce=Math.floor(X/this._granularityCellSize)+1,he=Math.ceil(se/this._granularityCellSize)-1;if(H?d<v:M<R)for(let xe=ce;xe<=he;xe++){const Se=xe*this._granularityCellSize;r.push(this._vertexToIndex(Se,y+V*(Se-d)/I))}else for(let xe=he;xe>=ce;xe--){const Se=xe*this._granularityCellSize;r.push(this._vertexToIndex(Se,y+V*(Se-d)/I))}}_generateInterEdgeVertices(r,d,y,v,C,M,R,I,V,H){const X=C-y,se=M-v,ce=R-C,he=(V-C)/ce,xe=(H-C)/ce,Se=Math.min(he,xe),De=Math.max(he,xe),at=v+se*Se;let Ve=Math.floor(Math.min(at,I)/this._granularityCellSize)+1,Ze=Math.ceil(Math.max(at,I)/this._granularityCellSize)-1,bt=I<at;const Et=ce===0;if(Et&&(R===V||R===H))return;if(Et||Se>=1||De<=0){const un=y-R,on=M+(d-M)*Math.min((V-R)/un,(H-R)/un);Ve=Math.floor(Math.min(on,I)/this._granularityCellSize)+1,Ze=Math.ceil(Math.max(on,I)/this._granularityCellSize)-1,bt=I<on}const Zt=X>0?H:V;if(bt)for(let un=Ve;un<=Ze;un++)r.push(this._vertexToIndex(un*this._granularityCellSize,Zt));else for(let un=Ze;un>=Ve;un--)r.push(this._vertexToIndex(un*this._granularityCellSize,Zt))}_generateOutline(r){const d=[];for(const y of r){const v=nl(y,this._granularity,!0),C=this._pointArrayToIndices(v),M=[];for(let R=1;R<C.length;R++)M.push(C[R-1]),M.push(C[R]);d.push(M)}return d}_handlePoles(r){let d=!1,y=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(d||y)&&this._fillPoles(r,d,y)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let d=0;d<r.length;d+=2){const y=r[d+1];y===Zd&&(r[d+1]=-32767),y===lc&&(r[d+1]=32766)}}_generatePoleQuad(r,d,y,v,C,M){v>C!=(M===Zd)?(r.push(d),r.push(y),r.push(this._vertexToIndex(v,M)),r.push(y),r.push(this._vertexToIndex(C,M)),r.push(this._vertexToIndex(v,M))):(r.push(y),r.push(d),r.push(this._vertexToIndex(v,M)),r.push(this._vertexToIndex(C,M)),r.push(y),r.push(this._vertexToIndex(v,M)))}_fillPoles(r,d,y){const v=this._vertexBuffer,C=Pt,M=r.length;for(let R=2;R<M;R+=3){const I=r[R-2],V=r[R-1],H=r[R],X=v[2*I],se=v[2*I+1],ce=v[2*V],he=v[2*V+1],xe=v[2*H],Se=v[2*H+1];d&&(se===0&&he===0&&this._generatePoleQuad(r,I,V,X,ce,Zd),he===0&&Se===0&&this._generatePoleQuad(r,V,H,ce,xe,Zd),Se===0&&se===0&&this._generatePoleQuad(r,H,I,xe,X,Zd)),y&&(se===C&&he===C&&this._generatePoleQuad(r,I,V,X,ce,lc),he===C&&Se===C&&this._generatePoleQuad(r,V,H,ce,xe,lc),Se===C&&se===C&&this._generatePoleQuad(r,H,I,xe,X,lc))}}_initializeVertices(r){for(let d=0;d<r.length;d+=2)this._vertexToIndex(r[d],r[d+1])}subdividePolygonInternal(r,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:v}=function(R){const I=[],V=[];for(const H of R)if(H.length!==0){H!==R[0]&&I.push(V.length/2);for(let X=0;X<H.length;X++)V.push(H[X].x),V.push(H[X].y)}return{flattened:V,holeIndices:I}}(r);let C;this._initializeVertices(y);try{const R=function(V,H,X=2){const se=H&&H.length,ce=se?H[0]*X:V.length;let he=t0(V,0,ce,X,!0);const xe=[];if(!he||he.next===he.prev)return xe;let Se,De,at;if(se&&(he=function(Ve,Ze,bt,Et){const Zt=[];for(let un=0,on=Ze.length;un<on;un++){const hn=t0(Ve,Ze[un]*Et,un<on-1?Ze[un+1]*Et:Ve.length,Et,!1);hn===hn.next&&(hn.steiner=!0),Zt.push(Gc(hn))}Zt.sort(b_);for(let un=0;un<Zt.length;un++)bt=v_(Zt[un],bt);return bt}(V,H,he,X)),V.length>80*X){Se=V[0],De=V[1];let Ve=Se,Ze=De;for(let bt=X;bt<ce;bt+=X){const Et=V[bt],Zt=V[bt+1];Et<Se&&(Se=Et),Zt<De&&(De=Zt),Et>Ve&&(Ve=Et),Zt>Ze&&(Ze=Zt)}at=Math.max(Ve-Se,Ze-De),at=at!==0?32767/at:0}return Ds(he,xe,X,Se,De,at,0),xe}(y,v),I=this._convertIndices(y,R);C=this._subdivideTrianglesScanline(I)}catch(R){console.error(R)}let M=[];return d&&(M=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(C),{verticesFlattened:this._vertexBuffer,indicesTriangles:C,indicesLineList:M}}_convertIndices(r,d){const y=[];for(let v=0;v<d.length;v++)y.push(this._vertexToIndex(r[2*d[v]],r[2*d[v]+1]));return y}_pointArrayToIndices(r){const d=[];for(let y=0;y<r.length;y++){const v=r[y];d.push(this._vertexToIndex(v.x,v.y))}return d}}function pf(f,r,d,y=!0){return new Pp(d,r).subdividePolygonInternal(f,y)}function nl(f,r,d=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const y=f[0],v=f[f.length-1],C=d&&(y.x!==v.x||y.y!==v.y);if(r<2)return C?[...f,f[0]]:[...f];const M=Math.floor(Pt/r),R=[];R.push(new g(f[0].x,f[0].y));const I=f.length,V=C?I:I-1;for(let H=0;H<V;H++){const X=f[H],se=H<I-1?f[H+1]:f[0],ce=X.x,he=X.y,xe=se.x,Se=se.y,De=ce!==xe,at=he!==Se;if(!De&&!at)continue;const Ve=xe-ce,Ze=Se-he,bt=Math.abs(Ve),Et=Math.abs(Ze);let Zt=ce,un=he;for(;;){const hn=Ve>0?(Math.floor(Zt/M)+1)*M:(Math.ceil(Zt/M)-1)*M,En=Ze>0?(Math.floor(un/M)+1)*M:(Math.ceil(un/M)-1)*M,fn=Math.abs(Zt-hn),pn=Math.abs(un-En),Ut=Math.abs(Zt-xe),Wn=Math.abs(un-Se),Qn=De?fn/bt:Number.POSITIVE_INFINITY,Pn=at?pn/Et:Number.POSITIVE_INFINITY;if((Ut<=fn||!De)&&(Wn<=pn||!at))break;if(Qn<Pn&&De||!at){Zt=hn,un+=Ze*Qn;const An=new g(Zt,Math.round(un));R[R.length-1].x===An.x&&R[R.length-1].y===An.y||R.push(An)}else{Zt+=Ve*Pn,un=En;const An=new g(Math.round(Zt),un);R[R.length-1].x===An.x&&R[R.length-1].y===An.y||R.push(An)}}const on=new g(xe,Se);R[R.length-1].x===on.x&&R[R.length-1].y===on.y||R.push(on)}return R}function w_(f,r,d){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,v=f[2*r[0]];for(let I=1;I<r.length;I++){const V=f[2*r[I]];V<v&&(v=V,y=I)}const C=r.length;let M=y,R=(M+1)%C;for(;;){const I=M-1>=0?M-1:C-1,V=(R+1)%C,H=f[2*r[I]],X=f[2*r[V]],se=f[2*r[M]],ce=f[2*r[M]+1],he=f[2*r[R]+1];let xe=!1;if(H<X)xe=!0;else if(H>X)xe=!1;else{const Se=he-ce,De=-(f[2*r[R]]-se),at=ce<he?1:-1;((H-se)*Se+(f[2*r[I]+1]-ce)*De)*at>((X-se)*Se+(f[2*r[V]+1]-ce)*De)*at&&(xe=!0)}if(xe){const Se=r[I],De=r[M],at=r[R];Se!==De&&Se!==at&&De!==at&&d.push(at,De,Se),M--,M<0&&(M=C-1)}else{const Se=r[V],De=r[M],at=r[R];Se!==De&&Se!==at&&De!==at&&d.push(at,De,Se),R++,R>=C&&(R=0)}if(I===V)break}}function s0(f,r,d,y,v,C,M,R,I){const V=v.length/2,H=M&&R&&I;if(V<yi.MAX_VERTEX_ARRAY_LENGTH){const X=r.prepareSegment(V,d,y),se=X.vertexLength;for(let xe=0;xe<C.length;xe+=3)y.emplaceBack(se+C[xe],se+C[xe+1],se+C[xe+2]);let ce,he;X.vertexLength+=V,X.primitiveLength+=C.length/3,H&&(he=M.prepareSegment(V,d,R),ce=he.vertexLength,he.vertexLength+=V);for(let xe=0;xe<v.length;xe+=2)f(v[xe],v[xe+1]);if(H)for(let xe=0;xe<I.length;xe++){const Se=I[xe];for(let De=1;De<Se.length;De+=2)R.emplaceBack(ce+Se[De-1],ce+Se[De]);he.primitiveLength+=Se.length/2}}else(function(X,se,ce,he,xe,Se){const De=[];for(let Et=0;Et<he.length/2;Et++)De.push(-1);const at={count:0};let Ve=0,Ze=X.getOrCreateLatestSegment(se,ce),bt=Ze.vertexLength;for(let Et=2;Et<xe.length;Et+=3){const Zt=xe[Et-2],un=xe[Et-1],on=xe[Et];let hn=De[Zt]<Ve,En=De[un]<Ve,fn=De[on]<Ve;Ze.vertexLength+((hn?1:0)+(En?1:0)+(fn?1:0))>yi.MAX_VERTEX_ARRAY_LENGTH&&(Ze=X.createNewSegment(se,ce),Ve=at.count,hn=!0,En=!0,fn=!0,bt=0);const pn=Zc(De,he,Se,at,Zt,hn,Ze),Ut=Zc(De,he,Se,at,un,En,Ze),Wn=Zc(De,he,Se,at,on,fn,Ze);ce.emplaceBack(bt+pn-Ve,bt+Ut-Ve,bt+Wn-Ve),Ze.primitiveLength++}})(r,d,y,v,C,f),H&&function(X,se,ce,he,xe,Se){const De=[];for(let Et=0;Et<he.length/2;Et++)De.push(-1);const at={count:0};let Ve=0,Ze=X.getOrCreateLatestSegment(se,ce),bt=Ze.vertexLength;for(let Et=0;Et<xe.length;Et++){const Zt=xe[Et];for(let un=1;un<xe[Et].length;un+=2){const on=Zt[un-1],hn=Zt[un];let En=De[on]<Ve,fn=De[hn]<Ve;Ze.vertexLength+((En?1:0)+(fn?1:0))>yi.MAX_VERTEX_ARRAY_LENGTH&&(Ze=X.createNewSegment(se,ce),Ve=at.count,En=!0,fn=!0,bt=0);const pn=Zc(De,he,Se,at,on,En,Ze),Ut=Zc(De,he,Se,at,hn,fn,Ze);ce.emplaceBack(bt+pn-Ve,bt+Ut-Ve),Ze.primitiveLength++}}}(M,d,R,v,I,f),r.forceNewSegmentOnNextPrepare(),M==null||M.forceNewSegmentOnNextPrepare()}function Zc(f,r,d,y,v,C,M){if(C){const R=y.count;return d(r[2*v],r[2*v+1]),f[v]=y.count,y.count++,M.vertexLength++,R}return f[v]}class tg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(d=>d.id),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new it,this.indexArray=new Bi,this.indexArray2=new Qi,this.programConfigurations=new wa(r.layers,r.zoom),this.segments=new yi,this.segments2=new yi,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(r,d,y){this.hasDependencies=uf("fill",this.layers,d);const v=this.layers[0].layout.get("fill-sort-key"),C=!v.isConstant(),M=[];for(const{feature:R,id:I,index:V,sourceLayerIndex:H}of r){const X=this.layers[0]._featureFilter.needGeometry,se=Ku(R,X);if(!this.layers[0]._featureFilter.filter(new Yi(this.zoom),se,y))continue;const ce=C?v.evaluate(se,{},y,d.availableImages):void 0,he={id:I,properties:R.properties,type:R.type,sourceLayerIndex:H,index:V,geometry:X?se.geometry:rc(R),patterns:{},sortKey:ce};M.push(he)}C&&M.sort((R,I)=>R.sortKey-I.sortKey);for(const R of M){const{geometry:I,index:V,sourceLayerIndex:H}=R;if(this.hasDependencies){const X=df("fill",this.layers,R,{zoom:this.zoom},d);this.patternFeatures.push(X)}else this.addFeature(R,I,V,y,{},d.subdivisionGranularity);d.featureIndex.insert(r[V].feature,I,V,H,this.index)}}update(r,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,d,this.stateDependentLayers,{imagePositions:y})}addFeatures(r,d,y){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,d,y,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,e0),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,d,y,v,C,M){for(const R of $h(d,500)){const I=pf(R,v,M.fill.getGranularityForZoomLevel(v.z)),V=this.layoutVertexArray;s0((H,X)=>{V.emplaceBack(H,X)},this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,y,{imagePositions:C,canonical:v})}}let Rp,r0;xn("FillBucket",tg,{omit:["layers","patternFeatures"]});var sw={get paint(){return r0=r0||new Cr({"fill-antialias":new Nn(dt.paint_fill["fill-antialias"]),"fill-opacity":new Dn(dt.paint_fill["fill-opacity"]),"fill-color":new Dn(dt.paint_fill["fill-color"]),"fill-outline-color":new Dn(dt.paint_fill["fill-outline-color"]),"fill-translate":new Nn(dt.paint_fill["fill-translate"]),"fill-translate-anchor":new Nn(dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Gu(dt.paint_fill["fill-pattern"])})},get layout(){return Rp=Rp||new Cr({"fill-sort-key":new Dn(dt.layout_fill["fill-sort-key"])})}};class rw extends no{constructor(r,d){super(r,sw,d)}recalculate(r,d){super.recalculate(r,d);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new tg(r)}queryRadius(){return kp(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:d,transform:y,pixelsToTileUnits:v}){return Tr(Np(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,v),d)}isTileClipped(){return!0}}const ls=Cs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ks=Cs([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ai}=ls;class Ci{constructor(r,d,y,v,C){this.properties={},this.extent=y,this.type=0,this.id=void 0,this._pbf=r,this._geometry=-1,this._keys=v,this._values=C,r.readFields(cs,this,d)}loadGeometry(){const r=this._pbf;r.pos=this._geometry;const d=r.readVarint()+r.pos,y=[];let v,C=1,M=0,R=0,I=0;for(;r.pos<d;){if(M<=0){const V=r.readVarint();C=7&V,M=V>>3}if(M--,C===1||C===2)R+=r.readSVarint(),I+=r.readSVarint(),C===1&&(v&&y.push(v),v=[]),v&&v.push(new g(R,I));else{if(C!==7)throw new Error(`unknown command ${C}`);v&&v.push(v[0].clone())}}return v&&y.push(v),y}bbox(){const r=this._pbf;r.pos=this._geometry;const d=r.readVarint()+r.pos;let y=1,v=0,C=0,M=0,R=1/0,I=-1/0,V=1/0,H=-1/0;for(;r.pos<d;){if(v<=0){const X=r.readVarint();y=7&X,v=X>>3}if(v--,y===1||y===2)C+=r.readSVarint(),M+=r.readSVarint(),C<R&&(R=C),C>I&&(I=C),M<V&&(V=M),M>H&&(H=M);else if(y!==7)throw new Error(`unknown command ${y}`)}return[R,V,I,H]}toGeoJSON(r,d,y){const v=this.extent*Math.pow(2,y),C=this.extent*r,M=this.extent*d,R=this.loadGeometry();function I(se){return[360*(se.x+C)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(se.y+M)/v)*Math.PI))-90]}function V(se){return se.map(I)}let H;if(this.type===1){const se=[];for(const he of R)se.push(he[0]);const ce=V(se);H=se.length===1?{type:"Point",coordinates:ce[0]}:{type:"MultiPoint",coordinates:ce}}else if(this.type===2){const se=R.map(V);H=se.length===1?{type:"LineString",coordinates:se[0]}:{type:"MultiLineString",coordinates:se}}else{if(this.type!==3)throw new Error("unknown feature type");{const se=function(he){const xe=he.length;if(xe<=1)return[he];const Se=[];let De,at;for(let Ve=0;Ve<xe;Ve++){const Ze=Io(he[Ve]);Ze!==0&&(at===void 0&&(at=Ze<0),at===Ze<0?(De&&Se.push(De),De=[he[Ve]]):De&&De.push(he[Ve]))}return De&&Se.push(De),Se}(R),ce=[];for(const he of se)ce.push(he.map(V));H=ce.length===1?{type:"Polygon",coordinates:ce[0]}:{type:"MultiPolygon",coordinates:ce}}}const X={type:"Feature",geometry:H,properties:this.properties};return this.id!=null&&(X.id=this.id),X}}function cs(f,r,d){f===1?r.id=d.readVarint():f===2?function(y,v){const C=y.readVarint()+y.pos;for(;y.pos<C;){const M=v._keys[y.readVarint()],R=v._values[y.readVarint()];v.properties[M]=R}}(d,r):f===3?r.type=d.readVarint():f===4&&(r._geometry=d.pos)}function Io(f){let r=0;for(let d,y,v=0,C=f.length,M=C-1;v<C;M=v++)d=f[v],y=f[M],r+=(y.x-d.x)*(d.y+y.y);return r}Ci.types=["Unknown","Point","LineString","Polygon"];class Yc{constructor(r,d){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(mf,this,d),this.length=this._features.length}feature(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];const d=this._pbf.readVarint()+this._pbf.pos;return new Ci(this._pbf,d,this.extent,this._keys,this._values)}}function mf(f,r,d){f===15?r.version=d.readVarint():f===1?r.name=d.readString():f===5?r.extent=d.readVarint():f===2?r._features.push(d.pos):f===3?r._keys.push(d.readString()):f===4&&r._values.push(function(y){let v=null;const C=y.readVarint()+y.pos;for(;y.pos<C;){const M=y.readVarint()>>3;v=M===1?y.readString():M===2?y.readFloat():M===3?y.readDouble():M===4?y.readVarint64():M===5?y.readVarint():M===6?y.readSVarint():M===7?y.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v}(d))}class ng{constructor(r,d){this.layers=r.readFields(Xc,{},d)}}function Xc(f,r,d){if(f===3){const y=new Yc(d,d.readVarint()+d.pos);y.length&&(r[y.name]=y)}}const qs=Math.pow(2,13);function il(f,r,d,y,v,C,M,R){f.emplaceBack(r,d,2*Math.floor(y*qs)+M,v*qs*2,C*qs*2,Math.round(R))}class Kc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(d=>d.id),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new Mt,this.centroidVertexArray=new Ke,this.indexArray=new Bi,this.programConfigurations=new wa(r.layers,r.zoom),this.segments=new yi,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(r,d,y){this.features=[],this.hasDependencies=uf("fill-extrusion",this.layers,d);for(const{feature:v,id:C,index:M,sourceLayerIndex:R}of r){const I=this.layers[0]._featureFilter.needGeometry,V=Ku(v,I);if(!this.layers[0]._featureFilter.filter(new Yi(this.zoom),V,y))continue;const H={id:C,sourceLayerIndex:R,index:M,geometry:I?V.geometry:rc(v),properties:v.properties,type:v.type,patterns:{}};this.hasDependencies?this.features.push(df("fill-extrusion",this.layers,H,{zoom:this.zoom},d)):this.addFeature(H,H.geometry,M,y,{},d.subdivisionGranularity),d.featureIndex.insert(v,H.geometry,M,R,this.index,!0)}}addFeatures(r,d,y){for(const v of this.features){const{geometry:C}=v;this.addFeature(v,C,v.index,d,y,r.subdivisionGranularity)}}update(r,d,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,d,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Ai),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,ks.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,d,y,v,C,M){for(const R of $h(d,500)){const I={x:0,y:0,sampleCount:0},V=this.layoutVertexArray.length;this.processPolygon(I,v,r,R,M);const H=this.layoutVertexArray.length-V,X=Math.floor(I.x/I.sampleCount),se=Math.floor(I.y/I.sampleCount);for(let ce=0;ce<H;ce++)this.centroidVertexArray.emplaceBack(X,se)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,y,{imagePositions:C,canonical:v})}processPolygon(r,d,y,v,C){if(v.length<1||Yd(v[0]))return;for(const X of v)X.length!==0&&a0(r,X);const M={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},R=C.fill.getGranularityForZoomLevel(d.z),I=Ci.types[y.type]==="Polygon";for(const X of v){if(X.length===0||Yd(X))continue;const se=nl(X,R,I);this._generateSideFaces(se,M)}if(!I)return;const V=pf(v,d,R,!1),H=this.layoutVertexArray;s0((X,se)=>{il(H,X,se,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,V.verticesFlattened,V.indicesTriangles)}_generateSideFaces(r,d){let y=0;for(let v=1;v<r.length;v++){const C=r[v],M=r[v-1];if(sl(C,M))continue;d.segment.vertexLength+4>yi.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const R=C.sub(M)._perp()._unit(),I=M.dist(C);y+I>32768&&(y=0),il(this.layoutVertexArray,C.x,C.y,R.x,R.y,0,0,y),il(this.layoutVertexArray,C.x,C.y,R.x,R.y,0,1,y),y+=I,il(this.layoutVertexArray,M.x,M.y,R.x,R.y,0,0,y),il(this.layoutVertexArray,M.x,M.y,R.x,R.y,0,1,y);const V=d.segment.vertexLength;this.indexArray.emplaceBack(V,V+2,V+1),this.indexArray.emplaceBack(V+1,V+2,V+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function a0(f,r){for(let d=0;d<r.length;d++){const y=r[d];d===r.length-1&&r[0].x===y.x&&r[0].y===y.y||(f.x+=y.x,f.y+=y.y,f.sampleCount++)}}function sl(f,r){return f.x===r.x&&(f.x<0||f.x>Pt)||f.y===r.y&&(f.y<0||f.y>Pt)}function Yd(f){return f.every(r=>r.x<0)||f.every(r=>r.x>Pt)||f.every(r=>r.y<0)||f.every(r=>r.y>Pt)}let gf;xn("FillExtrusionBucket",Kc,{omit:["layers","features"]});var lo={get paint(){return gf=gf||new Cr({"fill-extrusion-opacity":new Nn(dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Dn(dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Nn(dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Nn(dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Gu(dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Dn(dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Dn(dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Nn(dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class o0 extends no{constructor(r,d){super(r,lo,d)}createBucket(r){return new Kc(r)}queryRadius(){return kp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:d,featureState:y,geometry:v,transform:C,pixelsToTileUnits:M,pixelPosMatrix:R}){const I=Np(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-C.bearingInRadians,M),V=this.paint.get("fill-extrusion-height").evaluate(d,y),H=this.paint.get("fill-extrusion-base").evaluate(d,y),X=function(ce,he){const xe=[];for(const Se of ce){const De=[Se.x,Se.y,0,1];At(De,De,he),xe.push(new g(De[0]/De[3],De[1]/De[3]))}return xe}(I,R),se=function(ce,he,xe,Se){const De=[],at=[],Ve=Se[8]*he,Ze=Se[9]*he,bt=Se[10]*he,Et=Se[11]*he,Zt=Se[8]*xe,un=Se[9]*xe,on=Se[10]*xe,hn=Se[11]*xe;for(const En of ce){const fn=[],pn=[];for(const Ut of En){const Wn=Ut.x,Qn=Ut.y,Pn=Se[0]*Wn+Se[4]*Qn+Se[12],An=Se[1]*Wn+Se[5]*Qn+Se[13],wi=Se[2]*Wn+Se[6]*Qn+Se[14],ps=Se[3]*Wn+Se[7]*Qn+Se[15],Gs=wi+bt,Nr=ps+Et,ra=Pn+Zt,aa=An+un,nr=wi+on,xs=ps+hn,br=new g((Pn+Ve)/Nr,(An+Ze)/Nr);br.z=Gs/Nr,fn.push(br);const ir=new g(ra/xs,aa/xs);ir.z=nr/xs,pn.push(ir)}De.push(fn),at.push(pn)}return[De,at]}(v,H,V,R);return function(ce,he,xe){let Se=1/0;Tr(xe,he)&&(Se=Dp(xe,he[0]));for(let De=0;De<he.length;De++){const at=he[De],Ve=ce[De];for(let Ze=0;Ze<at.length-1;Ze++){const bt=at[Ze],Et=[bt,at[Ze+1],Ve[Ze+1],Ve[Ze],bt];f_(xe,Et)&&(Se=Math.min(Se,Dp(xe,Et)))}}return Se!==1/0&&Se}(se[0],se[1],X)}}function Xd(f,r){return f.x*r.x+f.y*r.y}function Dp(f,r){if(f.length===1){let d=0;const y=r[d++];let v;for(;!v||y.equals(v);)if(v=r[d++],!v)return 1/0;for(;d<r.length;d++){const C=r[d],M=f[0],R=v.sub(y),I=C.sub(y),V=M.sub(y),H=Xd(R,R),X=Xd(R,I),se=Xd(I,I),ce=Xd(V,R),he=Xd(V,I),xe=H*se-X*X,Se=(se*ce-X*he)/xe,De=(H*he-X*ce)/xe,at=y.z*(1-Se-De)+v.z*Se+C.z*De;if(isFinite(at))return at}return 1/0}{let d=1/0;for(const y of r)d=Math.min(d,y.z);return d}}const ig=Cs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:nd}=ig,sa=Cs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:id}=sa,yf=Math.cos(Math.PI/180*37.5),Kd=Math.pow(2,14)/.5;class zp{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(d=>d.id),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new _t,this.layoutVertexArray2=new wt,this.indexArray=new Bi,this.programConfigurations=new wa(r.layers,r.zoom),this.segments=new yi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(r,d,y){this.hasDependencies=uf("line",this.layers,d)||this.hasLineDasharray(this.layers);const v=this.layers[0].layout.get("line-sort-key"),C=!v.isConstant(),M=[];for(const{feature:R,id:I,index:V,sourceLayerIndex:H}of r){const X=this.layers[0]._featureFilter.needGeometry,se=Ku(R,X);if(!this.layers[0]._featureFilter.filter(new Yi(this.zoom),se,y))continue;const ce=C?v.evaluate(se,{},y):void 0,he={id:I,properties:R.properties,type:R.type,sourceLayerIndex:H,index:V,geometry:X?se.geometry:rc(R),patterns:{},dashes:{},sortKey:ce};M.push(he)}C&&M.sort((R,I)=>R.sortKey-I.sortKey);for(const R of M){const{geometry:I,index:V,sourceLayerIndex:H}=R;this.hasDependencies?(uf("line",this.layers,d)?df("line",this.layers,R,{zoom:this.zoom},d):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,R,this.zoom,d),this.patternFeatures.push(R)):this.addFeature(R,I,V,y,{},{},d.subdivisionGranularity),d.featureIndex.insert(r[V].feature,I,V,H,this.index)}}update(r,d,y,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,d,this.stateDependentLayers,{imagePositions:y,dashPositions:v})}addFeatures(r,d,y,v){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,d,y,v,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,id)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,nd),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,d,y,v,C,M,R){const I=this.layers[0].layout,V=I.get("line-join").evaluate(r,{}),H=I.get("line-cap"),X=I.get("line-miter-limit"),se=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const ce of d)this.addLine(ce,r,V,H,X,se,v,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,y,{imagePositions:C,dashPositions:M,canonical:v})}addLine(r,d,y,v,C,M,R,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=nl(r,R?I.line.getGranularityForZoomLevel(R.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ve=0;Ve<r.length-1;Ve++)this.totalDistance+=r[Ve].dist(r[Ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const V=Ci.types[d.type]==="Polygon";let H=r.length;for(;H>=2&&r[H-1].equals(r[H-2]);)H--;let X=0;for(;X<H-1&&r[X].equals(r[X+1]);)X++;if(H<(V?3:2))return;y==="bevel"&&(C=1.05);const se=this.overscaling<=16?122880/(512*this.overscaling):0,ce=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let he,xe,Se,De,at;this.e1=this.e2=-1,V&&(he=r[H-2],at=r[X].sub(he)._unit()._perp());for(let Ve=X;Ve<H;Ve++){if(Se=Ve===H-1?V?r[X+1]:void 0:r[Ve+1],Se&&r[Ve].equals(Se))continue;at&&(De=at),he&&(xe=he),he=r[Ve],at=Se?Se.sub(he)._unit()._perp():De,De=De||at;let Ze=De.add(at);Ze.x===0&&Ze.y===0||Ze._unit();const bt=De.x*at.x+De.y*at.y,Et=Ze.x*at.x+Ze.y*at.y,Zt=Et!==0?1/Et:1/0,un=2*Math.sqrt(2-2*Et),on=Et<yf&&xe&&Se,hn=De.x*at.y-De.y*at.x>0;if(on&&Ve>X){const pn=he.dist(xe);if(pn>2*se){const Ut=he.sub(he.sub(xe)._mult(se/pn)._round());this.updateDistance(xe,Ut),this.addCurrentVertex(Ut,De,0,0,ce),xe=Ut}}const En=xe&&Se;let fn=En?y:V?"butt":v;if(En&&fn==="round"&&(Zt<M?fn="miter":Zt<=2&&(fn="fakeround")),fn==="miter"&&Zt>C&&(fn="bevel"),fn==="bevel"&&(Zt>2&&(fn="flipbevel"),Zt<C&&(fn="miter")),xe&&this.updateDistance(xe,he),fn==="miter")Ze._mult(Zt),this.addCurrentVertex(he,Ze,0,0,ce);else if(fn==="flipbevel"){if(Zt>100)Ze=at.mult(-1);else{const pn=Zt*De.add(at).mag()/De.sub(at).mag();Ze._perp()._mult(pn*(hn?-1:1))}this.addCurrentVertex(he,Ze,0,0,ce),this.addCurrentVertex(he,Ze.mult(-1),0,0,ce)}else if(fn==="bevel"||fn==="fakeround"){const pn=-Math.sqrt(Zt*Zt-1),Ut=hn?pn:0,Wn=hn?0:pn;if(xe&&this.addCurrentVertex(he,De,Ut,Wn,ce),fn==="fakeround"){const Qn=Math.round(180*un/Math.PI/20);for(let Pn=1;Pn<Qn;Pn++){let An=Pn/Qn;if(An!==.5){const ps=An-.5;An+=An*ps*(An-1)*((1.0904+bt*(bt*(3.55645-1.43519*bt)-3.2452))*ps*ps+(.848013+bt*(.215638*bt-1.06021)))}const wi=at.sub(De)._mult(An)._add(De)._unit()._mult(hn?-1:1);this.addHalfVertex(he,wi.x,wi.y,!1,hn,0,ce)}}Se&&this.addCurrentVertex(he,at,-Ut,-Wn,ce)}else if(fn==="butt")this.addCurrentVertex(he,Ze,0,0,ce);else if(fn==="square"){const pn=xe?1:-1;this.addCurrentVertex(he,Ze,pn,pn,ce)}else fn==="round"&&(xe&&(this.addCurrentVertex(he,De,0,0,ce),this.addCurrentVertex(he,De,1,1,ce,!0)),Se&&(this.addCurrentVertex(he,at,-1,-1,ce,!0),this.addCurrentVertex(he,at,0,0,ce)));if(on&&Ve<H-1){const pn=he.dist(Se);if(pn>2*se){const Ut=he.add(Se.sub(he)._mult(se/pn)._round());this.updateDistance(he,Ut),this.addCurrentVertex(Ut,at,0,0,ce),he=Ut}}}}addCurrentVertex(r,d,y,v,C,M=!1){const R=d.y*v-d.x,I=-d.y-d.x*v;this.addHalfVertex(r,d.x+d.y*y,d.y-d.x*y,M,!1,y,C),this.addHalfVertex(r,R,I,M,!0,-v,C),this.distance>Kd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,d,y,v,C,M))}addHalfVertex({x:r,y:d},y,v,C,M,R,I){const V=.5*(this.lineClips?this.scaledDistance*(Kd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(C?1:0),(d<<1)+(M?1:0),Math.round(63*y)+128,Math.round(63*v)+128,1+(R===0?0:R<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const H=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,H,this.e2),I.primitiveLength++),M?this.e2=H:this.e1=H}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,d){this.distance+=r.dist(d),this.updateScaledDistance()}hasLineDasharray(r){for(const d of r){const y=d.paint.get("line-dasharray");if(y&&!y.isConstant())return!0}return!1}addLineDashDependencies(r,d,y,v){for(const C of r){const M=C.paint.get("line-dasharray");if(!M||M.value.kind==="constant")continue;const R=C.layout.get("line-cap")==="round",I={dasharray:M.value.evaluate({zoom:y-1},d,{}),round:R},V={dasharray:M.value.evaluate({zoom:y},d,{}),round:R},H={dasharray:M.value.evaluate({zoom:y+1},d,{}),round:R},X=`${I.dasharray.join(",")},${I.round}`,se=`${V.dasharray.join(",")},${V.round}`,ce=`${H.dasharray.join(",")},${H.round}`;v.dashDependencies[X]=I,v.dashDependencies[se]=V,v.dashDependencies[ce]=H,d.dashes[C.id]={min:X,mid:se,max:ce}}}}let sg,l0;xn("LineBucket",zp,{omit:["layers","patternFeatures"]});var xf={get paint(){return l0=l0||new Cr({"line-opacity":new Dn(dt.paint_line["line-opacity"]),"line-color":new Dn(dt.paint_line["line-color"]),"line-translate":new Nn(dt.paint_line["line-translate"]),"line-translate-anchor":new Nn(dt.paint_line["line-translate-anchor"]),"line-width":new Dn(dt.paint_line["line-width"]),"line-gap-width":new Dn(dt.paint_line["line-gap-width"]),"line-offset":new Dn(dt.paint_line["line-offset"]),"line-blur":new Dn(dt.paint_line["line-blur"]),"line-dasharray":new Gu(dt.paint_line["line-dasharray"]),"line-pattern":new Gu(dt.paint_line["line-pattern"]),"line-gradient":new Wu(dt.paint_line["line-gradient"])})},get layout(){return sg=sg||new Cr({"line-cap":new Nn(dt.layout_line["line-cap"]),"line-join":new Dn(dt.layout_line["line-join"]),"line-miter-limit":new Nn(dt.layout_line["line-miter-limit"]),"line-round-limit":new Nn(dt.layout_line["line-round-limit"]),"line-sort-key":new Dn(dt.layout_line["line-sort-key"])})}};class c0 extends Dn{possiblyEvaluate(r,d){return d=new Yi(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(r,d)}evaluate(r,d,y,v){return d=Ge({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(r,d,y,v)}}let Ca;class S_ extends no{constructor(r,d){super(r,xf,d),this.gradientVersion=0,Ca||(Ca=new c0(xf.paint.properties["line-width"].specification),Ca.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!function(y){return y._styleExpression!==void 0}(d)&&d._styleExpression.expression instanceof Un,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,d){super.recalculate(r,d),this.paint._values["line-floorwidth"]=Ca.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new zp(r)}queryRadius(r){const d=r,y=co(Gd("line-width",this,d),Gd("line-gap-width",this,d)),v=Gd("line-offset",this,d);return y/2+Math.abs(v)+kp(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:d,featureState:y,geometry:v,transform:C,pixelsToTileUnits:M}){const R=Np(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-C.bearingInRadians,M),I=M/2*co(this.paint.get("line-width").evaluate(d,y),this.paint.get("line-gap-width").evaluate(d,y)),V=this.paint.get("line-offset").evaluate(d,y);return V&&(v=function(H,X){const se=[];for(let ce=0;ce<H.length;ce++){const he=H[ce],xe=[];for(let Se=0;Se<he.length;Se++){const De=he[Se-1],at=he[Se],Ve=he[Se+1],Ze=Se===0?new g(0,0):at.sub(De)._unit()._perp(),bt=Se===he.length-1?new g(0,0):Ve.sub(at)._unit()._perp(),Et=Ze._add(bt)._unit(),Zt=Et.x*bt.x+Et.y*bt.y;Zt!==0&&Et._mult(1/Zt),xe.push(Et._mult(X)._add(at))}se.push(xe)}return se}(v,V*M)),function(H,X,se){for(let ce=0;ce<X.length;ce++){const he=X[ce];if(H.length>=3){for(let xe=0;xe<he.length;xe++)if(qc(H,he[xe]))return!0}if(ia(H,he,se))return!0}return!1}(R,v,I)}isTileClipped(){return!0}}function co(f,r){return r>0?r+2*f:f}const j_=Cs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),C_=Cs([{name:"a_projected_pos",components:3,type:"Float32"}],4);Cs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const aw=Cs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Cs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Qc=Cs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rg=Cs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function u0(f,r,d){return f.sections.forEach(y=>{y.text=function(v,C,M){const R=C.layout.get("text-transform").evaluate(M,{});return R==="uppercase"?v=v.toLocaleUpperCase():R==="lowercase"&&(v=v.toLocaleLowerCase()),Ml.applyArabicShaping&&(v=Ml.applyArabicShaping(v)),v}(y.text,r,d)}),f}Cs([{name:"triangle",components:3,type:"Uint16"}]),Cs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Cs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Cs([{type:"Float32",name:"offsetX"}]),Cs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Cs([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const cc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ur=24;const ag=4294967296,d0=1/ag,og=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class Ip{constructor(r=new Uint8Array(16)){this.buf=ArrayBuffer.isView(r)?r:new Uint8Array(r),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(r,d,y=this.length){for(;this.pos<y;){const v=this.readVarint(),C=v>>3,M=this.pos;this.type=7&v,r(C,d,this),this.pos===M&&this.skip(v)}return d}readMessage(r,d){return this.readFields(r,d,this.readVarint()+this.pos)}readFixed32(){const r=this.dataView.getUint32(this.pos,!0);return this.pos+=4,r}readSFixed32(){const r=this.dataView.getInt32(this.pos,!0);return this.pos+=4,r}readFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*ag;return this.pos+=8,r}readSFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*ag;return this.pos+=8,r}readFloat(){const r=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,r}readDouble(){const r=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,r}readVarint(r){const d=this.buf;let y,v;return v=d[this.pos++],y=127&v,v<128?y:(v=d[this.pos++],y|=(127&v)<<7,v<128?y:(v=d[this.pos++],y|=(127&v)<<14,v<128?y:(v=d[this.pos++],y|=(127&v)<<21,v<128?y:(v=d[this.pos],y|=(15&v)<<28,function(C,M,R){const I=R.buf;let V,H;if(H=I[R.pos++],V=(112&H)>>4,H<128||(H=I[R.pos++],V|=(127&H)<<3,H<128)||(H=I[R.pos++],V|=(127&H)<<10,H<128)||(H=I[R.pos++],V|=(127&H)<<17,H<128)||(H=I[R.pos++],V|=(127&H)<<24,H<128)||(H=I[R.pos++],V|=(1&H)<<31,H<128))return _f(C,V,M);throw new Error("Expected varint not more than 10 bytes")}(y,r,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const r=this.readVarint();return r%2==1?(r+1)/-2:r/2}readBoolean(){return!!this.readVarint()}readString(){const r=this.readVarint()+this.pos,d=this.pos;return this.pos=r,r-d>=12&&og?og.decode(this.buf.subarray(d,r)):function(y,v,C){let M="",R=v;for(;R<C;){const I=y[R];let V,H,X,se=null,ce=I>239?4:I>223?3:I>191?2:1;if(R+ce>C)break;ce===1?I<128&&(se=I):ce===2?(V=y[R+1],(192&V)==128&&(se=(31&I)<<6|63&V,se<=127&&(se=null))):ce===3?(V=y[R+1],H=y[R+2],(192&V)==128&&(192&H)==128&&(se=(15&I)<<12|(63&V)<<6|63&H,(se<=2047||se>=55296&&se<=57343)&&(se=null))):ce===4&&(V=y[R+1],H=y[R+2],X=y[R+3],(192&V)==128&&(192&H)==128&&(192&X)==128&&(se=(15&I)<<18|(63&V)<<12|(63&H)<<6|63&X,(se<=65535||se>=1114112)&&(se=null))),se===null?(se=65533,ce=1):se>65535&&(se-=65536,M+=String.fromCharCode(se>>>10&1023|55296),se=56320|1023&se),M+=String.fromCharCode(se),R+=ce}return M}(this.buf,d,r)}readBytes(){const r=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,r);return this.pos=r,d}readPackedVarint(r=[],d){const y=this.readPackedEnd();for(;this.pos<y;)r.push(this.readVarint(d));return r}readPackedSVarint(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readSVarint());return r}readPackedBoolean(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readBoolean());return r}readPackedFloat(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readFloat());return r}readPackedDouble(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readDouble());return r}readPackedFixed32(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readFixed32());return r}readPackedSFixed32(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readSFixed32());return r}readPackedFixed64(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readFixed64());return r}readPackedSFixed64(r=[]){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readSFixed64());return r}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(r){const d=7&r;if(d===0)for(;this.buf[this.pos++]>127;);else if(d===2)this.pos=this.readVarint()+this.pos;else if(d===5)this.pos+=4;else{if(d!==1)throw new Error(`Unimplemented type: ${d}`);this.pos+=8}}writeTag(r,d){this.writeVarint(r<<3|d)}realloc(r){let d=this.length||16;for(;d<this.pos+r;)d*=2;if(d!==this.length){const y=new Uint8Array(d);y.set(this.buf),this.buf=y,this.dataView=new DataView(y.buffer),this.length=d}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeSFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*d0),!0),this.pos+=8}writeSFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*d0),!0),this.pos+=8}writeVarint(r){(r=+r||0)>268435455||r<0?function(d,y){let v,C;if(d>=0?(v=d%4294967296|0,C=d/4294967296|0):(v=~(-d%4294967296),C=~(-d/4294967296),4294967295^v?v=v+1|0:(v=0,C=C+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");y.realloc(10),function(M,R,I){I.buf[I.pos++]=127&M|128,M>>>=7,I.buf[I.pos++]=127&M|128,M>>>=7,I.buf[I.pos++]=127&M|128,M>>>=7,I.buf[I.pos++]=127&M|128,I.buf[I.pos]=127&(M>>>=7)}(v,0,y),function(M,R){const I=(7&M)<<4;R.buf[R.pos++]|=I|((M>>>=3)?128:0),M&&(R.buf[R.pos++]=127&M|((M>>>=7)?128:0),M&&(R.buf[R.pos++]=127&M|((M>>>=7)?128:0),M&&(R.buf[R.pos++]=127&M|((M>>>=7)?128:0),M&&(R.buf[R.pos++]=127&M|((M>>>=7)?128:0),M&&(R.buf[R.pos++]=127&M)))))}(C,y)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))}writeSVarint(r){this.writeVarint(r<0?2*-r-1:2*r)}writeBoolean(r){this.writeVarint(+r)}writeString(r){r=String(r),this.realloc(4*r.length),this.pos++;const d=this.pos;this.pos=function(v,C,M){for(let R,I,V=0;V<C.length;V++){if(R=C.charCodeAt(V),R>55295&&R<57344){if(!I){R>56319||V+1===C.length?(v[M++]=239,v[M++]=191,v[M++]=189):I=R;continue}if(R<56320){v[M++]=239,v[M++]=191,v[M++]=189,I=R;continue}R=I-55296<<10|R-56320|65536,I=null}else I&&(v[M++]=239,v[M++]=191,v[M++]=189,I=null);R<128?v[M++]=R:(R<2048?v[M++]=R>>6|192:(R<65536?v[M++]=R>>12|224:(v[M++]=R>>18|240,v[M++]=R>>12&63|128),v[M++]=R>>6&63|128),v[M++]=63&R|128)}return M}(this.buf,r,this.pos);const y=this.pos-d;y>=128&&T_(d,y,this),this.pos=d-1,this.writeVarint(y),this.pos+=y}writeFloat(r){this.realloc(4),this.dataView.setFloat32(this.pos,r,!0),this.pos+=4}writeDouble(r){this.realloc(8),this.dataView.setFloat64(this.pos,r,!0),this.pos+=8}writeBytes(r){const d=r.length;this.writeVarint(d),this.realloc(d);for(let y=0;y<d;y++)this.buf[this.pos++]=r[y]}writeRawMessage(r,d){this.pos++;const y=this.pos;r(d,this);const v=this.pos-y;v>=128&&T_(y,v,this),this.pos=y-1,this.writeVarint(v),this.pos+=v}writeMessage(r,d,y){this.writeTag(r,2),this.writeRawMessage(d,y)}writePackedVarint(r,d){d.length&&this.writeMessage(r,ow,d)}writePackedSVarint(r,d){d.length&&this.writeMessage(r,k_,d)}writePackedBoolean(r,d){d.length&&this.writeMessage(r,lg,d)}writePackedFloat(r,d){d.length&&this.writeMessage(r,N_,d)}writePackedDouble(r,d){d.length&&this.writeMessage(r,bf,d)}writePackedFixed32(r,d){d.length&&this.writeMessage(r,M_,d)}writePackedSFixed32(r,d){d.length&&this.writeMessage(r,E_,d)}writePackedFixed64(r,d){d.length&&this.writeMessage(r,A_,d)}writePackedSFixed64(r,d){d.length&&this.writeMessage(r,P_,d)}writeBytesField(r,d){this.writeTag(r,2),this.writeBytes(d)}writeFixed32Field(r,d){this.writeTag(r,5),this.writeFixed32(d)}writeSFixed32Field(r,d){this.writeTag(r,5),this.writeSFixed32(d)}writeFixed64Field(r,d){this.writeTag(r,1),this.writeFixed64(d)}writeSFixed64Field(r,d){this.writeTag(r,1),this.writeSFixed64(d)}writeVarintField(r,d){this.writeTag(r,0),this.writeVarint(d)}writeSVarintField(r,d){this.writeTag(r,0),this.writeSVarint(d)}writeStringField(r,d){this.writeTag(r,2),this.writeString(d)}writeFloatField(r,d){this.writeTag(r,5),this.writeFloat(d)}writeDoubleField(r,d){this.writeTag(r,1),this.writeDouble(d)}writeBooleanField(r,d){this.writeVarintField(r,+d)}}function _f(f,r,d){return d?4294967296*r+(f>>>0):4294967296*(r>>>0)+(f>>>0)}function T_(f,r,d){const y=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));d.realloc(y);for(let v=d.pos-1;v>=f;v--)d.buf[v+y]=d.buf[v]}function ow(f,r){for(let d=0;d<f.length;d++)r.writeVarint(f[d])}function k_(f,r){for(let d=0;d<f.length;d++)r.writeSVarint(f[d])}function N_(f,r){for(let d=0;d<f.length;d++)r.writeFloat(f[d])}function bf(f,r){for(let d=0;d<f.length;d++)r.writeDouble(f[d])}function lg(f,r){for(let d=0;d<f.length;d++)r.writeBoolean(f[d])}function M_(f,r){for(let d=0;d<f.length;d++)r.writeFixed32(f[d])}function E_(f,r){for(let d=0;d<f.length;d++)r.writeSFixed32(f[d])}function A_(f,r){for(let d=0;d<f.length;d++)r.writeFixed64(f[d])}function P_(f,r){for(let d=0;d<f.length;d++)r.writeSFixed64(f[d])}function R_(f,r,d){f===1&&d.readMessage(D_,r)}function D_(f,r,d){if(f===3){const{id:y,bitmap:v,width:C,height:M,left:R,top:I,advance:V}=d.readMessage(cg,{});r.push({id:y,bitmap:new Qu({width:C+6,height:M+6},v),metrics:{width:C,height:M,left:R,top:I,advance:V}})}}function cg(f,r,d){f===1?r.id=d.readVarint():f===2?r.bitmap=d.readBytes():f===3?r.width=d.readVarint():f===4?r.height=d.readVarint():f===5?r.left=d.readSVarint():f===6?r.top=d.readSVarint():f===7&&(r.advance=d.readVarint())}function h0(f){let r=0,d=0;for(const M of f)r+=M.w*M.h,d=Math.max(d,M.w);f.sort((M,R)=>R.h-M.h);const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),d),h:1/0}];let v=0,C=0;for(const M of f)for(let R=y.length-1;R>=0;R--){const I=y[R];if(!(M.w>I.w||M.h>I.h)){if(M.x=I.x,M.y=I.y,C=Math.max(C,M.y+M.h),v=Math.max(v,M.x+M.w),M.w===I.w&&M.h===I.h){const V=y.pop();V&&R<y.length&&(y[R]=V)}else M.h===I.h?(I.x+=M.w,I.w-=M.w):M.w===I.w?(I.y+=M.h,I.h-=M.h):(y.push({x:I.x+M.w,y:I.y,w:I.w-M.w,h:M.h}),I.y+=M.h,I.h-=M.h);break}}return{w:v,h:C,fill:r/(v*C)||0}}class ug{constructor(r,{pixelRatio:d,version:y,stretchX:v,stretchY:C,content:M,textFitWidth:R,textFitHeight:I}){this.paddedRect=r,this.pixelRatio=d,this.stretchX=v,this.stretchY=C,this.content=M,this.version=y,this.textFitWidth=R,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class fs{constructor(r,d){const y={},v={};this.haveRenderCallbacks=[];const C=[];this.addImages(r,y,C),this.addImages(d,v,C);const{w:M,h:R}=h0(C),I=new kr({width:M||1,height:R||1});for(const V in r){const H=r[V],X=y[V].paddedRect;kr.copy(H.data,I,{x:0,y:0},{x:X.x+1,y:X.y+1},H.data)}for(const V in d){const H=d[V],X=v[V].paddedRect,se=X.x+1,ce=X.y+1,he=H.data.width,xe=H.data.height;kr.copy(H.data,I,{x:0,y:0},{x:se,y:ce},H.data),kr.copy(H.data,I,{x:0,y:xe-1},{x:se,y:ce-1},{width:he,height:1}),kr.copy(H.data,I,{x:0,y:0},{x:se,y:ce+xe},{width:he,height:1}),kr.copy(H.data,I,{x:he-1,y:0},{x:se-1,y:ce},{width:1,height:xe}),kr.copy(H.data,I,{x:0,y:0},{x:se+he,y:ce},{width:1,height:xe})}this.image=I,this.iconPositions=y,this.patternPositions=v}addImages(r,d,y){for(const v in r){const C=r[v],M={x:0,y:0,w:C.data.width+2,h:C.data.height+2};y.push(M),d[v]=new ug(M,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(r,d){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in r.updatedImages)this.patchUpdatedImage(this.iconPositions[y],r.getImage(y),d),this.patchUpdatedImage(this.patternPositions[y],r.getImage(y),d)}patchUpdatedImage(r,d,y){if(!r||!d||r.version===d.version)return;r.version=d.version;const[v,C]=r.tl;y.update(d.data,void 0,{x:v,y:C})}}var uc;xn("ImagePosition",ug),xn("ImageAtlas",fs),c.ao=void 0,(uc=c.ao||(c.ao={}))[uc.none=0]="none",uc[uc.horizontal=1]="horizontal",uc[uc.vertical=2]="vertical",uc[uc.horizontalOnly=3]="horizontalOnly";class Op{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(r,d,y){const v=new Op;return v.scale=r||1,v.fontStack=d,v.verticalAlign=y||"bottom",v}static forImage(r,d){const y=new Op;return y.imageName=r,y.verticalAlign=d||"bottom",y}}class Qd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,d){const y=new Qd;for(let v=0;v<r.sections.length;v++){const C=r.sections[v];C.image?y.addImageSection(C):y.addTextSection(C,d)}return y}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let d="";for(let y=0;y<r.length;y++){const v=r.charCodeAt(y+1)||null,C=r.charCodeAt(y-1)||null;d+=v&&qu(v)&&!cc[r[y+1]]||C&&qu(C)&&!cc[r[y-1]]||!cc[r[y]]?r[y]:cc[r[y]]}return d}(this.text)}trim(){let r=0;for(let y=0;y<this.text.length&&hg[this.text.charCodeAt(y)];y++)r++;let d=this.text.length;for(let y=this.text.length-1;y>=0&&y>=r&&hg[this.text.charCodeAt(y)];y--)d--;this.text=this.text.substring(r,d),this.sectionIndex=this.sectionIndex.slice(r,d)}substring(r,d){const y=new Qd;return y.text=this.text.substring(r,d),y.sectionIndex=this.sectionIndex.slice(r,d),y.sections=this.sections,y}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,d)=>Math.max(r,this.sections[d].scale),0)}getMaxImageSize(r){let d=0,y=0;for(let v=0;v<this.length();v++){const C=this.getSection(v);if(C.imageName){const M=r[C.imageName];if(!M)continue;const R=M.displaySize;d=Math.max(d,R[0]),y=Math.max(y,R[1])}}return{maxImageWidth:d,maxImageHeight:y}}addTextSection(r,d){this.text+=r.text,this.sections.push(Op.forText(r.scale,r.fontStack||d,r.verticalAlign));const y=this.sections.length-1;for(let v=0;v<r.text.length;++v)this.sectionIndex.push(y)}addImageSection(r){const d=r.image?r.image.name:"";if(d.length===0)return void nn("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push(Op.forImage(d,r.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):nn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function dg(f,r,d,y,v,C,M,R,I,V,H,X,se,ce,he){const xe=Qd.fromFeature(f,v);let Se;X===c.ao.vertical&&xe.verticalizePunctuation();const{processBidirectionalText:De,processStyledBidirectionalText:at}=Ml;if(De&&xe.sections.length===1){Se=[];const bt=De(xe.toString(),rl(xe,V,C,r,y,ce));for(const Et of bt){const Zt=new Qd;Zt.text=Et,Zt.sections=xe.sections;for(let un=0;un<Et.length;un++)Zt.sectionIndex.push(0);Se.push(Zt)}}else if(at){Se=[];const bt=at(xe.text,xe.sectionIndex,rl(xe,V,C,r,y,ce));for(const Et of bt){const Zt=new Qd;Zt.text=Et[0],Zt.sectionIndex=Et[1],Zt.sections=xe.sections,Se.push(Zt)}}else Se=function(bt,Et){const Zt=[],un=bt.text;let on=0;for(const hn of Et)Zt.push(bt.substring(on,hn)),on=hn;return on<un.length&&Zt.push(bt.substring(on,un.length)),Zt}(xe,rl(xe,V,C,r,y,ce));const Ve=[],Ze={positionedLines:Ve,text:xe.toString(),top:H[1],bottom:H[1],left:H[0],right:H[0],writingMode:X,iconsInText:!1,verticalizable:!1};return function(bt,Et,Zt,un,on,hn,En,fn,pn,Ut,Wn,Qn){let Pn=0,An=0,wi=0,ps=0;const Gs=fn==="right"?1:fn==="left"?0:.5,Nr=ur/Qn;let ra=0;for(const xs of on){xs.trim();const br=xs.getMaxScale(),ir={positionedGlyphs:[],lineOffset:0};bt.positionedLines[ra]=ir;const h=ir.positionedGlyphs;let m=0;if(!xs.length()){An+=hn,++ra;continue}const b=cw(un,xs,Nr);for(let z=0;z<xs.length();z++){const U=xs.getSection(z),oe=xs.getSectionIndex(z),we=xs.getCharCode(z),$e=z_(pn,Wn,we);let mt;if(U.imageName){if(bt.iconsInText=!0,U.scale=U.scale*Nr,mt=O_(U,$e,br,b,un),!mt)continue;m=Math.max(m,mt.imageOffset)}else if(mt=I_(U,we,$e,b,Et,Zt),!mt)continue;const{rect:$t,metrics:Jt,baselineOffset:Nt}=mt;h.push({glyph:we,imageName:U.imageName,x:Pn,y:An+Nt+-17,vertical:$e,scale:U.scale,fontStack:U.fontStack,sectionIndex:oe,metrics:Jt,rect:$t}),$e?(bt.verticalizable=!0,Pn+=(U.imageName?Jt.advance:ur)*U.scale+Ut):Pn+=Jt.advance*U.scale+Ut}h.length!==0&&(wi=Math.max(Pn-Ut,wi),uw(h,0,h.length-1,Gs)),Pn=0,ir.lineOffset=Math.max(m,(br-1)*ur);const k=hn*br+m;An+=k,ps=Math.max(k,ps),++ra}const{horizontalAlign:aa,verticalAlign:nr}=eh(En);(function(xs,br,ir,h,m,b,k,z,U){const oe=(br-ir)*m;let we=0;we=b!==k?-z*h- -17:-h*U*k+.5*k;for(const $e of xs)for(const mt of $e.positionedGlyphs)mt.x+=oe,mt.y+=we})(bt.positionedLines,Gs,aa,nr,wi,ps,hn,An,on.length),bt.top+=-nr*An,bt.bottom=bt.top+An,bt.left+=-aa*wi,bt.right=bt.left+wi}(Ze,r,d,y,Se,M,R,I,X,V,se,he),!function(bt){for(const Et of bt)if(Et.positionedGlyphs.length!==0)return!1;return!0}(Ve)&&Ze}const hg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lw={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},fg={40:!0};function Jd(f,r,d,y,v,C){if(r.imageName){const M=y[r.imageName];return M?M.displaySize[0]*r.scale*ur/C+v:0}{const M=d[r.fontStack],R=M&&M[f];return R?R.metrics.advance*r.scale+v:0}}function pg(f,r,d,y){const v=Math.pow(f-r,2);return y?f<r?v/2:2*v:v+Math.abs(d)*d}function mg(f,r,d){let y=0;return f===10&&(y-=1e4),d&&(y+=150),f!==40&&f!==65288||(y+=50),r!==41&&r!==65289||(y+=50),y}function gg(f,r,d,y,v,C){let M=null,R=pg(r,d,v,C);for(const I of y){const V=pg(r-I.x,d,v,C)+I.badness;V<=R&&(M=I,R=V)}return{index:f,x:r,priorBreak:M,badness:R}}function sd(f){return f?sd(f.priorBreak).concat(f.index):[]}function rl(f,r,d,y,v,C){if(!f)return[];const M=[],R=function(X,se,ce,he,xe,Se){let De=0;for(let at=0;at<X.length();at++){const Ve=X.getSection(at);De+=Jd(X.getCharCode(at),Ve,he,xe,se,Se)}return De/Math.max(1,Math.ceil(De/ce))}(f,r,d,y,v,C),I=f.text.indexOf("​")>=0;let V=0;for(let X=0;X<f.length();X++){const se=f.getSection(X),ce=f.getCharCode(X);if(hg[ce]||(V+=Jd(ce,se,y,v,r,C)),X<f.length()-1){const he=!((H=ce)<11904)&&(!!mi["CJK Compatibility Forms"](H)||!!mi["CJK Compatibility"](H)||!!mi["CJK Strokes"](H)||!!mi["CJK Symbols and Punctuation"](H)||!!mi["Enclosed CJK Letters and Months"](H)||!!mi["Halfwidth and Fullwidth Forms"](H)||!!mi["Ideographic Description Characters"](H)||!!mi["Vertical Forms"](H)||Qh.test(String.fromCodePoint(H)));(lw[ce]||he||se.imageName||X!==f.length()-2&&fg[f.getCharCode(X+1)])&&M.push(gg(X+1,V,R,M,mg(ce,f.getCharCode(X+1),he&&I),!1))}}var H;return sd(gg(f.length(),V,R,M,0,!0))}function eh(f){let r=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:r,verticalAlign:d}}function cw(f,r,d){const y=r.getMaxScale()*ur,{maxImageWidth:v,maxImageHeight:C}=r.getMaxImageSize(f),M=Math.max(y,C*d);return{verticalLineContentWidth:Math.max(y,v*d),horizontalLineContentHeight:M}}function f0(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function z_(f,r,d){return!(f===c.ao.horizontal||!r&&!Kl(d)||r&&(hg[d]||(y=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function I_(f,r,d,y,v,C){const M=C[f.fontStack],R=function(V,H,X,se){if(V&&V.rect)return V;const ce=H[X.fontStack],he=ce&&ce[se];return he?{rect:null,metrics:he.metrics}:null}(M&&M[r],v,f,r);if(R===null)return null;let I;if(d)I=y.verticalLineContentWidth-f.scale*ur;else{const V=f0(f.verticalAlign);I=(y.horizontalLineContentHeight-f.scale*ur)*V}return{rect:R.rect,metrics:R.metrics,baselineOffset:I}}function O_(f,r,d,y,v){const C=v[f.imageName];if(!C)return null;const M=C.paddedRect,R=C.displaySize,I={width:R[0],height:R[1],left:1,top:-3,advance:r?R[1]:R[0]};let V;if(r)V=y.verticalLineContentWidth-R[1]*f.scale;else{const H=f0(f.verticalAlign);V=(y.horizontalLineContentHeight-R[1]*f.scale)*H}return{rect:M,metrics:I,baselineOffset:V,imageOffset:(r?R[0]:R[1])*f.scale-ur*d}}function uw(f,r,d,y){if(y===0)return;const v=f[d],C=(f[d].x+v.metrics.advance*v.scale)*y;for(let M=r;M<=d;M++)f[M].x-=C}function p0(f,r,d){const{horizontalAlign:y,verticalAlign:v}=eh(d),C=r[0]-f.displaySize[0]*y,M=r[1]-f.displaySize[1]*v;return{image:f,top:M,bottom:M+f.displaySize[1],left:C,right:C+f.displaySize[0]}}function m0(f){var r,d;let y=f.left,v=f.top,C=f.right-y,M=f.bottom-v;const R=(r=f.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",I=(d=f.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",V=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(I==="proportional"){if(R==="stretchOnly"&&C/M<V||R==="proportional"){const H=Math.ceil(M*V);y*=H/C,C=H}}else if(R==="proportional"&&I==="stretchOnly"&&V!==0&&C/M>V){const H=Math.ceil(C/V);v*=H/M,M=H}return{x1:y,y1:v,x2:y+C,y2:v+M}}function g0(f,r,d,y,v,C){const M=f.image;let R;if(M.content){const Se=M.content,De=M.pixelRatio||1;R=[Se[0]/De,Se[1]/De,M.displaySize[0]-Se[2]/De,M.displaySize[1]-Se[3]/De]}const I=r.left*C,V=r.right*C;let H,X,se,ce;d==="width"||d==="both"?(ce=v[0]+I-y[3],X=v[0]+V+y[1]):(ce=v[0]+(I+V-M.displaySize[0])/2,X=ce+M.displaySize[0]);const he=r.top*C,xe=r.bottom*C;return d==="height"||d==="both"?(H=v[1]+he-y[0],se=v[1]+xe+y[2]):(H=v[1]+(he+xe-M.displaySize[1])/2,se=H+M.displaySize[1]),{image:M,top:H,right:X,bottom:se,left:ce,collisionPadding:R}}const Jc=128,dc=32640;function yg(f,r){const{expression:d}=r;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Yi(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:v}=d;let C=0;for(;C<y.length&&y[C]<=f;)C++;C=Math.max(0,C-1);let M=C;for(;M<y.length&&y[M]<f+1;)M++;M=Math.min(y.length-1,M);const R=y[C],I=y[M];return d.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:I,interpolationType:v}:{kind:"camera",minZoom:R,maxZoom:I,minSize:d.evaluate(new Yi(R)),maxSize:d.evaluate(new Yi(I)),interpolationType:v}}}function y0(f,r,d){let y="never";const v=f.get(r);return v?y=v:f.get(d)&&(y="always"),y}const dw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rd(f,r,d,y,v,C,M,R,I,V,H,X,se){const ce=R?Math.min(dc,Math.round(R[0])):0,he=R?Math.min(dc,Math.round(R[1])):0;f.emplaceBack(r,d,Math.round(32*y),Math.round(32*v),C,M,(ce<<1)+(I?1:0),he,16*V,16*H,256*X,256*se)}function x0(f,r,d){f.emplaceBack(r.x,r.y,d),f.emplaceBack(r.x,r.y,d),f.emplaceBack(r.x,r.y,d),f.emplaceBack(r.x,r.y,d)}function L_(f){for(const r of f.sections)if(Ud(r.text))return!0;return!1}class Ti{constructor(r){this.layoutVertexArray=new an,this.indexArray=new Bi,this.programConfigurations=r,this.segments=new yi,this.dynamicLayoutVertexArray=new Yt,this.opacityVertexArray=new Mn,this.hasVisibleVertices=!1,this.placedSymbolArray=new ue}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,d,y,v){this.isEmpty()||(y&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,j_.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,C_.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,dw,!0),this.opacityVertexBuffer.itemSize=1),(y||v)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}xn("SymbolBuffers",Ti);class Lp{constructor(r,d,y){this.layoutVertexArray=new r,this.layoutAttributes=d,this.indexArray=new y,this.segments=new yi,this.collisionVertexArray=new Fi}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,aw.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}xn("CollisionBuffers",Lp);class eu{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=gn(globalThis)?Math.min(r.overscaling,128):r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(M=>M.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yg(this.zoom,d["text-size"]),this.iconSizeData=yg(this.zoom,d["icon-size"]);const y=this.layers[0].layout,v=y.get("symbol-sort-key"),C=y.get("symbol-z-order");this.canOverlap=y0(y,"text-overlap","text-allow-overlap")!=="never"||y0(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map(M=>c.ao[M])),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=r.sourceID}createArrays(){this.text=new Ti(new wa(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Ti(new wa(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new Ce,this.lineVertexArray=new Ee,this.symbolInstances=new Te,this.textAnchorOffsets=new Be}calculateGlyphDependencies(r,d,y,v,C){for(let M=0;M<r.length;M++)if(d[r.charCodeAt(M)]=!0,(y||v)&&C){const R=cc[r.charAt(M)];R&&(d[R.charCodeAt(0)]=!0)}}populate(r,d,y){const v=this.layers[0],C=v.layout,M=C.get("text-font"),R=C.get("text-field"),I=C.get("icon-image"),V=(R.value.kind!=="constant"||R.value.value instanceof pr&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),H=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,X=C.get("symbol-sort-key");if(this.features=[],!V&&!H)return;const se=d.iconDependencies,ce=d.glyphDependencies,he=d.availableImages,xe=new Yi(this.zoom);for(const{feature:Se,id:De,index:at,sourceLayerIndex:Ve}of r){const Ze=v._featureFilter.needGeometry,bt=Ku(Se,Ze);if(!v._featureFilter.filter(xe,bt,y))continue;let Et,Zt;if(Ze||(bt.geometry=rc(Se)),V){const on=v.getValueAndResolveTokens("text-field",bt,y,he),hn=pr.factory(on),En=this.hasRTLText=this.hasRTLText||L_(hn);(!En||Ml.getRTLTextPluginStatus()==="unavailable"||En&&Ml.isParsed())&&(Et=u0(hn,v,bt))}if(H){const on=v.getValueAndResolveTokens("icon-image",bt,y,he);Zt=on instanceof gs?on:gs.fromString(on)}if(!Et&&!Zt)continue;const un=this.sortFeaturesByKey?X.evaluate(bt,{},y):void 0;if(this.features.push({id:De,text:Et,icon:Zt,index:at,sourceLayerIndex:Ve,geometry:bt.geometry,properties:Se.properties,type:Ci.types[Se.type],sortKey:un}),Zt&&(se[Zt.name]=!0),Et){const on=M.evaluate(bt,{},y).join(","),hn=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ao.vertical)>=0;for(const En of Et.sections)if(En.image)se[En.image.name]=!0;else{const fn=Hu(Et.toString()),pn=En.fontStack||on,Ut=ce[pn]=ce[pn]||{};this.calculateGlyphDependencies(En.text,Ut,hn,this.allowVerticalPlacement,fn)}}}C.get("symbol-placement")==="line"&&(this.features=function(Se){const De={},at={},Ve=[];let Ze=0;function bt(on){Ve.push(Se[on]),Ze++}function Et(on,hn,En){const fn=at[on];return delete at[on],at[hn]=fn,Ve[fn].geometry[0].pop(),Ve[fn].geometry[0]=Ve[fn].geometry[0].concat(En[0]),fn}function Zt(on,hn,En){const fn=De[hn];return delete De[hn],De[on]=fn,Ve[fn].geometry[0].shift(),Ve[fn].geometry[0]=En[0].concat(Ve[fn].geometry[0]),fn}function un(on,hn,En){const fn=En?hn[0][hn[0].length-1]:hn[0][0];return`${on}:${fn.x}:${fn.y}`}for(let on=0;on<Se.length;on++){const hn=Se[on],En=hn.geometry,fn=hn.text?hn.text.toString():null;if(!fn){bt(on);continue}const pn=un(fn,En),Ut=un(fn,En,!0);if(pn in at&&Ut in De&&at[pn]!==De[Ut]){const Wn=Zt(pn,Ut,En),Qn=Et(pn,Ut,Ve[Wn].geometry);delete De[pn],delete at[Ut],at[un(fn,Ve[Qn].geometry,!0)]=Qn,Ve[Wn].geometry=null}else pn in at?Et(pn,Ut,En):Ut in De?Zt(pn,Ut,En):(bt(on),De[pn]=Ze-1,at[Ut]=Ze-1)}return Ve.filter(on=>on.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Se,De)=>Se.sortKey-De.sortKey)}update(r,d,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,d,this.layers,{imagePositions:y}),this.icon.programConfigurations.updatePaintArrays(r,d,this.layers,{imagePositions:y}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,d){const y=this.lineVertexArray.length;if(r.segment!==void 0){let v=r.dist(d[r.segment+1]),C=r.dist(d[r.segment]);const M={};for(let R=r.segment+1;R<d.length;R++)M[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:v},R<d.length-1&&(v+=d[R+1].dist(d[R]));for(let R=r.segment||0;R>=0;R--)M[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:C},R>0&&(C+=d[R-1].dist(d[R]));for(let R=0;R<d.length;R++){const I=M[R];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(r,d,y,v,C,M,R,I,V,H,X,se){const ce=r.indexArray,he=r.layoutVertexArray,xe=r.segments.prepareSegment(4*d.length,he,ce,this.canOverlap?M.sortKey:void 0),Se=this.glyphOffsetArray.length,De=xe.vertexLength,at=this.allowVerticalPlacement&&R===c.ao.vertical?Math.PI/2:0,Ve=M.text&&M.text.sections;for(let Ze=0;Ze<d.length;Ze++){const{tl:bt,tr:Et,bl:Zt,br:un,tex:on,pixelOffsetTL:hn,pixelOffsetBR:En,minFontScaleX:fn,minFontScaleY:pn,glyphOffset:Ut,isSDF:Wn,sectionIndex:Qn}=d[Ze],Pn=xe.vertexLength,An=Ut[1];rd(he,I.x,I.y,bt.x,An+bt.y,on.x,on.y,y,Wn,hn.x,hn.y,fn,pn),rd(he,I.x,I.y,Et.x,An+Et.y,on.x+on.w,on.y,y,Wn,En.x,hn.y,fn,pn),rd(he,I.x,I.y,Zt.x,An+Zt.y,on.x,on.y+on.h,y,Wn,hn.x,En.y,fn,pn),rd(he,I.x,I.y,un.x,An+un.y,on.x+on.w,on.y+on.h,y,Wn,En.x,En.y,fn,pn),x0(r.dynamicLayoutVertexArray,I,at),ce.emplaceBack(Pn,Pn+2,Pn+1),ce.emplaceBack(Pn+1,Pn+2,Pn+3),xe.vertexLength+=4,xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ut[0]),Ze!==d.length-1&&Qn===d[Ze+1].sectionIndex||r.programConfigurations.populatePaintArrays(he.length,M,M.index,{imagePositions:{},canonical:se,formattedSection:Ve&&Ve[Qn]})}r.placedSymbolArray.emplaceBack(I.x,I.y,Se,this.glyphOffsetArray.length-Se,De,V,H,I.segment,y?y[0]:0,y?y[1]:0,v[0],v[1],R,0,!1,0,X)}_addCollisionDebugVertex(r,d,y,v,C,M){return d.emplaceBack(0,0),r.emplaceBack(y.x,y.y,v,C,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(r,d,y,v,C,M,R){const I=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),V=I.vertexLength,H=C.layoutVertexArray,X=C.collisionVertexArray,se=R.anchorX,ce=R.anchorY;this._addCollisionDebugVertex(H,X,M,se,ce,new g(r,d)),this._addCollisionDebugVertex(H,X,M,se,ce,new g(y,d)),this._addCollisionDebugVertex(H,X,M,se,ce,new g(y,v)),this._addCollisionDebugVertex(H,X,M,se,ce,new g(r,v)),I.vertexLength+=4;const he=C.indexArray;he.emplaceBack(V,V+1),he.emplaceBack(V+1,V+2),he.emplaceBack(V+2,V+3),he.emplaceBack(V+3,V),I.primitiveLength+=4}addDebugCollisionBoxes(r,d,y,v){for(let C=r;C<d;C++){const M=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,v?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Lp(ni,Qc.members,Qi),this.iconCollisionBox=new Lp(ni,Qc.members,Qi);for(let r=0;r<this.symbolInstances.length;r++){const d=this.symbolInstances.get(r);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(r,d,y,v,C,M,R,I,V){const H={};for(let X=d;X<y;X++){const se=r.get(X);H.textBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},H.textFeatureIndex=se.featureIndex;break}for(let X=v;X<C;X++){const se=r.get(X);H.verticalTextBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},H.verticalTextFeatureIndex=se.featureIndex;break}for(let X=M;X<R;X++){const se=r.get(X);H.iconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},H.iconFeatureIndex=se.featureIndex;break}for(let X=I;X<V;X++){const se=r.get(X);H.verticalIconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},H.verticalIconFeatureIndex=se.featureIndex;break}return H}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const y=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,d){const y=r.placedSymbolArray.get(d),v=y.vertexStartIndex+4*y.numGlyphs;for(let C=y.vertexStartIndex;C<v;C+=4)r.indexArray.emplaceBack(C,C+2,C+1),r.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(r),y=Math.cos(r),v=[],C=[],M=[];for(let R=0;R<this.symbolInstances.length;++R){M.push(R);const I=this.symbolInstances.get(R);v.push(0|Math.round(d*I.anchorX+y*I.anchorY)),C.push(I.featureIndex)}return M.sort((R,I)=>v[R]-v[I]||C[I]-C[R]),M}addToSortKeyRanges(r,d){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===d?y.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const y=this.symbolInstances.get(d);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach((v,C,M)=>{v>=0&&M.indexOf(v)===C&&this.addIndicesForPlacedSymbol(this.text,v)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let xg,_0;xn("SymbolBucket",eu,{omit:["layers","collisionBoxArray","features","compareText"]}),eu.MAX_GLYPHS=65535,eu.addDynamicAttributes=x0;var Fp={get paint(){return _0=_0||new Cr({"icon-opacity":new Dn(dt.paint_symbol["icon-opacity"]),"icon-color":new Dn(dt.paint_symbol["icon-color"]),"icon-halo-color":new Dn(dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Dn(dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Dn(dt.paint_symbol["icon-halo-blur"]),"icon-translate":new Nn(dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Nn(dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Dn(dt.paint_symbol["text-opacity"]),"text-color":new Dn(dt.paint_symbol["text-color"],{runtimeType:vs,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Dn(dt.paint_symbol["text-halo-color"]),"text-halo-width":new Dn(dt.paint_symbol["text-halo-width"]),"text-halo-blur":new Dn(dt.paint_symbol["text-halo-blur"]),"text-translate":new Nn(dt.paint_symbol["text-translate"]),"text-translate-anchor":new Nn(dt.paint_symbol["text-translate-anchor"])})},get layout(){return xg=xg||new Cr({"symbol-placement":new Nn(dt.layout_symbol["symbol-placement"]),"symbol-spacing":new Nn(dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Nn(dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Dn(dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Nn(dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Nn(dt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Nn(dt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Nn(dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Nn(dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Nn(dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Dn(dt.layout_symbol["icon-size"]),"icon-text-fit":new Nn(dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Nn(dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Dn(dt.layout_symbol["icon-image"]),"icon-rotate":new Dn(dt.layout_symbol["icon-rotate"]),"icon-padding":new Dn(dt.layout_symbol["icon-padding"]),"icon-keep-upright":new Nn(dt.layout_symbol["icon-keep-upright"]),"icon-offset":new Dn(dt.layout_symbol["icon-offset"]),"icon-anchor":new Dn(dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Nn(dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Nn(dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Nn(dt.layout_symbol["text-rotation-alignment"]),"text-field":new Dn(dt.layout_symbol["text-field"]),"text-font":new Dn(dt.layout_symbol["text-font"]),"text-size":new Dn(dt.layout_symbol["text-size"]),"text-max-width":new Dn(dt.layout_symbol["text-max-width"]),"text-line-height":new Nn(dt.layout_symbol["text-line-height"]),"text-letter-spacing":new Dn(dt.layout_symbol["text-letter-spacing"]),"text-justify":new Dn(dt.layout_symbol["text-justify"]),"text-radial-offset":new Dn(dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Nn(dt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Dn(dt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Dn(dt.layout_symbol["text-anchor"]),"text-max-angle":new Nn(dt.layout_symbol["text-max-angle"]),"text-writing-mode":new Nn(dt.layout_symbol["text-writing-mode"]),"text-rotate":new Dn(dt.layout_symbol["text-rotate"]),"text-padding":new Nn(dt.layout_symbol["text-padding"]),"text-keep-upright":new Nn(dt.layout_symbol["text-keep-upright"]),"text-transform":new Dn(dt.layout_symbol["text-transform"]),"text-offset":new Dn(dt.layout_symbol["text-offset"]),"text-allow-overlap":new Nn(dt.layout_symbol["text-allow-overlap"]),"text-overlap":new Nn(dt.layout_symbol["text-overlap"]),"text-ignore-placement":new Nn(dt.layout_symbol["text-ignore-placement"]),"text-optional":new Nn(dt.layout_symbol["text-optional"])})}};class vf{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:us,this.defaultValue=r}evaluate(r){if(r.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(r.formattedSection))return d.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xn("FormatSectionOverride",vf,{omit:["defaultValue"]});class th extends no{constructor(r,d){super(r,Fp,d)}recalculate(r,d){if(super.recalculate(r,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const v=[];for(const C of y)v.indexOf(C)<0&&v.push(C);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,d,y,v){const C=this.layout.get(r).evaluate(d,{},y,v),M=this._unevaluatedLayout._values[r];return M.isDataDriven()||Sl(M.value)||!C?C:function(R,I){return I.replace(/{([^{}]+)}/g,(V,H)=>R&&H in R?String(R[H]):"")}(d.properties,C)}createBucket(r){return new eu(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Fp.paint.overridableProperties){if(!th.hasPaintOverride(this.layout,r))continue;const d=this.paint.get(r),y=new vf(d),v=new ql(y,d.property.specification);let C=null;C=d.value.kind==="constant"||d.value.kind==="source"?new Oc("source",v):new ea("composite",v,d.value.zoomStops),this.paint._values[r]=new Lr(d.property,C,d.parameters)}}_handleOverridablePaintPropertyUpdate(r,d,y){return!(!this.layout||d.isDataDriven()||y.isDataDriven())&&th.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,d){const y=r.get("text-field"),v=Fp.paint.properties[d];let C=!1;const M=R=>{for(const I of R)if(v.overrides&&v.overrides.hasOverride(I))return void(C=!0)};if(y.value.kind==="constant"&&y.value.value instanceof pr)M(y.value.value.sections);else if(y.value.kind==="source"||y.value.kind==="composite"){const R=V=>{C||(V instanceof Kn&&Zi(V.value)===Pr?M(V.value.sections):V instanceof Fh?M(V.sections):V.eachChild(R))},I=y.value;I._styleExpression&&R(I._styleExpression.expression)}return C}}let nh;var F_={get paint(){return nh=nh||new Cr({"background-color":new Nn(dt.paint_background["background-color"]),"background-pattern":new Fs(dt.paint_background["background-pattern"]),"background-opacity":new Nn(dt.paint_background["background-opacity"])})}};class hw extends no{constructor(r,d){super(r,F_,d)}}class fw extends no{constructor(r,d){super(r,{},d),this.onAdd=y=>{this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)},this.onRemove=y=>{this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class B_{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const V_={once:!0},wf=63710088e-1;class Oi{constructor(r,d){if(isNaN(r)||isNaN(d))throw new Error(`Invalid LngLat object: (${r}, ${d})`);if(this.lng=+r,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Oi(tn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const d=Math.PI/180,y=this.lat*d,v=r.lat*d,C=Math.sin(y)*Math.sin(v)+Math.cos(y)*Math.cos(v)*Math.cos((r.lng-this.lng)*d);return wf*Math.acos(Math.min(C,1))}static convert(r){if(r instanceof Oi)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Oi(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Oi(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const _g=2*Math.PI*wf;function Ur(f){return _g*Math.cos(f*Math.PI/180)}function U_(f){return(180+f)/360}function bg(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function vg(f,r){return f/Ur(r)}function Sf(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function b0(f,r){return f*Ur(Sf(r))}class jf{constructor(r,d,y=0){this.x=+r,this.y=+d,this.z=+y}static fromLngLat(r,d=0){const y=Oi.convert(r);return new jf(U_(y.lng),bg(y.lat),vg(d,y.lat))}toLngLat(){return new Oi(360*this.x-180,Sf(this.y))}toAltitude(){return b0(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/_g*(r=Sf(this.y),1/Math.cos(r*Math.PI/180));var r}}function wg(f,r,d){var y=2*Math.PI*6378137/256/Math.pow(2,d);return[f*y-2*Math.PI*6378137/2,r*y-2*Math.PI*6378137/2]}class Bp{constructor(r,d,y){if(!function(v,C,M){return!(v<0||v>25||M<0||M>=Math.pow(2,v)||C<0||C>=Math.pow(2,v))}(r,d,y))throw new Error(`x=${d}, y=${y}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=d,this.y=y,this.key=Cf(0,r,r,d,y)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,d,y){const v=(M=this.y,R=this.z,I=wg(256*(C=this.x),256*(M=Math.pow(2,R)-M-1),R),V=wg(256*(C+1),256*(M+1),R),I[0]+","+I[1]+","+V[0]+","+V[1]);var C,M,R,I,V;const H=function(X,se,ce){let he,xe="";for(let Se=X;Se>0;Se--)he=1<<Se-1,xe+=(se&he?1:0)+(ce&he?2:0);return xe}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,H).replace(/{bbox-epsg-3857}/g,v)}isChildOf(r){const d=this.z-r.z;return d>0&&r.x===this.x>>d&&r.y===this.y>>d}getTilePoint(r){const d=Math.pow(2,this.z);return new g((r.x*d-this.x)*Pt,(r.y*d-this.y)*Pt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class $_{constructor(r,d){this.wrap=r,this.canonical=d,this.key=Cf(r,d.z,d.z,d.x,d.y)}}class uo{constructor(r,d,y,v,C){if(this.terrainRttPosMatrix32f=null,r<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${y}`);this.overscaledZ=r,this.wrap=d,this.canonical=new Bp(y,+v,+C),this.key=Cf(d,r,y,v,C)}clone(){return new uo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?new uo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new uo(r,this.wrap,r,this.canonical.x>>d,this.canonical.y>>d)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(r,d){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-r;return r>this.canonical.z?Cf(this.wrap*+d,r,this.canonical.z,this.canonical.x,this.canonical.y):Cf(this.wrap*+d,r,r,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(r){if(r.wrap!==this.wrap||this.overscaledZ-r.overscaledZ<=0)return!1;if(r.overscaledZ===0)return this.overscaledZ>0;const d=this.canonical.z-r.canonical.z;return!(d<0)&&r.canonical.x===this.canonical.x>>d&&r.canonical.y===this.canonical.y>>d}children(r){if(this.overscaledZ>=r)return[new uo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,y=2*this.canonical.x,v=2*this.canonical.y;return[new uo(d,this.wrap,d,y,v),new uo(d,this.wrap,d,y+1,v),new uo(d,this.wrap,d,y,v+1),new uo(d,this.wrap,d,y+1,v+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new uo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new uo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new $_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new jf(r.x-this.wrap,r.y))}}function Cf(f,r,d,y,v){(f*=2)<0&&(f=-1*f-1);const C=1<<d;return(C*C*f+C*v+y).toString(36)+d.toString(36)+r.toString(36)}function Tf(f,r){return r?f.properties[r]:f.id}xn("CanonicalTileID",Bp),xn("OverscaledTileID",uo,{omit:["terrainRttPosMatrix32f"]});class ih{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(r){return this.minX=Math.min(this.minX,r.x),this.minY=Math.min(this.minY,r.y),this.maxX=Math.max(this.maxX,r.x),this.maxY=Math.max(this.maxY,r.y),this}expandBy(r){return this.minX-=r,this.minY-=r,this.maxX+=r,this.maxY+=r,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(r){return this.expandBy(-r)}map(r){const d=new ih;return d.extend(r(new g(this.minX,this.minY))),d.extend(r(new g(this.maxX,this.minY))),d.extend(r(new g(this.minX,this.maxY))),d.extend(r(new g(this.maxX,this.maxY))),d}static fromPoints(r){const d=new ih;for(const y of r)d.extend(y);return d}contains(r){return r.x>=this.minX&&r.x<=this.maxX&&r.y>=this.minY&&r.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(r){return!this.empty()&&!r.empty()&&r.minX>=this.minX&&r.maxX<=this.maxX&&r.minY>=this.minY&&r.maxY<=this.maxY}intersects(r){return!this.empty()&&!r.empty()&&r.minX<=this.maxX&&r.maxX>=this.minX&&r.minY<=this.maxY&&r.maxY>=this.minY}}class H_{constructor(r){this._stringToNumber={},this._numberToString=[];for(let d=0;d<r.length;d++){const y=r[d];this._stringToNumber[y]=d,this._numberToString[d]=y}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class tu{constructor(r,d,y,v,C){this.type="Feature",this._vectorTileFeature=r,r._z=d,r._x=y,r._y=v,this.properties=r.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(r[d]=this[d]);return r}}class v0{constructor(r,d){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Yl(Pt,16,0),this.grid3D=new Yl(Pt,16,0),this.featureIndexArray=new qe,this.promoteId=d}insert(r,d,y,v,C,M){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,v,C);const I=M?this.grid3D:this.grid;for(let V=0;V<d.length;V++){const H=d[V],X=[1/0,1/0,-1/0,-1/0];for(let se=0;se<H.length;se++){const ce=H[se];X[0]=Math.min(X[0],ce.x),X[1]=Math.min(X[1],ce.y),X[2]=Math.max(X[2],ce.x),X[3]=Math.max(X[3],ce.y)}X[0]<Pt&&X[1]<Pt&&X[2]>=0&&X[3]>=0&&I.insert(R,X[0],X[1],X[2],X[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ng(new Ip(this.rawTileData)).layers,this.sourceLayerCoder=new H_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,d,y,v){this.loadVTLayers();const C=r.params,M=Pt/r.tileSize/r.scale,R=Lc(C.filter,C.globalState),I=r.queryGeometry,V=r.queryPadding*M,H=ih.fromPoints(I),X=this.grid.query(H.minX-V,H.minY-V,H.maxX+V,H.maxY+V),se=ih.fromPoints(r.cameraQueryGeometry).expandBy(V),ce=this.grid3D.query(se.minX,se.minY,se.maxX,se.maxY,(Se,De,at,Ve)=>function(Ze,bt,Et,Zt,un){for(const hn of Ze)if(bt<=hn.x&&Et<=hn.y&&Zt>=hn.x&&un>=hn.y)return!0;const on=[new g(bt,Et),new g(bt,un),new g(Zt,un),new g(Zt,Et)];if(Ze.length>2){for(const hn of on)if(qc(Ze,hn))return!0}for(let hn=0;hn<Ze.length-1;hn++)if($y(Ze[hn],Ze[hn+1],on))return!0;return!1}(r.cameraQueryGeometry,Se-V,De-V,at+V,Ve+V));for(const Se of ce)X.push(Se);X.sort(pw);const he={};let xe;for(let Se=0;Se<X.length;Se++){const De=X[Se];if(De===xe)continue;xe=De;const at=this.featureIndexArray.get(De);let Ve=null;this.loadMatchingFeature(he,at.bucketIndex,at.sourceLayerIndex,at.featureIndex,R,C.layers,C.availableImages,d,y,v,(Ze,bt,Et)=>(Ve||(Ve=rc(Ze)),bt.queryIntersectsFeature({queryGeometry:I,feature:Ze,featureState:Et,geometry:Ve,zoom:this.z,transform:r.transform,pixelsToTileUnits:M,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation})))}return he}loadMatchingFeature(r,d,y,v,C,M,R,I,V,H,X){const se=this.bucketLayerIDs[d];if(M&&!se.some(Se=>M.has(Se)))return;const ce=this.sourceLayerCoder.decode(y),he=this.vtLayers[ce].feature(v);if(C.needGeometry){const Se=Ku(he,!0);if(!C.filter(new Yi(this.tileID.overscaledZ),Se,this.tileID.canonical))return}else if(!C.filter(new Yi(this.tileID.overscaledZ),he))return;const xe=this.getId(he,ce);for(let Se=0;Se<se.length;Se++){const De=se[Se];if(M&&!M.has(De))continue;const at=I[De];if(!at)continue;let Ve={};xe&&H&&(Ve=H.getState(at.sourceLayer||"_geojsonTileLayer",xe));const Ze=Ge({},V[De]);Ze.paint=Sg(Ze.paint,at.paint,he,Ve,R),Ze.layout=Sg(Ze.layout,at.layout,he,Ve,R);const bt=!X||X(he,at,Ve);if(!bt)continue;const Et=new tu(he,this.z,this.x,this.y,xe);Et.layer=Ze;let Zt=r[De];Zt===void 0&&(Zt=r[De]=[]),Zt.push({featureIndex:v,feature:Et,intersectionZ:bt})}}lookupSymbolFeatures(r,d,y,v,C,M,R,I){const V={};this.loadVTLayers();const H=Lc(C.filterSpec,C.globalState);for(const X of r)this.loadMatchingFeature(V,y,v,X,H,M,R,I,d);return V}hasLayer(r){for(const d of this.bucketLayerIDs)for(const y of d)if(r===y)return!0;return!1}getId(r,d){var y;let v=r.id;return this.promoteId&&(v=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((y=r.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(v=Number(r.properties.cluster_id))),v}}function Sg(f,r,d,y,v){return zt(f,(C,M)=>{const R=r instanceof $c?r.get(M):null;return R&&R.evaluate?R.evaluate(d,y,v):R})}function pw(f,r){return r-f}function q_(f,r,d,y,v){const C=[];for(let M=0;M<f.length;M++){const R=f[M];let I;for(let V=0;V<R.length-1;V++){let H=R[V],X=R[V+1];H.x<r&&X.x<r||(H.x<r?H=new g(r,H.y+(r-H.x)/(X.x-H.x)*(X.y-H.y))._round():X.x<r&&(X=new g(r,H.y+(r-H.x)/(X.x-H.x)*(X.y-H.y))._round()),H.y<d&&X.y<d||(H.y<d?H=new g(H.x+(d-H.y)/(X.y-H.y)*(X.x-H.x),d)._round():X.y<d&&(X=new g(H.x+(d-H.y)/(X.y-H.y)*(X.x-H.x),d)._round()),H.x>=y&&X.x>=y||(H.x>=y?H=new g(y,H.y+(y-H.x)/(X.x-H.x)*(X.y-H.y))._round():X.x>=y&&(X=new g(y,H.y+(y-H.x)/(X.x-H.x)*(X.y-H.y))._round()),H.y>=v&&X.y>=v||(H.y>=v?H=new g(H.x+(v-H.y)/(X.y-H.y)*(X.x-H.x),v)._round():X.y>=v&&(X=new g(H.x+(v-H.y)/(X.y-H.y)*(X.x-H.x),v)._round()),I&&H.equals(I[I.length-1])||(I=[H],C.push(I)),I.push(X)))))}}return C}xn("FeatureIndex",v0,{omit:["rawTileData","sourceLayerCoder"]});class hc extends g{constructor(r,d,y,v){super(r,d),this.angle=y,v!==void 0&&(this.segment=v)}clone(){return new hc(this.x,this.y,this.angle,this.segment)}}function G_(f,r,d,y,v){if(r.segment===void 0||d===0)return!0;let C=r,M=r.segment+1,R=0;for(;R>-d/2;){if(M--,M<0)return!1;R-=f[M].dist(C),C=f[M]}R+=f[M].dist(f[M+1]),M++;const I=[];let V=0;for(;R<d/2;){const H=f[M],X=f[M+1];if(!X)return!1;let se=f[M-1].angleTo(H)-H.angleTo(X);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:R,angleDelta:se}),V+=se;R-I[0].distance>y;)V-=I.shift().angleDelta;if(V>v)return!1;M++,R+=H.dist(X)}return!0}function al(f){let r=0;for(let d=0;d<f.length-1;d++)r+=f[d].dist(f[d+1]);return r}function jg(f,r,d){return f?.6*r*d:0}function w0(f,r){return Math.max(f?f.right-f.left:0,r?r.right-r.left:0)}function W_(f,r,d,y,v,C){const M=jg(d,v,C),R=w0(d,y)*C;let I=0;const V=al(f)/2;for(let H=0;H<f.length-1;H++){const X=f[H],se=f[H+1],ce=X.dist(se);if(I+ce>V){const he=(V-I)/ce,xe=As.number(X.x,se.x,he),Se=As.number(X.y,se.y,he),De=new hc(xe,Se,se.angleTo(X),H);return De._round(),!M||G_(f,De,R,M,r)?De:void 0}I+=ce}}function Vp(f,r,d,y,v,C,M,R,I){const V=jg(y,C,M),H=w0(y,v),X=H*M,se=f[0].x===0||f[0].x===I||f[0].y===0||f[0].y===I;return r-X<r/4&&(r=X+r/4),Oo(f,se?r/2*R%r:(H/2+2*C)*M*R%r,r,V,d,X,se,!1,I)}function Oo(f,r,d,y,v,C,M,R,I){const V=C/2,H=al(f);let X=0,se=r-d,ce=[];for(let he=0;he<f.length-1;he++){const xe=f[he],Se=f[he+1],De=xe.dist(Se),at=Se.angleTo(xe);for(;se+d<X+De;){se+=d;const Ve=(se-X)/De,Ze=As.number(xe.x,Se.x,Ve),bt=As.number(xe.y,Se.y,Ve);if(Ze>=0&&Ze<I&&bt>=0&&bt<I&&se-V>=0&&se+V<=H){const Et=new hc(Ze,bt,at,he);Et._round(),y&&!G_(f,Et,C,y,v)||ce.push(Et)}}X+=De}return R||ce.length||M||(ce=Oo(f,X/2,d,y,v,C,M,!0,I)),ce}function S0(f,r,d,y){const v=[],C=f.image,M=C.pixelRatio,R=C.paddedRect.w-2,I=C.paddedRect.h-2;let V={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const H=C.stretchX||[[0,R]],X=C.stretchY||[[0,I]],se=(Ut,Wn)=>Ut+Wn[1]-Wn[0],ce=H.reduce(se,0),he=X.reduce(se,0),xe=R-ce,Se=I-he;let De=0,at=ce,Ve=0,Ze=he,bt=0,Et=xe,Zt=0,un=Se;if(C.content&&y){const Ut=C.content,Wn=Ut[2]-Ut[0],Qn=Ut[3]-Ut[1];(C.textFitWidth||C.textFitHeight)&&(V=m0(f)),De=sh(H,0,Ut[0]),Ve=sh(X,0,Ut[1]),at=sh(H,Ut[0],Ut[2]),Ze=sh(X,Ut[1],Ut[3]),bt=Ut[0]-De,Zt=Ut[1]-Ve,Et=Wn-at,un=Qn-Ze}const on=V.x1,hn=V.y1,En=V.x2-on,fn=V.y2-hn,pn=(Ut,Wn,Qn,Pn)=>{const An=Cg(Ut.stretch-De,at,En,on),wi=Tg(Ut.fixed-bt,Et,Ut.stretch,ce),ps=Cg(Wn.stretch-Ve,Ze,fn,hn),Gs=Tg(Wn.fixed-Zt,un,Wn.stretch,he),Nr=Cg(Qn.stretch-De,at,En,on),ra=Tg(Qn.fixed-bt,Et,Qn.stretch,ce),aa=Cg(Pn.stretch-Ve,Ze,fn,hn),nr=Tg(Pn.fixed-Zt,un,Pn.stretch,he),xs=new g(An,ps),br=new g(Nr,ps),ir=new g(Nr,aa),h=new g(An,aa),m=new g(wi/M,Gs/M),b=new g(ra/M,nr/M),k=r*Math.PI/180;if(k){const oe=Math.sin(k),we=Math.cos(k),$e=[we,-oe,oe,we];xs._matMult($e),br._matMult($e),h._matMult($e),ir._matMult($e)}const z=Ut.stretch+Ut.fixed,U=Wn.stretch+Wn.fixed;return{tl:xs,tr:br,bl:h,br:ir,tex:{x:C.paddedRect.x+1+z,y:C.paddedRect.y+1+U,w:Qn.stretch+Qn.fixed-z,h:Pn.stretch+Pn.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:m,pixelOffsetBR:b,minFontScaleX:Et/M/En,minFontScaleY:un/M/fn,isSDF:d}};if(y&&(C.stretchX||C.stretchY)){const Ut=fc(H,xe,ce),Wn=fc(X,Se,he);for(let Qn=0;Qn<Ut.length-1;Qn++){const Pn=Ut[Qn],An=Ut[Qn+1];for(let wi=0;wi<Wn.length-1;wi++)v.push(pn(Pn,Wn[wi],An,Wn[wi+1]))}}else v.push(pn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:I+1}));return v}function sh(f,r,d){let y=0;for(const v of f)y+=Math.max(r,Math.min(d,v[1]))-Math.max(r,Math.min(d,v[0]));return y}function fc(f,r,d){const y=[{fixed:-1,stretch:0}];for(const[v,C]of f){const M=y[y.length-1];y.push({fixed:v-M.stretch,stretch:M.stretch}),y.push({fixed:v-M.stretch,stretch:M.stretch+(C-v)})}return y.push({fixed:r+1,stretch:d}),y}function Cg(f,r,d,y){return f/r*d+y}function Tg(f,r,d,y){return f-r*d/y}xn("Anchor",hc);class nu{constructor(r,d,y,v,C,M,R,I,V,H){var X;if(this.boxStartIndex=r.length,V){let se=M.top,ce=M.bottom;const he=M.collisionPadding;he&&(se-=he[1],ce+=he[3]);let xe=ce-se;xe>0&&(xe=Math.max(10,xe),this.circleDiameter=xe)}else{const se=!((X=M.image)===null||X===void 0)&&X.content&&(M.image.textFitWidth||M.image.textFitHeight)?m0(M):{x1:M.left,y1:M.top,x2:M.right,y2:M.bottom};se.y1=se.y1*R-I[0],se.y2=se.y2*R+I[2],se.x1=se.x1*R-I[3],se.x2=se.x2*R+I[1];const ce=M.collisionPadding;if(ce&&(se.x1-=ce[0]*R,se.y1-=ce[1]*R,se.x2+=ce[2]*R,se.y2+=ce[3]*R),H){const he=new g(se.x1,se.y1),xe=new g(se.x2,se.y1),Se=new g(se.x1,se.y2),De=new g(se.x2,se.y2),at=H*Math.PI/180;he._rotate(at),xe._rotate(at),Se._rotate(at),De._rotate(at),se.x1=Math.min(he.x,xe.x,Se.x,De.x),se.x2=Math.max(he.x,xe.x,Se.x,De.x),se.y1=Math.min(he.y,xe.y,Se.y,De.y),se.y2=Math.max(he.y,xe.y,Se.y,De.y)}r.emplaceBack(d.x,d.y,se.x1,se.y1,se.x2,se.y2,y,v,C)}this.boxEndIndex=r.length}}class Z_{constructor(r=[],d=(y,v)=>y<v?-1:y>v?1:0){if(this.data=r,this.length=this.data.length,this.compare=d,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:d,compare:y}=this,v=d[r];for(;r>0;){const C=r-1>>1,M=d[C];if(y(v,M)>=0)break;d[r]=M,r=C}d[r]=v}_down(r){const{data:d,compare:y}=this,v=this.length>>1,C=d[r];for(;r<v;){let M=1+(r<<1);const R=M+1;if(R<this.length&&y(d[R],d[M])<0&&(M=R),y(d[M],C)>=0)break;d[r]=d[M],r=M}d[r]=C}}function mw(f,r=1,d=!1){const y=ih.fromPoints(f[0]),v=Math.min(y.width(),y.height());let C=v/2;const M=new Z_([],gw),{minX:R,minY:I,maxX:V,maxY:H}=y;if(v===0)return new g(R,I);for(let ce=R;ce<V;ce+=v)for(let he=I;he<H;he+=v)M.push(new kf(ce+C,he+C,C,f));let X=function(ce){let he=0,xe=0,Se=0;const De=ce[0];for(let at=0,Ve=De.length,Ze=Ve-1;at<Ve;Ze=at++){const bt=De[at],Et=De[Ze],Zt=bt.x*Et.y-Et.x*bt.y;xe+=(bt.x+Et.x)*Zt,Se+=(bt.y+Et.y)*Zt,he+=3*Zt}return new kf(xe/he,Se/he,0,ce)}(f),se=M.length;for(;M.length;){const ce=M.pop();(ce.d>X.d||!X.d)&&(X=ce,d&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,se)),ce.max-X.d<=r||(C=ce.h/2,M.push(new kf(ce.p.x-C,ce.p.y-C,C,f)),M.push(new kf(ce.p.x+C,ce.p.y-C,C,f)),M.push(new kf(ce.p.x-C,ce.p.y+C,C,f)),M.push(new kf(ce.p.x+C,ce.p.y+C,C,f)),se+=4)}return d&&(console.log(`num probes: ${se}`),console.log(`best distance: ${X.d}`)),X.p}function gw(f,r){return r.max-f.max}function kf(f,r,d,y){this.p=new g(f,r),this.h=d,this.d=function(v,C){let M=!1,R=1/0;for(let I=0;I<C.length;I++){const V=C[I];for(let H=0,X=V.length,se=X-1;H<X;se=H++){const ce=V[H],he=V[se];ce.y>v.y!=he.y>v.y&&v.x<(he.x-ce.x)*(v.y-ce.y)/(he.y-ce.y)+ce.x&&(M=!M),R=Math.min(R,Vy(v,ce,he))}}return(M?1:-1)*Math.sqrt(R)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}var $r;c.aE=void 0,($r=c.aE||(c.aE={}))[$r.center=1]="center",$r[$r.left=2]="left",$r[$r.right=3]="right",$r[$r.top=4]="top",$r[$r.bottom=5]="bottom",$r[$r["top-left"]=6]="top-left",$r[$r["top-right"]=7]="top-right",$r[$r["bottom-left"]=8]="bottom-left",$r[$r["bottom-right"]=9]="bottom-right";const j0=Number.POSITIVE_INFINITY;function Y_(f,r){return r[1]!==j0?function(d,y,v){let C=0,M=0;switch(y=Math.abs(y),v=Math.abs(v),d){case"top-right":case"top-left":case"top":M=v-7;break;case"bottom-right":case"bottom-left":case"bottom":M=7-v}switch(d){case"top-right":case"bottom-right":case"right":C=-y;break;case"top-left":case"bottom-left":case"left":C=y}return[C,M]}(f,r[0],r[1]):function(d,y){let v=0,C=0;y<0&&(y=0);const M=y/Math.SQRT2;switch(d){case"top-right":case"top-left":C=M-7;break;case"bottom-right":case"bottom-left":C=7-M;break;case"bottom":C=7-y;break;case"top":C=y-7}switch(d){case"top-right":case"bottom-right":v=-M;break;case"top-left":case"bottom-left":v=M;break;case"left":v=y;break;case"right":v=-y}return[v,C]}(f,r[0])}function X_(f,r,d){var y;const v=f.layout,C=(y=v.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(r,{},d);if(C){const R=C.values,I=[];for(let V=0;V<R.length;V+=2){const H=I[V]=R[V],X=R[V+1].map(se=>se*ur);H.startsWith("top")?X[1]-=7:H.startsWith("bottom")&&(X[1]+=7),I[V+1]=X}return new Zs(I)}const M=v.get("text-variable-anchor");if(M){let R;R=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(r,{},d)*ur,j0]:v.get("text-offset").evaluate(r,{},d).map(V=>V*ur);const I=[];for(const V of M)I.push(V,Y_(V,R));return new Zs(I)}return null}function kg(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Nf(f,r,d,y,v,C,M,R,I,V,H,X){let se=C.textMaxSize.evaluate(r,{});se===void 0&&(se=M);const ce=f.layers[0].layout,he=ce.get("icon-offset").evaluate(r,{},H),xe=C0(d.horizontal),Se=M/24,De=f.tilePixelRatio*Se,at=f.tilePixelRatio*se/24,Ve=f.tilePixelRatio*R,Ze=f.tilePixelRatio*ce.get("symbol-spacing"),bt=ce.get("text-padding")*f.tilePixelRatio,Et=function(Qn,Pn,An,wi=1){const ps=Qn.get("icon-padding").evaluate(Pn,{},An),Gs=ps&&ps.values;return[Gs[0]*wi,Gs[1]*wi,Gs[2]*wi,Gs[3]*wi]}(ce,r,H,f.tilePixelRatio),Zt=ce.get("text-max-angle")/180*Math.PI,un=ce.get("text-rotation-alignment")!=="viewport"&&ce.get("symbol-placement")!=="point",on=ce.get("icon-rotation-alignment")==="map"&&ce.get("symbol-placement")!=="point",hn=ce.get("symbol-placement"),En=Ze/2,fn=ce.get("icon-text-fit");let pn;y&&fn!=="none"&&(f.allowVerticalPlacement&&d.vertical&&(pn=g0(y,d.vertical,fn,ce.get("icon-text-fit-padding"),he,Se)),xe&&(y=g0(y,xe,fn,ce.get("icon-text-fit-padding"),he,Se)));const Ut=H?X.line.getGranularityForZoomLevel(H.z):1,Wn=(Qn,Pn)=>{Pn.x<0||Pn.x>=Pt||Pn.y<0||Pn.y>=Pt||function(An,wi,ps,Gs,Nr,ra,aa,nr,xs,br,ir,h,m,b,k,z,U,oe,we,$e,mt,$t,Jt,Nt,Dt){const ii=An.addToLineVertexArray(wi,ps);let Zn,$i,gt,rt,jt=0,Kt=0,zn=0,ki=0,$n=-1,si=-1;const Ns={};let Hi=Pl("");if(An.allowVerticalPlacement&&Gs.vertical){const Va=nr.layout.get("text-rotate").evaluate(mt,{},Nt)+90;gt=new nu(xs,wi,br,ir,h,Gs.vertical,m,b,k,Va),aa&&(rt=new nu(xs,wi,br,ir,h,aa,U,oe,k,Va))}if(Nr){const Va=nr.layout.get("icon-rotate").evaluate(mt,{}),Dl=nr.layout.get("icon-text-fit")!=="none",Wp=S0(Nr,Va,Jt,Dl),ru=aa?S0(aa,Va,Jt,Dl):void 0;$i=new nu(xs,wi,br,ir,h,Nr,U,oe,!1,Va),jt=4*Wp.length;const Zp=An.iconSizeData;let ad=null;Zp.kind==="source"?(ad=[Jc*nr.layout.get("icon-size").evaluate(mt,{})],ad[0]>dc&&nn(`${An.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Zp.kind==="composite"&&(ad=[Jc*$t.compositeIconSizes[0].evaluate(mt,{},Nt),Jc*$t.compositeIconSizes[1].evaluate(mt,{},Nt)],(ad[0]>dc||ad[1]>dc)&&nn(`${An.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),An.addSymbols(An.icon,Wp,ad,$e,we,mt,c.ao.none,wi,ii.lineStartIndex,ii.lineLength,-1,Nt),$n=An.icon.placedSymbolArray.length-1,ru&&(Kt=4*ru.length,An.addSymbols(An.icon,ru,ad,$e,we,mt,c.ao.vertical,wi,ii.lineStartIndex,ii.lineLength,-1,Nt),si=An.icon.placedSymbolArray.length-1)}const iu=Object.keys(Gs.horizontal);for(const Va of iu){const Dl=Gs.horizontal[Va];if(!Zn){Hi=Pl(Dl.text);const ru=nr.layout.get("text-rotate").evaluate(mt,{},Nt);Zn=new nu(xs,wi,br,ir,h,Dl,m,b,k,ru)}const Wp=Dl.positionedLines.length===1;if(zn+=Mf(An,wi,Dl,ra,nr,k,mt,z,ii,Gs.vertical?c.ao.horizontal:c.ao.horizontalOnly,Wp?iu:[Va],Ns,$n,$t,Nt),Wp)break}Gs.vertical&&(ki+=Mf(An,wi,Gs.vertical,ra,nr,k,mt,z,ii,c.ao.vertical,["vertical"],Ns,si,$t,Nt));const _w=Zn?Zn.boxStartIndex:An.collisionBoxArray.length,Mz=Zn?Zn.boxEndIndex:An.collisionBoxArray.length,Ez=gt?gt.boxStartIndex:An.collisionBoxArray.length,Az=gt?gt.boxEndIndex:An.collisionBoxArray.length,Pz=$i?$i.boxStartIndex:An.collisionBoxArray.length,Rz=$i?$i.boxEndIndex:An.collisionBoxArray.length,Dz=rt?rt.boxStartIndex:An.collisionBoxArray.length,zz=rt?rt.boxEndIndex:An.collisionBoxArray.length;let su=-1;const K_=(Va,Dl)=>Va&&Va.circleDiameter?Math.max(Va.circleDiameter,Dl):Dl;su=K_(Zn,su),su=K_(gt,su),su=K_($i,su),su=K_(rt,su);const HT=su>-1?1:0;HT&&(su*=Dt/ur),An.glyphOffsetArray.length>=eu.MAX_GLYPHS&&nn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),mt.sortKey!==void 0&&An.addToSortKeyRanges(An.symbolInstances.length,mt.sortKey);const Iz=X_(nr,mt,Nt),[Oz,Lz]=function(Va,Dl){const Wp=Va.length,ru=Dl==null?void 0:Dl.values;if((ru==null?void 0:ru.length)>0)for(let Zp=0;Zp<ru.length;Zp+=2){const ad=ru[Zp+1];Va.emplaceBack(c.aE[ru[Zp]],ad[0],ad[1])}return[Wp,Va.length]}(An.textAnchorOffsets,Iz);An.symbolInstances.emplaceBack(wi.x,wi.y,Ns.right>=0?Ns.right:-1,Ns.center>=0?Ns.center:-1,Ns.left>=0?Ns.left:-1,Ns.vertical||-1,$n,si,Hi,_w,Mz,Ez,Az,Pz,Rz,Dz,zz,br,zn,ki,jt,Kt,HT,0,m,su,Oz,Lz)}(f,Pn,Qn,d,y,v,pn,f.layers[0],f.collisionBoxArray,r.index,r.sourceLayerIndex,f.index,De,[bt,bt,bt,bt],un,I,Ve,Et,on,he,r,C,V,H,M)};if(hn==="line")for(const Qn of q_(r.geometry,0,0,Pt,Pt)){const Pn=nl(Qn,Ut),An=Vp(Pn,Ze,Zt,d.vertical||xe,y,24,at,f.overscaling,Pt);for(const wi of An)xe&&yw(f,xe.text,En,wi)||Wn(Pn,wi)}else if(hn==="line-center"){for(const Qn of r.geometry)if(Qn.length>1){const Pn=nl(Qn,Ut),An=W_(Pn,Zt,d.vertical||xe,y,24,at);An&&Wn(Pn,An)}}else if(r.type==="Polygon")for(const Qn of $h(r.geometry,0)){const Pn=mw(Qn,16);Wn(nl(Qn[0],Ut,!0),new hc(Pn.x,Pn.y,0))}else if(r.type==="LineString")for(const Qn of r.geometry){const Pn=nl(Qn,Ut);Wn(Pn,new hc(Pn[0].x,Pn[0].y,0))}else if(r.type==="Point")for(const Qn of r.geometry)for(const Pn of Qn)Wn([Pn],new hc(Pn.x,Pn.y,0))}function Mf(f,r,d,y,v,C,M,R,I,V,H,X,se,ce,he){const xe=function(at,Ve,Ze,bt,Et,Zt,un,on){const hn=bt.layout.get("text-rotate").evaluate(Zt,{})*Math.PI/180,En=[];for(const fn of Ve.positionedLines)for(const pn of fn.positionedGlyphs){if(!pn.rect)continue;const Ut=pn.rect||{};let Wn=4,Qn=!0,Pn=1,An=0;const wi=(Et||on)&&pn.vertical,ps=pn.metrics.advance*pn.scale/2;if(on&&Ve.verticalizable&&(An=fn.lineOffset/2-(pn.imageName?-(ur-pn.metrics.width*pn.scale)/2:(pn.scale-1)*ur)),pn.imageName){const oe=un[pn.imageName];Qn=oe.sdf,Pn=oe.pixelRatio,Wn=1/Pn}const Gs=Et?[pn.x+ps,pn.y]:[0,0];let Nr=Et?[0,0]:[pn.x+ps+Ze[0],pn.y+Ze[1]-An],ra=[0,0];wi&&(ra=Nr,Nr=[0,0]);const aa=pn.metrics.isDoubleResolution?2:1,nr=(pn.metrics.left-Wn)*pn.scale-ps+Nr[0],xs=(-pn.metrics.top-Wn)*pn.scale+Nr[1],br=nr+Ut.w/aa*pn.scale/Pn,ir=xs+Ut.h/aa*pn.scale/Pn,h=new g(nr,xs),m=new g(br,xs),b=new g(nr,ir),k=new g(br,ir);if(wi){const oe=new g(-ps,ps- -17),we=-Math.PI/2,$e=12-ps,mt=new g(22-$e,-(pn.imageName?$e:0)),$t=new g(...ra);h._rotateAround(we,oe)._add(mt)._add($t),m._rotateAround(we,oe)._add(mt)._add($t),b._rotateAround(we,oe)._add(mt)._add($t),k._rotateAround(we,oe)._add(mt)._add($t)}if(hn){const oe=Math.sin(hn),we=Math.cos(hn),$e=[we,-oe,oe,we];h._matMult($e),m._matMult($e),b._matMult($e),k._matMult($e)}const z=new g(0,0),U=new g(0,0);En.push({tl:h,tr:m,bl:b,br:k,tex:Ut,writingMode:Ve.writingMode,glyphOffset:Gs,sectionIndex:pn.sectionIndex,isSDF:Qn,pixelOffsetTL:z,pixelOffsetBR:U,minFontScaleX:0,minFontScaleY:0})}return En}(0,d,R,v,C,M,y,f.allowVerticalPlacement),Se=f.textSizeData;let De=null;Se.kind==="source"?(De=[Jc*v.layout.get("text-size").evaluate(M,{})],De[0]>dc&&nn(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Se.kind==="composite"&&(De=[Jc*ce.compositeTextSizes[0].evaluate(M,{},he),Jc*ce.compositeTextSizes[1].evaluate(M,{},he)],(De[0]>dc||De[1]>dc)&&nn(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,xe,De,R,C,M,V,r,I.lineStartIndex,I.lineLength,se,he);for(const at of H)X[at]=f.text.placedSymbolArray.length-1;return 4*xe.length}function C0(f){for(const r in f)return f[r];return null}function yw(f,r,d,y){const v=f.compareText;if(r in v){const C=v[r];for(let M=C.length-1;M>=0;M--)if(y.dist(C[M])<d)return!0}else v[r]=[];return v[r].push(y),!1}const rh=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ah{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,y]=new Uint8Array(r,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=y>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const C=rh[15&y];if(!C)throw new Error("Unrecognized array type.");const[M]=new Uint16Array(r,2,1),[R]=new Uint32Array(r,4,1);return new ah(R,M,C,r)}constructor(r,d=64,y=Float64Array,v){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=y,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const C=rh.indexOf(this.ArrayType),M=2*r*this.ArrayType.BYTES_PER_ELEMENT,R=r*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-R%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${y}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+R+I,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+M+R+I),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+R+I,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=r)}add(r,d){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=r,this.coords[this._pos++]=d,y}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Ng(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,d,y,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:M,nodeSize:R}=this,I=[0,C.length-1,0],V=[];for(;I.length;){const H=I.pop()||0,X=I.pop()||0,se=I.pop()||0;if(X-se<=R){for(let Se=se;Se<=X;Se++){const De=M[2*Se],at=M[2*Se+1];De>=r&&De<=y&&at>=d&&at<=v&&V.push(C[Se])}continue}const ce=se+X>>1,he=M[2*ce],xe=M[2*ce+1];he>=r&&he<=y&&xe>=d&&xe<=v&&V.push(C[ce]),(H===0?r<=he:d<=xe)&&(I.push(se),I.push(ce-1),I.push(1-H)),(H===0?y>=he:v>=xe)&&(I.push(ce+1),I.push(X),I.push(1-H))}return V}within(r,d,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:C,nodeSize:M}=this,R=[0,v.length-1,0],I=[],V=y*y;for(;R.length;){const H=R.pop()||0,X=R.pop()||0,se=R.pop()||0;if(X-se<=M){for(let Se=se;Se<=X;Se++)Hp(C[2*Se],C[2*Se+1],r,d)<=V&&I.push(v[Se]);continue}const ce=se+X>>1,he=C[2*ce],xe=C[2*ce+1];Hp(he,xe,r,d)<=V&&I.push(v[ce]),(H===0?r-y<=he:d-y<=xe)&&(R.push(se),R.push(ce-1),R.push(1-H)),(H===0?r+y>=he:d+y>=xe)&&(R.push(ce+1),R.push(X),R.push(1-H))}return I}}function Ng(f,r,d,y,v,C){if(v-y<=d)return;const M=y+v>>1;Up(f,r,M,y,v,C),Ng(f,r,d,y,M-1,1-C),Ng(f,r,d,M+1,v,1-C)}function Up(f,r,d,y,v,C){for(;v>y;){if(v-y>600){const V=v-y+1,H=d-y+1,X=Math.log(V),se=.5*Math.exp(2*X/3),ce=.5*Math.sqrt(X*se*(V-se)/V)*(H-V/2<0?-1:1);Up(f,r,d,Math.max(y,Math.floor(d-H*se/V+ce)),Math.min(v,Math.floor(d+(V-H)*se/V+ce)),C)}const M=r[2*d+C];let R=y,I=v;for(oh(f,r,y,d),r[2*v+C]>M&&oh(f,r,y,v);R<I;){for(oh(f,r,R,I),R++,I--;r[2*R+C]<M;)R++;for(;r[2*I+C]>M;)I--}r[2*y+C]===M?oh(f,r,y,I):(I++,oh(f,r,I,v)),I<=d&&(y=I+1),d<=I&&(v=I-1)}}function oh(f,r,d,y){$p(f,d,y),$p(r,2*d,2*y),$p(r,2*d+1,2*y+1)}function $p(f,r,d){const y=f[r];f[r]=f[d],f[d]=y}function Hp(f,r,d,y){const v=f-d,C=r-y;return v*v+C*C}var Mg;c.cx=void 0,(Mg=c.cx||(c.cx={})).create="create",Mg.load="load",Mg.fullLoad="fullLoad";let qp=null,Gp=[];const Eg=1e3/60,lh="loadTime",T0="fullLoadTime",xw={mark(f){performance.mark(f)},frame(f){const r=f;qp!=null&&Gp.push(r-qp),qp=r},clearMetrics(){qp=null,Gp=[],performance.clearMeasures(lh),performance.clearMeasures(T0);for(const f in c.cx)performance.clearMarks(c.cx[f])},getPerformanceMetrics(){performance.measure(lh,c.cx.create,c.cx.load),performance.measure(T0,c.cx.create,c.cx.fullLoad);const f=performance.getEntriesByName(lh)[0].duration,r=performance.getEntriesByName(T0)[0].duration,d=Gp.length,y=1/(Gp.reduce((C,M)=>C+M,0)/d/1e3),v=Gp.filter(C=>C>Eg).reduce((C,M)=>C+(M-Eg)/Eg,0);return{loadTime:f,fullLoadTime:r,fps:y,percentDroppedFrames:v/(d+v)*100,totalFrames:d}}};c.$=Pt,c.A=J,c.B=function([f,r,d]){return r+=90,r*=Math.PI/180,d*=Math.PI/180,{x:f*Math.cos(r)*Math.sin(d),y:f*Math.sin(r)*Math.sin(d),z:f*Math.cos(d)}},c.C=As,c.D=Nn,c.E=Tn,c.F=Yi,c.G=Uu,c.H=gn,c.I=ug,c.J=class{constructor(f,r){this.target=f,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new B_(()=>this.process()),this.subscription=ft(this.target,"message",d=>this.receive(d),!1),this.globalScope=Xn(self)?f:window}registerMessageHandler(f,r){this.messageHandlers[f]=r}sendAsync(f,r){return new Promise((d,y)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),C=r?ft(r.signal,"abort",()=>{C==null||C.unsubscribe(),delete this.resolveRejects[v];const I={id:v,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)},V_):null;this.resolveRejects[v]={resolve:I=>{C==null||C.unsubscribe(),d(I)},reject:I=>{C==null||C.unsubscribe(),y(I)}};const M=[],R=Object.assign(Object.assign({},f),{id:v,sourceMapId:this.mapId,origin:location.origin,data:$u(f.data,M)});this.target.postMessage(R,{transfer:M})})}receive(f){const r=f.data,d=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[d];const y=this.abortControllers[d];return delete this.abortControllers[d],void(y&&y.abort())}if(Xn(self)||r.mustQueue)return this.tasks[d]=r,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,r)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),r=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(f,r)}processTask(f,r){return a(this,void 0,void 0,function*(){if(r.type==="<response>"){const v=this.resolveRejects[f];return delete this.resolveRejects[f],v?void(r.error?v.reject(Xl(r.error)):v.resolve(Xl(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=Xl(r.data),y=new AbortController;this.abortControllers[f]=y;try{const v=yield this.messageHandlers[r.type](r.sourceMapId,d,y);this.completeTask(f,null,v)}catch(v){this.completeTask(f,v)}})}completeTask(f,r,d){const y=[];delete this.abortControllers[f];const v={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?$u(r):null,data:$u(d,y)};this.target.postMessage(v,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.K=ke,c.L=function(){var f=new J(16);return J!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},c.M=function(f,r,d){var y,v,C,M,R,I,V,H,X,se,ce,he,xe=d[0],Se=d[1],De=d[2];return r===f?(f[12]=r[0]*xe+r[4]*Se+r[8]*De+r[12],f[13]=r[1]*xe+r[5]*Se+r[9]*De+r[13],f[14]=r[2]*xe+r[6]*Se+r[10]*De+r[14],f[15]=r[3]*xe+r[7]*Se+r[11]*De+r[15]):(v=r[1],C=r[2],M=r[3],R=r[4],I=r[5],V=r[6],H=r[7],X=r[8],se=r[9],ce=r[10],he=r[11],f[0]=y=r[0],f[1]=v,f[2]=C,f[3]=M,f[4]=R,f[5]=I,f[6]=V,f[7]=H,f[8]=X,f[9]=se,f[10]=ce,f[11]=he,f[12]=y*xe+R*Se+X*De+r[12],f[13]=v*xe+I*Se+se*De+r[13],f[14]=C*xe+V*Se+ce*De+r[14],f[15]=M*xe+H*Se+he*De+r[15]),f},c.N=function(f,r,d){var y=d[0],v=d[1],C=d[2];return f[0]=r[0]*y,f[1]=r[1]*y,f[2]=r[2]*y,f[3]=r[3]*y,f[4]=r[4]*v,f[5]=r[5]*v,f[6]=r[6]*v,f[7]=r[7]*v,f[8]=r[8]*C,f[9]=r[9]*C,f[10]=r[10]*C,f[11]=r[11]*C,f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15],f},c.O=function(f,r,d){var y=r[0],v=r[1],C=r[2],M=r[3],R=r[4],I=r[5],V=r[6],H=r[7],X=r[8],se=r[9],ce=r[10],he=r[11],xe=r[12],Se=r[13],De=r[14],at=r[15],Ve=d[0],Ze=d[1],bt=d[2],Et=d[3];return f[0]=Ve*y+Ze*R+bt*X+Et*xe,f[1]=Ve*v+Ze*I+bt*se+Et*Se,f[2]=Ve*C+Ze*V+bt*ce+Et*De,f[3]=Ve*M+Ze*H+bt*he+Et*at,f[4]=(Ve=d[4])*y+(Ze=d[5])*R+(bt=d[6])*X+(Et=d[7])*xe,f[5]=Ve*v+Ze*I+bt*se+Et*Se,f[6]=Ve*C+Ze*V+bt*ce+Et*De,f[7]=Ve*M+Ze*H+bt*he+Et*at,f[8]=(Ve=d[8])*y+(Ze=d[9])*R+(bt=d[10])*X+(Et=d[11])*xe,f[9]=Ve*v+Ze*I+bt*se+Et*Se,f[10]=Ve*C+Ze*V+bt*ce+Et*De,f[11]=Ve*M+Ze*H+bt*he+Et*at,f[12]=(Ve=d[12])*y+(Ze=d[13])*R+(bt=d[14])*X+(Et=d[15])*xe,f[13]=Ve*v+Ze*I+bt*se+Et*Se,f[14]=Ve*C+Ze*V+bt*ce+Et*De,f[15]=Ve*M+Ze*H+bt*he+Et*at,f},c.P=g,c.Q=function(f,r){const d={};for(let y=0;y<r.length;y++){const v=r[y];v in f&&(d[v]=f[v])}return d},c.R=kr,c.S=Oi,c.T=Wd,c.U=bg,c.V=U_,c.W=$,c.X=G,c.Y=ge,c.Z=uo,c._=a,c.a=ie,c.a$=st,c.a0=function(f,r){var d,y,v,C,M;if(!f)return r!=null?r:{};if(!r)return f;let R=Object.assign({},f);if(r.removeAll&&(R={removeAll:!0}),r.remove){const I=new Set(r.remove);R.add&&(R.add=R.add.filter(H=>!I.has(H.id))),R.update&&(R.update=R.update.filter(H=>!I.has(H.id)));const V=new Set(((d=f.add)!==null&&d!==void 0?d:[]).map(H=>H.id));r.remove=r.remove.filter(H=>!V.has(H))}if(r.remove){const I=new Set(R.remove?R.remove.concat(r.remove):r.remove);R.remove=Array.from(I.values())}if(r.add){const I=R.add?R.add.concat(r.add):r.add,V=new Map(I.map(H=>[H.id,H]));R.add=Array.from(V.values())}if(r.update){const I=new Map((y=R.update)===null||y===void 0?void 0:y.map(V=>[V.id,V]));for(const V of r.update){const H=(v=I.get(V.id))!==null&&v!==void 0?v:{id:V.id};V.newGeometry&&(H.newGeometry=V.newGeometry),V.addOrUpdateProperties&&(H.addOrUpdateProperties=((C=H.addOrUpdateProperties)!==null&&C!==void 0?C:[]).concat(V.addOrUpdateProperties)),V.removeProperties&&(H.removeProperties=((M=H.removeProperties)!==null&&M!==void 0?M:[]).concat(V.removeProperties)),V.removeAllProperties&&(H.removeAllProperties=!0),I.set(V.id,H)}R.update=Array.from(I.values())}return R.remove&&R.add&&(R.remove=R.remove.filter(I=>R.add.findIndex(V=>V.id===I)===-1)),R},c.a1=jf,c.a2=ih,c.a3=25,c.a4=Bp,c.a5=f=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(d=>{r.onloadstart=()=>{d(r)};for(const y of f){const v=window.document.createElement("source");et(y)||(r.crossOrigin="Anonymous"),v.src=y,r.appendChild(v)}})},c.a6=lt,c.a7=function(){return Ye++},c.a8=ne,c.a9=eu,c.aA=function(f){let r=1/0,d=1/0,y=-1/0,v=-1/0;for(const C of f)r=Math.min(r,C.x),d=Math.min(d,C.y),y=Math.max(y,C.x),v=Math.max(v,C.y);return[r,d,y,v]},c.aB=ur,c.aC=fe,c.aD=function(f,r,d,y,v=!1){if(!d[0]&&!d[1])return[0,0];const C=v?y==="map"?-f.bearingInRadians:0:y==="viewport"?f.bearingInRadians:0;if(C){const M=Math.sin(C),R=Math.cos(C);d=[d[0]*R-d[1]*M,d[0]*M+d[1]*R]}return[v?d[0]:fe(r,d[0],f.zoom),v?d[1]:fe(r,d[1],f.zoom)]},c.aF=y0,c.aG=kg,c.aH=eh,c.aI=ah,c.aJ=Cs,c.aK=zo,c.aL=Ke,c.aM=yi,c.aN=Bi,c.aO=tn,c.aP=cn,c.aQ=b0,c.aR=Oe,c.aS=pe,c.aT=function(f){var r=new J(3);return r[0]=f[0],r[1]=f[1],r[2]=f[2],r},c.aU=function(f,r,d){return f[0]=r[0]-d[0],f[1]=r[1]-d[1],f[2]=r[2]-d[2],f},c.aV=function(f,r){var d=r[0],y=r[1],v=r[2],C=d*d+y*y+v*v;return C>0&&(C=1/Math.sqrt(C)),f[0]=r[0]*C,f[1]=r[1]*C,f[2]=r[2]*C,f},c.aW=He,c.aX=function(f,r){return f[0]*r[0]+f[1]*r[1]+f[2]*r[2]},c.aY=function(f,r,d){return f[0]=r[0]*d[0],f[1]=r[1]*d[1],f[2]=r[2]*d[2],f[3]=r[3]*d[3],f},c.aZ=_e,c.a_=function(f,r,d){const y=r[0]*d[0]+r[1]*d[1]+r[2]*d[2];return y===0?null:(-(f[0]*d[0]+f[1]*d[1]+f[2]*d[2])-d[3])/y},c.aa=Lc,c.ab=Ku,c.ac=tu,c.ad=function(f){const r={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,y,v,C)=>{const M=v||C;return r[y]=!M||M.toLowerCase(),""}),r["max-age"]){const d=parseInt(r["max-age"],10);isNaN(d)?delete r["max-age"]:r["max-age"]=d}return r},c.ae=qt,c.af=function(f){return Math.pow(2,f)},c.ag=K,c.ah=ut,c.ai=85.051129,c.aj=vg,c.ak=function(f){return Math.log(f)/Math.LN2},c.al=function(f){var r=f[0],d=f[1];return r*r+d*d},c.am=function(f){if(!f.length)return new Set;const r=Math.max(...f.map(I=>I.canonical.z));let d=1/0,y=-1/0,v=1/0,C=-1/0;const M=[];for(const I of f){const{x:V,y:H,z:X}=I.canonical,se=Math.pow(2,r-X),ce=V*se,he=H*se;M.push({id:I,x:ce,y:he}),ce<d&&(d=ce),ce>y&&(y=ce),he<v&&(v=he),he>C&&(C=he)}const R=new Set;for(const I of M)I.x!==d&&I.x!==y&&I.y!==v&&I.y!==C||R.add(I.id);return R},c.an=function(f,r){let d=0,y=0;if(f.kind==="constant")y=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:v,minZoom:C,maxZoom:M}=f,R=v?ut(Si.interpolationFactor(v,r,C,M),0,1):0;f.kind==="camera"?y=As.number(f.minSize,f.maxSize,R):d=R}return{uSizeT:d,uSize:y}},c.ap=function(f,{uSize:r,uSizeT:d},{lowerSize:y,upperSize:v}){return f.kind==="source"?y/Jc:f.kind==="composite"?As.number(y/Jc,v/Jc,d):r},c.aq=function(f,r){var d=r[0],y=r[1],v=r[2],C=r[3],M=r[4],R=r[5],I=r[6],V=r[7],H=r[8],X=r[9],se=r[10],ce=r[11],he=r[12],xe=r[13],Se=r[14],De=r[15],at=d*R-y*M,Ve=d*I-v*M,Ze=d*V-C*M,bt=y*I-v*R,Et=y*V-C*R,Zt=v*V-C*I,un=H*xe-X*he,on=H*Se-se*he,hn=H*De-ce*he,En=X*Se-se*xe,fn=X*De-ce*xe,pn=se*De-ce*Se,Ut=at*pn-Ve*fn+Ze*En+bt*hn-Et*on+Zt*un;return Ut?(f[0]=(R*pn-I*fn+V*En)*(Ut=1/Ut),f[1]=(v*fn-y*pn-C*En)*Ut,f[2]=(xe*Zt-Se*Et+De*bt)*Ut,f[3]=(se*Et-X*Zt-ce*bt)*Ut,f[4]=(I*hn-M*pn-V*on)*Ut,f[5]=(d*pn-v*hn+C*on)*Ut,f[6]=(Se*Ze-he*Zt-De*Ve)*Ut,f[7]=(H*Zt-se*Ze+ce*Ve)*Ut,f[8]=(M*fn-R*hn+V*un)*Ut,f[9]=(y*hn-d*fn-C*un)*Ut,f[10]=(he*Et-xe*Ze+De*at)*Ut,f[11]=(X*Ze-H*Et-ce*at)*Ut,f[12]=(R*on-M*En-I*un)*Ut,f[13]=(d*En-y*on+v*un)*Ut,f[14]=(xe*Ve-he*bt-Se*at)*Ut,f[15]=(H*bt-X*Ve+se*at)*Ut,f):null},c.ar=Qe,c.as=function(f){var r=f[0],d=f[1];return Math.sqrt(r*r+d*d)},c.at=function(f){return f[0]=0,f[1]=0,f},c.au=function(f,r,d){return f[0]=r[0]*d,f[1]=r[1]*d,f},c.av=x0,c.aw=At,c.ax=function(f,r,d,y){const v=r.y-f.y,C=r.x-f.x,M=y.y-d.y,R=y.x-d.x,I=M*C-R*v;if(I===0)return null;const V=(R*(f.y-d.y)-M*(f.x-d.x))/I;return new g(f.x+V*C,f.y+V*v)},c.ay=q_,c.az=f_,c.b=ln,c.b$=class extends _r{constructor(f,r){super(f,r),this.current=new Array}set(f){if(f!=this.current){this.current=f;const r=new Float32Array(f);this.gl.uniform1fv(this.location,r)}}},c.b0=function(f,r,d){return f[0]=r[0]*d,f[1]=r[1]*d,f[2]=r[2]*d,f[3]=r[3]*d,f},c.b1=function(f,r){return f[0]*r[0]+f[1]*r[1]+f[2]*r[2]+f[3]},c.b2=$_,c.b3=Cf,c.b4=function(f,r,d,y,v){var C=1/Math.tan(r/2);if(f[0]=C/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=C,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,v!=null&&v!==1/0){var M=1/(y-v);f[10]=(v+y)*M,f[14]=2*v*y*M}else f[10]=-1,f[14]=-2*y;return f},c.b5=function(f){var r=new J(16);return r[0]=f[0],r[1]=f[1],r[2]=f[2],r[3]=f[3],r[4]=f[4],r[5]=f[5],r[6]=f[6],r[7]=f[7],r[8]=f[8],r[9]=f[9],r[10]=f[10],r[11]=f[11],r[12]=f[12],r[13]=f[13],r[14]=f[14],r[15]=f[15],r},c.b6=function(f,r,d){var y=Math.sin(d),v=Math.cos(d),C=r[0],M=r[1],R=r[2],I=r[3],V=r[4],H=r[5],X=r[6],se=r[7];return r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f[0]=C*v+V*y,f[1]=M*v+H*y,f[2]=R*v+X*y,f[3]=I*v+se*y,f[4]=V*v-C*y,f[5]=H*v-M*y,f[6]=X*v-R*y,f[7]=se*v-I*y,f},c.b7=function(f,r,d){var y=Math.sin(d),v=Math.cos(d),C=r[4],M=r[5],R=r[6],I=r[7],V=r[8],H=r[9],X=r[10],se=r[11];return r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f[4]=C*v+V*y,f[5]=M*v+H*y,f[6]=R*v+X*y,f[7]=I*v+se*y,f[8]=V*v-C*y,f[9]=H*v-M*y,f[10]=X*v-R*y,f[11]=se*v-I*y,f},c.b8=function(){const f=new Float32Array(16);return K(f),f},c.b9=function(){const f=new Float64Array(16);return K(f),f},c.bA=function(f,r){const d=Xe(f,360),y=Xe(r,360),v=y-d,C=y>d?v-360:v+360;return Math.abs(v)<Math.abs(C)?v:C},c.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},c.bC=function(f,r,d,y){const v=Math.sqrt(f*f+r*r),C=Math.sqrt(d*d+y*y);f/=v,r/=v,d/=C,y/=C;const M=Math.acos(f*d+r*y);return-r*d+f*y>0?M:-M},c.bD=function(f,r){const d=Xe(f,2*Math.PI),y=Xe(r,2*Math.PI);return Math.min(Math.abs(d-y),Math.abs(d-y+2*Math.PI),Math.abs(d-y-2*Math.PI))},c.bE=function(){const f={},r=dt.$version;for(const d in dt.$root){const y=dt.$root[d];if(y.required){let v=null;v=d==="version"?r:y.type==="array"?[]:{},v!=null&&(f[d]=v)}}return f},c.bF=La,c.bG=Q,c.bH=function f(r,d){if(Array.isArray(r)){if(!Array.isArray(d)||r.length!==d.length)return!1;for(let y=0;y<r.length;y++)if(!f(r[y],d[y]))return!1;return!0}if(typeof r=="object"&&r!==null&&d!==null){if(typeof d!="object"||Object.keys(r).length!==Object.keys(d).length)return!1;for(const y in r)if(!f(r[y],d[y]))return!1;return!0}return r===d},c.bI=function(f){f=f.slice();const r=Object.create(null);for(let d=0;d<f.length;d++)r[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=Wt(f[d],r[f[d].ref]));return f},c.bJ=function(f,r){if(f.type==="custom")return new fw(f,r);switch(f.type){case"background":return new hw(f,r);case"circle":return new g_(f,r);case"color-relief":return new Jy(f,r);case"fill":return new rw(f,r);case"fill-extrusion":return new o0(f,r);case"heatmap":return new tw(f,r);case"hillshade":return new Ju(f,r);case"line":return new S_(f,r);case"raster":return new jp(f,r);case"symbol":return new th(f,r)}},c.bK=f=>f.type==="raster",c.bL=It,c.bM=function(f,r){if(!f)return[{command:"setStyle",args:[r]}];let d=[];try{if(!Vt(f.version,r.version))return[{command:"setStyle",args:[r]}];Vt(f.center,r.center)||d.push({command:"setCenter",args:[r.center]}),Vt(f.state,r.state)||d.push({command:"setGlobalState",args:[r.state]}),Vt(f.centerAltitude,r.centerAltitude)||d.push({command:"setCenterAltitude",args:[r.centerAltitude]}),Vt(f.zoom,r.zoom)||d.push({command:"setZoom",args:[r.zoom]}),Vt(f.bearing,r.bearing)||d.push({command:"setBearing",args:[r.bearing]}),Vt(f.pitch,r.pitch)||d.push({command:"setPitch",args:[r.pitch]}),Vt(f.roll,r.roll)||d.push({command:"setRoll",args:[r.roll]}),Vt(f.sprite,r.sprite)||d.push({command:"setSprite",args:[r.sprite]}),Vt(f.glyphs,r.glyphs)||d.push({command:"setGlyphs",args:[r.glyphs]}),Vt(f.transition,r.transition)||d.push({command:"setTransition",args:[r.transition]}),Vt(f.light,r.light)||d.push({command:"setLight",args:[r.light]}),Vt(f.terrain,r.terrain)||d.push({command:"setTerrain",args:[r.terrain]}),Vt(f.sky,r.sky)||d.push({command:"setSky",args:[r.sky]}),Vt(f.projection,r.projection)||d.push({command:"setProjection",args:[r.projection]});const y={},v=[];(function(M,R,I,V){let H;for(H in R=R||{},M=M||{})Object.prototype.hasOwnProperty.call(M,H)&&(Object.prototype.hasOwnProperty.call(R,H)||Jn(H,I,V));for(H in R)Object.prototype.hasOwnProperty.call(R,H)&&(Object.prototype.hasOwnProperty.call(M,H)?Vt(M[H],R[H])||(M[H].type==="geojson"&&R[H].type==="geojson"&&Hn(M,R,H)?vn(I,{command:"setGeoJSONSourceData",args:[H,R[H].data]}):ai(H,R,I,V)):Gi(H,R,I))})(f.sources,r.sources,v,y);const C=[];f.layers&&f.layers.forEach(M=>{"source"in M&&y[M.source]?d.push({command:"removeLayer",args:[M.id]}):C.push(M)}),d=d.concat(v),function(M,R,I){R=R||[];const V=(M=M||[]).map(xi),H=R.map(xi),X=M.reduce(Xt,{}),se=R.reduce(Xt,{}),ce=V.slice(),he=Object.create(null);let xe,Se,De,at,Ve;for(let Ze=0,bt=0;Ze<V.length;Ze++)xe=V[Ze],Object.prototype.hasOwnProperty.call(se,xe)?bt++:(vn(I,{command:"removeLayer",args:[xe]}),ce.splice(ce.indexOf(xe,bt),1));for(let Ze=0,bt=0;Ze<H.length;Ze++)xe=H[H.length-1-Ze],ce[ce.length-1-Ze]!==xe&&(Object.prototype.hasOwnProperty.call(X,xe)?(vn(I,{command:"removeLayer",args:[xe]}),ce.splice(ce.lastIndexOf(xe,ce.length-bt),1)):bt++,at=ce[ce.length-Ze],vn(I,{command:"addLayer",args:[se[xe],at]}),ce.splice(ce.length-Ze,0,xe),he[xe]=!0);for(let Ze=0;Ze<H.length;Ze++)if(xe=H[Ze],Se=X[xe],De=se[xe],!he[xe]&&!Vt(Se,De))if(Vt(Se.source,De.source)&&Vt(Se["source-layer"],De["source-layer"])&&Vt(Se.type,De.type)){for(Ve in Bn(Se.layout,De.layout,I,xe,null,"setLayoutProperty"),Bn(Se.paint,De.paint,I,xe,null,"setPaintProperty"),Vt(Se.filter,De.filter)||vn(I,{command:"setFilter",args:[xe,De.filter]}),Vt(Se.minzoom,De.minzoom)&&Vt(Se.maxzoom,De.maxzoom)||vn(I,{command:"setLayerZoomRange",args:[xe,De.minzoom,De.maxzoom]}),Se)Object.prototype.hasOwnProperty.call(Se,Ve)&&Ve!=="layout"&&Ve!=="paint"&&Ve!=="filter"&&Ve!=="metadata"&&Ve!=="minzoom"&&Ve!=="maxzoom"&&(Ve.indexOf("paint.")===0?Bn(Se[Ve],De[Ve],I,xe,Ve.slice(6),"setPaintProperty"):Vt(Se[Ve],De[Ve])||vn(I,{command:"setLayerProperty",args:[xe,Ve,De[Ve]]}));for(Ve in De)Object.prototype.hasOwnProperty.call(De,Ve)&&!Object.prototype.hasOwnProperty.call(Se,Ve)&&Ve!=="layout"&&Ve!=="paint"&&Ve!=="filter"&&Ve!=="metadata"&&Ve!=="minzoom"&&Ve!=="maxzoom"&&(Ve.indexOf("paint.")===0?Bn(Se[Ve],De[Ve],I,xe,Ve.slice(6),"setPaintProperty"):Vt(Se[Ve],De[Ve])||vn(I,{command:"setLayerProperty",args:[xe,Ve,De[Ve]]}))}else vn(I,{command:"removeLayer",args:[xe]}),at=ce[ce.lastIndexOf(xe)+1],vn(I,{command:"addLayer",args:[De,at]})}(C,r.layers,d)}catch(y){console.warn("Unable to compute style diff:",y),d=[{command:"setStyle",args:[r]}]}return d},c.bN=function(f){const r=[],d=f.id;return d===void 0&&r.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&r.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&r.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),r},c.bO=zt,c.bP=Bt,c.bQ=class extends _r{constructor(f,r){super(f,r),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},c.bR=Us,c.bS=class extends _r{constructor(f,r){super(f,r),this.current=ys}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let r=1;r<16;r++)if(f[r]!==this.current[r]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},c.bT=Ki,c.bU=class extends _r{constructor(f,r){super(f,r),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},c.bV=class extends _r{constructor(f,r){super(f,r),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},c.bW=Z,c.bX=function(f,r){var d=Math.sin(r),y=Math.cos(r);return f[0]=y,f[1]=d,f[2]=0,f[3]=-d,f[4]=y,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},c.bY=function(f,r,d){var y=r[0],v=r[1],C=r[2];return f[0]=y*d[0]+v*d[3]+C*d[6],f[1]=y*d[1]+v*d[4]+C*d[7],f[2]=y*d[2]+v*d[5]+C*d[8],f},c.bZ=function(f,r,d,y,v,C,M){var R=1/(r-d),I=1/(y-v),V=1/(C-M);return f[0]=-2*R,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*I,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*V,f[11]=0,f[12]=(r+d)*R,f[13]=(v+y)*I,f[14]=(M+C)*V,f[15]=1,f},c.b_=class extends _r{constructor(f,r){super(f,r),this.current=new Array}set(f){if(f!=this.current){this.current=f;const r=new Float32Array(4*f.length);for(let d=0;d<f.length;d++)r[4*d]=f[d].r,r[4*d+1]=f[d].g,r[4*d+2]=f[d].b,r[4*d+3]=f[d].a;this.gl.uniform4fv(this.location,r)}}},c.ba=function(){return new Float64Array(16)},c.bb=function(f,r,d){const y=new Float64Array(4);return ze(y,f,r-90,d),y},c.bc=function(f,r,d,y){var v,C,M,R,I,V=r[0],H=r[1],X=r[2],se=r[3],ce=d[0],he=d[1],xe=d[2],Se=d[3];return(C=V*ce+H*he+X*xe+se*Se)<0&&(C=-C,ce=-ce,he=-he,xe=-xe,Se=-Se),1-C>W?(v=Math.acos(C),M=Math.sin(v),R=Math.sin((1-y)*v)/M,I=Math.sin(y*v)/M):(R=1-y,I=y),f[0]=R*V+I*ce,f[1]=R*H+I*he,f[2]=R*X+I*xe,f[3]=R*se+I*Se,f},c.bd=function(f){const r=new Float64Array(9);var d,y,v,C,M,R,I,V,H,X,se,ce,he,xe,Se,De,at,Ve;X=(v=(y=f)[0])*(I=v+v),se=(C=y[1])*I,he=(M=y[2])*I,xe=M*(V=C+C),De=(R=y[3])*I,at=R*V,Ve=R*(H=M+M),(d=r)[0]=1-(ce=C*V)-(Se=M*H),d[3]=se-Ve,d[6]=he+at,d[1]=se+Ve,d[4]=1-X-Se,d[7]=xe-De,d[2]=he-at,d[5]=xe+De,d[8]=1-X-ce;const Ze=cn(-Math.asin(ut(r[2],-1,1)));let bt,Et;return Math.hypot(r[5],r[8])<.001?(bt=0,Et=-cn(Math.atan2(r[3],r[4]))):(bt=cn(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),Et=cn(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:bt,pitch:Ze+90,bearing:Et}},c.be=function(f,r){return f.roll==r.roll&&f.pitch==r.pitch&&f.bearing==r.bearing},c.bf=ui,c.bg=Rs,c.bh=Zd,c.bi=lc,c.bj=td,c.bk=tt,c.bl=Ae,c.bm=rs,c.bn=function(f,r,d,y,v){return tt(y,v,ut((f-r)/(d-r),0,1))},c.bo=Xe,c.bp=function(){return new Float64Array(3)},c.bq=function(f,r,d,y){return f[0]=r[0]+d[0]*y,f[1]=r[1]+d[1]*y,f[2]=r[2]+d[2]*y,f},c.br=ze,c.bs=function(f,r,d){var y=d[0],v=d[1],C=d[2],M=d[3],R=r[0],I=r[1],V=r[2],H=v*V-C*I,X=C*R-y*V,se=y*I-v*R;return f[0]=R+M*(H+=H)+v*(se+=se)-C*(X+=X),f[1]=I+M*X+C*H-y*se,f[2]=V+M*se+y*X-v*H,f},c.bt=function(f,r,d){const y=(v=[f[0],f[1],f[2],r[0],r[1],r[2],d[0],d[1],d[2]])[0]*((H=v[8])*(M=v[4])-(R=v[5])*(V=v[7]))+v[1]*(-H*(C=v[3])+R*(I=v[6]))+v[2]*(V*C-M*I);var v,C,M,R,I,V,H;if(y===0)return null;const X=He([],[r[0],r[1],r[2]],[d[0],d[1],d[2]]),se=He([],[d[0],d[1],d[2]],[f[0],f[1],f[2]]),ce=He([],[f[0],f[1],f[2]],[r[0],r[1],r[2]]),he=Oe([],X,-f[3]);return pe(he,he,Oe([],se,-r[3])),pe(he,he,Oe([],ce,-d[3])),Oe(he,he,1/y),he},c.bu=wf,c.bv=function(){return new Float64Array(4)},c.bw=function(f,r,d,y){var v=[],C=[];return v[0]=r[0]-d[0],v[1]=r[1]-d[1],v[2]=r[2]-d[2],C[0]=v[0]*Math.cos(y)-v[1]*Math.sin(y),C[1]=v[0]*Math.sin(y)+v[1]*Math.cos(y),C[2]=v[2],f[0]=C[0]+d[0],f[1]=C[1]+d[1],f[2]=C[2]+d[2],f},c.bx=function(f,r,d,y){var v=[],C=[];return v[0]=r[0]-d[0],v[1]=r[1]-d[1],v[2]=r[2]-d[2],C[0]=v[0],C[1]=v[1]*Math.cos(y)-v[2]*Math.sin(y),C[2]=v[1]*Math.sin(y)+v[2]*Math.cos(y),f[0]=C[0]+d[0],f[1]=C[1]+d[1],f[2]=C[2]+d[2],f},c.by=function(f,r,d,y){var v=[],C=[];return v[0]=r[0]-d[0],v[1]=r[1]-d[1],v[2]=r[2]-d[2],C[0]=v[2]*Math.sin(y)+v[0]*Math.cos(y),C[1]=v[1],C[2]=v[2]*Math.cos(y)-v[0]*Math.sin(y),f[0]=C[0]+d[0],f[1]=C[1]+d[1],f[2]=C[2]+d[2],f},c.bz=function(f,r,d){var y=Math.sin(d),v=Math.cos(d),C=r[0],M=r[1],R=r[2],I=r[3],V=r[8],H=r[9],X=r[10],se=r[11];return r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f[0]=C*v-V*y,f[1]=M*v-H*y,f[2]=R*v-X*y,f[3]=I*v-se*y,f[8]=C*y+V*v,f[9]=M*y+H*v,f[10]=R*y+X*v,f[11]=I*y+se*v,f},c.c=ae,c.c0=class extends sf{},c.c1=rg,c.c2=class extends s{},c.c3=Yy,c.c4=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},c.c5=$s,c.c6=function(f,r,d){var y=r[0],v=r[1],C=r[2],M=d[3]*y+d[7]*v+d[11]*C+d[15];return f[0]=(d[0]*y+d[4]*v+d[8]*C+d[12])/(M=M||1),f[1]=(d[1]*y+d[5]*v+d[9]*C+d[13])/M,f[2]=(d[2]*y+d[6]*v+d[10]*C+d[14])/M,f},c.c7=class extends so{},c.c8=class extends F{},c.c9=function(f,r){return f[0]===r[0]&&f[1]===r[1]&&f[2]===r[2]&&f[3]===r[3]&&f[4]===r[4]&&f[5]===r[5]&&f[6]===r[6]&&f[7]===r[7]&&f[8]===r[8]&&f[9]===r[9]&&f[10]===r[10]&&f[11]===r[11]&&f[12]===r[12]&&f[13]===r[13]&&f[14]===r[14]&&f[15]===r[15]},c.cA=function(f,r){ie.REGISTERED_PROTOCOLS[f]=r},c.cB=function(f){delete ie.REGISTERED_PROTOCOLS[f]},c.cC=function(f,r){const d={};for(let v=0;v<f.length;v++){const C=r&&r[f[v].id]||Ld(f[v]);r&&(r[f[v].id]=C);let M=d[C];M||(M=d[C]=[]),M.push(f[v])}const y=[];for(const v in d)y.push(d[v]);return y},c.cD=xn,c.cE=H_,c.cF=v0,c.cG=fs,c.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=Pt/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const r=f.bucket.layers[0],d=r.layout,y=r._unevaluatedLayout._values,v={layoutIconSize:y["icon-size"].possiblyEvaluate(new Yi(f.bucket.zoom+1),f.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new Yi(f.bucket.zoom+1),f.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new Yi(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:H}=f.bucket.textSizeData;v.compositeTextSizes=[y["text-size"].possiblyEvaluate(new Yi(V),f.canonical),y["text-size"].possiblyEvaluate(new Yi(H),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:H}=f.bucket.iconSizeData;v.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new Yi(V),f.canonical),y["icon-size"].possiblyEvaluate(new Yi(H),f.canonical)]}const C=d.get("text-line-height")*ur,M=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",R=d.get("text-keep-upright"),I=d.get("text-size");for(const V of f.bucket.features){const H=d.get("text-font").evaluate(V,{},f.canonical).join(","),X=I.evaluate(V,{},f.canonical),se=v.layoutTextSize.evaluate(V,{},f.canonical),ce=v.layoutIconSize.evaluate(V,{},f.canonical),he={horizontal:{},vertical:void 0},xe=V.text;let Se,De=[0,0];if(xe){const Ze=xe.toString(),bt=d.get("text-letter-spacing").evaluate(V,{},f.canonical)*ur,Et=Nl(Ze)?bt:0,Zt=d.get("text-anchor").evaluate(V,{},f.canonical),un=X_(r,V,f.canonical);if(!un){const fn=d.get("text-radial-offset").evaluate(V,{},f.canonical);De=fn?Y_(Zt,[fn*ur,j0]):d.get("text-offset").evaluate(V,{},f.canonical).map(pn=>pn*ur)}let on=M?"center":d.get("text-justify").evaluate(V,{},f.canonical);const hn=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(V,{},f.canonical)*ur:1/0,En=()=>{f.bucket.allowVerticalPlacement&&Hu(Ze)&&(he.vertical=dg(xe,f.glyphMap,f.glyphPositions,f.imagePositions,H,hn,C,Zt,"left",Et,De,c.ao.vertical,!0,se,X))};if(!M&&un){const fn=new Set;if(on==="auto")for(let Ut=0;Ut<un.values.length;Ut+=2)fn.add(kg(un.values[Ut]));else fn.add(on);let pn=!1;for(const Ut of fn)if(!he.horizontal[Ut])if(pn)he.horizontal[Ut]=he.horizontal[0];else{const Wn=dg(xe,f.glyphMap,f.glyphPositions,f.imagePositions,H,hn,C,"center",Ut,Et,De,c.ao.horizontal,!1,se,X);Wn&&(he.horizontal[Ut]=Wn,pn=Wn.positionedLines.length===1)}En()}else{on==="auto"&&(on=kg(Zt));const fn=dg(xe,f.glyphMap,f.glyphPositions,f.imagePositions,H,hn,C,Zt,on,Et,De,c.ao.horizontal,!1,se,X);fn&&(he.horizontal[on]=fn),En(),Hu(Ze)&&M&&R&&(he.vertical=dg(xe,f.glyphMap,f.glyphPositions,f.imagePositions,H,hn,C,Zt,on,Et,De,c.ao.vertical,!1,se,X))}}let at=!1;if(V.icon&&V.icon.name){const Ze=f.imageMap[V.icon.name];Ze&&(Se=p0(f.imagePositions[V.icon.name],d.get("icon-offset").evaluate(V,{},f.canonical),d.get("icon-anchor").evaluate(V,{},f.canonical)),at=!!Ze.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=at:f.bucket.sdfIcons!==at&&nn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==f.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const Ve=C0(he.horizontal)||he.vertical;f.bucket.iconsInText=!!Ve&&Ve.iconsInText,(Ve||Se)&&Nf(f.bucket,V,he,Se,f.imageMap,v,se,ce,De,at,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},c.cI=tg,c.cJ=Kc,c.cK=zp,c.cL=ng,c.cM=Ip,c.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},c.cO=function(f,r,d,y,v){return a(this,void 0,void 0,function*(){if(G())try{return yield ge(f,r,d,y,v)}catch(C){}return function(C,M,R,I,V){const H=C.width,X=C.height;ve&&ht||(ve=new OffscreenCanvas(H,X),ht=ve.getContext("2d",{willReadFrequently:!0})),ve.width=H,ve.height=X,ht.drawImage(C,0,0,H,X);const se=ht.getImageData(M,R,I,V);return ht.clearRect(0,0,H,X),se.data}(f,r,d,y,v)})},c.cP=Rl,c.cQ=_,c.cR=Yc,c.cS=Ci,c.cT=Ic,c.cU=function(f,r){const d=new Map;if(f!=null)if(f.type==="Feature")d.set(Tf(f,r),f);else for(const y of f.features)d.set(Tf(y,r),y);return d},c.cV=function(f,r){if(f==null)return!0;if(f.type==="Feature")return Tf(f,r)!=null;if(f.type==="FeatureCollection"){const d=new Set;for(const y of f.features){const v=Tf(y,r);if(v==null||d.has(v))return!1;d.add(v)}return!0}return!1},c.cW=function(f,r,d){var y,v,C,M;if(r.removeAll&&f.clear(),r.remove)for(const R of r.remove)f.delete(R);if(r.add)for(const R of r.add){const I=Tf(R,d);I!=null&&f.set(I,R)}if(r.update)for(const R of r.update){let I=f.get(R.id);if(I==null)continue;const V=!R.removeAllProperties&&(((y=R.removeProperties)===null||y===void 0?void 0:y.length)>0||((v=R.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0);if((R.newGeometry||R.removeAllProperties||V)&&(I=Object.assign({},I),f.set(R.id,I),V&&(I.properties=Object.assign({},I.properties))),R.newGeometry&&(I.geometry=R.newGeometry),R.removeAllProperties)I.properties={};else if(((C=R.removeProperties)===null||C===void 0?void 0:C.length)>0)for(const H of R.removeProperties)Object.prototype.hasOwnProperty.call(I.properties,H)&&delete I.properties[H];if(((M=R.addOrUpdateProperties)===null||M===void 0?void 0:M.length)>0)for(const{key:H,value:X}of R.addOrUpdateProperties)I.properties[H]=X}},c.cX=Ml,c.ca=function(f,r){var d=f[0],y=f[1],v=f[2],C=f[3],M=f[4],R=f[5],I=f[6],V=f[7],H=f[8],X=f[9],se=f[10],ce=f[11],he=f[12],xe=f[13],Se=f[14],De=f[15],at=r[0],Ve=r[1],Ze=r[2],bt=r[3],Et=r[4],Zt=r[5],un=r[6],on=r[7],hn=r[8],En=r[9],fn=r[10],pn=r[11],Ut=r[12],Wn=r[13],Qn=r[14],Pn=r[15];return Math.abs(d-at)<=W*Math.max(1,Math.abs(d),Math.abs(at))&&Math.abs(y-Ve)<=W*Math.max(1,Math.abs(y),Math.abs(Ve))&&Math.abs(v-Ze)<=W*Math.max(1,Math.abs(v),Math.abs(Ze))&&Math.abs(C-bt)<=W*Math.max(1,Math.abs(C),Math.abs(bt))&&Math.abs(M-Et)<=W*Math.max(1,Math.abs(M),Math.abs(Et))&&Math.abs(R-Zt)<=W*Math.max(1,Math.abs(R),Math.abs(Zt))&&Math.abs(I-un)<=W*Math.max(1,Math.abs(I),Math.abs(un))&&Math.abs(V-on)<=W*Math.max(1,Math.abs(V),Math.abs(on))&&Math.abs(H-hn)<=W*Math.max(1,Math.abs(H),Math.abs(hn))&&Math.abs(X-En)<=W*Math.max(1,Math.abs(X),Math.abs(En))&&Math.abs(se-fn)<=W*Math.max(1,Math.abs(se),Math.abs(fn))&&Math.abs(ce-pn)<=W*Math.max(1,Math.abs(ce),Math.abs(pn))&&Math.abs(he-Ut)<=W*Math.max(1,Math.abs(he),Math.abs(Ut))&&Math.abs(xe-Wn)<=W*Math.max(1,Math.abs(xe),Math.abs(Wn))&&Math.abs(Se-Qn)<=W*Math.max(1,Math.abs(Se),Math.abs(Qn))&&Math.abs(De-Pn)<=W*Math.max(1,Math.abs(De),Math.abs(Pn))},c.cb=function(f,r){return f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15],f},c.cc=f=>f.type==="symbol",c.cd=f=>f.type==="circle",c.ce=f=>f.type==="heatmap",c.cf=f=>f.type==="line",c.cg=f=>f.type==="fill",c.ch=f=>f.type==="fill-extrusion",c.ci=f=>f.type==="hillshade",c.cj=f=>f.type==="color-relief",c.ck=f=>f.type==="background",c.cl=f=>f.type==="custom",c.cm=ot,c.cn=function(f,r,d){const y=Je(r.x-d.x,r.y-d.y),v=Je(f.x-d.x,f.y-d.y);var C,M;return cn(Math.atan2(y[0]*v[1]-y[1]*v[0],(C=y)[0]*(M=v)[0]+C[1]*M[1]))},c.co=ct,c.cp=function(f,r){return xt[r]&&(f instanceof MouseEvent||f instanceof WheelEvent)},c.cq=function(f,r){return Qt[r]&&"touches"in f},c.cr=function(f){return Qt[f]||xt[f]},c.cs=function(f,r,d){var y=r[0],v=r[1];return f[0]=d[0]*y+d[4]*v+d[12],f[1]=d[1]*y+d[5]*v+d[13],f},c.ct=function(f,r){const{x:d,y}=jf.fromLngLat(r);return!(f<0||f>25||y<0||y>=1||d<0||d>=1)},c.cu=function(f,r){return f[0]=r[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=r[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=r[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},c.cv=class extends Jl{},c.cw=xw,c.cy=function(f){return f.message===je},c.cz=Re,c.d=et,c.e=Ge,c.f=f=>a(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(r)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=be,c.h=f=>new Promise((r,d)=>{const y=new Image;y.onload=()=>{r(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame(()=>{y.src=Ue})},y.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(f)],{type:"image/png"});y.src=f.byteLength?URL.createObjectURL(v):Ue}),c.i=Xn,c.j=(f,r)=>nt(Ge(f,{type:"json"}),r),c.k=bn,c.l=Ot,c.m=nt,c.n=(f,r)=>nt(Ge(f,{type:"arrayBuffer"}),r),c.o=function(f){return new Ip(f).readFields(R_,[])},c.p=h0,c.q=Qu,c.r=Cr,c.s=ft,c.t=Xi,c.u=mi,c.v=dt,c.w=nn,c.x=xp,c.y=_p,c.z=ba}),o("worker",["./shared"],function(c){class a{constructor(ae,ie){this.keyCache={},ae&&this.replace(ae,ie)}replace(ae,ie){this._layerConfigs={},this._layers={},this.update(ae,[],ie)}update(ae,ie,be){for(const Re of ae){this._layerConfigs[Re.id]=Re;const Q=this._layers[Re.id]=c.bJ(Re,be);Q._featureFilter=c.aa(Q.filter,be),this.keyCache[Re.id]&&delete this.keyCache[Re.id]}for(const Re of ie)delete this.keyCache[Re],delete this._layerConfigs[Re],delete this._layers[Re];this.familiesBySource={};const ke=c.cC(Object.values(this._layerConfigs),this.keyCache);for(const Re of ke){const Q=Re.map(bn=>this._layers[bn.id]),nt=Q[0];if(nt.visibility==="none")continue;const et=nt.source||"";let Tt=this.familiesBySource[et];Tt||(Tt=this.familiesBySource[et]={});const Gt=nt.sourceLayer||"_geojsonTileLayer";let Ot=Tt[Gt];Ot||(Ot=Tt[Gt]=[]),Ot.push(Q)}}}class g{constructor(ae){const ie={},be=[];for(const nt in ae){const et=ae[nt],Tt=ie[nt]={};for(const Gt in et){const Ot=et[+Gt];if(!Ot||Ot.bitmap.width===0||Ot.bitmap.height===0)continue;const bn={x:0,y:0,w:Ot.bitmap.width+2,h:Ot.bitmap.height+2};be.push(bn),Tt[Gt]={rect:bn,metrics:Ot.metrics}}}const{w:ke,h:Re}=c.p(be),Q=new c.q({width:ke||1,height:Re||1});for(const nt in ae){const et=ae[nt];for(const Tt in et){const Gt=et[+Tt];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const Ot=ie[nt][Tt].rect;c.q.copy(Gt.bitmap,Q,{x:0,y:0},{x:Ot.x+1,y:Ot.y+1},Gt.bitmap)}}this.image=Q,this.positions=ie}}c.cD("GlyphAtlas",g);class _{constructor(ae){this.tileID=new c.Z(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,ie,be,ke,Re){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new c.a8;const Q=new c.cE(Object.keys(ae.layers).sort()),nt=new c.cF(this.tileID,this.promoteId);nt.bucketLayerIDs=[];const et={},Tt={featureIndex:nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:be,subdivisionGranularity:Re},Gt=ie.familiesBySource[this.source];for(const Xt in Gt){const lt=ae.layers[Xt];if(!lt)continue;lt.version===1&&c.w(`Vector tile source "${this.source}" layer "${Xt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ri=Q.encode(Xt),li=[];for(let Wi=0;Wi<lt.length;Wi++){const us=lt.feature(Wi),sn=nt.getId(us,Xt);li.push({feature:us,id:sn,index:Wi,sourceLayerIndex:Ri})}for(const Wi of Gt[Xt]){const us=Wi[0];us.source!==this.source&&c.w(`layer.source = ${us.source} does not equal this.source = ${this.source}`),us.minzoom&&this.zoom<Math.floor(us.minzoom)||us.maxzoom&&this.zoom>=us.maxzoom||us.visibility!=="none"&&(S(Wi,this.zoom,be),(et[us.id]=us.createBucket({index:nt.bucketLayerIDs.length,layers:Wi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ri,sourceID:this.source})).populate(li,Tt,this.tileID.canonical),nt.bucketLayerIDs.push(Wi.map(sn=>sn.id)))}}const Ot=c.bO(Tt.glyphDependencies,Xt=>Object.keys(Xt).map(Number));this.inFlightDependencies.forEach(Xt=>Xt==null?void 0:Xt.abort()),this.inFlightDependencies=[];let bn=Promise.resolve({});if(Object.keys(Ot).length){const Xt=new AbortController;this.inFlightDependencies.push(Xt),bn=ke.sendAsync({type:"GG",data:{stacks:Ot,source:this.source,tileID:this.tileID,type:"glyphs"}},Xt)}const Tn=Object.keys(Tt.iconDependencies);let dt=Promise.resolve({});if(Tn.length){const Xt=new AbortController;this.inFlightDependencies.push(Xt),dt=ke.sendAsync({type:"GI",data:{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"}},Xt)}const Ct=Object.keys(Tt.patternDependencies);let Wt=Promise.resolve({});if(Ct.length){const Xt=new AbortController;this.inFlightDependencies.push(Xt),Wt=ke.sendAsync({type:"GI",data:{icons:Ct,source:this.source,tileID:this.tileID,type:"patterns"}},Xt)}const Vt=Tt.dashDependencies;let vn=Promise.resolve({});if(Object.keys(Vt).length){const Xt=new AbortController;this.inFlightDependencies.push(Xt),vn=ke.sendAsync({type:"GDA",data:{dashes:Vt}},Xt)}const[Gi,Jn,ai,Hn]=yield Promise.all([bn,dt,Wt,vn]),Bn=new g(Gi),xi=new c.cG(Jn,ai);for(const Xt in et){const lt=et[Xt];lt instanceof c.a9?(S(lt.layers,this.zoom,be),c.cH({bucket:lt,glyphMap:Gi,glyphPositions:Bn.positions,imageMap:Jn,imagePositions:xi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Tt.subdivisionGranularity})):lt.hasDependencies&&(lt instanceof c.cI||lt instanceof c.cJ||lt instanceof c.cK)&&(S(lt.layers,this.zoom,be),lt.addFeatures(Tt,this.tileID.canonical,xi.patternPositions,Hn))}return this.status="done",{buckets:Object.values(et).filter(Xt=>!Xt.isEmpty()),featureIndex:nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Bn.image,imageAtlas:xi,dashPositions:Hn,glyphMap:this.returnDependencies?Gi:null,iconMap:this.returnDependencies?Jn:null,glyphPositions:this.returnDependencies?Bn.positions:null}})}}function S(je,ae,ie){const be=new c.F(ae);for(const ke of je)ke.recalculate(be,ie)}class N{constructor(ae,ie,be){this.actor=ae,this.layerIndex=ie,this.availableImages=be,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,ie){return c._(this,void 0,void 0,function*(){const be=yield c.n(ae.request,ie);try{return{vectorTile:new c.cL(new c.cM(be.data)),rawData:be.data,cacheControl:be.cacheControl,expires:be.expires}}catch(ke){const Re=new Uint8Array(be.data);let Q=`Unable to parse the tile at ${ae.request.url}, `;throw Q+=Re[0]===31&&Re[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ke.message}`,new Error(Q)}})}loadTile(ae){return c._(this,void 0,void 0,function*(){const ie=ae.uid,be=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new c.cN(ae.request),ke=new _(ae);this.loading[ie]=ke;const Re=new AbortController;ke.abort=Re;try{const Q=yield this.loadVectorTile(ae,Re);if(delete this.loading[ie],!Q)return null;const nt=Q.rawData,et={};Q.expires&&(et.expires=Q.expires),Q.cacheControl&&(et.cacheControl=Q.cacheControl);const Tt={};if(be){const Ot=be.finish();Ot&&(Tt.resourceTiming=JSON.parse(JSON.stringify(Ot)))}ke.vectorTile=Q.vectorTile;const Gt=ke.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[ie]=ke,this.fetching[ie]={rawTileData:nt,cacheControl:et,resourceTiming:Tt};try{const Ot=yield Gt;return c.e({rawTileData:nt.slice(0)},Ot,et,Tt)}finally{delete this.fetching[ie]}}catch(Q){throw delete this.loading[ie],ke.status="done",this.loaded[ie]=ke,Q}})}reloadTile(ae){return c._(this,void 0,void 0,function*(){const ie=ae.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const be=this.loaded[ie];if(be.showCollisionBoxes=ae.showCollisionBoxes,be.status==="parsing"){const ke=yield be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let Re;if(this.fetching[ie]){const{rawTileData:Q,cacheControl:nt,resourceTiming:et}=this.fetching[ie];delete this.fetching[ie],Re=c.e({rawTileData:Q.slice(0)},ke,nt,et)}else Re=ke;return Re}if(be.status==="done"&&be.vectorTile)return be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return c._(this,void 0,void 0,function*(){const ie=this.loading,be=ae.uid;ie&&ie[be]&&ie[be].abort&&(ie[be].abort.abort(),delete ie[be])})}removeTile(ae){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class A{constructor(){this.loaded={}}loadTile(ae){return c._(this,void 0,void 0,function*(){const{uid:ie,encoding:be,rawImageData:ke,redFactor:Re,greenFactor:Q,blueFactor:nt,baseShift:et}=ae,Tt=ke.width+2,Gt=ke.height+2,Ot=c.b(ke)?new c.R({width:Tt,height:Gt},yield c.cO(ke,-1,-1,Tt,Gt)):ke,bn=new c.cP(ie,Ot,be,Re,Q,nt,et);return this.loaded=this.loaded||{},this.loaded[ie]=bn,bn})}removeTile(ae){const ie=this.loaded,be=ae.uid;ie&&ie[be]&&delete ie[be]}}var E,D,B=function(){if(D)return E;function je(ie,be){if(ie.length!==0){ae(ie[0],be);for(var ke=1;ke<ie.length;ke++)ae(ie[ke],!be)}}function ae(ie,be){for(var ke=0,Re=0,Q=0,nt=ie.length,et=nt-1;Q<nt;et=Q++){var Tt=(ie[Q][0]-ie[et][0])*(ie[et][1]+ie[Q][1]),Gt=ke+Tt;Re+=Math.abs(ke)>=Math.abs(Tt)?ke-Gt+Tt:Tt-Gt+ke,ke=Gt}ke+Re>=0!=!!be&&ie.reverse()}return D=1,E=function ie(be,ke){var Re,Q=be&&be.type;if(Q==="FeatureCollection")for(Re=0;Re<be.features.length;Re++)ie(be.features[Re],ke);else if(Q==="GeometryCollection")for(Re=0;Re<be.geometries.length;Re++)ie(be.geometries[Re],ke);else if(Q==="Feature")ie(be.geometry,ke);else if(Q==="Polygon")je(be.coordinates,ke);else if(Q==="MultiPolygon")for(Re=0;Re<be.coordinates.length;Re++)je(be.coordinates[Re],ke);return be}}(),$=c.cQ(B);class G extends c.cS{constructor(ae,ie){super(new c.cM,0,ie,[],[]),this.feature=ae,this.type=ae.type,this.properties=ae.tags?ae.tags:{},"id"in ae&&(typeof ae.id=="string"?this.id=parseInt(ae.id,10):typeof ae.id!="number"||isNaN(ae.id)||(this.id=ae.id))}loadGeometry(){const ae=[],ie=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const be of ie){const ke=[];for(const Re of be)ke.push(new c.P(Re[0],Re[1]));ae.push(ke)}return ae}}class W extends c.cR{constructor(ae,ie){super(new c.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ie?ie.version:1,this.extent=ie?ie.extent:4096,this.length=ae.length,this.features=ae}feature(ae){return new G(this.features[ae],this.extent)}}function J(je,ae){ae.writeVarintField(15,je.version||1),ae.writeStringField(1,je.name||""),ae.writeVarintField(5,je.extent||4096);const ie={keys:[],values:[],keycache:{},valuecache:{}};for(let Re=0;Re<je.length;Re++)ie.feature=je.feature(Re),ae.writeMessage(2,Z,ie);const be=ie.keys;for(const Re of be)ae.writeStringField(3,Re);const ke=ie.values;for(const Re of ke)ae.writeMessage(4,pe,Re)}function Z(je,ae){if(!je.feature)return;const ie=je.feature;ie.id!==void 0&&ae.writeVarintField(1,ie.id),ae.writeMessage(2,K,je),ae.writeVarintField(3,ie.type),ae.writeMessage(4,de,ie)}function K(je,ae){var ie;for(const be in(ie=je.feature)==null?void 0:ie.properties){let ke=je.feature.properties[be],Re=je.keycache[be];if(ke===null)continue;Re===void 0&&(je.keys.push(be),Re=je.keys.length-1,je.keycache[be]=Re),ae.writeVarint(Re),typeof ke!="string"&&typeof ke!="boolean"&&typeof ke!="number"&&(ke=JSON.stringify(ke));const Q=typeof ke+":"+ke;let nt=je.valuecache[Q];nt===void 0&&(je.values.push(ke),nt=je.values.length-1,je.valuecache[Q]=nt),ae.writeVarint(nt)}}function le(je,ae){return(ae<<3)+(7&je)}function _e(je){return je<<1^je>>31}function de(je,ae){const ie=je.loadGeometry(),be=je.type;let ke=0,Re=0;for(const Q of ie){let nt=1;be===1&&(nt=Q.length),ae.writeVarint(le(1,nt));const et=be===3?Q.length-1:Q.length;for(let Tt=0;Tt<et;Tt++){Tt===1&&be!==1&&ae.writeVarint(le(2,et-1));const Gt=Q[Tt].x-ke,Ot=Q[Tt].y-Re;ae.writeVarint(_e(Gt)),ae.writeVarint(_e(Ot)),ke+=Gt,Re+=Ot}je.type===3&&ae.writeVarint(le(7,1))}}function pe(je,ae){const ie=typeof je;ie==="string"?ae.writeStringField(1,je):ie==="boolean"?ae.writeBooleanField(7,je):ie==="number"&&(je%1!=0?ae.writeDoubleField(3,je):je<0?ae.writeSVarintField(6,je):ae.writeVarintField(5,je))}const Oe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:je=>je},He=Math.fround||(We=new Float32Array(1),je=>(We[0]=+je,We[0]));var We;class st{constructor(ae){this.options=Object.assign(Object.create(Oe),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:ie,minZoom:be,maxZoom:ke}=this.options;ie&&console.time("total time");const Re=`prepare ${ae.length} points`;ie&&console.time(Re),this.points=ae;const Q=[];for(let et=0;et<ae.length;et++){const Tt=ae[et];if(!Tt.geometry)continue;const[Gt,Ot]=Tt.geometry.coordinates,bn=He(ze(Gt)),Tn=He(Qe(Ot));Q.push(bn,Tn,1/0,et,-1,1),this.options.reduce&&Q.push(0)}let nt=this.trees[ke+1]=this._createTree(Q);ie&&console.timeEnd(Re);for(let et=ke;et>=be;et--){const Tt=+Date.now();nt=this.trees[et]=this._createTree(this._cluster(nt,et)),ie&&console.log("z%d: %d clusters in %dms",et,nt.numItems,+Date.now()-Tt)}return ie&&console.timeEnd("total time"),this}getClusters(ae,ie){let be=((ae[0]+180)%360+360)%360-180;const ke=Math.max(-90,Math.min(90,ae[1]));let Re=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const Q=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)be=-180,Re=180;else if(be>Re){const Ot=this.getClusters([be,ke,180,Q],ie),bn=this.getClusters([-180,ke,Re,Q],ie);return Ot.concat(bn)}const nt=this.trees[this._limitZoom(ie)],et=nt.range(ze(be),Qe(Q),ze(Re),Qe(ke)),Tt=nt.data,Gt=[];for(const Ot of et){const bn=this.stride*Ot;Gt.push(Tt[bn+5]>1?At(Tt,bn,this.clusterProps):this.points[Tt[bn+3]])}return Gt}getChildren(ae){const ie=this._getOriginId(ae),be=this._getOriginZoom(ae),ke="No cluster with the specified id.",Re=this.trees[be];if(!Re)throw new Error(ke);const Q=Re.data;if(ie*this.stride>=Q.length)throw new Error(ke);const nt=this.options.radius/(this.options.extent*Math.pow(2,be-1)),et=Re.within(Q[ie*this.stride],Q[ie*this.stride+1],nt),Tt=[];for(const Gt of et){const Ot=Gt*this.stride;Q[Ot+4]===ae&&Tt.push(Q[Ot+5]>1?At(Q,Ot,this.clusterProps):this.points[Q[Ot+3]])}if(Tt.length===0)throw new Error(ke);return Tt}getLeaves(ae,ie,be){const ke=[];return this._appendLeaves(ke,ae,ie=ie||10,be=be||0,0),ke}getTile(ae,ie,be){const ke=this.trees[this._limitZoom(ae)],Re=Math.pow(2,ae),{extent:Q,radius:nt}=this.options,et=nt/Q,Tt=(be-et)/Re,Gt=(be+1+et)/Re,Ot={features:[]};return this._addTileFeatures(ke.range((ie-et)/Re,Tt,(ie+1+et)/Re,Gt),ke.data,ie,be,Re,Ot),ie===0&&this._addTileFeatures(ke.range(1-et/Re,Tt,1,Gt),ke.data,Re,be,Re,Ot),ie===Re-1&&this._addTileFeatures(ke.range(0,Tt,et/Re,Gt),ke.data,-1,be,Re,Ot),Ot.features.length?Ot:null}getClusterExpansionZoom(ae){let ie=this._getOriginZoom(ae)-1;for(;ie<=this.options.maxZoom;){const be=this.getChildren(ae);if(ie++,be.length!==1)break;ae=be[0].properties.cluster_id}return ie}_appendLeaves(ae,ie,be,ke,Re){const Q=this.getChildren(ie);for(const nt of Q){const et=nt.properties;if(et&&et.cluster?Re+et.point_count<=ke?Re+=et.point_count:Re=this._appendLeaves(ae,et.cluster_id,be,ke,Re):Re<ke?Re++:ae.push(nt),ae.length===be)break}return Re}_createTree(ae){const ie=new c.aI(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let be=0;be<ae.length;be+=this.stride)ie.add(ae[be],ae[be+1]);return ie.finish(),ie.data=ae,ie}_addTileFeatures(ae,ie,be,ke,Re,Q){for(const nt of ae){const et=nt*this.stride,Tt=ie[et+5]>1;let Gt,Ot,bn;if(Tt)Gt=vt(ie,et,this.clusterProps),Ot=ie[et],bn=ie[et+1];else{const Ct=this.points[ie[et+3]];Gt=Ct.properties;const[Wt,Vt]=Ct.geometry.coordinates;Ot=ze(Wt),bn=Qe(Vt)}const Tn={type:1,geometry:[[Math.round(this.options.extent*(Ot*Re-be)),Math.round(this.options.extent*(bn*Re-ke))]],tags:Gt};let dt;dt=Tt||this.options.generateId?ie[et+3]:this.points[ie[et+3]].id,dt!==void 0&&(Tn.id=dt),Q.features.push(Tn)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,ie){const{radius:be,extent:ke,reduce:Re,minPoints:Q}=this.options,nt=be/(ke*Math.pow(2,ie)),et=ae.data,Tt=[],Gt=this.stride;for(let Ot=0;Ot<et.length;Ot+=Gt){if(et[Ot+2]<=ie)continue;et[Ot+2]=ie;const bn=et[Ot],Tn=et[Ot+1],dt=ae.within(et[Ot],et[Ot+1],nt),Ct=et[Ot+5];let Wt=Ct;for(const Vt of dt){const vn=Vt*Gt;et[vn+2]>ie&&(Wt+=et[vn+5])}if(Wt>Ct&&Wt>=Q){let Vt,vn=bn*Ct,Gi=Tn*Ct,Jn=-1;const ai=(Ot/Gt<<5)+(ie+1)+this.points.length;for(const Hn of dt){const Bn=Hn*Gt;if(et[Bn+2]<=ie)continue;et[Bn+2]=ie;const xi=et[Bn+5];vn+=et[Bn]*xi,Gi+=et[Bn+1]*xi,et[Bn+4]=ai,Re&&(Vt||(Vt=this._map(et,Ot,!0),Jn=this.clusterProps.length,this.clusterProps.push(Vt)),Re(Vt,this._map(et,Bn)))}et[Ot+4]=ai,Tt.push(vn/Wt,Gi/Wt,1/0,ai,-1,Wt),Re&&Tt.push(Jn)}else{for(let Vt=0;Vt<Gt;Vt++)Tt.push(et[Ot+Vt]);if(Wt>1)for(const Vt of dt){const vn=Vt*Gt;if(!(et[vn+2]<=ie)){et[vn+2]=ie;for(let Gi=0;Gi<Gt;Gi++)Tt.push(et[vn+Gi])}}}}return Tt}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,ie,be){if(ae[ie+5]>1){const Q=this.clusterProps[ae[ie+6]];return be?Object.assign({},Q):Q}const ke=this.points[ae[ie+3]].properties,Re=this.options.map(ke);return be&&Re===ke?Object.assign({},Re):Re}}function At(je,ae,ie){return{type:"Feature",id:je[ae+3],properties:vt(je,ae,ie),geometry:{type:"Point",coordinates:[(be=je[ae],360*(be-.5)),Je(je[ae+1])]}};var be}function vt(je,ae,ie){const be=je[ae+5],ke=be>=1e4?`${Math.round(be/1e3)}k`:be>=1e3?Math.round(be/100)/10+"k":be,Re=je[ae+6],Q=Re===-1?{}:Object.assign({},ie[Re]);return Object.assign(Q,{cluster:!0,cluster_id:je[ae+3],point_count:be,point_count_abbreviated:ke})}function ze(je){return je/360+.5}function Qe(je){const ae=Math.sin(je*Math.PI/180),ie=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ie<0?0:ie>1?1:ie}function Je(je){const ae=(180-360*je)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function Pt(je,ae,ie,be){let ke=be;const Re=ae+(ie-ae>>1);let Q,nt=ie-ae;const et=je[ae],Tt=je[ae+1],Gt=je[ie],Ot=je[ie+1];for(let bn=ae+3;bn<ie;bn+=3){const Tn=fe(je[bn],je[bn+1],et,Tt,Gt,Ot);if(Tn>ke)Q=bn,ke=Tn;else if(Tn===ke){const dt=Math.abs(bn-Re);dt<nt&&(Q=bn,nt=dt)}}ke>be&&(Q-ae>3&&Pt(je,ae,Q,be),je[Q+2]=ke,ie-Q>3&&Pt(je,Q,ie,be))}function fe(je,ae,ie,be,ke,Re){let Q=ke-ie,nt=Re-be;if(Q!==0||nt!==0){const et=((je-ie)*Q+(ae-be)*nt)/(Q*Q+nt*nt);et>1?(ie=ke,be=Re):et>0&&(ie+=Q*et,be+=nt*et)}return Q=je-ie,nt=ae-be,Q*Q+nt*nt}function Xe(je,ae,ie,be){const ke={id:je==null?null:je,type:ae,geometry:ie,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")tt(ke,ie);else if(ae==="Polygon")tt(ke,ie[0]);else if(ae==="MultiLineString")for(const Re of ie)tt(ke,Re);else if(ae==="MultiPolygon")for(const Re of ie)tt(ke,Re[0]);return ke}function tt(je,ae){for(let ie=0;ie<ae.length;ie+=3)je.minX=Math.min(je.minX,ae[ie]),je.minY=Math.min(je.minY,ae[ie+1]),je.maxX=Math.max(je.maxX,ae[ie]),je.maxY=Math.max(je.maxY,ae[ie+1])}function Ae(je,ae,ie,be){if(!ae.geometry)return;const ke=ae.geometry.coordinates;if(ke&&ke.length===0)return;const Re=ae.geometry.type,Q=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let nt=[],et=ae.id;if(ie.promoteId?et=ae.properties[ie.promoteId]:ie.generateId&&(et=be||0),Re==="Point")ot(ke,nt);else if(Re==="MultiPoint")for(const Tt of ke)ot(Tt,nt);else if(Re==="LineString")ct(ke,nt,Q,!1);else if(Re==="MultiLineString"){if(ie.lineMetrics){for(const Tt of ke)nt=[],ct(Tt,nt,Q,!1),je.push(Xe(et,"LineString",nt,ae.properties));return}ut(ke,nt,Q,!1)}else if(Re==="Polygon")ut(ke,nt,Q,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(const Tt of ae.geometry.geometries)Ae(je,{id:et,geometry:Tt,properties:ae.properties},ie,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Tt of ke){const Gt=[];ut(Tt,Gt,Q,!0),nt.push(Gt)}}je.push(Xe(et,Re,nt,ae.properties))}function ot(je,ae){ae.push(tn(je[0]),Ge(je[1]),0)}function ct(je,ae,ie,be){let ke,Re,Q=0;for(let et=0;et<je.length;et++){const Tt=tn(je[et][0]),Gt=Ge(je[et][1]);ae.push(Tt,Gt,0),et>0&&(Q+=be?(ke*Gt-Tt*Re)/2:Math.sqrt(Math.pow(Tt-ke,2)+Math.pow(Gt-Re,2))),ke=Tt,Re=Gt}const nt=ae.length-3;ae[2]=1,Pt(ae,0,nt,ie),ae[nt+2]=1,ae.size=Math.abs(Q),ae.start=0,ae.end=ae.size}function ut(je,ae,ie,be){for(let ke=0;ke<je.length;ke++){const Re=[];ct(je[ke],Re,ie,be),ae.push(Re)}}function tn(je){return je/360+.5}function Ge(je){const ae=Math.sin(je*Math.PI/180),ie=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ie<0?0:ie>1?1:ie}function Ye(je,ae,ie,be,ke,Re,Q,nt){if(be/=ae,Re>=(ie/=ae)&&Q<be)return je;if(Q<ie||Re>=be)return null;const et=[];for(const Tt of je){const Gt=Tt.geometry;let Ot=Tt.type;const bn=ke===0?Tt.minX:Tt.minY,Tn=ke===0?Tt.maxX:Tt.maxY;if(bn>=ie&&Tn<be){et.push(Tt);continue}if(Tn<ie||bn>=be)continue;let dt=[];if(Ot==="Point"||Ot==="MultiPoint")zt(Gt,dt,ie,be,ke);else if(Ot==="LineString")Bt(Gt,dt,ie,be,ke,!1,nt.lineMetrics);else if(Ot==="MultiLineString")Lt(Gt,dt,ie,be,ke,!1);else if(Ot==="Polygon")Lt(Gt,dt,ie,be,ke,!0);else if(Ot==="MultiPolygon")for(const Ct of Gt){const Wt=[];Lt(Ct,Wt,ie,be,ke,!0),Wt.length&&dt.push(Wt)}if(dt.length){if(nt.lineMetrics&&Ot==="LineString"){for(const Ct of dt)et.push(Xe(Tt.id,Ot,Ct,Tt.tags));continue}Ot!=="LineString"&&Ot!=="MultiLineString"||(dt.length===1?(Ot="LineString",dt=dt[0]):Ot="MultiLineString"),Ot!=="Point"&&Ot!=="MultiPoint"||(Ot=dt.length===3?"Point":"MultiPoint"),et.push(Xe(Tt.id,Ot,dt,Tt.tags))}}return et.length?et:null}function zt(je,ae,ie,be,ke){for(let Re=0;Re<je.length;Re+=3){const Q=je[Re+ke];Q>=ie&&Q<=be&&nn(ae,je[Re],je[Re+1],je[Re+2])}}function Bt(je,ae,ie,be,ke,Re,Q){let nt=It(je);const et=ke===0?_n:Xn;let Tt,Gt,Ot=je.start;for(let Wt=0;Wt<je.length-3;Wt+=3){const Vt=je[Wt],vn=je[Wt+1],Gi=je[Wt+2],Jn=je[Wt+3],ai=je[Wt+4],Hn=ke===0?Vt:vn,Bn=ke===0?Jn:ai;let xi=!1;Q&&(Tt=Math.sqrt(Math.pow(Vt-Jn,2)+Math.pow(vn-ai,2))),Hn<ie?Bn>ie&&(Gt=et(nt,Vt,vn,Jn,ai,ie),Q&&(nt.start=Ot+Tt*Gt)):Hn>be?Bn<be&&(Gt=et(nt,Vt,vn,Jn,ai,be),Q&&(nt.start=Ot+Tt*Gt)):nn(nt,Vt,vn,Gi),Bn<ie&&Hn>=ie&&(Gt=et(nt,Vt,vn,Jn,ai,ie),xi=!0),Bn>be&&Hn<=be&&(Gt=et(nt,Vt,vn,Jn,ai,be),xi=!0),!Re&&xi&&(Q&&(nt.end=Ot+Tt*Gt),ae.push(nt),nt=It(je)),Q&&(Ot+=Tt)}let bn=je.length-3;const Tn=je[bn],dt=je[bn+1],Ct=ke===0?Tn:dt;Ct>=ie&&Ct<=be&&nn(nt,Tn,dt,je[bn+2]),bn=nt.length-3,Re&&bn>=3&&(nt[bn]!==nt[0]||nt[bn+1]!==nt[1])&&nn(nt,nt[0],nt[1],nt[2]),nt.length&&ae.push(nt)}function It(je){const ae=[];return ae.size=je.size,ae.start=je.start,ae.end=je.end,ae}function Lt(je,ae,ie,be,ke,Re){for(const Q of je)Bt(Q,ae,ie,be,ke,Re,!1)}function nn(je,ae,ie,be){je.push(ae,ie,be)}function _n(je,ae,ie,be,ke,Re){const Q=(Re-ae)/(be-ae);return nn(je,Re,ie+(ke-ie)*Q,1),Q}function Xn(je,ae,ie,be,ke,Re){const Q=(Re-ie)/(ke-ie);return nn(je,ae+(be-ae)*Q,Re,1),Q}function Gn(je,ae){const ie=[];for(let be=0;be<je.length;be++){const ke=je[be],Re=ke.type;let Q;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")Q=gn(ke.geometry,ae);else if(Re==="MultiLineString"||Re==="Polygon"){Q=[];for(const nt of ke.geometry)Q.push(gn(nt,ae))}else if(Re==="MultiPolygon"){Q=[];for(const nt of ke.geometry){const et=[];for(const Tt of nt)et.push(gn(Tt,ae));Q.push(et)}}ie.push(Xe(ke.id,Re,Q,ke.tags))}return ie}function gn(je,ae){const ie=[];ie.size=je.size,je.start!==void 0&&(ie.start=je.start,ie.end=je.end);for(let be=0;be<je.length;be+=3)ie.push(je[be]+ae,je[be+1],je[be+2]);return ie}function ln(je,ae){if(je.transformed)return je;const ie=1<<je.z,be=je.x,ke=je.y;for(const Re of je.features){const Q=Re.geometry,nt=Re.type;if(Re.geometry=[],nt===1)for(let et=0;et<Q.length;et+=2)Re.geometry.push(Ue(Q[et],Q[et+1],ae,ie,be,ke));else for(let et=0;et<Q.length;et++){const Tt=[];for(let Gt=0;Gt<Q[et].length;Gt+=2)Tt.push(Ue(Q[et][Gt],Q[et][Gt+1],ae,ie,be,ke));Re.geometry.push(Tt)}}return je.transformed=!0,je}function Ue(je,ae,ie,be,ke,Re){return[Math.round(ie*(je*be-ke)),Math.round(ie*(ae*be-Re))]}function ge(je,ae,ie,be,ke){const Re=ae===ke.maxZoom?0:ke.tolerance/((1<<ae)*ke.extent),Q={features:[],numPoints:0,numSimplified:0,numFeatures:je.length,source:null,x:ie,y:be,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const nt of je)ve(Q,nt,Re,ke);return Q}function ve(je,ae,ie,be){const ke=ae.geometry,Re=ae.type,Q=[];if(je.minX=Math.min(je.minX,ae.minX),je.minY=Math.min(je.minY,ae.minY),je.maxX=Math.max(je.maxX,ae.maxX),je.maxY=Math.max(je.maxY,ae.maxY),Re==="Point"||Re==="MultiPoint")for(let nt=0;nt<ke.length;nt+=3)Q.push(ke[nt],ke[nt+1]),je.numPoints++,je.numSimplified++;else if(Re==="LineString")ht(Q,ke,je,ie,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(let nt=0;nt<ke.length;nt++)ht(Q,ke[nt],je,ie,Re==="Polygon",nt===0);else if(Re==="MultiPolygon")for(let nt=0;nt<ke.length;nt++){const et=ke[nt];for(let Tt=0;Tt<et.length;Tt++)ht(Q,et[Tt],je,ie,!0,Tt===0)}if(Q.length){let nt=ae.tags||null;if(Re==="LineString"&&be.lineMetrics){nt={};for(const Tt in ae.tags)nt[Tt]=ae.tags[Tt];nt.mapbox_clip_start=ke.start/ke.size,nt.mapbox_clip_end=ke.end/ke.size}const et={geometry:Q,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:nt};ae.id!==null&&(et.id=ae.id),je.features.push(et)}}function ht(je,ae,ie,be,ke,Re){const Q=be*be;if(be>0&&ae.size<(ke?Q:be))return void(ie.numPoints+=ae.length/3);const nt=[];for(let et=0;et<ae.length;et+=3)(be===0||ae[et+2]>Q)&&(ie.numSimplified++,nt.push(ae[et],ae[et+1])),ie.numPoints++;ke&&function(et,Tt){let Gt=0;for(let Ot=0,bn=et.length,Tn=bn-2;Ot<bn;Tn=Ot,Ot+=2)Gt+=(et[Ot]-et[Tn])*(et[Ot+1]+et[Tn+1]);if(Gt>0===Tt)for(let Ot=0,bn=et.length;Ot<bn/2;Ot+=2){const Tn=et[Ot],dt=et[Ot+1];et[Ot]=et[bn-2-Ot],et[Ot+1]=et[bn-1-Ot],et[bn-2-Ot]=Tn,et[bn-1-Ot]=dt}}(nt,Re),je.push(nt)}const ft={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class qt{constructor(ae,ie){const be=(ie=this.options=function(Re,Q){for(const nt in Q)Re[nt]=Q[nt];return Re}(Object.create(ft),ie)).debug;if(be&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let ke=function(Re,Q){const nt=[];if(Re.type==="FeatureCollection")for(let et=0;et<Re.features.length;et++)Ae(nt,Re.features[et],Q,et);else Ae(nt,Re.type==="Feature"?Re:{geometry:Re},Q);return nt}(ae,ie);this.tiles={},this.tileCoords=[],be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ke=function(Re,Q){const nt=Q.buffer/Q.extent;let et=Re;const Tt=Ye(Re,1,-1-nt,nt,0,-1,2,Q),Gt=Ye(Re,1,1-nt,2+nt,0,-1,2,Q);return(Tt||Gt)&&(et=Ye(Re,1,-nt,1+nt,0,-1,2,Q)||[],Tt&&(et=Gn(Tt,1).concat(et)),Gt&&(et=et.concat(Gn(Gt,-1)))),et}(ke,ie),ke.length&&this.splitTile(ke,0,0,0),be&&(ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,ie,be,ke,Re,Q,nt){const et=[ae,ie,be,ke],Tt=this.options,Gt=Tt.debug;for(;et.length;){ke=et.pop(),be=et.pop(),ie=et.pop(),ae=et.pop();const Ot=1<<ie,bn=cn(ie,be,ke);let Tn=this.tiles[bn];if(!Tn&&(Gt>1&&console.time("creation"),Tn=this.tiles[bn]=ge(ae,ie,be,ke,Tt),this.tileCoords.push({z:ie,x:be,y:ke}),Gt)){Gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,be,ke,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));const xi=`z${ie}`;this.stats[xi]=(this.stats[xi]||0)+1,this.total++}if(Tn.source=ae,Re==null){if(ie===Tt.indexMaxZoom||Tn.numPoints<=Tt.indexMaxPoints)continue}else{if(ie===Tt.maxZoom||ie===Re)continue;if(Re!=null){const xi=Re-ie;if(be!==Q>>xi||ke!==nt>>xi)continue}}if(Tn.source=null,ae.length===0)continue;Gt>1&&console.time("clipping");const dt=.5*Tt.buffer/Tt.extent,Ct=.5-dt,Wt=.5+dt,Vt=1+dt;let vn=null,Gi=null,Jn=null,ai=null,Hn=Ye(ae,Ot,be-dt,be+Wt,0,Tn.minX,Tn.maxX,Tt),Bn=Ye(ae,Ot,be+Ct,be+Vt,0,Tn.minX,Tn.maxX,Tt);ae=null,Hn&&(vn=Ye(Hn,Ot,ke-dt,ke+Wt,1,Tn.minY,Tn.maxY,Tt),Gi=Ye(Hn,Ot,ke+Ct,ke+Vt,1,Tn.minY,Tn.maxY,Tt),Hn=null),Bn&&(Jn=Ye(Bn,Ot,ke-dt,ke+Wt,1,Tn.minY,Tn.maxY,Tt),ai=Ye(Bn,Ot,ke+Ct,ke+Vt,1,Tn.minY,Tn.maxY,Tt),Bn=null),Gt>1&&console.timeEnd("clipping"),et.push(vn||[],ie+1,2*be,2*ke),et.push(Gi||[],ie+1,2*be,2*ke+1),et.push(Jn||[],ie+1,2*be+1,2*ke),et.push(ai||[],ie+1,2*be+1,2*ke+1)}}getTile(ae,ie,be){ae=+ae,ie=+ie,be=+be;const ke=this.options,{extent:Re,debug:Q}=ke;if(ae<0||ae>24)return null;const nt=1<<ae,et=cn(ae,ie=ie+nt&nt-1,be);if(this.tiles[et])return ln(this.tiles[et],Re);Q>1&&console.log("drilling down to z%d-%d-%d",ae,ie,be);let Tt,Gt=ae,Ot=ie,bn=be;for(;!Tt&&Gt>0;)Gt--,Ot>>=1,bn>>=1,Tt=this.tiles[cn(Gt,Ot,bn)];return Tt&&Tt.source?(Q>1&&(console.log("found parent tile z%d-%d-%d",Gt,Ot,bn),console.time("drilling down")),this.splitTile(Tt.source,Gt,Ot,bn,ae,ie,be),Q>1&&console.timeEnd("drilling down"),this.tiles[et]?ln(this.tiles[et],Re):null):null}}function cn(je,ae,ie){return 32*((1<<je)*ie+ae)+je}class Qt extends N{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,ie){return c._(this,void 0,void 0,function*(){const be=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ke=this._geoJSONIndex.getTile(be.z,be.x,be.y);if(!ke)return null;const Re=new W(ke.features,{version:2,extent:c.$});let Q=function(nt){const et=new c.cM;return function(Tt,Gt){for(const Ot in Tt.layers)Gt.writeMessage(3,J,Tt.layers[Ot])}(nt,et),et.finish()}(Re);return Q.byteOffset===0&&Q.byteLength===Q.buffer.byteLength||(Q=new Uint8Array(Q)),{vectorTile:Re,rawData:Q.buffer}})}loadData(ae){return c._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const be=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new c.cN(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest);const ke=yield this._pendingData;this._geoJSONIndex=ae.cluster?new st(function({superclusterOptions:Q,clusterProperties:nt}){if(!nt||!Q)return Q;const et={},Tt={},Gt={accumulated:null,zoom:0},Ot={properties:null},bn=Object.keys(nt);for(const Tn of bn){const[dt,Ct]=nt[Tn],Wt=c.cT(Ct),Vt=c.cT(typeof dt=="string"?[dt,["accumulated"],["get",Tn]]:dt);et[Tn]=Wt.value,Tt[Tn]=Vt.value}return Q.map=Tn=>{Ot.properties=Tn;const dt={};for(const Ct of bn)dt[Ct]=et[Ct].evaluate(Gt,Ot);return dt},Q.reduce=(Tn,dt)=>{Ot.properties=dt;for(const Ct of bn)Gt.accumulated=Tn[Ct],Tn[Ct]=Tt[Ct].evaluate(Gt,Ot)},Q}(ae)).load(ke.features):function(Q,nt){return new qt(Q,nt)}(ke,ae.geojsonVtOptions),this.loaded={};const Re={data:ke};if(be){const Q=be.finish();Q&&(Re.resourceTiming={},Re.resourceTiming[ae.source]=JSON.parse(JSON.stringify(Q)))}return Re}catch(ke){if(delete this._pendingRequest,c.cy(ke))return{abandoned:!0};throw ke}})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const ie=this.loaded;return ie&&ie[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,ie){return c._(this,void 0,void 0,function*(){let be=yield this.loadGeoJSON(ae,ie);if(delete this._pendingRequest,typeof be!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if($(be,!0),ae.filter){const ke=c.cT(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ke.result==="error")throw new Error(ke.value.map(Q=>`${Q.key}: ${Q.message}`).join(", "));be={type:"FeatureCollection",features:be.features.filter(Q=>ke.value.evaluate({zoom:0},Q))}}return be})}loadGeoJSON(ae,ie){return c._(this,void 0,void 0,function*(){const{promoteId:be}=ae;if(ae.request){const ke=yield c.j(ae.request,ie);return this._dataUpdateable=c.cV(ke.data,be)?c.cU(ke.data,be):void 0,ke.data}if(typeof ae.data=="string")try{const ke=JSON.parse(ae.data);return this._dataUpdateable=c.cV(ke,be)?c.cU(ke,be):void 0,ke}catch(ke){throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return c.cW(this._dataUpdateable,ae.dataDiff,be),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class xt{constructor(ae){this.self=ae,this.actor=new c.J(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ie,be)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=be},this.self.addProtocol=c.cA,this.self.removeProtocol=c.cB,this.self.registerRTLTextPlugin=ie=>{c.cX.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,be)=>this._getDEMWorkerSource(ie,be.source).loadTile(be)),this.actor.registerMessageHandler("RDT",(ie,be)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,be.source).removeTile(be)})),this.actor.registerMessageHandler("GCEZ",(ie,be)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,be.type,be.source).getClusterExpansionZoom(be)})),this.actor.registerMessageHandler("GCC",(ie,be)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,be.type,be.source).getClusterChildren(be)})),this.actor.registerMessageHandler("GCL",(ie,be)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,be.type,be.source).getClusterLeaves(be)})),this.actor.registerMessageHandler("LD",(ie,be)=>this._getWorkerSource(ie,be.type,be.source).loadData(be)),this.actor.registerMessageHandler("GD",(ie,be)=>this._getWorkerSource(ie,be.type,be.source).getData()),this.actor.registerMessageHandler("LT",(ie,be)=>this._getWorkerSource(ie,be.type,be.source).loadTile(be)),this.actor.registerMessageHandler("RT",(ie,be)=>this._getWorkerSource(ie,be.type,be.source).reloadTile(be)),this.actor.registerMessageHandler("AT",(ie,be)=>this._getWorkerSource(ie,be.type,be.source).abortTile(be)),this.actor.registerMessageHandler("RMT",(ie,be)=>this._getWorkerSource(ie,be.type,be.source).removeTile(be)),this.actor.registerMessageHandler("RS",(ie,be)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][be.type]||!this.workerSources[ie][be.type][be.source])return;const ke=this.workerSources[ie][be.type][be.source];delete this.workerSources[ie][be.type][be.source],ke.removeSource!==void 0&&ke.removeSource(be)})),this.actor.registerMessageHandler("RM",ie=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie],this.globalStates.delete(ie)})),this.actor.registerMessageHandler("SR",(ie,be)=>c._(this,void 0,void 0,function*(){this.referrer=be})),this.actor.registerMessageHandler("SRPS",(ie,be)=>this._syncRTLPluginState(ie,be)),this.actor.registerMessageHandler("IS",(ie,be)=>c._(this,void 0,void 0,function*(){this.self.importScripts(be)})),this.actor.registerMessageHandler("SI",(ie,be)=>this._setImages(ie,be)),this.actor.registerMessageHandler("UL",(ie,be)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(be.layers,be.removedIds,this._getGlobalState(ie))})),this.actor.registerMessageHandler("UGS",(ie,be)=>c._(this,void 0,void 0,function*(){const ke=this._getGlobalState(ie);for(const Re in be)ke[Re]=be[Re]})),this.actor.registerMessageHandler("SL",(ie,be)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(be,this._getGlobalState(ie))}))}_getGlobalState(ae){let ie=this.globalStates.get(ae);return ie||(ie={},this.globalStates.set(ae,ie)),ie}_setImages(ae,ie){return c._(this,void 0,void 0,function*(){this.availableImages[ae]=ie;for(const be in this.workerSources[ae]){const ke=this.workerSources[ae][be];for(const Re in ke)ke[Re].availableImages=ie}})}_syncRTLPluginState(ae,ie){return c._(this,void 0,void 0,function*(){return yield c.cX.syncState(ie,this.self.importScripts)})}_getAvailableImages(ae){let ie=this.availableImages[ae];return ie||(ie=[]),ie}_getLayerIndex(ae){let ie=this.layerIndexes[ae];return ie||(ie=this.layerIndexes[ae]=new a),ie}_getWorkerSource(ae,ie,be){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][ie]||(this.workerSources[ae][ie]={}),!this.workerSources[ae][ie][be]){const ke={sendAsync:(Re,Q)=>(Re.targetMapId=ae,this.actor.sendAsync(Re,Q))};switch(ie){case"vector":this.workerSources[ae][ie][be]=new N(ke,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][ie][be]=new Qt(ke,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][ie][be]=new this.externalWorkerSourceTypes[ie](ke,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][ie][be]}_getDEMWorkerSource(ae,ie){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][ie]||(this.demWorkerSources[ae][ie]=new A),this.demWorkerSources[ae][ie]}}return c.i(self)&&(self.worker=new xt(self)),xt}),o("index",["exports","./shared"],function(c,a){var g="5.9.0";function _(){var j=new a.A(4);return a.A!=Float32Array&&(j[1]=0,j[2]=0),j[0]=1,j[3]=1,j}let S,N;const A={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(j,s,p){const x=requestAnimationFrame(T=>{w(),s(T)}),{unsubscribe:w}=a.s(j.signal,"abort",()=>{w(),cancelAnimationFrame(x),p(a.c())},!1)},frameAsync(j){return new Promise((s,p)=>{this.frame(j,s,p)})},getImageData(j,s=0){return this.getImageCanvasContext(j).getImageData(-s,-s,j.width+2*s,j.height+2*s)},getImageCanvasContext(j){const s=window.document.createElement("canvas"),p=s.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return s.width=j.width,s.height=j.height,p.drawImage(j,0,0,j.width,j.height),p},resolveURL:j=>(S||(S=document.createElement("a")),S.href=j,S.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(N==null&&(N=matchMedia("(prefers-reduced-motion: reduce)")),N.matches)}};class E{static testProp(s){if(!E.docStyle)return s[0];for(let p=0;p<s.length;p++)if(s[p]in E.docStyle)return s[p];return s[0]}static create(s,p,x){const w=window.document.createElement(s);return p!==void 0&&(w.className=p),x&&x.appendChild(w),w}static createNS(s,p){return window.document.createElementNS(s,p)}static disableDrag(){E.docStyle&&E.selectProp&&(E.userSelect=E.docStyle[E.selectProp],E.docStyle[E.selectProp]="none")}static enableDrag(){E.docStyle&&E.selectProp&&(E.docStyle[E.selectProp]=E.userSelect)}static setTransform(s,p){s.style[E.transformProp]=p}static addEventListener(s,p,x,w={}){s.addEventListener(p,x,"passive"in w?w:w.capture)}static removeEventListener(s,p,x,w={}){s.removeEventListener(p,x,"passive"in w?w:w.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",E.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",E.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",E.suppressClickInternal,!0)},0)}static getScale(s){const p=s.getBoundingClientRect();return{x:p.width/s.offsetWidth||1,y:p.height/s.offsetHeight||1,boundingClientRect:p}}static getPoint(s,p,x){const w=p.boundingClientRect;return new a.P((x.clientX-w.left)/p.x-s.clientLeft,(x.clientY-w.top)/p.y-s.clientTop)}static mousePos(s,p){const x=E.getScale(s);return E.getPoint(s,x,p)}static touchPos(s,p){const x=[],w=E.getScale(s);for(let T=0;T<p.length;T++)x.push(E.getPoint(s,w,p[T]));return x}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const p=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),x=p.querySelectorAll("script");for(const w of x)w.remove();return E.clean(p),p.innerHTML}static isPossiblyDangerous(s,p){const x=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!x.includes("javascript:")&&!x.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const p=s.children;for(const x of p)E.removeAttributes(x),E.clean(x)}static removeAttributes(s){for(const{name:p,value:x}of s.attributes)E.isPossiblyDangerous(p,x)&&s.removeAttribute(p)}}E.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,E.selectProp=E.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),E.transformProp=E.testProp(["transform","WebkitTransform"]);const D={supported:!1,testSupport:function(j){!G&&$&&(W?J(j):B=j)}};let B,$,G=!1,W=!1;function J(j){const s=j.createTexture();j.bindTexture(j.TEXTURE_2D,s);try{if(j.texImage2D(j.TEXTURE_2D,0,j.RGBA,j.RGBA,j.UNSIGNED_BYTE,$),j.isContextLost())return;D.supported=!0}catch(p){}j.deleteTexture(s),G=!0}var Z;typeof document!="undefined"&&($=document.createElement("img"),$.onload=()=>{B&&J(B),B=null,W=!0},$.onerror=()=>{G=!0,B=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(j){let s,p,x,w;j.resetRequestQueue=()=>{s=[],p=0,x=0,w={}},j.addThrottleControl=F=>{const q=x++;return w[q]=F,q},j.removeThrottleControl=F=>{delete w[F],P()},j.getImage=(F,q,Y=!0)=>new Promise((ne,ee)=>{D.supported&&(F.headers||(F.headers={}),F.headers.accept="image/webp,*/*"),a.e(F,{type:"image"}),s.push({abortController:q,requestParameters:F,supportImageRefresh:Y,state:"queued",onError:ue=>{ee(ue)},onSuccess:ue=>{ne(ue)}}),P()});const T=F=>a._(this,void 0,void 0,function*(){F.state="running";const{requestParameters:q,supportImageRefresh:Y,onError:ne,onSuccess:ee,abortController:ue}=F,ye=Y===!1&&!a.i(self)&&!a.g(q.url)&&(!q.headers||Object.keys(q.headers).reduce((Ee,Ie)=>Ee&&Ie==="accept",!0));p++;const Te=ye?O(q,ue):a.m(q,ue);try{const Ee=yield Te;delete F.abortController,F.state="completed",Ee.data instanceof HTMLImageElement||a.b(Ee.data)?ee(Ee):Ee.data&&ee({data:yield(Ce=Ee.data,typeof createImageBitmap=="function"?a.f(Ce):a.h(Ce)),cacheControl:Ee.cacheControl,expires:Ee.expires})}catch(Ee){delete F.abortController,ne(Ee)}finally{p--,P()}var Ce}),P=()=>{const F=(()=>{for(const q of Object.keys(w))if(w[q]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let q=p;q<F&&s.length>0;q++){const Y=s.shift();Y.abortController.signal.aborted?q--:T(Y)}},O=(F,q)=>new Promise((Y,ne)=>{const ee=new Image,ue=F.url,ye=F.credentials;ye&&ye==="include"?ee.crossOrigin="use-credentials":(ye&&ye==="same-origin"||!a.d(ue))&&(ee.crossOrigin="anonymous"),q.signal.addEventListener("abort",()=>{ee.src="",ne(a.c())}),ee.fetchPriority="high",ee.onload=()=>{ee.onerror=ee.onload=null,Y({data:ee})},ee.onerror=()=>{ee.onerror=ee.onload=null,q.signal.aborted||ne(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ee.src=ue})}(Z||(Z={})),Z.resetRequestQueue();class K{constructor(s){this._transformRequestFn=s!=null?s:null}transformRequest(s,p){return this._transformRequestFn&&this._transformRequestFn(s,p)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function le(j){const s=[];if(typeof j=="string")s.push({id:"default",url:j});else if(j&&j.length>0){const p=[];for(const{id:x,url:w}of j){const T=`${x}${w}`;p.indexOf(T)===-1&&(p.push(T),s.push({id:x,url:w}))}}return s}function _e(j,s,p){try{const x=new URL(j);return x.pathname+=`${s}${p}`,x.toString()}catch(x){throw new Error(`Invalid sprite URL "${j}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function de(j){const{userImage:s}=j;return!!(s&&s.render&&s.render())&&(j.data.replace(new Uint8Array(s.data.buffer)),!0)}class pe extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:p,promiseResolve:x}of this.requestors)x(this._getImagesForIds(p));this.requestors=[]}}getImage(s){const p=this.images[s];if(p&&!p.data&&p.spriteData){const x=p.spriteData;p.data=new a.R({width:x.width,height:x.height},x.context.getImageData(x.x,x.y,x.width,x.height).data),p.spriteData=null}return p}addImage(s,p){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,p)&&(this.images[s]=p)}_validate(s,p){let x=!0;const w=p.data||p.spriteData;return this._validateStretch(p.stretchX,w&&w.width)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchX" value`))),x=!1),this._validateStretch(p.stretchY,w&&w.height)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchY" value`))),x=!1),this._validateContent(p.content,p)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "content" value`))),x=!1),x}_validateStretch(s,p){if(!s)return!0;let x=0;for(const w of s){if(w[0]<x||w[1]<w[0]||p<w[1])return!1;x=w[1]}return!0}_validateContent(s,p){if(!s)return!0;if(s.length!==4)return!1;const x=p.spriteData,w=x&&x.width||p.data.width,T=x&&x.height||p.data.height;return!(s[0]<0||w<s[0]||s[1]<0||T<s[1]||s[2]<0||w<s[2]||s[3]<0||T<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,p,x=!0){const w=this.getImage(s);if(x&&(w.data.width!==p.data.width||w.data.height!==p.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=w.version+1,this.images[s]=p,this.updatedImages[s]=!0}removeImage(s){const p=this.images[s];delete this.images[s],delete this.patterns[s],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((p,x)=>{let w=!0;if(!this.isLoaded())for(const T of s)this.images[T]||(w=!1);this.isLoaded()||w?p(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:p})})}_getImagesForIds(s){const p={};for(const x of s){let w=this.getImage(x);w||(this.fire(new a.l("styleimagemissing",{id:x})),w=this.getImage(x)),w?p[x]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,textFitWidth:w.textFitWidth,textFitHeight:w.textFitHeight,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:a.w(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:s,height:p}=this.atlasImage;return{width:s,height:p}}getPattern(s){const p=this.patterns[s],x=this.getImage(s);if(!x)return null;if(p&&p.position.version===x.version)return p.position;if(p)p.position.version=x.version;else{const w={w:x.data.width+2,h:x.data.height+2,x:0,y:0},T=new a.I(w,x);this.patterns[s]={bin:w,position:T}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const p=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(s,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const T in this.patterns)s.push(this.patterns[T].bin);const{w:p,h:x}=a.p(s),w=this.atlasImage;w.resize({width:p||1,height:x||1});for(const T in this.patterns){const{bin:P}=this.patterns[T],O=P.x+1,F=P.y+1,q=this.getImage(T).data,Y=q.width,ne=q.height;a.R.copy(q,w,{x:0,y:0},{x:O,y:F},{width:Y,height:ne}),a.R.copy(q,w,{x:0,y:ne-1},{x:O,y:F-1},{width:Y,height:1}),a.R.copy(q,w,{x:0,y:0},{x:O,y:F+ne},{width:Y,height:1}),a.R.copy(q,w,{x:Y-1,y:0},{x:O-1,y:F},{width:1,height:ne}),a.R.copy(q,w,{x:0,y:0},{x:O+Y,y:F},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const p of s){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const x=this.getImage(p);x||a.w(`Image with ID: "${p}" was not found`),de(x)&&this.updateImage(p,x)}}}const Oe=1e20;function He(j,s,p,x,w,T,P,O,F){for(let q=s;q<s+x;q++)We(j,p*T+q,T,w,P,O,F);for(let q=p;q<p+w;q++)We(j,q*T+s,1,x,P,O,F)}function We(j,s,p,x,w,T,P){T[0]=0,P[0]=-1e20,P[1]=Oe,w[0]=j[s];for(let O=1,F=0,q=0;O<x;O++){w[O]=j[s+O*p];const Y=O*O;do{const ne=T[F];q=(w[O]-w[ne]+Y-ne*ne)/(O-ne)/2}while(q<=P[F]&&--F>-1);F++,T[F]=O,P[F]=q,P[F+1]=Oe}for(let O=0,F=0;O<x;O++){for(;P[F+1]<O;)F++;const q=T[F],Y=O-q;j[s+O*p]=w[q]+Y*Y}}class st{constructor(s,p,x){this.requestManager=s,this.localIdeographFontFamily=p,this.entries={},this.lang=x}setURL(s){this.url=s}getGlyphs(s){return a._(this,void 0,void 0,function*(){const p=[];for(const T in s)for(const P of s[T])p.push(this._getAndCacheGlyphsPromise(T,P));const x=yield Promise.all(p),w={};for(const{stack:T,id:P,glyph:O}of x)w[T]||(w[T]={}),w[T][P]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return w})}_getAndCacheGlyphsPromise(s,p){return a._(this,void 0,void 0,function*(){let x=this.entries[s];x||(x=this.entries[s]={glyphs:{},requests:{},ranges:{}});let w=x.glyphs[p];if(w!==void 0)return{stack:s,id:p,glyph:w};if(w=this._tinySDF(x,s,p),w)return x.glyphs[p]=w,{stack:s,id:p,glyph:w};const T=Math.floor(p/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(x.ranges[T])return{stack:s,id:p,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!x.requests[T]){const O=st.loadGlyphRange(s,T,this.url,this.requestManager);x.requests[T]=O}const P=yield x.requests[T];for(const O in P)this._doesCharSupportLocalGlyph(+O)||(x.glyphs[+O]=P[+O]);return x.ranges[T]=!0,{stack:s,id:p,glyph:P[p]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||a.u["CJK Unified Ideographs"](s)||a.u["Hangul Syllables"](s)||a.u.Hiragana(s)||a.u.Katakana(s)||a.u["CJK Symbols and Punctuation"](s)||a.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,p,x){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(x))return;let T=s.tinySDF;if(!T){let O="400";/bold/i.test(p)?O="900":/medium/i.test(p)?O="500":/light/i.test(p)&&(O="200"),T=s.tinySDF=new st.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:w,fontWeight:O})}const P=T.draw(String.fromCharCode(x));return{id:x,bitmap:new a.q({width:P.width||60,height:P.height||60},P.data),metrics:{width:P.glyphWidth/2||24,height:P.glyphHeight/2||24,left:P.glyphLeft/2+.5||0,top:P.glyphTop/2-27.5||-8,advance:P.glyphAdvance/2||24,isDoubleResolution:!0}}}}st.loadGlyphRange=function(j,s,p,x){return a._(this,void 0,void 0,function*(){const w=256*s,T=w+255,P=x.transformRequest(p.replace("{fontstack}",j).replace("{range}",`${w}-${T}`),"Glyphs"),O=yield a.n(P,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${s}, ${w}-${T}`);const F={};for(const q of a.o(O.data))F[q.id]=q;return F})},st.TinySDF=class{constructor({fontSize:j=24,buffer:s=3,radius:p=8,cutoff:x=.25,fontFamily:w="sans-serif",fontWeight:T="normal",fontStyle:P="normal",lang:O=null}={}){this.buffer=s,this.cutoff=x,this.radius=p,this.lang=O;const F=this.size=j+4*s,q=this._createCanvas(F),Y=this.ctx=q.getContext("2d",{willReadFrequently:!0});Y.font=`${P} ${T} ${j}px ${w}`,Y.textBaseline="alphabetic",Y.textAlign="left",Y.fillStyle="black",this.gridOuter=new Float64Array(F*F),this.gridInner=new Float64Array(F*F),this.f=new Float64Array(F),this.z=new Float64Array(F+1),this.v=new Uint16Array(F)}_createCanvas(j){const s=document.createElement("canvas");return s.width=s.height=j,s}draw(j){const{width:s,actualBoundingBoxAscent:p,actualBoundingBoxDescent:x,actualBoundingBoxLeft:w,actualBoundingBoxRight:T}=this.ctx.measureText(j),P=Math.ceil(p),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-w))),F=Math.min(this.size-this.buffer,P+Math.ceil(x)),q=O+2*this.buffer,Y=F+2*this.buffer,ne=Math.max(q*Y,0),ee=new Uint8ClampedArray(ne),ue={data:ee,width:q,height:Y,glyphWidth:O,glyphHeight:F,glyphTop:P,glyphLeft:0,glyphAdvance:s};if(O===0||F===0)return ue;const{ctx:ye,buffer:Te,gridInner:Ce,gridOuter:Ee}=this;this.lang&&(ye.lang=this.lang),ye.clearRect(Te,Te,O,F),ye.fillText(j,Te,Te+P);const Ie=ye.getImageData(Te,Te,O,F);Ee.fill(Oe,0,ne),Ce.fill(0,0,ne);for(let Be=0;Be<F;Be++)for(let Le=0;Le<O;Le++){const qe=Ie.data[4*(Be*O+Le)+3]/255;if(qe===0)continue;const Ke=(Be+Te)*q+Le+Te;if(qe===1)Ee[Ke]=0,Ce[Ke]=Oe;else{const Fe=.5-qe;Ee[Ke]=Fe>0?Fe*Fe:0,Ce[Ke]=Fe<0?Fe*Fe:0}}He(Ee,0,0,q,Y,q,this.f,this.v,this.z),He(Ce,Te,Te,O,F,q,this.f,this.v,this.z);for(let Be=0;Be<ne;Be++){const Le=Math.sqrt(Ee[Be])-Math.sqrt(Ce[Be]);ee[Be]=Math.round(255-255*(Le/this.radius+this.cutoff))}return ue}};class At{constructor(){this.specification=a.v.light.position}possiblyEvaluate(s,p){return a.B(s.expression.evaluate(p))}interpolate(s,p,x){return{x:a.C.number(s.x,p.x,x),y:a.C.number(s.y,p.y,x),z:a.C.number(s.z,p.z,x)}}}let vt;class ze extends a.E{constructor(s){super(),vt=vt||new a.r({anchor:new a.D(a.v.light.anchor),position:new At,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(vt,void 0),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,p={}){if(!this._validate(a.x,s,p))for(const x in s){const w=s[x];x.endsWith("-transition")?this._transitionable.setTransition(x.slice(0,-11),w):this._transitionable.setValue(x,w)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,p,x){return(!x||x.validate!==!1)&&a.y(this,s.call(a.z,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Qe=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Je extends a.E{constructor(s){super(),this._transitionable=new a.t(Qe,void 0),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(s,p={}){if(!this._validate(a.G,s,p)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const x in s){const w=s[x];x.endsWith("-transition")?this._transitionable.setTransition(x.slice(0,-11),w):this._transitionable.setValue(x,w)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,p,x={}){return(x==null?void 0:x.validate)!==!1&&a.y(this,s.call(a.z,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Pt{constructor(s,p){this.width=s,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,p){const x=s.join(",")+String(p);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(s,p)),this.dashEntry[x]}getDashRanges(s,p,x){const w=[];let T=s.length%2==1?-s[s.length-1]*x:0,P=s[0]*x,O=!0;w.push({left:T,right:P,isDash:O,zeroLength:s[0]===0});let F=s[0];for(let q=1;q<s.length;q++){O=!O;const Y=s[q];T=F*x,F+=Y,P=F*x,w.push({left:T,right:P,isDash:O,zeroLength:Y===0})}return w}addRoundDash(s,p,x){const w=p/2;for(let T=-x;T<=x;T++){const P=this.width*(this.nextRow+x+T);let O=0,F=s[O];for(let q=0;q<this.width;q++){q/F.right>1&&(F=s[++O]);const Y=Math.abs(q-F.left),ne=Math.abs(q-F.right),ee=Math.min(Y,ne);let ue;const ye=T/x*(w+1);if(F.isDash){const Te=w-Math.abs(ye);ue=Math.sqrt(ee*ee+Te*Te)}else ue=w-Math.sqrt(ee*ee+ye*ye);this.data[P+q]=Math.max(0,Math.min(255,ue+128))}}}addRegularDash(s){for(let O=s.length-1;O>=0;--O){const F=s[O],q=s[O+1];F.zeroLength?s.splice(O,1):q&&q.isDash===F.isDash&&(q.left=F.left,s.splice(O,1))}const p=s[0],x=s[s.length-1];p.isDash===x.isDash&&(p.left=x.left-this.width,x.right=p.right+this.width);const w=this.width*this.nextRow;let T=0,P=s[T];for(let O=0;O<this.width;O++){O/P.right>1&&(P=s[++T]);const F=Math.abs(O-P.left),q=Math.abs(O-P.right),Y=Math.min(F,q);this.data[w+O]=Math.max(0,Math.min(255,(P.isDash?Y:-Y)+128))}}addDash(s,p){const x=p?7:0,w=2*x+1;if(this.nextRow+w>this.height)return a.w("LineAtlas out of space"),null;let T=0;for(let O=0;O<s.length;O++)T+=s[O];if(T!==0){const O=this.width/T,F=this.getDashRanges(s,this.width,O);p?this.addRoundDash(F,O,x):this.addRegularDash(F)}const P={y:this.nextRow+x,height:2*x,width:T};return this.nextRow+=w,this.dirty=!0,P}bind(s){const p=s.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const fe="maplibre_preloaded_worker_pool";class Xe{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Xe.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[fe]}numActive(){return Object.keys(this.active).length}}const tt=Math.floor(A.hardwareConcurrency/2);let Ae,ot;function ct(){return Ae||(Ae=new Xe),Ae}Xe.workerCount=a.H(globalThis)?Math.max(Math.min(tt,3),1):1;class ut{constructor(s,p){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=p;const x=this.workerPool.acquire(p);for(let w=0;w<x.length;w++){const T=new a.J(x[w],p);T.name=`Worker ${w}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,p){const x=[];for(const w of this.actors)x.push(w.sendAsync({type:s,data:p}));return Promise.all(x)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,p){for(const x of this.actors)x.registerMessageHandler(s,p)}}function tn(){return ot||(ot=new ut(ct(),a.K),ot.registerMessageHandler("GR",(j,s,p)=>a.m(s,p))),ot}function Ge(j,s){const p=a.L();return a.M(p,p,[1,1,0]),a.N(p,p,[.5*j.width,.5*j.height,1]),j.calculatePosMatrix?a.O(p,p,j.calculatePosMatrix(s.toUnwrapped())):p}function Ye(j,s,p,x,w,T,P){var O;const F=function(ee,ue,ye){if(ee)for(const Te of ee){const Ce=ue[Te];if(Ce&&Ce.source===ye&&Ce.type==="fill-extrusion")return!0}else for(const Te in ue){const Ce=ue[Te];if(Ce.source===ye&&Ce.type==="fill-extrusion")return!0}return!1}((O=w==null?void 0:w.layers)!==null&&O!==void 0?O:null,s,j.id),q=T.maxPitchScaleFactor(),Y=j.tilesIn(x,q,F);Y.sort(zt);const ne=[];for(const ee of Y)ne.push({wrappedTileID:ee.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(s,p,j._state,ee.queryGeometry,ee.cameraQueryGeometry,ee.scale,w,T,q,Ge(j.transform,ee.tileID),P?(ue,ye)=>P(ee.tileID,ue,ye):void 0)});return function(ee,ue){for(const ye in ee)for(const Te of ee[ye])Bt(Te,ue);return ee}(function(ee){const ue={},ye={};for(const Te of ee){const Ce=Te.queryResults,Ee=Te.wrappedTileID,Ie=ye[Ee]=ye[Ee]||{};for(const Be in Ce){const Le=Ce[Be],qe=Ie[Be]=Ie[Be]||{},Ke=ue[Be]=ue[Be]||[];for(const Fe of Le)qe[Fe.featureIndex]||(qe[Fe.featureIndex]=!0,Ke.push(Fe))}}return ue}(ne),j)}function zt(j,s){const p=j.tileID,x=s.tileID;return p.overscaledZ-x.overscaledZ||p.canonical.y-x.canonical.y||p.wrap-x.wrap||p.canonical.x-x.canonical.x}function Bt(j,s){const p=j.feature,x=s.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=x}function It(j,s,p){return a._(this,void 0,void 0,function*(){let x=j;if(j.url?x=(yield a.j(s.transformRequest(j.url,"Source"),p)).data:yield A.frameAsync(p),!x)return null;const w=a.Q(a.e(x,j),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in x&&x.vector_layers&&(w.vectorLayerIds=x.vector_layers.map(T=>T.id)),w})}class Lt{constructor(s,p){s&&(p?this.setSouthWest(s).setNorthEast(p):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}extend(s){const p=this._sw,x=this._ne;let w,T;if(s instanceof a.S)w=s,T=s;else{if(!(s instanceof Lt))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Lt.convert(s)):this.extend(a.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(a.S.convert(s)):this;if(w=s._sw,T=s._ne,!w||!T)return this}return p||x?(p.lng=Math.min(w.lng,p.lng),p.lat=Math.min(w.lat,p.lat),x.lng=Math.max(T.lng,x.lng),x.lat=Math.max(T.lat,x.lat)):(this._sw=new a.S(w.lng,w.lat),this._ne=new a.S(T.lng,T.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:p,lat:x}=a.S.convert(s);let w=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&w}static convert(s){return s instanceof Lt?s:s&&new Lt(s)}static fromLngLat(s,p=0){const x=360*p/40075017,w=x/Math.cos(Math.PI/180*s.lat);return new Lt(new a.S(s.lng-w,s.lat-x),new a.S(s.lng+w,s.lat+x))}adjustAntiMeridian(){const s=new a.S(this._sw.lng,this._sw.lat),p=new a.S(this._ne.lng,this._ne.lat);return new Lt(s,s.lng>p.lng?new a.S(p.lng+360,p.lat):p)}}class nn{constructor(s,p,x){this.bounds=Lt.convert(this.validateBounds(s)),this.minzoom=p||0,this.maxzoom=x||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const p=Math.pow(2,s.z),x=Math.floor(a.V(this.bounds.getWest())*p),w=Math.floor(a.U(this.bounds.getNorth())*p),T=Math.ceil(a.V(this.bounds.getEast())*p),P=Math.ceil(a.U(this.bounds.getSouth())*p);return s.x>=x&&s.x<T&&s.y>=w&&s.y<P}}class _n extends a.E{constructor(s,p,x,w){if(super(),this.id=s,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(a.e(this,s),s.bounds&&(this.tileBounds=new nn(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(s){return a._(this,void 0,void 0,function*(){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x={request:this.map._requestManager.transformRequest(p,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};x.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((T,P)=>{s.reloadPromise={resolve:T,reject:P}})}else s.actor=this.dispatcher.getActor(),w="LT";s.abortController=new AbortController;try{const T=yield s.actor.sendAsync({type:w,data:x},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,T)}catch(T){if(delete s.abortController,s.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,p){if(p&&p.resourceTiming&&(s.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&s.setExpiryData(p),s.loadVectorData(p,this.map.painter),s.reloadPromise){const x=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(x.resolve).catch(x.reject)}}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Xn extends a.E{constructor(s,p,x,w){super(),this.id=s,this.dispatcher=x,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.Q(p,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(s=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(a.e(this,p),p.bounds&&(this.tileBounds=new nn(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(p){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(p))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return a.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return a._(this,void 0,void 0,function*(){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const x=yield Z.getImage(this.map._requestManager.transformRequest(p,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(x&&x.data){this.map._refreshExpiredTiles&&(x.cacheControl||x.expires)&&s.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});const w=this.map.painter.context,T=w.gl,P=x.data;s.texture=this.map.painter.getTileTexture(P.width),s.texture?s.texture.update(P,{useMipmap:!0}):(s.texture=new a.T(w,P,T.RGBA,{useMipmap:!0}),s.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(x){if(delete s.abortController,s.aborted)s.state="unloaded";else if(x)throw s.state="errored",x}})}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class Gn extends Xn{constructor(s,p,x,w){super(s,p,x,w),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(s){return a._(this,void 0,void 0,function*(){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x=this.map._requestManager.transformRequest(p,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const w=yield Z.getImage(x,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(w&&w.data){const T=w.data;this.map._refreshExpiredTiles&&(w.cacheControl||w.expires)&&s.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const P=a.b(T)&&a.W()?T:yield this.readImageNow(T),O={type:this.type,uid:s.uid,source:this.id,rawImageData:P,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const F=yield s.actor.sendAsync({type:"LDT",data:O});s.dem=F,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(w){if(delete s.abortController,s.aborted)s.state="unloaded";else if(w)throw s.state="errored",w}})}readImageNow(s){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&a.X()){const p=s.width+2,x=s.height+2;try{return new a.R({width:p,height:x},yield a.Y(s,-1,-1,p,x))}catch(w){}}return A.getImageData(s,1)})}_getNeighboringTiles(s){const p=s.canonical,x=Math.pow(2,p.z),w=(p.x-1+x)%x,T=p.x===0?s.wrap-1:s.wrap,P=(p.x+1+x)%x,O=p.x+1===x?s.wrap+1:s.wrap,F={};return F[new a.Z(s.overscaledZ,T,p.z,w,p.y).key]={backfilled:!1},F[new a.Z(s.overscaledZ,O,p.z,P,p.y).key]={backfilled:!1},p.y>0&&(F[new a.Z(s.overscaledZ,T,p.z,w,p.y-1).key]={backfilled:!1},F[new a.Z(s.overscaledZ,s.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},F[new a.Z(s.overscaledZ,O,p.z,P,p.y-1).key]={backfilled:!1}),p.y+1<x&&(F[new a.Z(s.overscaledZ,T,p.z,w,p.y+1).key]={backfilled:!1},F[new a.Z(s.overscaledZ,s.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},F[new a.Z(s.overscaledZ,O,p.z,P,p.y+1).key]={backfilled:!1}),F}unloadTile(s){return a._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class gn extends a.E{constructor(s,p,x,w){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:p.data},this.actor=x.getActor(),this.setEventedParent(w),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(p.clusterMaxZoom),minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(a.$/this.tileSize)}_getClusterMaxZoom(s){const p=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${p}"`),p}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._pendingWorkerUpdate={data:s},this._updateWorkerData(),this}updateData(s){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,s),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,function*(){const s=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map(p=>p.coordinates).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const s=new Lt,p=yield this.getData();let x;switch(p.type){case"FeatureCollection":x=p.features.map(w=>this.getCoordinatesFromGeometry(w.geometry)).flat(1/0);break;case"Feature":x=this.getCoordinatesFromGeometry(p.geometry);break;default:x=this.getCoordinatesFromGeometry(p)}if(x.length==0)return s;for(let w=0;w<x.length-1;w+=2)s.extend([x[w],x[w+1]]);return s})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,p,x){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:p,offset:x}})}_updateWorkerData(){return a._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:s,diff:p}=this._pendingWorkerUpdate;if(!s&&!p)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const x=a.e({type:this.type},this.workerOptions);s?(typeof s=="string"?(x.request=this.map._requestManager.transformRequest(A.resolveURL(s),"Source"),x.request.collectResourceTiming=this._collectResourceTiming):x.data=JSON.stringify(s),this._pendingWorkerUpdate.data=void 0):p&&(x.dataDiff=p,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const w=yield this.actor.sendAsync({type:"LD",data:x});if(this._isUpdatingWorker=!1,this._removed||w.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=w.data;let T=null;w.resourceTiming&&w.resourceTiming[this.id]&&(T=w.resourceTiming[this.id].slice(0));const P={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&a.e(P,{resourceTiming:T}),this.fire(new a.l("data",Object.assign(Object.assign({},P),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},P),{sourceDataType:"content"})))}catch(w){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(w))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(s){return a._(this,void 0,void 0,function*(){const p=s.actor?"RT":"LT";s.actor=this.actor;const x={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};s.abortController=new AbortController;const w=yield this.actor.sendAsync({type:p,data:x},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(w,this.map.painter,p==="RT")})}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ln extends a.E{constructor(s,p,x,w){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=x,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=p}load(s){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield Z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,s&&(this.coordinates=s),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new a.k(p))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const p=s.map(a.a1.fromLngLat);var x;return this.tileID=function(w){const T=a.a2.fromPoints(w),P=T.width(),O=T.height(),F=Math.max(P,O),q=Math.max(0,Math.floor(-Math.log(F)/Math.LN2)),Y=Math.pow(2,q);return new a.a4(q,Math.floor((T.minX+T.maxX)/2*Y),Math.floor((T.minY+T.maxY)/2*Y))}(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map(w=>this.tileID.getTilePoint(w)._round()),this.flippedWindingOrder=((x=this.tileCoords)[1].x-x[0].x)*(x[2].y-x[0].y)-(x[1].y-x[0].y)*(x[2].x-x[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,p=s.gl;this.texture||(this.texture=new a.T(s,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let x=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,x=!0)}x&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){const{minX:p,minY:x,maxX:w,maxY:T}=a.a2.fromPoints(s),P={};for(let O=0;O<=a.a3;O++){const F=Math.pow(2,O),q=Math.floor(p*F),Y=Math.floor(x*F),ne=Math.floor(w*F),ee=Math.floor(T*F);P[O]={minTileX:q,minTileY:Y,maxTileX:ne,maxTileY:ee}}return P}}class Ue extends ln{constructor(s,p,x,w){super(s,p,x,w),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const p of s.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.a5(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.k(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const p=this.video.seekable;s<p.start(0)||s>p.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,p=s.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(s,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let x=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,x=!0)}x&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ge extends ln{constructor(s,p,x,w){super(s,p,x,w),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(P=>typeof P!="number"))||this.fire(new a.k(new a.a6(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${s}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${s}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,x=p.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(p,this.canvas,x.RGBA,{premultiply:!0});let w=!1;for(const T in this.tiles){const P=this.tiles[T];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,w=!0)}w&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const ve={},ht=j=>{switch(j){case"geojson":return gn;case"image":return ln;case"raster":return Xn;case"raster-dem":return Gn;case"vector":return _n;case"video":return Ue;case"canvas":return ge}return ve[j]},ft="RTLPluginLoaded";class qt extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=tn()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return a._(this,arguments,void 0,function*(p,x=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!x)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(ft))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let cn=null;function Qt(){return cn||(cn=new qt),cn}var xt,je;(function(j){j[j.Base=0]="Base",j[j.Parent=1]="Parent"})(xt||(xt={})),function(j){j[j.Departing=0]="Departing",j[j.Incoming=1]="Incoming"}(je||(je={}));class ae{constructor(s,p){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=s,this.uid=a.a7(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(s){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(s||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:s,fadingDirection:p,fadingParentID:x,fadeEndTime:w}){this.resetFadeLogic(),this.fadingRole=s,this.fadingDirection=p,this.fadingParentID=x,this.fadeEndTime=w}setSelfFadeLogic(s){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=s}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=A.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,p,x){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(w,T){const P={};if(!T)return P;for(const O of w){const F=O.layerIds.map(q=>T.getLayer(q)).filter(Boolean);if(F.length!==0){O.layers=F,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(q=>F.filter(Y=>Y.id===q)[0]));for(const q of F)P[q.id]=O}}return P}(s.buckets,p==null?void 0:p.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const T=this.buckets[w];if(T instanceof a.a9){if(this.hasSymbolBuckets=!0,!x)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const T=this.buckets[w];if(T instanceof a.a9&&T.hasRTLText){this.hasRTLText=!0,Qt().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const T=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(w).queryRadius(T))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage),this.dashPositions=s.dashPositions}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const x in this.buckets){const w=this.buckets[x];w.uploadPending()&&w.upload(s)}const p=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(s,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(s,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,p,x,w,T,P,O,F,q,Y,ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:T,scale:P,tileSize:this.tileSize,pixelPosMatrix:Y,transform:F,params:O,queryPadding:this.queryPadding*q,getElevation:ne},s,p,x):{}}querySourceFeatures(s,p){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const w=x.loadVTLayers(),T=p&&p.sourceLayer?p.sourceLayer:"",P=w._geojsonTileLayer||w[T];if(!P)return;const O=a.aa(p==null?void 0:p.filter,p==null?void 0:p.globalState),{z:F,x:q,y:Y}=this.tileID.canonical,ne={z:F,x:q,y:Y};for(let ee=0;ee<P.length;ee++){const ue=P.feature(ee);if(O.needGeometry){const Ce=a.ab(ue,!0);if(!O.filter(new a.F(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!O.filter(new a.F(this.tileID.overscaledZ),ue))continue;const ye=x.getId(ue,T),Te=new a.ac(ue,F,q,Y,ye);Te.tile=ne,s.push(Te)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const p=this.expirationTime;if(s.cacheControl){const x=a.ad(s.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const x=Date.now();let w=!1;if(this.expirationTime>x)w=!1;else if(p)if(this.expirationTime<p)w=!0;else{const T=this.expirationTime-p;T?this.expirationTime=x+Math.max(T,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const x=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!p.style.hasLayer(w))continue;const T=this.buckets[w],P=T.layers[0].sourceLayer||"_geojsonTileLayer",O=x[P],F=s[P];if(!O||!F||Object.keys(F).length===0)continue;T.update(F,O,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const q=p&&p.style&&p.style.getLayer(w);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(T)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(s){this.symbolFadeHoldUntil=A.now()+s}setDependencies(s,p){const x={};for(const w of p)x[w]=!0;this.dependencies[s]=x}hasDependency(s,p){for(const x of s){const w=this.dependencies[x];if(w){for(const T of p)if(w[T])return!0}}return!1}}class ie{constructor(s,p){this.max=s,this.onRemove=p,this.reset()}reset(){for(const s in this.data)for(const p of this.data[s])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(s,p,x){const w=s.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const T={value:p,timeout:void 0};if(x!==void 0&&(T.timeout=setTimeout(()=>{this.remove(s,T)},x)),this.data[w].push(T),this.order.push(w),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const p=this.data[s].shift();return p.timeout&&clearTimeout(p.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),p.value}getByKey(s){const p=this.data[s];return p?p[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,p){if(!this.has(s))return this;const x=s.wrapped().key,w=p===void 0?0:this.data[x].indexOf(p),T=this.data[x][w];return this.data[x].splice(w,1),T.timeout&&clearTimeout(T.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(T.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(s){const p=[];for(const x in this.data)for(const w of this.data[x])s(w.value)||p.push(w);for(const x of p)this.remove(x.value.tileID,x)}}class be{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,p,x){const w=String(p);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][w]=this.stateChanges[s][w]||{},a.e(this.stateChanges[s][w],x),this.deletedStates[s]===null){this.deletedStates[s]={};for(const T in this.state[s])T!==w&&(this.deletedStates[s][T]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][w]===null){this.deletedStates[s][w]={};for(const T in this.state[s][w])x[T]||(this.deletedStates[s][w][T]=null)}else for(const T in x)this.deletedStates[s]&&this.deletedStates[s][w]&&this.deletedStates[s][w][T]===null&&delete this.deletedStates[s][w][T]}removeFeatureState(s,p,x){if(this.deletedStates[s]===null)return;const w=String(p);if(this.deletedStates[s]=this.deletedStates[s]||{},x&&p!==void 0)this.deletedStates[s][w]!==null&&(this.deletedStates[s][w]=this.deletedStates[s][w]||{},this.deletedStates[s][w][x]=null);else if(p!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][w])for(x in this.deletedStates[s][w]={},this.stateChanges[s][w])this.deletedStates[s][w][x]=null;else this.deletedStates[s][w]=null;else this.deletedStates[s]=null}getState(s,p){const x=String(p),w=a.e({},(this.state[s]||{})[x],(this.stateChanges[s]||{})[x]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const T=this.deletedStates[s][p];if(T===null)return{};for(const P in T)delete w[P]}return w}initializeTileState(s,p){s.setFeatureState(this.state,p)}coalesceChanges(s,p){const x={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const T={};for(const P in this.stateChanges[w])this.state[w][P]||(this.state[w][P]={}),a.e(this.state[w][P],this.stateChanges[w][P]),T[P]=this.state[w][P];x[w]=T}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const T={};if(this.deletedStates[w]===null)for(const P in this.state[w])T[P]={},this.state[w][P]={};else for(const P in this.deletedStates[w]){if(this.deletedStates[w][P]===null)this.state[w][P]={};else for(const O of Object.keys(this.deletedStates[w][P]))delete this.state[w][P][O];T[P]=this.state[w][P]}x[w]=x[w]||{},a.e(x[w],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(x).length!==0)for(const w in s)s[w].setFeatureState(x,p)}}const ke=89.25;function Re(j,s){const p=a.ah(s.lat,-a.ai,a.ai);return new a.P(a.V(s.lng)*j,a.U(p)*j)}function Q(j,s){return new a.a1(s.x/j,s.y/j).toLngLat()}function nt(j){return j.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-j.pitch)),Math.tan(a.ae(ke-j.pitch)))}function et(j,s){const p=j.canonical,x=s/a.af(p.z),w=p.x+Math.pow(2,p.z)*j.wrap,T=a.ag(new Float64Array(16));return a.M(T,T,[w*x,p.y*x,0]),a.N(T,T,[x/a.$,x/a.$,1]),T}function Tt(j,s,p,x,w){const T=a.a1.fromLngLat(j,s),P=w*a.aj(1,j.lat),O=P*Math.cos(a.ae(p)),F=Math.sqrt(P*P-O*O),q=F*Math.sin(a.ae(-x)),Y=F*Math.cos(a.ae(-x));return new a.a1(T.x+q,T.y+Y,T.z+O)}function Gt(j,s,p){const x=s.intersectsFrustum(j);if(!p||x===0)return x;const w=s.intersectsPlane(p);return w===0?0:x===2&&w===2?2:1}function Ot(j,s,p){let x=0;const w=(p-s)/10;for(let T=0;T<10;T++)x+=w*Math.pow(Math.cos(s+(T+.5)/10*(p-s)),j);return x}function bn(j,s){return function(p,x,w,T,P){const O=2*((j-1)/a.ak(Math.cos(a.ae(ke-P))/Math.cos(a.ae(ke)))-1),F=Math.acos(w/T),q=2*Ot(O-1,0,a.ae(P/2)),Y=Math.min(a.ae(ke),F+a.ae(P/2)),ne=Ot(O-1,Math.min(Y,F-a.ae(P/2)),Y),ee=Math.atan(x/w),ue=Math.hypot(x,w);let ye=p;return ye+=a.ak(T/ue/Math.max(.5,Math.cos(a.ae(P/2)))),ye+=O*a.ak(Math.cos(ee))/2,ye-=a.ak(Math.max(1,ne/q/s))/2,ye}}const Tn=bn(9.314,3);function dt(j,s){const p=(s.roundZoom?Math.round:Math.floor)(j.zoom+a.ak(j.tileSize/s.tileSize));return Math.max(0,p)}function Ct(j,s){const p=j.getCameraFrustum(),x=j.getClippingPlane(),w=j.screenPointToMercatorCoordinate(j.getCameraPoint()),T=a.a1.fromLngLat(j.center,j.elevation);w.z=T.z+Math.cos(j.pitchInRadians)*j.cameraToCenterDistance/j.worldSize;const P=j.getCoveringTilesDetailsProvider(),O=P.allowVariableZoom(j,s),F=dt(j,s),q=s.minzoom||0,Y=s.maxzoom!==void 0?s.maxzoom:j.maxZoom,ne=Math.min(Math.max(0,F),Y),ee=Math.pow(2,ne),ue=[ee*w.x,ee*w.y,0],ye=[ee*T.x,ee*T.y,0],Te=Math.hypot(T.x-w.x,T.y-w.y),Ce=Math.abs(T.z-w.z),Ee=Math.hypot(Te,Ce),Ie=qe=>({zoom:0,x:0,y:0,wrap:qe,fullyVisible:!1}),Be=[],Le=[];if(j.renderWorldCopies&&P.allowWorldCopies())for(let qe=1;qe<=3;qe++)Be.push(Ie(-qe)),Be.push(Ie(qe));for(Be.push(Ie(0));Be.length>0;){const qe=Be.pop(),Ke=qe.x,Fe=qe.y;let it=qe.fullyVisible;const Mt={x:Ke,y:Fe,z:qe.zoom},_t=P.getTileBoundingVolume(Mt,qe.wrap,j.elevation,s);if(!it){const an=Gt(p,_t,x);if(an===0)continue;it=an===2}const wt=P.distanceToTile2d(w.x,w.y,Mt,_t);let St=F;O&&(St=(s.calculateTileZoom||Tn)(j.zoom+a.ak(j.tileSize/s.tileSize),wt,Ce,Ee,j.fov)),St=(s.roundZoom?Math.round:Math.floor)(St),St=Math.max(0,St);const rn=Math.min(St,Y);if(qe.wrap=P.getWrap(T,Mt,qe.wrap),qe.zoom>=rn){if(qe.zoom<q)continue;const an=ne-qe.zoom,Yt=ue[0]-.5-(Ke<<an),Mn=ue[1]-.5-(Fe<<an),ni=s.reparseOverscaled?Math.max(qe.zoom,St):qe.zoom;Le.push({tileID:new a.Z(qe.zoom===Y?ni:qe.zoom,qe.wrap,qe.zoom,Ke,Fe),distanceSq:a.al([ye[0]-.5-Ke,ye[1]-.5-Fe]),tileDistanceToCamera:Math.sqrt(Yt*Yt+Mn*Mn)})}else for(let an=0;an<4;an++)Be.push({zoom:qe.zoom+1,x:(Ke<<1)+an%2,y:(Fe<<1)+(an>>1),wrap:qe.wrap,fullyVisible:it})}return Le.sort((qe,Ke)=>qe.distanceSq-Ke.distanceSq).map(qe=>qe.tileID)}const Wt=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Vt extends a.E{constructor(s,p,x){super(),this.id=s,this.dispatcher=x,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,T,P,O)=>{const F=new(ht(T.type))(w,T,P,O);if(F.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${F.id}`);return F})(s,p,x,this),this._tiles={},this._cache=new ie(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new be,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const p=this._tiles[s];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,p,x){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,p,x)}catch(w){s.state="errored",w.status!==404?this._source.fire(new a.k(w,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new a.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const x=this._tiles[p];x.upload(s),x.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(vn).map(s=>s.key)}getRenderableIds(s){const p=[];for(const x in this._tiles)this._isIdRenderable(x,s)&&p.push(this._tiles[x]);return s?p.sort((x,w)=>{const T=x.tileID,P=w.tileID,O=new a.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),F=new a.P(P.canonical.x,P.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-P.overscaledZ||F.y-O.y||F.x-O.x}).map(x=>x.tileID.key):p.map(x=>x.tileID).sort(vn).map(x=>x.key)}hasRenderableParent(s){const p=s.overscaledZ-1;if(p>=this._source.minzoom){const x=this._getLoadedTile(s.scaledTo(p));if(x)return this._isIdRenderable(x.tileID.key)}return!1}_isIdRenderable(s,p=!1){var x;return(x=this._tiles[s])===null||x===void 0?void 0:x.isRenderable(p)}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const p in this._tiles)s?this._reloadTile(p,"expired"):this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")}}_reloadTile(s,p){return a._(this,void 0,void 0,function*(){const x=this._tiles[s];x&&(x.state!=="loading"&&(x.state=p),yield this._loadTile(x,s,p))})}_tileLoaded(s,p,x){s.timeAdded=A.now(),x==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(p,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const p=this.getRenderableIds();for(let w=0;w<p.length;w++){const T=p[w];if(s.neighboringTiles&&s.neighboringTiles[T]){const P=this.getTileByID(T);x(s,P),x(P,s)}}function x(w,T){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let P=T.tileID.canonical.x-w.tileID.canonical.x;const O=T.tileID.canonical.y-w.tileID.canonical.y,F=Math.pow(2,w.tileID.canonical.z),q=T.tileID.key;P===0&&O===0||Math.abs(O)>1||(Math.abs(P)>1&&(Math.abs(P+F)===1?P+=F:Math.abs(P-F)===1&&(P-=F)),T.dem&&w.dem&&(w.dem.backfillBorder(T.dem,P,O),w.neighboringTiles&&w.neighboringTiles[q]&&(w.neighboringTiles[q].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,p){const x=Object.values(s),w=this._getLoadedDescendents(x),T={};for(const P of x){const O=w[P.key];if(!(O!=null&&O.length)){T[P.key]=P;continue}const F=P.overscaledZ+Vt.maxUnderzooming,q=O.filter(ee=>ee.tileID.overscaledZ<=F);if(!q.length){T[P.key]=P;continue}const Y=Math.min(...q.map(ee=>ee.tileID.overscaledZ)),ne=q.filter(ee=>ee.tileID.overscaledZ===Y).map(ee=>ee.tileID);for(const ee of ne)p[ee.key]=ee;this._areDescendentsComplete(ne,Y,P.overscaledZ)||(T[P.key]=P)}return T}_getLoadedDescendents(s){var p;const x={};for(const w in this._tiles){const T=this._tiles[w];if(T.hasData())for(const P of s)T.tileID.isChildOf(P)&&(x[p=P.key]||(x[p]=[])).push(T)}return x}_areDescendentsComplete(s,p,x){return s.length===1&&s[0].isOverscaled()?s[0].overscaledZ===p:Math.pow(4,p-x)===s.length}_getLoadedTile(s){const p=this._tiles[s.key];return p!=null&&p.hasData()?p:null}updateCacheSize(s){const p=Math.ceil(s.width/this._source.tileSize)+1,x=Math.ceil(s.height/this._source.tileSize)+1,w=Math.floor(p*x*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(T)}handleWrapJump(s){const p=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,p){const x={};for(const w in this._tiles){const T=this._tiles[w];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+p),x[T.tileID.key]=T}this._tiles=x;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(s,p){if(!this._sourceLoaded||this._paused)return;let x;this.transform=s,this.terrain=p,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?x=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new a.Z(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(x=Ct(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(x=x.filter(F=>this._source.hasTile(F)))):x=[],this.usedForTerrain&&(x=this._addTerrainIdealTiles(x));const w=x.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,w&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=dt(s,this._source),P=this._updateRetainedTiles(x,T),O=Gi(this._source.type);O&&this._rasterFadeDuration>0&&!p&&this._updateFadingTiles(x,P),O?this._cleanUpRasterTiles(P):this._cleanUpVectorTiles(P)}_cleanUpRasterTiles(s){for(const p in this._tiles)s[p]||this._removeTile(p)}_cleanUpVectorTiles(s){for(const p in this._tiles){const x=this._tiles[p];s[p]?x.clearSymbolFadeHold():x.hasSymbolBuckets?x.holdingForSymbolFade()?x.symbolFadeFinished()&&this._removeTile(p):x.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(p)}}_addTerrainIdealTiles(s){const p=[];for(const x of s)if(x.canonical.z>this._source.minzoom){const w=x.scaledTo(x.canonical.z-1);p.push(w);const T=x.scaledTo(Math.max(this._source.minzoom,Math.min(x.canonical.z,5)));p.push(T)}return s.concat(p)}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForSymbolFade()&&this._removeTile(s)}_updateRetainedTiles(s,p){var x;const w={},T={},P=Math.max(p-Vt.maxOverzooming,this._source.minzoom);let O={};for(const F of s){const q=this._addTile(F);w[F.key]=F,q.hasData()||(O[F.key]=F)}O=this._retainLoadedChildren(O,w);for(const F in O){const q=O[F];let Y=this._tiles[F],ne=Y==null?void 0:Y.wasRequested();for(let ee=q.overscaledZ-1;ee>=P;--ee){const ue=q.scaledTo(ee);if(T[ue.key])break;if(T[ue.key]=!0,Y=this.getTile(ue),!Y&&ne&&(Y=this._addTile(ue)),Y){const ye=Y.hasData();if((ye||!(!((x=this.map)===null||x===void 0)&&x.cancelPendingTileRequestsWhileZooming)||ne)&&(w[ue.key]=ue),ne=Y.wasRequested(),ye)break}}}return w}_updateFadingTiles(s,p){const x=A.now(),w=a.am(s);for(const T of s){const P=this._tiles[T.key];P.fadingDirection!==je.Departing&&P.fadeOpacity!==0||P.resetFadeLogic(),this._updateFadingAncestor(P,p,x)||this._updateFadingDescendents(P,p,x)||this._updateFadingEdge(P,w,x)||P.resetFadeLogic()}}_updateFadingAncestor(s,p,x){if(!s.hasData())return!1;const{tileID:w,fadingRole:T,fadingDirection:P,fadingParentID:O}=s;if(T===xt.Base&&P===je.Incoming&&O)return p[O.key]=O,!0;const F=Math.max(w.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let q=w.overscaledZ-1;q>=F;q--){const Y=w.scaledTo(q),ne=this._getLoadedTile(Y);if(ne)return s.setCrossFadeLogic({fadingRole:xt.Base,fadingDirection:je.Incoming,fadingParentID:ne.tileID,fadeEndTime:x+this._rasterFadeDuration}),ne.setCrossFadeLogic({fadingRole:xt.Parent,fadingDirection:je.Departing,fadeEndTime:x+this._rasterFadeDuration}),p[Y.key]=Y,!0}return!1}_updateFadingDescendents(s,p,x){if(!s.hasData())return!1;const w=s.tileID.children(this._source.maxzoom);let T=this._updateFadingChildren(s,w,p,x);if(T)return!0;for(const P of w){const O=P.children(this._source.maxzoom);this._updateFadingChildren(s,O,p,x)&&(T=!0)}return T}_updateFadingChildren(s,p,x,w){if(p[0].overscaledZ>=this._source.maxzoom)return!1;let T=!1;for(const P of p){const O=this._getLoadedTile(P);if(!O)continue;const{fadingRole:F,fadingDirection:q,fadingParentID:Y}=O;F===xt.Base&&q===je.Departing&&Y||(O.setCrossFadeLogic({fadingRole:xt.Base,fadingDirection:je.Departing,fadingParentID:s.tileID,fadeEndTime:w+this._rasterFadeDuration}),s.setCrossFadeLogic({fadingRole:xt.Parent,fadingDirection:je.Incoming,fadeEndTime:w+this._rasterFadeDuration})),x[P.key]=P,T=!0}return T}_updateFadingEdge(s,p,x){const w=s.tileID;return!!s.selfFading||!s.hasData()&&!!p.has(w)&&(s.setSelfFadeLogic(x+this._rasterFadeDuration),!0)}_addTile(s){let p=this._tiles[s.key];if(p)return p;p=this._cache.getAndRemove(s),p&&(p.resetFadeLogic(),this._setTileReloadTimer(s.key,p),p.tileID=s,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,p)));const x=p;return p||(p=new ae(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(p,s.key,p.state)),p.uses++,this._tiles[s.key]=p,x||this._source.fire(new a.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(s,p){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const x=p.getExpiryTimeout();x&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},x))}refreshTiles(s){for(const p in this._tiles)(this._isIdRenderable(p)||this._tiles[p].state=="errored")&&s.some(x=>x.equals(this._tiles[p].tileID.canonical))&&this._reloadTile(p,"expired")}_removeTile(s){const p=this._tiles[s];p&&(p.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(s){s.dataType==="source"&&(s.sourceDataType!=="metadata"?s.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,p,x){const w=[],T=this.transform;if(!T)return w;const P=T.getCoveringTilesDetailsProvider().allowWorldCopies(),O=x?T.getCameraQueryGeometry(s):s,F=ue=>T.screenPointToMercatorCoordinate(ue,this.terrain),q=this.transformBbox(s,F,!P),Y=this.transformBbox(O,F,!P),ne=this.getIds(),ee=a.a2.fromPoints(Y);for(let ue=0;ue<ne.length;ue++){const ye=this._tiles[ne[ue]];if(ye.holdingForSymbolFade())continue;const Te=P?[ye.tileID]:[ye.tileID.unwrapTo(-1),ye.tileID.unwrapTo(0)],Ce=Math.pow(2,T.zoom-ye.tileID.overscaledZ),Ee=p*ye.queryPadding*a.$/ye.tileSize/Ce;for(const Ie of Te){const Be=ee.map(Le=>Ie.getTilePoint(new a.a1(Le.x,Le.y)));if(Be.expandBy(Ee),Be.intersects(Wt)){const Le=q.map(Ke=>Ie.getTilePoint(Ke)),qe=Y.map(Ke=>Ie.getTilePoint(Ke));w.push({tile:ye,tileID:P?Ie:Ie.unwrapTo(0),queryGeometry:Le,cameraQueryGeometry:qe,scale:Ce})}}}return w}transformBbox(s,p,x){let w=s.map(p);if(x){const T=a.a2.fromPoints(s);T.shrinkBy(.001*Math.min(T.width(),T.height()));const P=T.map(p);a.a2.fromPoints(w).covers(P)||(w=w.map(O=>O.x>.5?new a.a1(O.x-1,O.y,O.z):O))}return w}getVisibleCoordinates(s){const p=this.getRenderableIds(s).map(x=>this._tiles[x].tileID);return this.transform&&this.transform.populateCache(p),p}hasTransition(){if(this._source.hasTransition())return!0;if(Gi(this._source.type)&&this._rasterFadeDuration>0){const s=A.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=s)return!0}return!1}setRasterFadeDuration(s){this._rasterFadeDuration=s}setFeatureState(s,p,x){this._state.updateState(s=s||"_geojsonTileLayer",p,x)}removeFeatureState(s,p,x){this._state.removeFeatureState(s=s||"_geojsonTileLayer",p,x)}getFeatureState(s,p){return this._state.getState(s=s||"_geojsonTileLayer",p)}setDependencies(s,p,x){const w=this._tiles[s];w&&w.setDependencies(p,x)}reloadTilesForDependencies(s,p){for(const x in this._tiles)this._tiles[x].hasDependency(s,p)&&this._reloadTile(x,"reloading");this._cache.filter(x=>!x.hasDependency(s,p))}}function vn(j,s){const p=Math.abs(2*j.wrap)-+(j.wrap<0),x=Math.abs(2*s.wrap)-+(s.wrap<0);return j.overscaledZ-s.overscaledZ||x-p||s.canonical.y-j.canonical.y||s.canonical.x-j.canonical.x}function Gi(j){return j==="raster"||j==="image"||j==="video"}Vt.maxOverzooming=10,Vt.maxUnderzooming=3;class Jn{constructor(s,p){this.reset(s,p)}reset(s,p){this.points=s||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.ah(s,0,1);let p=1,x=this._distances[p];const w=s*this.paddedLength+this.padding;for(;x<w&&p<this._distances.length;)x=this._distances[++p];const T=p-1,P=this._distances[T],O=x-P,F=O>0?(w-P)/O:0;return this.points[T].mult(1-F).add(this.points[p].mult(F))}}function ai(j,s){let p=!0;return j==="always"||j!=="never"&&s!=="never"||(p=!1),p}class Hn{constructor(s,p,x){const w=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(s/x),this.yCellCount=Math.ceil(p/x);for(let P=0;P<this.xCellCount*this.yCellCount;P++)w.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=p,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,p,x,w,T){this._forEachCell(p,x,w,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(p),this.bboxes.push(x),this.bboxes.push(w),this.bboxes.push(T)}insertCircle(s,p,x,w){this._forEachCell(p-w,x-w,p+w,x+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(p),this.circles.push(x),this.circles.push(w)}_insertBoxCell(s,p,x,w,T,P){this.boxCells[T].push(P)}_insertCircleCell(s,p,x,w,T,P){this.circleCells[T].push(P)}_query(s,p,x,w,T,P,O){if(x<0||s>this.width||w<0||p>this.height)return[];const F=[];if(s<=0&&p<=0&&this.width<=x&&this.height<=w){if(T)return[{key:null,x1:s,y1:p,x2:x,y2:w}];for(let q=0;q<this.boxKeys.length;q++)F.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const Y=this.circles[3*q],ne=this.circles[3*q+1],ee=this.circles[3*q+2];F.push({key:this.circleKeys[q],x1:Y-ee,y1:ne-ee,x2:Y+ee,y2:ne+ee})}}else this._forEachCell(s,p,x,w,this._queryCell,F,{hitTest:T,overlapMode:P,seenUids:{box:{},circle:{}}},O);return F}query(s,p,x,w){return this._query(s,p,x,w,!1,null)}hitTest(s,p,x,w,T,P){return this._query(s,p,x,w,!0,T,P).length>0}hitTestCircle(s,p,x,w,T){const P=s-x,O=s+x,F=p-x,q=p+x;if(O<0||P>this.width||q<0||F>this.height)return!1;const Y=[];return this._forEachCell(P,F,O,q,this._queryCellCircle,Y,{hitTest:!0,overlapMode:w,circle:{x:s,y:p,radius:x},seenUids:{box:{},circle:{}}},T),Y.length>0}_queryCell(s,p,x,w,T,P,O,F){const{seenUids:q,hitTest:Y,overlapMode:ne}=O,ee=this.boxCells[T];if(ee!==null){const ye=this.bboxes;for(const Te of ee)if(!q.box[Te]){q.box[Te]=!0;const Ce=4*Te,Ee=this.boxKeys[Te];if(s<=ye[Ce+2]&&p<=ye[Ce+3]&&x>=ye[Ce+0]&&w>=ye[Ce+1]&&(!F||F(Ee))&&(!Y||!ai(ne,Ee.overlapMode))&&(P.push({key:Ee,x1:ye[Ce],y1:ye[Ce+1],x2:ye[Ce+2],y2:ye[Ce+3]}),Y))return!0}}const ue=this.circleCells[T];if(ue!==null){const ye=this.circles;for(const Te of ue)if(!q.circle[Te]){q.circle[Te]=!0;const Ce=3*Te,Ee=this.circleKeys[Te];if(this._circleAndRectCollide(ye[Ce],ye[Ce+1],ye[Ce+2],s,p,x,w)&&(!F||F(Ee))&&(!Y||!ai(ne,Ee.overlapMode))){const Ie=ye[Ce],Be=ye[Ce+1],Le=ye[Ce+2];if(P.push({key:Ee,x1:Ie-Le,y1:Be-Le,x2:Ie+Le,y2:Be+Le}),Y)return!0}}}return!1}_queryCellCircle(s,p,x,w,T,P,O,F){const{circle:q,seenUids:Y,overlapMode:ne}=O,ee=this.boxCells[T];if(ee!==null){const ye=this.bboxes;for(const Te of ee)if(!Y.box[Te]){Y.box[Te]=!0;const Ce=4*Te,Ee=this.boxKeys[Te];if(this._circleAndRectCollide(q.x,q.y,q.radius,ye[Ce+0],ye[Ce+1],ye[Ce+2],ye[Ce+3])&&(!F||F(Ee))&&!ai(ne,Ee.overlapMode))return P.push(!0),!0}}const ue=this.circleCells[T];if(ue!==null){const ye=this.circles;for(const Te of ue)if(!Y.circle[Te]){Y.circle[Te]=!0;const Ce=3*Te,Ee=this.circleKeys[Te];if(this._circlesCollide(ye[Ce],ye[Ce+1],ye[Ce+2],q.x,q.y,q.radius)&&(!F||F(Ee))&&!ai(ne,Ee.overlapMode))return P.push(!0),!0}}}_forEachCell(s,p,x,w,T,P,O,F){const q=this._convertToXCellCoord(s),Y=this._convertToYCellCoord(p),ne=this._convertToXCellCoord(x),ee=this._convertToYCellCoord(w);for(let ue=q;ue<=ne;ue++)for(let ye=Y;ye<=ee;ye++)if(T.call(this,s,p,x,w,this.xCellCount*ye+ue,P,O,F))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,p,x,w,T,P){const O=w-s,F=T-p,q=x+P;return q*q>O*O+F*F}_circleAndRectCollide(s,p,x,w,T,P,O){const F=(P-w)/2,q=Math.abs(s-(w+F));if(q>F+x)return!1;const Y=(O-T)/2,ne=Math.abs(p-(T+Y));if(ne>Y+x)return!1;if(q<=F||ne<=Y)return!0;const ee=q-F,ue=ne-Y;return ee*ee+ue*ue<=x*x}}function Bn(j,s,p){const x=a.L();if(!j){const{vecSouth:ne,vecEast:ee}=Xt(s),ue=_();ue[0]=ee[0],ue[1]=ee[1],ue[2]=ne[0],ue[3]=ne[1],w=ue,(Y=(P=(T=ue)[0])*(q=T[3])-(F=T[2])*(O=T[1]))&&(w[0]=q*(Y=1/Y),w[1]=-O*Y,w[2]=-F*Y,w[3]=P*Y),x[0]=ue[0],x[1]=ue[1],x[4]=ue[2],x[5]=ue[3]}var w,T,P,O,F,q,Y;return a.N(x,x,[1/p,1/p,1]),x}function xi(j,s,p,x){if(j){const w=a.L();if(!s){const{vecSouth:T,vecEast:P}=Xt(p);w[0]=P[0],w[1]=P[1],w[4]=T[0],w[5]=T[1]}return a.N(w,w,[x,x,1]),w}return p.pixelsToClipSpaceMatrix}function Xt(j){const s=Math.cos(j.rollInRadians),p=Math.sin(j.rollInRadians),x=Math.cos(j.pitchInRadians),w=Math.cos(j.bearingInRadians),T=Math.sin(j.bearingInRadians),P=a.ar();P[0]=-w*x*p-T*s,P[1]=-T*x*p+w*s;const O=a.as(P);O<1e-9?a.at(P):a.au(P,P,1/O);const F=a.ar();F[0]=w*x*s-T*p,F[1]=T*x*s+w*p;const q=a.as(F);return q<1e-9?a.at(F):a.au(F,F,1/q),{vecEast:F,vecSouth:P}}function lt(j,s,p,x){let w;x?(w=[j,s,x(j,s),1],a.aw(w,w,p)):(w=[j,s,0,1],Na(w,w,p));const T=w[3];return{point:new a.P(w[0]/T,w[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function Ri(j,s){return .5+j/s*.5}function li(j,s){return j.x>=-s[0]&&j.x<=s[0]&&j.y>=-s[1]&&j.y<=s[1]}function Wi(j,s,p,x,w,T,P,O,F,q,Y,ne,ee){const ue=p?j.textSizeData:j.iconSizeData,ye=a.an(ue,s.transform.zoom),Te=[256/s.width*2+1,256/s.height*2+1],Ce=p?j.text.dynamicLayoutVertexArray:j.icon.dynamicLayoutVertexArray;Ce.clear();const Ee=j.lineVertexArray,Ie=p?j.text.placedSymbolArray:j.icon.placedSymbolArray,Be=s.transform.width/s.transform.height;let Le=!1;for(let qe=0;qe<Ie.length;qe++){const Ke=Ie.get(qe);if(Ke.hidden||Ke.writingMode===a.ao.vertical&&!Le){Kr(Ke.numGlyphs,Ce);continue}Le=!1;const Fe=new a.P(Ke.anchorX,Ke.anchorY),it={getElevation:ee,pitchedLabelPlaneMatrix:x,lineVertexArray:Ee,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Fe,unwrappedTileID:F,width:q,height:Y,translation:ne},Mt=Vn(Ke.anchorX,Ke.anchorY,it);if(!li(Mt.point,Te)){Kr(Ke.numGlyphs,Ce);continue}const _t=Ri(s.transform.cameraToCenterDistance,Mt.signedDistanceFromCamera),wt=a.ap(ue,ye,Ke),St=T?wt*s.transform.getPitchedTextCorrection(Ke.anchorX,Ke.anchorY,F)/_t:wt*_t,rn=ei({projectionContext:it,pitchedLabelPlaneMatrixInverse:w,symbol:Ke,fontSize:St,flip:!1,keepUpright:P,glyphOffsetArray:j.glyphOffsetArray,dynamicLayoutVertexArray:Ce,aspectRatio:Be,rotateToLine:O});Le=rn.useVertical,(rn.notEnoughRoom||Le||rn.needsFlipping&&ei({projectionContext:it,pitchedLabelPlaneMatrixInverse:w,symbol:Ke,fontSize:St,flip:!0,keepUpright:P,glyphOffsetArray:j.glyphOffsetArray,dynamicLayoutVertexArray:Ce,aspectRatio:Be,rotateToLine:O}).notEnoughRoom)&&Kr(Ke.numGlyphs,Ce)}p?j.text.dynamicLayoutVertexBuffer.updateData(Ce):j.icon.dynamicLayoutVertexBuffer.updateData(Ce)}function us(j,s,p,x,w,T,P,O){const F=T.glyphStartIndex+T.numGlyphs,q=T.lineStartIndex,Y=T.lineStartIndex+T.lineLength,ne=s.getoffsetX(T.glyphStartIndex),ee=s.getoffsetX(F-1),ue=da(j*ne,p,x,w,T.segment,q,Y,O,P);if(!ue)return null;const ye=da(j*ee,p,x,w,T.segment,q,Y,O,P);return ye?O.projectionCache.anyProjectionOccluded?null:{first:ue,last:ye}:null}function sn(j,s,p,x){return j===a.ao.horizontal&&Math.abs(p.y-s.y)>Math.abs(p.x-s.x)*x?{useVertical:!0}:(j===a.ao.vertical?s.y<p.y:s.x>p.x)?{needsFlipping:!0}:null}function ei(j){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:p,symbol:x,fontSize:w,flip:T,keepUpright:P,glyphOffsetArray:O,dynamicLayoutVertexArray:F,aspectRatio:q,rotateToLine:Y}=j,ne=w/24,ee=x.lineOffsetX*ne,ue=x.lineOffsetY*ne;let ye;if(x.numGlyphs>1){const Te=x.glyphStartIndex+x.numGlyphs,Ce=x.lineStartIndex,Ee=x.lineStartIndex+x.lineLength,Ie=us(ne,O,ee,ue,T,x,Y,s);if(!Ie)return{notEnoughRoom:!0};const Be=Yr(Ie.first.point.x,Ie.first.point.y,s,p),Le=Yr(Ie.last.point.x,Ie.last.point.y,s,p);if(P&&!T){const qe=sn(x.writingMode,Be,Le,q);if(qe)return qe}ye=[Ie.first];for(let qe=x.glyphStartIndex+1;qe<Te-1;qe++){const Ke=da(ne*O.getoffsetX(qe),ee,ue,T,x.segment,Ce,Ee,s,Y);if(!Ke)return{notEnoughRoom:!0};ye.push(Ke)}ye.push(Ie.last)}else{if(P&&!T){const Ce=Ii(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,Ee=x.lineStartIndex+x.segment+1,Ie=new a.P(s.lineVertexArray.getx(Ee),s.lineVertexArray.gety(Ee)),Be=Ii(Ie.x,Ie.y,s),Le=Be.signedDistanceFromCamera>0?Be.point:On(s.tileAnchorPoint,Ie,Ce,1,s),qe=Yr(Ce.x,Ce.y,s,p),Ke=Yr(Le.x,Le.y,s,p),Fe=sn(x.writingMode,qe,Ke,q);if(Fe)return Fe}const Te=da(ne*O.getoffsetX(x.glyphStartIndex),ee,ue,T,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,s,Y);if(!Te||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ye=[Te]}for(const Te of ye)a.av(F,Te.point,Te.angle);return{}}function On(j,s,p,x,w){const T=j.add(j.sub(s)._unit()),P=Ii(T.x,T.y,w).point,O=p.sub(P);return p.add(O._mult(x/O.mag()))}function vs(j,s,p){const x=s.projectionCache;if(x.projections[j])return x.projections[j];const w=new a.P(s.lineVertexArray.getx(j),s.lineVertexArray.gety(j)),T=Ii(w.x,w.y,s);if(T.signedDistanceFromCamera>0)return x.projections[j]=T.point,x.anyProjectionOccluded=x.anyProjectionOccluded||T.isOccluded,T.point;const P=j-p.direction;return On(p.distanceFromAnchor===0?s.tileAnchorPoint:new a.P(s.lineVertexArray.getx(P),s.lineVertexArray.gety(P)),w,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,s)}function Ii(j,s,p){const x=j+p.translation[0],w=s+p.translation[1];let T;return p.pitchWithMap?(T=lt(x,w,p.pitchedLabelPlaneMatrix,p.getElevation),T.isOccluded=!1):(T=p.transform.projectTileCoordinates(x,w,p.unwrappedTileID,p.getElevation),T.point.x=(.5*T.point.x+.5)*p.width,T.point.y=(.5*-T.point.y+.5)*p.height),T}function Yr(j,s,p,x){if(p.pitchWithMap){const w=[j,s,0,1];return a.aw(w,w,x),p.transform.projectTileCoordinates(w[0]/w[3],w[1]/w[3],p.unwrappedTileID,p.getElevation).point}return{x:j/p.width*2-1,y:1-s/p.height*2}}function Vn(j,s,p){return p.transform.projectTileCoordinates(j,s,p.unwrappedTileID,p.getElevation)}function Xr(j,s,p){return j._unit()._perp()._mult(s*p)}function Pr(j,s,p,x,w,T,P,O,F){if(O.projectionCache.offsets[j])return O.projectionCache.offsets[j];const q=p.add(s);if(j+F.direction<x||j+F.direction>=w)return O.projectionCache.offsets[j]=q,q;const Y=vs(j+F.direction,O,F),ne=Xr(Y.sub(p),P,F.direction),ee=p.add(ne),ue=Y.add(ne);return O.projectionCache.offsets[j]=a.ax(T,q,ee,ue)||q,O.projectionCache.offsets[j]}function da(j,s,p,x,w,T,P,O,F){const q=x?j-s:j+s;let Y=q>0?1:-1,ne=0;x&&(Y*=-1,ne=Math.PI),Y<0&&(ne+=Math.PI);let ee,ue=Y>0?T+w:T+w+1;O.projectionCache.cachedAnchorPoint?ee=O.projectionCache.cachedAnchorPoint:(ee=Ii(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=ee);let ye,Te,Ce=ee,Ee=ee,Ie=0,Be=0;const Le=Math.abs(q),qe=[];let Ke;for(;Ie+Be<=Le;){if(ue+=Y,ue<T||ue>=P)return null;Ie+=Be,Ee=Ce,Te=ye;const Mt={absOffsetX:Le,direction:Y,distanceFromAnchor:Ie,previousVertex:Ee};if(Ce=vs(ue,O,Mt),p===0)qe.push(Ee),Ke=Ce.sub(Ee);else{let _t;const wt=Ce.sub(Ee);_t=wt.mag()===0?Xr(vs(ue+Y,O,Mt).sub(Ce),p,Y):Xr(wt,p,Y),Te||(Te=Ee.add(_t)),ye=Pr(ue,_t,Ce,T,P,Te,p,O,Mt),qe.push(Te),Ke=ye.sub(Te)}Be=Ke.mag()}const Fe=Ke._mult((Le-Ie)/Be)._add(Te||Ee),it=ne+Math.atan2(Ce.y-Ee.y,Ce.x-Ee.x);return qe.push(Fe),{point:Fe,angle:F?it:0,path:qe}}const ds=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Kr(j,s){for(let p=0;p<j;p++){const x=s.length;s.resize(x+4),s.float32.set(ds,3*x)}}function Na(j,s,p){const x=s[0],w=s[1];return j[0]=p[0]*x+p[4]*w+p[12],j[1]=p[1]*x+p[5]*w+p[13],j[3]=p[3]*x+p[7]*w+p[15],j}const Di=100;class es{constructor(s,p=new Hn(s.width+200,s.height+200,25),x=new Hn(s.width+200,s.height+200,25)){this.transform=s,this.grid=p,this.ignoredGrid=x,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Di,this.screenBottomBoundary=s.height+Di,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,p,x,w,T,P,O,F,q,Y,ne,ee){const ue=this.projectAndGetPerspectiveRatio(s.anchorPointX+F[0],s.anchorPointY+F[1],T,Y,ee),ye=x*ue.perspectiveRatio;let Te;if(P||O)Te=this._projectCollisionBox(s,ye,w,T,P,O,F,ue,Y,ne,ee);else{const Ke=ue.x+(ne?ne.x*ye:0),Fe=ue.y+(ne?ne.y*ye:0);Te={allPointsOccluded:!1,box:[Ke+s.x1*ye,Fe+s.y1*ye,Ke+s.x2*ye,Fe+s.y2*ye]}}const[Ce,Ee,Ie,Be]=Te.box,Le=P?Te.allPointsOccluded:ue.isOccluded;let qe=Le;return qe||(qe=ue.perspectiveRatio<this.perspectiveRatioCutoff),qe||(qe=!this.isInsideGrid(Ce,Ee,Ie,Be)),qe||p!=="always"&&this.grid.hitTest(Ce,Ee,Ie,Be,p,q)?{box:[Ce,Ee,Ie,Be],placeable:!1,offscreen:!1,occluded:Le}:{box:[Ce,Ee,Ie,Be],placeable:!0,offscreen:this.isOffscreen(Ce,Ee,Ie,Be),occluded:Le}}placeCollisionCircles(s,p,x,w,T,P,O,F,q,Y,ne,ee,ue,ye){const Te=[],Ce=new a.P(p.anchorX,p.anchorY),Ee=this.getPerspectiveRatio(Ce.x,Ce.y,P,ye),Ie=(q?T*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,P)/Ee:T*Ee)/a.aB,Be={getElevation:ye,pitchedLabelPlaneMatrix:O,lineVertexArray:x,pitchWithMap:q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Ce,unwrappedTileID:P,width:this.transform.width,height:this.transform.height,translation:ue},Le=us(Ie,w,p.lineOffsetX*Ie,p.lineOffsetY*Ie,!1,p,!1,Be);let qe=!1,Ke=!1,Fe=!0;if(Le){const it=.5*ne*Ee+ee,Mt=new a.P(-100,-100),_t=new a.P(this.screenRightBoundary,this.screenBottomBoundary),wt=new Jn,St=Le.first,rn=Le.last;let an=[];for(let ni=St.path.length-1;ni>=1;ni--)an.push(St.path[ni]);for(let ni=1;ni<rn.path.length;ni++)an.push(rn.path[ni]);const Yt=2.5*it;if(q){const ni=this.projectPathToScreenSpace(an,Be);an=ni.some(Fi=>Fi.signedDistanceFromCamera<=0)?[]:ni.map(Fi=>Fi.point)}let Mn=[];if(an.length>0){const ni=an[0].clone(),Fi=an[0].clone();for(let Bi=1;Bi<an.length;Bi++)ni.x=Math.min(ni.x,an[Bi].x),ni.y=Math.min(ni.y,an[Bi].y),Fi.x=Math.max(Fi.x,an[Bi].x),Fi.y=Math.max(Fi.y,an[Bi].y);Mn=ni.x>=Mt.x&&Fi.x<=_t.x&&ni.y>=Mt.y&&Fi.y<=_t.y?[an]:Fi.x<Mt.x||ni.x>_t.x||Fi.y<Mt.y||ni.y>_t.y?[]:a.ay([an],Mt.x,Mt.y,_t.x,_t.y)}for(const ni of Mn){wt.reset(ni,.25*it);let Fi=0;Fi=wt.length<=.5*it?1:Math.ceil(wt.paddedLength/Yt)+1;for(let Bi=0;Bi<Fi;Bi++){const Qi=Bi/Math.max(Fi-1,1),Ts=wt.lerp(Qi),ns=Ts.x+Di,yi=Ts.y+Di;Te.push(ns,yi,it,0);const as=ns-it,tr=yi-it,Bs=ns+it,Vs=yi+it;if(Fe=Fe&&this.isOffscreen(as,tr,Bs,Vs),Ke=Ke||this.isInsideGrid(as,tr,Bs,Vs),s!=="always"&&this.grid.hitTestCircle(ns,yi,it,s,Y)&&(qe=!0,!F))return{circles:[],offscreen:!1,collisionDetected:qe}}}}return{circles:!F&&qe||!Ke||Ee<this.perspectiveRatioCutoff?[]:Te,offscreen:Fe,collisionDetected:qe}}projectPathToScreenSpace(s,p){const x=function(w,T){const P=a.L();return a.aq(P,T.pitchedLabelPlaneMatrix),w.map(O=>{const F=lt(O.x,O.y,P,T.getElevation),q=T.transform.projectTileCoordinates(F.point.x,F.point.y,T.unwrappedTileID,T.getElevation);return q.point.x=(.5*q.point.x+.5)*T.width,q.point.y=(.5*-q.point.y+.5)*T.height,q})}(s,p);return function(w){let T=0,P=0,O=0,F=0;for(let q=0;q<w.length;q++)w[q].isOccluded?(O=q+1,F=0):(F++,F>P&&(P=F,T=O));return w.slice(T,T+P)}(x)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[],x=new a.a2;for(const ne of s){const ee=new a.P(ne.x+Di,ne.y+Di);x.extend(ee),p.push(ee)}const{minX:w,minY:T,maxX:P,maxY:O}=x,F=this.grid.query(w,T,P,O).concat(this.ignoredGrid.query(w,T,P,O)),q={},Y={};for(const ne of F){const ee=ne.key;if(q[ee.bucketInstanceId]===void 0&&(q[ee.bucketInstanceId]={}),q[ee.bucketInstanceId][ee.featureIndex])continue;const ue=[new a.P(ne.x1,ne.y1),new a.P(ne.x2,ne.y1),new a.P(ne.x2,ne.y2),new a.P(ne.x1,ne.y2)];a.az(p,ue)&&(q[ee.bucketInstanceId][ee.featureIndex]=!0,Y[ee.bucketInstanceId]===void 0&&(Y[ee.bucketInstanceId]=[]),Y[ee.bucketInstanceId].push(ee.featureIndex))}return Y}insertCollisionBox(s,p,x,w,T,P){(x?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:T,collisionGroupID:P,overlapMode:p},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,p,x,w,T,P){const O=x?this.ignoredGrid:this.grid,F={bucketInstanceId:w,featureIndex:T,collisionGroupID:P,overlapMode:p};for(let q=0;q<s.length;q+=4)O.insertCircle(F,s[q],s[q+1],s[q+2])}projectAndGetPerspectiveRatio(s,p,x,w,T){if(T){let P;w?(P=[s,p,w(s,p),1],a.aw(P,P,T)):(P=[s,p,0,1],Na(P,P,T));const O=P[3];return{x:(P[0]/O+1)/2*this.transform.width+Di,y:(-P[1]/O+1)/2*this.transform.height+Di,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const P=this.transform.projectTileCoordinates(s,p,x,w);return{x:(P.point.x+1)/2*this.transform.width+Di,y:(1-P.point.y)/2*this.transform.height+Di,perspectiveRatio:.5+this.transform.cameraToCenterDistance/P.signedDistanceFromCamera*.5,isOccluded:P.isOccluded,signedDistanceFromCamera:P.signedDistanceFromCamera}}}getPerspectiveRatio(s,p,x,w){const T=this.transform.projectTileCoordinates(s,p,x,w);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(s,p,x,w){return x<Di||s>=this.screenRightBoundary||w<Di||p>this.screenBottomBoundary}isInsideGrid(s,p,x,w){return x>=0&&s<this.gridRightBoundary&&w>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const s=a.ag([]);return a.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,p,x,w,T,P,O,F,q,Y,ne){let ee=1,ue=0,ye=0,Te=1;const Ce=s.anchorPointX+O[0],Ee=s.anchorPointY+O[1];if(P&&!T){const an=this.projectAndGetPerspectiveRatio(Ce+1,Ee,w,q,ne),Yt=an.x-F.x,Mn=Math.atan((an.y-F.y)/Yt)+(Yt<0?Math.PI:0),ni=Math.sin(Mn),Fi=Math.cos(Mn);ee=Fi,ue=ni,ye=-ni,Te=Fi}else if(!P&&T){const an=Xt(this.transform);ee=an.vecEast[0],ue=an.vecEast[1],ye=an.vecSouth[0],Te=an.vecSouth[1]}let Ie=F.x,Be=F.y,Le=p;T&&(Ie=Ce,Be=Ee,Le=Math.pow(2,-(this.transform.zoom-x.overscaledZ)),Le*=this.transform.getPitchedTextCorrection(Ce,Ee,w),Y||(Le*=a.ah(.5+F.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Y&&(Ie+=ee*Y.x*Le+ye*Y.y*Le,Be+=ue*Y.x*Le+Te*Y.y*Le);const qe=s.x1*Le,Ke=s.x2*Le,Fe=(qe+Ke)/2,it=s.y1*Le,Mt=s.y2*Le,_t=(it+Mt)/2,wt=[{offsetX:qe,offsetY:it},{offsetX:Fe,offsetY:it},{offsetX:Ke,offsetY:it},{offsetX:Ke,offsetY:_t},{offsetX:Ke,offsetY:Mt},{offsetX:Fe,offsetY:Mt},{offsetX:qe,offsetY:Mt},{offsetX:qe,offsetY:_t}];let St=[];for(const{offsetX:an,offsetY:Yt}of wt)St.push(new a.P(Ie+ee*an+ye*Yt,Be+ue*an+Te*Yt));let rn=!1;if(T){const an=St.map(Yt=>this.projectAndGetPerspectiveRatio(Yt.x,Yt.y,w,q,ne));rn=an.some(Yt=>!Yt.isOccluded),St=an.map(Yt=>new a.P(Yt.x,Yt.y))}else rn=!0;return{box:a.aA(St),allPointsOccluded:!rn}}}class ti{constructor(s,p,x,w){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?p:-p))):w&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class ml{constructor(s,p,x,w,T){this.text=new ti(s?s.text:null,p,x,T),this.icon=new ti(s?s.icon:null,p,w,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gl{constructor(s,p,x){this.text=s,this.icon=p,this.skipFade=x}}class Ma{constructor(s,p,x,w,T){this.bucketInstanceId=s,this.featureIndex=p,this.sourceLayerIndex=x,this.bucketIndex=w,this.tileID=T}}class qa{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const p=++this.maxGroupID;this.collisionGroups[s]={ID:p,predicate:x=>x.collisionGroupID===p}}return this.collisionGroups[s]}}function ha(j,s,p,x,w){const{horizontalAlign:T,verticalAlign:P}=a.aH(j);return new a.P(-(T-.5)*s+x[0]*w,-(P-.5)*p+x[1]*w)}class zh{constructor(s,p,x,w,T){this.transform=s.clone(),this.terrain=p,this.collisionIndex=new es(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=x,this.retainedQueryData={},this.collisionGroups=new qa(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const p=this.terrain;return p?(x,w)=>p.getElevation(s,x,w):null}getBucketParts(s,p,x,w){const T=x.getBucket(p),P=x.latestFeatureIndex;if(!T||!P||p.id!==T.layerIds[0])return;const O=x.collisionBoxArray,F=T.layers[0].layout,q=T.layers[0].paint,Y=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),ne=x.tileSize/a.$,ee=x.tileID.toUnwrapped(),ue=F.get("text-rotation-alignment")==="map",ye=a.aC(x,1,this.transform.zoom),Te=a.aD(this.collisionIndex.transform,x,q.get("text-translate"),q.get("text-translate-anchor")),Ce=a.aD(this.collisionIndex.transform,x,q.get("icon-translate"),q.get("icon-translate-anchor")),Ee=Bn(ue,this.transform,ye);this.retainedQueryData[T.bucketInstanceId]=new Ma(T.bucketInstanceId,P,T.sourceLayerIndex,T.index,x.tileID);const Ie={bucket:T,layout:F,translationText:Te,translationIcon:Ce,unwrappedTileID:ee,pitchedLabelPlaneMatrix:Ee,scale:Y,textPixelRatio:ne,holdingForFade:x.holdingForSymbolFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:a.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(w)for(const Be of T.sortKeyRanges){const{sortKey:Le,symbolInstanceStart:qe,symbolInstanceEnd:Ke}=Be;s.push({sortKey:Le,symbolInstanceStart:qe,symbolInstanceEnd:Ke,parameters:Ie})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Ie})}attemptAnchorPlacement(s,p,x,w,T,P,O,F,q,Y,ne,ee,ue,ye,Te,Ce,Ee,Ie,Be,Le){const qe=a.aE[s.textAnchor],Ke=[s.textOffset0,s.textOffset1],Fe=ha(qe,x,w,Ke,T),it=this.collisionIndex.placeCollisionBox(p,ee,F,q,Y,O,P,Ce,ne.predicate,Be,Fe,Le);if((!Ie||this.collisionIndex.placeCollisionBox(Ie,ee,F,q,Y,O,P,Ee,ne.predicate,Be,Fe,Le).placeable)&&it.placeable){let Mt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID].text&&(Mt=this.prevPlacement.variableOffsets[ue.crossTileID].anchor),ue.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ue.crossTileID]={textOffset:Ke,width:x,height:w,anchor:qe,textBoxScale:T,prevAnchor:Mt},this.markUsedJustification(ye,qe,ue,Te),ye.allowVerticalPlacement&&(this.markUsedOrientation(ye,Te,ue),this.placedOrientations[ue.crossTileID]=Te),{shift:Fe,placedGlyphBoxes:it}}}placeLayerBucketPart(s,p,x){const{bucket:w,layout:T,translationText:P,translationIcon:O,unwrappedTileID:F,pitchedLabelPlaneMatrix:q,textPixelRatio:Y,holdingForFade:ne,collisionBoxArray:ee,partiallyEvaluatedTextSize:ue,collisionGroup:ye}=s.parameters,Te=T.get("text-optional"),Ce=T.get("icon-optional"),Ee=a.aF(T,"text-overlap","text-allow-overlap"),Ie=Ee==="always",Be=a.aF(T,"icon-overlap","icon-allow-overlap"),Le=Be==="always",qe=T.get("text-rotation-alignment")==="map",Ke=T.get("text-pitch-alignment")==="map",Fe=T.get("icon-text-fit")!=="none",it=T.get("symbol-z-order")==="viewport-y",Mt=Ie&&(Le||!w.hasIconData()||Ce),_t=Le&&(Ie||!w.hasTextData()||Te);!w.collisionArrays&&ee&&w.deserializeCollisionBoxes(ee);const wt=this.retainedQueryData[w.bucketInstanceId].tileID,St=this._getTerrainElevationFunc(wt),rn=this.transform.getFastPathSimpleProjectionMatrix(wt),an=(Yt,Mn,ni)=>{var Fi,Bi;if(p[Yt.crossTileID])return;if(ne)return void(this.placements[Yt.crossTileID]=new gl(!1,!1,!1));let Qi=!1,Ts=!1,ns=!0,yi=null,as={box:null,placeable:!1,offscreen:null,occluded:!1},tr={placeable:!1},Bs=null,Vs=null,xr=null,Al=0,ro=0,ic=0;Mn.textFeatureIndex?Al=Mn.textFeatureIndex:Yt.useRuntimeCollisionCircles&&(Al=Yt.featureIndex),Mn.verticalTextFeatureIndex&&(ro=Mn.verticalTextFeatureIndex);const ao=Mn.textBox;if(ao){const Fr=Rs=>{let Ki=a.ao.horizontal;if(w.allowVerticalPlacement&&!Rs&&this.prevPlacement){const Us=this.prevPlacement.placedOrientations[Yt.crossTileID];Us&&(this.placedOrientations[Yt.crossTileID]=Us,Ki=Us,this.markUsedOrientation(w,Ki,Yt))}return Ki},Ro=(Rs,Ki)=>{if(w.allowVerticalPlacement&&Yt.numVerticalGlyphVertices>0&&Mn.verticalTextBox){for(const Us of w.writingModes)if(Us===a.ao.vertical?(as=Ki(),tr=as):as=Rs(),as&&as.placeable)break}else as=Rs()},Do=Yt.textAnchorOffsetStartIndex,_r=Yt.textAnchorOffsetEndIndex;if(_r===Do){const Rs=(Ki,Us)=>{const ys=this.collisionIndex.placeCollisionBox(Ki,Ee,Y,wt,F,Ke,qe,P,ye.predicate,St,void 0,rn);return ys&&ys.placeable&&(this.markUsedOrientation(w,Us,Yt),this.placedOrientations[Yt.crossTileID]=Us),ys};Ro(()=>Rs(ao,a.ao.horizontal),()=>{const Ki=Mn.verticalTextBox;return w.allowVerticalPlacement&&Yt.numVerticalGlyphVertices>0&&Ki?Rs(Ki,a.ao.vertical):{box:null,offscreen:null}}),Fr(as&&as.placeable)}else{let Rs=a.aE[(Bi=(Fi=this.prevPlacement)===null||Fi===void 0?void 0:Fi.variableOffsets[Yt.crossTileID])===null||Bi===void 0?void 0:Bi.anchor];const Ki=(ys,rf,oo)=>{const na=ys.x2-ys.x1,os=ys.y2-ys.y1,va=Yt.textBoxScale,Qo=Fe&&Be==="never"?rf:null;let Jo=null,af=Ee==="never"?1:2,of="never";Rs&&af++;for(let wa=0;wa<af;wa++){for(let Yu=Do;Yu<_r;Yu++){const lf=w.textAnchorOffsets.get(Yu);if(Rs&&lf.textAnchor!==Rs)continue;const Xu=this.attemptAnchorPlacement(lf,ys,na,os,va,qe,Ke,Y,wt,F,ye,of,Yt,w,oo,P,O,Qo,St);if(Xu&&(Jo=Xu.placedGlyphBoxes,Jo&&Jo.placeable))return Qi=!0,yi=Xu.shift,Jo}Rs?Rs=null:of=Ee}return x&&!Jo&&(Jo={box:this.collisionIndex.placeCollisionBox(ao,"always",Y,wt,F,Ke,qe,P,ye.predicate,St,void 0,rn).box,offscreen:!1,placeable:!1,occluded:!1}),Jo};Ro(()=>Ki(ao,Mn.iconBox,a.ao.horizontal),()=>{const ys=Mn.verticalTextBox;return w.allowVerticalPlacement&&(!as||!as.placeable)&&Yt.numVerticalGlyphVertices>0&&ys?Ki(ys,Mn.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}}),as&&(Qi=as.placeable,ns=as.offscreen);const Us=Fr(as&&as.placeable);if(!Qi&&this.prevPlacement){const ys=this.prevPlacement.variableOffsets[Yt.crossTileID];ys&&(this.variableOffsets[Yt.crossTileID]=ys,this.markUsedJustification(w,ys.anchor,Yt,Us))}}}if(Bs=as,Qi=Bs&&Bs.placeable,ns=Bs&&Bs.offscreen,Yt.useRuntimeCollisionCircles&&Yt.centerJustifiedTextSymbolIndex>=0){const Fr=w.text.placedSymbolArray.get(Yt.centerJustifiedTextSymbolIndex),Ro=a.ap(w.textSizeData,ue,Fr),Do=T.get("text-padding");Vs=this.collisionIndex.placeCollisionCircles(Ee,Fr,w.lineVertexArray,w.glyphOffsetArray,Ro,F,q,x,Ke,ye.predicate,Yt.collisionCircleDiameter,Do,P,St),Vs.circles.length&&Vs.collisionDetected&&!x&&a.w("Collisions detected, but collision boxes are not shown"),Qi=Ie||Vs.circles.length>0&&!Vs.collisionDetected,ns=ns&&Vs.offscreen}if(Mn.iconFeatureIndex&&(ic=Mn.iconFeatureIndex),Mn.iconBox){const Fr=Ro=>this.collisionIndex.placeCollisionBox(Ro,Be,Y,wt,F,Ke,qe,O,ye.predicate,St,Fe&&yi?yi:void 0,rn);tr&&tr.placeable&&Mn.verticalIconBox?(xr=Fr(Mn.verticalIconBox),Ts=xr.placeable):(xr=Fr(Mn.iconBox),Ts=xr.placeable),ns=ns&&xr.offscreen}const sc=Te||Yt.numHorizontalGlyphVertices===0&&Yt.numVerticalGlyphVertices===0,Pl=Ce||Yt.numIconVertices===0;sc||Pl?Pl?sc||(Ts=Ts&&Qi):Qi=Ts&&Qi:Ts=Qi=Ts&&Qi;const Fa=Ts&&xr.placeable;if(Qi&&Bs.placeable&&this.collisionIndex.insertCollisionBox(Bs.box,Ee,T.get("text-ignore-placement"),w.bucketInstanceId,tr&&tr.placeable&&ro?ro:Al,ye.ID),Fa&&this.collisionIndex.insertCollisionBox(xr.box,Be,T.get("icon-ignore-placement"),w.bucketInstanceId,ic,ye.ID),Vs&&Qi&&this.collisionIndex.insertCollisionCircles(Vs.circles,Ee,T.get("text-ignore-placement"),w.bucketInstanceId,Al,ye.ID),x&&this.storeCollisionData(w.bucketInstanceId,ni,Mn,Bs,xr,Vs),Yt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Yt.crossTileID]=new gl((Qi||Mt)&&!(Bs!=null&&Bs.occluded),(Ts||_t)&&!(xr!=null&&xr.occluded),ns||w.justReloaded),p[Yt.crossTileID]=!0};if(it){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Yt=w.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Mn=Yt.length-1;Mn>=0;--Mn){const ni=Yt[Mn];an(w.symbolInstances.get(ni),w.collisionArrays[ni],ni)}}else for(let Yt=s.symbolInstanceStart;Yt<s.symbolInstanceEnd;Yt++)an(w.symbolInstances.get(Yt),w.collisionArrays[Yt],Yt);w.justReloaded=!1}storeCollisionData(s,p,x,w,T,P){if(x.textBox||x.iconBox){let O,F;this.collisionBoxArrays.has(s)?O=this.collisionBoxArrays.get(s):(O=new Map,this.collisionBoxArrays.set(s,O)),O.has(p)?F=O.get(p):(F={text:null,icon:null},O.set(p,F)),x.textBox&&(F.text=w.box),x.iconBox&&(F.icon=T.box)}if(P){let O=this.collisionCircleArrays[s];O===void 0&&(O=this.collisionCircleArrays[s]=[]);for(let F=0;F<P.circles.length;F+=4)O.push(P.circles[F+0]-Di),O.push(P.circles[F+1]-Di),O.push(P.circles[F+2]),O.push(P.collisionDetected?1:0)}}markUsedJustification(s,p,x,w){let T;T=w===a.ao.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[a.aG(p)];const P=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];for(const O of P)O>=0&&(s.text.placedSymbolArray.get(O).crossTileID=T>=0&&O!==T?0:x.crossTileID)}markUsedOrientation(s,p,x){const w=p===a.ao.horizontal||p===a.ao.horizontalOnly?p:0,T=p===a.ao.vertical?p:0,P=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];for(const O of P)s.text.placedSymbolArray.get(O).placedOrientation=w;x.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let x=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const w=p?p.symbolFadeChange(s):1,T=p?p.opacities:{},P=p?p.variableOffsets:{},O=p?p.placedOrientations:{};for(const F in this.placements){const q=this.placements[F],Y=T[F];Y?(this.opacities[F]=new ml(Y,w,q.text,q.icon),x=x||q.text!==Y.text.placed||q.icon!==Y.icon.placed):(this.opacities[F]=new ml(null,w,q.text,q.icon,q.skipFade),x=x||q.text||q.icon)}for(const F in T){const q=T[F];if(!this.opacities[F]){const Y=new ml(q,w,!1,!1);Y.isHidden()||(this.opacities[F]=Y,x=x||q.text.placed||q.icon.placed)}}for(const F in P)this.variableOffsets[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.variableOffsets[F]=P[F]);for(const F in O)this.placedOrientations[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.placedOrientations[F]=O[F]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");x?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:s)}updateLayerOpacities(s,p){const x={};for(const w of p){const T=w.getBucket(s);T&&w.latestFeatureIndex&&s.id===T.layerIds[0]&&this.updateBucketOpacities(T,w.tileID,x,w.collisionBoxArray)}}updateBucketOpacities(s,p,x,w){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const T=s.layers[0],P=T.layout,O=new ml(null,0,!1,!1,!0),F=P.get("text-allow-overlap"),q=P.get("icon-allow-overlap"),Y=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ne=P.get("text-rotation-alignment")==="map",ee=P.get("text-pitch-alignment")==="map",ue=P.get("icon-text-fit")!=="none",ye=new ml(null,0,F&&(q||!s.hasIconData()||P.get("icon-optional")),q&&(F||!s.hasTextData()||P.get("text-optional")),!0);!s.collisionArrays&&w&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(w);const Te=(Ee,Ie,Be)=>{for(let Le=0;Le<Ie/4;Le++)Ee.opacityVertexArray.emplaceBack(Be);Ee.hasVisibleVertices=Ee.hasVisibleVertices||Be!==wo},Ce=this.collisionBoxArrays.get(s.bucketInstanceId);for(let Ee=0;Ee<s.symbolInstances.length;Ee++){const Ie=s.symbolInstances.get(Ee),{numHorizontalGlyphVertices:Be,numVerticalGlyphVertices:Le,crossTileID:qe}=Ie;let Ke=this.opacities[qe];x[qe]?Ke=O:Ke||(Ke=ye,this.opacities[qe]=Ke),x[qe]=!0;const Fe=Ie.numIconVertices>0,it=this.placedOrientations[Ie.crossTileID],Mt=it===a.ao.vertical,_t=it===a.ao.horizontal||it===a.ao.horizontalOnly;if(Be>0||Le>0){const St=Rr(Ke.text);Te(s.text,Be,Mt?wo:St),Te(s.text,Le,_t?wo:St);const rn=Ke.text.isHidden();[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach(Mn=>{Mn>=0&&(s.text.placedSymbolArray.get(Mn).hidden=rn||Mt?1:0)}),Ie.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(Ie.verticalPlacedTextSymbolIndex).hidden=rn||_t?1:0);const an=this.variableOffsets[Ie.crossTileID];an&&this.markUsedJustification(s,an.anchor,Ie,it);const Yt=this.placedOrientations[Ie.crossTileID];Yt&&(this.markUsedJustification(s,"left",Ie,Yt),this.markUsedOrientation(s,Yt,Ie))}if(Fe){const St=Rr(Ke.icon),rn=!(ue&&Ie.verticalPlacedIconSymbolIndex&&Mt);Ie.placedIconSymbolIndex>=0&&(Te(s.icon,Ie.numIconVertices,rn?St:wo),s.icon.placedSymbolArray.get(Ie.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),Ie.verticalPlacedIconSymbolIndex>=0&&(Te(s.icon,Ie.numVerticalIconVertices,rn?wo:St),s.icon.placedSymbolArray.get(Ie.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}const wt=Ce&&Ce.has(Ee)?Ce.get(Ee):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const St=s.collisionArrays[Ee];if(St){let rn=new a.P(0,0);if(St.textBox||St.verticalTextBox){let an=!0;if(Y){const Yt=this.variableOffsets[qe];Yt?(rn=ha(Yt.anchor,Yt.width,Yt.height,Yt.textOffset,Yt.textBoxScale),ne&&rn._rotate(ee?-this.transform.bearingInRadians:this.transform.bearingInRadians)):an=!1}if(St.textBox||St.verticalTextBox){let Yt;St.textBox&&(Yt=Mt),St.verticalTextBox&&(Yt=_t),Cu(s.textCollisionBox.collisionVertexArray,Ke.text.placed,!an||Yt,wt.text,rn.x,rn.y)}}if(St.iconBox||St.verticalIconBox){const an=!!(!_t&&St.verticalIconBox);let Yt;St.iconBox&&(Yt=an),St.verticalIconBox&&(Yt=!an),Cu(s.iconCollisionBox.collisionVertexArray,Ke.icon.placed,Yt,wt.icon,ue?rn.x:0,ue?rn.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,p){const x=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*x>s}setStale(){this.stale=!0}}function Cu(j,s,p,x,w,T){x&&x.length!==0||(x=[0,0,0,0]);const P=x[0]-Di,O=x[1]-Di,F=x[2]-Di,q=x[3]-Di;j.emplaceBack(s?1:0,p?1:0,w||0,T||0,P,O),j.emplaceBack(s?1:0,p?1:0,w||0,T||0,F,O),j.emplaceBack(s?1:0,p?1:0,w||0,T||0,F,q),j.emplaceBack(s?1:0,p?1:0,w||0,T||0,P,q)}const Qr=Math.pow(2,25),yl=Math.pow(2,24),Cd=Math.pow(2,17),Sc=Math.pow(2,16),Vo=Math.pow(2,9),jc=Math.pow(2,8),Ih=Math.pow(2,1);function Rr(j){if(j.opacity===0&&!j.placed)return 0;if(j.opacity===1&&j.placed)return 4294967295;const s=j.placed?1:0,p=Math.floor(127*j.opacity);return p*Qr+s*yl+p*Cd+s*Sc+p*Vo+s*jc+p*Ih+s}const wo=0;class Tu{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,p,x,w,T){const P=this._bucketParts;for(;this._currentTileIndex<s.length;)if(p.getBucketParts(P,w,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((O,F)=>O.sortKey-F.sortKey));this._currentPartIndex<P.length;)if(p.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,T())return!0;return!1}}class ku{constructor(s,p,x,w,T,P,O,F){this.placement=new zh(s,p,P,O,F),this._currentPlacementIndex=x.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(s,p,x){const w=A.now(),T=()=>!this._forceFullPlacement&&A.now()-w>2;for(;this._currentPlacementIndex>=0;){const P=p[s[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=O)&&(!P.maxzoom||P.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new Tu(P)),this._inProgressLayer.continuePlacement(x[P.source],this.placement,this._showCollisionBoxes,P,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Jr=512/a.$/2;class xl{constructor(s,p,x){this.tileID=s,this.bucketInstanceId=x,this._symbolsByKey={};const w=new Map;for(let T=0;T<p.length;T++){const P=p.get(T),O=P.key,F=w.get(O);F?F.push(P):w.set(O,[P])}for(const[T,P]of w){const O={positions:P.map(F=>({x:Math.floor(F.anchorX*Jr),y:Math.floor(F.anchorY*Jr)})),crossTileIDs:P.map(F=>F.crossTileID)};if(O.positions.length>128){const F=new a.aI(O.positions.length,16,Uint16Array);for(const{x:q,y:Y}of O.positions)F.add(q,Y);F.finish(),delete O.positions,O.index=F}this._symbolsByKey[T]=O}}getScaledCoordinates(s,p){const{x,y:w,z:T}=this.tileID.canonical,{x:P,y:O,z:F}=p.canonical,q=Jr/Math.pow(2,F-T),Y=(O*a.$+s.anchorY)*q,ne=w*a.$*Jr;return{x:Math.floor((P*a.$+s.anchorX)*q-x*a.$*Jr),y:Math.floor(Y-ne)}}findMatches(s,p,x){const w=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let T=0;T<s.length;T++){const P=s.get(T);if(P.crossTileID)continue;const O=this._symbolsByKey[P.key];if(!O)continue;const F=this.getScaledCoordinates(P,p);if(O.index){const q=O.index.range(F.x-w,F.y-w,F.x+w,F.y+w).sort();for(const Y of q){const ne=O.crossTileIDs[Y];if(!x[ne]){x[ne]=!0,P.crossTileID=ne;break}}}else if(O.positions)for(let q=0;q<O.positions.length;q++){const Y=O.positions[q],ne=O.crossTileIDs[q];if(Math.abs(Y.x-F.x)<=w&&Math.abs(Y.y-F.y)<=w&&!x[ne]){x[ne]=!0,P.crossTileID=ne;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Td{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ga{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const p=Math.round((s-this.lng)/360);if(p!==0)for(const x in this.indexes){const w=this.indexes[x],T={};for(const P in w){const O=w[P];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+p),T[O.tileID.key]=O}this.indexes[x]=T}this.lng=s}addBucket(s,p,x){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let T=0;T<p.symbolInstances.length;T++)p.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const w=this.usedCrossTileIDs[s.overscaledZ];for(const T in this.indexes){const P=this.indexes[T];if(Number(T)>s.overscaledZ)for(const O in P){const F=P[O];F.tileID.isChildOf(s)&&F.findMatches(p.symbolInstances,s,w)}else{const O=P[s.scaledTo(Number(T)).key];O&&O.findMatches(p.symbolInstances,s,w)}}for(let T=0;T<p.symbolInstances.length;T++){const P=p.symbolInstances.get(T);P.crossTileID||(P.crossTileID=x.generate(),w[P.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new xl(s,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(s,p){for(const x of p.getCrossTileIDsLists())for(const w of x)delete this.usedCrossTileIDs[s][w]}removeStaleBuckets(s){let p=!1;for(const x in this.indexes){const w=this.indexes[x];for(const T in w)s[w[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,w[T]),delete w[T],p=!0)}return p}}class Vl{constructor(){this.layerIndexes={},this.crossTileIDs=new Td,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,p,x){let w=this.layerIndexes[s.id];w===void 0&&(w=this.layerIndexes[s.id]=new Ga);let T=!1;const P={};w.handleWrapJump(x);for(const O of p){const F=O.getBucket(s);F&&s.id===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(O.tileID,F,this.crossTileIDs)&&(T=!0),P[F.bucketInstanceId]=!0)}return w.removeStaleBuckets(P)&&(T=!0),T}pruneUnusedLayers(s){const p={};s.forEach(x=>{p[x]=!0});for(const x in this.layerIndexes)p[x]||delete this.layerIndexes[x]}}var Nu="void main() {fragColor=vec4(1.0);}";const lr={prelude:ci(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ci("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ci("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ci(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ci(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ci(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ci(Nu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ci(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ci(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ci("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ci("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:ci("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ci(Nu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ci(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ci(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ci(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ci(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ci(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ci(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ci(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ci(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ci(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:ci(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:ci(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ci(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ci(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ci(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ci("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ci("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ci("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ci("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ci(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ci("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ci(j,s){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=s.match(/in ([\w]+) ([\w]+)/g),w=j.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=T?T.concat(w):w,O={};return{fragmentSource:j=j.replace(p,(F,q,Y,ne,ee)=>(O[ee]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
in ${Y} ${ne} ${ee};
#else
uniform ${Y} ${ne} u_${ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ee}
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`)),vertexSource:s=s.replace(p,(F,q,Y,ne,ee)=>{const ue=ne==="float"?"vec2":"vec4",ye=ee.match(/color/)?"color":ue;return O[ee]?q==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${Y} ${ue} a_${ee};
out ${Y} ${ne} ${ee};
#else
uniform ${Y} ${ne} u_${ee};
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${ye}(a_${ee}, u_${ee}_t);
#else
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`:q==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${Y} ${ue} a_${ee};
#else
uniform ${Y} ${ne} u_${ee};
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${Y} ${ne} ${ee} = a_${ee};
#else
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${Y} ${ne} ${ee} = unpack_mix_${ye}(a_${ee}, u_${ee}_t);
#else
    ${Y} ${ne} ${ee} = u_${ee};
#endif
`}),staticAttributes:x,staticUniforms:P}}class So{constructor(s,p,x){this.vertexBuffer=s,this.indexBuffer=p,this.segments=x}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var jr=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const Wa="#define PROJECTION_MERCATOR",ui="mercator";class jo{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ui}get shaderDefine(){return Wa}get shaderPreludeCode(){return lr.projectionMercator}get vertexShaderPreludeCode(){return lr.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,p,x,w,T){if(this._cachedMesh)return this._cachedMesh;const P=new a.aL;P.emplaceBack(0,0),P.emplaceBack(a.$,0),P.emplaceBack(0,a.$),P.emplaceBack(a.$,a.$);const O=s.createVertexBuffer(P,jr.members),F=a.aM.simpleSegment(0,0,4,2),q=new a.aN;q.emplaceBack(1,0,2),q.emplaceBack(1,2,3);const Y=s.createIndexBuffer(q);return this._cachedMesh=new So(O,Y,F),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class Ea{constructor(s=0,p=0,x=0,w=0){if(isNaN(s)||s<0||isNaN(p)||p<0||isNaN(x)||x<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=p,this.left=x,this.right=w}interpolate(s,p,x){return p.top!=null&&s.top!=null&&(this.top=a.C.number(s.top,p.top,x)),p.bottom!=null&&s.bottom!=null&&(this.bottom=a.C.number(s.bottom,p.bottom,x)),p.left!=null&&s.left!=null&&(this.left=a.C.number(s.left,p.left,x)),p.right!=null&&s.right!=null&&(this.right=a.C.number(s.right,p.right,x)),this}getCenter(s,p){const x=a.ah((this.left+s-this.right)/2,0,s),w=a.ah((this.top+p-this.bottom)/2,0,p);return new a.P(x,w)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Ea(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Aa(j,s){if(!j.renderWorldCopies||j.lngRange)return;const p=s.lng-j.center.lng;s.lng+=p>180?-360:p<-180?360:0}function pr(j){return Math.max(0,Math.floor(j))}class Ms{constructor(s,p,x,w,T,P){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=P===void 0||!!P,this._minZoom=p||0,this._maxZoom=x||22,this._minPitch=w==null?0:w,this._maxPitch=T==null?60:T,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=pr(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ea,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,p,x){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=pr(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new Ea(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!x&&s.autoCalculateNearFarZ,p&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const p=a.aO(s,-180,180)*Math.PI/180;var x,w,T,P,O,F,q,Y,ne;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=_(),x=this._rotationMatrix,T=-this._bearingInRadians,P=(w=this._rotationMatrix)[0],O=w[1],F=w[2],q=w[3],Y=Math.sin(T),ne=Math.cos(T),x[0]=P*ne+F*Y,x[1]=O*ne+q*Y,x[2]=P*-Y+F*ne,x[3]=O*-Y+q*ne)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const p=a.ah(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const p=s/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(s){s=a.ah(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=a.ae(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const p=this.getConstrained(this._center,s).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=a.af(p),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,p){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,p,x){this._unmodified=!1,this._edgeInsets.interpolate(s,p,x),this._constrain(),this._calcMatrices()}resize(s,p,x=!0){this._width=s,this._height=p,x&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Lt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(s,p){return this._callbacks.getConstrained(s,p)}getCameraQueryGeometry(s,p){if(p.length===1)return[p[0],s];{const{minX:x,minY:w,maxX:T,maxY:P}=a.a2.fromPoints(p).extend(s);return[new a.P(x,w),new a.P(T,w),new a.P(T,P),new a.P(x,P),new a.P(x,w)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:p,zoom:x}=this.getConstrained(this.center,this.zoom);this.setCenter(p),this.setZoom(x),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=a.ag(new Float64Array(16));a.N(s,s,[this._width/2,-this._height/2,1]),a.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=a.ag(new Float64Array(16)),a.N(s,s,[1,-1,1]),a.M(s,s,[-1,-1,0]),a.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,p,x,w){const T=x!==void 0?x:this.bearing,P=w=w!==void 0?w:this.pitch,O=a.a1.fromLngLat(s,p),F=-Math.cos(a.ae(P)),q=Math.sin(a.ae(P)),Y=q*Math.sin(a.ae(T)),ne=-q*Math.cos(a.ae(T));let ee=this.elevation;const ue=p-ee;let ye;F*ue>=0||Math.abs(F)<.1?(ye=1e4,ee=p+ye*F):ye=-ue/F;let Te,Ce,Ee=a.aQ(1,O.y),Ie=0;do{if(Ie+=1,Ie>10)break;Ce=ye/Ee,Te=new a.a1(O.x+Y*Ce,O.y+ne*Ce),Ee=1/Te.meterInMercatorCoordinateUnits()}while(Math.abs(ye-Ce*Ee)>1e-12);return{center:Te.toLngLat(),elevation:ee,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/Ce/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const p=a.aj(1,this.center.lat)*this.worldSize,x=this.cameraToCenterDistance/p,w=a.a1.fromLngLat(this.center,this.elevation),T=Tt(this.center,this.elevation,this.pitch,this.bearing,x);this._elevation=s;const P=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),a.aQ(T.z,w.y),this.bearing,this.pitch);this._elevation=P.elevation,this._center=P.center,this.setZoom(P.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=a.aj(1,this.center.lat)*this.worldSize;return Tt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const p=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/p,s.canonical.y/p,1/p/a.$,1/p/a.$]}}class Ls{constructor(s,p){this.min=s,this.max=p,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(s){const p=[s%2==0,s<2],x=a.aT(this.min),w=a.aT(this.max);for(let T=0;T<p.length;T++)x[T]=p[T]?this.min[T]:this.center[T],w[T]=p[T]?this.center[T]:this.max[T];return w[2]=this.max[2],new Ls(x,w)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let p=!0;for(let x=0;x<s.planes.length;x++){const w=this.intersectsPlane(s.planes[x]);if(w===0)return 0;w===1&&(p=!1)}return p?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let p=s[3],x=s[3];for(let w=0;w<3;w++)s[w]>0?(p+=s[w]*this.min[w],x+=s[w]*this.max[w]):(x+=s[w]*this.min[w],p+=s[w]*this.max[w]);return p>=0?2:x<0?0:1}}class ws{distanceToTile2d(s,p,x,w){const T=w.distanceX([s,p]),P=w.distanceY([s,p]);return Math.hypot(T,P)}getWrap(s,p,x){return x}getTileBoundingVolume(s,p,x,w){var T,P;let O=0,F=0;if(w!=null&&w.terrain){const Y=new a.Z(s.z,p,s.z,s.x,s.y),ne=w.terrain.getMinMaxElevation(Y);O=(T=ne.minElevation)!==null&&T!==void 0?T:Math.min(0,x),F=(P=ne.maxElevation)!==null&&P!==void 0?P:Math.max(0,x)}const q=1<<s.z;return new Ls([p+s.x/q,s.y/q,O],[p+(s.x+1)/q,(s.y+1)/q,F])}allowVariableZoom(s,p){const x=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,w=a.ah(78.5-x/2,0,60);return!!p.terrain||s.pitch>w}allowWorldCopies(){return!0}prepareNextFrame(){}}class vi{constructor(s,p,x){this.points=s,this.planes=p,this.aabb=x}static fromInvProjectionMatrix(s,p=1,x=0,w,T){const P=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,x),F=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ee=>function(ue,ye,Te,Ce){const Ee=a.aw([],ue,ye),Ie=1/Ee[3]/Te*Ce;return a.aY(Ee,Ee,[Ie,Ie,1/Ee[3],Ie])}(ee,s,p,O));w&&function(ee,ue,ye,Te){const Ce=Te?4:0,Ee=Te?0:4;let Ie=0;const Be=[],Le=[];for(let Fe=0;Fe<4;Fe++){const it=a.aU([],ee[Fe+Ee],ee[Fe+Ce]),Mt=a.aZ(it);a.aR(it,it,1/Mt),Be.push(Mt),Le.push(it)}for(let Fe=0;Fe<4;Fe++){const it=a.a_(ee[Fe+Ce],Le[Fe],ye);Ie=it!==null&&it>=0?Math.max(Ie,it):Math.max(Ie,Be[Fe])}const qe=function(Fe,it){const Mt=a.aU([],Fe[it[0]],Fe[it[1]]),_t=a.aU([],Fe[it[2]],Fe[it[1]]),wt=[0,0,0,0];return a.aV(wt,a.aW([],Mt,_t)),wt[3]=-a.aX(wt,Fe[it[0]]),wt}(ee,ue),Ke=function(Fe,it){const Mt=a.a$(Fe),_t=a.b0([],Fe,1/Mt),wt=a.aU([],it,a.aR([],_t,a.aX(it,_t))),St=a.a$(wt);if(St>0){const rn=Math.sqrt(1-_t[3]*_t[3]),an=a.aR([],_t,-_t[3]),Yt=a.aS([],an,a.aR([],wt,rn/St));return a.b1(it,Yt)}return null}(ye,qe);if(Ke!==null){const Fe=Ke/a.aX(Le[0],qe);Ie=Math.min(Ie,Fe)}for(let Fe=0;Fe<4;Fe++){const it=Math.min(Ie,Be[Fe]);ee[Fe+Ee]=[ee[Fe+Ce][0]+Le[Fe][0]*it,ee[Fe+Ce][1]+Le[Fe][1]*it,ee[Fe+Ce][2]+Le[Fe][2]*it,1]}}(F,P[0],w,T);const q=P.map(ee=>{const ue=a.aU([],F[ee[0]],F[ee[1]]),ye=a.aU([],F[ee[2]],F[ee[1]]),Te=a.aV([],a.aW([],ue,ye)),Ce=-a.aX(Te,F[ee[1]]);return Te.concat(Ce)}),Y=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ne=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ee of F)for(let ue=0;ue<3;ue++)Y[ue]=Math.min(Y[ue],ee[ue]),ne[ue]=Math.max(ne[ue],ee[ue]);return new vi(F,q,new Ls(Y,ne))}}class Co{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,p,x){return this._helper.interpolatePadding(s,p,x)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,p,x=!0){this._helper.resize(s,p,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,p){this._helper.overrideNearFarZ(s,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,p){}constructor(s,p,x,w,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ms({calcMatrices:()=>{this._calcMatrices()},getConstrained:(P,O)=>this.getConstrained(P,O)},s,p,x,w,T),this._coveringTilesDetailsProvider=new ws}clone(){const s=new Co;return s.apply(this),s}apply(s,p,x){this._helper.apply(s,p,x)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const p=[new a.b2(0,s)];if(this._helper._renderWorldCopies){const x=this.screenPointToMercatorCoordinate(new a.P(0,0)),w=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),P=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),O=Math.floor(Math.min(x.x,w.x,T.x,P.x)),F=Math.floor(Math.max(x.x,w.x,T.x,P.x)),q=1;for(let Y=O-q;Y<=F+q;Y++)Y!==0&&p.push(new a.b2(Y,s))}return p}getCameraFrustum(){return vi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const p=this.screenPointToLocation(this.centerPoint,s),x=s?s.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(x)}setLocationAtPoint(s,p){const x=a.aj(this.elevation,this.center.lat),w=this.screenPointToMercatorCoordinateAtZ(p,x),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,x),P=a.a1.fromLngLat(s),O=new a.a1(P.x-(w.x-T.x),P.y-(w.y-T.y));this.setCenter(O==null?void 0:O.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,p){return p?this.coordinatePoint(a.a1.fromLngLat(s),p.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(s))}screenPointToLocation(s,p){var x;return(x=this.screenPointToMercatorCoordinate(s,p))===null||x===void 0?void 0:x.toLngLat()}screenPointToMercatorCoordinate(s,p){if(p){const x=p.pointCoordinate(s);if(x!=null)return x}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,p){const x=p||0,w=[s.x,s.y,0,1],T=[s.x,s.y,1,1];a.aw(w,w,this._pixelMatrixInverse),a.aw(T,T,this._pixelMatrixInverse);const P=w[3],O=T[3],F=w[1]/P,q=T[1]/O,Y=w[2]/P,ne=T[2]/O,ee=Y===ne?0:(x-Y)/(ne-Y);return new a.a1(a.C.number(w[0]/P,T[0]/O,ee)/this.worldSize,a.C.number(F,q,ee)/this.worldSize,x)}coordinatePoint(s,p=0,x=this._pixelMatrix){const w=[s.x*this.worldSize,s.y*this.worldSize,p,1];return a.aw(w,w,x),new a.P(w[0]/w[3],w[1]/w[3])}getBounds(){const s=Math.max(0,this._helper._height/2-nt(this));return new Lt().extend(this.screenPointToLocation(new a.P(0,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(s,p){return p?p.pointCoordinate(s)!=null:s.y>this.height/2-nt(this)}calculatePosMatrix(s,p=!1,x){var w;const T=(w=s.key)!==null&&w!==void 0?w:a.b3(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),P=p?this._alignedPosMatrixCache:this._posMatrixCache;if(P.has(T)){const q=P.get(T);return x?q.f32:q.f64}const O=et(s,this.worldSize);a.O(O,p?this._alignedProjMatrix:this._viewProjMatrix,O);const F={f64:O,f32:new Float32Array(O)};return P.set(T,F),x?F.f32:F.f64}calculateFogMatrix(s){const p=s.key,x=this._fogMatrixCacheF32;if(x.has(p))return x.get(p);const w=et(s,this.worldSize);return a.O(w,this._fogMatrix,w),x.set(p,new Float32Array(w)),x.get(p)}getConstrained(s,p){p=a.ah(+p,this.minZoom,this.maxZoom);const x={center:new a.S(s.lng,s.lat),zoom:p};let w=this._helper._lngRange;!this._helper._renderWorldCopies&&w===null&&(w=[-179.9999999999,179.9999999999]);const T=this.tileSize*a.af(x.zoom);let P=0,O=T,F=0,q=T,Y=0,ne=0;const{x:ee,y:ue}=this.size;if(this._helper._latRange){const Be=this._helper._latRange;P=a.U(Be[1])*T,O=a.U(Be[0])*T,O-P<ue&&(Y=ue/(O-P))}w&&(F=a.aO(a.V(w[0])*T,0,T),q=a.aO(a.V(w[1])*T,0,T),q<F&&(q+=T),q-F<ee&&(ne=ee/(q-F)));const{x:ye,y:Te}=Re(T,s);let Ce,Ee;const Ie=Math.max(ne||0,Y||0);if(Ie){const Be=new a.P(ne?(q+F)/2:ye,Y?(O+P)/2:Te);return x.center=Q(T,Be).wrap(),x.zoom+=a.ak(Ie),x}if(this._helper._latRange){const Be=ue/2;Te-Be<P&&(Ee=P+Be),Te+Be>O&&(Ee=O-Be)}if(w){const Be=(F+q)/2;let Le=ye;this._helper._renderWorldCopies&&(Le=a.aO(ye,Be-T/2,Be+T/2));const qe=ee/2;Le-qe<F&&(Ce=F+qe),Le+qe>q&&(Ce=q-qe)}if(Ce!==void 0||Ee!==void 0){const Be=new a.P(Ce!=null?Ce:ye,Ee!=null?Ee:Te);x.center=Q(T,Be).wrap()}return x}calculateCenterFromCameraLngLatAlt(s,p,x,w){return this._helper.calculateCenterFromCameraLngLatAlt(s,p,x,w)}_calculateNearFarZIfNeeded(s,p,x){if(!this._helper.autoCalculateNearFarZ)return;const w=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=s-w*this._helper._pixelPerMeter/Math.cos(p),P=w<0?T:s,O=Math.PI/2+this.pitchInRadians,F=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+x.y/this.height),q=Math.sin(F)*P/Math.sin(a.ah(Math.PI-O-F,.01,Math.PI-.01)),Y=nt(this),ne=Math.atan(Y/this._helper.cameraToCenterDistance),ee=a.ae(.75),ue=ne>ee?2*ne*(.5+x.y/(2*Y)):ee,ye=Math.sin(ue)*P/Math.sin(a.ah(Math.PI-O-ue,.01,Math.PI-.01)),Te=Math.min(q,ye);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*Te+P),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,p=Re(this.worldSize,this.center),x=p.x,w=p.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const T=a.ae(Math.min(this.pitch,ke)),P=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let O;this._calculateNearFarZIfNeeded(P,T,s),O=new Float64Array(16),a.b4(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,O),O[8]=2*-s.x/this._helper._width,O[9]=2*s.y/this._helper._height,this._projectionMatrix=a.b5(O),a.N(O,O,[1,-1,1]),a.M(O,O,[0,0,-this._helper.cameraToCenterDistance]),a.b6(O,O,-this.rollInRadians),a.b7(O,O,this.pitchInRadians),a.b6(O,O,-this.bearingInRadians),a.M(O,O,[-x,-w,0]),this._mercatorMatrix=a.N([],O,[this.worldSize,this.worldSize,this.worldSize]),a.N(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),a.M(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=a.aq([],O);const F=[0,0,-1,1];a.aw(F,F,this._invViewProjMatrix),this._cameraPosition=[F[0]/F[3],F[1]/F[3],F[2]/F[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,P,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-x,-w,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const q=this._helper._width%2/2,Y=this._helper._height%2/2,ne=Math.cos(this.bearingInRadians),ee=Math.sin(-this.bearingInRadians),ue=x-Math.round(x)+ne*q+ee*Y,ye=w-Math.round(w)+ne*Y+ee*q,Te=new Float64Array(O);if(a.M(Te,Te,[ue>.5?ue-1:ue,ye>.5?ye-1:ye,0]),this._alignedProjMatrix=Te,O=a.aq(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=[s.x*this.worldSize,s.y*this.worldSize,0,1];return a.aw(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=a.aj(1,this.center.lat)*this.worldSize;return Tt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,p){const x=a.a1.fromLngLat(s),w=[x.x*this.worldSize,x.y*this.worldSize,p,1];return a.aw(w,w,this._viewProjMatrix),w[2]/w[3]}getProjectionData(s){const{overscaledTileID:p,aligned:x,applyTerrainMatrix:w}=s,T=this._helper.getMercatorTileCoordinates(p),P=p?this.calculatePosMatrix(p,x,!0):null;let O;return O=p&&p.terrainRttPosMatrix32f&&w?p.terrainRttPosMatrix32f:P||a.b8(),{mainMatrix:O,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,p,x){return 1}transformLightDirection(s){return a.aT(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,p,x,w){const T=this.calculatePosMatrix(x);let P;w?(P=[s,p,w(s,p),1],a.aw(P,P,T)):(P=[s,p,0,1],Na(P,P,T));const O=P[3];return{point:new a.P(P[0]/O,P[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(s){for(const p of s)this.calculatePosMatrix(p)}getMatrixForModel(s,p){const x=a.a1.fromLngLat(s,p),w=x.meterInMercatorCoordinateUnits(),T=a.b9();return a.M(T,T,[x.x,x.y,x.z]),a.b6(T,T,Math.PI),a.b7(T,T,Math.PI/2),a.N(T,T,[-w,w,w]),T}getProjectionDataForCustomLayer(s=!0){const p=new a.Z(0,0,0,0,0),x=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:s}),w=et(p,this.worldSize);a.O(w,this._viewProjMatrix,w),x.tileMercatorCoords=[0,0,1,1];const T=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],P=a.ba();return a.N(P,w,T),x.fallbackMatrix=P,x.mainMatrix=P,x}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function Zs(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function gs(j){if(j.useSlerp)if(j.k<1){const s=a.bb(j.startEulerAngles.roll,j.startEulerAngles.pitch,j.startEulerAngles.bearing),p=a.bb(j.endEulerAngles.roll,j.endEulerAngles.pitch,j.endEulerAngles.bearing),x=new Float64Array(4);a.bc(x,s,p,j.k);const w=a.bd(x);j.tr.setRoll(w.roll),j.tr.setPitch(w.pitch),j.tr.setBearing(w.bearing)}else j.tr.setRoll(j.endEulerAngles.roll),j.tr.setPitch(j.endEulerAngles.pitch),j.tr.setBearing(j.endEulerAngles.bearing);else j.tr.setRoll(a.C.number(j.startEulerAngles.roll,j.endEulerAngles.roll,j.k)),j.tr.setPitch(a.C.number(j.startEulerAngles.pitch,j.endEulerAngles.pitch,j.k)),j.tr.setBearing(a.C.number(j.startEulerAngles.bearing,j.endEulerAngles.bearing,j.k))}function rs(j,s,p,x,w){const T=w.padding,P=Re(w.worldSize,p.getNorthWest()),O=Re(w.worldSize,p.getNorthEast()),F=Re(w.worldSize,p.getSouthEast()),q=Re(w.worldSize,p.getSouthWest()),Y=a.ae(-x),ne=P.rotate(Y),ee=O.rotate(Y),ue=F.rotate(Y),ye=q.rotate(Y),Te=new a.P(Math.max(ne.x,ee.x,ye.x,ue.x),Math.max(ne.y,ee.y,ye.y,ue.y)),Ce=new a.P(Math.min(ne.x,ee.x,ye.x,ue.x),Math.min(ne.y,ee.y,ye.y,ue.y)),Ee=Te.sub(Ce),Ie=(w.width-(T.left+T.right+s.left+s.right))/Ee.x,Be=(w.height-(T.top+T.bottom+s.top+s.bottom))/Ee.y;if(Be<0||Ie<0)return void Zs();const Le=Math.min(a.ak(w.scale*Math.min(Ie,Be)),j.maxZoom),qe=a.P.convert(j.offset),Ke=new a.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(a.ae(x)),Fe=qe.add(Ke).mult(w.scale/a.af(Le));return{center:Q(w.worldSize,P.add(F).div(2).sub(Fe)),zoom:Le,bearing:x}}class Pa{get useGlobeControls(){return!1}handlePanInertia(s,p){const x=s.mag(),w=Math.abs(nt(p));return{easingOffset:s.mult(Math.min(.75*w/x,1)),easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(s,p){s.bearingDelta&&p.setBearing(p.bearing+s.bearingDelta),s.pitchDelta&&p.setPitch(p.pitch+s.pitchDelta),s.rollDelta&&p.setRoll(p.roll+s.rollDelta),s.zoomDelta&&p.setZoom(p.zoom+s.zoomDelta)}handleMapControlsPan(s,p,x){s.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(x,s.around)}cameraForBoxAndBearing(s,p,x,w,T){return rs(s,p,x,w,T)}handleJumpToCenterZoom(s,p){s.zoom!==(p.zoom!==void 0?+p.zoom:s.zoom)&&s.setZoom(+p.zoom),p.center!==void 0&&s.setCenter(a.S.convert(p.center))}handleEaseTo(s,p){const x=s.zoom,w=s.padding,T={roll:s.roll,pitch:s.pitch,bearing:s.bearing},P={roll:p.roll===void 0?s.roll:p.roll,pitch:p.pitch===void 0?s.pitch:p.pitch,bearing:p.bearing===void 0?s.bearing:p.bearing},O=p.zoom!==void 0,F=!s.isPaddingEqual(p.padding);let q=!1;const Y=O?+p.zoom:s.zoom;let ne=s.centerPoint.add(p.offsetAsPoint);const ee=s.screenPointToLocation(ne),{center:ue,zoom:ye}=s.getConstrained(a.S.convert(p.center||ee),Y!=null?Y:x);Aa(s,ue);const Te=Re(s.worldSize,ee),Ce=Re(s.worldSize,ue).sub(Te),Ee=a.af(ye-x);return q=ye!==x,{easeFunc:Ie=>{if(q&&s.setZoom(a.C.number(x,ye,Ie)),a.be(T,P)||gs({startEulerAngles:T,endEulerAngles:P,tr:s,k:Ie,useSlerp:T.roll!=P.roll}),F&&(s.interpolatePadding(w,p.padding,Ie),ne=s.centerPoint.add(p.offsetAsPoint)),p.around)s.setLocationAtPoint(p.around,p.aroundPoint);else{const Be=a.af(s.zoom-x),Le=ye>x?Math.min(2,Ee):Math.max(.5,Ee),qe=Math.pow(Le,1-Ie),Ke=Q(s.worldSize,Te.add(Ce.mult(Ie*qe)).mult(Be));s.setLocationAtPoint(s.renderWorldCopies?Ke.wrap():Ke,ne)}},isZooming:q,elevationCenter:ue}}handleFlyTo(s,p){const x=p.zoom!==void 0,w=s.zoom,T=s.getConstrained(a.S.convert(p.center||p.locationAtOffset),x?+p.zoom:w),P=T.center,O=T.zoom;Aa(s,P);const F=Re(s.worldSize,p.locationAtOffset),q=Re(s.worldSize,P).sub(F),Y=q.mag(),ne=a.af(O-w);let ee;if(p.minZoom!==void 0){const ue=Math.min(+p.minZoom,w,O),ye=s.getConstrained(P,ue).zoom;ee=a.af(ye-w)}return{easeFunc:(ue,ye,Te,Ce)=>{s.setZoom(ue===1?O:w+a.ak(ye));const Ee=ue===1?P:Q(s.worldSize,F.add(q.mult(Te)).mult(ye));s.setLocationAtPoint(s.renderWorldCopies?Ee.wrap():Ee,Ce)},scaleOfZoom:ne,targetCenter:P,scaleOfMinZoom:ee,pixelPathLength:Y}}}class Mi{constructor(s,p,x){this.blendFunction=s,this.blendColor=p,this.mask=x}}Mi.Replace=[1,0],Mi.disabled=new Mi(Mi.Replace,a.bf.transparent,[!1,!1,!1,!1]),Mi.unblended=new Mi(Mi.Replace,a.bf.transparent,[!0,!0,!0,!0]),Mi.alphaBlended=new Mi([1,771],a.bf.transparent,[!0,!0,!0,!0]);const Zi=2305;class di{constructor(s,p,x){this.enable=s,this.mode=p,this.frontFace=x}}di.disabled=new di(!1,1029,Zi),di.backCCW=new di(!0,1029,Zi),di.frontCCW=new di(!0,1028,Zi);class Kn{constructor(s,p,x){this.func=s,this.mask=p,this.range=x}}Kn.ReadOnly=!1,Kn.ReadWrite=!0,Kn.disabled=new Kn(519,Kn.ReadOnly,[0,1]);const Ys=7680;class Yn{constructor(s,p,x,w,T,P){this.test=s,this.ref=p,this.mask=x,this.fail=w,this.depthFail=T,this.pass=P}}Yn.disabled=new Yn({func:519,mask:0},0,0,Ys,Ys,Ys);const _l=new WeakMap;function Es(j){var s;if(_l.has(j))return _l.get(j);{const p=(s=j.getParameter(j.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return _l.set(j,p),p}}class Ss{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const p=s.context,x=p.gl;this._texFormat=x.RGBA,this._texType=x.UNSIGNED_BYTE;const w=new a.aL;w.emplaceBack(-1,-1),w.emplaceBack(2,-1),w.emplaceBack(-1,2);const T=new a.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new So(p.createVertexBuffer(w,jr.members),p.createIndexBuffer(T),a.aM.simpleSegment(0,0,w.length,T.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(x.TEXTURE1);const P=x.createTexture();x.bindTexture(x.TEXTURE_2D,P),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texImage2D(x.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(P),Es(x)&&(this._pbo=x.createBuffer(),x.bindBuffer(x.PIXEL_PACK_BUFFER,this._pbo),x.bufferData(x.PIXEL_PACK_BUFFER,4,x.STREAM_READ),x.bindBuffer(x.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,p){const x=this._updateCount;return this._readbackQueue?x>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():x>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,p=s.gl;s.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,p){const x=this._cachedRenderContext.context,w=x.gl;if(this._bindFramebuffer(),x.viewport.set([0,0,this._texWidth,this._texHeight]),x.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(x,w.TRIANGLES,Kn.disabled,Yn.disabled,Mi.unblended,di.disabled,((T,P)=>({u_input:T,u_output_expected:P}))(s,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Es(w)){w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.readBuffer(w.COLOR_ATTACHMENT0),w.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),w.bindBuffer(w.PIXEL_PACK_BUFFER,null);const T=w.fenceSync(w.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Es(s)){const p=s.clientWaitSync(this._readbackQueue.sync,0,0);if(p===s.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ss._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let p=0;return p+=s[0]/256,p+=s[1]/65536,p+=s[2]/16777216,s[3]<127&&(p=-p),p/128}}const re=a.$/128;function me(j,s){const p=j.granularity!==void 0?Math.max(j.granularity,1):1,x=p+(j.generateBorders?2:0),w=p+(j.extendToNorthPole||j.generateBorders?1:0)+(j.extendToSouthPole||j.generateBorders?1:0),T=x+1,P=w+1,O=j.generateBorders?-1:0,F=j.generateBorders||j.extendToNorthPole?-1:0,q=p+(j.generateBorders?1:0),Y=p+(j.generateBorders||j.extendToSouthPole?1:0),ne=T*P,ee=x*w*6,ue=T*P>65536;if(ue&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ye=ue||s==="32bit",Te=new Int16Array(2*ne);let Ce=0;for(let Be=F;Be<=Y;Be++)for(let Le=O;Le<=q;Le++){let qe=Le/p*a.$;Le===-1&&(qe=-re),Le===p+1&&(qe=a.$+re);let Ke=Be/p*a.$;Be===-1&&(Ke=j.extendToNorthPole?a.bh:-re),Be===p+1&&(Ke=j.extendToSouthPole?a.bi:a.$+re),Te[Ce++]=qe,Te[Ce++]=Ke}const Ee=ye?new Uint32Array(ee):new Uint16Array(ee);let Ie=0;for(let Be=0;Be<w;Be++)for(let Le=0;Le<x;Le++){const qe=Le+1+Be*T,Ke=Le+(Be+1)*T,Fe=Le+1+(Be+1)*T;Ee[Ie++]=Le+Be*T,Ee[Ie++]=Ke,Ee[Ie++]=qe,Ee[Ie++]=qe,Ee[Ie++]=Ke,Ee[Ie++]=Fe}return{vertices:Te.buffer.slice(0),indices:Ee.buffer.slice(0),uses32bitIndices:ye}}const Ne=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class Pe{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return lr.projectionGlobe}get vertexShaderPreludeCode(){return lr.projectionMercator.vertexSource}get subdivisionGranularity(){return Ne}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new Ss(s));const p=a.U(this._errorQueryLatitudeDegrees),x=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,w=this._errorMeasurement.updateErrorLoop(p,x),T=A.now();w!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=w,this._errorMeasurementLastChangeTime=T);const P=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(P))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,p,x,w,T){const P=(T==="stencil"?Ne.stencil:Ne.tile).getGranularityForZoomLevel(p.z);return this._getMesh(s,{granularity:P,generateBorders:x,extendToNorthPole:p.y===0&&w,extendToSouthPole:p.y===(1<<p.z)-1&&w})}_getMesh(s,p){const x=this._getMeshKey(p);if(x in this._tileMeshCache)return this._tileMeshCache[x];const w=function(T,P){const O=me(P,"16bit"),F=a.aL.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),q=a.aN.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new So(T.createVertexBuffer(F,jr.members),T.createIndexBuffer(q),a.aM.simpleSegment(0,0,F.length,q.length))}(s,p);return this._tileMeshCache[x]=w,w}recalculate(s){}hasTransition(){const s=A.now();let p=!1;return p=p||(s-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const pt=new a.r({type:new a.D(a.v.projection.type)});class yt extends a.E{constructor(s){super(),this._transitionable=new a.t(pt,void 0),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new jo,this._verticalPerspectiveProjection=new Pe}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof a.bm){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,p,x,w,T){return this.currentProjection.getMeshFromTileID(s,p,x,w,T)}setProjection(s){this._transitionable.setValue("type",(s==null?void 0:s.type)||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function kt(j){const s=yn(j.worldSize,j.center.lat);return 2*Math.PI*s}function dn(j,s,p,x,w){const T=1/(1<<w),P=s/a.$*T+x*T,O=a.bo((j/a.$*T+p*T)*Math.PI*2+Math.PI,2*Math.PI),F=2*Math.atan(Math.exp(Math.PI-P*Math.PI*2))-.5*Math.PI,q=Math.cos(F),Y=new Float64Array(3);return Y[0]=Math.sin(O)*q,Y[1]=Math.sin(F),Y[2]=Math.cos(O)*q,Y}function kn(j){return function(s,p){const x=Math.cos(p),w=new Float64Array(3);return w[0]=Math.sin(s)*x,w[1]=Math.sin(p),w[2]=Math.cos(s)*x,w}(j.lng*Math.PI/180,j.lat*Math.PI/180)}function yn(j,s){return j/(2*Math.PI)/Math.cos(s*Math.PI/180)}function Cn(j){const s=Math.asin(j[1])/Math.PI*180,p=Math.sqrt(j[0]*j[0]+j[2]*j[2]);if(p>1e-6){const x=j[0]/p,w=Math.acos(j[2]/p),T=(x>0?w:-w)/Math.PI*180;return new a.S(a.aO(T,-180,180),s)}return new a.S(0,s)}function Un(j){return Math.cos(j*Math.PI/180)}function oi(j,s){const p=Un(j),x=Un(s);return a.ak(x/p)}function ri(j,s){const p=j.rotate(s.bearingInRadians),x=s.zoom+oi(s.center.lat,0),w=a.bk(1/Un(s.center.lat),1/Un(Math.min(Math.abs(s.center.lat),60)),a.bn(x,7,3,0,1)),T=360/kt({worldSize:s.worldSize,center:{lat:s.center.lat}});return new a.S(s.center.lng-p.x*T*w,a.ah(s.center.lat+p.y*T,-a.ai,a.ai))}function qn(j){const s=.5*j,p=Math.sin(s),x=Math.cos(s);return Math.log(p+x)-Math.log(x-p)}function Rn(j,s,p,x){const w=j.lat+p*x;if(Math.abs(p)>1){const T=(Math.sign(j.lat+p)!==Math.sign(j.lat)?-Math.abs(j.lat):Math.abs(j.lat))*Math.PI/180,P=Math.abs(j.lat+p)*Math.PI/180,O=qn(T+x*(P-T)),F=qn(T),q=qn(P);return new a.S(j.lng+s*((O-F)/(q-F)),w)}return new a.S(j.lng+s*x,w)}class mr{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,p,x,w){const T=`${s.z}_${s.x}_${s.y}_${w!=null&&w.terrain?"t":""}`,P=this._cache.get(T);if(P)return P;const O=this._cachePrevious.get(T);if(O)return this._cache.set(T,O),O;const F=this._boundingVolumeFactory(s,p,x,w);return this._cache.set(T,F),this._hadAnyChanges=!0,F}}class Si{constructor(s,p,x,w){this.min=x,this.max=w,this.points=s,this.planes=p}static fromAabb(s,p){const x=[];for(let w=0;w<8;w++)x.push([1&~w?s[0]:p[0],(w>>1&1)==1?p[1]:s[1],(w>>2&1)==1?p[2]:s[2]]);return new Si(x,[[-1,0,0,p[0]],[1,0,0,-s[0]],[0,-1,0,p[1]],[0,1,0,-s[1]],[0,0,-1,p[2]],[0,0,1,-s[2]]],s,p)}static fromCenterSizeAngles(s,p,x){const w=a.br([],x[0],x[1],x[2]),T=a.bs([],[p[0],0,0],w),P=a.bs([],[0,p[1],0],w),O=a.bs([],[0,0,p[2]],w),F=[...s],q=[...s];for(let ne=0;ne<8;ne++)for(let ee=0;ee<3;ee++){const ue=s[ee]+T[ee]*(1&~ne?-1:1)+P[ee]*((ne>>1&1)==1?1:-1)+O[ee]*((ne>>2&1)==1?1:-1);F[ee]=Math.min(F[ee],ue),q[ee]=Math.max(q[ee],ue)}const Y=[];for(let ne=0;ne<8;ne++){const ee=[...s];a.aS(ee,ee,a.aR([],T,1&~ne?-1:1)),a.aS(ee,ee,a.aR([],P,(ne>>1&1)==1?1:-1)),a.aS(ee,ee,a.aR([],O,(ne>>2&1)==1?1:-1)),Y.push(ee)}return new Si(Y,[[...T,-a.aX(T,Y[0])],[...P,-a.aX(P,Y[0])],[...O,-a.aX(O,Y[0])],[-T[0],-T[1],-T[2],-a.aX(T,Y[7])],[-P[0],-P[1],-P[2],-a.aX(P,Y[7])],[-O[0],-O[1],-O[2],-a.aX(O,Y[7])]],F,q)}intersectsFrustum(s){let p=!0;const x=this.points.length,w=this.planes.length,T=s.planes.length,P=s.points.length;for(let O=0;O<T;O++){const F=s.planes[O];let q=0;for(let Y=0;Y<x;Y++){const ne=this.points[Y];F[0]*ne[0]+F[1]*ne[1]+F[2]*ne[2]+F[3]>=0&&q++}if(q===0)return 0;q<x&&(p=!1)}if(p)return 2;for(let O=0;O<w;O++){const F=this.planes[O];let q=0;for(let Y=0;Y<P;Y++){const ne=s.points[Y];F[0]*ne[0]+F[1]*ne[1]+F[2]*ne[2]+F[3]>=0&&q++}if(q===0)return 0}return 1}intersectsPlane(s){const p=this.points.length;let x=0;for(let w=0;w<p;w++){const T=this.points[w];s[0]*T[0]+s[1]*T[1]+s[2]*T[2]+s[3]>=0&&x++}return x===p?2:x===0?0:1}}function ts(j,s,p){const x=j-s;return x<0?-x:Math.max(0,x-p)}function As(j,s,p,x,w){const T=j-p;let P;return P=T<0?Math.min(-T,1+T-w):T>1?Math.min(Math.max(T-w,0),1-T):0,Math.max(P,ts(s,x,w))}class Uo{constructor(){this._boundingVolumeCache=new mr(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,p,x,w){const T=1<<x.z,P=1/T,O=x.x/T,F=x.y/T;let q=2;return q=Math.min(q,As(s,p,O,F,P)),q=Math.min(q,As(s,p,O+.5,-F-P,P)),q=Math.min(q,As(s,p,O+.5,2-F-P,P)),q}getWrap(s,p,x){const w=1<<p.z,T=1/w,P=p.x/w,O=ts(s.x,P,T),F=ts(s.x,P-1,T),q=ts(s.x,P+1,T),Y=Math.min(O,F,q);return Y===q?1:Y===F?-1:0}allowVariableZoom(s,p){return dt(s,p)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,p,x,w){return this._boundingVolumeCache.getTileBoundingVolume(s,p,x,w)}_computeTileBoundingVolume(s,p,x,w){var T,P;let O=0,F=0;if(w!=null&&w.terrain){const q=new a.Z(s.z,p,s.z,s.x,s.y),Y=w.terrain.getMinMaxElevation(q);O=(T=Y.minElevation)!==null&&T!==void 0?T:Math.min(0,x),F=(P=Y.maxElevation)!==null&&P!==void 0?P:Math.max(0,x)}if(O/=a.bu,F/=a.bu,O+=1,F+=1,s.z<=0)return Si.fromAabb([-F,-F,-F],[F,F,F]);if(s.z===1)return Si.fromAabb([s.x===0?-F:0,s.y===0?0:-F,-F],[s.x===0?0:F,s.y===0?F:0,F]);{const q=[dn(0,0,s.x,s.y,s.z),dn(a.$,0,s.x,s.y,s.z),dn(a.$,a.$,s.x,s.y,s.z),dn(0,a.$,s.x,s.y,s.z)],Y=[];for(const wt of q)Y.push(a.aR([],wt,F));if(F!==O)for(const wt of q)Y.push(a.aR([],wt,O));s.y===0&&Y.push([0,1,0]),s.y===(1<<s.z)-1&&Y.push([0,-1,0]);const ne=[1,1,1],ee=[-1,-1,-1];for(const wt of Y)for(let St=0;St<3;St++)ne[St]=Math.min(ne[St],wt[St]),ee[St]=Math.max(ee[St],wt[St]);const ue=dn(a.$/2,a.$/2,s.x,s.y,s.z),ye=a.aW([],[0,1,0],ue);a.aV(ye,ye);const Te=a.aW([],ue,ye);a.aV(Te,Te);const Ce=a.aW([],q[2],q[1]);a.aV(Ce,Ce);const Ee=a.aW([],q[0],q[3]);a.aV(Ee,Ee),Y.push(a.aR([],ue,F)),s.y>=(1<<s.z)/2&&Y.push(a.aR([],dn(a.$/2,0,s.x,s.y,s.z),F)),s.y<(1<<s.z)/2&&Y.push(a.aR([],dn(a.$/2,a.$,s.x,s.y,s.z),F));const Ie=Za(ue,Y),Be=Za(Te,Y),Le=[-ue[0],-ue[1],-ue[2],Ie.max],qe=[ue[0],ue[1],ue[2],-Ie.min],Ke=[-Te[0],-Te[1],-Te[2],Be.max],Fe=[Te[0],Te[1],Te[2],-Be.min],it=[...Ce,0],Mt=[...Ee,0],_t=[];return s.y===0?_t.push(a.bt(Mt,it,Le),a.bt(Mt,it,qe)):_t.push(a.bt(Ke,it,Le),a.bt(Ke,it,qe),a.bt(Ke,Mt,Le),a.bt(Ke,Mt,qe)),s.y===(1<<s.z)-1?_t.push(a.bt(Mt,it,Le),a.bt(Mt,it,qe)):_t.push(a.bt(Fe,it,Le),a.bt(Fe,it,qe),a.bt(Fe,Mt,Le),a.bt(Fe,Mt,qe)),new Si(_t,[Le,qe,Ke,Fe,it,Mt],ne,ee)}}}function Za(j,s){let p=1/0,x=-1/0;for(const w of s){const T=a.aX(j,w);p=Math.min(p,T),x=Math.max(x,T)}return{min:p,max:x}}class Ya{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,p,x){return this._helper.interpolatePadding(s,p,x)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,p){this._helper.resize(s,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,p){this._helper.overrideNearFarZ(s,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ms({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,p)=>this.getConstrained(s,p)}),this._coveringTilesDetailsProvider=new Uo}clone(){const s=new Ya;return s.apply(this),s}apply(s,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=a.bp();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:p,applyGlobeMatrix:x}=s,w=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:w,clippingPlane:this._cachedClippingPlane,projectionTransition:x?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const p=this.pitchInRadians,x=this.cameraToCenterDistance/s,w=Math.sin(p)*x,T=Math.cos(p)*x+1,P=1/Math.sqrt(w*w+T*T)*1;let O=-w,F=T;const q=Math.sqrt(O*O+F*F);O/=q,F/=q;const Y=[0,O,F];a.bw(Y,Y,[0,0,0],-this.bearingInRadians),a.bx(Y,Y,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(Y,Y,[0,0,0],this.center.lng*Math.PI/180);const ne=1/a.aZ(Y);return a.aR(Y,Y,ne),[...Y,-P*ne]}isLocationOccluded(s){return!this.isSurfacePointVisible(kn(s))}transformLightDirection(s){const p=this._helper._center.lng*Math.PI/180,x=this._helper._center.lat*Math.PI/180,w=Math.cos(x),T=[Math.sin(p)*w,Math.sin(x),Math.cos(p)*w],P=[T[2],0,-T[0]],O=[0,0,0];a.aW(O,P,T),a.aV(P,P),a.aV(O,O);const F=[0,0,0];return a.aV(F,[P[0]*s[0]+O[0]*s[1]+T[0]*s[2],P[1]*s[0]+O[1]*s[1]+T[1]*s[2],P[2]*s[0]+O[2]*s[1]+T[2]*s[2]]),F}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,p,x){const w=function(O,F,q){const Y=1/(1<<q.z);return new a.a1(O/a.$*Y+q.x*Y,F/a.$*Y+q.y*Y)}(s,p,x.canonical),T=(P=w.y,[a.bo(w.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-P*Math.PI*2))-.5*Math.PI]);var P;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(s,p,x,w){const T=x.canonical,P=dn(s,p,T.x,T.y,T.z),O=1+(w?w(s,p):0)/a.bu,F=[P[0]*O,P[1]*O,P[2]*O,1];a.aw(F,F,this._globeViewProjMatrixNoCorrection);const q=this._cachedClippingPlane,Y=q[0]*P[0]+q[1]*P[1]+q[2]*P[2]+q[3]<0;return{point:new a.P(F[0]/F[3],F[1]/F[3]),signedDistanceFromCamera:F[3],isOccluded:Y}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=yn(this.worldSize,this.center.lat),p=a.ba(),x=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),a.b4(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const w=this.centerOffset;p[8]=2*-w.x/this._helper._width,p[9]=2*w.y/this._helper._height,this._projectionMatrix=a.b5(p),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,p),a.M(p,p,[0,0,-this.cameraToCenterDistance]),a.b6(p,p,this.rollInRadians),a.b7(p,p,-this.pitchInRadians),a.b6(p,p,this.bearingInRadians),a.M(p,p,[0,0,-s]);const T=a.bp();T[0]=s,T[1]=s,T[2]=s,a.b7(x,p,this.center.lat*Math.PI/180),a.bz(x,x,-this.center.lng*Math.PI/180),a.N(x,x,T),this._globeViewProjMatrixNoCorrection=x,a.b7(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(p,p,-this.center.lng*Math.PI/180),a.N(p,p,T),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,x);const P=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/s,a.bw(this._cameraPosition,this._cameraPosition,P,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,P,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,P,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,P,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,P,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const O=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(O,O,[1,1,-1]),this._cachedFrustum=vi.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){a.w("calculateFogMatrix is not supported on globe projection.");const p=a.ba();return a.ag(p),p}getVisibleUnwrappedCoordinates(s){return[new a.b2(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const x=kn(s);a.aR(x,x,1+p/a.bu);const w=a.bv();return a.aw(w,[x[0],x[1],x[2],1],this._globeViewProjMatrixNoCorrection),w[2]/w[3]}populateCache(s){}getBounds(){const s=.5*this.width,p=.5*this.height,x=[new a.P(0,0),new a.P(s,0),new a.P(this.width,0),new a.P(this.width,p),new a.P(this.width,this.height),new a.P(s,this.height),new a.P(0,this.height),new a.P(0,p)],w=[];for(const ne of x)w.push(this.unprojectScreenPoint(ne));let T=0,P=0,O=0,F=0;const q=this.center;for(const ne of w){const ee=a.bA(q.lng,ne.lng),ue=a.bA(q.lat,ne.lat);ee<P&&(P=ee),ee>T&&(T=ee),ue<F&&(F=ue),ue>O&&(O=ue)}const Y=[q.lng+P,q.lat+F,q.lng+T,q.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&(Y[3]=90,Y[0]=-180,Y[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Y[1]=-90,Y[0]=-180,Y[2]=180),new Lt(Y)}getConstrained(s,p){const x=a.ah(s.lat,-a.ai,a.ai),w=a.ah(+p,this.minZoom+oi(0,x),this.maxZoom);return{center:new a.S(s.lng,x),zoom:w}}calculateCenterFromCameraLngLatAlt(s,p,x,w){return this._helper.calculateCenterFromCameraLngLatAlt(s,p,x,w)}setLocationAtPoint(s,p){const x=kn(this.unprojectScreenPoint(p)),w=kn(s),T=a.bp();a.bB(T);const P=a.bp();a.by(P,x,T,-this.center.lng*Math.PI/180),a.bx(P,P,T,this.center.lat*Math.PI/180);const O=w[0]*w[0]+w[2]*w[2],F=P[0]*P[0];if(O<F)return;const q=Math.sqrt(O-F),Y=-q,ne=a.bC(w[0],w[2],P[0],q),ee=a.bC(w[0],w[2],P[0],Y),ue=a.bp();a.by(ue,w,T,-ne);const ye=a.bC(ue[1],ue[2],P[1],P[2]),Te=a.bp();a.by(Te,w,T,-ee);const Ce=a.bC(Te[1],Te[2],P[1],P[2]),Ee=.5*Math.PI,Ie=ye>=-Ee&&ye<=Ee,Be=Ce>=-Ee&&Ce<=Ee;let Le,qe;if(Ie&&Be){const Mt=this.center.lng*Math.PI/180,_t=this.center.lat*Math.PI/180;a.bD(ne,Mt)+a.bD(ye,_t)<a.bD(ee,Mt)+a.bD(Ce,_t)?(Le=ne,qe=ye):(Le=ee,qe=Ce)}else if(Ie)Le=ne,qe=ye;else{if(!Be)return;Le=ee,qe=Ce}const Ke=Le/Math.PI*180,Fe=qe/Math.PI*180,it=this.center.lat;this.setCenter(new a.S(Ke,a.ah(Fe,-90,90))),this.setZoom(this.zoom+oi(it,this.center.lat))}locationToScreenPoint(s,p){const x=kn(s);if(p){const w=p.getElevationForLngLatZoom(s,this._helper._tileZoom);a.aR(x,x,1+w/a.bu)}return this._projectSurfacePointToScreen(x)}_projectSurfacePointToScreen(s){const p=a.bv();return a.aw(p,[...s,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new a.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,p){if(p){const x=p.pointCoordinate(s);if(x)return x}return a.a1.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,p){var x;return(x=this.screenPointToMercatorCoordinate(s,p))===null||x===void 0?void 0:x.toLngLat()}isPointOnMapSurface(s,p){const x=this._cameraPosition,w=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(x,w)}getRayDirectionFromPixel(s){const p=a.bv();p[0]=s.x/this.width*2-1,p[1]=-1*(s.y/this.height*2-1),p[2]=1,p[3]=1,a.aw(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const x=a.bp();x[0]=p[0]-this._cameraPosition[0],x[1]=p[1]-this._cameraPosition[1],x[2]=p[2]-this._cameraPosition[2];const w=a.bp();return a.aV(w,x),w}isSurfacePointVisible(s){const p=this._cachedClippingPlane;return p[0]*s[0]+p[1]*s[1]+p[2]*s[2]+p[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const p=a.bv();return a.aw(p,[...s,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(s,p){const x=a.aX(s,p),w=a.bp(),T=a.bp();a.aR(T,p,x),a.aU(w,s,T);const P=1-a.aX(w,w);if(P<0)return null;const O=a.aX(s,s)-1,F=-x+(x<0?1:-1)*Math.sqrt(P),q=O/F,Y=F;return{tMin:Math.min(q,Y),tMax:Math.max(q,Y)}}unprojectScreenPoint(s){const p=this._cameraPosition,x=this.getRayDirectionFromPixel(s),w=this.rayPlanetIntersection(p,x);if(w){const Y=a.bp();a.aS(Y,p,[x[0]*w.tMin,x[1]*w.tMin,x[2]*w.tMin]);const ne=a.bp();return a.aV(ne,Y),Cn(ne)}const T=this._cachedClippingPlane,P=T[0]*x[0]+T[1]*x[1]+T[2]*x[2],O=-a.b1(T,p)/P,F=a.bp();if(O>0)a.aS(F,p,[x[0]*O,x[1]*O,x[2]*O]);else{const Y=a.bp();a.aS(Y,p,[2*x[0],2*x[1],2*x[2]]);const ne=a.b1(this._cachedClippingPlane,Y);a.aU(F,Y,[this._cachedClippingPlane[0]*ne,this._cachedClippingPlane[1]*ne,this._cachedClippingPlane[2]*ne])}const q=function(Y){const ne=a.bp();return ne[0]=Y[0]*-Y[3],ne[1]=Y[1]*-Y[3],ne[2]=Y[2]*-Y[3],{center:ne,radius:Math.sqrt(1-Y[3]*Y[3])}}(T);return Cn(function(Y,ne,ee){const ue=a.bp();a.aU(ue,ee,Y);const ye=a.bp();return a.bq(ye,Y,ue,ne/a.a$(ue)),ye}(q.center,q.radius,F))}getMatrixForModel(s,p){const x=a.S.convert(s),w=1/a.bu,T=a.b9();return a.bz(T,T,x.lng/180*Math.PI),a.b7(T,T,-x.lat/180*Math.PI),a.M(T,T,[0,0,1+p/a.bu]),a.b7(T,T,.5*Math.PI),a.N(T,T,[w,w,w]),T}getProjectionDataForCustomLayer(s=!0){const p=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:s});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(s){}}class fa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,p,x){return this._helper.interpolatePadding(s,p,x)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,p,x=!0){this._helper.resize(s,p,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,p){this._helper.overrideNearFarZ(s,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,p){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ms({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,p)=>this.getConstrained(s,p)}),this._globeness=1,this._mercatorTransform=new Co,this._verticalPerspectiveTransform=new Ya}clone(){const s=new fa;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const p=this._mercatorTransform.getProjectionData(s),x=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?x.mainMatrix:p.mainMatrix,clippingPlane:x.clippingPlane,tileMercatorCoords:x.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,p,x){const w=this._mercatorTransform.getPitchedTextCorrection(s,p,x),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,p,x);return a.bk(w,T,this._globeness)}projectTileCoordinates(s,p,x,w){return this.currentTransform.projectTileCoordinates(s,p,x,w)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,p){return this.currentTransform.lngLatToCameraDepth(s,p)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,p){return this.currentTransform.getConstrained(s,p)}calculateCenterFromCameraLngLatAlt(s,p,x,w){return this._helper.calculateCenterFromCameraLngLatAlt(s,p,x,w)}setLocationAtPoint(s,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,p){return this.currentTransform.locationToScreenPoint(s,p)}screenPointToMercatorCoordinate(s,p){return this.currentTransform.screenPointToMercatorCoordinate(s,p)}screenPointToLocation(s,p){return this.currentTransform.screenPointToLocation(s,p)}isPointOnMapSurface(s,p){return this.currentTransform.isPointOnMapSurface(s,p)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,p){return this.currentTransform.getMatrixForModel(s,p)}getProjectionDataForCustomLayer(s=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return p;const x=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return x.fallbackMatrix=p.mainMatrix,x}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class Dr{get useGlobeControls(){return!0}handlePanInertia(s,p){const x=ri(s,p);return Math.abs(x.lng-p.center.lng)>180&&(x.lng=p.center.lng+179.5*Math.sign(x.lng-p.center.lng)),{easingCenter:x,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,p){const x=s.around,w=p.screenPointToLocation(x);s.bearingDelta&&p.setBearing(p.bearing+s.bearingDelta),s.pitchDelta&&p.setPitch(p.pitch+s.pitchDelta),s.rollDelta&&p.setRoll(p.roll+s.rollDelta);const T=p.zoom;s.zoomDelta&&p.setZoom(p.zoom+s.zoomDelta);const P=p.zoom-T;if(P===0)return;const O=a.bA(p.center.lng,w.lng),F=O/(Math.abs(O/180)+1),q=a.bA(p.center.lat,w.lat),Y=p.getRayDirectionFromPixel(x),ne=p.cameraPosition,ee=-1*a.aX(ne,Y),ue=a.bp();a.aS(ue,ne,[Y[0]*ee,Y[1]*ee,Y[2]*ee]);const ye=a.aZ(ue)-1,Te=Math.exp(.5*-Math.max(ye-.3,0)),Ce=yn(p.worldSize,p.center.lat)/Math.min(p.width,p.height),Ee=a.bn(Ce,.9,.5,1,.25),Ie=(1-a.af(-P))*Math.min(Te,Ee),Be=p.center.lat,Le=p.zoom,qe=new a.S(p.center.lng+F*Ie,a.ah(p.center.lat+q*Ie,-a.ai,a.ai));p.setLocationAtPoint(w,x);const Ke=p.center,Fe=a.bn(Math.abs(O),45,85,0,1),it=a.bn(Ce,.75,.35,0,1),Mt=Math.pow(Math.max(Fe,it),.25),_t=a.bA(Ke.lng,qe.lng),wt=a.bA(Ke.lat,qe.lat);p.setCenter(new a.S(Ke.lng+_t*Mt,Ke.lat+wt*Mt).wrap()),p.setZoom(Le+oi(Be,p.center.lat))}handleMapControlsPan(s,p,x){if(!s.panDelta)return;const w=p.center.lat,T=p.zoom;p.setCenter(ri(s.panDelta,p).wrap()),p.setZoom(T+oi(w,p.center.lat))}cameraForBoxAndBearing(s,p,x,w,T){const P=rs(s,p,x,w,T),O=p.left/T.width*2-1,F=(T.width-p.right)/T.width*2-1,q=p.top/T.height*-2+1,Y=(T.height-p.bottom)/T.height*-2+1,ne=a.bA(x.getWest(),x.getEast())<0,ee=ne?x.getEast():x.getWest(),ue=ne?x.getWest():x.getEast(),ye=Math.max(x.getNorth(),x.getSouth()),Te=Math.min(x.getNorth(),x.getSouth()),Ce=ee+.5*a.bA(ee,ue),Ee=ye+.5*a.bA(ye,Te),Ie=T.clone();Ie.setCenter(P.center),Ie.setBearing(P.bearing),Ie.setPitch(0),Ie.setRoll(0),Ie.setZoom(P.zoom);const Be=Ie.modelViewProjectionMatrix,Le=[kn(x.getNorthWest()),kn(x.getNorthEast()),kn(x.getSouthWest()),kn(x.getSouthEast()),kn(new a.S(ue,Ee)),kn(new a.S(ee,Ee)),kn(new a.S(Ce,ye)),kn(new a.S(Ce,Te))],qe=kn(P.center);let Ke=Number.POSITIVE_INFINITY;for(const Fe of Le)O<0&&(Ke=Dr.getLesserNonNegativeNonNull(Ke,Dr.solveVectorScale(Fe,qe,Be,"x",O))),F>0&&(Ke=Dr.getLesserNonNegativeNonNull(Ke,Dr.solveVectorScale(Fe,qe,Be,"x",F))),q>0&&(Ke=Dr.getLesserNonNegativeNonNull(Ke,Dr.solveVectorScale(Fe,qe,Be,"y",q))),Y<0&&(Ke=Dr.getLesserNonNegativeNonNull(Ke,Dr.solveVectorScale(Fe,qe,Be,"y",Y)));if(Number.isFinite(Ke)&&Ke!==0)return P.zoom=Ie.zoom+a.ak(Ke),P;Zs()}handleJumpToCenterZoom(s,p){const x=s.center.lat,w=s.getConstrained(p.center?a.S.convert(p.center):s.center,s.zoom).center;s.setCenter(w.wrap());const T=p.zoom!==void 0?+p.zoom:s.zoom+oi(x,w.lat);s.zoom!==T&&s.setZoom(T)}handleEaseTo(s,p){const x=s.zoom,w=s.center,T=s.padding,P={roll:s.roll,pitch:s.pitch,bearing:s.bearing},O={roll:p.roll===void 0?s.roll:p.roll,pitch:p.pitch===void 0?s.pitch:p.pitch,bearing:p.bearing===void 0?s.bearing:p.bearing},F=p.zoom!==void 0,q=!s.isPaddingEqual(p.padding);let Y=!1;const ne=p.center?a.S.convert(p.center):w,ee=s.getConstrained(ne,x).center;Aa(s,ee);const ue=s.clone();ue.setCenter(ee),ue.setZoom(F?+p.zoom:x+oi(w.lat,ne.lat)),ue.setBearing(p.bearing);const ye=new a.P(a.ah(s.centerPoint.x+p.offsetAsPoint.x,0,s.width),a.ah(s.centerPoint.y+p.offsetAsPoint.y,0,s.height));ue.setLocationAtPoint(ee,ye);const Te=(p.offset&&p.offsetAsPoint.mag())>0?ue.center:ee,Ce=F?+p.zoom:x+oi(w.lat,Te.lat),Ee=x+oi(w.lat,0),Ie=Ce+oi(Te.lat,0),Be=a.bA(w.lng,Te.lng),Le=a.bA(w.lat,Te.lat),qe=a.af(Ie-Ee);return Y=Ce!==x,{easeFunc:Ke=>{if(a.be(P,O)||gs({startEulerAngles:P,endEulerAngles:O,tr:s,k:Ke,useSlerp:P.roll!=O.roll}),q&&s.interpolatePadding(T,p.padding,Ke),p.around)a.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(p.around,p.aroundPoint);else{const Fe=Ie>Ee?Math.min(2,qe):Math.max(.5,qe),it=Math.pow(Fe,1-Ke),Mt=Rn(w,Be,Le,Ke*it);s.setCenter(Mt.wrap())}if(Y){const Fe=a.C.number(Ee,Ie,Ke)+oi(0,s.center.lat);s.setZoom(Fe)}},isZooming:Y,elevationCenter:Te}}handleFlyTo(s,p){const x=p.zoom!==void 0,w=s.center,T=s.zoom,P=s.padding,O=!s.isPaddingEqual(p.padding),F=s.getConstrained(a.S.convert(p.center||p.locationAtOffset),T).center,q=x?+p.zoom:s.zoom+oi(s.center.lat,F.lat),Y=s.clone();Y.setCenter(F),Y.setZoom(q),Y.setBearing(p.bearing);const ne=new a.P(a.ah(s.centerPoint.x+p.offsetAsPoint.x,0,s.width),a.ah(s.centerPoint.y+p.offsetAsPoint.y,0,s.height));Y.setLocationAtPoint(F,ne);const ee=Y.center;Aa(s,ee);const ue=function(Le,qe,Ke){const Fe=kn(qe),it=kn(Ke),Mt=a.aX(Fe,it),_t=Math.acos(Mt),wt=kt(Le);return _t/(2*Math.PI)*wt}(s,w,ee),ye=T+oi(w.lat,0),Te=q+oi(ee.lat,0),Ce=a.af(Te-ye);let Ee;if(typeof p.minZoom=="number"){const Le=+p.minZoom+oi(ee.lat,0),qe=Math.min(Le,ye,Te)+oi(0,ee.lat),Ke=s.getConstrained(ee,qe).zoom+oi(ee.lat,0);Ee=a.af(Ke-ye)}const Ie=a.bA(w.lng,ee.lng),Be=a.bA(w.lat,ee.lat);return{easeFunc:(Le,qe,Ke,Fe)=>{const it=Rn(w,Ie,Be,Ke);O&&s.interpolatePadding(P,p.padding,Le);const Mt=Le===1?ee:it;s.setCenter(Mt.wrap());const _t=ye+a.ak(qe);s.setZoom(Le===1?q:_t+oi(0,Mt.lat))},scaleOfZoom:Ce,targetCenter:ee,scaleOfMinZoom:Ee,pixelPathLength:ue}}static solveVectorScale(s,p,x,w,T){const P=w==="x"?[x[0],x[4],x[8],x[12]]:[x[1],x[5],x[9],x[13]],O=[x[3],x[7],x[11],x[15]],F=s[0]*P[0]+s[1]*P[1]+s[2]*P[2],q=s[0]*O[0]+s[1]*O[1]+s[2]*O[2],Y=p[0]*P[0]+p[1]*P[1]+p[2]*P[2],ne=p[0]*O[0]+p[1]*O[1]+p[2]*O[2];return Y+T*q===F+T*ne||O[3]*(F-Y)+P[3]*(ne-q)+F*ne==Y*q?null:(Y+P[3]-T*ne-T*O[3])/(Y-F-T*ne+T*q)}static getLesserNonNegativeNonNull(s,p){return p!==null&&p>=0&&p<s?p:s}}class kd{constructor(s){this._globe=s,this._mercatorCameraHelper=new Pa,this._verticalPerspectiveCameraHelper=new Dr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,p){return this.currentHelper.handlePanInertia(s,p)}handleMapControlsRollPitchBearingZoom(s,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,p)}handleMapControlsPan(s,p,x){this.currentHelper.handleMapControlsPan(s,p,x)}cameraForBoxAndBearing(s,p,x,w,T){return this.currentHelper.cameraForBoxAndBearing(s,p,x,w,T)}handleJumpToCenterZoom(s,p){this.currentHelper.handleJumpToCenterZoom(s,p)}handleEaseTo(s,p){return this.currentHelper.handleEaseTo(s,p)}handleFlyTo(s,p){return this.currentHelper.handleFlyTo(s,p)}}const Oh=(j,s)=>a.y(j,s&&s.filter(p=>p.identifier!=="source.canvas")),Iy=a.bE();class np extends a.E{constructor(s,p={}){var x,w;super(),this._rtlPluginLoaded=()=>{for(const P in this.sourceCaches){const O=this.sourceCaches[P].getSource().type;O!=="vector"&&O!=="geojson"||this.sourceCaches[P].reload()}},this.map=s,this.dispatcher=new ut(ct(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(P,O)=>this.getGlyphs(P,O)),this.dispatcher.registerMessageHandler("GI",(P,O)=>this.getImages(P,O)),this.dispatcher.registerMessageHandler("GDA",(P,O)=>this.getDashes(P,O)),this.imageManager=new pe,this.imageManager.setEventedParent(this);const T=((x=s._container)===null||x===void 0?void 0:x.lang)||typeof document!="undefined"&&((w=document.documentElement)===null||w===void 0?void 0:w.lang)||void 0;this.glyphManager=new st(s._requestManager,p.localIdeographFontFamily,T),this.lineAtlas=new Pt(256,512),this.crossTileSymbolIndex=new Vl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),Qt().on(ft,this._rtlPluginLoaded),this.on("data",P=>{if(P.dataType!=="source"||P.sourceDataType!=="metadata")return;const O=this.sourceCaches[P.sourceId];if(!O)return;const F=O.getSource();if(F&&F.vectorLayerIds)for(const q in this._layers){const Y=this._layers[q];Y.source===F.id&&this._validateLayer(Y)}})}setGlobalStateProperty(s,p){var x,w,T;this._checkLoaded();const P=p===null?(T=(w=(x=this.stylesheet.state)===null||x===void 0?void 0:x[s])===null||w===void 0?void 0:w.default)!==null&&T!==void 0?T:null:p;if(a.bH(P,this._globalState[s]))return this;this._globalState[s]=P,this._applyGlobalStateChanges([s])}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();const p=[];for(const x in s)!a.bH(this._globalState[x],s[x].default)&&(p.push(x),this._globalState[x]=s[x].default);this._applyGlobalStateChanges(p)}_applyGlobalStateChanges(s){if(s.length===0)return;const p=new Set,x={};for(const w of s){x[w]=this._globalState[w];for(const T in this._layers){const P=this._layers[T],O=P.getLayoutAffectingGlobalStateRefs(),F=P.getPaintAffectingGlobalStateRefs();if(O.has(w)&&p.add(P.source),F.has(w))for(const{name:q,value:Y}of F.get(w))this._updatePaintProperty(P,q,Y)}}this.dispatcher.broadcast("UGS",x);for(const w in this.sourceCaches)p.has(w)&&(this._reloadSource(w),this._changed=!0)}loadURL(s,p={},x){this.fire(new a.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const w=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;a.j(w,this._loadStyleRequest).then(P=>{this._loadStyleRequest=null,this._load(P.data,p,x)}).catch(P=>{this._loadStyleRequest=null,P&&!T.signal.aborted&&this.fire(new a.k(P))})}loadJSON(s,p={},x){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(s,p,x)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Iy,{validate:!1})}_load(s,p,x){var w,T;let P=p.transformStyle?p.transformStyle(x,s):s;if(!p.validate||!Oh(this,a.z(P))){P=Object.assign({},P),this._loaded=!0,this.stylesheet=P;for(const O in P.sources)this.addSource(O,P.sources[O],{validate:!1});P.sprite?this._loadSprite(P.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(P.glyphs),this._createLayers(),this.light=new ze(this.stylesheet.light),this._setProjectionInternal(((w=this.stylesheet.projection)===null||w===void 0?void 0:w.type)||"mercator"),this.sky=new Je(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var s,p,x;const w=a.bI(this.stylesheet.layers);this.setGlobalState((s=this.stylesheet.state)!==null&&s!==void 0?s:null),this.dispatcher.broadcast("SL",w),this._order=w.map(T=>T.id),this._layers={},this._serializedLayers=null;for(const T of w){const P=a.bJ(T,this._globalState);if(P.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=P,a.bK(P)&&this.sourceCaches[P.source]){const O=(x=(p=T.paint)===null||p===void 0?void 0:p["raster-fade-duration"])!==null&&x!==void 0?x:P.paint.get("raster-fade-duration");this.sourceCaches[P.source].setRasterFadeDuration(O)}}}_loadSprite(s,p=!1,x=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,P,O,F){return a._(this,void 0,void 0,function*(){const q=le(T),Y=O>1?"@2x":"",ne={},ee={};for(const{id:ue,url:ye}of q){const Te=P.transformRequest(_e(ye,Y,".json"),"SpriteJSON");ne[ue]=a.j(Te,F);const Ce=P.transformRequest(_e(ye,Y,".png"),"SpriteImage");ee[ue]=Z.getImage(Ce,F)}return yield Promise.all([...Object.values(ne),...Object.values(ee)]),function(ue,ye){return a._(this,void 0,void 0,function*(){const Te={};for(const Ce in ue){Te[Ce]={};const Ee=A.getImageCanvasContext((yield ye[Ce]).data),Ie=(yield ue[Ce]).data;for(const Be in Ie){const{width:Le,height:qe,x:Ke,y:Fe,sdf:it,pixelRatio:Mt,stretchX:_t,stretchY:wt,content:St,textFitWidth:rn,textFitHeight:an}=Ie[Be];Te[Ce][Be]={data:null,pixelRatio:Mt,sdf:it,stretchX:_t,stretchY:wt,content:St,textFitWidth:rn,textFitHeight:an,spriteData:{width:Le,height:qe,x:Ke,y:Fe,context:Ee}}}}return Te})}(ne,ee)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(const P in T){this._spritesImagesIds[P]=[];const O=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(F=>!(F in T)):[];for(const F of O)this.imageManager.removeImage(F),this._changedImages[F]=!0;for(const F in T[P]){const q=P==="default"?F:`${P}:${F}`;this._spritesImagesIds[P].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,T[P][F],!1):this.imageManager.addImage(q,T[P][F]),p&&(this._changedImages[q]=!0)}}}).catch(T=>{this._spriteRequest=null,w=T,this.fire(new a.k(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),x&&x(w)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(s){const p=this.sourceCaches[s.source];if(!p)return;const x=s.sourceLayer;if(!x)return;const w=p.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(x)===-1)&&this.fire(new a.k(new Error(`Source layer "${x}" does not exist on source "${w.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,p=!1){const x=this._serializedAllLayers();if(!s||s.length===0)return Object.values(p?a.bL(x):x);const w=[];for(const T of s)if(x[T]){const P=p?a.bL(x[T]):x[T];w.push(P)}return w}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const p=Object.keys(this._layers);for(const x of p){const w=this._layers[x];w.type!=="custom"&&(s[x]=w.serialize())}return s}hasTransitions(){var s,p,x;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((x=this.projection)===null||x===void 0)&&x.hasTransition())return!0;for(const w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(const w in this._layers)if(this._layers[w].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const p=this._changed;if(p){const w=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(w.length||T.length)&&this._updateWorkerLayers(w,T);for(const P in this._updatedSources){const O=this._updatedSources[P];if(O==="reload")this._reloadSource(P);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const x={};for(const w in this.sourceCaches){const T=this.sourceCaches[w];x[w]=T.used,T.used=!1}for(const w of this._order){const T=this._layers[w];T.recalculate(s,this._availableImages),!T.isHidden(s.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const w in x){const T=this.sourceCaches[w];!!x[w]!=!!T.used&&T.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,p&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,p={}){var x;this._checkLoaded();const w=this.serialize();if(s=p.transformStyle?p.transformStyle(w,s):s,((x=p.validate)===null||x===void 0||x)&&Oh(this,a.z(s)))return!1;(s=a.bL(s)).layers=a.bI(s.layers);const T=a.bM(w,s),P=this._getOperationsToPerform(T);if(P.unimplemented.length>0)throw new Error(`Unimplemented: ${P.unimplemented.join(", ")}.`);if(P.operations.length===0)return!1;for(const O of P.operations)O();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const p=[],x=[];for(const w of s)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":p.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":p.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setSky":p.push(()=>this.setSky.apply(this,w.args));break;case"setProjection":this.setProjection.apply(this,w.args);break;case"setGlobalState":p.push(()=>this.setGlobalState.apply(this,w.args));break;case"setTransition":p.push(()=>{});break;default:x.push(w.command)}return{operations:p,unimplemented:x}}addImage(s,p){if(this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,p),this._afterImageUpdated(s)}updateImage(s,p){this.imageManager.updateImage(s,p)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,p,x={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.z.source,`sources.${s}`,p,null,x))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const w=this.sourceCaches[s]=new Vt(s,p,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:s})),w.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===s)return this.fire(new a.k(new Error(`Source "${s}" cannot be removed while layer "${x}" is using it.`)));const p=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],p.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,p){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const x=this.sourceCaches[s].getSource();if(x.type!=="geojson")throw new Error(`geojsonSource.type is ${x.type}, which is !== 'geojson`);x.setData(p),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,p,x={}){this._checkLoaded();const w=s.id;if(this.getLayer(w))return void this.fire(new a.k(new Error(`Layer "${w}" already exists on this map.`)));let T;if(s.type==="custom"){if(Oh(this,a.bN(s)))return;T=a.bJ(s,this._globalState)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(w,s.source),s=a.bL(s),s=a.e(s,{source:w})),this._validate(a.z.layer,`layers.${w}`,s,{arrayIndex:-1},x))return;T=a.bJ(s,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:w}})}const P=p?this._order.indexOf(p):this._order.length;if(p&&P===-1)this.fire(new a.k(new Error(`Cannot add layer "${w}" before non-existing layer "${p}".`)));else{if(this._order.splice(P,0,w),this._layerOrderChanged=!0,this._layers[w]=T,this._removedLayers[w]&&T.source&&T.type!=="custom"){const O=this._removedLayers[w];delete this._removedLayers[w],O.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(s,p){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===p)return;const x=this._order.indexOf(s);this._order.splice(x,1);const w=p?this._order.indexOf(p):this._order.length;p&&w===-1?this.fire(new a.k(new Error(`Cannot move layer "${s}" before non-existing layer "${p}".`))):(this._order.splice(w,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const p=this._layers[s];if(!p)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${s}".`)));p.setEventedParent(null);const x=this._order.indexOf(s);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=p,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],p.onRemove&&p.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,p,x){this._checkLoaded();const w=this.getLayer(s);w?w.minzoom===p&&w.maxzoom===x||(p!=null&&(w.minzoom=p),x!=null&&(w.maxzoom=x),this._updateLayer(w)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,p,x={}){this._checkLoaded();const w=this.getLayer(s);if(w){if(!a.bH(w.filter,p))return p==null?(w.setFilter(void 0),void this._updateLayer(w)):void(this._validate(a.z.filter,`layers.${w.id}.filter`,p,null,x)||(w.setFilter(a.bL(p)),this._updateLayer(w)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return a.bL(this.getLayer(s).filter)}setLayoutProperty(s,p,x,w={}){this._checkLoaded();const T=this.getLayer(s);T?a.bH(T.getLayoutProperty(p),x)||(T.setLayoutProperty(p,x,w),this._updateLayer(T)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,p){const x=this.getLayer(s);if(x)return x.getLayoutProperty(p);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,p,x,w={}){this._checkLoaded();const T=this.getLayer(s);T?a.bH(T.getPaintProperty(p),x)||this._updatePaintProperty(T,p,x,w):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}_updatePaintProperty(s,p,x,w={}){s.setPaintProperty(p,x,w)&&this._updateLayer(s),a.bK(s)&&p==="raster-fade-duration"&&this.sourceCaches[s.source].setRasterFadeDuration(x),this._changed=!0,this._updatedPaintProps[s.id]=!0,this._serializedLayers=null}getPaintProperty(s,p){return this.getLayer(s).getPaintProperty(p)}setFeatureState(s,p){this._checkLoaded();const x=s.source,w=s.sourceLayer,T=this.sourceCaches[x];if(T===void 0)return void this.fire(new a.k(new Error(`The source '${x}' does not exist in the map's style.`)));const P=T.getSource().type;P==="geojson"&&w?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||w?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(w,s.id,p)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,p){this._checkLoaded();const x=s.source,w=this.sourceCaches[x];if(w===void 0)return void this.fire(new a.k(new Error(`The source '${x}' does not exist in the map's style.`)));const T=w.getSource().type,P=T==="vector"?s.sourceLayer:void 0;T!=="vector"||P?p&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(P,s.id,p):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const p=s.source,x=s.sourceLayer,w=this.sourceCaches[p];if(w!==void 0)return w.getSource().type!=="vector"||x?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),w.getFeatureState(x,s.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=a.bO(this.sourceCaches,T=>T.serialize()),p=this._serializeByIds(this._order,!0),x=this.map.getTerrain()||void 0,w=this.stylesheet;return a.bP({version:w.version,name:w.name,metadata:w.metadata,light:w.light,sky:w.sky,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,projection:w.projection,sources:s,layers:p,terrain:x},T=>T!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const p=P=>this._layers[P].type==="fill-extrusion",x={},w=[];for(let P=this._order.length-1;P>=0;P--){const O=this._order[P];if(p(O)){x[O]=P;for(const F of s){const q=F[O];if(q)for(const Y of q)w.push(Y)}}}w.sort((P,O)=>O.intersectionZ-P.intersectionZ);const T=[];for(let P=this._order.length-1;P>=0;P--){const O=this._order[P];if(p(O))for(let F=w.length-1;F>=0;F--){const q=w[F].feature;if(x[q.layer.id]<P)break;T.push(q),w.pop()}else for(const F of s){const q=F[O];if(q)for(const Y of q)T.push(Y.feature)}}return T}queryRenderedFeatures(s,p,x){p&&p.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",p.filter,null,p);const w={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const q of p.layers){const Y=this._layers[q];if(!Y)return this.fire(new a.k(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];w[Y.source]=!0}}const T=[];p.availableImages=this._availableImages;const P=this._serializedAllLayers(),O=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,F=Object.assign(Object.assign({},p),{layers:O,globalState:this._globalState});for(const q in this.sourceCaches)p.layers&&!w[q]||T.push(Ye(this.sourceCaches[q],this._layers,P,s,F,x,this.map.terrain?(Y,ne,ee)=>this.map.terrain.getElevation(Y,ne,ee):void 0));return this.placement&&T.push(function(q,Y,ne,ee,ue,ye,Te){const Ce={},Ee=ye.queryRenderedSymbols(ee),Ie=[];for(const Be of Object.keys(Ee).map(Number))Ie.push(Te[Be]);Ie.sort(zt);for(const Be of Ie){const Le=Be.featureIndex.lookupSymbolFeatures(Ee[Be.bucketInstanceId],Y,Be.bucketIndex,Be.sourceLayerIndex,{filterSpec:ue.filter,globalState:ue.globalState},ue.layers,ue.availableImages,q);for(const qe in Le){const Ke=Ce[qe]=Ce[qe]||[],Fe=Le[qe];Fe.sort((it,Mt)=>{const _t=Be.featureSortOrder;if(_t){const wt=_t.indexOf(it.featureIndex);return _t.indexOf(Mt.featureIndex)-wt}return Mt.featureIndex-it.featureIndex});for(const it of Fe)Ke.push(it)}}return function(Be,Le,qe){for(const Ke in Be)for(const Fe of Be[Ke])Bt(Fe,qe[Le[Ke].source]);return Be}(Ce,q,ne)}(this._layers,P,this.sourceCaches,s,F,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(s,p){p!=null&&p.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",p.filter,null,p);const x=this.sourceCaches[s];return x?function(w,T){const P=w.getRenderableIds().map(q=>w.getTileByID(q)),O=[],F={};for(let q=0;q<P.length;q++){const Y=P[q],ne=Y.tileID.canonical.key;F[ne]||(F[ne]=!0,Y.querySourceFeatures(O,T))}return O}(x,p?Object.assign(Object.assign({},p),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(s,p={}){this._checkLoaded();const x=this.light.getLight();let w=!1;for(const P in s)if(!a.bH(s[P],x[P])){w=!0;break}if(!w)return;const T={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,p),this.light.updateTransitions(T)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,p={}){this._checkLoaded();const x=this.getSky();let w=!1;if(!s&&!x)return;if(s&&!x)w=!0;else if(!s&&x)w=!0;else for(const P in s)if(!a.bH(s[P],x[P])){w=!0;break}if(!w)return;const T={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,p),this.sky.updateTransitions(T)}_setProjectionInternal(s){const p=function(x){if(Array.isArray(x)){const w=new yt({type:x});return{projection:w,transform:new fa,cameraHelper:new kd(w)}}switch(x){case"mercator":return{projection:new jo,transform:new Co,cameraHelper:new Pa};case"globe":{const w=new yt({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new fa,cameraHelper:new kd(w)}}case"vertical-perspective":return{projection:new Pe,transform:new Ya,cameraHelper:new Dr};default:return a.w(`Unknown projection name: ${x}. Falling back to mercator projection.`),{projection:new jo,transform:new Co,cameraHelper:new Pa}}}(s);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const x in this.sourceCaches)this.sourceCaches[x].reload()}_validate(s,p,x,w,T={}){return(!T||T.validate!==!1)&&Oh(this,s.call(a.z,a.e({key:p,style:this.serialize(),value:x,styleSpec:a.v},w)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Qt().off(ft,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const x=this.sourceCaches[p];x.setEventedParent(null),x.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const p in this.sourceCaches)this.sourceCaches[p].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,p,x,w,T=!1){let P=!1,O=!1;const F={};for(const q of this._order){const Y=this._layers[q];if(Y.type!=="symbol")continue;if(!F[Y.source]){const ee=this.sourceCaches[Y.source];F[Y.source]=ee.getRenderableIds(!0).map(ue=>ee.getTileByID(ue)).sort((ue,ye)=>ye.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(ye.tileID)?-1:1))}const ne=this.crossTileSymbolIndex.addLayer(Y,F[Y.source],s.center.lng);P=P||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||x===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),s.zoom))&&(this.pauseablePlacement=new ku(s,this.map.terrain,this._order,T,p,x,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,F),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),O=!0),P&&this.pauseablePlacement.placement.setStale()),O||P)for(const q of this._order){const Y=this._layers[q];Y.type==="symbol"&&this.placement.updateLayerOpacities(Y,F[Y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,p){return a._(this,void 0,void 0,function*(){const x=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[p.source];return w&&w.setDependencies(p.tileID.key,p.type,p.icons),x})}getGlyphs(s,p){return a._(this,void 0,void 0,function*(){const x=yield this.glyphManager.getGlyphs(p.stacks),w=this.sourceCaches[p.source];return w&&w.setDependencies(p.tileID.key,p.type,[""]),x})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,p={}){this._checkLoaded(),s&&this._validate(a.z.glyphs,"glyphs",s,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}getDashes(s,p){return a._(this,void 0,void 0,function*(){const x={};for(const[w,T]of Object.entries(p.dashes))x[w]=this.lineAtlas.getDash(T.dasharray,T.round);return x})}addSprite(s,p,x={},w){this._checkLoaded();const T=[{id:s,url:p}],P=[...le(this.stylesheet.sprite),...T];this._validate(a.z.sprite,"sprite",P,null,x)||(this.stylesheet.sprite=P,this._loadSprite(T,!0,w))}removeSprite(s){this._checkLoaded();const p=le(this.stylesheet.sprite);if(p.find(x=>x.id===s)){if(this._spritesImagesIds[s])for(const x of this._spritesImagesIds[s])this.imageManager.removeImage(x),this._changedImages[x]=!0;p.splice(p.findIndex(x=>x.id===s),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return le(this.stylesheet.sprite)}setSprite(s,p={},x){this._checkLoaded(),s&&this._validate(a.z.sprite,"sprite",s,null,p)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,x):(this._unloadSprite(),x&&x(null)))}}var Oy=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Lh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,p,x,w,T,P,O,F,q){this.context=s;let Y=this.boundPaintVertexBuffers.length!==w.length;for(let ne=0;!Y&&ne<w.length;ne++)this.boundPaintVertexBuffers[ne]!==w[ne]&&(Y=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==x||Y||this.boundIndexBuffer!==T||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==F||this.boundDynamicVertexBuffer3!==q?this.freshBind(p,x,w,T,P,O,F,q):(s.bindVertexArray.set(this.vao),O&&O.bind(),T&&T.dynamicDraw&&T.bind(),F&&F.bind(),q&&q.bind())}freshBind(s,p,x,w,T,P,O,F){const q=s.numAttributes,Y=this.context,ne=Y.gl;this.vao&&this.destroy(),this.vao=Y.createVertexArray(),Y.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=w,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=F,p.enableAttributes(ne,s);for(const ee of x)ee.enableAttributes(ne,s);P&&P.enableAttributes(ne,s),O&&O.enableAttributes(ne,s),F&&F.enableAttributes(ne,s),p.bind(),p.setVertexAttribPointers(ne,s,T);for(const ee of x)ee.bind(),ee.setVertexAttribPointers(ne,s,T);P&&(P.bind(),P.setVertexAttribPointers(ne,s,T)),w&&w.bind(),O&&(O.bind(),O.setVertexAttribPointers(ne,s,T)),F&&(F.bind(),F.setVertexAttribPointers(ne,s,T)),Y.currentNumAttributes=q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ip=(j,s,p,x,w)=>({u_texture:0,u_ele_delta:j,u_fog_matrix:s,u_fog_color:p?p.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?0:p?p.calculateFogBlendOpacity(x):0,u_horizon_color:p?p.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:w?1:0}),Fh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ul(j){const s=[];for(let p=0;p<j.length;p++){if(j[p]===null)continue;const x=j[p].split(" ");s.push(x.pop())}return s}class Cc{constructor(s,p,x,w,T,P,O,F,q=[]){const Y=s.gl;this.program=Y.createProgram();const ne=Ul(p.staticAttributes),ee=x?x.getBinderAttributes():[],ue=ne.concat(ee),ye=lr.prelude.staticUniforms?Ul(lr.prelude.staticUniforms):[],Te=O.staticUniforms?Ul(O.staticUniforms):[],Ce=p.staticUniforms?Ul(p.staticUniforms):[],Ee=x?x.getBinderUniforms():[],Ie=ye.concat(Te).concat(Ce).concat(Ee),Be=[];for(const _t of Ie)Be.indexOf(_t)<0&&Be.push(_t);const Le=x?x.defines():[];Es(Y)&&Le.unshift("#version 300 es"),T&&Le.push("#define OVERDRAW_INSPECTOR;"),P&&Le.push("#define TERRAIN3D;"),F&&Le.push(F),q&&Le.push(...q);let qe=Le.concat(lr.prelude.fragmentSource,O.fragmentSource,p.fragmentSource).join(`
`),Ke=Le.concat(lr.prelude.vertexSource,O.vertexSource,p.vertexSource).join(`
`);Es(Y)||(qe=function(_t){return _t.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(qe),Ke=function(_t){return _t.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ke));const Fe=Y.createShader(Y.FRAGMENT_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(Fe,qe),Y.compileShader(Fe),!Y.getShaderParameter(Fe,Y.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${Y.getShaderInfoLog(Fe)}`);Y.attachShader(this.program,Fe);const it=Y.createShader(Y.VERTEX_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(it,Ke),Y.compileShader(it),!Y.getShaderParameter(it,Y.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${Y.getShaderInfoLog(it)}`);Y.attachShader(this.program,it),this.attributes={};const Mt={};this.numAttributes=ue.length;for(let _t=0;_t<this.numAttributes;_t++)ue[_t]&&(Y.bindAttribLocation(this.program,_t,ue[_t]),this.attributes[ue[_t]]=_t);if(Y.linkProgram(this.program),!Y.getProgramParameter(this.program,Y.LINK_STATUS))throw new Error(`Program failed to link: ${Y.getProgramInfoLog(this.program)}`);Y.deleteShader(it),Y.deleteShader(Fe);for(let _t=0;_t<Be.length;_t++){const wt=Be[_t];if(wt&&!Mt[wt]){const St=Y.getUniformLocation(this.program,wt);St&&(Mt[wt]=St)}}this.fixedUniforms=w(s,Mt),this.terrainUniforms=((_t,wt)=>({u_depth:new a.bQ(_t,wt.u_depth),u_terrain:new a.bQ(_t,wt.u_terrain),u_terrain_dim:new a.bg(_t,wt.u_terrain_dim),u_terrain_matrix:new a.bS(_t,wt.u_terrain_matrix),u_terrain_unpack:new a.bT(_t,wt.u_terrain_unpack),u_terrain_exaggeration:new a.bg(_t,wt.u_terrain_exaggeration)}))(s,Mt),this.projectionUniforms=((_t,wt)=>({u_projection_matrix:new a.bS(_t,wt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bT(_t,wt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bT(_t,wt.u_projection_clipping_plane),u_projection_transition:new a.bg(_t,wt.u_projection_transition),u_projection_fallback_matrix:new a.bS(_t,wt.u_projection_fallback_matrix)}))(s,Mt),this.binderUniforms=x?x.getUniforms(s,Mt):[]}draw(s,p,x,w,T,P,O,F,q,Y,ne,ee,ue,ye,Te,Ce,Ee,Ie,Be){const Le=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(x),s.setStencilMode(w),s.setColorMode(T),s.setCullFace(P),F){s.activeTexture.set(Le.TEXTURE2),Le.bindTexture(Le.TEXTURE_2D,F.depthTexture),s.activeTexture.set(Le.TEXTURE3),Le.bindTexture(Le.TEXTURE_2D,F.texture);for(const Ke in this.terrainUniforms)this.terrainUniforms[Ke].set(F[Ke])}if(q)for(const Ke in q)this.projectionUniforms[Fh[Ke]].set(q[Ke]);if(O)for(const Ke in this.fixedUniforms)this.fixedUniforms[Ke].set(O[Ke]);Ce&&Ce.setUniforms(s,this.binderUniforms,ye,{zoom:Te});let qe=0;switch(p){case Le.LINES:qe=2;break;case Le.TRIANGLES:qe=3;break;case Le.LINE_STRIP:qe=1}for(const Ke of ue.get()){const Fe=Ke.vaos||(Ke.vaos={});(Fe[Y]||(Fe[Y]=new Lh)).bind(s,this,ne,Ce?Ce.getPaintVertexBuffers():[],ee,Ke.vertexOffset,Ee,Ie,Be),Le.drawElements(p,Ke.primitiveLength*qe,Le.UNSIGNED_SHORT,Ke.primitiveOffset*qe*2)}}}function To(j,s,p){const x=1/a.aC(p,1,s.transform.tileZoom),w=Math.pow(2,p.tileID.overscaledZ),T=p.tileSize*Math.pow(2,s.transform.tileZoom)/w,P=T*(p.tileID.canonical.x+p.tileID.wrap*w),O=T*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[x,j.fromScale,j.toScale],u_fade:j.t,u_pixel_coord_upper:[P>>16,O>>16],u_pixel_coord_lower:[65535&P,65535&O]}}const sp=(j,s,p,x)=>{const w=j.style.light,T=w.properties.get("position"),P=[T.x,T.y,T.z],O=a.bW();w.properties.get("anchor")==="viewport"&&a.bX(O,j.transform.bearingInRadians),a.bY(P,P,O);const F=j.transform.transformLightDirection(P),q=w.properties.get("color");return{u_lightpos:P,u_lightpos_globe:F,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_vertical_gradient:+s,u_opacity:p,u_fill_translate:x}},Bh=(j,s,p,x,w,T,P)=>a.e(sp(j,s,p,x),To(T,j,P),{u_height_factor:-Math.pow(2,w.overscaledZ)/P.tileSize/8}),Tc=(j,s,p,x)=>a.e(To(s,j,p),{u_fill_translate:x}),Mu=(j,s)=>({u_world:j,u_fill_translate:s}),Im=(j,s,p,x,w)=>a.e(Tc(j,s,p,w),{u_world:x}),bl=(j,s,p,x,w)=>{const T=j.transform;let P,O,F=0;if(p.paint.get("circle-pitch-alignment")==="map"){const q=a.aC(s,1,T.zoom);P=!0,O=[q,q],F=q/(a.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*w}else P=!1,O=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+P,u_device_pixel_ratio:j.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:F,u_translate:x}},Ly=j=>({u_pixel_extrude_scale:[1/j.width,1/j.height]}),Eu=j=>({u_viewport_size:[j.width,j.height]}),Om=(j,s=1)=>({u_color:j,u_overlay:0,u_overlay_scale:s}),Vh=(j,s,p,x)=>{const w=a.aC(j,1,s)/(a.$*Math.pow(2,j.tileID.overscaledZ))*2*Math.PI*x;return{u_extrude_scale:a.aC(j,1,s),u_intensity:p,u_globe_extrude_scale:w}},rp=(j,s,p,x)=>{const w=a.L();a.bZ(w,0,j.width,j.height,0,0,1);const T=j.context.gl;return{u_matrix:w,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:p,u_color_ramp:x,u_opacity:s.paint.get("heatmap-opacity")}},Au=(j,s,p)=>{const x=p.paint.get("hillshade-accent-color");let w;switch(p.paint.get("hillshade-method")){case"basic":w=4;break;case"combined":w=1;break;case"igor":w=2;break;case"multidirectional":w=3;break;default:w=0}const T=p.getIlluminationProperties();for(let P=0;P<T.directionRadians.length;P++)p.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[P]+=j.transform.bearingInRadians);return{u_image:0,u_latrange:Lm(0,s.tileID),u_exaggeration:p.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:x,u_method:w,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},kc=(j,s)=>{const p=s.stride,x=a.L();return a.bZ(x,0,a.$,-a.$,0,0,1),a.M(x,x,[0,-a.$,0]),{u_matrix:x,u_image:1,u_dimension:[p,p],u_zoom:j.overscaledZ,u_unpack:s.getUnpackVector()}};function Lm(j,s){const p=Math.pow(2,s.canonical.z),x=s.canonical.y;return[new a.a1(0,x/p).toLngLat().lat,new a.a1(0,(x+1)/p).toLngLat().lat]}const Nd=(j,s,p=0)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:p,u_opacity:j.paint.get("color-relief-opacity")}),Pu=(j,s,p,x)=>{const w=j.transform;return{u_translation:lp(j,s,p),u_ratio:x/a.aC(s,1,w.zoom),u_device_pixel_ratio:j.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},ap=(j,s,p,x,w)=>a.e(Pu(j,s,p,x),{u_image:0,u_image_height:w}),vl=(j,s,p,x,w)=>{const T=j.transform,P=$l(s,T);return{u_translation:lp(j,s,p),u_texsize:s.imageAtlasTexture.size,u_ratio:x/a.aC(s,1,T.zoom),u_device_pixel_ratio:j.pixelRatio,u_image:0,u_scale:[P,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Uh=(j,s,p,x,w)=>{const T=$l(s,j.transform);return a.e(Pu(j,s,p,x),{u_tileratio:T,u_crossfade_from:w.fromScale,u_crossfade_to:w.toScale,u_image:0,u_mix:w.t,u_lineatlas_width:j.lineAtlas.width,u_lineatlas_height:j.lineAtlas.height})},op=(j,s,p,x,w,T)=>{const P=$l(s,j.transform);return a.e(Pu(j,s,p,x),{u_image:0,u_image_height:T,u_tileratio:P,u_crossfade_from:w.fromScale,u_crossfade_to:w.toScale,u_image_dash:1,u_mix:w.t,u_lineatlas_width:j.lineAtlas.width,u_lineatlas_height:j.lineAtlas.height})};function $l(j,s){return 1/a.aC(j,1,s.tileZoom)}function lp(j,s,p){return a.aD(j.transform,s,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const $h=(j,s,p,x,w)=>{return{u_tl_parent:j,u_scale_parent:s,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(P=x.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(T=x.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Fy(x.paint.get("raster-hue-rotate")),u_coords_top:[w[0].x,w[0].y,w[1].x,w[1].y],u_coords_bottom:[w[3].x,w[3].y,w[2].x,w[2].y]};var T,P};function Fy(j){j*=Math.PI/180;const s=Math.sin(j),p=Math.cos(j);return[(2*p+1)/3,(-Math.sqrt(3)*s-p+1)/3,(Math.sqrt(3)*s-p+1)/3]}const Fm=(j,s,p,x,w,T,P,O,F,q,Y,ne,ee)=>{const ue=P.transform;return{u_is_size_zoom_constant:+(j==="constant"||j==="source"),u_is_size_feature_constant:+(j==="constant"||j==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:ue.cameraToCenterDistance,u_pitch:ue.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:ue.width/ue.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:F,u_is_text:+Y,u_pitch_with_map:+x,u_is_along_line:w,u_is_variable_anchor:T,u_texsize:ne,u_texture:0,u_translation:q,u_pitched_scale:ee}},cp=(j,s,p,x,w,T,P,O,F,q,Y,ne,ee,ue)=>{const ye=P.transform;return a.e(Fm(j,s,p,x,w,T,P,O,F,q,Y,ne,ue),{u_gamma_scale:x?Math.cos(ye.pitch*Math.PI/180)*ye.cameraToCenterDistance:1,u_device_pixel_ratio:P.pixelRatio,u_is_halo:1})},Bm=(j,s,p,x,w,T,P,O,F,q,Y,ne,ee)=>a.e(cp(j,s,p,x,w,T,P,O,F,q,!0,Y,0,ee),{u_texsize_icon:ne,u_texture_icon:1}),pa=(j,s)=>({u_opacity:j,u_color:s}),Nc=(j,s,p,x,w)=>a.e(function(T,P,O,F){const q=O.imageManager.getPattern(T.from.toString()),Y=O.imageManager.getPattern(T.to.toString()),{width:ne,height:ee}=O.imageManager.getPixelSize(),ue=Math.pow(2,F.tileID.overscaledZ),ye=F.tileSize*Math.pow(2,O.transform.tileZoom)/ue,Te=ye*(F.tileID.canonical.x+F.tileID.wrap*ue),Ce=ye*F.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:q.tl,u_pattern_br_a:q.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[ne,ee],u_mix:P.t,u_pattern_size_a:q.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/a.aC(F,1,O.transform.tileZoom),u_pixel_coord_upper:[Te>>16,Ce>>16],u_pixel_coord_lower:[65535&Te,65535&Ce]}}(p,w,s,x),{u_opacity:j}),Hh=(j,s)=>{},Md={fillExtrusion:(j,s)=>({u_lightpos:new a.bU(j,s.u_lightpos),u_lightpos_globe:new a.bU(j,s.u_lightpos_globe),u_lightintensity:new a.bg(j,s.u_lightintensity),u_lightcolor:new a.bU(j,s.u_lightcolor),u_vertical_gradient:new a.bg(j,s.u_vertical_gradient),u_opacity:new a.bg(j,s.u_opacity),u_fill_translate:new a.bV(j,s.u_fill_translate)}),fillExtrusionPattern:(j,s)=>({u_lightpos:new a.bU(j,s.u_lightpos),u_lightpos_globe:new a.bU(j,s.u_lightpos_globe),u_lightintensity:new a.bg(j,s.u_lightintensity),u_lightcolor:new a.bU(j,s.u_lightcolor),u_vertical_gradient:new a.bg(j,s.u_vertical_gradient),u_height_factor:new a.bg(j,s.u_height_factor),u_opacity:new a.bg(j,s.u_opacity),u_fill_translate:new a.bV(j,s.u_fill_translate),u_image:new a.bQ(j,s.u_image),u_texsize:new a.bV(j,s.u_texsize),u_pixel_coord_upper:new a.bV(j,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(j,s.u_pixel_coord_lower),u_scale:new a.bU(j,s.u_scale),u_fade:new a.bg(j,s.u_fade)}),fill:(j,s)=>({u_fill_translate:new a.bV(j,s.u_fill_translate)}),fillPattern:(j,s)=>({u_image:new a.bQ(j,s.u_image),u_texsize:new a.bV(j,s.u_texsize),u_pixel_coord_upper:new a.bV(j,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(j,s.u_pixel_coord_lower),u_scale:new a.bU(j,s.u_scale),u_fade:new a.bg(j,s.u_fade),u_fill_translate:new a.bV(j,s.u_fill_translate)}),fillOutline:(j,s)=>({u_world:new a.bV(j,s.u_world),u_fill_translate:new a.bV(j,s.u_fill_translate)}),fillOutlinePattern:(j,s)=>({u_world:new a.bV(j,s.u_world),u_image:new a.bQ(j,s.u_image),u_texsize:new a.bV(j,s.u_texsize),u_pixel_coord_upper:new a.bV(j,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(j,s.u_pixel_coord_lower),u_scale:new a.bU(j,s.u_scale),u_fade:new a.bg(j,s.u_fade),u_fill_translate:new a.bV(j,s.u_fill_translate)}),circle:(j,s)=>({u_camera_to_center_distance:new a.bg(j,s.u_camera_to_center_distance),u_scale_with_map:new a.bQ(j,s.u_scale_with_map),u_pitch_with_map:new a.bQ(j,s.u_pitch_with_map),u_extrude_scale:new a.bV(j,s.u_extrude_scale),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(j,s.u_globe_extrude_scale),u_translate:new a.bV(j,s.u_translate)}),collisionBox:(j,s)=>({u_pixel_extrude_scale:new a.bV(j,s.u_pixel_extrude_scale)}),collisionCircle:(j,s)=>({u_viewport_size:new a.bV(j,s.u_viewport_size)}),debug:(j,s)=>({u_color:new a.bR(j,s.u_color),u_overlay:new a.bQ(j,s.u_overlay),u_overlay_scale:new a.bg(j,s.u_overlay_scale)}),depth:Hh,clippingMask:Hh,heatmap:(j,s)=>({u_extrude_scale:new a.bg(j,s.u_extrude_scale),u_intensity:new a.bg(j,s.u_intensity),u_globe_extrude_scale:new a.bg(j,s.u_globe_extrude_scale)}),heatmapTexture:(j,s)=>({u_matrix:new a.bS(j,s.u_matrix),u_world:new a.bV(j,s.u_world),u_image:new a.bQ(j,s.u_image),u_color_ramp:new a.bQ(j,s.u_color_ramp),u_opacity:new a.bg(j,s.u_opacity)}),hillshade:(j,s)=>({u_image:new a.bQ(j,s.u_image),u_latrange:new a.bV(j,s.u_latrange),u_exaggeration:new a.bg(j,s.u_exaggeration),u_altitudes:new a.b$(j,s.u_altitudes),u_azimuths:new a.b$(j,s.u_azimuths),u_accent:new a.bR(j,s.u_accent),u_method:new a.bQ(j,s.u_method),u_shadows:new a.b_(j,s.u_shadows),u_highlights:new a.b_(j,s.u_highlights)}),hillshadePrepare:(j,s)=>({u_matrix:new a.bS(j,s.u_matrix),u_image:new a.bQ(j,s.u_image),u_dimension:new a.bV(j,s.u_dimension),u_zoom:new a.bg(j,s.u_zoom),u_unpack:new a.bT(j,s.u_unpack)}),colorRelief:(j,s)=>({u_image:new a.bQ(j,s.u_image),u_unpack:new a.bT(j,s.u_unpack),u_dimension:new a.bV(j,s.u_dimension),u_elevation_stops:new a.bQ(j,s.u_elevation_stops),u_color_stops:new a.bQ(j,s.u_color_stops),u_color_ramp_size:new a.bQ(j,s.u_color_ramp_size),u_opacity:new a.bg(j,s.u_opacity)}),line:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels)}),lineGradient:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels),u_image:new a.bQ(j,s.u_image),u_image_height:new a.bg(j,s.u_image_height)}),linePattern:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_texsize:new a.bV(j,s.u_texsize),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_image:new a.bQ(j,s.u_image),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels),u_scale:new a.bU(j,s.u_scale),u_fade:new a.bg(j,s.u_fade)}),lineSDF:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels),u_image:new a.bQ(j,s.u_image),u_mix:new a.bg(j,s.u_mix),u_tileratio:new a.bg(j,s.u_tileratio),u_crossfade_from:new a.bg(j,s.u_crossfade_from),u_crossfade_to:new a.bg(j,s.u_crossfade_to),u_lineatlas_width:new a.bg(j,s.u_lineatlas_width),u_lineatlas_height:new a.bg(j,s.u_lineatlas_height)}),lineGradientSDF:(j,s)=>({u_translation:new a.bV(j,s.u_translation),u_ratio:new a.bg(j,s.u_ratio),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_units_to_pixels:new a.bV(j,s.u_units_to_pixels),u_image:new a.bQ(j,s.u_image),u_image_height:new a.bg(j,s.u_image_height),u_tileratio:new a.bg(j,s.u_tileratio),u_crossfade_from:new a.bg(j,s.u_crossfade_from),u_crossfade_to:new a.bg(j,s.u_crossfade_to),u_image_dash:new a.bQ(j,s.u_image_dash),u_mix:new a.bg(j,s.u_mix),u_lineatlas_width:new a.bg(j,s.u_lineatlas_width),u_lineatlas_height:new a.bg(j,s.u_lineatlas_height)}),raster:(j,s)=>({u_tl_parent:new a.bV(j,s.u_tl_parent),u_scale_parent:new a.bg(j,s.u_scale_parent),u_buffer_scale:new a.bg(j,s.u_buffer_scale),u_fade_t:new a.bg(j,s.u_fade_t),u_opacity:new a.bg(j,s.u_opacity),u_image0:new a.bQ(j,s.u_image0),u_image1:new a.bQ(j,s.u_image1),u_brightness_low:new a.bg(j,s.u_brightness_low),u_brightness_high:new a.bg(j,s.u_brightness_high),u_saturation_factor:new a.bg(j,s.u_saturation_factor),u_contrast_factor:new a.bg(j,s.u_contrast_factor),u_spin_weights:new a.bU(j,s.u_spin_weights),u_coords_top:new a.bT(j,s.u_coords_top),u_coords_bottom:new a.bT(j,s.u_coords_bottom)}),symbolIcon:(j,s)=>({u_is_size_zoom_constant:new a.bQ(j,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(j,s.u_is_size_feature_constant),u_size_t:new a.bg(j,s.u_size_t),u_size:new a.bg(j,s.u_size),u_camera_to_center_distance:new a.bg(j,s.u_camera_to_center_distance),u_pitch:new a.bg(j,s.u_pitch),u_rotate_symbol:new a.bQ(j,s.u_rotate_symbol),u_aspect_ratio:new a.bg(j,s.u_aspect_ratio),u_fade_change:new a.bg(j,s.u_fade_change),u_label_plane_matrix:new a.bS(j,s.u_label_plane_matrix),u_coord_matrix:new a.bS(j,s.u_coord_matrix),u_is_text:new a.bQ(j,s.u_is_text),u_pitch_with_map:new a.bQ(j,s.u_pitch_with_map),u_is_along_line:new a.bQ(j,s.u_is_along_line),u_is_variable_anchor:new a.bQ(j,s.u_is_variable_anchor),u_texsize:new a.bV(j,s.u_texsize),u_texture:new a.bQ(j,s.u_texture),u_translation:new a.bV(j,s.u_translation),u_pitched_scale:new a.bg(j,s.u_pitched_scale)}),symbolSDF:(j,s)=>({u_is_size_zoom_constant:new a.bQ(j,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(j,s.u_is_size_feature_constant),u_size_t:new a.bg(j,s.u_size_t),u_size:new a.bg(j,s.u_size),u_camera_to_center_distance:new a.bg(j,s.u_camera_to_center_distance),u_pitch:new a.bg(j,s.u_pitch),u_rotate_symbol:new a.bQ(j,s.u_rotate_symbol),u_aspect_ratio:new a.bg(j,s.u_aspect_ratio),u_fade_change:new a.bg(j,s.u_fade_change),u_label_plane_matrix:new a.bS(j,s.u_label_plane_matrix),u_coord_matrix:new a.bS(j,s.u_coord_matrix),u_is_text:new a.bQ(j,s.u_is_text),u_pitch_with_map:new a.bQ(j,s.u_pitch_with_map),u_is_along_line:new a.bQ(j,s.u_is_along_line),u_is_variable_anchor:new a.bQ(j,s.u_is_variable_anchor),u_texsize:new a.bV(j,s.u_texsize),u_texture:new a.bQ(j,s.u_texture),u_gamma_scale:new a.bg(j,s.u_gamma_scale),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_is_halo:new a.bQ(j,s.u_is_halo),u_translation:new a.bV(j,s.u_translation),u_pitched_scale:new a.bg(j,s.u_pitched_scale)}),symbolTextAndIcon:(j,s)=>({u_is_size_zoom_constant:new a.bQ(j,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(j,s.u_is_size_feature_constant),u_size_t:new a.bg(j,s.u_size_t),u_size:new a.bg(j,s.u_size),u_camera_to_center_distance:new a.bg(j,s.u_camera_to_center_distance),u_pitch:new a.bg(j,s.u_pitch),u_rotate_symbol:new a.bQ(j,s.u_rotate_symbol),u_aspect_ratio:new a.bg(j,s.u_aspect_ratio),u_fade_change:new a.bg(j,s.u_fade_change),u_label_plane_matrix:new a.bS(j,s.u_label_plane_matrix),u_coord_matrix:new a.bS(j,s.u_coord_matrix),u_is_text:new a.bQ(j,s.u_is_text),u_pitch_with_map:new a.bQ(j,s.u_pitch_with_map),u_is_along_line:new a.bQ(j,s.u_is_along_line),u_is_variable_anchor:new a.bQ(j,s.u_is_variable_anchor),u_texsize:new a.bV(j,s.u_texsize),u_texsize_icon:new a.bV(j,s.u_texsize_icon),u_texture:new a.bQ(j,s.u_texture),u_texture_icon:new a.bQ(j,s.u_texture_icon),u_gamma_scale:new a.bg(j,s.u_gamma_scale),u_device_pixel_ratio:new a.bg(j,s.u_device_pixel_ratio),u_is_halo:new a.bQ(j,s.u_is_halo),u_translation:new a.bV(j,s.u_translation),u_pitched_scale:new a.bg(j,s.u_pitched_scale)}),background:(j,s)=>({u_opacity:new a.bg(j,s.u_opacity),u_color:new a.bR(j,s.u_color)}),backgroundPattern:(j,s)=>({u_opacity:new a.bg(j,s.u_opacity),u_image:new a.bQ(j,s.u_image),u_pattern_tl_a:new a.bV(j,s.u_pattern_tl_a),u_pattern_br_a:new a.bV(j,s.u_pattern_br_a),u_pattern_tl_b:new a.bV(j,s.u_pattern_tl_b),u_pattern_br_b:new a.bV(j,s.u_pattern_br_b),u_texsize:new a.bV(j,s.u_texsize),u_mix:new a.bg(j,s.u_mix),u_pattern_size_a:new a.bV(j,s.u_pattern_size_a),u_pattern_size_b:new a.bV(j,s.u_pattern_size_b),u_scale_a:new a.bg(j,s.u_scale_a),u_scale_b:new a.bg(j,s.u_scale_b),u_pixel_coord_upper:new a.bV(j,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(j,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(j,s.u_tile_units_to_pixels)}),terrain:(j,s)=>({u_texture:new a.bQ(j,s.u_texture),u_ele_delta:new a.bg(j,s.u_ele_delta),u_fog_matrix:new a.bS(j,s.u_fog_matrix),u_fog_color:new a.bR(j,s.u_fog_color),u_fog_ground_blend:new a.bg(j,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(j,s.u_fog_ground_blend_opacity),u_horizon_color:new a.bR(j,s.u_horizon_color),u_horizon_fog_blend:new a.bg(j,s.u_horizon_fog_blend),u_is_globe_mode:new a.bg(j,s.u_is_globe_mode)}),terrainDepth:(j,s)=>({u_ele_delta:new a.bg(j,s.u_ele_delta)}),terrainCoords:(j,s)=>({u_texture:new a.bQ(j,s.u_texture),u_terrain_coords_id:new a.bg(j,s.u_terrain_coords_id),u_ele_delta:new a.bg(j,s.u_ele_delta)}),projectionErrorMeasurement:(j,s)=>({u_input:new a.bg(j,s.u_input),u_output_expected:new a.bg(j,s.u_output_expected)}),atmosphere:(j,s)=>({u_sun_pos:new a.bU(j,s.u_sun_pos),u_atmosphere_blend:new a.bg(j,s.u_atmosphere_blend),u_globe_position:new a.bU(j,s.u_globe_position),u_globe_radius:new a.bg(j,s.u_globe_radius),u_inv_proj_matrix:new a.bS(j,s.u_inv_proj_matrix)}),sky:(j,s)=>({u_sky_color:new a.bR(j,s.u_sky_color),u_horizon_color:new a.bR(j,s.u_horizon_color),u_horizon:new a.bV(j,s.u_horizon),u_horizon_normal:new a.bV(j,s.u_horizon_normal),u_sky_horizon_blend:new a.bg(j,s.u_sky_horizon_blend),u_sky_blend:new a.bg(j,s.u_sky_blend)})};class $o{constructor(s,p,x){this.context=s;const w=s.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ed{constructor(s,p,x,w){this.length=p.length,this.attributes=x,this.itemSize=p.bytesPerElement,this.dynamicDraw=w,this.context=s;const T=s.gl;this.buffer=T.createBuffer(),s.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,p){for(let x=0;x<this.attributes.length;x++){const w=p.attributes[this.attributes[x].name];w!==void 0&&s.enableVertexAttribArray(w)}}setVertexAttribPointers(s,p,x){for(let w=0;w<this.attributes.length;w++){const T=this.attributes[w],P=p.attributes[T.name];P!==void 0&&s.vertexAttribPointer(P,T.components,s[qh[T.type]],!1,this.itemSize,T.offset+this.itemSize*(x||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zi{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Mc extends zi{getDefault(){return a.bf.transparent}set(s){const p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Ad extends zi{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class ko extends zi{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Pd extends zi{getDefault(){return[!0,!0,!0,!0]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Vm extends zi{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Ec extends zi{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Ru extends zi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const p=this.current;(s.func!==p.func||s.ref!==p.ref||s.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class up extends zi{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class dp extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=s,this.dirty=!1}}class Ac extends zi{getDefault(){return[0,1]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class hp extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=s,this.dirty=!1}}class Rd extends zi{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Dd extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.BLEND):p.disable(p.BLEND),this.current=s,this.dirty=!1}}class Gh extends zi{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class fp extends zi{getDefault(){return a.bf.transparent}set(s){const p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Pc extends zi{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Du extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;s?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=s,this.dirty=!1}}class Rc extends zi{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class ma extends zi{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Xa extends zi{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class pp extends zi{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class ga extends zi{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class gr extends zi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class wl extends zi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class zu extends zi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Hl extends zi{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Dc extends zi{getDefault(){return null}set(s){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Wh extends zi{getDefault(){return null}set(s){var p;if(s===this.current&&!this.dirty)return;const x=this.gl;Es(x)?x.bindVertexArray(s):(p=x.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class No extends zi{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class zc extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class zd extends zi{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Ho extends zi{constructor(s,p){super(s),this.context=s,this.parent=p}getDefault(){return null}}class _i extends Ho{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class zr extends Ho{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class mp extends Ho{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const Mo="Framebuffer is not complete";class Iu{constructor(s,p,x,w,T){this.context=s,this.width=p,this.height=x;const P=s.gl,O=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new _i(s,O),w)this.depthAttachment=T?new mp(s,O):new zr(s,O);else if(T)throw new Error("Stencil cannot be set without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error(Mo)}destroy(){const s=this.context.gl,p=this.colorAttachment.get();if(p&&s.deleteTexture(p),this.depthAttachment){const x=this.depthAttachment.get();x&&s.deleteRenderbuffer(x)}s.deleteFramebuffer(this.framebuffer)}}class Zh{constructor(s){var p,x;if(this.gl=s,this.clearColor=new Mc(this),this.clearDepth=new Ad(this),this.clearStencil=new ko(this),this.colorMask=new Pd(this),this.depthMask=new Vm(this),this.stencilMask=new Ec(this),this.stencilFunc=new Ru(this),this.stencilOp=new up(this),this.stencilTest=new dp(this),this.depthRange=new Ac(this),this.depthTest=new hp(this),this.depthFunc=new Rd(this),this.blend=new Dd(this),this.blendFunc=new Gh(this),this.blendColor=new fp(this),this.blendEquation=new Pc(this),this.cullFace=new Du(this),this.cullFaceSide=new Rc(this),this.frontFace=new ma(this),this.program=new Xa(this),this.activeTexture=new pp(this),this.viewport=new ga(this),this.bindFramebuffer=new gr(this),this.bindRenderbuffer=new wl(this),this.bindTexture=new zu(this),this.bindVertexBuffer=new Hl(this),this.bindElementBuffer=new Dc(this),this.bindVertexArray=new Wh(this),this.pixelStoreUnpack=new No(this),this.pixelStoreUnpackPremultiplyAlpha=new zc(this),this.pixelStoreUnpackFlipY=new zd(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Es(s)){this.HALF_FLOAT=s.HALF_FLOAT;const w=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=s.RGBA16F)!==null&&p!==void 0?p:w==null?void 0:w.RGBA16F_EXT,this.RGB16F=(x=s.RGB16F)!==null&&x!==void 0?x:w==null?void 0:w.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const w=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=w==null?void 0:w.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,p){return new $o(this,s,p)}createVertexBuffer(s,p,x){return new Ed(this,s,p,x)}createRenderbuffer(s,p,x){const w=this.gl,T=w.createRenderbuffer();return this.bindRenderbuffer.set(T),w.renderbufferStorage(w.RENDERBUFFER,s,p,x),this.bindRenderbuffer.set(null),T}createFramebuffer(s,p,x,w){return new Iu(this,s,p,x,w)}clear({color:s,depth:p,stencil:x}){const w=this.gl;let T=0;s&&(T|=w.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(T|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),x!==void 0&&(T|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),w.clear(T)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){a.bH(s.blendFunction,Mi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Es(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var p;return Es(this.gl)?this.gl.deleteVertexArray(s):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let qo;function Id(j,s,p,x,w){const T=j.context,P=j.transform,O=T.gl,F=j.useProgram("collisionBox"),q=[];let Y=0,ne=0;for(let Ee=0;Ee<x.length;Ee++){const Ie=x[Ee],Be=s.getTile(Ie).getBucket(p);if(!Be)continue;const Le=w?Be.textCollisionBox:Be.iconCollisionBox,qe=Be.collisionCircleArray;qe.length>0&&(q.push({circleArray:qe,circleOffset:ne,coord:Ie}),Y+=qe.length/4,ne=Y),Le&&F.draw(T,O.LINES,Kn.disabled,Yn.disabled,j.colorModeForRenderPass(),di.disabled,Ly(j.transform),j.style.map.terrain&&j.style.map.terrain.getTerrainData(Ie),P.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,null,j.transform.zoom,null,null,Le.collisionVertexBuffer)}if(!w||!q.length)return;const ee=j.useProgram("collisionCircle"),ue=new a.c0;ue.resize(4*Y),ue._trim();let ye=0;for(const Ee of q)for(let Ie=0;Ie<Ee.circleArray.length/4;Ie++){const Be=4*Ie,Le=Ee.circleArray[Be+0],qe=Ee.circleArray[Be+1],Ke=Ee.circleArray[Be+2],Fe=Ee.circleArray[Be+3];ue.emplace(ye++,Le,qe,Ke,Fe,0),ue.emplace(ye++,Le,qe,Ke,Fe,1),ue.emplace(ye++,Le,qe,Ke,Fe,2),ue.emplace(ye++,Le,qe,Ke,Fe,3)}(!qo||qo.length<2*Y)&&(qo=function(Ee){const Ie=2*Ee,Be=new a.c2;Be.resize(Ie),Be._trim();for(let Le=0;Le<Ie;Le++){const qe=6*Le;Be.uint16[qe+0]=4*Le+0,Be.uint16[qe+1]=4*Le+1,Be.uint16[qe+2]=4*Le+2,Be.uint16[qe+3]=4*Le+2,Be.uint16[qe+4]=4*Le+3,Be.uint16[qe+5]=4*Le+0}return Be}(Y));const Te=T.createIndexBuffer(qo,!0),Ce=T.createVertexBuffer(ue,a.c1.members,!0);for(const Ee of q){const Ie=Eu(j.transform);ee.draw(T,O.TRIANGLES,Kn.disabled,Yn.disabled,j.colorModeForRenderPass(),di.disabled,Ie,j.style.map.terrain&&j.style.map.terrain.getTerrainData(Ee.coord),null,p.id,Ce,Te,a.aM.simpleSegment(0,2*Ee.circleOffset,Ee.circleArray.length,Ee.circleArray.length/2),null,j.transform.zoom,null,null,null)}Ce.destroy(),Te.destroy()}const gp=a.ag(new Float32Array(16));function ql(j,s,p,x,w,T){const{horizontalAlign:P,verticalAlign:O}=a.aH(j);return new a.P((-(P-.5)*s/w+x[0])*T,(-(O-.5)*p/w+x[1])*T)}function Sl(j,s,p,x,w,T){const P=s.tileAnchorPoint.add(new a.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let O=x.mult(T);p||(O=O.rotate(-w));const F=P.add(O);return lt(F.x,F.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(p){const O=Ii(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(j),F=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return j.add(x.rotate(F))}return j.add(x)}function Ic(j,s,p,x,w,T,P,O,F,q,Y,ne){const ee=j.text.placedSymbolArray,ue=j.text.dynamicLayoutVertexArray,ye=j.icon.dynamicLayoutVertexArray,Te={};ue.clear();for(let Ce=0;Ce<ee.length;Ce++){const Ee=ee.get(Ce),Ie=Ee.hidden||!Ee.crossTileID||j.allowVerticalPlacement&&!Ee.placedOrientation?null:x[Ee.crossTileID];if(Ie){const Be=new a.P(Ee.anchorX,Ee.anchorY),Le={getElevation:ne,width:w.width,height:w.height,pitchedLabelPlaneMatrix:T,pitchWithMap:p,transform:w,tileAnchorPoint:Be,translation:q,unwrappedTileID:Y},qe=p?Vn(Be.x,Be.y,Le):Ii(Be.x,Be.y,Le),Ke=Ri(w.cameraToCenterDistance,qe.signedDistanceFromCamera);let Fe=a.ap(j.textSizeData,O,Ee)*Ke/a.aB;p&&(Fe*=j.tilePixelRatio/P);const{width:it,height:Mt,anchor:_t,textOffset:wt,textBoxScale:St}=Ie,rn=ql(_t,it,Mt,wt,St,Fe),an=w.getPitchedTextCorrection(Be.x+q[0],Be.y+q[1],Y),Yt=Sl(qe.point,Le,s,rn,-w.bearingInRadians,an),Mn=j.allowVerticalPlacement&&Ee.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let ni=0;ni<Ee.numGlyphs;ni++)a.av(ue,Yt,Mn);F&&Ee.associatedIconIndex>=0&&(Te[Ee.associatedIconIndex]={shiftedAnchor:Yt,angle:Mn})}else Kr(Ee.numGlyphs,ue)}if(F){ye.clear();const Ce=j.icon.placedSymbolArray;for(let Ee=0;Ee<Ce.length;Ee++){const Ie=Ce.get(Ee);if(Ie.hidden)Kr(Ie.numGlyphs,ye);else{const Be=Te[Ee];if(Be)for(let Le=0;Le<Ie.numGlyphs;Le++)a.av(ye,Be.shiftedAnchor,Be.angle);else Kr(Ie.numGlyphs,ye)}}j.icon.dynamicLayoutVertexBuffer.updateData(ye)}j.text.dynamicLayoutVertexBuffer.updateData(ue)}function Oc(j,s,p){return p.iconsInText&&s?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"}function ea(j,s,p,x,w,T,P,O,F,q,Y,ne,ee){const ue=j.context,ye=ue.gl,Te=j.transform,Ce=O==="map",Ee=F==="map",Ie=O!=="viewport"&&p.layout.get("symbol-placement")!=="point",Be=Ce&&!Ee&&!Ie,Le=!p.layout.get("symbol-sort-key").isConstant();let qe=!1;const Ke=j.getDepthModeForSublayer(0,Kn.ReadOnly),Fe=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=[],Mt=Te.getCircleRadiusCorrection();for(const _t of x){const wt=s.getTile(_t),St=wt.getBucket(p);if(!St)continue;const rn=w?St.text:St.icon;if(!rn||!rn.segments.get().length||!rn.hasVisibleVertices)continue;const an=rn.programConfigurations.get(p.id),Yt=w||St.sdfIcons,Mn=w?St.textSizeData:St.iconSizeData,ni=Ee||Te.pitch!==0,Fi=j.useProgram(Oc(Yt,w,St),an),Bi=a.an(Mn,Te.zoom),Qi=j.style.map.terrain&&j.style.map.terrain.getTerrainData(_t);let Ts,ns,yi,as,tr=[0,0],Bs=null;if(w)ns=wt.glyphAtlasTexture,yi=ye.LINEAR,Ts=wt.glyphAtlasTexture.size,St.iconsInText&&(tr=wt.imageAtlasTexture.size,Bs=wt.imageAtlasTexture,as=ni||j.options.rotating||j.options.zooming||Mn.kind==="composite"||Mn.kind==="camera"?ye.LINEAR:ye.NEAREST);else{const Rs=p.layout.get("icon-size").constantOr(0)!==1||St.iconsNeedLinear;ns=wt.imageAtlasTexture,yi=Yt||j.options.rotating||j.options.zooming||Rs||ni?ye.LINEAR:ye.NEAREST,Ts=wt.imageAtlasTexture.size}const Vs=a.aC(wt,1,j.transform.zoom),xr=Bn(Ce,j.transform,Vs),Al=a.L();a.aq(Al,xr);const ro=xi(Ee,Ce,j.transform,Vs),ic=a.aD(Te,wt,T,P),ao=Te.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),sc=Fe&&St.hasTextData(),Pl=p.layout.get("icon-text-fit")!=="none"&&sc&&St.hasIconData();if(Ie){const Rs=j.style.map.terrain?(Us,ys)=>j.style.map.terrain.getElevation(_t,Us,ys):null,Ki=p.layout.get("text-rotation-alignment")==="map";Wi(St,j,w,xr,Al,Ee,q,Ki,_t.toUnwrapped(),Te.width,Te.height,ic,Rs)}const Fa=w&&Fe||Pl,Fr=Ie||Fa?gp:Ee?xr:j.transform.clipSpaceToPixelsMatrix,Ro=Yt&&p.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Do;Do=Yt?St.iconsInText?Bm(Mn.kind,Bi,Be,Ee,Ie,Fa,j,Fr,ro,ic,Ts,tr,Mt):cp(Mn.kind,Bi,Be,Ee,Ie,Fa,j,Fr,ro,ic,w,Ts,0,Mt):Fm(Mn.kind,Bi,Be,Ee,Ie,Fa,j,Fr,ro,ic,w,Ts,Mt);const _r={program:Fi,buffers:rn,uniformValues:Do,projectionData:ao,atlasTexture:ns,atlasTextureIcon:Bs,atlasInterpolation:yi,atlasInterpolationIcon:as,isSDF:Yt,hasHalo:Ro};if(Le&&St.canOverlap){qe=!0;const Rs=rn.segments.get();for(const Ki of Rs)it.push({segments:new a.aM([Ki]),sortKey:Ki.sortKey,state:_r,terrainData:Qi})}else it.push({segments:rn.segments,sortKey:0,state:_r,terrainData:Qi})}qe&&it.sort((_t,wt)=>_t.sortKey-wt.sortKey);for(const _t of it){const wt=_t.state;if(ue.activeTexture.set(ye.TEXTURE0),wt.atlasTexture.bind(wt.atlasInterpolation,ye.CLAMP_TO_EDGE),wt.atlasTextureIcon&&(ue.activeTexture.set(ye.TEXTURE1),wt.atlasTextureIcon&&wt.atlasTextureIcon.bind(wt.atlasInterpolationIcon,ye.CLAMP_TO_EDGE)),wt.isSDF){const St=wt.uniformValues;wt.hasHalo&&(St.u_is_halo=1,ya(wt.buffers,_t.segments,p,j,wt.program,Ke,Y,ne,St,wt.projectionData,_t.terrainData)),St.u_is_halo=0}ya(wt.buffers,_t.segments,p,j,wt.program,Ke,Y,ne,wt.uniformValues,wt.projectionData,_t.terrainData)}}function ya(j,s,p,x,w,T,P,O,F,q,Y){const ne=x.context;w.draw(ne,ne.gl.TRIANGLES,T,P,O,di.backCCW,F,Y,q,p.id,j.layoutVertexBuffer,j.indexBuffer,s,p.paint,x.transform.zoom,j.programConfigurations.get(p.id),j.dynamicLayoutVertexBuffer,j.opacityVertexBuffer)}function Go(j,s,p,x,w){const T=j.context,P=T.gl,O=Yn.disabled,F=new Mi([P.ONE,P.ONE],a.bf.transparent,[!0,!0,!0,!0]),q=s.getBucket(p);if(!q)return;const Y=x.key;let ne=p.heatmapFbos.get(Y);ne||(ne=Ra(T,s.tileSize,s.tileSize),p.heatmapFbos.set(Y,ne)),T.bindFramebuffer.set(ne.framebuffer),T.viewport.set([0,0,s.tileSize,s.tileSize]),T.clear({color:a.bf.transparent});const ee=q.programConfigurations.get(p.id),ue=j.useProgram("heatmap",ee,!w),ye=j.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Te=j.style.map.terrain.getTerrainData(x);ue.draw(T,P.TRIANGLES,Kn.disabled,O,F,di.disabled,Vh(s,j.transform.zoom,p.paint.get("heatmap-intensity"),1),Te,ye,p.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,p.paint,j.transform.zoom,ee)}function Ka(j,s,p,x,w){const T=j.context,P=T.gl,O=j.transform;T.setColorMode(j.colorModeForRenderPass());const F=Da(T,s),q=p.key,Y=s.heatmapFbos.get(q);if(!Y)return;T.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,Y.colorAttachment.get()),T.activeTexture.set(P.TEXTURE1),F.bind(P.LINEAR,P.CLAMP_TO_EDGE);const ne=O.getProjectionData({overscaledTileID:p,applyTerrainMatrix:w,applyGlobeMatrix:!x});j.useProgram("heatmapTexture").draw(T,P.TRIANGLES,Kn.disabled,Yn.disabled,j.colorModeForRenderPass(),di.disabled,rp(j,s,0,1),null,ne,s.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments,s.paint,O.zoom),Y.destroy(),s.heatmapFbos.delete(q)}function Ra(j,s,p){var x,w;const T=j.gl,P=T.createTexture();T.bindTexture(T.TEXTURE_2D,P),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const O=(x=j.HALF_FLOAT)!==null&&x!==void 0?x:T.UNSIGNED_BYTE,F=(w=j.RGBA16F)!==null&&w!==void 0?w:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,F,s,p,0,T.RGBA,O,null);const q=j.createFramebuffer(s,p,!1,!1);return q.colorAttachment.set(P),q}function Da(j,s){return s.colorRampTexture||(s.colorRampTexture=new a.T(j,s.colorRamp,j.gl.RGBA)),s.colorRampTexture}function Od(j,s,p,x,w,T,P,O){let F=256;if(w.stepInterpolant){const q=s.getSource().maxzoom,Y=P.canonical.z===q?Math.ceil(1<<j.transform.maxZoom-P.canonical.z):1;F=a.ah(a.c4(T.maxLineLength/a.$*1024*Y),256,p.maxTextureSize)}return O.gradient=a.c5({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:F,image:O.gradient||void 0,clips:T.lineClipsArray}),O.texture?O.texture.update(O.gradient):O.texture=new a.T(p,O.gradient,x.RGBA),O.version=w.gradientVersion,O.texture}function yp(j,s,p,x,w){j.activeTexture.set(s.TEXTURE0),p.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),x.updatePaintBuffers(w)}function Lc(j,s,p,x,w,T){(w||j.lineAtlas.dirty)&&(s.activeTexture.set(p.TEXTURE0),j.lineAtlas.bind(s)),x.updatePaintBuffers(T)}function ta(j,s,p,x,w,T,P){const O=T.gradients[w.id];let F=O.texture;w.gradientVersion!==O.version&&(F=Od(j,s,p,x,w,T,P,O)),p.activeTexture.set(x.TEXTURE0),F.bind(w.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE)}function Ps(j,s,p,x,w,T,P,O,F){const q=T.gradients[w.id];let Y=q.texture;w.gradientVersion!==q.version&&(Y=Od(j,s,p,x,w,T,P,q)),p.activeTexture.set(x.TEXTURE0),Y.bind(w.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE),p.activeTexture.set(x.TEXTURE1),j.lineAtlas.bind(p),O.updatePaintBuffers(F)}function Ei(j,s,p,x,w){if(!p||!x||!x.imageAtlas)return;const T=x.imageAtlas.patternPositions;let P=T[p.to.toString()],O=T[p.from.toString()];if(!P&&O&&(P=O),!O&&P&&(O=P),!P||!O){const F=w.getPaintProperty(s);P=T[F],O=T[F]}P&&O&&j.setConstantPatternPositions(P,O)}function Wo(j,s,p,x,w,T,P,O){const F=j.context.gl,q="fill-pattern",Y=p.paint.get(q),ne=Y&&Y.constantOr(1),ee=p.getCrossfadeParameters();let ue,ye,Te,Ce,Ee;const Ie=j.transform,Be=p.paint.get("fill-translate"),Le=p.paint.get("fill-translate-anchor");P?(ye=ne&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ue=F.LINES):(ye=ne?"fillPattern":"fill",ue=F.TRIANGLES);const qe=Y.constantOr(null);for(const Ke of x){const Fe=s.getTile(Ke);if(ne&&!Fe.patternsLoaded())continue;const it=Fe.getBucket(p);if(!it)continue;const Mt=it.programConfigurations.get(p.id),_t=j.useProgram(ye,Mt),wt=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Ke);ne&&(j.context.activeTexture.set(F.TEXTURE0),Fe.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Mt.updatePaintBuffers(ee)),Ei(Mt,q,qe,Fe,p);const St=Ie.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),rn=a.aD(Ie,Fe,Be,Le);if(P){Ce=it.indexBuffer2,Ee=it.segments2;const Yt=[F.drawingBufferWidth,F.drawingBufferHeight];Te=ye==="fillOutlinePattern"&&ne?Im(j,ee,Fe,Yt,rn):Mu(Yt,rn)}else Ce=it.indexBuffer,Ee=it.segments,Te=ne?Tc(j,ee,Fe,rn):{u_fill_translate:rn};const an=j.stencilModeForClipping(Ke);_t.draw(j.context,ue,w,an,T,di.backCCW,Te,wt,St,p.id,it.layoutVertexBuffer,Ce,Ee,p.paint,j.transform.zoom,Mt)}}function za(j,s,p,x,w,T,P,O){const F=j.context,q=F.gl,Y="fill-extrusion-pattern",ne=p.paint.get(Y),ee=ne.constantOr(1),ue=p.getCrossfadeParameters(),ye=p.paint.get("fill-extrusion-opacity"),Te=ne.constantOr(null),Ce=j.transform;for(const Ee of x){const Ie=s.getTile(Ee),Be=Ie.getBucket(p);if(!Be)continue;const Le=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Ee),qe=Be.programConfigurations.get(p.id),Ke=j.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",qe);ee&&(j.context.activeTexture.set(q.TEXTURE0),Ie.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),qe.updatePaintBuffers(ue));const Fe=Ce.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!O,applyTerrainMatrix:!0});Ei(qe,Y,Te,Ie,p);const it=a.aD(Ce,Ie,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Mt=p.paint.get("fill-extrusion-vertical-gradient"),_t=ee?Bh(j,Mt,ye,it,Ee,ue,Ie):sp(j,Mt,ye,it);Ke.draw(F,F.gl.TRIANGLES,w,T,P,di.backCCW,_t,Le,Fe,p.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,p.paint,j.transform.zoom,qe,j.style.map.terrain&&Be.centroidVertexBuffer)}}function Ou(j,s,p,x,w,T,P,O,F){var q;const Y=j.style.projection,ne=j.context,ee=j.transform,ue=ne.gl,ye=[`#define NUM_ILLUMINATION_SOURCES ${p.paint.get("hillshade-highlight-color").values.length}`],Te=j.useProgram("hillshade",null,!1,ye),Ce=!j.options.moving;for(const Ee of x){const Ie=s.getTile(Ee),Be=Ie.fbo;if(!Be)continue;const Le=Y.getMeshFromTileID(ne,Ee.canonical,O,!0,"raster"),qe=(q=j.style.map.terrain)===null||q===void 0?void 0:q.getTerrainData(Ee);ne.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,Be.colorAttachment.get());const Ke=ee.getProjectionData({overscaledTileID:Ee,aligned:Ce,applyGlobeMatrix:!F,applyTerrainMatrix:!0});Te.draw(ne,ue.TRIANGLES,T,w[Ee.overscaledZ],P,di.backCCW,Au(j,Ie,p),qe,Ke,p.id,Le.vertexBuffer,Le.indexBuffer,Le.segments)}}function Qa(j,s,p,x,w,T,P,O,F){var q;const Y=j.style.projection,ne=j.context,ee=j.transform,ue=ne.gl,ye=j.useProgram("colorRelief"),Te=!j.options.moving;let Ce=!0,Ee=0;for(const Ie of x){const Be=s.getTile(Ie),Le=Be.dem;if(Ce){const _t=ue.getParameter(ue.MAX_TEXTURE_SIZE),{elevationTexture:wt,colorTexture:St}=p.getColorRampTextures(ne,_t,Le.getUnpackVector());ne.activeTexture.set(ue.TEXTURE1),wt.bind(ue.NEAREST,ue.CLAMP_TO_EDGE),ne.activeTexture.set(ue.TEXTURE4),St.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),Ce=!1,Ee=wt.size[0]}if(!Le||!Le.data)continue;const qe=Le.stride,Ke=Le.getPixels();if(ne.activeTexture.set(ue.TEXTURE0),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),Be.demTexture=Be.demTexture||j.getTileTexture(qe),Be.demTexture){const _t=Be.demTexture;_t.update(Ke,{premultiply:!1}),_t.bind(ue.LINEAR,ue.CLAMP_TO_EDGE)}else Be.demTexture=new a.T(ne,Ke,ue.RGBA,{premultiply:!1}),Be.demTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE);const Fe=Y.getMeshFromTileID(ne,Ie.canonical,O,!0,"raster"),it=(q=j.style.map.terrain)===null||q===void 0?void 0:q.getTerrainData(Ie),Mt=ee.getProjectionData({overscaledTileID:Ie,aligned:Te,applyGlobeMatrix:!F,applyTerrainMatrix:!0});ye.draw(ne,ue.TRIANGLES,T,w[Ie.overscaledZ],P,di.backCCW,Nd(p,Be.dem,Ee),it,Mt,p.id,Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}}const Lu=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Ld(j,s,p,x,w,T,P,O,F=!1,q=!1){const Y=x[x.length-1].overscaledZ,ne=j.context,ee=ne.gl,ue=j.useProgram("raster"),ye=j.transform,Te=j.style.projection,Ce=j.colorModeForRenderPass(),Ee=!j.options.moving,Ie=p.paint.get("raster-opacity"),Be=p.paint.get("raster-resampling"),Le=p.paint.get("raster-fade-duration"),qe=!!j.style.map.terrain;for(const Ke of x){const Fe=j.getDepthModeForSublayer(Ke.overscaledZ-Y,Ie===1?Kn.ReadWrite:Kn.ReadOnly,ee.LESS),it=s.getTile(Ke),Mt=Be==="nearest"?ee.NEAREST:ee.LINEAR;ne.activeTexture.set(ee.TEXTURE0),it.texture.bind(Mt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),ne.activeTexture.set(ee.TEXTURE1);const{parentTile:_t,parentScaleBy:wt,parentTopLeft:St,fadeValues:rn}=Fu(it,s,Le,qe);it.fadeOpacity=rn.tileOpacity,_t?(_t.fadeOpacity=rn.parentTileOpacity,_t.texture.bind(Mt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST)):it.texture.bind(Mt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),it.texture.useMipmap&&ne.extTextureFilterAnisotropic&&j.transform.pitch>20&&ee.texParameterf(ee.TEXTURE_2D,ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ne.extTextureFilterAnisotropicMax);const an=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Ke),Yt=ye.getProjectionData({overscaledTileID:Ke,aligned:Ee,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),Mn=$h(St,wt,rn.fadeMix,p,O),ni=Te.getMeshFromTileID(ne,Ke.canonical,T,P,"raster");ue.draw(ne,ee.TRIANGLES,Fe,w?w[Ke.overscaledZ]:Yn.disabled,Ce,F?di.frontCCW:di.backCCW,Mn,an,Yt,p.id,ni.vertexBuffer,ni.indexBuffer,ni.segments)}}function Fu(j,s,p,x){const w={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(p===0||x)return w;if(j.fadingParentID){const T=s._getLoadedTile(j.fadingParentID);if(!T)return w;const P=Math.pow(2,T.tileID.overscaledZ-j.tileID.overscaledZ),O=[j.tileID.canonical.x*P%1,j.tileID.canonical.y*P%1],F=function(q,Y,ne){const ee=A.now(),ue=(ee-Y.timeAdded)/ne,ye=q.fadingDirection===je.Incoming,Te=a.ah((ee-q.timeAdded)/ne,0,1),Ce=a.ah(1-ue,0,1),Ee=ye?Te:Ce;return{tileOpacity:Ee,parentTileOpacity:ye?Ce:Te,fadeMix:{opacity:1,mix:1-Ee}}}(j,T,p);return{parentTile:T,parentScaleBy:P,parentTopLeft:O,fadeValues:F}}if(j.selfFading){const T=function(P,O){const F=A.now(),q=a.ah((F-P.timeAdded)/O,0,1);return{tileOpacity:q,fadeMix:{opacity:q,mix:0}}}(j,p);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:T}}return w}const hs=new a.bf(1,0,0,1),Gl=new a.bf(0,1,0,1),Ir=new a.bf(0,0,1,1),Fd=new a.bf(1,0,1,1),Zo=new a.bf(0,1,1,1);function Eo(j,s,p,x){_a(j,0,s+p/2,j.transform.width,p,x)}function xa(j,s,p,x){_a(j,s-p/2,0,p,j.transform.height,x)}function _a(j,s,p,x,w,T){const P=j.context,O=P.gl;O.enable(O.SCISSOR_TEST),O.scissor(s*j.pixelRatio,p*j.pixelRatio,x*j.pixelRatio,w*j.pixelRatio),P.clear({color:T}),O.disable(O.SCISSOR_TEST)}function Fc(j,s,p){const x=j.context,w=x.gl,T=j.useProgram("debug"),P=Kn.disabled,O=Yn.disabled,F=j.colorModeForRenderPass(),q="$debug",Y=j.style.map.terrain&&j.style.map.terrain.getTerrainData(p);x.activeTexture.set(w.TEXTURE0);const ne=s.getTileByID(p.key).latestRawTileData,ee=Math.floor((ne&&ne.byteLength||0)/1024),ue=s.getTile(p).tileSize,ye=512/Math.min(ue,512)*(p.overscaledZ/j.transform.zoom)*.5;let Te=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Te+=` => ${p.overscaledZ}`),function(Ee,Ie){Ee.initDebugOverlayCanvas();const Be=Ee.debugOverlayCanvas,Le=Ee.context.gl,qe=Ee.debugOverlayCanvas.getContext("2d");qe.clearRect(0,0,Be.width,Be.height),qe.shadowColor="white",qe.shadowBlur=2,qe.lineWidth=1.5,qe.strokeStyle="white",qe.textBaseline="top",qe.font="bold 36px Open Sans, sans-serif",qe.fillText(Ie,5,5),qe.strokeText(Ie,5,5),Ee.debugOverlayTexture.update(Be),Ee.debugOverlayTexture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE)}(j,`${Te} ${ee}kB`);const Ce=j.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(x,w.TRIANGLES,P,O,Mi.alphaBlended,di.disabled,Om(a.bf.transparent,ye),null,Ce,q,j.debugBuffer,j.quadTriangleIndexBuffer,j.debugSegments),T.draw(x,w.LINE_STRIP,P,O,F,di.disabled,Om(a.bf.red),Y,Ce,q,j.debugBuffer,j.tileBorderIndexBuffer,j.debugSegments)}function Bu(j,s,p,x){const{isRenderingGlobe:w}=x,T=j.context,P=T.gl,O=j.transform,F=j.colorModeForRenderPass(),q=j.getDepthModeFor3D(),Y=j.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,j.width,j.height]);for(const ne of p){const ee=s.getTerrainMesh(ne.tileID),ue=j.renderToTexture.getTexture(ne),ye=s.getTerrainData(ne.tileID);T.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,ue.texture);const Te=s.getMeshFrameDelta(O.zoom),Ce=O.calculateFogMatrix(ne.tileID.toUnwrapped()),Ee=ip(Te,Ce,j.style.sky,O.pitch,w),Ie=O.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Y.draw(T,P.TRIANGLES,q,Yn.disabled,F,di.backCCW,Ee,ye,Ie,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}function Bc(j,s){if(!s.mesh){const p=new a.aL;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const x=new a.aN;x.emplaceBack(0,1,2),x.emplaceBack(0,2,3),s.mesh=new So(j.createVertexBuffer(p,jr.members),j.createIndexBuffer(x),a.aM.simpleSegment(0,0,p.length,x.length))}return s.mesh}class Bd{constructor(s,p){this.context=new Zh(s),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Vt.maxUnderzooming+Vt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vl}resize(s,p,x){if(this.width=Math.floor(s*x),this.height=Math.floor(p*x),this.pixelRatio=x,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const s=this.context,p=new a.aL;p.emplaceBack(0,0),p.emplaceBack(a.$,0),p.emplaceBack(0,a.$),p.emplaceBack(a.$,a.$),this.tileExtentBuffer=s.createVertexBuffer(p,jr.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const x=new a.aL;x.emplaceBack(0,0),x.emplaceBack(a.$,0),x.emplaceBack(0,a.$),x.emplaceBack(a.$,a.$),this.debugBuffer=s.createVertexBuffer(x,jr.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const w=new a.c7;w.emplaceBack(0,0,0,0),w.emplaceBack(a.$,0,a.$,0),w.emplaceBack(0,a.$,0,a.$),w.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=s.createVertexBuffer(w,Oy.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const T=new a.aL;T.emplaceBack(0,0),T.emplaceBack(a.$,0),T.emplaceBack(0,a.$),T.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(T,jr.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const P=new a.aL;P.emplaceBack(0,0),P.emplaceBack(1,0),P.emplaceBack(0,1),P.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(P,jr.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const O=new a.c8;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(O);const F=new a.aN;F.emplaceBack(1,0,2),F.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(F);const q=this.context.gl;this.stencilClearMode=new Yn({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO),this.tileExtentMesh=new So(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,p=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const x=a.L();a.bZ(x,0,this.width,this.height,0,0,1),a.N(x,x,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const w={mainMatrix:x,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:x};this.useProgram("clippingMask",null,!0).draw(s,p.TRIANGLES,Kn.disabled,this.stencilClearMode,Mi.disabled,di.disabled,null,null,w,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,p,x){if(this.currentStencilSource===s.source||!s.isTileClipped()||!p||!p.length)return;this.currentStencilSource=s.source,this.nextStencilID+p.length>256&&this.clearStencil();const w=this.context;w.setColorMode(Mi.disabled),w.setDepthMode(Kn.disabled);const T={};for(const P of p)T[P.key]=this.nextStencilID++;this._renderTileMasks(T,p,x,!0),this._renderTileMasks(T,p,x,!1),this._tileClippingMaskIDs=T}_renderTileMasks(s,p,x,w){const T=this.context,P=T.gl,O=this.style.projection,F=this.transform,q=this.useProgram("clippingMask");for(const Y of p){const ne=s[Y.key],ee=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Y),ue=O.getMeshFromTileID(this.context,Y.canonical,w,!0,"stencil"),ye=F.getProjectionData({overscaledTileID:Y,applyGlobeMatrix:!x,applyTerrainMatrix:!0});q.draw(T,P.TRIANGLES,Kn.disabled,new Yn({func:P.ALWAYS,mask:0},ne,255,P.KEEP,P.KEEP,P.REPLACE),Mi.disabled,x?di.disabled:di.backCCW,null,ee,ye,"$clipping",ue.vertexBuffer,ue.indexBuffer,ue.segments)}}_renderTilesDepthBuffer(){const s=this.context,p=s.gl,x=this.style.projection,w=this.transform,T=this.useProgram("depth"),P=this.getDepthModeFor3D(),O=Ct(w,{tileSize:w.tileSize});for(const F of O){const q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F),Y=x.getMeshFromTileID(this.context,F.canonical,!0,!0,"raster"),ne=w.getProjectionData({overscaledTileID:F,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(s,p.TRIANGLES,P,Yn.disabled,Mi.disabled,di.backCCW,null,q,ne,"$clipping",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,p=this.context.gl;return new Yn({func:p.NOTEQUAL,mask:255},s,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(s){const p=this.context.gl;return new Yn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const p=this.context.gl,x=s.sort((P,O)=>O.overscaledZ-P.overscaledZ),w=x[x.length-1].overscaledZ,T=x[0].overscaledZ-w+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const P={};for(let O=0;O<T;O++)P[O+w]=new Yn({func:p.GEQUAL,mask:255},O+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=T,[P,x]}return[{[w]:Yn.disabled},x]}stencilConfigForOverlapTwoPass(s){const p=this.context.gl,x=s.sort((P,O)=>O.overscaledZ-P.overscaledZ),w=x[x.length-1].overscaledZ,T=x[0].overscaledZ-w+1;if(this.clearStencil(),T>1){const P={},O={};for(let F=0;F<T;F++)P[F+w]=new Yn({func:p.GREATER,mask:255},T+1+F,255,p.KEEP,p.KEEP,p.REPLACE),O[F+w]=new Yn({func:p.GREATER,mask:255},1+F,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*T+1,[P,O,x]}return this.nextStencilID=3,[{[w]:new Yn({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[w]:new Yn({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},x]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Mi([s.CONSTANT_COLOR,s.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Mi.unblended:Mi.alphaBlended}getDepthModeForSublayer(s,p,x){if(!this.opaquePassEnabledForLayer())return Kn.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Kn(x||this.context.gl.LEQUAL,p,[w,w])}getDepthModeFor3D(){return new Kn(this.context.gl.LEQUAL,Kn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,p){var x,w;this.style=s,this.options=p,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const T=this.style._order,P=this.style.sourceCaches,O={},F={},q={},Y={isRenderingToTexture:!1,isRenderingGlobe:((x=s.projection)===null||x===void 0?void 0:x.transitionState)>0};for(const ee in P){const ue=P[ee];ue.used&&ue.prepare(this.context),O[ee]=ue.getVisibleCoordinates(!1),F[ee]=O[ee].slice().reverse(),q[ee]=ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ee=0;ee<T.length;ee++)if(this.style._layers[T[ee]].is3D()){this.opaquePassCutoff=ee;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ee of T){const ue=this.style._layers[ee];if(!ue.hasOffscreenPass()||ue.isHidden(this.transform.zoom))continue;const ye=F[ue.source];(ue.type==="custom"||ye.length)&&this.renderLayer(this,P[ue.source],ue,ye,Y)}if((w=this.style.projection)===null||w===void 0||w.updateGPUdependent({context:this.context,useProgram:ee=>this.useProgram(ee)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(ee,ue){const ye=ee.context,Te=ye.gl,Ce=((Ke,Fe,it)=>{const Mt=Math.cos(Fe.rollInRadians),_t=Math.sin(Fe.rollInRadians),wt=nt(Fe),St=Fe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ke.properties.get("sky-color"),u_horizon_color:Ke.properties.get("horizon-color"),u_horizon:[(Fe.width/2-wt*_t)*it,(Fe.height/2+wt*Mt)*it],u_horizon_normal:[-_t,Mt],u_sky_horizon_blend:Ke.properties.get("sky-horizon-blend")*Fe.height/2*it,u_sky_blend:St}})(ue,ee.style.map.transform,ee.pixelRatio),Ee=new Kn(Te.LEQUAL,Kn.ReadWrite,[0,1]),Ie=Yn.disabled,Be=ee.colorModeForRenderPass(),Le=ee.useProgram("sky"),qe=Bc(ye,ue);Le.draw(ye,Te.TRIANGLES,Ee,Ie,Be,di.disabled,Ce,null,void 0,"sky",qe.vertexBuffer,qe.indexBuffer,qe.segments)}(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const ee=this.style._layers[T[this.currentLayer]],ue=P[ee.source],ye=O[ee.source];this._renderTileClippingMasks(ee,ye,!1),this.renderLayer(this,ue,ee,ye,Y)}this.renderPass="translucent";let ne=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const ee=this.style._layers[T[this.currentLayer]],ue=P[ee.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ee,Y))continue;this.opaquePassEnabledForLayer()||ne||(ne=!0,Y.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ye=(ee.type==="symbol"?q:F)[ee.source];this._renderTileClippingMasks(ee,O[ee.source],!!this.renderToTexture),this.renderLayer(this,ue,ee,ye,Y)}if(Y.isRenderingGlobe&&function(ee,ue,ye){const Te=ee.context,Ce=Te.gl,Ee=ee.useProgram("atmosphere"),Ie=new Kn(Ce.LEQUAL,Kn.ReadOnly,[0,1]),Be=ee.transform,Le=function(St,rn){const an=St.properties.get("position"),Yt=[-an.x,-an.y,-an.z],Mn=a.ag(new Float64Array(16));return St.properties.get("anchor")==="map"&&(a.b6(Mn,Mn,rn.rollInRadians),a.b7(Mn,Mn,-rn.pitchInRadians),a.b6(Mn,Mn,rn.bearingInRadians),a.b7(Mn,Mn,rn.center.lat*Math.PI/180),a.bz(Mn,Mn,-rn.center.lng*Math.PI/180)),a.c6(Yt,Yt,Mn),Yt}(ye,ee.transform),qe=Be.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ke=ue.properties.get("atmosphere-blend")*qe.projectionTransition;if(Ke===0)return;const Fe=yn(Be.worldSize,Be.center.lat),it=Be.inverseProjectionMatrix,Mt=new Float64Array(4);Mt[3]=1,a.aw(Mt,Mt,Be.modelViewProjectionMatrix),Mt[0]/=Mt[3],Mt[1]/=Mt[3],Mt[2]/=Mt[3],Mt[3]=1,a.aw(Mt,Mt,it),Mt[0]/=Mt[3],Mt[1]/=Mt[3],Mt[2]/=Mt[3],Mt[3]=1;const _t=((St,rn,an,Yt,Mn)=>({u_sun_pos:St,u_atmosphere_blend:rn,u_globe_position:an,u_globe_radius:Yt,u_inv_proj_matrix:Mn}))(Le,Ke,[Mt[0],Mt[1],Mt[2]],Fe,it),wt=Bc(Te,ue);Ee.draw(Te,Ce.TRIANGLES,Ie,Yn.disabled,Mi.alphaBlended,di.disabled,_t,null,null,"atmosphere",wt.vertexBuffer,wt.indexBuffer,wt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ee=function(ue,ye){let Te=null;const Ce=Object.values(ue._layers).flatMap(Le=>Le.source&&!Le.isHidden(ye)?[ue.sourceCaches[Le.source]]:[]),Ee=Ce.filter(Le=>Le.getSource().type==="vector"),Ie=Ce.filter(Le=>Le.getSource().type!=="vector"),Be=Le=>{(!Te||Te.getSource().maxzoom<Le.getSource().maxzoom)&&(Te=Le)};return Ee.forEach(Le=>Be(Le)),Te||Ie.forEach(Le=>Be(Le)),Te}(this.style,this.transform.zoom);ee&&function(ue,ye,Te){for(let Ce=0;Ce<Te.length;Ce++)Fc(ue,ye,Te[Ce])}(this,ee,ee.getVisibleCoordinates())}this.options.showPadding&&function(ee){const ue=ee.transform.padding;Eo(ee,ee.transform.height-(ue.top||0),3,hs),Eo(ee,ue.bottom||0,3,Gl),xa(ee,ue.left||0,3,Ir),xa(ee,ee.transform.width-(ue.right||0),3,Fd);const ye=ee.transform.centerPoint;(function(Te,Ce,Ee,Ie){_a(Te,Ce-1,Ee-10,2,20,Ie),_a(Te,Ce-10,Ee-1,20,2,Ie)})(ee,ye.x,ee.transform.height-ye.y,Zo)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,x=this.transform.modelViewProjectionMatrix;let w=this.terrainFacilitator.dirty;w||(w=s?!a.c9(p,x):!a.ca(p,x)),w||(w=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),w&&(a.cb(p,x),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,P){const O=T.context,F=O.gl,q=T.transform,Y=Mi.unblended,ne=new Kn(F.LEQUAL,Kn.ReadWrite,[0,1]),ee=P.sourceCache.getRenderableTiles(),ue=T.useProgram("terrainDepth");O.bindFramebuffer.set(P.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:a.bf.transparent,depth:1});for(const ye of ee){const Te=P.getTerrainMesh(ye.tileID),Ce=P.getTerrainData(ye.tileID),Ee=q.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ie={u_ele_delta:P.getMeshFrameDelta(q.zoom)};ue.draw(O,F.TRIANGLES,ne,Yn.disabled,Y,di.backCCW,Ie,Ce,Ee,"terrain",Te.vertexBuffer,Te.indexBuffer,Te.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,P){const O=T.context,F=O.gl,q=T.transform,Y=Mi.unblended,ne=new Kn(F.LEQUAL,Kn.ReadWrite,[0,1]),ee=P.getCoordsTexture(),ue=P.sourceCache.getRenderableTiles(),ye=T.useProgram("terrainCoords");O.bindFramebuffer.set(P.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:a.bf.transparent,depth:1}),P.coordsIndex=[];for(const Te of ue){const Ce=P.getTerrainMesh(Te.tileID),Ee=P.getTerrainData(Te.tileID);O.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,ee.texture);const Ie={u_terrain_coords_id:(255-P.coordsIndex.length)/255,u_texture:0,u_ele_delta:P.getMeshFrameDelta(q.zoom)},Be=q.getProjectionData({overscaledTileID:Te.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ye.draw(O,F.TRIANGLES,ne,Yn.disabled,Y,di.backCCW,Ie,Ee,Be,"terrain",Ce.vertexBuffer,Ce.indexBuffer,Ce.segments),P.coordsIndex.push(Te.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(s,p,x,w,T){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="custom"||(w||[]).length)&&(this.id=x.id,a.cc(x)?function(P,O,F,q,Y,ne){if(P.renderPass!=="translucent")return;const{isRenderingToTexture:ee}=ne,ue=Yn.disabled,ye=P.colorModeForRenderPass();(F._unevaluatedLayout.hasValue("text-variable-anchor")||F._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Te,Ce,Ee,Ie,Be,Le,qe,Ke,Fe){const it=Ce.transform,Mt=Ce.style.map.terrain,_t=Be==="map",wt=Le==="map";for(const St of Te){const rn=Ie.getTile(St),an=rn.getBucket(Ee);if(!an||!an.text||!an.text.segments.get().length)continue;const Yt=a.an(an.textSizeData,it.zoom),Mn=a.aC(rn,1,Ce.transform.zoom),ni=Bn(_t,Ce.transform,Mn),Fi=Ee.layout.get("icon-text-fit")!=="none"&&an.hasIconData();if(Yt){const Bi=Math.pow(2,it.zoom-rn.tileID.overscaledZ),Qi=Mt?(Ts,ns)=>Mt.getElevation(St,Ts,ns):null;Ic(an,_t,wt,Fe,it,ni,Bi,Yt,Fi,a.aD(it,rn,qe,Ke),St.toUnwrapped(),Qi)}}}(q,P,F,O,F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),Y),F.paint.get("icon-opacity").constantOr(1)!==0&&ea(P,O,F,q,!1,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),F.layout.get("icon-rotation-alignment"),F.layout.get("icon-pitch-alignment"),F.layout.get("icon-keep-upright"),ue,ye,ee),F.paint.get("text-opacity").constantOr(1)!==0&&ea(P,O,F,q,!0,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),F.layout.get("text-keep-upright"),ue,ye,ee),O.map.showCollisionBoxes&&(Id(P,O,F,q,!0),Id(P,O,F,q,!1))}(s,p,x,w,this.style.placement.variableOffsets,T):a.cd(x)?function(P,O,F,q,Y){if(P.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=Y,ee=F.paint.get("circle-opacity"),ue=F.paint.get("circle-stroke-width"),ye=F.paint.get("circle-stroke-opacity"),Te=!F.layout.get("circle-sort-key").isConstant();if(ee.constantOr(1)===0&&(ue.constantOr(1)===0||ye.constantOr(1)===0))return;const Ce=P.context,Ee=Ce.gl,Ie=P.transform,Be=P.getDepthModeForSublayer(0,Kn.ReadOnly),Le=Yn.disabled,qe=P.colorModeForRenderPass(),Ke=[],Fe=Ie.getCircleRadiusCorrection();for(let it=0;it<q.length;it++){const Mt=q[it],_t=O.getTile(Mt),wt=_t.getBucket(F);if(!wt)continue;const St=F.paint.get("circle-translate"),rn=F.paint.get("circle-translate-anchor"),an=a.aD(Ie,_t,St,rn),Yt=wt.programConfigurations.get(F.id),Mn=P.useProgram("circle",Yt),ni=wt.layoutVertexBuffer,Fi=wt.indexBuffer,Bi=P.style.map.terrain&&P.style.map.terrain.getTerrainData(Mt),Qi={programConfiguration:Yt,program:Mn,layoutVertexBuffer:ni,indexBuffer:Fi,uniformValues:bl(P,_t,F,an,Fe),terrainData:Bi,projectionData:Ie.getProjectionData({overscaledTileID:Mt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0})};if(Te){const Ts=wt.segments.get();for(const ns of Ts)Ke.push({segments:new a.aM([ns]),sortKey:ns.sortKey,state:Qi})}else Ke.push({segments:wt.segments,sortKey:0,state:Qi})}Te&&Ke.sort((it,Mt)=>it.sortKey-Mt.sortKey);for(const it of Ke){const{programConfiguration:Mt,program:_t,layoutVertexBuffer:wt,indexBuffer:St,uniformValues:rn,terrainData:an,projectionData:Yt}=it.state;_t.draw(Ce,Ee.TRIANGLES,Be,Le,qe,di.backCCW,rn,an,Yt,F.id,wt,St,it.segments,F.paint,P.transform.zoom,Mt)}}(s,p,x,w,T):a.ce(x)?function(P,O,F,q,Y){if(F.paint.get("heatmap-opacity")===0)return;const ne=P.context,{isRenderingToTexture:ee,isRenderingGlobe:ue}=Y;if(P.style.map.terrain){for(const ye of q){const Te=O.getTile(ye);O.hasRenderableParent(ye)||(P.renderPass==="offscreen"?Go(P,Te,F,ye,ue):P.renderPass==="translucent"&&Ka(P,F,ye,ee,ue))}ne.viewport.set([0,0,P.width,P.height])}else P.renderPass==="offscreen"?function(ye,Te,Ce,Ee){const Ie=ye.context,Be=Ie.gl,Le=ye.transform,qe=Yn.disabled,Ke=new Mi([Be.ONE,Be.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(Fe,it,Mt){const _t=Fe.gl;Fe.activeTexture.set(_t.TEXTURE1),Fe.viewport.set([0,0,it.width/4,it.height/4]);let wt=Mt.heatmapFbos.get(a.c3);wt?(_t.bindTexture(_t.TEXTURE_2D,wt.colorAttachment.get()),Fe.bindFramebuffer.set(wt.framebuffer)):(wt=Ra(Fe,it.width/4,it.height/4),Mt.heatmapFbos.set(a.c3,wt))})(Ie,ye,Ce),Ie.clear({color:a.bf.transparent});for(let Fe=0;Fe<Ee.length;Fe++){const it=Ee[Fe];if(Te.hasRenderableParent(it))continue;const Mt=Te.getTile(it),_t=Mt.getBucket(Ce);if(!_t)continue;const wt=_t.programConfigurations.get(Ce.id),St=ye.useProgram("heatmap",wt),rn=Le.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),an=Le.getCircleRadiusCorrection();St.draw(Ie,Be.TRIANGLES,Kn.disabled,qe,Ke,di.backCCW,Vh(Mt,Le.zoom,Ce.paint.get("heatmap-intensity"),an),null,rn,Ce.id,_t.layoutVertexBuffer,_t.indexBuffer,_t.segments,Ce.paint,Le.zoom,wt)}Ie.viewport.set([0,0,ye.width,ye.height])}(P,O,F,q):P.renderPass==="translucent"&&function(ye,Te){const Ce=ye.context,Ee=Ce.gl;Ce.setColorMode(ye.colorModeForRenderPass());const Ie=Te.heatmapFbos.get(a.c3);Ie&&(Ce.activeTexture.set(Ee.TEXTURE0),Ee.bindTexture(Ee.TEXTURE_2D,Ie.colorAttachment.get()),Ce.activeTexture.set(Ee.TEXTURE1),Da(Ce,Te).bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),ye.useProgram("heatmapTexture").draw(Ce,Ee.TRIANGLES,Kn.disabled,Yn.disabled,ye.colorModeForRenderPass(),di.disabled,rp(ye,Te,0,1),null,null,Te.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments,Te.paint,ye.transform.zoom))}(P,F)}(s,p,x,w,T):a.cf(x)?function(P,O,F,q,Y){if(P.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=Y,ee=F.paint.get("line-opacity"),ue=F.paint.get("line-width");if(ee.constantOr(1)===0||ue.constantOr(1)===0)return;const ye=P.getDepthModeForSublayer(0,Kn.ReadOnly),Te=P.colorModeForRenderPass(),Ce=F.paint.get("line-dasharray"),Ee=Ce.constantOr(1),Ie=F.paint.get("line-pattern"),Be=Ie.constantOr(1),Le=F.paint.get("line-gradient"),qe=F.getCrossfadeParameters();let Ke;Ke=Be?"linePattern":Ee&&Le?"lineGradientSDF":Ee?"lineSDF":Le?"lineGradient":"line";const Fe=P.context,it=Fe.gl,Mt=P.transform;let _t=!0;for(const wt of q){const St=O.getTile(wt);if(Be&&!St.patternsLoaded())continue;const rn=St.getBucket(F);if(!rn)continue;const an=rn.programConfigurations.get(F.id),Yt=P.context.program.get(),Mn=P.useProgram(Ke,an),ni=_t||Mn.program!==Yt,Fi=P.style.map.terrain&&P.style.map.terrain.getTerrainData(wt),Bi=Ie.constantOr(null),Qi=Ce&&Ce.constantOr(null);if(Bi&&St.imageAtlas){const tr=St.imageAtlas,Bs=tr.patternPositions[Bi.to.toString()],Vs=tr.patternPositions[Bi.from.toString()];Bs&&Vs&&an.setConstantPatternPositions(Bs,Vs)}else if(Qi){const tr=F.layout.get("line-cap")==="round",Bs=P.lineAtlas.getDash(Qi.to,tr),Vs=P.lineAtlas.getDash(Qi.from,tr);an.setConstantDashPositions(Bs,Vs)}const Ts=Mt.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0}),ns=Mt.getPixelScale();let yi;Be?(yi=vl(P,St,F,ns,qe),yp(Fe,it,St,an,qe)):Ee&&Le?(yi=op(P,St,F,ns,qe,rn.lineClipsArray.length),Ps(P,O,Fe,it,F,rn,wt,an,qe)):Ee?(yi=Uh(P,St,F,ns,qe),Lc(P,Fe,it,an,ni,qe)):Le?(yi=ap(P,St,F,ns,rn.lineClipsArray.length),ta(P,O,Fe,it,F,rn,wt)):yi=Pu(P,St,F,ns);const as=P.stencilModeForClipping(wt);Mn.draw(Fe,it.TRIANGLES,ye,as,Te,di.disabled,yi,Fi,Ts,F.id,rn.layoutVertexBuffer,rn.indexBuffer,rn.segments,F.paint,P.transform.zoom,an,rn.layoutVertexBuffer2),_t=!1}}(s,p,x,w,T):a.cg(x)?function(P,O,F,q,Y){const ne=F.paint.get("fill-color"),ee=F.paint.get("fill-opacity");if(ee.constantOr(1)===0)return;const{isRenderingToTexture:ue}=Y,ye=P.colorModeForRenderPass(),Te=F.paint.get("fill-pattern"),Ce=P.opaquePassEnabledForLayer()&&!Te.constantOr(1)&&ne.constantOr(a.bf.transparent).a===1&&ee.constantOr(0)===1?"opaque":"translucent";if(P.renderPass===Ce){const Ee=P.getDepthModeForSublayer(1,P.renderPass==="opaque"?Kn.ReadWrite:Kn.ReadOnly);Wo(P,O,F,q,Ee,ye,!1,ue)}if(P.renderPass==="translucent"&&F.paint.get("fill-antialias")){const Ee=P.getDepthModeForSublayer(F.getPaintProperty("fill-outline-color")?2:0,Kn.ReadOnly);Wo(P,O,F,q,Ee,ye,!0,ue)}}(s,p,x,w,T):a.ch(x)?function(P,O,F,q,Y){const ne=F.paint.get("fill-extrusion-opacity");if(ne===0)return;const{isRenderingToTexture:ee}=Y;if(P.renderPass==="translucent"){const ue=new Kn(P.context.gl.LEQUAL,Kn.ReadWrite,P.depthRangeFor3D);if(ne!==1||F.paint.get("fill-extrusion-pattern").constantOr(1))za(P,O,F,q,ue,Yn.disabled,Mi.disabled,ee),za(P,O,F,q,ue,P.stencilModeFor3D(),P.colorModeForRenderPass(),ee);else{const ye=P.colorModeForRenderPass();za(P,O,F,q,ue,Yn.disabled,ye,ee)}}}(s,p,x,w,T):a.ci(x)?function(P,O,F,q,Y){if(P.renderPass!=="offscreen"&&P.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=Y,ee=P.context,ue=P.style.projection.useSubdivision,ye=P.getDepthModeForSublayer(0,Kn.ReadOnly),Te=P.colorModeForRenderPass();if(P.renderPass==="offscreen")(function(Ce,Ee,Ie,Be,Le,qe,Ke){const Fe=Ce.context,it=Fe.gl;for(const Mt of Ie){const _t=Ee.getTile(Mt),wt=_t.dem;if(!wt||!wt.data||!_t.needsHillshadePrepare)continue;const St=wt.dim,rn=wt.stride,an=wt.getPixels();if(Fe.activeTexture.set(it.TEXTURE1),Fe.pixelStoreUnpackPremultiplyAlpha.set(!1),_t.demTexture=_t.demTexture||Ce.getTileTexture(rn),_t.demTexture){const Mn=_t.demTexture;Mn.update(an,{premultiply:!1}),Mn.bind(it.NEAREST,it.CLAMP_TO_EDGE)}else _t.demTexture=new a.T(Fe,an,it.RGBA,{premultiply:!1}),_t.demTexture.bind(it.NEAREST,it.CLAMP_TO_EDGE);Fe.activeTexture.set(it.TEXTURE0);let Yt=_t.fbo;if(!Yt){const Mn=new a.T(Fe,{width:St,height:St,data:null},it.RGBA);Mn.bind(it.LINEAR,it.CLAMP_TO_EDGE),Yt=_t.fbo=Fe.createFramebuffer(St,St,!0,!1),Yt.colorAttachment.set(Mn.texture)}Fe.bindFramebuffer.set(Yt.framebuffer),Fe.viewport.set([0,0,St,St]),Ce.useProgram("hillshadePrepare").draw(Fe,it.TRIANGLES,Le,qe,Ke,di.disabled,kc(_t.tileID,wt),null,null,Be.id,Ce.rasterBoundsBuffer,Ce.quadTriangleIndexBuffer,Ce.rasterBoundsSegments),_t.needsHillshadePrepare=!1}})(P,O,q,F,ye,Yn.disabled,Te),ee.viewport.set([0,0,P.width,P.height]);else if(P.renderPass==="translucent")if(ue){const[Ce,Ee,Ie]=P.stencilConfigForOverlapTwoPass(q);Ou(P,O,F,Ie,Ce,ye,Te,!1,ne),Ou(P,O,F,Ie,Ee,ye,Te,!0,ne)}else{const[Ce,Ee]=P.getStencilConfigForOverlapAndUpdateStencilID(q);Ou(P,O,F,Ee,Ce,ye,Te,!1,ne)}}(s,p,x,w,T):a.cj(x)?function(P,O,F,q,Y){if(P.renderPass!=="translucent"||!q.length)return;const{isRenderingToTexture:ne}=Y,ee=P.style.projection.useSubdivision,ue=P.getDepthModeForSublayer(0,Kn.ReadOnly),ye=P.colorModeForRenderPass();if(ee){const[Te,Ce,Ee]=P.stencilConfigForOverlapTwoPass(q);Qa(P,O,F,Ee,Te,ue,ye,!1,ne),Qa(P,O,F,Ee,Ce,ue,ye,!0,ne)}else{const[Te,Ce]=P.getStencilConfigForOverlapAndUpdateStencilID(q);Qa(P,O,F,Ce,Te,ue,ye,!1,ne)}}(s,p,x,w,T):a.bK(x)?function(P,O,F,q,Y){if(P.renderPass!=="translucent"||F.paint.get("raster-opacity")===0||!q.length)return;const{isRenderingToTexture:ne}=Y,ee=O.getSource(),ue=P.style.projection.useSubdivision;if(ee instanceof ln)Ld(P,O,F,q,null,!1,!1,ee.tileCoords,ee.flippedWindingOrder,ne);else if(ue){const[ye,Te,Ce]=P.stencilConfigForOverlapTwoPass(q);Ld(P,O,F,Ce,ye,!1,!0,Lu,!1,ne),Ld(P,O,F,Ce,Te,!0,!0,Lu,!1,ne)}else{const[ye,Te]=P.getStencilConfigForOverlapAndUpdateStencilID(q);Ld(P,O,F,Te,ye,!1,!0,Lu,!1,ne)}}(s,p,x,w,T):a.ck(x)?function(P,O,F,q,Y){const ne=F.paint.get("background-color"),ee=F.paint.get("background-opacity");if(ee===0)return;const{isRenderingToTexture:ue}=Y,ye=P.context,Te=ye.gl,Ce=P.style.projection,Ee=P.transform,Ie=Ee.tileSize,Be=F.paint.get("background-pattern");if(P.isPatternMissing(Be))return;const Le=!Be&&ne.a===1&&ee===1&&P.opaquePassEnabledForLayer()?"opaque":"translucent";if(P.renderPass!==Le)return;const qe=Yn.disabled,Ke=P.getDepthModeForSublayer(0,Le==="opaque"?Kn.ReadWrite:Kn.ReadOnly),Fe=P.colorModeForRenderPass(),it=P.useProgram(Be?"backgroundPattern":"background"),Mt=q||Ct(Ee,{tileSize:Ie,terrain:P.style.map.terrain});Be&&(ye.activeTexture.set(Te.TEXTURE0),P.imageManager.bind(P.context));const _t=F.getCrossfadeParameters();for(const wt of Mt){const St=Ee.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!ue,applyTerrainMatrix:!0}),rn=Be?Nc(ee,P,Be,{tileID:wt,tileSize:Ie},_t):pa(ee,ne),an=P.style.map.terrain&&P.style.map.terrain.getTerrainData(wt),Yt=Ce.getMeshFromTileID(ye,wt.canonical,!1,!0,"raster");it.draw(ye,Te.TRIANGLES,Ke,qe,Fe,di.backCCW,rn,an,St,F.id,Yt.vertexBuffer,Yt.indexBuffer,Yt.segments)}}(s,0,x,w,T):a.cl(x)&&function(P,O,F,q){const{isRenderingGlobe:Y}=q,ne=P.context,ee=F.implementation,ue=P.style.projection,ye=P.transform,Te=ye.getProjectionDataForCustomLayer(Y),Ce={farZ:ye.farZ,nearZ:ye.nearZ,fov:ye.fov*Math.PI/180,modelViewProjectionMatrix:ye.modelViewProjectionMatrix,projectionMatrix:ye.projectionMatrix,shaderData:{variantName:ue.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ue.shaderPreludeCode.vertexSource}`,define:ue.shaderDefine},defaultProjectionData:Te},Ee=ee.renderingMode?ee.renderingMode:"2d";if(P.renderPass==="offscreen"){const Ie=ee.prerender;Ie&&(P.setCustomLayerDefaults(),ne.setColorMode(P.colorModeForRenderPass()),Ie.call(ee,ne.gl,Ce),ne.setDirty(),P.setBaseState())}else if(P.renderPass==="translucent"){P.setCustomLayerDefaults(),ne.setColorMode(P.colorModeForRenderPass()),ne.setStencilMode(Yn.disabled);const Ie=Ee==="3d"?P.getDepthModeFor3D():P.getDepthModeForSublayer(0,Kn.ReadOnly);ne.setDepthMode(Ie),ee.render(ne.gl,Ce),ne.setDirty(),P.setBaseState(),ne.bindFramebuffer.set(null)}}(s,0,x,T))}saveTileTexture(s){const p=this._tileTextures[s.size[0]];p?p.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const p=this._tileTextures[s];return p&&p.length>0?p.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const p=this.imageManager.getPattern(s.from.toString()),x=this.imageManager.getPattern(s.to.toString());return!p||!x}useProgram(s,p,x=!1,w=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,P=this.style.projection,O=x?lr.projectionMercator:P.shaderPreludeCode,F=x?Wa:P.shaderDefine,q=s+(p?p.cacheKey:"")+`/${x?ui:P.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(w?`/${w.join("/")}`:"");return this.cache[q]||(this.cache[q]=new Cc(this.context,lr[s],p,Md[s],this._showOverdrawInspector,T,O,F,w)),this.cache[q]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:p}=this.context.gl;return this.width!==s||this.height!==p}}function jl(j,s){let p,x=!1,w=null,T=null;const P=()=>{w=null,x&&(j.apply(T,p),w=setTimeout(P,s),x=!1)};return(...O)=>(x=!0,T=this,p=O,w||P(),w)}class yr{constructor(s){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let x;return p.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(x=w)}),(x&&x[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const x=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:x,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const x=p.join("/");let w=x;w.split("&").length>0&&(w=w.split("&")[0]),this._hashName&&(w=`${this._hashName}=${x}`);let T=window.location.hash.replace(w,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let P=window.location.href.replace(/(#.+)?$/,T);P=P.replace("&&","&"),window.history.replaceState(window.history.state,null,P)},this._updateHash=jl(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const p=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,w=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,w),P=Math.round(p.lng*T)/T,O=Math.round(p.lat*T)/T,F=this._map.getBearing(),q=this._map.getPitch();let Y="";if(Y+=s?`/${P}/${O}/${x}`:`${x}/${O}/${P}`,(F||q)&&(Y+="/"+Math.round(10*F)/10),q&&(Y+=`/${Math.round(q)}`),this._hashName){const ne=this._hashName;let ee=!1;const ue=window.location.hash.slice(1).split("&").map(ye=>{const Te=ye.split("=")[0];return Te===ne?(ee=!0,`${Te}=${Y}`):ye}).filter(ye=>ye);return ee||ue.push(`${ne}=${Y}`),`#${ue.join("&")}`}return`#${Y}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new a.S(+s[2],+s[1])}catch(T){return!1}const p=+s[0],x=+(s[3]||0),w=+(s[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&x>=-180&&x<=180&&w>=this._map.getMinPitch()&&w<=this._map.getMaxPitch()}}const Cl={linearity:.3,easing:a.cm(0,0,.3,1)},Wl=a.e({deceleration:2500,maxSpeed:1400},Cl),Um=a.e({deceleration:20,maxSpeed:1400},Cl),$m=a.e({deceleration:1e3,maxSpeed:360},Cl),Hm=a.e({deceleration:1e3,maxSpeed:90},Cl),er=a.e({deceleration:1e3,maxSpeed:360},Cl);class Yh{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,p=A.now();for(;s.length>0&&p-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)p.zoom+=T.zoomDelta||0,p.bearing+=T.bearingDelta||0,p.pitch+=T.pitchDelta||0,p.roll+=T.rollDelta||0,T.panDelta&&p.pan._add(T.panDelta),T.around&&(p.around=T.around),T.pinchAround&&(p.pinchAround=T.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(p.pan.mag()){const T=Xo(p.pan.mag(),x,a.e({},Wl,s||{})),P=p.pan.mult(T.amount/p.pan.mag()),O=this._map.cameraHelper.handlePanInertia(P,this._map.transform);w.center=O.easingCenter,w.offset=O.easingOffset,Yo(w,T)}if(p.zoom){const T=Xo(p.zoom,x,Um);w.zoom=this._map.transform.zoom+T.amount,Yo(w,T)}if(p.bearing){const T=Xo(p.bearing,x,$m);w.bearing=this._map.transform.bearing+a.ah(T.amount,-179,179),Yo(w,T)}if(p.pitch){const T=Xo(p.pitch,x,Hm);w.pitch=this._map.transform.pitch+T.amount,Yo(w,T)}if(p.roll){const T=Xo(p.roll,x,er);w.roll=this._map.transform.roll+a.ah(T.amount,-179,179),Yo(w,T)}if(w.zoom||w.bearing){const T=p.pinchAround===void 0?p.around:p.pinchAround;w.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),a.e(w,{noMoveStart:!0})}}function Yo(j,s){(!j.duration||j.duration<s.duration)&&(j.duration=s.duration,j.easing=s.easing)}function Xo(j,s,p){const{maxSpeed:x,linearity:w,deceleration:T}=p,P=a.ah(j*w/(s/1e3),-x,x),O=Math.abs(P)/(T*w);return{easing:p.easing,duration:1e3*O,amount:P*(O/2)}}class Or extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,x,w={}){x=x instanceof MouseEvent?x:new MouseEvent(s,x);const T=E.mousePos(p.getCanvas(),x),P=p.unproject(T);super(s,a.e({point:T,lngLat:P,originalEvent:x},w)),this._defaultPrevented=!1,this.target=p}}class Ia extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,x){const w=s==="touchend"?x.changedTouches:x.touches,T=E.touchPos(p.getCanvasContainer(),w),P=T.map(F=>p.unproject(F)),O=T.reduce((F,q,Y,ne)=>F.add(q.div(ne.length)),new a.P(0,0));super(s,{points:T,point:O,lngLats:P,lngLat:p.unproject(O),originalEvent:x}),this._defaultPrevented=!1}}class Zl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,x){super(s,{originalEvent:x}),this._defaultPrevented=!1}}class Ja{constructor(s,p){this._map=s,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Zl(s.type,this._map,s))}mousedown(s,p){return this._mousedownPos=p,this._firePreventable(new Or(s.type,this._map,s))}mouseup(s){this._map.fire(new Or(s.type,this._map,s))}click(s,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Or(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Or(s.type,this._map,s))}mouseover(s){this._map.fire(new Or(s.type,this._map,s))}mouseout(s){this._map.fire(new Or(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Ia(s.type,this._map,s))}touchmove(s){this._map.fire(new Ia(s.type,this._map,s))}touchend(s){this._map.fire(new Ia(s.type,this._map,s))}touchcancel(s){this._map.fire(new Ia(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class eo{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Or(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Or("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Or(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vu{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(a.P.convert(s),this._map.terrain)}}class Oa{constructor(s,p){this._map=s,this._tr=new Vu(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,p){this.isEnabled()&&s.shiftKey&&s.button===0&&(E.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(s,p){if(!this._active)return;const x=p;if(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=x,this._box||(this._box=E.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const T=Math.min(w.x,x.x),P=Math.max(w.x,x.x),O=Math.min(w.y,x.y),F=Math.max(w.y,x.y);E.setTransform(this._box,`translate(${T}px,${O}px)`),this._box.style.width=P-T+"px",this._box.style.height=F-O+"px"}mouseupWindow(s,p){if(!this._active||s.button!==0)return;const x=this._startPos,w=p;if(this.reset(),E.suppressClick(),x.x!==w.x||x.y!==w.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:s})),{cameraAnimation:T=>T.fitScreenCoordinates(x,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(E.remove(this._box),this._box=null),E.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,p){return this._map.fire(new a.l(s,{originalEvent:p}))}}function ba(j,s){if(j.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${j.length}, points ${s.length}`);const p={};for(let x=0;x<j.length;x++)p[j[x].identifier]=s[x];return p}class xp{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,p,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),x.length===this.numTouches&&(this.centroid=function(w){const T=new a.P(0,0);for(const P of w)T._add(P);return T.div(w.length)}(p),this.touches=ba(x,p)))}touchmove(s,p,x){if(this.aborted||!this.centroid)return;const w=ba(x,p);for(const T in this.touches){const P=w[T];(!P||P.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(s,p,x){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class Uu{constructor(s){this.singleTap=new xp(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,p,x){this.singleTap.touchstart(s,p,x)}touchmove(s,p,x){this.singleTap.touchmove(s,p,x)}touchend(s,p,x){const w=this.singleTap.touchend(s,p,x);if(w){const T=s.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(w)<30;if(T&&P||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class qm{constructor(s){this._tr=new Vu(s),this._zoomIn=new Uu({numTouches:1,numTaps:2}),this._zoomOut=new Uu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,p,x){this._zoomIn.touchstart(s,p,x),this._zoomOut.touchstart(s,p,x)}touchmove(s,p,x){this._zoomIn.touchmove(s,p,x),this._zoomOut.touchmove(s,p,x)}touchend(s,p,x){const w=this._zoomIn.touchend(s,p,x),T=this._zoomOut.touchend(s,p,x),P=this._tr;return w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(w)},{originalEvent:s})}):T?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(T)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tl{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const p=this._moveFunction(...s);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(s,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,p){if(!this.isEnabled())return;const x=this._lastPoint;if(!x)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const w=Array.isArray(p)?p[0]:p;return!this._moved&&w.dist(x)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(x,w))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&E.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const _p=0,Yl=2,Ao={[_p]:1,[Yl]:2};class xn{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const p=E.mouseButton(s);this._eventButton=p}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(p,x){const w=Ao[x];return p.buttons===void 0||(p.buttons&w)!==w}(s,this._eventButton)}isValidEndEvent(s){return E.mouseButton(s)===this._eventButton}}class Vd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class Xh{constructor(s=new xn({checkCorrectEvent:()=>!0}),p=new Vd){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(s,p,x){return s instanceof MouseEvent?p(s):typeof TouchEvent!="undefined"&&s instanceof TouchEvent?x(s):void 0}startMove(s){this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.startMove(p),p=>this.oneFingerTouchMoveStateManager.startMove(p))}endMove(s){this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.endMove(p),p=>this.oneFingerTouchMoveStateManager.endMove(p))}isValidStartEvent(s){return this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.isValidStartEvent(p),p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p))}isValidMoveEvent(s){return this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.isValidMoveEvent(p),p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p))}isValidEndEvent(s){return this._executeRelevantHandler(s,p=>this.mouseMoveStateManager.isValidEndEvent(p),p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p))}}const kl=j=>{j.mousedown=j.dragStart,j.mousemoveWindow=j.dragMove,j.mouseup=j.dragEnd,j.contextmenu=s=>{s.preventDefault()}};class $u{constructor(s,p){this._clickTolerance=s.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,p,x){return this._calculateTransform(s,p,x)}touchmove(s,p,x){if(this._active){if(!this._shouldBePrevented(x.length))return s.preventDefault(),this._calculateTransform(s,p,x);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,p,x){this._calculateTransform(s,p,x),this._active&&this._shouldBePrevented(x.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,p,x){x.length>0&&(this._active=!0);const w=ba(x,p),T=new a.P(0,0),P=new a.P(0,0);let O=0;for(const q in w){const Y=w[q],ne=this._touches[q];ne&&(T._add(Y),P._add(Y.sub(ne)),O++,w[q]=Y)}if(this._touches=w,this._shouldBePrevented(O)||!P.mag())return;const F=P.div(O);return this._sum._add(F),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(O),panDelta:F}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,p,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([p[0],p[1]]))}touchmove(s,p,x){if(!this._firstTwoTouches)return;s.preventDefault();const[w,T]=this._firstTwoTouches,P=La(x,p,w),O=La(x,p,T);if(!P||!O)return;const F=this._aroundCenter?null:P.add(O).div(2);return this._move([P,O],F,s)}touchend(s,p,x){if(!this._firstTwoTouches)return;const[w,T]=this._firstTwoTouches,P=La(x,p,w),O=La(x,p,T);P&&O||(this._active&&E.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function La(j,s,p){for(let x=0;x<j.length;x++)if(j[x].identifier===p)return s[x]}function mi(j,s){return Math.log(j/s)/Math.LN2}class Hu extends Xl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,p){const x=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(mi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mi(this._distance,x),pinchAround:p}}}function Nl(j,s){return 180*j.angleWith(s)/Math.PI}class Po extends Xl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,p,x){const w=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nl(this._vector,w),pinchAround:p}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const p=25/(Math.PI*this._minDiameter)*360,x=Nl(s,this._startVector);return Math.abs(x)<p}}function Vc(j){return Math.abs(j.y)>Math.abs(j.x)}class Kh extends Xl{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,p,x){super.touchstart(s,p,x),this._currentTouchCount=x.length}_start(s){this._lastPoints=s,Vc(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,p,x){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=s[0].sub(this._lastPoints[0]),T=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,T,x.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(w.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(s,p,x){if(this._valid!==void 0)return this._valid;const w=s.mag()>=2,T=p.mag()>=2;if(!w&&!T)return;if(!w||!T)return this._firstMove===void 0&&(this._firstMove=x),x-this._firstMove<100&&void 0;const P=s.y>0==p.y>0;return Vc(s)&&Vc(p)&&P}}const Qh={panStep:100,bearingStep:15,pitchStep:10};class Kl{constructor(s){this._tr=new Vu(s);const p=Qh;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let p=0,x=0,w=0,T=0,P=0;switch(s.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:s.shiftKey?x=-1:(s.preventDefault(),T=-1);break;case 39:s.shiftKey?x=1:(s.preventDefault(),T=1);break;case 38:s.shiftKey?w=1:(s.preventDefault(),P=-1);break;case 40:s.shiftKey?w=-1:(s.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(x=0,w=0),{cameraAnimation:O=>{const F=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:qu,zoom:p?Math.round(F.zoom)+p*(s.shiftKey?2:1):F.zoom,bearing:F.bearing+x*this._bearingStep,pitch:F.pitch+w*this._pitchStep,offset:[-T*this._panStep,-P*this._panStep],center:F.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function qu(j){return j*(2-j)}const bp=4.000244140625,vp=1/450;class Uc{constructor(s,p){this._onTimeout=x=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(x)},this._map=s,this._tr=new Vu(s),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=vp}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let p=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const x=A.now(),w=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,p!==0&&p%bp==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(w*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),s.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=s,this._delta-=p,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=E.mousePos(this._map.getCanvas(),s),x=this._tr;this._aroundPoint=this._aroundCenter?x.transform.locationToScreenPoint(a.S.convert(x.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>bp?this._wheelZoomRate:this._defaultZoomRate;let F=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&F!==0&&(F=1/F);const q=typeof this._targetZoom!="number"?s.scale:a.af(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),a.ak(q*F)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,x=this._startZoom,w=this._easing;let T,P=!1;if(this._type==="wheel"&&x&&w){const O=A.now()-this._lastWheelEventTime,F=Math.min((O+5)/200,1),q=w(F);T=a.C.number(x,p,q),F<1?this._frameId||(this._frameId=!0):P=!0}else T=p,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!P,zoomDelta:T-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let p=a.co;if(this._prevEase){const x=this._prevEase,w=(A.now()-x.start)/x.duration,T=x.easing(w+.01)-x.easing(w),P=.27/Math.sqrt(T*T+1e-4)*.01,O=Math.sqrt(.0729-P*P);p=a.cm(P,O,.25,1)}return this._prevEase={start:A.now(),duration:s,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ud{constructor(s,p){this._clickZoom=s,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ml{constructor(s){this._tr=new Vu(s),this.reset()}reset(){this._active=!1}dblclick(s,p){return s.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yi{constructor(){this._tap=new Uu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,p,x){if(!this._swipePoint)if(this._tapTime){const w=p[0],T=s.timeStamp-this._tapTime<500,P=this._tapPoint.dist(w)<30;T&&P?x.length>0&&(this._swipePoint=w,this._swipeTouch=x[0].identifier):this.reset()}else this._tap.touchstart(s,p,x)}touchmove(s,p,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const w=p[0],T=w.y-this._swipePoint.y;return this._swipePoint=w,s.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(s,p,x)}touchend(s,p,x){if(this._tapTime)this._swipePoint&&x.length===0&&this.reset();else{const w=this._tap.touchend(s,p,x);w&&(this._tapTime=s.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jh{constructor(s,p,x){this._el=s,this._mousePan=p,this._touchPan=x}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class to{constructor(s,p,x,w){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=p,this._mousePitch=x,this._mouseRoll=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class gi{constructor(s,p,x,w){this._el=s,this._touchZoom=p,this._touchRotate=x,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Xi{constructor(s,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=E.create("div","maplibregl-cooperative-gesture-screen",s);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const x=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=p,this._container.appendChild(w);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=x,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(E.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,p){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:s,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const js=j=>j.zoom||j.drag||j.roll||j.pitch||j.rotate;class $d extends a.l{}function Ql(j){return j.panDelta&&j.panDelta.mag()||j.zoomDelta||j.bearingDelta||j.pitchDelta||j.rollDelta}class Lr{constructor(s,p){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,T)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=w.type==="renderFrame"?void 0:w,O={needsRenderFrame:!1},F={},q={};for(const{handlerName:ee,handler:ue,allowed:ye}of this._handlers){if(!ue.isEnabled())continue;let Te;if(this._blockedByActive(q,ye,ee))ue.reset();else if(ue[T||w.type]){if(a.cp(w,T||w.type)){const Ce=E.mousePos(this._map.getCanvas(),w);Te=ue[T||w.type](w,Ce)}else if(a.cq(w,T||w.type)){const Ce=this._getMapTouches(w.touches),Ee=E.touchPos(this._map.getCanvas(),Ce);Te=ue[T||w.type](w,Ee,Ce)}else a.cr(T||w.type)||(Te=ue[T||w.type](w));this.mergeHandlerResult(O,F,Te,ee,P),Te&&Te.needsRenderFrame&&this._triggerRenderFrame()}(Te||ue.isActive())&&(q[ee]=ue)}const Y={};for(const ee in this._previousActiveHandlers)q[ee]||(Y[ee]=P);this._previousActiveHandlers=q,(Object.keys(Y).length||Ql(O))&&(this._changes.push([O,F,Y]),this._triggerRenderFrame()),(Object.keys(q).length||Ql(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=O;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yh(s),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,T,P]of this._listeners)E.addEventListener(w,T,w===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[s,p,x]of this._listeners)E.removeEventListener(s,p,s===document?this.handleWindowEvent:this.handleEvent,x)}_addDefaultHandlers(s){const p=this._map,x=p.getCanvasContainer();this._add("mapEvent",new Ja(p,s));const w=p.boxZoom=new Oa(p,s);this._add("boxZoom",w),s.interactive&&s.boxZoom&&w.enable();const T=p.cooperativeGestures=new Xi(p,s.cooperativeGestures);this._add("cooperativeGestures",T),s.cooperativeGestures&&T.enable();const P=new qm(p),O=new Ml(p);p.doubleClickZoom=new Ud(O,P),this._add("tapZoom",P),this._add("clickZoom",O),s.interactive&&s.doubleClickZoom&&p.doubleClickZoom.enable();const F=new Yi;this._add("tapDragZoom",F);const q=p.touchPitch=new Kh(p);this._add("touchPitch",q),s.interactive&&s.touchPitch&&p.touchPitch.enable(s.touchPitch);const Y=()=>p.project(p.getCenter()),ne=function({enable:Le,clickTolerance:qe,aroundCenter:Ke=!0,minPixelCenterThreshold:Fe=100,rotateDegreesPerPixelMoved:it=.8},Mt){const _t=new xn({checkCorrectEvent:wt=>E.mouseButton(wt)===0&&wt.ctrlKey||E.mouseButton(wt)===2&&!wt.ctrlKey});return new Tl({clickTolerance:qe,move:(wt,St)=>{const rn=Mt();if(Ke&&Math.abs(rn.y-wt.y)>Fe)return{bearingDelta:a.cn(new a.P(wt.x,St.y),St,rn)};let an=(St.x-wt.x)*it;return Ke&&St.y<rn.y&&(an=-an),{bearingDelta:an}},moveStateManager:_t,enable:Le,assignEvents:kl})}(s,Y),ee=function({enable:Le,clickTolerance:qe,pitchDegreesPerPixelMoved:Ke=-.5}){const Fe=new xn({checkCorrectEvent:it=>E.mouseButton(it)===0&&it.ctrlKey||E.mouseButton(it)===2});return new Tl({clickTolerance:qe,move:(it,Mt)=>({pitchDelta:(Mt.y-it.y)*Ke}),moveStateManager:Fe,enable:Le,assignEvents:kl})}(s),ue=function({enable:Le,clickTolerance:qe,rollDegreesPerPixelMoved:Ke=.3},Fe){const it=new xn({checkCorrectEvent:Mt=>E.mouseButton(Mt)===2&&Mt.ctrlKey});return new Tl({clickTolerance:qe,move:(Mt,_t)=>{const wt=Fe();let St=(_t.x-Mt.x)*Ke;return _t.y<wt.y&&(St=-St),{rollDelta:St}},moveStateManager:it,enable:Le,assignEvents:kl})}(s,Y);p.dragRotate=new to(s,ne,ee,ue),this._add("mouseRotate",ne,["mousePitch"]),this._add("mousePitch",ee,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ue,["mousePitch"]),s.interactive&&s.dragRotate&&p.dragRotate.enable();const ye=function({enable:Le,clickTolerance:qe}){const Ke=new xn({checkCorrectEvent:Fe=>E.mouseButton(Fe)===0&&!Fe.ctrlKey});return new Tl({clickTolerance:qe,move:(Fe,it)=>({around:it,panDelta:it.sub(Fe)}),activateOnStart:!0,moveStateManager:Ke,enable:Le,assignEvents:kl})}(s),Te=new $u(s,p);p.dragPan=new Jh(x,ye,Te),this._add("mousePan",ye),this._add("touchPan",Te,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&p.dragPan.enable(s.dragPan);const Ce=new Po,Ee=new Hu;p.touchZoomRotate=new gi(x,Ee,Ce,F),this._add("touchRotate",Ce,["touchPan","touchZoom"]),this._add("touchZoom",Ee,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&p.touchZoomRotate.enable(s.touchZoomRotate);const Ie=p.scrollZoom=new Uc(p,()=>this._triggerRenderFrame());this._add("scrollZoom",Ie,["mousePan"]),s.interactive&&s.scrollZoom&&p.scrollZoom.enable(s.scrollZoom);const Be=p.keyboard=new Kl(p);this._add("keyboard",Be),s.interactive&&s.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new eo(p))}_add(s,p,x){this._handlers.push({handlerName:s,handler:p,allowed:x}),this._handlersById[s]=p}stop(s){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!js(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,p,x){for(const w in s)if(w!==x&&(!p||p.indexOf(w)<0))return!0;return!1}_getMapTouches(s){const p=[];for(const x of s)this._el.contains(x.target)&&p.push(x);return p}mergeHandlerResult(s,p,x,w,T){if(!x)return;a.e(s,x);const P={handlerName:w,originalEvent:x.originalEvent||T};x.zoomDelta!==void 0&&(p.zoom=P),x.panDelta!==void 0&&(p.drag=P),x.rollDelta!==void 0&&(p.roll=P),x.pitchDelta!==void 0&&(p.pitch=P),x.bearingDelta!==void 0&&(p.rotate=P)}_applyChanges(){const s={},p={},x={};for(const[w,T,P]of this._changes)w.panDelta&&(s.panDelta=(s.panDelta||new a.P(0,0))._add(w.panDelta)),w.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+w.pitchDelta),w.rollDelta&&(s.rollDelta=(s.rollDelta||0)+w.rollDelta),w.around!==void 0&&(s.around=w.around),w.pinchAround!==void 0&&(s.pinchAround=w.pinchAround),w.noInertia&&(s.noInertia=w.noInertia),a.e(p,T),a.e(x,P);this._updateMapTransform(s,p,x),this._changes=[]}_updateMapTransform(s,p,x){const w=this._map,T=w._getTransformForUpdate(),P=w.terrain;if(!(Ql(s)||P&&this._terrainMovement))return this._fireEvents(p,x,!0);w._stop(!0);let{panDelta:O,zoomDelta:F,bearingDelta:q,pitchDelta:Y,rollDelta:ne,around:ee,pinchAround:ue}=s;ue!==void 0&&(ee=ue),ee=ee||w.transform.centerPoint,P&&!T.isPointOnMapSurface(ee)&&(ee=T.centerPoint);const ye={panDelta:O,zoomDelta:F,rollDelta:ne,pitchDelta:Y,bearingDelta:q,around:ee};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(ee)&&(ee=T.centerPoint);const Te=ee.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(O?ee.sub(O):ee);this._handleMapControls({terrain:P,tr:T,deltasForHelper:ye,preZoomAroundLoc:Te,combinedEventsInProgress:p,panDelta:O}),w._applyUpdatedTransform(T),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(p,x,!0)}_handleMapControls({terrain:s,tr:p,deltasForHelper:x,preZoomAroundLoc:w,combinedEventsInProgress:T,panDelta:P}){const O=this._map.cameraHelper;if(O.handleMapControlsRollPitchBearingZoom(x,p),s)return O.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void O.handleMapControlsPan(x,p,w)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&P?p.setCenter(p.screenPointToLocation(p.centerPoint.sub(P))):O.handleMapControlsPan(x,p,w)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void O.handleMapControlsPan(x,p,w));O.handleMapControlsPan(x,p,w)}_fireEvents(s,p,x){const w=js(this._eventsInProgress),T=js(s),P={};for(const ne in s){const{originalEvent:ee}=s[ne];this._eventsInProgress[ne]||(P[`${ne}start`]=ee),this._eventsInProgress[ne]=s[ne]}!w&&T&&this._fireEvent("movestart",T.originalEvent);for(const ne in P)this._fireEvent(ne,P[ne]);T&&this._fireEvent("move",T.originalEvent);for(const ne in s){const{originalEvent:ee}=s[ne];this._fireEvent(ne,ee)}const O={};let F;for(const ne in this._eventsInProgress){const{handlerName:ee,originalEvent:ue}=this._eventsInProgress[ne];this._handlersById[ee].isActive()||(delete this._eventsInProgress[ne],F=p[ee]||ue,O[`${ne}end`]=F)}for(const ne in O)this._fireEvent(ne,O[ne]);const q=js(this._eventsInProgress),Y=(w||T)&&!q;if(Y&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ne=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ne.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ne)}if(x&&Y){this._updatingCamera=!0;const ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=ue=>ue!==0&&-this._bearingSnap<ue&&ue<this._bearingSnap;!ne||!ne.essential&&A.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:F})),ee(this._map.getBearing())&&this._map.resetNorth()):(ee(ne.bearing||this._map.getBearing())&&(ne.bearing=0),ne.freezeElevation=!0,this._map.easeTo(ne,{originalEvent:F})),this._updatingCamera=!1}}_fireEvent(s,p){this._map.fire(new a.l(s,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new $d("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class $c extends a.E{constructor(s,p,x){super(),this._renderFrameCallback=()=>{const w=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=x.bearingSnap,this.cameraHelper=p,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(s,p){s.apply(this.transform),this.transform=s,this.cameraHelper=p}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,p){return this.jumpTo({center:s},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,p){return this.jumpTo({elevation:s},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,p,x){return s=a.P.convert(s).mult(-1),this.panTo(this.transform.center,a.e({offset:s},p),x)}panTo(s,p,x){return this.easeTo(a.e({center:s},p),x)}getZoom(){return this.transform.zoom}setZoom(s,p){return this.jumpTo({zoom:s},p),this}zoomTo(s,p,x){return this.easeTo(a.e({zoom:s},p),x)}zoomIn(s,p){return this.zoomTo(this.getZoom()+1,s,p),this}zoomOut(s,p){return this.zoomTo(this.getZoom()-1,s,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,p){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)).fire(new a.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(s,p){return this.jumpTo({bearing:s},p),this}getPadding(){return this.transform.padding}setPadding(s,p){return this.jumpTo({padding:s},p),this}rotateTo(s,p,x){return this.easeTo(a.e({bearing:s},p),x)}resetNorth(s,p){return this.rotateTo(0,a.e({duration:1e3},s),p),this}resetNorthPitch(s,p){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},s),p),this}snapToNorth(s,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,p):this}getPitch(){return this.transform.pitch}setPitch(s,p){return this.jumpTo({pitch:s},p),this}getRoll(){return this.transform.roll}setRoll(s,p){return this.jumpTo({roll:s},p),this}cameraForBounds(s,p){s=Lt.convert(s).adjustAntiMeridian();const x=p&&p.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),x,p)}_cameraForBoxAndBearing(s,p,x,w){const T={top:0,bottom:0,right:0,left:0};if(typeof(w=a.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const q=w.padding;w.padding={top:q,bottom:q,right:q,left:q}}const P=a.e(T,w.padding);w.padding=P;const O=this.transform,F=new Lt(s,p);return this.cameraHelper.cameraForBoxAndBearing(w,P,F,x,O)}fitBounds(s,p,x){return this._fitInternal(this.cameraForBounds(s,p),p,x)}fitScreenCoordinates(s,p,x,w,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(s)),this.transform.screenPointToLocation(a.P.convert(p)),x,w),w,T)}_fitInternal(s,p,x){return s?(delete(p=a.e(s,p)).padding,p.linear?this.easeTo(p,x):this.flyTo(p,x)):this}jumpTo(s,p){this.stop();const x=this._getTransformForUpdate();let w=!1,T=!1,P=!1;const O=x.zoom;this.cameraHelper.handleJumpToCenterZoom(x,s);const F=x.zoom!==O;return"elevation"in s&&x.elevation!==+s.elevation&&x.setElevation(+s.elevation),"bearing"in s&&x.bearing!==+s.bearing&&(w=!0,x.setBearing(+s.bearing)),"pitch"in s&&x.pitch!==+s.pitch&&(T=!0,x.setPitch(+s.pitch)),"roll"in s&&x.roll!==+s.roll&&(P=!0,x.setRoll(+s.roll)),s.padding==null||x.isPaddingEqual(s.padding)||x.setPadding(s.padding),this._applyUpdatedTransform(x),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)),F&&this.fire(new a.l("zoomstart",p)).fire(new a.l("zoom",p)).fire(new a.l("zoomend",p)),w&&this.fire(new a.l("rotatestart",p)).fire(new a.l("rotate",p)).fire(new a.l("rotateend",p)),T&&this.fire(new a.l("pitchstart",p)).fire(new a.l("pitch",p)).fire(new a.l("pitchend",p)),P&&this.fire(new a.l("rollstart",p)).fire(new a.l("roll",p)).fire(new a.l("rollend",p)),this.fire(new a.l("moveend",p))}calculateCameraOptionsFromTo(s,p,x,w=0){const T=a.a1.fromLngLat(s,p),P=a.a1.fromLngLat(x,w),O=P.x-T.x,F=P.y-T.y,q=P.z-T.z,Y=Math.hypot(O,F,q);if(Y===0)throw new Error("Can't calculate camera options with same From and To");const ne=Math.hypot(O,F),ee=a.ak(this.transform.cameraToCenterDistance/Y/this.transform.tileSize),ue=180*Math.atan2(O,-F)/Math.PI;let ye=180*Math.acos(ne/Y)/Math.PI;return ye=q<0?90-ye:90+ye,{center:P.toLngLat(),elevation:w,zoom:ee,pitch:ye,bearing:ue}}calculateCameraOptionsFromCameraLngLatAltRotation(s,p,x,w,T){const P=this.transform.calculateCenterFromCameraLngLatAlt(s,p,x,w);return{center:P.center,elevation:P.elevation,zoom:P.zoom,bearing:x,pitch:w,roll:T}}easeTo(s,p){this._stop(!1,s.easeId),((s=a.e({offset:[0,0],duration:500,easing:a.co},s)).animate===!1||!s.essential&&A.prefersReducedMotion)&&(s.duration=0);const x=this._getTransformForUpdate(),w=this.getBearing(),T=x.pitch,P=x.roll,O="bearing"in s?this._normalizeBearing(s.bearing,w):w,F="pitch"in s?+s.pitch:T,q="roll"in s?this._normalizeBearing(s.roll,P):P,Y="padding"in s?s.padding:x.padding,ne=a.P.convert(s.offset);let ee,ue;s.around&&(ee=a.S.convert(s.around),ue=x.locationToScreenPoint(ee));const ye={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Te=this.cameraHelper.handleEaseTo(x,{bearing:O,pitch:F,roll:q,padding:Y,around:ee,aroundPoint:ue,offsetAsPoint:ne,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||w!==O,this._pitching=this._pitching||F!==T,this._rolling=this._rolling||q!==P,this._padding=!x.isPaddingEqual(Y),this._zooming=this._zooming||Te.isZooming,this._easeId=s.easeId,this._prepareEase(p,s.noMoveStart,ye),this.terrain&&this._prepareElevation(Te.elevationCenter),this._ease(Ce=>{Te.easeFunc(Ce),this.terrain&&!s.freezeElevation&&this._updateElevation(Ce),this._applyUpdatedTransform(x),this._fireMoveEvents(p)},Ce=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(p,Ce)},s),this}_prepareEase(s,p,x={}){this._moving=!0,p||x.moving||this.fire(new a.l("movestart",s)),this._zooming&&!x.zooming&&this.fire(new a.l("zoomstart",s)),this._rotating&&!x.rotating&&this.fire(new a.l("rotatestart",s)),this._pitching&&!x.pitching&&this.fire(new a.l("pitchstart",s)),this._rolling&&!x.rolling&&this.fire(new a.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&p!==this._elevationTarget){const x=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(x-(p-(x*s+this._elevationStart))/(1-s)),this._elevationTarget=p}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const p=s.getCameraLngLat(),x=s.getCameraAltitude(),w=this.terrain?this.terrain.getElevationForLngLatZoom(p,s.zoom):0;if(x<w){const T=this.calculateCameraOptionsFromTo(p,w,s.center,s.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(s){const p=[];if(p.push(w=>this._elevateCameraIfInsideTerrain(w)),this.transformCameraUpdate&&p.push(w=>this.transformCameraUpdate(w)),!p.length)return;const x=s.clone();for(const w of p){const T=x.clone(),{center:P,zoom:O,roll:F,pitch:q,bearing:Y,elevation:ne}=w(T);P&&T.setCenter(P),ne!==void 0&&T.setElevation(ne),O!==void 0&&T.setZoom(O),F!==void 0&&T.setRoll(F),q!==void 0&&T.setPitch(q),Y!==void 0&&T.setBearing(Y),x.apply(T)}this.transform.apply(x)}_fireMoveEvents(s){this.fire(new a.l("move",s)),this._zooming&&this.fire(new a.l("zoom",s)),this._rotating&&this.fire(new a.l("rotate",s)),this._pitching&&this.fire(new a.l("pitch",s)),this._rolling&&this.fire(new a.l("roll",s))}_afterEase(s,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const x=this._zooming,w=this._rotating,T=this._pitching,P=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,x&&this.fire(new a.l("zoomend",s)),w&&this.fire(new a.l("rotateend",s)),T&&this.fire(new a.l("pitchend",s)),P&&this.fire(new a.l("rollend",s)),this.fire(new a.l("moveend",s))}flyTo(s,p){if(!s.essential&&A.prefersReducedMotion){const St=a.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(St,p)}this.stop(),s=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},s);const x=this._getTransformForUpdate(),w=x.bearing,T=x.pitch,P=x.roll,O=x.padding,F="bearing"in s?this._normalizeBearing(s.bearing,w):w,q="pitch"in s?+s.pitch:T,Y="roll"in s?this._normalizeBearing(s.roll,P):P,ne="padding"in s?s.padding:x.padding,ee=a.P.convert(s.offset);let ue=x.centerPoint.add(ee);const ye=x.screenPointToLocation(ue),Te=this.cameraHelper.handleFlyTo(x,{bearing:F,pitch:q,roll:Y,padding:ne,locationAtOffset:ye,offsetAsPoint:ee,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let Ce=s.curve;const Ee=Math.max(x.width,x.height),Ie=Ee/Te.scaleOfZoom,Be=Te.pixelPathLength;typeof Te.scaleOfMinZoom=="number"&&(Ce=Math.sqrt(Ee/Te.scaleOfMinZoom/Be*2));const Le=Ce*Ce;function qe(St){const rn=(Ie*Ie-Ee*Ee+(St?-1:1)*Le*Le*Be*Be)/(2*(St?Ie:Ee)*Le*Be);return Math.log(Math.sqrt(rn*rn+1)-rn)}function Ke(St){return(Math.exp(St)-Math.exp(-St))/2}function Fe(St){return(Math.exp(St)+Math.exp(-St))/2}const it=qe(!1);let Mt=function(St){return Fe(it)/Fe(it+Ce*St)},_t=function(St){return Ee*((Fe(it)*(Ke(rn=it+Ce*St)/Fe(rn))-Ke(it))/Le)/Be;var rn},wt=(qe(!0)-it)/Ce;if(Math.abs(Be)<2e-6||!isFinite(wt)){if(Math.abs(Ee-Ie)<1e-6)return this.easeTo(s,p);const St=Ie<Ee?-1:1;wt=Math.abs(Math.log(Ie/Ee))/Ce,_t=()=>0,Mt=rn=>Math.exp(St*Ce*rn)}return s.duration="duration"in s?+s.duration:1e3*wt/("screenSpeed"in s?+s.screenSpeed/Ce:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=w!==F,this._pitching=q!==T,this._rolling=Y!==P,this._padding=!x.isPaddingEqual(ne),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Te.targetCenter),this._ease(St=>{const rn=St*wt,an=1/Mt(rn),Yt=_t(rn);this._rotating&&x.setBearing(a.C.number(w,F,St)),this._pitching&&x.setPitch(a.C.number(T,q,St)),this._rolling&&x.setRoll(a.C.number(P,Y,St)),this._padding&&(x.interpolatePadding(O,ne,St),ue=x.centerPoint.add(ee)),Te.easeFunc(St,an,Yt,ue),this.terrain&&!s.freezeElevation&&this._updateElevation(St),this._applyUpdatedTransform(x),this._fireMoveEvents(p)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(p)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,p){var x;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,p)}return s||(x=this.handlers)===null||x===void 0||x.stop(!1),this}_ease(s,p,x){x.animate===!1||x.duration===0?(s(1),p()):(this._easeStart=A.now(),this._easeOptions=x,this._onEaseFrame=s,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,p){s=a.aO(s,-180,180);const x=Math.abs(s-p);return Math.abs(s-360-p)<x&&(s-=360),Math.abs(s+360-p)<x&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(s),this.transform.tileZoom):null}}const Nn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Dn{constructor(s=Nn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=E.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=E.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=E.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,p){const x=this._map._getUIString(`AttributionControl.${p}`);s.title=x,s.setAttribute("aria-label",x)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const p=this._map.style.sourceCaches;for(const w in p){const T=p[w];if(T.used||T.usedForTerrain){const P=T.getSource();P.attribution&&s.indexOf(P.attribution)<0&&s.push(P.attribution)}}s=s.filter(w=>String(w).trim()),s.sort((w,T)=>w.length-T.length),s=s.filter((w,T)=>{for(let P=T+1;P<s.length;P++)if(s[P].indexOf(w)>=0)return!1;return!0});const x=s.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,s.length?(this._innerContainer.innerHTML=E.sanitize(x),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Gu{constructor(s={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const x=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&x.classList.add("maplibregl-compact"):x.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=E.create("div","maplibregl-ctrl");const p=E.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){E.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const p=++this._id;return this._queue.push({callback:s,id:p,cancelled:!1}),p}remove(s){const p=this._currentlyRunning,x=p?this._queue.concat(p):this._queue;for(const w of x)if(w.id===s)return void(w.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const x of p)if(!x.cancelled&&(x.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Wu=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Cr extends a.E{constructor(s){super(),this._lastTilesetChange=A.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*Pg(2,this.deltaZoom),s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,p){this.sourceCache.update(s,p),this._renderableTilesKeys=[];const x={};for(const w of Ct(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))x[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.terrainRttPosMatrix32f=new Float64Array(16),a.bZ(w.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[w.key]=new ae(w,this.tileSize),this._lastTilesetChange=A.now());for(const w in this._tiles)x[w]||delete this._tiles[w]}freeRtt(s){for(const p in this._tiles){const x=this._tiles[p];(!s||x.tileID.equals(s)||x.tileID.isChildOf(s)||s.isChildOf(x.tileID))&&(x.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,p){return p?this._getTerrainCoordsForTileRanges(s,p):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){const p={};for(const x of this._renderableTilesKeys){const w=this._tiles[x].tileID,T=s.clone(),P=a.ba();if(w.canonical.equals(s.canonical))a.bZ(P,0,a.$,a.$,0,0,1);else if(w.canonical.isChildOf(s.canonical)){const O=w.canonical.z-s.canonical.z,F=w.canonical.x-(w.canonical.x>>O<<O),q=w.canonical.y-(w.canonical.y>>O<<O),Y=a.$>>O;a.bZ(P,0,Y,Y,0,0,1),a.M(P,P,[-F*Y,-q*Y,0])}else{if(!s.canonical.isChildOf(w.canonical))continue;{const O=s.canonical.z-w.canonical.z,F=s.canonical.x-(s.canonical.x>>O<<O),q=s.canonical.y-(s.canonical.y>>O<<O),Y=a.$>>O;a.bZ(P,0,a.$,a.$,0,0,1),a.M(P,P,[F*Y,q*Y,0]),a.N(P,P,[1/Pg(2,O),1/Pg(2,O),0])}}T.terrainRttPosMatrix32f=new Float32Array(P),p[x]=T}return p}_getTerrainCoordsForTileRanges(s,p){const x={};for(const w of this._renderableTilesKeys){const T=this._tiles[w].tileID;if(!this._isWithinTileRanges(T,p))continue;const P=s.clone(),O=a.ba();if(T.canonical.z===s.canonical.z){const F=s.canonical.x-T.canonical.x,q=s.canonical.y-T.canonical.y;a.bZ(O,0,a.$,a.$,0,0,1),a.M(O,O,[F*a.$,q*a.$,0])}else if(T.canonical.z>s.canonical.z){const F=T.canonical.z-s.canonical.z,q=T.canonical.x-(T.canonical.x>>F<<F),Y=T.canonical.y-(T.canonical.y>>F<<F),ne=s.canonical.x-(T.canonical.x>>F),ee=s.canonical.y-(T.canonical.y>>F),ue=a.$>>F;a.bZ(O,0,ue,ue,0,0,1),a.M(O,O,[-q*ue+ne*a.$,-Y*ue+ee*a.$,0])}else{const F=s.canonical.z-T.canonical.z,q=s.canonical.x-(s.canonical.x>>F<<F),Y=s.canonical.y-(s.canonical.y>>F<<F),ne=(s.canonical.x>>F)-T.canonical.x,ee=(s.canonical.y>>F)-T.canonical.y,ue=a.$<<F;a.bZ(O,0,ue,ue,0,0,1),a.M(O,O,[q*a.$+ne*ue,Y*a.$+ee*ue,0])}P.terrainRttPosMatrix32f=new Float32Array(O),x[w]=P}return x}getSourceTile(s,p){const x=this.sourceCache._source;let w=s.overscaledZ-this.deltaZoom;if(w>x.maxzoom&&(w=x.maxzoom),w<x.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(w).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!T||!T.dem)&&p)for(;w>=x.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(s.scaledTo(w--).key);return T}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,p){return p[s.canonical.z]&&s.canonical.x>=p[s.canonical.z].minTileX&&s.canonical.x<=p[s.canonical.z].maxTileX&&s.canonical.y>=p[s.canonical.z].minTileY&&s.canonical.y<=p[s.canonical.z].maxTileY}}class wp{constructor(s,p,x){this._meshCache={},this.painter=s,this.sourceCache=new Cr(p),this.options=x,this.exaggeration=typeof x.exaggeration=="number"?x.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,p,x,w=a.$){var T;if(!(p>=0&&p<w&&x>=0&&x<w))return 0;const P=this.getTerrainData(s),O=(T=P.tile)===null||T===void 0?void 0:T.dem;if(!O)return 0;const F=a.cs([],[p/w*a.$,x/w*a.$],P.u_terrain_matrix),q=[F[0]*O.dim,F[1]*O.dim],Y=Math.floor(q[0]),ne=Math.floor(q[1]),ee=q[0]-Y,ue=q[1]-ne;return O.get(Y,ne)*(1-ee)*(1-ue)+O.get(Y+1,ne)*ee*(1-ue)+O.get(Y,ne+1)*(1-ee)*ue+O.get(Y+1,ne+1)*ee*ue}getElevationForLngLatZoom(s,p){if(!a.ct(p,s.wrap()))return 0;const{tileID:x,mercatorX:w,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(s,p);return this.getElevation(x,w%a.$,T%a.$,a.$)}getElevation(s,p,x,w=a.$){return this.getDEMElevation(s,p,x,w)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const w=this.painter.context,T=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(w,T,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(w,new a.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}const p=this.sourceCache.getSourceTile(s,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const w=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new a.T(w,p.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),p.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const x=p&&p+p.tileID.key+s.key;if(x&&!this._demMatrixCache[x]){const w=this.sourceCache.sourceCache._source.maxzoom;let T=s.canonical.z-p.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=w?T=s.canonical.z-w:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=s.canonical.x-(s.canonical.x>>T<<T),O=s.canonical.y-(s.canonical.y>>T<<T),F=a.cu(new Float64Array(16),[1/(a.$<<T),1/(a.$<<T),0]);a.M(F,F,[P*a.$,O*a.$,0]),this._demMatrixCache[s.key]={matrix:F,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:x?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(s){const p=this.painter,x=p.width/devicePixelRatio,w=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===x&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(p.context,{width:x,height:w,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(p.context,{width:x,height:w,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(x,w,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,x,w))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,P=0;T<this._coordsTextureSize;T++)for(let O=0;O<this._coordsTextureSize;O++,P+=4)p[P+0]=255&O,p[P+1]=255&T,p[P+2]=O>>8<<4|T>>8,p[P+3]=0;const x=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),w=new a.T(s,x,s.gl.RGBA,{premultiply:!1});return w.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),x=this.painter.context,w=x.gl,T=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),P=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);x.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(T,O-P-1,1,1,w.RGBA,w.UNSIGNED_BYTE,p),x.bindFramebuffer.set(null);const F=p[0]+(p[2]>>4<<8),q=p[1]+((15&p[2])<<8),Y=this.coordsIndex[255-p[3]],ne=Y&&this.sourceCache.getTileByID(Y);if(!ne)return null;const ee=this._coordsTextureSize,ue=(1<<ne.tileID.canonical.z)*ee;return new a.a1((ne.tileID.canonical.x*ee+F)/ue+ne.tileID.wrap,(ne.tileID.canonical.y*ee+q)/ue,this.getElevation(ne.tileID,F,q,ee))}depthAtPoint(s){const p=new Uint8Array(4),x=this.painter.context,w=x.gl;return x.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,p),x.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(s){var p;const x=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,w=x&&s.canonical.y===0,T=x&&s.canonical.y===(1<<s.canonical.z)-1,P=`m_${w?"n":""}_${T?"s":""}`;if(this._meshCache[P])return this._meshCache[P];const O=this.painter.context,F=new a.cv,q=new a.aN,Y=this.meshSize,ne=a.$/Y,ee=Y*Y;for(let Fe=0;Fe<=Y;Fe++)for(let it=0;it<=Y;it++)F.emplaceBack(it*ne,Fe*ne,0);for(let Fe=0;Fe<ee;Fe+=Y+1)for(let it=0;it<Y;it++)q.emplaceBack(it+Fe,Y+it+Fe+1,Y+it+Fe+2),q.emplaceBack(it+Fe,Y+it+Fe+2,it+Fe+1);const ue=F.length,ye=ue+(Y+1),Te=(Y+1)*Y,Ce=w?a.bh:0,Ee=w?0:1,Ie=T?a.bi:a.$,Be=T?0:1;for(let Fe=0;Fe<=Y;Fe++)F.emplaceBack(Fe*ne,Ce,Ee);for(let Fe=0;Fe<=Y;Fe++)F.emplaceBack(Fe*ne,Ie,Be);for(let Fe=0;Fe<Y;Fe++)q.emplaceBack(Te+Fe,ye+Fe,ye+Fe+1),q.emplaceBack(Te+Fe,ye+Fe+1,Te+Fe+1),q.emplaceBack(0+Fe,ue+Fe+1,ue+Fe),q.emplaceBack(0+Fe,0+Fe+1,ue+Fe+1);const Le=F.length,qe=Le+2*(Y+1);for(const Fe of[0,1])for(let it=0;it<=Y;it++)for(const Mt of[0,1])F.emplaceBack(Fe*a.$,it*ne,Mt);for(let Fe=0;Fe<2*Y;Fe+=2)q.emplaceBack(Le+Fe,Le+Fe+1,Le+Fe+3),q.emplaceBack(Le+Fe,Le+Fe+3,Le+Fe+2),q.emplaceBack(qe+Fe,qe+Fe+3,qe+Fe+1),q.emplaceBack(qe+Fe,qe+Fe+2,qe+Fe+3);const Ke=new So(O.createVertexBuffer(F,Wu.members),O.createIndexBuffer(q),a.aM.simpleSegment(0,0,F.length,q.length));return this._meshCache[P]=Ke,Ke}getMeshFrameDelta(s){return 2*Math.PI*a.bu/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,p){var x;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(s,p);return(x=this.getMinMaxElevation(w).minElevation)!==null&&x!==void 0?x:0}getMinMaxElevation(s){const p=this.getTerrainData(s).tile,x={minElevation:null,maxElevation:null};return p&&p.dem&&(x.minElevation=p.dem.min*this.exaggeration,x.maxElevation=p.dem.max*this.exaggeration),x}_getOverscaledTileIDFromLngLatZoom(s,p){const x=a.a1.fromLngLat(s.wrap()),w=(1<<p)*a.$,T=x.x*w,P=x.y*w,O=Math.floor(T/a.$),F=Math.floor(P/a.$);return{tileID:new a.Z(p,0,p,O,F),mercatorX:T,mercatorY:P}}}class no{constructor(s,p,x){this._context=s,this._size=p,this._tileSize=x,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),x=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return x.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(x.texture),{id:s,fbo:p,texture:x,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>s.id!==p),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}const Hc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Sp{constructor(s,p){this.painter=s,this.terrain=p,this.pool=new no(s.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(x=>!s._layers[x].isHidden(p)),this._coordsAscending={};for(const x in s.sourceCaches){this._coordsAscending[x]={};const w=s.sourceCaches[x].getVisibleCoordinates(),T=s.sourceCaches[x].getSource(),P=T instanceof ln?T.terrainTileRanges:null;for(const O of w){const F=this.terrain.sourceCache.getTerrainCoords(O,P);for(const q in F)this._coordsAscending[x][q]||(this._coordsAscending[x][q]=[]),this._coordsAscending[x][q].push(F[q])}}this._coordsAscendingStr={};for(const x of s._order){const w=s._layers[x],T=w.source;if(Hc[w.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const P in this._coordsAscending[T])this._coordsAscendingStr[T][P]=this._coordsAscending[T][P].map(O=>O.key).sort().join()}}for(const x of this._renderableTiles)for(const w in this._coordsAscendingStr){const T=this._coordsAscendingStr[w][x.tileID.key];T&&T!==x.rttCoords[w]&&(x.rtt=[])}}renderLayer(s,p){if(s.isHidden(this.painter.transform.zoom))return!1;const x=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),w=s.type,T=this.painter,P=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Hc[w]&&(this._prevType&&Hc[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(s.id),!P))return!0;if(Hc[this._prevType]||Hc[w]&&P){this._prevType=w;const O=this._stacks.length-1,F=this._stacks[O]||[];for(const q of this._renderableTiles){if(this.pool.isFull()&&(Bu(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(q),q.rtt[O]){const ne=this.pool.getObjectForId(q.rtt[O].id);if(ne.stamp===q.rtt[O].stamp){this.pool.useObject(ne);continue}}const Y=this.pool.getOrCreateFreeObject();this.pool.useObject(Y),this.pool.stampObject(Y),q.rtt[O]={id:Y.id,stamp:Y.stamp},T.context.bindFramebuffer.set(Y.fbo.framebuffer),T.context.clear({color:a.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let ne=0;ne<F.length;ne++){const ee=T.style._layers[F[ne]],ue=ee.source?this._coordsAscending[ee.source][q.tileID.key]:[q.tileID];T.context.viewport.set([0,0,Y.fbo.width,Y.fbo.height]),T._renderTileClippingMasks(ee,ue,!0),T.renderLayer(T,T.style.sourceCaches[ee.source],ee,ue,x),ee.source&&(q.rttCoords[ee.source]=this._coordsAscendingStr[ee.source][q.tileID.key])}}return Bu(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects(),Hc[w]}return!1}}const jp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Cp=g,cr={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Nn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},fi={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Cs{constructor(s,p,x=!1){this.mousedown=T=>{this.startMove(T,E.mousePos(this.element,T)),E.addEventListener(window,"mousemove",this.mousemove),E.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,E.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=E.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),E.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=E.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const w=new Xh;this._rotatePitchHandler=new Tl({clickTolerance:3,move:(T,P)=>{const O=p.getBoundingClientRect(),F=new a.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:a.cn(new a.P(T.x,P.y),P,F),pitchDelta:x?-.5*(P.y-T.y):void 0}},moveStateManager:w,enable:!0,assignEvents:()=>{}}),this.map=s,E.addEventListener(p,"mousedown",this.mousedown),E.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),E.addEventListener(p,"touchcancel",this.reset)}startMove(s,p){this._rotatePitchHandler.dragStart(s,p),E.disableDrag()}move(s,p){const x=this.map,{bearingDelta:w,pitchDelta:T}=this._rotatePitchHandler.dragMove(s,p)||{};w&&x.setBearing(x.getBearing()+w),T&&x.setPitch(x.getPitch()+T)}off(){const s=this.element;E.removeEventListener(s,"mousedown",this.mousedown),E.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend),E.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){E.enableDrag(),E.removeEventListener(window,"mousemove",this.mousemove),E.removeEventListener(window,"mouseup",this.mouseup),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend)}}let io;function El(j,s,p,x=!1){if(x||!p.getCoveringTilesDetailsProvider().allowWorldCopies())return j==null?void 0:j.wrap();const w=new a.S(j.lng,j.lat);if(j=new a.S(j.lng,j.lat),s){const T=new a.S(j.lng-360,j.lat),P=new a.S(j.lng+360,j.lat),O=p.locationToScreenPoint(j).distSqr(s);p.locationToScreenPoint(T).distSqr(s)<O?j=T:p.locationToScreenPoint(P).distSqr(s)<O&&(j=P)}for(;Math.abs(j.lng-p.center.lng)>180;){const T=p.locationToScreenPoint(j);if(T.x>=0&&T.y>=0&&T.x<=p.width&&T.y<=p.height)break;j.lng>p.center.lng?j.lng-=360:j.lng+=360}return j.lng!==w.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(j))?j:w}const Jl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function so(j,s,p){const x=j.classList;for(const w in Jl)x.remove(`maplibregl-${p}-anchor-${w}`);x.add(`maplibregl-${p}-anchor-${s}`)}class ec extends a.E{constructor(s){if(super(),this._onKeyPress=p=>{const x=p.code,w=p.charCode||p.keyCode;x!=="Space"&&x!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=p=>{const x=p.originalEvent.target,w=this._element;this._popup&&(x===w||w.contains(x))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const x=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!x)&&this._map.once("render",this._update),this._lngLat=El(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),E.setTransform(this._element,`${Jl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${w}`),A.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){const x=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=x}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=a.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=E.create("div");const p=E.createNS("http://www.w3.org/2000/svg","svg"),x=41,w=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${x}px`),p.setAttributeNS(null,"width",`${w}px`),p.setAttributeNS(null,"viewBox",`0 0 ${w} ${x}`);const T=E.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const P=E.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const O=E.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const F=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ee of F){const Ie=E.createNS("http://www.w3.org/2000/svg","ellipse");Ie.setAttributeNS(null,"opacity","0.04"),Ie.setAttributeNS(null,"cx","10.5"),Ie.setAttributeNS(null,"cy","5.80029008"),Ie.setAttributeNS(null,"rx",Ee.rx),Ie.setAttributeNS(null,"ry",Ee.ry),O.appendChild(Ie)}const q=E.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill",this._color);const Y=E.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),q.appendChild(Y);const ne=E.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"fill","#000000");const ee=E.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ne.appendChild(ee);const ue=E.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ue.setAttributeNS(null,"fill","#FFFFFF");const ye=E.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Te=E.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#000000"),Te.setAttributeNS(null,"opacity","0.25"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962");const Ce=E.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),ye.appendChild(Te),ye.appendChild(Ce),P.appendChild(O),P.appendChild(q),P.appendChild(ne),P.appendChild(ue),P.appendChild(ye),p.appendChild(P),p.setAttributeNS(null,"height",x*this._scale+"px"),p.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),so(this._element,this._anchor,"marker"),s&&s.className)for(const p of s.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),E.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const w=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var p,x;const w=(p=this._map)===null||p===void 0?void 0:p.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!w||T){const ue=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ue&&(this._element.style.opacity=ue))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const P=this._map,O=P.terrain.depthAtPoint(this._pos),F=P.terrain.getElevationForLngLatZoom(this._lngLat,P.transform.tileZoom);if(P.transform.lngLatToCameraDepth(this._lngLat,F)-O<.006)return void(this._element.style.opacity=this._opacity);const q=-this._offset.y/P.transform.pixelsPerMeter,Y=Math.sin(P.getPitch()*Math.PI/180)*q,ne=P.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),ee=P.transform.lngLatToCameraDepth(this._lngLat,F+Y)-ne>.006;!((x=this._popup)===null||x===void 0)&&x.isOpen()&&ee&&this._popup.remove(),this._element.style.opacity=ee?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=a.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,p){return(this._opacity===void 0||s===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const Hd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ko=0,tc=!1;const ef={maxWidth:100,unit:"metric"};function qd(j,s,p){const x=p&&p.maxWidth||100,w=j._container.clientHeight/2,T=j._container.clientWidth/2,P=j.unproject([T-x/2,w]),O=j.unproject([T+x/2,w]),F=Math.round(j.project(O).x-j.project(P).x),q=Math.min(x,F,j._container.clientWidth),Y=P.distanceTo(O);if(p&&p.unit==="imperial"){const ne=3.2808*Y;ne>5280?nc(s,q,ne/5280,j._getUIString("ScaleControl.Miles")):nc(s,q,ne,j._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?nc(s,q,Y/1852,j._getUIString("ScaleControl.NauticalMiles")):Y>=1e3?nc(s,q,Y/1e3,j._getUIString("ScaleControl.Kilometers")):nc(s,q,Y,j._getUIString("ScaleControl.Meters"))}function nc(j,s,p,x){const w=function(T){const P=Math.pow(10,`${Math.floor(T)}`.length-1);let O=T/P;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(F){const q=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*q)/q}(O),P*O}(p);j.style.width=s*(w/p)+"px",j.innerHTML=`${w}&nbsp;${x}`}const tf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},nf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Zu(j){if(j){if(typeof j=="number"){const s=Math.round(Math.abs(j)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,j),"top-left":new a.P(s,s),"top-right":new a.P(-s,s),bottom:new a.P(0,-j),"bottom-left":new a.P(s,-s),"bottom-right":new a.P(-s,-s),left:new a.P(j,0),right:new a.P(-j,0)}}if(j instanceof a.P||Array.isArray(j)){const s=a.P.convert(j);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:a.P.convert(j.center||[0,0]),top:a.P.convert(j.top||[0,0]),"top-left":a.P.convert(j["top-left"]||[0,0]),"top-right":a.P.convert(j["top-right"]||[0,0]),bottom:a.P.convert(j.bottom||[0,0]),"bottom-left":a.P.convert(j["bottom-left"]||[0,0]),"bottom-right":a.P.convert(j["bottom-right"]||[0,0]),left:a.P.convert(j.left||[0,0]),right:a.P.convert(j.right||[0,0])}}return Zu(new a.P(0,0))}const sf=g;c.AJAXError=a.cz,c.Event=a.l,c.Evented=a.E,c.LngLat=a.S,c.MercatorCoordinate=a.a1,c.Point=a.P,c.addProtocol=a.cA,c.config=a.a,c.removeProtocol=a.cB,c.AttributionControl=Dn,c.BoxZoomHandler=Oa,c.CanvasSource=ge,c.CooperativeGesturesHandler=Xi,c.DoubleClickZoomHandler=Ud,c.DragPanHandler=Jh,c.DragRotateHandler=to,c.EdgeInsets=Ea,c.FullscreenControl=class extends a.E{constructor(j={}){super(),this._onFullscreenChange=()=>{var s;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=p==null?void 0:p.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,j&&j.container&&(j.container instanceof HTMLElement?this._container=j.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(j){return this._map=j,this._container||(this._container=this._map.getContainer()),this._controlContainer=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){E.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const j=this._fullscreenButton=E.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);E.create("span","maplibregl-ctrl-icon",j).setAttribute("aria-hidden","true"),j.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const j=this._getTitle();this._fullscreenButton.setAttribute("aria-label",j),this._fullscreenButton.title=j}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=gn,c.GeolocateControl=class extends a.E{constructor(j){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const p=new a.S(s.coords.longitude,s.coords.latitude),x=s.coords.accuracy,w=this._map.getBearing(),T=a.e({bearing:w},this.options.fitBoundsOptions),P=Lt.fromLngLat(p,x);this._map.fitBounds(P,T,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const p=new a.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=s.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&tc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=E.create("button","maplibregl-ctrl-geolocate",this._container),E.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=E.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ec({element:this._dotElement}),this._circleElement=E.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ec({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{const x=(p==null?void 0:p[0])instanceof ResizeObserverEntry;p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||x||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},Hd,j)}onAdd(j){return this._map=j,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(s=!1){if(io!==void 0&&!s)return io;if(window.navigator.permissions===void 0)return io=!!window.navigator.geolocation,io;try{io=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(p){io=!!window.navigator.geolocation}return io})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),E.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Ko=0,tc=!1}_isOutOfMapMaxBounds(j){const s=this._map.getMaxBounds(),p=j.coords;return s&&(p.longitude<s.getWest()||p.longitude>s.getEast()||p.latitude<s.getSouth()||p.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const j=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&j))return;const s=this._map.project(j),p=this._map.unproject([s.x+100,s.y]),x=j.distanceTo(p)/100,w=2*this._accuracy/x;this._circleElement.style.width=`${w.toFixed(2)}px`,this._circleElement.style.height=`${w.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ko--,tc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let j;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ko++,Ko>1?(j={maximumAge:6e5,timeout:0},tc=!0):(j=this.options.positionOptions,tc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,j)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var j;const s=(j=this._map.getProjection())===null||j===void 0?void 0:j.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var j;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((j=this._map.getProjection())===null||j===void 0?void 0:j.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(j){return this._map=j,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=E.create("button","maplibregl-ctrl-globe",this._container),E.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=yr,c.ImageSource=ln,c.KeyboardHandler=Kl,c.LngLatBounds=Lt,c.LogoControl=Gu,c.Map=class extends $c{constructor(j){var s,p;a.cw.mark(a.cx.create);const x=Object.assign(Object.assign(Object.assign({},cr),j),{canvasContextAttributes:Object.assign(Object.assign({},cr.canvasContextAttributes),j.canvasContextAttributes)});if(x.minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const w=new Co,T=new Pa;if(x.minZoom!==void 0&&w.setMinZoom(x.minZoom),x.maxZoom!==void 0&&w.setMaxZoom(x.maxZoom),x.minPitch!==void 0&&w.setMinPitch(x.minPitch),x.maxPitch!==void 0&&w.setMaxPitch(x.maxPitch),x.renderWorldCopies!==void 0&&w.setRenderWorldCopies(x.renderWorldCopies),super(w,T,{bearingSnap:x.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Fs,this._controls=[],this._mapId=a.a7(),this._contextLost=O=>{O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=x.interactive,this._maxTileCacheSize=x.maxTileCacheSize,this._maxTileCacheZoomLevels=x.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},x.canvasContextAttributes),this._trackResize=x.trackResize===!0,this._bearingSnap=x.bearingSnap,this._centerClampedToGround=x.centerClampedToGround,this._refreshExpiredTiles=x.refreshExpiredTiles===!0,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions===!0,this._collectResourceTiming=x.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},jp),x.locale),this._clickTolerance=x.clickTolerance,this._overridePixelRatio=x.pixelRatio,this._maxCanvasSize=x.maxCanvasSize,this.transformCameraUpdate=x.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=x.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Z.addThrottleControl(()=>this.isMoving()),this._requestManager=new K(x.transformRequest),typeof x.container=="string"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let O=!1;const F=jl(q=>{this._trackResize&&!this._removed&&(this.resize(q),this.redraw())},50);this._resizeObserver=new ResizeObserver(q=>{O?F(q):O=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Lr(this,x),this._hash=x.hash&&new yr(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,elevation:x.elevation,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,roll:x.roll}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,a.e({},x.fitBoundsOptions,{duration:0}))));const P=typeof x.style=="string"||((p=(s=x.style)===null||s===void 0?void 0:s.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,P),this._localIdeographFontFamily=x.localIdeographFontFamily,this._validateStyle=x.validateStyle,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new Dn(typeof x.attributionControl=="boolean"?void 0:x.attributionControl)),x.maplibreLogo&&this.addControl(new Gu,x.logoPosition),this.on("style.load",()=>{if(P||this._resizeTransform(),this.transform.unmodified){const O=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}}),this.on("data",O=>{this._update(O.dataType==="style"),this.fire(new a.l(`${O.dataType}data`,O))}),this.on("dataloading",O=>{this.fire(new a.l(`${O.dataType}dataloading`,O))}),this.on("dataabort",O=>{this.fire(new a.l("sourcedataabort",O))})}_getMapId(){return this._mapId}setGlobalStateProperty(j,s){return this.style.setGlobalStateProperty(j,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(j,s){if(s===void 0&&(s=j.getDefaultPosition?j.getDefaultPosition():"top-right"),!j||!j.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=j.onAdd(this);this._controls.push(j);const x=this._controlPositions[s];return s.indexOf("bottom")!==-1?x.insertBefore(p,x.firstChild):x.appendChild(p),this}removeControl(j){if(!j||!j.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(j);return s>-1&&this._controls.splice(s,1),j.onRemove(this),this}hasControl(j){return this._controls.indexOf(j)>-1}coveringTiles(j){return Ct(this.transform,j)}calculateCameraOptionsFromTo(j,s,p,x){return x==null&&this.terrain&&(x=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(j,s,p,x)}resize(j,s=!0){const[p,x]=this._containerDimensions(),w=this._getClampedPixelRatio(p,x);if(this._resizeCanvas(p,x,w),this.painter.resize(p,x,w),this.painter.overLimit()){const P=this.painter.context.gl;this._maxCanvasSize=[P.drawingBufferWidth,P.drawingBufferHeight];const O=this._getClampedPixelRatio(p,x);this._resizeCanvas(p,x,O),this.painter.resize(p,x,O)}this._resizeTransform(s);const T=!this._moving;return T&&(this.stop(),this.fire(new a.l("movestart",j)).fire(new a.l("move",j))),this.fire(new a.l("resize",j)),T&&this.fire(new a.l("moveend",j)),this}_resizeTransform(j=!0){var s;const[p,x]=this._containerDimensions();this.transform.resize(p,x,j),(s=this._requestedCameraState)===null||s===void 0||s.resize(p,x,j)}_getClampedPixelRatio(j,s){const{0:p,1:x}=this._maxCanvasSize,w=this.getPixelRatio(),T=j*w,P=s*w;return Math.min(T>p?p/T:1,P>x?x/P:1)*w}getPixelRatio(){var j;return(j=this._overridePixelRatio)!==null&&j!==void 0?j:devicePixelRatio}setPixelRatio(j){this._overridePixelRatio=j,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(j){return this.transform.setMaxBounds(Lt.convert(j)),this._update()}setMinZoom(j){if((j=j==null?-2:j)>=-2&&j<=this.transform.maxZoom)return this.transform.setMinZoom(j),this._update(),this.getZoom()<j&&this.setZoom(j),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(j){if((j=j==null?22:j)>=this.transform.minZoom)return this.transform.setMaxZoom(j),this._update(),this.getZoom()>j&&this.setZoom(j),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(j){if((j=j==null?0:j)<0)throw new Error("minPitch must be greater than or equal to 0");if(j>=0&&j<=this.transform.maxPitch)return this.transform.setMinPitch(j),this._update(),this.getPitch()<j&&this.setPitch(j),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(j){if((j=j==null?60:j)>180)throw new Error("maxPitch must be less than or equal to 180");if(j>=this.transform.minPitch)return this.transform.setMaxPitch(j),this._update(),this.getPitch()>j&&this.setPitch(j),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(j){return this.transform.setRenderWorldCopies(j),this._update()}project(j){return this.transform.locationToScreenPoint(a.S.convert(j),this.style&&this.terrain)}unproject(j){return this.transform.screenPointToLocation(a.P.convert(j),this.terrain)}isMoving(){var j;return this._moving||((j=this.handlers)===null||j===void 0?void 0:j.isMoving())}isZooming(){var j;return this._zooming||((j=this.handlers)===null||j===void 0?void 0:j.isZooming())}isRotating(){var j;return this._rotating||((j=this.handlers)===null||j===void 0?void 0:j.isRotating())}_createDelegatedListener(j,s,p){if(j==="mouseenter"||j==="mouseover"){let x=!1;return{layers:s,listener:p,delegates:{mousemove:T=>{const P=s.filter(F=>this.getLayer(F)),O=P.length!==0?this.queryRenderedFeatures(T.point,{layers:P}):[];O.length?x||(x=!0,p.call(this,new Or(j,this,T.originalEvent,{features:O}))):x=!1},mouseout:()=>{x=!1}}}}if(j==="mouseleave"||j==="mouseout"){let x=!1;return{layers:s,listener:p,delegates:{mousemove:P=>{const O=s.filter(F=>this.getLayer(F));(O.length!==0?this.queryRenderedFeatures(P.point,{layers:O}):[]).length?x=!0:x&&(x=!1,p.call(this,new Or(j,this,P.originalEvent)))},mouseout:P=>{x&&(x=!1,p.call(this,new Or(j,this,P.originalEvent)))}}}}{const x=w=>{const T=s.filter(O=>this.getLayer(O)),P=T.length!==0?this.queryRenderedFeatures(w.point,{layers:T}):[];P.length&&(w.features=P,p.call(this,w),delete w.features)};return{layers:s,listener:p,delegates:{[j]:x}}}}_saveDelegatedListener(j,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[j]=this._delegatedListeners[j]||[],this._delegatedListeners[j].push(s)}_removeDelegatedListener(j,s,p){if(!this._delegatedListeners||!this._delegatedListeners[j])return;const x=this._delegatedListeners[j];for(let w=0;w<x.length;w++){const T=x[w];if(T.listener===p&&T.layers.length===s.length&&T.layers.every(P=>s.includes(P))){for(const P in T.delegates)this.off(P,T.delegates[P]);return void x.splice(w,1)}}}on(j,s,p){if(p===void 0)return super.on(j,s);const x=typeof s=="string"?[s]:s,w=this._createDelegatedListener(j,x,p);this._saveDelegatedListener(j,w);for(const T in w.delegates)this.on(T,w.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(j,x,p)}}}once(j,s,p){if(p===void 0)return super.once(j,s);const x=typeof s=="string"?[s]:s,w=this._createDelegatedListener(j,x,p);for(const T in w.delegates){const P=w.delegates[T];w.delegates[T]=(...O)=>{this._removeDelegatedListener(j,x,p),P(...O)}}this._saveDelegatedListener(j,w);for(const T in w.delegates)this.once(T,w.delegates[T]);return this}off(j,s,p){return p===void 0?super.off(j,s):(this._removeDelegatedListener(j,typeof s=="string"?[s]:s,p),this)}queryRenderedFeatures(j,s){if(!this.style)return[];let p;const x=j instanceof a.P||Array.isArray(j),w=x?j:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(x?{}:j)||{},w instanceof a.P||typeof w[0]=="number")p=[a.P.convert(w)];else{const T=a.P.convert(w[0]),P=a.P.convert(w[1]);p=[T,new a.P(P.x,T.y),P,new a.P(T.x,P.y),T]}return this.style.queryRenderedFeatures(p,s,this.transform)}querySourceFeatures(j,s){return this.style.querySourceFeatures(j,s)}setStyle(j,s){return(s=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&j?(this._diffStyle(j,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(j,s))}setTransformRequest(j){return this._requestManager.setTransformRequest(j),this}_getUIString(j){const s=this._locale[j];if(s==null)throw new Error(`Missing UI string '${j}'`);return s}_updateStyle(j,s){var p,x;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(j,s));const w=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!j)),j?(this.style=new np(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof j=="string"?this.style.loadURL(j,s,w):this.style.loadJSON(j,s,w),this):((x=(p=this.style)===null||p===void 0?void 0:p.projection)===null||x===void 0||x.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new np(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(j,s){if(typeof j=="string"){const p=this._requestManager.transformRequest(j,"Style");a.j(p,new AbortController).then(x=>{this._updateDiff(x.data,s)}).catch(x=>{x&&this.fire(new a.k(x))})}else typeof j=="object"&&this._updateDiff(j,s)}_updateDiff(j,s){try{this.style.setState(j,s)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(j,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(j,s){return this._lazyInitEmptyStyle(),this.style.addSource(j,s),this._update(!0)}isSourceLoaded(j){const s=this.style&&this.style.sourceCaches[j];if(s!==void 0)return s.loaded();this.fire(new a.k(new Error(`There is no source with ID '${j}'`)))}setTerrain(j){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),j){const s=this.style.sourceCaches[j.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${j.source}`);this.terrain===null&&s.reload();for(const p in this.style._layers){const x=this.style._layers[p];x.type==="hillshade"&&x.source===j.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),x.type==="color-relief"&&x.source===j.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new wp(this.painter,s,j),this.painter.renderToTexture=new Sp(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var x;p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==j.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((x=p.source)===null||x===void 0?void 0:x.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:j})),this}getTerrain(){var j,s;return(s=(j=this.terrain)===null||j===void 0?void 0:j.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const j=this.style&&this.style.sourceCaches;for(const s in j){const p=j[s]._tiles;for(const x in p){const w=p[x];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(j){return this.style.removeSource(j),this._update(!0)}getSource(j){return this.style.getSource(j)}setSourceTileLodParams(j,s,p){if(p){const x=this.getSource(p);if(!x)throw new Error(`There is no source with ID "${p}", cannot set LOD parameters`);x.calculateTileZoom=bn(Math.max(1,j),Math.max(1,s))}else for(const x in this.style.sourceCaches)this.style.sourceCaches[x].getSource().calculateTileZoom=bn(Math.max(1,j),Math.max(1,s));return this._update(!0),this}refreshTiles(j,s){const p=this.style.sourceCaches[j];if(!p)throw new Error(`There is no source cache with ID "${j}", cannot refresh tile`);s===void 0?p.reload(!0):p.refreshTiles(s.map(x=>new a.a4(x.z,x.x,x.y)))}addImage(j,s,p={}){const{pixelRatio:x=1,sdf:w=!1,stretchX:T,stretchY:P,content:O,textFitWidth:F,textFitHeight:q}=p;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||a.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Y,height:ne,data:ee}=s,ue=s;return this.style.addImage(j,{data:new a.R({width:Y,height:ne},new Uint8Array(ee)),pixelRatio:x,stretchX:T,stretchY:P,content:O,textFitWidth:F,textFitHeight:q,sdf:w,version:0,userImage:ue}),ue.onAdd&&ue.onAdd(this,j),this}}{const{width:Y,height:ne,data:ee}=A.getImageData(s);this.style.addImage(j,{data:new a.R({width:Y,height:ne},ee),pixelRatio:x,stretchX:T,stretchY:P,content:O,textFitWidth:F,textFitHeight:q,sdf:w,version:0})}}updateImage(j,s){const p=this.style.getImage(j);if(!p)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=s instanceof HTMLImageElement||a.b(s)?A.getImageData(s):s,{width:w,height:T,data:P}=x;if(w===void 0||T===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==p.data.width||T!==p.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(s instanceof HTMLImageElement||a.b(s));return p.data.replace(P,O),this.style.updateImage(j,p),this}getImage(j){return this.style.getImage(j)}hasImage(j){return j?!!this.style.getImage(j):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(j){this.style.removeImage(j)}loadImage(j){return Z.getImage(this._requestManager.transformRequest(j,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(j,s){return this._lazyInitEmptyStyle(),this.style.addLayer(j,s),this._update(!0)}moveLayer(j,s){return this.style.moveLayer(j,s),this._update(!0)}removeLayer(j){return this.style.removeLayer(j),this._update(!0)}getLayer(j){return this.style.getLayer(j)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(j,s,p){return this.style.setLayerZoomRange(j,s,p),this._update(!0)}setFilter(j,s,p={}){return this.style.setFilter(j,s,p),this._update(!0)}getFilter(j){return this.style.getFilter(j)}setPaintProperty(j,s,p,x={}){return this.style.setPaintProperty(j,s,p,x),this._update(!0)}getPaintProperty(j,s){return this.style.getPaintProperty(j,s)}setLayoutProperty(j,s,p,x={}){return this.style.setLayoutProperty(j,s,p,x),this._update(!0)}getLayoutProperty(j,s){return this.style.getLayoutProperty(j,s)}setGlyphs(j,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(j,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(j,s,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(j,s,p,x=>{x||this._update(!0)}),this}removeSprite(j){return this._lazyInitEmptyStyle(),this.style.removeSprite(j),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(j,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(j,s,p=>{p||this._update(!0)}),this}setLight(j,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(j,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(j,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(j,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(j,s){return this.style.setFeatureState(j,s),this._update()}removeFeatureState(j,s){return this.style.removeFeatureState(j,s),this._update()}getFeatureState(j){return this.style.getFeatureState(j)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let j=0,s=0;return this._container&&(j=this._container.clientWidth||400,s=this._container.clientHeight||300),[j,s]}_setupContainer(){const j=this._container;j.classList.add("maplibregl-map");const s=this._canvasContainer=E.create("div","maplibregl-canvas-container",j);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=E.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),x=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],x);const w=this._controlContainer=E.create("div","maplibregl-control-container",j),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{T[P]=E.create("div",`maplibregl-ctrl-${P} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(j,s,p){this._canvas.width=Math.floor(p*j),this._canvas.height=Math.floor(p*s),this._canvas.style.width=`${j}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const j=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",x=>{s={requestedAttributes:j},x&&(s.statusMessage=x.statusMessage,s.type=x.type)},{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,j):this._canvas.getContext("webgl2",j)||this._canvas.getContext("webgl",j),!p){const x="Failed to initialize WebGL";throw s?(s.message=x,new Error(JSON.stringify(s))):new Error(x)}this.painter=new Bd(p,this.transform),D.testSupport(p)}migrateProjection(j,s){super.migrateProjection(j,s),this.painter.transform=j,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(j){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||j,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(j){return this._update(),this._renderTaskQueue.add(j)}_cancelRenderFrame(j){this._renderTaskQueue.remove(j)}_render(j){var s,p,x,w,T;const P=this._idleTriggered?this._fadeDuration:0,O=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(j),this._removed)return;let F=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,ee=A.now();this.style.zoomHistory.update(ne,ee);const ue=new a.F(ne,{now:ee,fadeDuration:P,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ye=ue.crossFadingFactor();ye===1&&ye===this._crossFadingFactor||(F=!0,this._crossFadingFactor=ye),this.style.update(ue)}const q=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==O;(x=this.style.projection)===null||x===void 0||x.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((w=this.style.projection)===null||w===void 0?void 0:w.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||q)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,P,this._crossSourceCollisions,q),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:P,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||F)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const Y=this._sourcesDirty||this._styleDirty||this._placementDirty;return Y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||Y||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var j;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(j=this._resizeObserver)===null||j===void 0||j.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),E.remove(this._canvasContainer),E.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frame(this._frameRequest,j=>{a.cw.frame(j),this._frameRequest=null;try{this._render(j)}catch(s){if(!a.cy(s)&&!function(p){return p.message===Mo}(s))throw s}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(j){this._showTileBoundaries!==j&&(this._showTileBoundaries=j,this._update())}get showPadding(){return!!this._showPadding}set showPadding(j){this._showPadding!==j&&(this._showPadding=j,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(j){this._showCollisionBoxes!==j&&(this._showCollisionBoxes=j,j?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(j){this._showOverdrawInspector!==j&&(this._showOverdrawInspector=j,this._update())}get repaint(){return!!this._repaint}set repaint(j){this._repaint!==j&&(this._repaint=j,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(j){this._vertices=j,this._update()}get version(){return Cp}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(j){return this._lazyInitEmptyStyle(),this.style.setProjection(j),this._update(!0)}},c.MapMouseEvent=Or,c.MapTouchEvent=Ia,c.MapWheelEvent=Zl,c.Marker=ec,c.NavigationControl=class{constructor(j){this._updateZoomButtons=()=>{const s=this._map.getZoom(),p=s===this._map.getMaxZoom(),x=s===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,p)=>{const x=this._map._getUIString(`NavigationControl.${p}`);s.title=x,s.setAttribute("aria-label",x)},this.options=a.e({},fi,j),this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),E.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),E.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=E.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(j){return this._map=j,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Cs(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){E.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(j,s){const p=E.create("button",j,this._container);return p.type="button",p.addEventListener("click",s),p}},c.Popup=class extends a.E{constructor(j){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&E.remove(this._content),this._container&&(E.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=E.create("div","maplibregl-popup",this._map.getContainer()),this._tip=E.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=El(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;const p=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let x=this.options.anchor;const w=Zu(this.options.offset);if(!x){const P=this._container.offsetWidth,O=this._container.offsetHeight;let F;F=p.y+w.bottom.y<O?["top"]:p.y>this._map.transform.height-O?["bottom"]:[],p.x<P/2?F.push("left"):p.x>this._map.transform.width-P/2&&F.push("right"),x=F.length===0?"bottom":F.join("-")}let T=p.add(w[x]);this.options.subpixelPositioning||(T=T.round()),E.setTransform(this._container,`${Jl[x]} translate(${T.x}px,${T.y}px)`),so(this._container,x,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(tf),j)}addTo(j){return this._map&&this.remove(),this._map=j,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(j){return this._lngLat=a.S.convert(j),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(j){return this.setDOMContent(document.createTextNode(j))}setHTML(j){const s=document.createDocumentFragment(),p=document.createElement("body");let x;for(p.innerHTML=j;x=p.firstChild,x;)s.appendChild(x);return this.setDOMContent(s)}getMaxWidth(){var j;return(j=this._container)===null||j===void 0?void 0:j.style.maxWidth}setMaxWidth(j){return this.options.maxWidth=j,this._update(),this}setDOMContent(j){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=E.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(j),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(j){return this._container&&this._container.classList.add(j),this}removeClassName(j){return this._container&&this._container.classList.remove(j),this}setOffset(j){return this.options.offset=j,this._update(),this}toggleClassName(j){if(this._container)return this._container.classList.toggle(j)}setSubpixelPositioning(j){this.options.subpixelPositioning=j}_createCloseButton(){this.options.closeButton&&(this._closeButton=E.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const j=this._container.querySelector(nf);j&&j.focus()}},c.RasterDEMTileSource=Gn,c.RasterTileSource=Xn,c.ScaleControl=class{constructor(j){this._onMove=()=>{qd(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,qd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ef),j)}getDefaultPosition(){return"bottom-left"}onAdd(j){return this._map=j,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-scale",j.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){E.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=Uc,c.Style=np,c.TerrainControl=class{constructor(j){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=j}onAdd(j){return this._map=j,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=E.create("button","maplibregl-ctrl-terrain",this._container),E.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){E.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=Kh,c.TwoFingersTouchRotateHandler=Po,c.TwoFingersTouchZoomHandler=Hu,c.TwoFingersTouchZoomRotateHandler=gi,c.VectorTileSource=_n,c.VideoSource=Ue,c.addSourceType=(j,s)=>a._(void 0,void 0,void 0,function*(){if(ht(j))throw new Error(`A source type called "${j}" already exists.`);((p,x)=>{ve[p]=x})(j,s)}),c.clearPrewarmedResources=function(){const j=Ae;j&&(j.isPreloaded()&&j.numActive()===1?(j.release(fe),Ae=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=me,c.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return Qt().getRTLTextPluginStatus()},c.getVersion=function(){return sf},c.getWorkerCount=function(){return Xe.workerCount},c.getWorkerUrl=function(){return a.a.WORKER_URL},c.importScriptInWorkers=function(j){return tn().broadcast("IS",j)},c.prewarm=function(){ct().acquire(fe)},c.setMaxParallelImageRequests=function(j){a.a.MAX_PARALLEL_IMAGE_REQUESTS=j},c.setRTLTextPlugin=function(j,s){return Qt().setRTLTextPlugin(j,s)},c.setWorkerCount=function(j){Xe.workerCount=j},c.setWorkerUrl=function(j){a.a.WORKER_URL=j}});var u=n;return u})}(dv)),dv.exports}var yJ=gJ();const wb=Hx(yJ);function xJ(){const[e,t]=L.useState(null),[n,i]=L.useState(null),[o,u]=L.useState(null),[c,a]=L.useState(null),[g,_]=L.useState(null),S=L.useRef(null),N=L.useRef(null),A=L.useRef([]),E=[{id:1,name:"Aspen Medical Harbour City",distance:"0.6 km",address:"345 Champion Parade Suite A, Ground Floor Downtown, Port Moresby, National Capital District",hours:"0:00 AM - 12:00 PM",status:"Open Now",phone:"675 321 0202",lat:147.149695,lng:-9.477393},{id:2,name:"Chemcare Pharmacies",distance:"0.7 km",address:"Lae, Mangola St Lae, Postal Address: PO Box 349 Lae MP",hours:"7:00 AM - 9:00 PM",status:"Open Now",phone:"675 472 3730",lat:146.990083,lng:-6.734794},{id:3,name:"Ela Medical Centre",distance:"1.1 km",address:"Carpenters House, Waigani Drive, Port Moresby, Postal Address: PO Box 863 Boroko, NCD",hours:"8:00 AM - 10:00 PM",status:"Open Now",phone:"675 325 3664",lat:147.180183,lng:-9.435229},{id:4,name:"GM Flores Hospital",distance:"1.2 km",address:"Lae, Section 2, Lot 38, Microbank Haus, 5th Street, Top Town, Postal Address: PO Box 675 Lae, MP",hours:"24 Hours",status:"Open Now",phone:"7596028456",lat:147.002688,lng:-6.729797}];L.useEffect(()=>{if(!S.current)return;const W="9a0dd25b5e3645f59c8db86fac99a495",J="https://maps.geoapify.com/v1/styles/osm-carto/style.json",Z=new wb.Map({container:S.current,style:`${J}?apiKey=${W}`,center:[147.1867241,-9.43409997],zoom:13});return N.current=Z,()=>{Z.remove()}},[]),L.useEffect(()=>{if(!N.current||!n)return;A.current.forEach(K=>K.remove()),A.current=[];const W=document.createElement("div");W.className="user-marker",W.style.cssText=`
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background-color: #4F46E5;
      border: 3px solid white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    `;const J=new wb.Marker({element:W}).setLngLat([n.longitude,n.latitude]).addTo(N.current);A.current.push(J),E.forEach(K=>{const le=document.createElement("div");le.className="pharmacy-marker",le.style.cssText=`
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: #0D9488;
        border: 2px solid white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      `,le.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>',le.addEventListener("click",()=>{u(K),N.current.flyTo({center:[K.lng,K.lat],zoom:15})});const _e=new wb.Marker({element:le}).setLngLat([K.lng,K.lat]).addTo(N.current);A.current.push(_e)});const Z=new wb.LngLatBounds;Z.extend([n.longitude,n.latitude]),E.forEach(K=>Z.extend([K.lng,K.lat])),N.current.fitBounds(Z,{padding:50,maxZoom:14})},[n]);const D=W=>{const{latitude:J,longitude:Z}=W.coords;console.log("User location:",J,Z),t(`Lat: ${J.toFixed(4)}, Lng: ${Z.toFixed(4)}`),i({latitude:J,longitude:Z}),N.current&&N.current.flyTo({center:[Z,J],zoom:14})},B=W=>{console.error("Geolocation error:",W.message),t("Permission denied or unavailable")},$=()=>{if(!navigator.geolocation){t("Geolocation not supported");return}navigator.permissions.query({name:"geolocation"}).then(W=>{console.log("Permission state:",W.state),a(W.state),W.state==="granted"||W.state==="prompt"?navigator.geolocation.getCurrentPosition(D,B):W.state==="denied"&&t("Permission denied"),W.addEventListener("change",()=>{console.log("Permission changed to:",W.state),a(W.state)})}).catch(W=>console.error("Permission API error:",W))};L.useEffect(()=>{$()},[]);const G=W=>{if(console.log(`userCoords: ${n}, destination: ${W}`),n){const J=`https://www.google.com/maps/dir/?api=1&origin=${n.latitude},${n.longitude}&destination=${W.lat},${W.lng}`;window.open(J,"_blank")}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[l.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Home > ",l.jsx("span",{className:"text-teal-700",children:"Pharmacy Nearby"})]}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Pharmacies Near You"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-6 shadow-md border border-orange-200",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[l.jsx(fm,{className:"text-teal-700 w-6 h-6 flex-shrink-0 mt-1"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Find Pharmacies Near You"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Locate the nearest pharmacy and check availability"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(ly,{className:"text-teal-700 w-6 h-6 flex-shrink-0 mt-1"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Check for item availability at nearby Pharmacies"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Real-time stock information"})]})]}),l.jsxs("div",{className:"mt-6 bg-white rounded-lg p-4 shadow-sm",children:[l.jsx("div",{className:"h-12 mb-3 flex items-center justify-center bg-teal-700 text-white rounded font-bold text-xl",children:"PHARMACY 24/7"}),l.jsx("div",{className:"bg-orange-500 text-white rounded-lg px-4 py-2 text-center mb-2",children:l.jsx("p",{className:"text-sm font-semibold",children:"Unlock 10% Cashback on your Store Purchase"})}),l.jsx("button",{className:"w-full bg-gray-900 text-white py-2 rounded-lg text-sm font-semibold hover:bg-gray-800 transition",children:"Download Now"})]})]})}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(fm,{className:"text-teal-700 w-5 h-5"}),l.jsx("span",{className:"font-semibold text-gray-800",children:e||"Detecting location..."})]}),l.jsx("button",{onClick:$,className:"text-teal-700 font-semibold text-sm hover:text-teal-800",children:"Refresh"})]}),l.jsxs("div",{className:"relative h-64 w-full",children:[l.jsx("div",{className:"absolute inset-0 w-full h-full",ref:S}),l.jsx("div",{className:"absolute bottom-2 right-2 bg-white px-3 py-1 rounded shadow text-xs text-gray-600 z-10",children:"Map data ©2025"})]})]}),l.jsx("div",{className:"space-y-4 flex gap-5 flex-wrap",children:E.map(W=>l.jsxs("div",{className:`bg-white rounded-lg shadow-md p-5 hover:shadow-lg transition w-full lg:w-[calc(50%-0.625rem)] ${(o==null?void 0:o.id)===W.id?"ring-2 ring-teal-700":""}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:W.name}),l.jsxs("div",{className:"flex items-start gap-2 text-gray-600 text-sm",children:[l.jsx(fm,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),l.jsx("p",{children:W.address})]})]}),l.jsx("div",{className:"text-right ml-2",children:l.jsx("span",{className:"text-2xl font-bold text-teal-700",children:W.distance})})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(ly,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:W.hours}),l.jsx("span",{className:"text-green-600 font-semibold text-sm ml-2",children:W.status})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>G(W),className:"flex-1 border-2 border-teal-700 text-teal-700 py-2 rounded-lg font-semibold hover:bg-teal-50 transition flex items-center justify-center gap-2",children:[l.jsx(fB,{className:"w-4 h-4"}),"Get Directions"]}),l.jsxs("a",{href:`tel:${W.phone}`,className:"flex-1 bg-teal-700 text-white py-2 rounded-lg font-semibold hover:bg-teal-800 transition flex items-center justify-center gap-2",children:[l.jsx(uC,{className:"w-4 h-4"}),W.phone]})]}),l.jsxs("button",{className:"w-full mt-3 text-sm text-gray-600 hover:text-gray-800 flex items-center justify-center gap-1",children:[l.jsx(BB,{className:"w-4 h-4"}),"Report an issue with this pharmacy"]})]},W.id))})]})]})]}),e==="Permission denied"&&l.jsx(pJ,{city:g,setCity:_})]})}function _J({prescriptions:e=[],selectedPrescription:t,setSelectedPrescription:n,onClose:i,onSubmit:o,setActiveMainTab:u}){const[c,a]=L.useState(!0),[g,_]=L.useState(null),S=D=>{const B=D.target.files[0];B&&(_(B),n(null))},N=D=>{console.log("Handle select prescription...",D),console.log("Handle selected prescription...",t),n(D),_(null)},A=()=>{t?(o&&o(t,null),u("Prescriptions"),a(!1)):g?(o&&o(null,g),a(!1)):alert("Please select a prescription or upload a file")},E=()=>{a(!1),i&&i()};return c?l.jsx("div",{className:"fixed inset-0 backdrop-blur-md flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"flex items-center justify-between p-6 border-b",children:l.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Select Prescription"})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Your Prescriptions"}),l.jsx("div",{className:"space-y-3",children:e.map(D=>l.jsx("div",{onClick:()=>N(D),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${(t==null?void 0:t.name)===D.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(vm,{className:`mt-1 mr-3 ${(t==null?void 0:t.name)===D.name?"text-blue-500":"text-gray-400"}`,size:20}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-gray-800",children:(D==null?void 0:D.title)||"Prescription"}),l.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Date: ",(D==null?void 0:D.encounter_date)||"N/A"]}),l.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Drug: ",(D==null?void 0:D.drug_name)||"N/A"]}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Dosage: ",(D==null?void 0:D.dosage)||"N/A"," | ",(D==null?void 0:D.period)||"N/A"]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Practitioner: ",(D==null?void 0:D.practitioner_name)||"N/A"]})]})]})},D.name||D.parent))})]}),l.jsxs("div",{className:"relative my-6",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-4 bg-white text-gray-500",children:"OR"})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Upload New Prescription"}),l.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[l.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:"image/*,.pdf",onChange:S}),l.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[l.jsx(wS,{className:"mx-auto text-gray-400 mb-4",size:48}),l.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload or drag and drop"}),l.jsx("p",{className:"text-sm text-gray-500",children:"PDF, PNG, JPG (max. 10MB)"})]}),g&&l.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-700 font-medium",children:["Selected: ",g.name]})})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t bg-gray-50",children:[l.jsx("button",{onClick:E,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:A,disabled:!t&&!g,className:`px-6 py-2 rounded-lg transition-colors ${t||g?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Continue"})]})]})}):null}const bJ=()=>{const[e,t]=L.useState([]),[n,i]=L.useState([]),[o,u]=L.useState(null),[c,a]=L.useState(!1),[g,_]=L.useState(""),[S,N]=L.useState({patientName:"",age:"",gender:"",contactNumber:"",email:"",address:"",doctorName:"",preferredDate:"",preferredTime:"",notes:""});L.useEffect(()=>{function G(){return Ht(this,null,function*(){try{const W=new Headers;W.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),W.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const K=yield(yield fetch('https://lblerp.anantdv.com/api/resource/Lab Test Template?fields=["*"]',{method:"GET",headers:W,redirect:"follow"})).json();t(K==null?void 0:K.data),i(K==null?void 0:K.data)}catch(W){console.log("Error in fetching Lab Test Template")}})}G()},[]),L.useEffect(()=>{const G=e.filter(W=>W.lab_test_name.toLowerCase().includes(g.toLowerCase())||W.lab_test_code.toLowerCase().includes(g.toLowerCase())||W.department.toLowerCase().includes(g.toLowerCase()));i(G)},[g,e]);const A=G=>{u(G),a(!1)},E=()=>{u(null),a(!1)},D=()=>{a(!0)},B=G=>{N(Me(te({},S),{[G.target.name]:G.target.value}))},$=()=>{if(!S.patientName||!S.age||!S.gender||!S.contactNumber||!S.address||!S.preferredDate||!S.preferredTime){alert("Please fill all required fields");return}alert(`Lab test request submitted successfully!

Test: ${o.lab_test_name}
Patient: ${S.patientName}
Date: ${S.preferredDate}
Time: ${S.preferredTime}`),N({patientName:"",age:"",gender:"",contactNumber:"",email:"",address:"",doctorName:"",preferredDate:"",preferredTime:"",notes:""}),a(!1)};return o?c?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:l.jsx("div",{className:"max-w-4xl mx-auto",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[l.jsxs("button",{onClick:()=>a(!1),className:"flex items-center text-blue-600 hover:text-blue-800 mb-6",children:[l.jsx(Nv,{size:20,className:"mr-2"}),"Back to Details"]}),l.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Request Lab Test"}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Requesting: ",l.jsx("span",{className:"font-semibold",children:o.lab_test_name})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Patient Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"patientName",value:S.patientName,onChange:B,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Age ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",name:"age",value:S.age,onChange:B,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Gender ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{name:"gender",value:S.gender,onChange:B,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select Gender"}),l.jsx("option",{value:"male",children:"Male"}),l.jsx("option",{value:"female",children:"Female"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Contact Number ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"tel",name:"contactNumber",value:S.contactNumber,onChange:B,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:S.email,onChange:B,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Doctor Name"}),l.jsx("input",{type:"text",name:"doctorName",value:S.doctorName,onChange:B,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Preferred Date ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"date",name:"preferredDate",value:S.preferredDate,onChange:B,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Preferred Time ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"time",name:"preferredTime",value:S.preferredTime,onChange:B,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Address ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"address",value:S.address,onChange:B,rows:"3",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Additional Notes"}),l.jsx("textarea",{name:"notes",value:S.notes,onChange:B,rows:"3",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:$,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Submit Request"}),l.jsx("button",{onClick:()=>a(!1),className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:l.jsx("div",{className:"max-w-4xl mx-auto",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[l.jsxs("button",{onClick:E,className:"flex items-center text-blue-600 hover:text-blue-800 mb-6",children:[l.jsx(Nv,{size:20,className:"mr-2"}),"Back to Tests"]}),l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-2",children:o.lab_test_name}),l.jsxs("p",{className:"text-gray-600",children:["Test Code: ",o.lab_test_code]})]}),l.jsx("span",{className:"text-xs font-semibold px-4 py-2 bg-purple-100 text-purple-700 rounded-full",children:o.lab_test_template_type})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl",children:[l.jsxs("div",{className:"flex items-center mb-2",children:["PGK",l.jsx("h3",{className:"font-semibold text-gray-700",children:"Test Rate"})]}),l.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["PGK",o.lab_test_rate]})]}),l.jsxs("div",{className:"bg-green-50 p-6 rounded-xl",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(vm,{className:"text-green-600 mr-2",size:20}),l.jsx("h3",{className:"font-semibold text-gray-700",children:"Department"})]}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.department})]})]}),l.jsxs("div",{className:"space-y-4 mb-8",children:[o.lab_test_description&&l.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[l.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),l.jsx("p",{className:"text-gray-600",children:o.lab_test_description.replace(/<[^>]*>/g,"")})]}),o.lab_test_uom&&l.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[l.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Unit of Measurement"}),l.jsx("p",{className:"text-gray-600",children:o.lab_test_uom})]}),o.lab_test_normal_range&&l.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[l.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Normal Range"}),l.jsx("p",{className:"text-gray-600",children:o.lab_test_normal_range})]})]}),l.jsx("button",{onClick:D,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:"Request Lab Test"})]})})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Lab Test Portal"}),l.jsx("p",{className:"text-gray-600",children:"Browse and request laboratory tests"})]}),l.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(ty,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),l.jsx("input",{type:"text",placeholder:"Search by test name, code, or department...",value:g,onChange:G=>_(G.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(G=>l.jsxs("div",{onClick:()=>A(G),className:"bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer transform hover:-translate-y-1 p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:l.jsx(hC,{className:"text-blue-600",size:24})}),l.jsx("span",{className:"text-xs font-semibold px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:G.lab_test_template_type})]}),l.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:G.lab_test_name}),l.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Code: ",G.lab_test_code]}),l.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[l.jsx("span",{className:"text-sm text-gray-500",children:G.department}),l.jsxs("span",{className:"text-lg font-bold text-green-600",children:["PGK",G.lab_test_rate]})]})]},G.name))}),n.length===0&&l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:l.jsx("p",{className:"text-gray-500 text-lg",children:"No lab tests found matching your search."})})]})})},vJ=()=>{const[e,t]=L.useState(!1),[n,i]=L.useState("appointments"),[o,u]=L.useState("Total Appointments"),[c,a]=L.useState(!1),[g,_]=L.useState(null),[S,N]=L.useState(null),[A,E]=L.useState(null),[D,B]=L.useState(!1),[$,G]=L.useState(null),[W,J]=L.useState(!1),[Z,K]=L.useState([]),[le,_e]=L.useState([]),[de,pe]=L.useState([]),[Oe,He]=L.useState([]),[We,st]=L.useState([]),[At,vt]=L.useState(!1),[ze,Qe]=L.useState(null),Je=is.get("full_name")||"Guest User",Pt=is.get("user_id")||"USER-GUEST-001",fe=is.get("user_image")||"",Xe=Pt,tt=()=>Ht(null,null,function*(){try{vt(!0);const xt=new Headers;xt.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),xt.append("Content-Type","application/json");const ie=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.get_medical_department_list",{method:"GET",headers:xt,redirect:"follow"});if(!ie.ok)throw new Error(`HTTP error! status: ${ie.status}`);const be=yield ie.json();console.log("API Response for medical department:",be),vt(!1),K(be.message)}catch(xt){}}),Ae=()=>Ht(null,null,function*(){try{const xt=new Headers;xt.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),xt.append("Content-Type","application/json");const ie=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.appointment_type",{method:"GET",headers:xt,redirect:"follow"});if(!ie.ok)throw new Error(`HTTP error! status: ${ie.status}`);const be=yield ie.json();console.log("API Response for Appointment TYpe:",be),_e(be.message)}catch(xt){}}),ot=()=>Ht(null,null,function*(){try{const xt=new Headers;xt.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),xt.append("Content-Type","application/json");const ie=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.healthcare_practitioner",{method:"GET",headers:xt,redirect:"follow"});if(!ie.ok)throw new Error(`HTTP error! status: ${ie.status}`);const be=yield ie.json();console.log("API Response forPractitioner Data......:",be),pe(be.message)}catch(xt){}});L.useEffect(()=>{Ht(null,null,function*(){if(!(W||Xe==="USER-GUEST-001")){console.log("Fetching user data for:",Xe);try{const je=new Headers;je.append("Content-Type","application/json");const ae=`/api/resource/User/${Xe}?fields=["card_blo_me_number","full_name","email"]`,be=yield fetch(ae,{method:"GET",headers:je,redirect:"follow"});if(be.ok){const ke=yield be.json();if(ke.data&&ke.data.card_blo_me_number){const Re=ke.data.card_blo_me_number;_(Re),console.log("Found Card Blo Me Number:",Re),Ge(Re)}else console.log("No card_blo_me_number found for user"),G("No Card Blo Me Number assigned to your account. Please contact support.")}else console.error("Failed to fetch user data:",be.status),console.log("Attempting fallback with Frappe SDK...")}catch(je){console.error("Error fetching user card number:",je);const ae=is.get("card_blo_me_number")||localStorage.getItem("card_blo_me_number");ae&&(console.log("Found stored Card Blo Me Number:",ae),_(ae),Ge(ae))}finally{J(!0)}}})},[Xe,W]);const{data:ct,isLoading:ut,error:tn}=Ch("User",Xe,{enabled:!W&&Xe!=="USER-GUEST-001"});L.useEffect(()=>{if(ct&&ct.card_blo_me_number&&!g){const xt=ct.card_blo_me_number;_(xt),console.log("Got Card Blo Me Number from Frappe SDK:",xt),is.set("card_blo_me_number",xt,{expires:7}),Ge(xt),tt(),Ae(),ot()}},[ct,g]);const Ge=xt=>Ht(null,null,function*(){if(!xt){console.error("No card number provided");return}B(!0),G(null);try{console.log("Fetching patient with card:",xt);const je=new Headers;je.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),je.append("Content-Type","application/json"),je.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ae=JSON.stringify({card_blo_me_number:xt}),ke=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.healthcare.doctype.patient.get_list.get_patients_by_card_number",{method:"POST",headers:je,body:ae,redirect:"follow"});if(!ke.ok)throw new Error(`HTTP error! status: ${ke.status}`);const Re=yield ke.text(),Q=JSON.parse(Re);if(console.log("API Response:",Q),Q.message&&Array.isArray(Q.message)&&Q.message.length>0){const nt=Q.message[0];console.log("Patient found:",{id:nt.name,name:nt.patient_name,cardNumber:nt.card_blo_me_number}),E([nt]),N(nt.name),G(null),localStorage.setItem("current_patient_id",nt.name)}else console.warn("No patient found with card:",xt),G({message:`No patient record found for Card Number: ${xt}`,type:"not_found"}),E(null),N(null)}catch(je){console.error("Error fetching patient:",je),G({message:`Failed to fetch patient data: ${je.message}`,type:"error"}),E(null),N(null)}finally{B(!1)}}),[Ye,zt]=L.useState(null),[Bt,It]=L.useState(!1),[Lt,nn]=L.useState(null),[_n,Xn]=L.useState(!1);L.useEffect(()=>{S&&(console.log("Loading medical records for patient:",S),Gn(S),Ue(S),gn(S),ln(S))},[S]);const Gn=xt=>Ht(null,null,function*(){if(xt){It(!0);try{const je=new Headers;je.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),je.append("Content-Type","application/json"),je.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ae=JSON.stringify({patientId:xt}),ke=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.get_labtest",{method:"POST",headers:je,body:ae,redirect:"follow"});if(!ke.ok)throw new Error(`HTTP error! status: ${ke.status}`);if(ke.ok){const Re=yield ke.json();console.log("API Response for Lab Test...:",Re),zt(Re.message||[])}else console.error("Failed to fetch lab tests:",ke.status),zt([])}catch(je){console.error("Error fetching lab tests:",je.message),zt([])}finally{It(!1)}}}),gn=xt=>Ht(null,null,function*(){if(xt){It(!0);try{const je=new Headers;je.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),je.append("Content-Type","application/json"),je.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ae=JSON.stringify({patientId:xt}),ke=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.get_medication_details",{method:"POST",headers:je,body:ae,redirect:"follow"});if(!ke.ok)throw new Error(`HTTP error! status: ${ke.status}`);if(ke.ok){const Re=yield ke.json();console.log("API Response for Medication Details...:",Re),He(Re.message||[])}else console.error("Failed to fetch lab tests:",ke.status),zt([])}catch(je){console.error("Error fetching lab tests:",je.message),zt([])}finally{It(!1)}}}),ln=xt=>Ht(null,null,function*(){if(xt){It(!0);try{const je=new Headers;je.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),je.append("Content-Type","application/json"),je.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ae=JSON.stringify({patientId:xt}),ke=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.vital_sin",{method:"POST",headers:je,body:ae,redirect:"follow"});if(!ke.ok)throw new Error(`HTTP error! status: ${ke.status}`);if(ke.ok){const Re=yield ke.json();console.log("API Response for Vital Signs...:",Re),st(Re.message||[])}else console.error("Failed to fetch lab tests:",ke.status),zt([])}catch(je){console.error("Error fetching lab tests:",je.message),zt([])}finally{It(!1)}}}),Ue=xt=>Ht(null,null,function*(){var je;if(console.log("patient id....",xt),!!xt){Xn(!0);try{const ae=new Headers;ae.append("Authorization","token 73fb1eefb9d16d3:5b665ea071ecae4"),ae.append("Content-Type","application/json"),ae.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const ie=JSON.stringify({patientId:xt}),Re=yield fetch("https://lblerp.anantdv.com/api/method/erpnext.cad_blo_me.get_appointment",{method:"POST",headers:ae,body:ie,redirect:"follow"});if(!Re.ok)throw new Error(`HTTP error! status: ${Re.status}`);const Q=yield Re.text(),nt=JSON.parse(Q);if(console.log("API Response for appointment...:",nt),nt.message&&Array.isArray(nt.message)&&nt.message.length>0){const et=nt.message[0];nn(nt.message||[]),console.log("Appointments loaded:",((je=nt.data)==null?void 0:je.length)||0,"appointments")}else console.error("Failed to fetch appointments:",Re.status),nn([])}catch(ae){console.error("Error fetching appointments:",ae.message),nn([])}finally{Xn(!1)}}}),ge=L.useCallback(()=>{S&&(console.log("Refreshing appointments..."),Ue(S))},[S]),ve=L.useMemo(()=>Ye?Ye.map((xt,je)=>({id:je+1,testName:xt.lab_test_name||xt.template,date:xt.result_date?new Date(xt.result_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Pending",doctor:xt.practitioner_name||"Not specified",status:xt.status==="Completed"?"Completed":xt.status==="Approved"?"Normal":"Pending",downloadable:xt.status==="Completed"||xt.status==="Approved",labTestId:xt.name,invoiced:xt.invoiced,department:xt.department||"Laboratory"})):[],[Ye]),ht=L.useMemo(()=>Lt?Lt.map((xt,je)=>({id:je+1,doctor:xt.practitioner_name,specialty:xt.department,date:new Date(xt.appointment_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),rawDate:xt.appointment_date,time:xt.appointment_time?new Date(`2000-01-01 ${xt.appointment_time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"TBD",status:xt.status,location:xt.service_unit||`${xt.department} Department`,appointmentId:xt.name,appointmentType:xt.appointment_type||"Consultation",duration:xt.duration,invoiced:xt.invoiced,refInvoice:xt.ref_sales_invoice,serviceUnit:xt.service_unit})).sort((xt,je)=>new Date(je.rawDate)-new Date(xt.rawDate)):[],[Lt]),ft=Lt?Lt.length:0,qt=Ye?Ye.length:0,cn=Ye?Ye.filter(xt=>xt.status==="Completed"||xt.status==="Approved").length:0;L.useMemo(()=>ht.filter(xt=>xt.status==="Closed"||new Date(xt.rawDate)<new Date),[ht]);const Qt=L.useMemo(()=>ve.slice(0,3).map(xt=>({name:xt.testName,date:xt.date,status:xt.status==="Completed"?"completed":"pending",result:xt.status==="Completed"?"Normal":"-",labTestId:xt.labTestId})),[ve]);return ut&&!W?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading user data..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[c&&Z&&l.jsx(hJ,{showModal:c,setShowModal:a,patientData:A,patientId:S,user_name:Je,cardBloMeNumber:g,refreshAppointments:ge,departmentsData:Z,departmentsLoading:!0,appointmentTypesData:le,practitionersData:de}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Health Blo Me"}),l.jsx("p",{className:"text-gray-600",children:"Manage your health records, appointments, and medical history"}),g&&l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Card Number: ",g]})]}),$&&$.type==="not_found"&&l.jsxs("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[l.jsx("h3",{className:"text-yellow-800 font-medium mb-2",children:"Patient Registration Required"}),l.jsx("p",{className:"text-yellow-700 text-sm",children:$.message}),l.jsx("p",{className:"text-yellow-700 text-sm mt-2",children:"Please visit the registration desk or contact support to complete your patient registration."})]}),l.jsx(sJ,{totalAppointments:ft,pastAppointments:Oe,totalLabReports:qt,completedLabTests:cn,activeMainTab:o,setActiveMainTab:u}),o==="Total Appointments"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx(rJ,{showPatientDetails:e,setShowPatientDetails:t,patientData:A,patientLoading:D,patientError:$,userImage:fe,user_name:Je}),l.jsx(aJ,{allAppointments:ht,appointmentLoading:_n,setShowAppointmentModal:a}),l.jsx(oJ,{activeTab:n,setActiveTab:i,appointmentData:Lt,appointmentLoading:_n,labReports:ve,labTestLoading:Bt,patientData:A,allAppointments:ht})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(lJ,{vitalSignData:We}),l.jsx(cJ,{recentLabTests:Qt,labTestLoading:Bt,setActiveTab:i}),l.jsx(uJ,{}),l.jsx(dJ,{})]})]}),o==="Prescriptions"&&l.jsx(fJ,{selectedPrescription:ze,setSelectedPrescription:Qe,prescriptions:Oe}),o==="Get Medicine"&&l.jsx(_J,{activeMainTab:o,setActiveMainTab:u,selectedPrescription:ze,setSelectedPrescription:Qe,prescriptions:Oe}),o==="Lab Reports"&&l.jsx(bJ,{})]})},TE=L.memo(({formData:e,handleChange:t,countries:n,formErrors:i={},profilePicture:o,profileUrl:u,handleProfilePictureChange:c,uploadProfilePicture:a})=>{L.useEffect(()=>{console.log("formData:",e,"formErrors:",i)},[e,i]);const g=(A,E="field-input required")=>`${E} ${i[A]?"field-error-animate":""}`,_=(A,E="field-select required")=>`${E} ${i[A]?"field-error-animate":""}`,S=A=>i[A]?l.jsx("div",{className:"error-message",children:"This field is required."}):null,N=(A,E,D)=>{A?(D("portion_lot_no",E.portion_nolot_no),D("village_street",E.village),D("town1",E.town),D("district1",E.district),D("province1",E.province),D("country1",E.country),D("po_box1",E.po_box),D("postal_code1",E.postal_code),D("location1",E.location)):(D("portion_lot_no",""),D("village_street",""),D("town1",""),D("district1",""),D("province1",""),D("country1","Papua New Guinea"),D("po_box1",""),D("postal_code1",""),D("location1",""))};return l.jsxs("div",{children:[l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"🖼️"}),l.jsx("h3",{className:"section-title",children:"Profile Picture"})]}),l.jsxs("div",{className:"flex items-center gap-4 w-full mt-4",children:[u&&l.jsx("div",{className:"h-16 w-16 flex items-center justify-center rounded-lg bg-white shadow",children:l.jsx("img",{src:u,alt:"Profile preview",className:"object-cover h-14 w-14 rounded-lg"})}),l.jsx("label",{className:"file-label flex-1 max-w-xl",children:l.jsxs("span",{className:`flex items-center gap-2 w-full px-6 py-3 bg-white border-2 border-dashed border-blue-300 text-blue-600 \r
      font-medium rounded-lg shadow-sm cursor-pointer transition-all duration-200 ease-in-out\r
      hover:bg-blue-50 hover:border-blue-500 hover:text-blue-700\r
      focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 active:scale-95`,tabIndex:0,children:[l.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24","aria-hidden":"true",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16v-4m0 0V8m0 4h4m-4 0H8m8 8H8a2 2 0 01-2-2V6a2 2 0 012-2h2l2-2 2 2h2a2 2 0 012 2v10a2 2 0 01-2 2z"})}),l.jsx("span",{children:"Select Image"}),l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:c})]})}),l.jsxs("button",{type:"button",onClick:a,disabled:!o,className:`group px-6 py-3 font-semibold rounded-lg shadow transition-all duration-300
      flex items-center gap-2
      focus:outline-none focus:ring-2 focus:ring-blue-400
      ${o?"bg-blue-600 text-white hover:bg-blue-700 active:scale-95":"bg-gray-100 text-gray-400 border border-gray-300 opacity-50 cursor-not-allowed"}`,children:["Upload ",l.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"transition-transform group-hover:-translate-y-1 group-active:translate-y-0",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M16 8l-4-4m0 0L8 8m4-4v12"})})]})]})]}),l.jsxs("div",{className:"section-card",style:{display:"none"},children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"✅"}),l.jsx("h3",{className:"section-title",children:"Basic Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Card Blo Me ID"}),l.jsx("select",{required:!0,className:_("naming_series"),value:e.naming_series,onChange:A=>t("naming_series",A.target.value),children:l.jsx("option",{value:"CBM-",children:"CBM-"})})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Status"}),l.jsxs("select",{className:_("status"),value:e.status,onChange:A=>t("status",A.target.value),children:[l.jsx("option",{children:"Active"}),l.jsx("option",{children:"Inactive"}),l.jsx("option",{children:"Suspended"}),l.jsx("option",{children:"Rejected"})]})]}),e.status==="Inactive"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Inactive Date"}),l.jsx("input",{type:"date",className:g("inactive_date"),value:e.inactive_date,onChange:A=>t("inactive_date",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Inactive Reason"}),l.jsx("textarea",{className:g("inactive_reason","field-textarea"),value:e.inactive_reason,onChange:A=>t("inactive_reason",A.target.value)})]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"👤"}),l.jsx("h3",{className:"section-title",children:"Personal Health Declaration"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Title"}),l.jsxs("select",{className:_("title"),value:e.title,onChange:A=>t("title",A.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Mr."}),l.jsx("option",{children:"Mrs."}),l.jsx("option",{children:"Miss"})]}),S("title")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"First Name"}),l.jsx("input",{type:"text",className:g("first_name"),value:e.first_name,onChange:A=>t("first_name",A.target.value)}),S("first_name")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:g("middle_name","field-input"),value:e.middle_name,onChange:A=>t("middle_name",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Last Name"}),l.jsx("input",{type:"text",className:g("last_name"),value:e.last_name,onChange:A=>t("last_name",A.target.value)}),S("last_name")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Gender"}),l.jsxs("select",{className:_("gender"),value:e.gender,onChange:A=>t("gender",A.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Male"}),l.jsx("option",{children:"Female"}),l.jsx("option",{children:"Other"})]}),S("gender")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Date Of Birth"}),l.jsx("input",{type:"date",className:g("date_of_birth"),value:e.date_of_birth,onChange:A=>t("date_of_birth",A.target.value)}),S("date_of_birth")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blood Group"}),l.jsxs("select",{className:_("blood_group"),value:e.blood_group,onChange:A=>t("blood_group",A.target.value),children:[l.jsx("option",{value:"",disabled:!0,children:"Select"}),l.jsx("option",{value:""}),l.jsx("option",{value:"A Positive",children:"A Positive"}),l.jsx("option",{value:"A Negative",children:"A Negative"}),l.jsx("option",{value:"B Positive",children:"B Positive"}),l.jsx("option",{value:"B Negative",children:"B Negative"}),l.jsx("option",{value:"AB Positive",children:"AB Positive"}),l.jsx("option",{value:"AB Negative",children:"AB Negative"}),l.jsx("option",{value:"O Positive",children:"O Positive"}),l.jsx("option",{value:"O Negative",children:"O Negative"})]}),S("blood_group")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Resident Status"}),l.jsxs("select",{className:_("resident_status"),value:e.resident_status,onChange:A=>t("resident_status",A.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Resident"}),l.jsx("option",{children:"Non-Resident"})]}),S("resident_status")]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"📍"}),l.jsx("h3",{className:"section-title",children:"Current Address"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Number"}),l.jsx("input",{type:"text",className:g("portion_nolot_no","field-input"),value:e.portion_nolot_no,onChange:A=>t("portion_nolot_no",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Village"}),l.jsx("input",{type:"text",className:g("village","field-input"),value:e.village,onChange:A=>t("village",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Town"}),l.jsx("input",{type:"text",className:g("town","field-input"),value:e.town,onChange:A=>t("town",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:g("district","field-input"),value:e.district,onChange:A=>t("district",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:g("province","field-input"),value:e.province,onChange:A=>t("province",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Country"}),l.jsx("select",{className:_("country","field-select"),value:e.country,onChange:A=>t("country",A.target.value),children:n.map((A,E)=>l.jsx("option",{value:A.name,children:A.name},E))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"PO Box"}),l.jsx("input",{type:"text",className:g("po_box","field-input"),value:e.po_box,onChange:A=>t("po_box",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Postal Code"}),l.jsx("input",{type:"text",className:g("postal_code"),value:e.postal_code,onChange:A=>t("postal_code",A.target.value),required:!0}),S("postal_code")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Location"}),l.jsx("input",{type:"text",className:g("location","field-input"),value:e.location,onChange:A=>t("location",A.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"🏠"}),l.jsx("h3",{className:"section-title",children:"Physical Address"})]}),l.jsxs("div",{className:"checkbox-wrapper",children:[l.jsx("input",{type:"checkbox",className:"checkbox-input",checked:e.same_as_current||!1,onChange:A=>{t("same_as_current",A.target.checked),N(A.target.checked,e,t)}}),l.jsx("label",{className:"checkbox-label",children:"Physical Address is same as your current address"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Number"}),l.jsx("input",{type:"text",className:g("portion_lot_no","field-input"),value:e.portion_lot_no,onChange:A=>t("portion_lot_no",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Street/Village"}),l.jsx("input",{type:"text",className:g("village_street","field-input"),value:e.village_street,onChange:A=>t("village_street",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Town"}),l.jsx("input",{type:"text",className:g("town1","field-input"),value:e.town1,onChange:A=>t("town1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:g("district1","field-input"),value:e.district1,onChange:A=>t("district1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:g("province1","field-input"),value:e.province1,onChange:A=>t("province1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Country"}),l.jsx("select",{className:_("country1","field-select"),value:e.country1,onChange:A=>t("country1",A.target.value),children:n.map((A,E)=>l.jsx("option",{value:A.name,children:A.name},E))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"PO Box"}),l.jsx("input",{type:"text",className:g("po_box1","field-input"),value:e.po_box1,onChange:A=>t("po_box1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Postal Code"}),l.jsx("input",{type:"text",className:g("postal_code1"),value:e.postal_code1,onChange:A=>t("postal_code1",A.target.value)}),S("postal_code1")]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Location"}),l.jsx("input",{type:"text",className:g("location1","field-input"),value:e.location1,onChange:A=>t("location1",A.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"📧"}),l.jsx("h3",{className:"section-title",children:"Contact Details"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Country Code"}),l.jsx("select",{className:_("personal_country_code","field-select"),value:e.personal_country_code,onChange:A=>t("personal_country_code",A.target.value),children:n.map((A,E)=>l.jsxs("option",{value:A.code,children:[A.code," (",A.name,")"]},E))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Phone Number"}),l.jsx("input",{type:"tel",className:g("phone_no","field-input"),value:e.phone_no,onChange:A=>t("phone_no",A.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Email Address"}),l.jsx("input",{type:"email",className:g("personal_email_address","field-input"),value:e.personal_email_address,onChange:A=>t("personal_email_address",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Country Code"}),l.jsx("select",{className:_("office_country_code","field-select"),value:e.office_country_code,onChange:A=>t("office_country_code",A.target.value),children:n.map((A,E)=>l.jsxs("option",{value:A.code,children:[A.code," (",A.name,")"]},E))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Phone Number"}),l.jsx("input",{type:"tel",className:g("mobile_no","field-input"),value:e.mobile_no,onChange:A=>t("mobile_no",A.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Email Address"}),l.jsx("input",{type:"email",className:g("office_email","field-input"),value:e.office_email,onChange:A=>t("office_email",A.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"🏠"}),l.jsx("h3",{className:"section-title",children:"Origin"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Place of Birth"}),l.jsxs("select",{className:_("place_of_birth"),value:e.place_of_birth,onChange:A=>t("place_of_birth",A.target.value),children:[l.jsx("option",{value:"Hospital",children:"Hospital"}),l.jsx("option",{value:"Home Delivery",children:"Home Delivery"})]})]}),e.place_of_birth==="Hospital"&&l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Hospital Name"}),l.jsx("input",{type:"text",className:g("hospital_name","field-input"),value:e.hospital_name,onChange:A=>t("hospital_name",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Village"}),l.jsx("input",{type:"text",className:g("village1","field-input"),value:e.village1,onChange:A=>t("village1",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:g("district2","field-input"),value:e.district2,onChange:A=>t("district2",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:g("province2","field-input"),value:e.province2,onChange:A=>t("province2",A.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Country"}),l.jsxs("select",{className:_("country2","field-select"),value:e.country2,onChange:A=>t("country2",A.target.value),children:[l.jsx("option",{value:"",children:"Select Country"}),n.map((A,E)=>l.jsx("option",{value:A.name,children:A.name},E))]})]})]})]})]})}),wJ=L.memo(({formData:e,handleChange:t,countries:n,spouseData:i,setSpouseData:o,childrenData:u,setChildrenData:c})=>{const a=()=>{const E={name1:"",crm_no:"",age:""};o([...i,E])},g=(E,D,B)=>{const $=[...i];$[E][D]=B,o($)},_=E=>{const D=i.filter((B,$)=>$!==E);o(D)},S=()=>{const E={children_name:"",spouse_name:"",crm_no:"",age:""};c([...u,E])},N=(E,D,B)=>{const $=[...u];$[E][D]=B,c($)},A=E=>{const D=u.filter((B,$)=>$!==E);c(D)};return l.jsxs("div",{children:[l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"🏥"}),l.jsx("h3",{className:"section-title",children:"Health Declaration"})]}),l.jsx("div",{className:"info-box",children:l.jsx("p",{className:"info-text",children:"To address your health condition better, we request you to provide your family tree details below."})}),l.jsxs("div",{className:"checkbox-wrapper",children:[l.jsx("input",{type:"checkbox",className:"checkbox-input",checked:e.check_the_box_if_you_willing_to_provide_your_family_details,onChange:E=>t("check_the_box_if_you_willing_to_provide_your_family_details",E.target.checked)}),l.jsxs("label",{className:"checkbox-label",children:["Check the box if you are willing to provide your family details ",l.jsx("span",{style:{color:"#ef4444"},children:"*"})]})]}),e.check_the_box_if_you_willing_to_provide_your_family_details&&l.jsxs("div",{className:"parent-details",children:[l.jsx("h4",{className:"parent-details-title",children:"Details of Parents"}),l.jsxs("div",{className:"parent-details-grid",children:[l.jsxs("div",{className:"parent-section",children:[l.jsx("h5",{className:"parent-section-title",children:"Mother's Details"}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Mother's First Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.mothers_full_name,onChange:E=>t("mothers_full_name",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_middle_name,onChange:E=>t("mother_middle_name",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Last Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_last_name,onChange:E=>t("mother_last_name",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Mother's origin village"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_origin_village,onChange:E=>t("mother_origin_village",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_district,onChange:E=>t("mother_district",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:"field-input",value:e.mother_province,onChange:E=>t("mother_province",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Country"}),l.jsx("select",{className:"field-select required",value:e.mother_country,onChange:E=>t("mother_country",E.target.value),children:n.map((E,D)=>l.jsx("option",{value:E.name,children:E.name},D))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Mother Alive"}),l.jsxs("select",{className:"field-select required",value:e.mother_alive,onChange:E=>t("mother_alive",E.target.value),children:[l.jsx("option",{children:"Yes"}),l.jsx("option",{children:"No"})]})]}),e.mother_alive==="Yes"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Mother's Contact No"}),l.jsx("input",{type:"text",className:"field-input",value:e.mothers_contact_no,onChange:E=>t("mothers_contact_no",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Mother's Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.mothers_email,onChange:E=>t("mothers_email",E.target.value)})]})]}):l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Cause of Death"}),l.jsx("input",{type:"text",className:"field-input",value:e.cause_of_death,onChange:E=>t("cause_of_death",E.target.value)})]})]}),l.jsxs("div",{className:"parent-section",children:[l.jsx("h5",{className:"parent-section-title",children:"Father's Details"}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Father's First Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.fathers_full_name,onChange:E=>t("fathers_full_name",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_middle_name,onChange:E=>t("father_middle_name",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Last Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_last_name,onChange:E=>t("father_last_name",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Father's origin village"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_origin_village,onChange:E=>t("father_origin_village",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_district,onChange:E=>t("father_district",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_province,onChange:E=>t("father_province",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Country"}),l.jsxs("select",{className:"field-select required",value:e.father_country,onChange:E=>t("father_country",E.target.value),children:[l.jsx("option",{value:"",children:"Select Country"}),n.map((E,D)=>l.jsx("option",{value:E.name,children:E.name},D))]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Father Alive"}),l.jsxs("select",{className:"field-select required",value:e.father_alive,onChange:E=>t("father_alive",E.target.value),children:[l.jsx("option",{children:"Yes"}),l.jsx("option",{children:"No"})]})]}),e.father_alive==="Yes"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Father's Contact No"}),l.jsx("input",{type:"text",className:"field-input",value:e.fathers_contact_no,onChange:E=>t("fathers_contact_no",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Father's Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.fathers_email,onChange:E=>t("fathers_email",E.target.value)})]})]}):l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Cause of Death"}),l.jsx("input",{type:"text",className:"field-input",value:e.father_cause_of_death,onChange:E=>t("father_cause_of_death",E.target.value)})]})]})]})]}),l.jsx("div",{style:{marginTop:"2rem"},children:l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Marital Status"}),l.jsxs("select",{className:"field-select",style:{maxWidth:"300px"},value:e.marital_status,onChange:E=>t("marital_status",E.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Married"}),l.jsx("option",{children:"Single"})]})]})}),e.marital_status==="Married"&&l.jsxs("div",{style:{marginTop:"2rem"},children:[l.jsxs("div",{className:"table-section",children:[l.jsxs("div",{className:"table-header",children:[l.jsx("h4",{children:"Spouse Details"}),l.jsx("button",{type:"button",onClick:a,className:"btn btn-add-row",style:{background:"#059669",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"+ Add Spouse"})]}),i.length>0&&l.jsx("div",{className:"table-container",style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"CBM ID"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Age"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"center"},children:"Action"})]})}),l.jsx("tbody",{children:i.map((E,D)=>l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:E.name1,onChange:B=>g(D,"name1",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:E.crm_no,onChange:B=>g(D,"crm_no",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:E.age,onChange:B=>g(D,"age",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>_(D),style:{background:"#ef4444",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},children:"Remove"})})]},D))})]})})]}),l.jsxs("div",{className:"table-section",style:{marginTop:"2rem"},children:[l.jsxs("div",{className:"table-header",children:[l.jsx("h4",{children:"Children Details"}),l.jsx("button",{type:"button",onClick:S,className:"btn btn-add-row",style:{background:"#059669",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"+ Add Child"})]}),u.length>0&&l.jsx("div",{className:"table-container",style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Children Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Father's/Mother's Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"CBM ID"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Age"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"center"},children:"Action"})]})}),l.jsx("tbody",{children:u.map((E,D)=>l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:E.children_name,onChange:B=>N(D,"children_name",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:E.spouse_name,onChange:B=>N(D,"spouse_name",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:E.crm_no,onChange:B=>N(D,"crm_no",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:E.age,onChange:B=>N(D,"age",B.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>A(D),style:{background:"#ef4444",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},children:"Remove"})})]},D))})]})})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"❤️"}),l.jsx("h3",{className:"section-title",children:"Basic Health Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Date"}),l.jsx("input",{type:"date",className:"field-input",value:e.BH_date,onChange:E=>t("BH_date",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blome No."}),l.jsx("input",{type:"text",className:"field-input",value:e.blome_no,onChange:E=>t("blome_no",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Age"}),l.jsx("input",{type:"number",className:"field-input",value:e.age,onChange:E=>t("age",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Height"}),l.jsx("input",{type:"text",placeholder:"e.g., 175 cm",className:"field-input",value:e.height,onChange:E=>t("height",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Weight"}),l.jsx("input",{type:"text",placeholder:"e.g., 70 kg",className:"field-input",value:e.weight,onChange:E=>t("weight",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"BMI"}),l.jsx("input",{type:"text",className:"field-input",value:e.bmi,onChange:E=>t("bmi",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Abdominal Circumference"}),l.jsx("input",{type:"text",className:"field-input",value:e.abdominal_circumference,onChange:E=>t("abdominal_circumference",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Hip Circumference"}),l.jsx("input",{type:"text",className:"field-input",value:e.hip_circumference,onChange:E=>t("hip_circumference",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blood Sugar"}),l.jsx("input",{type:"text",className:"field-input",value:e.blood_sugar,onChange:E=>t("blood_sugar",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"BP-Systolic"}),l.jsx("input",{type:"text",className:"field-input",value:e.bp_systolic,onChange:E=>t("bp_systolic",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Diastolic"}),l.jsx("input",{type:"text",className:"field-input",value:e.diastolic,onChange:E=>t("diastolic",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Pulse Rate"}),l.jsx("input",{type:"text",className:"field-input",value:e.pulse_rate,onChange:E=>t("pulse_rate",E.target.value)})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginTop:"1.5rem"},children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Prevailing Medical Conditions/Diseases"}),l.jsx("textarea",{rows:4,className:"field-textarea",value:e.prevailing_medical_conditions,onChange:E=>t("prevailing_medical_conditions",E.target.value)})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Are Surgical Operations Done in the Past"}),l.jsxs("select",{className:"field-select",value:e.are_surgical_operation_done_in_the_past,onChange:E=>t("are_surgical_operation_done_in_the_past",E.target.value),children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]}),e.are_surgical_operation_done_in_the_past==="Yes"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Type of Operation"}),l.jsx("input",{type:"text",className:"field-input",value:e.type_of_operation,onChange:E=>t("type_of_operation",E.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Date"}),l.jsx("input",{type:"date",className:"field-input",value:e.operation_date,onChange:E=>t("operation_date",E.target.value)})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Are You Taking any Medications"}),l.jsxs("select",{className:"field-select",value:e.are_you_taking_medications,onChange:E=>t("are_you_taking_medications",E.target.value),children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]})]})]})]}),l.jsx("input",{type:"hidden",value:JSON.stringify(i),onChange:()=>{},"data-spouse-data":"true"}),l.jsx("input",{type:"hidden",value:JSON.stringify(u),onChange:()=>{},"data-children-data":"true"})]})}),SJ=L.memo(({formData:e,handleChange:t,countries:n,bankData:i,setBankData:o})=>{const u=i.map(_=>te({account_no:_.account_no||_.accountNo||"",bank_name:_.bank_name||_.bankName||"",branch:_.branch||_.branchName||""},_)),c=()=>{const _={account_no:"",bank_name:"",branch:""};o([...i,_]),console.log("Added new bank row:",_)},a=(_,S,N)=>{const A=i.map((E,D)=>D===_?Me(te({},E),{[S]:N}):E);o(A)},g=_=>{o(i.filter((S,N)=>N!==_))};return l.jsxs("div",{children:[l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"🚨"}),l.jsx("h3",{className:"section-title",children:"Emergency Contact Person"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"First Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_first_name,onChange:_=>t("emergency_first_name",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_middle_name,onChange:_=>t("emergency_middle_name",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Last Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_last_name,onChange:_=>t("emergency_last_name",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Gender"}),l.jsxs("select",{className:"field-select",value:e.emergency_gender,onChange:_=>t("emergency_gender",_.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Male"}),l.jsx("option",{children:"Female"}),l.jsx("option",{children:"Other"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Date of Birth"}),l.jsx("input",{type:"date",className:"field-input",value:e.emergency_date_of_birth,onChange:_=>t("emergency_date_of_birth",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blood Group"}),l.jsxs("select",{className:"field-select",value:e.emergency_blood_group,onChange:_=>t("emergency_blood_group",_.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"A+"}),l.jsx("option",{children:"A-"}),l.jsx("option",{children:"B+"}),l.jsx("option",{children:"B-"}),l.jsx("option",{children:"AB+"}),l.jsx("option",{children:"AB-"}),l.jsx("option",{children:"O+"}),l.jsx("option",{children:"O-"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Number"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_number,onChange:_=>t("emergency_number",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Village"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_village,onChange:_=>t("emergency_village",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_district,onChange:_=>t("emergency_district",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:"field-input",value:e.emergency_province,onChange:_=>t("emergency_province",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Country"}),l.jsx("select",{className:"field-select",value:e.emergency_country,onChange:_=>t("emergency_country",_.target.value),children:n.map((_,S)=>l.jsx("option",{value:_.name,children:_.name},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Country Code"}),l.jsx("select",{className:"field-select",value:e.emergency_personal_country_code,onChange:_=>t("emergency_personal_country_code",_.target.value),children:n.map((_,S)=>l.jsxs("option",{value:_.code,children:[_.code," (",_.name,")"]},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Phone No"}),l.jsx("input",{type:"tel",className:"field-input",value:e.emergency_phone_no,onChange:_=>t("emergency_phone_no",_.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Country Code"}),l.jsx("select",{className:"field-select",value:e.emergency_office_country_code,onChange:_=>t("emergency_office_country_code",_.target.value),children:n.map((_,S)=>l.jsxs("option",{value:_.code,children:[_.code," (",_.name,")"]},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Phone No"}),l.jsx("input",{type:"tel",className:"field-input",value:e.emergency_phone_no1,onChange:_=>t("emergency_phone_no1",_.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.emergency_personal_email,onChange:_=>t("emergency_personal_email",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.emergency_office_email,onChange:_=>t("emergency_office_email",_.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"👨‍👩‍👧‍👦"}),l.jsx("h3",{className:"section-title",children:"Next of Kin"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"First Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_firstname,onChange:_=>t("kin_firstname",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Middle Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_middlename,onChange:_=>t("kin_middlename",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Last Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_lastname,onChange:_=>t("kin_lastname",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Gender"}),l.jsxs("select",{className:"field-select",value:e.kin_gender,onChange:_=>t("kin_gender",_.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Male"}),l.jsx("option",{children:"Female"}),l.jsx("option",{children:"Other"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Date of Birth"}),l.jsx("input",{type:"date",className:"field-input",value:e.kin_date_of_birth,onChange:_=>t("kin_date_of_birth",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Blood Group"}),l.jsxs("select",{className:"field-select",value:e.kin_blood_group,onChange:_=>t("kin_blood_group",_.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"A+"}),l.jsx("option",{children:"A-"}),l.jsx("option",{children:"B+"}),l.jsx("option",{children:"B-"}),l.jsx("option",{children:"AB+"}),l.jsx("option",{children:"AB-"}),l.jsx("option",{children:"O+"}),l.jsx("option",{children:"O-"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Number"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_number,onChange:_=>t("kin_number",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Village"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_village,onChange:_=>t("kin_village",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"District"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_district,onChange:_=>t("kin_district",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Province"}),l.jsx("input",{type:"text",className:"field-input",value:e.kin_province,onChange:_=>t("kin_province",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Country"}),l.jsx("select",{className:"field-select",value:e.kin_country,onChange:_=>t("kin_country",_.target.value),children:n.map((_,S)=>l.jsx("option",{value:_.name,children:_.name},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Country Code"}),l.jsx("select",{className:"field-select",value:e.kin_personal_country_code,onChange:_=>t("kin_personal_country_code",_.target.value),children:n.map((_,S)=>l.jsxs("option",{value:_.code,children:[_.code," (",_.name,")"]},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Phone No"}),l.jsx("input",{type:"tel",className:"field-input",value:e.kin_phone_no,onChange:_=>t("kin_phone_no",_.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Country Code"}),l.jsx("select",{className:"field-select",value:e.kin_office_country_code,onChange:_=>t("kin_office_country_code",_.target.value),children:n.map((_,S)=>l.jsxs("option",{value:_.code,children:[_.code," (",_.name,")"]},S))})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Phone No"}),l.jsx("input",{type:"tel",className:"field-input",value:e.kin_office_phone_no,onChange:_=>t("kin_office_phone_no",_.target.value),placeholder:"Enter phone number without country code"})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Personal Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.kin_personal_email,onChange:_=>t("kin_personal_email",_.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Office Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.kin_office_email,onChange:_=>t("kin_office_email",_.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"🏦"}),l.jsx("h3",{className:"section-title",children:"Bank Details"})]}),l.jsx("div",{style:{marginTop:"2rem"},children:l.jsxs("div",{className:"table-section",children:[l.jsxs("div",{className:"table-header",children:[l.jsx("h4",{children:"Bank Details"}),l.jsx("button",{type:"button",onClick:c,className:"btn btn-add-row",style:{background:"#059669",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"+ Add Bank"})]}),u.length>0&&l.jsx("div",{className:"table-container",style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd"},children:"Account Number"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd"},children:"Bank Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd"},children:"Branch Name"}),l.jsx("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"center"},children:"Action"})]})}),l.jsx("tbody",{children:u.map((_,S)=>l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:_.account_no,onChange:N=>a(S,"account_no",N.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:_.bank_name,onChange:N=>a(S,"bank_name",N.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:l.jsx("input",{type:"text",value:_.branch,onChange:N=>a(S,"branch",N.target.value),className:"field-input",style:{width:"100%",margin:0}})}),l.jsx("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>g(S),style:{background:"#ef4444",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},children:"Remove"})})]},S))})]})}),l.jsx("input",{type:"hidden",value:JSON.stringify(i),readOnly:!0,"data-bank-data":"true"})]})})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"📝"}),l.jsx("h3",{className:"section-title",children:"Declaration"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsx("div",{className:"field-wrapper",style:{border:"1px solid #ccc",padding:"10px",borderRadius:"5px",backgroundColor:"#f9f9f9"},children:l.jsx("label",{className:"field-label",children:"I sincerely declare that the information provided in this Health Declaration Form is true and correct to the best of my knowledge. I hereby give permission to Western Medicare Ltd. to use the information provided by me to evaluate my health status and for research purposes as required. I further release Western Medicare Ltd. from any future litigation in relation to the information I have provided."})}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Digital Signature"}),l.jsx("input",{type:"text",className:"field-input",value:e.signature,onChange:_=>t("signature",_.target.value),placeholder:"Type your full name as digital signature"})]})]})]})]})}),jJ=L.memo(({formData:e,handleChange:t})=>l.jsxs("div",{children:[l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"🏢"}),l.jsx("h3",{className:"section-title",children:"Company Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label ",children:"Company"}),l.jsx("input",{type:"text",className:"field-input",value:e.company,onChange:n=>t("company",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label ",children:"Department"}),l.jsx("input",{type:"text",className:"field-input",value:e.department,onChange:n=>t("department",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Company Physical Address"}),l.jsx("input",{type:"text",className:"field-input",value:e.company_physical_address,onChange:n=>t("company_physical_address",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"PO Box Address"}),l.jsx("input",{type:"text",className:"field-input",value:e.po_box_address,onChange:n=>t("po_box_address",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Employee Type (Casual/Permanent)"}),l.jsxs("select",{className:"field-select",value:e.employee_type_emailwebsite,onChange:n=>t("employee_type_emailwebsite",n.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"Casual"}),l.jsx("option",{children:"Permanent"})]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"👨‍💼"}),l.jsx("h3",{className:"section-title",children:"Supervisor Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Supervisor Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.supervisor_name,onChange:n=>t("supervisor_name",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Supervisor Position"}),l.jsx("input",{type:"text",className:"field-input",value:e.supervisor_position,onChange:n=>t("supervisor_position",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Supervisor Contact"}),l.jsx("input",{type:"text",className:"field-input",value:e.supervisor_contact,onChange:n=>t("supervisor_contact",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Supervisor Email"}),l.jsx("input",{type:"email",className:"field-input",value:e.supervisor_email,onChange:n=>t("supervisor_email",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"HR Manager Name"}),l.jsx("input",{type:"text",className:"field-input",value:e.hr_manager_name,onChange:n=>t("hr_manager_name",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"HR Manager Contact"}),l.jsx("input",{type:"text",className:"field-input",value:e.hr_manager_contact,onChange:n=>t("hr_manager_contact",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"HR Manager Email Address"}),l.jsx("input",{type:"email",className:"field-input",value:e.hr_manager_email_address,onChange:n=>t("hr_manager_email_address",n.target.value)})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"⚙️"}),l.jsx("h3",{className:"section-title",children:"Work Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Nature of Work"}),l.jsx("input",{type:"text",className:"field-input",value:e.nature_of_work,onChange:n=>t("nature_of_work",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Workplace Hazards"}),l.jsx("input",{type:"text",className:"field-input",value:e.workplace_hazards,onChange:n=>t("workplace_hazards",n.target.value)})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Work Risk Type"}),l.jsxs("select",{className:"field-select",value:e.work_risk_type,onChange:n=>t("work_risk_type",n.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{children:"High"}),l.jsx("option",{children:"Medium"}),l.jsx("option",{children:"Low"})]})]})]})]}),l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"🚭"}),l.jsx("h3",{className:"section-title",children:"Lifestyle Information"})]}),l.jsxs("div",{className:"fields-grid",children:[l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Alcohol"}),l.jsxs("select",{className:"field-select",value:e.alcohol,onChange:n=>t("alcohol",n.target.value),required:!0,children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Frequency of Taking Alcohol"}),l.jsxs("select",{className:"field-select",value:e.frequency_of_taking_alcohol,onChange:n=>t("frequency_of_taking_alcohol",n.target.value),required:!0,children:[l.jsx("option",{children:"Never"}),l.jsx("option",{children:"Less than Monthly"}),l.jsx("option",{children:"Monthly"}),l.jsx("option",{children:"Weekly"}),l.jsx("option",{children:"almost daily"}),l.jsx("option",{children:"Daily"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Smoking"}),l.jsxs("select",{className:"field-select",value:e.smoking,onChange:n=>t("smoking",n.target.value),required:!0,children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label required",children:"Frequency of Smoking"}),l.jsxs("select",{className:"field-select",value:e.frequency_of_smoking,onChange:n=>t("frequency_of_smoking",n.target.value),required:!0,children:[l.jsx("option",{children:"Never"}),l.jsx("option",{children:"Less than Monthly"}),l.jsx("option",{children:"Monthly"}),l.jsx("option",{children:"Weekly"}),l.jsx("option",{children:"almost daily"}),l.jsx("option",{children:"Daily"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Betel nut"}),l.jsxs("select",{className:"field-select",value:e.beteinut,onChange:n=>t("beteinut",n.target.value),children:[l.jsx("option",{children:"No"}),l.jsx("option",{children:"Yes"})]})]}),l.jsxs("div",{className:"field-wrapper",children:[l.jsx("label",{className:"field-label",children:"Frequency of Betel nut"}),l.jsxs("select",{className:"field-select",value:e.frequency_of_beteinut,onChange:n=>t("frequency_of_beteinut",n.target.value),children:[l.jsx("option",{children:"Never"}),l.jsx("option",{children:"Less than Monthly"}),l.jsx("option",{children:"Monthly"}),l.jsx("option",{children:"Weekly"}),l.jsx("option",{children:"almost daily"}),l.jsx("option",{children:"Daily"})]})]})]})]})]})),CJ=L.memo(({formData:e})=>{var t;return l.jsx("div",{children:l.jsxs("div",{className:"section-card",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-icon",children:"✅"}),l.jsx("h3",{className:"section-title",children:"Application Summary"})]}),l.jsxs("div",{className:"review-summary",children:[l.jsx("h4",{className:"review-section-title",children:"Personal Information"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Full Name:"}),l.jsx("span",{className:"review-value",children:`${e.first_name} ${e.middle_name} ${e.last_name}`.trim()||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Gender:"}),l.jsx("span",{className:"review-value",children:e.gender||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Date of Birth:"}),l.jsx("span",{className:"review-value",children:e.date_of_birth||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Blood Group:"}),l.jsx("span",{className:"review-value",children:e.blood_group||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Country:"}),l.jsx("span",{className:"review-value",children:e.country||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Email:"}),l.jsx("span",{className:"review-value",children:e.personal_email_address||"Not provided"})]})]}),l.jsx("h4",{className:"review-section-title",children:"Health Information"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Age:"}),l.jsx("span",{className:"review-value",children:e.age||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Height:"}),l.jsx("span",{className:"review-value",children:e.height||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Weight:"}),l.jsx("span",{className:"review-value",children:e.weight||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"BMI:"}),l.jsx("span",{className:"review-value",children:e.bmi||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Blood Pressure:"}),l.jsx("span",{className:"review-value",children:`${e.bp_systolic}/${e.diastolic}`.replace("/","")?`${e.bp_systolic}/${e.diastolic}`:"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Blood Sugar:"}),l.jsx("span",{className:"review-value",children:e.blood_sugar||"Not provided"})]})]}),l.jsx("h4",{className:"review-section-title",children:"Emergency Contact"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Emergency Contact:"}),l.jsx("span",{className:"review-value",children:`${e.emergency_first_name} ${e.emergency_middle_name} ${e.emergency_last_name}`.trim()||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Emergency Phone:"}),l.jsx("span",{className:"review-value",children:e.emergency_phone_no?`${e.emergency_personal_country_code} ${e.emergency_phone_no}`:"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Next of Kin:"}),l.jsx("span",{className:"review-value",children:`${e.kin_firstname} ${e.kin_middlename} ${e.kin_lastname}`.trim()||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Kin Phone:"}),l.jsx("span",{className:"review-value",children:e.kin_phone_no?`${e.kin_personal_country_code} ${e.kin_phone_no}`:"Not provided"})]})]}),l.jsx("h4",{className:"review-section-title",children:"Employment Information"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Company:"}),l.jsx("span",{className:"review-value",children:e.company||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Department:"}),l.jsx("span",{className:"review-value",children:e.department||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Supervisor:"}),l.jsx("span",{className:"review-value",children:e.supervisor_name||"Not provided"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Work Risk Type:"}),l.jsx("span",{className:"review-value",children:e.work_risk_type||"Not provided"})]})]}),l.jsx("h4",{className:"review-section-title",children:"Lifestyle Information"}),l.jsxs("div",{className:"review-grid",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Alcohol:"}),l.jsxs("span",{className:"review-value",children:[e.alcohol," - ",e.frequency_of_taking_alcohol]})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Smoking:"}),l.jsxs("span",{className:"review-value",children:[e.smoking," - ",e.frequency_of_smoking]})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Beteinut:"}),l.jsxs("span",{className:"review-value",children:[e.beteinut," - ",e.frequency_of_beteinut]})]})]}),l.jsx("h4",{className:"review-section-title",children:"Bank Information"}),l.jsx("div",{className:"review-grid",children:(t=e==null?void 0:e.bank_details)==null?void 0:t.map((n,i)=>l.jsxs("div",{className:"review-item",children:[l.jsxs("span",{className:"review-label",children:["Bank ",i+1,":"]}),l.jsx("span",{className:"review-value",children:`${n.bank_name} - ${n.branch} - ${n.account_no}`})]},i))}),l.jsxs("div",{className:"review-declaration",children:[l.jsx("h4",{className:"review-section-title",children:"Declaration"}),l.jsxs("div",{className:"declaration-box",children:[l.jsx("p",{children:"I sincerely declare that the information provided in this Health Declaration Form is true and correct to the best of my knowledge. I hereby give permission to Western Medicare Ltd. to use the information provided by me to evaluate my health status and for research purposes as required. I further release Western Medicare Ltd. from any future litigation in relation to the information I have provided."}),l.jsxs("div",{className:"signature-section",children:[l.jsx("div",{className:"signature-line",children:l.jsxs("span",{children:["Name: ",l.jsx("strong",{children:e.signature||"Not provided"})]})}),l.jsx("div",{className:"signature-line",children:l.jsxs("span",{children:["Date: ",l.jsx("strong",{children:new Date().toLocaleDateString()})]})})]})]})]})]})]})})}),TJ=({visible:e,onClose:t,title:n,message:i,type:o})=>{if(!e)return null;const u={success:"#D1FAE5",error:"#FEE2E2"},c={success:"#10B981",error:"#EF4444"};return l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:t,children:l.jsxs("div",{onClick:a=>a.stopPropagation(),style:{maxWidth:"400px",width:"90%",padding:"20px",backgroundColor:u[o]||"white",borderRadius:"8px",border:`2px solid ${c[o]||"black"}`,boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center",fontFamily:"Arial, sans-serif"},children:[l.jsx("h2",{style:{color:c[o],marginBottom:"10px"},children:n}),l.jsx("p",{style:{fontSize:"14px",marginBottom:"20px",color:"#333"},children:i}),l.jsx("button",{onClick:t,style:{cursor:"pointer",backgroundColor:c[o],color:"#fff",border:"none",padding:"10px 20px",borderRadius:"5px",fontWeight:"bold"},children:"Close"})]})})};function kJ(e,t,n,i,o,u){console.log("form data in get print html....",e);const c=t&&t.length>0?`<table>
        <thead>
          <tr>
            <th>Name</th>
            <th>CRM No</th>
            <th>Age</th>
          </tr>
        </thead>
        <tbody>
          ${t.map(N=>`
            <tr>
              <td>${N.name1||""}</td>
              <td>${N.crm_no||""}</td>
              <td>${N.age||""}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>`:'<div class="field-value empty">No spouse details provided.</div>',a=n&&n.length>0?`<table>
        <thead>
          <tr>
            <th>Children Name</th>
            <th>Parent Name</th>
            <th>CRM No</th>
            <th>Age</th>
          </tr>
        </thead>
        <tbody>
          ${n.map(N=>`
            <tr>
              <td>${N.children_name||""}</td>
              <td>${N.spouse_name||""}</td>
              <td>${N.crm_no||""}</td>
              <td>${N.age||""}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>`:'<div class="field-value empty">No children details provided.</div>',g=e!=null&&e.bank_details&&(e==null?void 0:e.bank_details.length)>0?`<table>
        <thead>
          <tr>
            
            <th>Account Number</th>
            <th>Bank Name</th>
            <th>Branch Name</th>
          </tr>
        </thead>
        <tbody>
          ${e==null?void 0:e.bank_details.map(N=>`
            <tr>
             
              <td>${N.account_no||""}</td>
              <td>${N.bank_name||""}</td>
              <td>${N.branch||""}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>`:'<div class="field-value empty">No spouse bank details provided.</div>';Math.floor(Math.random()*1e4).toString().padStart(4,"0");const _=e.mother_alive==="Yes",S=e.father_alive==="Yes";return`
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Card Blo Me Registration - ${e.first_name||""} ${e.last_name||""}</title>
  <style>
    @media print {
      @page {
        margin: 0.5in;
        size: A4;
      }
      body {
        font-family: 'Arial', sans-serif;
        font-size: 12px;
        color: #000;
        margin: 0;
        padding: 0;
      }
      .no-print {
        display: none !important;
      }
    }

    body {
      font-family: 'Arial', sans-serif;
      font-size: 12px;
      line-height: 1.4;
      color: #000;
      margin: 0;
      padding: 20px;
      background: white;
    }

    .section {
      margin-bottom: 25px;
      page-break-inside: avoid;
    }

    .section-title {
      background: #f3f4f6;
      color: #1f2937;
      font-size: 14px;
      font-weight: bold;
      padding: 8px 12px;
      margin-bottom: 12px;
      border-left: 4px solid #2563eb;
    }

    .field-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 12px;
    }

    .field {
      flex: 1;
      min-width: 200px;
    }

    .field-label {
      font-weight: 600;
      color: #374151;
      margin-bottom: 2px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .field-value {
      padding: 6px 8px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      border-radius: 3px;
      min-height: 16px;
      font-size: 12px;
      word-break: break-word;
    }

    .field-value.empty {
      color: #9ca3af;
      font-style: italic;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      margin-bottom: 20px;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      font-size: 12px;
      word-break: break-word;
    }

    th {
      background-color: #f5f5f5;
      text-align: left;
    }

    .card-container {
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
      width: 532px;
      height: 337px;
      padding: 26px;
      position: relative;
      border: 1px solid #ccc;
      border-radius: 10px;
      background-image: url('/assets/erpnext/images/cardbg1.png');
      background-size: 532px 337px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      margin: 40px auto 0 auto;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    .card-decoration {
      position: absolute;
      top: 0;
      right: 0;
      width: 200px;
      height: 200px;
      opacity: 0.7;
      transform: rotate(180deg);
      z-index: 2;
      overflow: hidden;
      box-sizing: border-box;
    }

    .card-decoration img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .logo-section {
      position: absolute;
      top: 26px;
      left: 26px;
      display: flex;
      align-items: center;
      z-index: 2;
    }

    .card-details {
      position: absolute;
      top: 36px;
      left: 140px;
      right: 26px;
      z-index: 2;
      width: 350px;
    }

    .detail-row {
      display: flex;
      margin-bottom: 4px;
    }

    .detail-label {
      width: 128px;
      font-weight: bold;
      font-size: 13px;
      text-align: left;
    }

    .detail-value {
      font-size: 13px;
      text-align: left;
      flex: 1;
      word-break: break-word;
    }

    .profile-section {
      position: absolute;
      top: 120px;
      left: 26px;
      display: flex;
      gap: 20px;
      z-index: 2;
      right: 150px;
    }

    .profile-image {
      width: 124px;
      height: 150px;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .profile-details {
      width: 160px;
      overflow: hidden;
      word-break: break-word;
    }

    .profile-label {
      font-weight: bold;
      font-size: 12px;
      margin-bottom: 1px;
    }

    .profile-value {
      margin-top: 0;
      margin-bottom: 8px;
      font-size: 12px;
      word-break: break-word;
    }

    .qr-code {
      position: absolute;
      bottom: 26px;
      right: 26px;
      width: 100px;
      height: 100px;
      z-index: 2;
      background: #fff;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .qr-code img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .decorative-pattern img {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      width: 430px;
    }

    .declaration-text {
      position: absolute;
      top: 154px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      text-align: center;
      font-style: italic;
      font-size: 10px;
      line-height: 1.4;
    }

    .signature-section {
      background-color: transparent;
      position: absolute;
      top: 316px;
      left: 0;
      right: 0;
      text-align: center;
    }

    .signature-line {
      width: 300px;
      border-top: 1px dotted #000;
      height: 1px;
      margin: 0 auto 5px auto;
    }

    .signature-label {
      font-weight: bold;
      font-size: 14px;
    }

    .contact-info-text {
      width: 401px;
      position: absolute;
      top: 345px;
      left: 95px;
      right: 50px;
      text-align: center;
      font-size: 10px;
      line-height: 1.4;
    }

    .contact-details {
      position: absolute;
      bottom: 20px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 20px;
      font-size: 9px;
    }

    .contact-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .contact-icon {
      width: 16px;
      height: 16px;
    }
  </style>
</head>

<body>
  <!-- Personal Information -->
  <div class="section">
    <div class="section-title">👤 Personal Information</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">First Name</div>
        <div class="field-value">${e.first_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Middle Name</div>
        <div class="field-value">${e.middle_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Last Name</div>
        <div class="field-value">${e.last_name||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Title</div>
        <div class="field-value">${e.title||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Gender</div>
        <div class="field-value">${e.gender||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Date of Birth</div>
        <div class="field-value">${e.date_of_birth||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Blood Group</div>
        <div class="field-value">${e.blood_group||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Resident Status</div>
        <div class="field-value">${e.resident_status||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Current Address -->
  <div class="section">
    <div class="section-title">🏠 Current Address</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Number</div>
        <div class="field-value">${e.portion_nolot_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Village</div>
        <div class="field-value">${e.village||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Town</div>
        <div class="field-value">${e.town||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.district||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.province||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.country||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">PO Box</div>
        <div class="field-value">${e.po_box||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Postal Code</div>
        <div class="field-value">${e.postal_code||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Location</div>
        <div class="field-value">${e.location||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Physical Address -->
  <div class="section">
    <div class="section-title">🏠 Physical Address</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Number</div>
        <div class="field-value">${e.portion_lot_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Street/Village</div>
        <div class="field-value">${e.village_street||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Town</div>
        <div class="field-value">${e.town1||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.district1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.province1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.country1||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">PO Box</div>
        <div class="field-value">${e.po_box1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Postal Code</div>
        <div class="field-value">${e.postal_code1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Location</div>
        <div class="field-value">${e.location1||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Contact Details -->
  <div class="section">
    <div class="section-title">📞 Contact Details</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Personal Phone</div>
        <div class="field-value">${e.personal_country_code||""} ${e.phone_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Phone</div>
        <div class="field-value">${e.office_country_code||""} ${e.mobile_no||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Personal Email</div>
        <div class="field-value">${e.personal_email_address||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Email</div>
        <div class="field-value">${e.office_email||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Origin Information -->
  <div class="section">
    <div class="section-title">👨‍👩‍👧‍👦 Origin</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Place of Birth</div>
        <div class="field-value">${e.place_of_birth||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Hospital Name</div>
        <div class="field-value">${e.hospital_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Village</div>
        <div class="field-value">${e.village1||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.district2||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.province2||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.country2||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Parents Details -->
  <div class="section">
    <div class="section-title">👨‍👩‍👧‍👦 Parents Details</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Mother's First Name</div>
        <div class="field-value">${e.mothers_full_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Mother's Middle Name</div>
        <div class="field-value">${e.mother_middle_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Mother's Last Name</div>
        <div class="field-value">${e.mother_last_name||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Mother's Origin Village</div>
        <div class="field-value">${e.mother_origin_village||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.mother_district||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.mother_province||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.mother_country||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Mother Alive</div>
        <div class="field-value">${e.mother_alive||"Not provided"}</div>
      </div>
      ${_?`
      <div class="field">
        <div class="field-label">Mother Contact No</div>
        <div class="field-value">${e.mothers_contact_no||"Not provided"}</div>
      </div>
      `:""}
    </div>
    ${_?`
    <div class="field-group">
      <div class="field">
        <div class="field-label">Mother Email</div>
        <div class="field-value">${e.mothers_email||"Not provided"}</div>
      </div>
    </div>
    `:`
    <div class="field-group">
      <div class="field">
        <div class="field-label">Cause of Death</div>
        <div class="field-value">${e.cause_of_death||"Not provided"}</div>
      </div>
    </div>
    `}

    <div class="field-group">
      <div class="field">
        <div class="field-label">Father's First Name</div>
        <div class="field-value">${e.fathers_full_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Father's Middle Name</div>
        <div class="field-value">${e.father_middle_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Father's Last Name</div>
        <div class="field-value">${e.father_last_name||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Father's Origin Village</div>
        <div class="field-value">${e.father_origin_village||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">District</div>
        <div class="field-value">${e.father_district||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Province</div>
        <div class="field-value">${e.father_province||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Country</div>
        <div class="field-value">${e.father_country||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Father Alive</div>
        <div class="field-value">${e.father_alive||"Not provided"}</div>
      </div>
      ${S?`
      <div class="field">
        <div class="field-label">Father Contact No</div>
        <div class="field-value">${e.fathers_contact_no||"Not provided"}</div>
      </div>
      `:""}
    </div>
    ${S?`
    <div class="field-group">
      <div class="field">
        <div class="field-label">Father Email</div>
        <div class="field-value">${e.fathers_email||"Not provided"}</div>
      </div>
    </div>
    `:`
    <div class="field-group">
      <div class="field">
        <div class="field-label">Cause of Death</div>
        <div class="field-value">${e.father_cause_of_death||"Not provided"}</div>
      </div>
    </div>
    `}
  </div>

  <!-- Marital Status -->
  <div class="section">
    <div class="section-title">💍 Marital Status</div>
    <div class="field-value">${e.marital_status||"Not provided"}</div>
  </div>

  <!-- Spouse Details -->
  <div class="section">
    <div class="section-title">👫 Spouse Details</div>
    ${c}
  </div>

  <!-- Children Details -->
  <div class="section">
    <div class="section-title">👶 Children Details</div>
    ${a}
  </div>

  <!-- Basic Health Information -->
  <div class="section">
    <div class="section-title">🏥 Basic Health Information</div>
    <div class="field-group">
      <div class="field"><div class="field-label">Date</div><div class="field-value">${e.BH_date||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Blome No.</div><div class="field-value">${e.blome_no||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Age</div><div class="field-value">${e.age||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Height</div><div class="field-value">${e.height||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Weight</div><div class="field-value">${e.weight||"Not provided"}</div></div>
      <div class="field"><div class="field-label">BMI</div><div class="field-value">${e.bmi||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Abdominal Circumference</div><div class="field-value">${e.abdominal_circumference||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Hip Circumference</div><div class="field-value">${e.hip_circumference||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Blood Sugar</div><div class="field-value">${e.blood_sugar||"Not provided"}</div></div>
      <div class="field"><div class="field-label">BP-Systolic</div><div class="field-value">${e.bp_systolic||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Diastolic</div><div class="field-value">${e.diastolic||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Pulse Rate</div><div class="field-value">${e.pulse_rate||"Not provided"}</div></div>
    </div>
    <div class="field-group">
      <div class="field"><div class="field-label">Prevailing Medical Conditions/Diseases</div><div class="field-value">${e.prevailing_medical_conditions||"Not provided"}</div></div>
    </div>
    <div class="field-group">
      <div class="field"><div class="field-label">Are Surgical Operations Done in the Past</div><div class="field-value">${e.are_surgical_operation_done_in_the_past||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Type of Operation</div><div class="field-value">${e.type_of_operation||"Not provided"}</div></div>
      <div class="field"><div class="field-label">Date</div><div class="field-value">${e.operation_date||"Not provided"}</div></div>
    </div>
    <div class="field-group">
      <div class="field"><div class="field-label">Are You Taking any Medications</div><div class="field-value">${e.are_you_taking_medications||"Not provided"}</div></div>
    </div>
  </div>

  <!-- Emergency Contact Person -->
  <div class="section">
    <div class="section-title">🚨 Emergency Contact Person</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">First Name</div>
        <div class="field-value">${e.emergency_first_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Middle Name</div>
        <div class="field-value">${e.emergency_middle_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Last Name</div>
        <div class="field-value">${e.emergency_last_name||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Gender</div>
        <div class="field-value">${e.emergency_gender||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Date of Birth</div>
        <div class="field-value">${e.emergency_date_of_birth||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Blood Group</div>
        <div class="field-value">${e.emergency_blood_group||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Phone Number</div>
        <div class="field-value">${e.emergency_personal_country_code||""} ${e.emergency_phone_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Email</div>
        <div class="field-value">${e.emergency_personal_email||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Office Phone</div>
        <div class="field-value">${e.emergency_office_country_code||""} ${e.emergency_phone_no1||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Email</div>
        <div class="field-value">${e.emergency_office_email||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Next of Kin -->
  <div class="section">
    <div class="section-title">👨‍👩‍👧‍👦 Next of Kin</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">First Name</div>
        <div class="field-value">${e.kin_firstname||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Middle Name</div>
        <div class="field-value">${e.kin_middlename||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Last Name</div>
        <div class="field-value">${e.kin_lastname||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Gender</div>
        <div class="field-value">${e.kin_gender||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Date of Birth</div>
        <div class="field-value">${e.kin_date_of_birth||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Blood Group</div>
        <div class="field-value">${e.kin_blood_group||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Phone No</div>
        <div class="field-value">${e.kin_personal_country_code||""} ${e.kin_phone_no||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Phone</div>
        <div class="field-value">${e.kin_office_country_code||""} ${e.kin_office_phone_no||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Personal Email</div>
        <div class="field-value">${e.kin_personal_email||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Office Email</div>
        <div class="field-value">${e.kin_office_email||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Employment Information -->
  <div class="section">
    <div class="section-title">💼 Employment Information</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Company</div>
        <div class="field-value">${e.company||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Department</div>
        <div class="field-value">${e.department||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Supervisor Name</div>
        <div class="field-value">${e.supervisor_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Supervisor Position</div>
        <div class="field-value">${e.supervisor_position||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Supervisor Contact</div>
        <div class="field-value">${e.supervisor_contact||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Supervisor Email</div>
        <div class="field-value">${e.supervisor_email||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">HR Manager Name</div>
        <div class="field-value">${e.hr_manager_name||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">HR Manager Contact</div>
        <div class="field-value">${e.hr_manager_contact||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">HR Manager Email</div>
        <div class="field-value">${e.hr_manager_email_address||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Nature of Work</div>
        <div class="field-value">${e.nature_of_work||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Workplace Hazards</div>
        <div class="field-value">${e.workplace_hazards||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Work Risk Type</div>
        <div class="field-value">${e.work_risk_type||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Lifestyle Information -->
  <div class="section">
    <div class="section-title">🚭 Lifestyle Information</div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Alcohol</div>
        <div class="field-value">${e.alcohol||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Frequency of Taking Alcohol</div>
        <div class="field-value">${e.frequency_of_taking_alcohol||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Smoking</div>
        <div class="field-value">${e.smoking||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Frequency of Smoking</div>
        <div class="field-value">${e.frequency_of_smoking||"Not provided"}</div>
      </div>
    </div>
    <div class="field-group">
      <div class="field">
        <div class="field-label">Betel Nut</div>
        <div class="field-value">${e.beteinut||"Not provided"}</div>
      </div>
      <div class="field">
        <div class="field-label">Frequency of Betel Nut</div>
        <div class="field-value">${e.frequency_of_beteinut||"Not provided"}</div>
      </div>
    </div>
  </div>

  <!-- Spouse Bank Details -->
  <div class="section">
    <div class="section-title">🏦 Spouse Bank Details</div>
    ${g}
  </div>

  

</body>
</html>
  `}function NJ(e,t,n,i,o,u,c){return`
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Card - ${e.first_name||""} ${e.last_name||""}</title>
  <style>
    @media print {
      @page {
        margin: 0.5in;
        size: A4;
      }
      body {
        font-family: 'Arial', sans-serif;
        font-size: 12px;
        color: #000;
        margin: 0;
        padding: 0;
      }
      .no-print {
        display: none !important;
      }
    }

    body {
      font-family: 'Arial', sans-serif;
      font-size: 12px;
      line-height: 1.4;
      color: #000;
      margin: 0;
      padding: 20px;
      background: white;
    }

    .cards-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      min-height: 100vh;
      flex-wrap: wrap;
    }

    .card-container {
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
      width: 338px;
      height: 213px;
      padding: 10px;
      position: relative;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-image: url('/assets/erpnext/images/cardbg1.png');
      background-size: 338px 213px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    .card-decoration {
      position: absolute;
      top: -10px;
      right: -10px;
      width: 120px;
      height: 120px;
      opacity: 0.3;
      transform: rotate(180deg);
      z-index: 1;
      overflow: hidden;
      box-sizing: border-box;
    }

    .card-decoration img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .logo-section {
      position: absolute;
      top: 15px;
      left: 15px;
      display: flex;
      align-items: center;
      z-index: 2;
    }

    .card-details {
      position: absolute;
      top: 15px;
      left: 120px;
      z-index: 2;
      width: 180px;
    }

    .detail-row {
      display: flex;
      gap: 5px;
      margin-bottom: 2px;
      align-items: baseline;
    }

    .detail-label {
      font-weight: bold;
      font-size: 8px;
      color: #000;
      text-transform: uppercase;
    }

    .detail-value {
      font-size: 8px;
      font-weight: 600;
      color: #000;
    }

    .profile-section {
      position: absolute;
      top: 60px;
      left: 15px;
      right: 80px;
      display: flex;
      gap: 15px;
      z-index: 2;
      align-items: flex-start;
    }

    .profile-image {
      width: 80px;
      height: 100px;
      border-radius: 6px;
      object-fit: cover;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
      border: 2px solid #fff;
      flex-shrink: 0;
    }

    .profile-details {
      flex: 1;
      padding-top: 3px;
    }

    .profile-item {
      margin-bottom: 8px;
    }

    .profile-label {
      font-weight: bold;
      font-size: 8px;
      margin-bottom: 2px;
      color: #000;
      text-transform: uppercase;
      line-height: 1;
    }

    .profile-value {
      margin: 0;
      font-size: 9px;
      color: #000;
      font-weight: 500;
      line-height: 1.2;
    }

    .qr-code {
      position: absolute;
      bottom: 25px;
      right: 25px;
      width: 65px;
      height: 65px;
      z-index: 2;
      background: #fff;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .qr-code img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .decorative-pattern img {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      width: 200px;
    }

    .declaration-text {
      position: absolute;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      width: 85%;
      text-align: center;
      font-style: italic;
      font-size: 6px;
      line-height: 1.2;
    }

    .signature-section {
      background-color: transparent;
      position: absolute;
      top: 160px;
      left: 0;
      right: 0;
      text-align: center;
    }

    .signature-line {
      width: 150px;
      border-top: 1px dotted #000;
      height: 1px;
      margin: 0 auto 3px auto;
    }

    .signature-label {
      font-weight: bold;
      font-size: 7px;
    }

    .contact-info-text {
      width: 280px;
      position: absolute;
      top: 180px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      font-size: 5px;
      line-height: 1.2;
    }

    .contact-details {
      position: absolute;
      bottom: 8px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      font-size: 5px;
      flex-wrap: wrap;
    }

    .contact-item {
      display: flex;
      align-items: center;
      gap: 2px;
    }

    .contact-icon {
      width: 8px;
      height: 8px;
    }

    /* Responsive design for smaller screens */
    @media (max-width: 1200px) {
      .cards-wrapper {
        flex-direction: column;
        gap: 20px;
      }
    }
  </style>
</head>

<body>
  <div class="cards-wrapper">
    <!-- Card front panel -->
    <div class="card-container">
      <div class="card-decoration">
        <img src="/assets/erpnext/images/design1.png" alt="Decorative Pattern" />
      </div>
      <div class="logo-section">
        <img style="height: 30px" src="/assets/erpnext/images/mycard-logo.png" />
      </div>
      <div class="card-details">
        <div class="detail-row">
          <div class="detail-label">CARD NUMBER: </div>
          <div class="detail-value">${c}</div>
        </div>
        <div class="detail-row">
          <div class="detail-label">DATE OF ISSUE: </div>
          <div class="detail-value">${o||""}</div>
        </div>
      </div>
      <div class="profile-section">
        <img class="profile-image" src="${u||""}" alt="Profile Picture" />
        <div class="profile-details">
          <div class="profile-item">
            <p class="profile-label">NAME</p>
            <p class="profile-value">${e.title||""} ${e.first_name||""} ${e.last_name||""}</p>
          </div>
          <div class="profile-item">
            <p class="profile-label">DATE OF BIRTH</p>
            <p class="profile-value">${e.date_of_birth||""}</p>
          </div>
          <div class="profile-item">
            <p class="profile-label">ORIGIN</p>
            <p class="profile-value">${e.country||"Not provided"}</p>
          </div>
          <div class="profile-item">
            <p class="profile-label">NATIONALITY</p>
            <p class="profile-value">${e.country||"Not provided"}</p>
          </div>
        </div>
      </div>
      <div class="qr-code">
        <img src="${e.qr_code||""}" alt="QR Code" />
      </div>
    </div>

    <!-- Card back panel -->
    <div class="card-container">
      <div class="logo-section">
        <img style="height: 25px" src="/assets/erpnext/images/mycard-logo.png" />
      </div>
      <div class="decorative-pattern">
        <img style="transform: scaleX(-1);" src="/assets/erpnext/images/design2.png" alt="Decorative Pattern with Bird" />
      </div>
      <div class="declaration-text">
        I, the undersigned, hereby declare that all information and biometric data provided by me through this personal identification card are true, accurate, and correct to the best of my knowledge. I acknowledge that such information has been duly verified by LOT ICT Solutions Limited.
        <br /><br />
        This card remains the exclusive property of LOT ICT Solutions Limited. In the event that this card is found please notify the below given contact details through email or message.
      </div>
      <div class="signature-section">
        <div class="signature-line"></div>
        <div class="signature-label">Declared owner's Signature</div>
      </div>
      <div class="contact-info-text">
        To access or verify the details given in this Personal Identification Card please contact <a href="mailto:Info@mycardpng.com">Info@mycardpng.com</a> to release the information after obtaining approval from the declared owner of the Card.
      </div>
      <div class="contact-details">
        <div class="contact-item">📞 +675 7190 2850</div>
        <div class="contact-item">📞 +675 8223 4447</div>
        <div class="contact-item">✉️ info@mycardpng.com</div>
        <div class="contact-item">🌐 mycardpng.com</div>
      </div>
    </div>
  </div>

</body>
</html>
  `}const kE=()=>{const[e,t]=L.useState(1),[n,i]=L.useState(!1),[o,u]=L.useState(!1),[c,a]=L.useState({1:!1,2:!1,3:!1,4:!1}),[g,_]=L.useState(!1),[S,N]=L.useState(!1),[A,E]=L.useState(null),[D,B]=L.useState(""),[$,G]=L.useState([]),[W,J]=L.useState([]),[Z,K]=L.useState([]),[le,_e]=L.useState(!1),de=is.get("user_id"),{data:pe}=Ch("User",de),[Oe,He]=L.useState();L.useEffect(()=>{console.log("User deatils............",pe),(pe==null?void 0:pe.is_submitted)===1&&(_(!0),t(5))},[pe]);const We=!!(pe!=null&&pe.card_blo_me_number||pe!=null&&pe.card_blo_me_page_2||pe!=null&&pe.card_blo_me_page_3||pe!=null&&pe.card_blo_me_page_4),st=L.useMemo(()=>({page1:pe==null?void 0:pe.card_blo_me_number,page2:pe==null?void 0:pe.card_blo_me_page_2,page3:pe==null?void 0:pe.card_blo_me_page_3,page4:pe==null?void 0:pe.card_blo_me_page_4}),[pe]),At=Xt=>{const lt=Xt.target.files[0];lt&&(E(lt),B(URL.createObjectURL(lt))),console.log("profile picture changed",A,D)},{upload:vt,reset:ze}=Kj(),{updateDoc:Qe}=U4(),Je=()=>Ht(null,null,function*(){if(A)try{const Xt=ae.name||is.get("user_id"),lt=yield vt(A,{isPrivate:!0,doctype:"User",docname:Xt,fieldname:"user_image"});lt!=null&&lt.file_url&&(B(lt.file_url),E(null),yield Qe("User",Xt,{user_image:lt.file_url}),is.set("user_image",lt.file_url,{expires:30,secure:!0,sameSite:"strict"}),alert("Profile picture uploaded successfully!")),ze()}catch(Xt){throw alert("Upload failed. Please try again."),console.error(Xt),He(Xt),new Error(Xt)}}),Pt=L.useMemo(()=>[{name:"Afghanistan",code:"+93"},{name:"Albania",code:"+355"},{name:"Algeria",code:"+213"},{name:"Andorra",code:"+376"},{name:"Angola",code:"+244"},{name:"Argentina",code:"+54"},{name:"Armenia",code:"+374"},{name:"Australia",code:"+61"},{name:"Austria",code:"+43"},{name:"Azerbaijan",code:"+994"},{name:"Bahrain",code:"+973"},{name:"Bangladesh",code:"+880"},{name:"Belarus",code:"+375"},{name:"Belgium",code:"+32"},{name:"Belize",code:"+501"},{name:"Benin",code:"+229"},{name:"Bhutan",code:"+975"},{name:"Bolivia",code:"+591"},{name:"Bosnia and Herzegovina",code:"+387"},{name:"Botswana",code:"+267"},{name:"Brazil",code:"+55"},{name:"Brunei",code:"+673"},{name:"Bulgaria",code:"+359"},{name:"Burkina Faso",code:"+226"},{name:"Burundi",code:"+257"},{name:"Cambodia",code:"+855"},{name:"Cameroon",code:"+237"},{name:"Canada",code:"+1"},{name:"Cape Verde",code:"+238"},{name:"Chad",code:"+235"},{name:"Chile",code:"+56"},{name:"China",code:"+86"},{name:"Colombia",code:"+57"},{name:"Comoros",code:"+269"},{name:"Congo",code:"+242"},{name:"Costa Rica",code:"+506"},{name:"Croatia",code:"+385"},{name:"Cuba",code:"+53"},{name:"Cyprus",code:"+357"},{name:"Czech Republic",code:"+420"},{name:"Denmark",code:"+45"},{name:"Djibouti",code:"+253"},{name:"Dominican Republic",code:"+1809"},{name:"Ecuador",code:"+593"},{name:"Egypt",code:"+20"},{name:"El Salvador",code:"+503"},{name:"Estonia",code:"+372"},{name:"Ethiopia",code:"+251"},{name:"Fiji",code:"+679"},{name:"Finland",code:"+358"},{name:"France",code:"+33"},{name:"Gabon",code:"+241"},{name:"Gambia",code:"+220"},{name:"Georgia",code:"+995"},{name:"Germany",code:"+49"},{name:"Ghana",code:"+233"},{name:"Greece",code:"+30"},{name:"Guatemala",code:"+502"},{name:"Guinea",code:"+224"},{name:"Guyana",code:"+592"},{name:"Haiti",code:"+509"},{name:"Honduras",code:"+504"},{name:"Hungary",code:"+36"},{name:"Iceland",code:"+354"},{name:"India",code:"+91"},{name:"Indonesia",code:"+62"},{name:"Iran",code:"+98"},{name:"Iraq",code:"+964"},{name:"Ireland",code:"+353"},{name:"Israel",code:"+972"},{name:"Italy",code:"+39"},{name:"Jamaica",code:"+1876"},{name:"Japan",code:"+81"},{name:"Jordan",code:"+962"},{name:"Kazakhstan",code:"+7"},{name:"Kenya",code:"+254"},{name:"Kuwait",code:"+965"},{name:"Kyrgyzstan",code:"+996"},{name:"Laos",code:"+856"},{name:"Latvia",code:"+371"},{name:"Lebanon",code:"+961"},{name:"Lesotho",code:"+266"},{name:"Liberia",code:"+231"},{name:"Libya",code:"+218"},{name:"Lithuania",code:"+370"},{name:"Luxembourg",code:"+352"},{name:"Madagascar",code:"+261"},{name:"Malawi",code:"+265"},{name:"Malaysia",code:"+60"},{name:"Maldives",code:"+960"},{name:"Mali",code:"+223"},{name:"Malta",code:"+356"},{name:"Mauritania",code:"+222"},{name:"Mauritius",code:"+230"},{name:"Mexico",code:"+52"},{name:"Moldova",code:"+373"},{name:"Monaco",code:"+377"},{name:"Mongolia",code:"+976"},{name:"Montenegro",code:"+382"},{name:"Morocco",code:"+212"},{name:"Mozambique",code:"+258"},{name:"Myanmar",code:"+95"},{name:"Namibia",code:"+264"},{name:"Nepal",code:"+977"},{name:"Netherlands",code:"+31"},{name:"New Zealand",code:"+64"},{name:"Nicaragua",code:"+505"},{name:"Niger",code:"+227"},{name:"Nigeria",code:"+234"},{name:"North Korea",code:"+850"},{name:"Norway",code:"+47"},{name:"Oman",code:"+968"},{name:"Pakistan",code:"+92"},{name:"Panama",code:"+507"},{name:"Papua New Guinea",code:"+675"},{name:"Paraguay",code:"+595"},{name:"Peru",code:"+51"},{name:"Philippines",code:"+63"},{name:"Poland",code:"+48"},{name:"Portugal",code:"+351"},{name:"Qatar",code:"+974"},{name:"Romania",code:"+40"},{name:"Russia",code:"+7"},{name:"Rwanda",code:"+250"},{name:"Saudi Arabia",code:"+966"},{name:"Senegal",code:"+221"},{name:"Serbia",code:"+381"},{name:"Singapore",code:"+65"},{name:"Slovakia",code:"+421"},{name:"Slovenia",code:"+386"},{name:"Solomon Islands",code:"+677"},{name:"Somalia",code:"+252"},{name:"South Africa",code:"+27"},{name:"South Korea",code:"+82"},{name:"Spain",code:"+34"},{name:"Sri Lanka",code:"+94"},{name:"Sudan",code:"+249"},{name:"Suriname",code:"+597"},{name:"Sweden",code:"+46"},{name:"Switzerland",code:"+41"},{name:"Syria",code:"+963"},{name:"Taiwan",code:"+886"},{name:"Tajikistan",code:"+992"},{name:"Tanzania",code:"+255"},{name:"Thailand",code:"+66"},{name:"Togo",code:"+228"},{name:"Tunisia",code:"+216"},{name:"Turkey",code:"+90"},{name:"Turkmenistan",code:"+993"},{name:"Uganda",code:"+256"},{name:"Ukraine",code:"+380"},{name:"United Arab Emirates",code:"+971"},{name:"United Kingdom",code:"+44"},{name:"United States",code:"+1"},{name:"Uruguay",code:"+598"},{name:"Uzbekistan",code:"+998"},{name:"Vanuatu",code:"+678"},{name:"Venezuela",code:"+58"},{name:"Vietnam",code:"+84"},{name:"Yemen",code:"+967"},{name:"Zambia",code:"+260"},{name:"Zimbabwe",code:"+263"}],[]),[fe,Xe]=L.useState(!1),[tt,Ae]=L.useState(""),[ot,ct]=L.useState(""),[ut,tn]=L.useState("success"),Ge=is.get("user_image"),[Ye,zt]=L.useState(null),[Bt,It]=L.useState(null),[Lt,nn]=L.useState({}),_n=["title","first_name","last_name","gender","date_of_birth","blood_group","resident_status"],Xn=()=>{const Xt={};return _n.forEach(lt=>{(!Q[lt]||typeof Q[lt]=="string"&&!Q[lt].trim())&&(Xt[lt]=!0)}),nn(Xt),Object.keys(Xt).length===0},Gn=Rh(),{data:gn,loading:ln,error:Ue}=hd(Xt=>Xt.cardBloMePage1),{data:ge,loading:ve,error:ht}=hd(Xt=>Xt.cardBloMePage2),{data:ft,loading:qt,error:cn}=hd(Xt=>Xt.cardBloMePage3),{data:Qt,loading:xt,error:je}=hd(Xt=>Xt.cardBloMePage4),{currentUser:ae,loading:ie,error:be}=hd(Xt=>Xt.user),[ke,Re]=L.useState({page1:null,page2:null,page3:null,page4:null});L.useMemo(()=>({page1:ae==null?void 0:ae.card_blo_me_number,page2:ae==null?void 0:ae.card_blo_me_page_2,page3:ae==null?void 0:ae.card_blo_me_page_3,page4:ae==null?void 0:ae.card_blo_me_page_4}),[ae]),L.useEffect(()=>{console.log("Current User from Redux:",ae),console.log("Has Existing Documents:",We),We&&st.page1&&Gn(lx(st.page1)),We&&st.page2&&Gn(Jb(st.page2)),We&&st.page3&&Gn(ev(st.page3)),We&&st.page4&&Gn(tv(st.page4))},[ae,We,st,Gn]),L.useEffect(()=>{Re(Xt=>Me(te({},Xt),{page1:gn,page2:ge,page3:ft,page4:Qt})),gn&&It(gn)},[gn,ge,ft,Qt]),L.useEffect(()=>{ge&&(ge.table_31&&G(ge.table_31),ge.table_32&&J(ge.table_32))},[ge]),L.useEffect(()=>{ft&&ft.bank_details&&K(ft.bank_details)},[ft]);const[Q,nt]=L.useState({naming_series:"CBM-",status:"Drafted",inactive_date:"",inactive_reason:"",title:"",first_name:"",middle_name:"",last_name:"",gender:"",date_of_birth:"",blood_group:"",resident_status:"",portion_nolot_no:"",village:"",town:"",district:"",province:"",country:"Papua New Guinea",po_box:"",postal_code:"",portion_lot_no:"",village_street:"",town1:"",same_as_current:!1,district1:"",province1:"",country1:"Papua New Guinea",po_box1:"",postal_code1:"",personal_country_code:"+675",phone_no:"",personal_email_address:"",office_country_code:"+675",mobile_no:"",office_email:"",place_of_birth:"Hospital",hospital_name:"",village1:"",district2:"",province2:"",qr_code:"",country2:"",location:"",location1:"",check_the_box_if_you_willing_to_provide_your_family_details:!1,mothers_full_name:"",mother_middle_name:"",mother_last_name:"",mother_origin_village:"",mother_district:"",mother_province:"",mother_country:"Papua New Guinea",mother_alive:"Yes",mothers_contact_no:"",mothers_email:"",cause_of_death:"",fathers_full_name:"",father_middle_name:"",father_last_name:"",father_origin_village:"",father_district:"",father_province:"",father_country:"Papua New Guinea",father_alive:"Yes",fathers_contact_no:"",fathers_email:"",father_cause_of_death:"",marital_status:"Married",date:new Date().toISOString().split("T")[0],age:"",height:"",weight:"",bmi:"",abdominal_circumference:"",hip_circumference:"",bp_systolic:"",diastolic:"",pulse_rate:"",blood_sugar:"",prevailing_medical_conditions:"",are_surgical_operation_done_in_the_past:"No",type_of_operation:"",operation_date:"",are_you_taking_medications:"No",blo_me_no:"",emergency_first_name:"",emergency_middle_name:"",emergency_last_name:"",emergency_gender:"",emergency_date_of_birth:"",emergency_blood_group:"",emergency_number:"",emergency_village:"",emergency_district:"",emergency_province:"",emergency_country:"Papua New Guinea",emergency_personal_country_code:"+675",emergency_phone_no:"",emergency_office_country_code:"+675",emergency_phone_no1:"",emergency_personal_email:"",emergency_office_email:"",kin_firstname:"",kin_middlename:"",kin_lastname:"",kin_gender:"",kin_date_of_birth:"",kin_blood_group:"",kin_number:"",kin_village:"",kin_district:"",kin_province:"",kin_country:"Papua New Guinea",kin_personal_country_code:"+675",kin_phone_no:"",kin_office_country_code:"+675",kin_office_phone_no:"",kin_personal_email:"",kin_office_email:"",bank_name:"",branch:"",BH_date:"",blome_no:"",account_no:"",declaration_name:"",signature:"",company:"",department:"",company_physical_address:"",po_box_address:"",employee_type_emailwebsite:"",supervisor_name:"",supervisor_position:"",supervisor_contact:"",supervisor_email:"",hr_manager_name:"",hr_manager_contact:"",hr_manager_email_address:"",nature_of_work:"",workplace_hazards:"",work_risk_type:"",alcohol:"No",frequency_of_taking_alcohol:"Never",smoking:"No",frequency_of_smoking:"Never",beteinut:"No",frequency_of_beteinut:"Never"}),et=L.useCallback((Xt,lt)=>{nt(Ri=>Me(te({},Ri),{[Xt]:lt}))},[]);L.useEffect(()=>{(gn||ge||ft||Qt)&&(()=>{let lt=te({},Q);gn&&(lt=Me(te({},lt),{first_name:gn.first_name||"",middle_name:gn.middle_name||"",last_name:gn.last_name||"",gender:gn.gender||"",date_of_birth:gn.date_of_birth||"",blood_group:gn.blood_group||"",district:gn.district||"",district1:gn.district1||"",mobile_no:gn.mobile_no||"",hospital_name:gn.hospital_name||"",district2:gn.district2||"",location:gn.location||"",qr_code:gn.qr_code||"",title:gn.title||"",resident_status:gn.resident_status||"",province:gn.province||"",province1:gn.province1||"",province2:gn.province2||"",postal_code:gn.postal_code||"",postal_code1:gn.postal_code1||"",country:gn.country||"Papua New Guinea",country1:gn.country1||"Papua New Guinea",country2:gn.country2||"Papua New Guinea",office_contact_no_country_code:gn.office_contact_no_country_code?`+${gn.office_contact_no_country_code}`:"+675",personal_contact_no_country_code:gn.personal_contact_no_country_code?`+${gn.personal_contact_no_country_code}`:"+675",personal_email_address:gn.personal_email_address||"",phone_no:gn.phone_no||"",town:gn.town||"",town1:gn.town1||"",village:gn.village||"",village_street:gn.village_street||"",portion_nolot_no:gn.portion_nolot_no||"",portion_lot_no:gn.portion_lot_no||"",po_box:gn.po_box||"",po_box1:gn.po_box1||"",office_email:gn.office_email||"",place_of_birth:gn.place_of_birth||"Hospital",village1:gn.village1||"",location1:gn.location1||""})),ge&&(lt=Me(te({},lt),{check_the_box_if_you_willing_to_provide_your_family_details:ge.check_the_box_if_you_willing_to_provide_your_family_details||!1,mothers_full_name:ge.mothers_full_name||"",mother_middle_name:ge.middle_name||"",mother_last_name:ge.last_name||"",mother_origin_village:ge.mother_origin_village||"",mother_district:ge.district||"",mother_province:ge.province||"",mother_country:ge.country||"Papua New Guinea",mother_alive:ge.mother_alive||"Yes",mothers_contact_no:ge.mothers_contact_no||"",mothers_email:ge.mothers_email||"",cause_of_death:ge.cause_of_death||"",fathers_full_name:ge.fathers_full_name||"",father_middle_name:ge.middle_name_1||"",father_last_name:ge.last_name_1||"",father_origin_village:ge.father_origin_village||"",father_district:ge.district1||"",father_province:ge.province1||"",father_country:ge.country1||"Papua New Guinea",father_alive:ge.father_alive||"Yes",fathers_contact_no:ge.fathers_contact_no||"",fathers_email:ge.fathers_email||"",father_cause_of_death:ge.cause_ofdeath||"",marital_status:ge.marital_status||"Married",date:ge.date||new Date().toISOString().split("T")[0],age:ge.age?ge.age.toString():"",height:ge.height||"",weight:ge.weight||"",bmi:ge.bmi||"",abdominal_circumference:ge.abdominal_circumference||"",hip_circumference:ge.hip_circumference||"",bp_systolic:ge.bp_systolic||"",diastolic:ge.diastolic||"",pulse_rate:ge.pulse_rate||"",blood_sugar:ge.blood_sugar||"",prevailing_medical_conditions:ge.prevailing_medical_conditionsdiseases||"",are_surgical_operation_done_in_the_past:ge.are_surgical_operation_done_in_the_past||"No",type_of_operation:ge.type_of_operation||"",operation_date:ge.date1||"",are_you_taking_medications:ge.are_you_taking_any_medications_describe||"No",blo_me_no:ge.blo_me_no||""})),ft&&(lt=Me(te({},lt),{bank_details:ft.bank_details||[],emergency_first_name:ft.emergency_first_name||"",emergency_middle_name:ft.emergency_middle_name||"",emergency_last_name:ft.emergency_last_name||"",emergency_gender:ft.emergency_gender||"",emergency_date_of_birth:ft.emergency_date_of_birth||"",emergency_blood_group:ft.emergency_blood_group||"",emergency_number:ft.emergency_number||"",emergency_village:ft.emergency_village||"",emergency_district:ft.emergency_district||"",emergency_province:ft.emergency_province||"",emergency_country:ft.emergency_country||"Papua New Guinea",emergency_personal_country_code:ft.emergency_personal_country_code||"+675",emergency_phone_no:ft.emergency_phone_no||"",emergency_office_country_code:ft.emergency_office_country_code||"+675",emergency_phone_no1:ft.emergency_phone_no1||"",emergency_personal_email:ft.emergency_personal_email||"",emergency_office_email:ft.emergency_office_email||"",kin_firstname:ft.kin_firstname||"",kin_middlename:ft.kin_middlename||"",kin_lastname:ft.kin_lastname||"",kin_gender:ft.kin_gender||"",kin_date_of_birth:ft.kin_date_of_birth||"",kin_blood_group:ft.kin_blood_group||"",kin_number:ft.kin_number||"",kin_village:ft.kin_village||"",kin_district:ft.kin_district||"",kin_province:ft.kin_province||"",kin_country:ft.kin_country||"Papua New Guinea",kin_personal_country_code:ft.kin_personal_country_code||"+675",kin_phone_no:ft.kin_phone_no||"",kin_office_country_code:ft.kin_office_country_code||"+675",kin_office_phone_no:ft.kin_office_phone_no||"",kin_personal_email:ft.kin_personal_email||"",kin_office_email:ft.kin_office_email||"",declaration_name:ft.declaration_name||"",signature:ft.signature||""})),Qt&&(lt=Me(te({},lt),{company:Qt.company||"",department:Qt.department||"",company_physical_address:Qt.company_physical_address||"",po_box_address:Qt.po_box_address||"",employee_type_emailwebsite:Qt.employee_type_emailwebsite||"",supervisor_name:Qt.supervisor_name||"",supervisor_position:Qt.supervisor_position||"",supervisor_contact:Qt.supervisor_contact||"",supervisor_email:Qt.supervisor_email||"",hr_manager_name:Qt.hr_manager_name||"",hr_manager_contact:Qt.hr_manager_contact||"",hr_manager_email_address:Qt.hr_manager_email_address||"",nature_of_work:Qt.nature_of_work||"",workplace_hazards:Qt.workplace_hazards||"",work_risk_type:Qt.work_risk_type||"",alcohol:Qt.alcohol||"No",frequency_of_taking_alcohol:Qt.frequency_of_taking_alcohol||"Never",smoking:Qt.smoking||"No",frequency_of_smoking:Qt.frequency_of_smoking||"Never",beteinut:Qt.beteinut||"No",frequency_of_beteinut:Qt.frequency_of_beteinut||"Never"})),nt(lt),console.log("Form data populated from existing documents:",gn,ge,ft,Qt,lt)})()},[gn,ge,ft,Qt]);const Tt=L.useMemo(()=>[{id:1,name:"Personal Info",icon:"👤"},{id:2,name:"Health Declaration",icon:"🏥"},{id:3,name:"Emergency & Bank",icon:"📋"},{id:4,name:"Employment & Lifestyle",icon:"💼"},{id:5,name:"Final Review",icon:"✅"}],[]),Gt=L.useCallback(Xt=>{var lt,Ri,li;switch(Xt){case 1:return((lt=Q==null?void 0:Q.title)==null?void 0:lt.trim())&&((Ri=Q==null?void 0:Q.first_name)==null?void 0:Ri.trim())&&((li=Q==null?void 0:Q.last_name)==null?void 0:li.trim())&&(Q==null?void 0:Q.gender)&&(Q==null?void 0:Q.date_of_birth)&&(Q==null?void 0:Q.resident_status);case 2:return Q.check_the_box_if_you_willing_to_provide_your_family_details?Q.mother_alive&&Q.father_alive&&Q.marital_status:Q.marital_status;case 3:return Q.signature.trim();case 4:return Q.alcohol&&Q.smoking&&Q.frequency_of_smoking&&Q.frequency_of_taking_alcohol;default:return!0}},[Q]),Ot=(Xt,lt)=>{localStorage.setItem(`cardBloMeForm${Xt}`,JSON.stringify(lt))},bn=L.useCallback(()=>Ht(null,null,function*(){if(!Gt(e)||!Xn())return;const Xt=Me(te({},Q),{spouseData:$,childrenData:W,bankData:Z});try{i(!0),Ot(e,Xt),yield new Promise(lt=>setTimeout(lt,1500)),a(lt=>Me(te({},lt),{[e]:!0})),Ha.success(`Form ${e} saved successfully!`),e<5&&t(lt=>Math.min(5,lt+1))}catch(lt){Ha.error("Error saving form. Please try again.")}finally{i(!1)}}),[e,Q,$,Z,W,Gt]),Tn=L.useCallback(Xt=>Ht(null,null,function*(){Xt.preventDefault();try{u(!0);const lt=We;lt?(console.log("Updating existing documents..."),yield dt()):(console.log("Creating new documents..."),yield Vt());const Ri={is_submitted:1},li=is.get("user_id"),Wi=yield fetch(`/api/resource/User/${li}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Ri)});Ae("Application Processed"),ct(lt?"Application Updated Successfully":"Application Created Successfully"),tn("success"),Xe(!0),_(!0)}catch(lt){throw console.error("Submission error:",lt),alert(lt),He(`Error ${We?"updating":"creating"} application: ${lt.message}`),new Error(`Error ${We?"updating":"creating"} application: ${lt.message}`)}finally{u(!1)}}),[Q,We]),dt=()=>Ht(null,null,function*(){const Xt={naming_series:Q.naming_series,status:Q.status,inactive_date:Q.inactive_date,inactive_reason:Q.inactive_reason,title:Q.title,first_name:Q.first_name,middle_name:Q.middle_name,last_name:Q.last_name,gender:Q.gender,date_of_birth:Q.date_of_birth,blood_group:Q.blood_group,resident_status:Q.resident_status,portion_nolot_no:Q.portion_nolot_no,village:Q.village,town:Q.town,district:Q.district,province:Q.province,country:Q.country,po_box:Q.po_box,postal_code:Q.postal_code,portion_lot_no:Q.portion_lot_no,village_street:Q.village_street,town1:Q.town1,district1:Q.district1,province1:Q.province1,country1:Q.country1,po_box1:Q.po_box1,postal_code1:Q.postal_code1,personal_contact_no_country_code:parseInt(Q.personal_country_code.replace("+",""),10),phone_no:Q.phone_no,personal_email_address:Q.personal_email_address,office_contact_no_country_code:parseInt(Q.office_country_code.replace("+",""),10),mobile_no:Q.mobile_no,office_email:Q.office_email,place_of_birth:Q.place_of_birth,hospital_name:Q.hospital_name,village1:Q.village1,district2:Q.district2,province2:Q.province2,country2:Q.country2,location:Q.location,location1:Q.location1},lt=yield fetch(`/api/resource/Card Blo Me Page1/${st.page1}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Xt)});if(!lt.ok)throw He(`Failed to update Page1: ${lt.statusText}`),new Error(`Failed to update Page1: ${lt.statusText}`);const Ri=Me(te({from1:st.page1,check_the_box_if_you_willing_to_provide_your_family_details:Q.check_the_box_if_you_willing_to_provide_your_family_details?1:0,mothers_full_name:Q.mothers_full_name,middle_name:Q.mother_middle_name,last_name:Q.mother_last_name,mother_origin_village:Q.mother_origin_village,district:Q.mother_district,province:Q.mother_province,country:Q.mother_country,mother_alive:Q.mother_alive,mothers_contact_no:Q.mothers_contact_no,mothers_email:Q.mothers_email,cause_of_death:Q.cause_of_death,fathers_full_name:Q.fathers_full_name,middle_name_1:Q.father_middle_name,last_name_1:Q.father_last_name,father_origin_village:Q.father_origin_village,district1:Q.father_district,province1:Q.father_province,country1:Q.father_country,father_alive:Q.father_alive,fathers_contact_no:Q.fathers_contact_no,fathers_email:Q.fathers_email,cause_ofdeath:Q.father_cause_of_death,marital_status:Q.marital_status},Q.marital_status==="Married"&&{table_31:$,table_32:W}),{date:Q.date,age:parseInt(Q.age)||0,height:Q.height,weight:Q.weight,bmi:Q.bmi,abdominal_circumference:Q.abdominal_circumference,hip_circumference:Q.hip_circumference,bp_systolic:Q.bp_systolic,diastolic:Q.diastolic,pulse_rate:Q.pulse_rate,blood_sugar:Q.blood_sugar,prevailing_medical_conditionsdiseases:Q.prevailing_medical_conditions,are_surgical_operation_done_in_the_past:Q.are_surgical_operation_done_in_the_past,type_of_operation:Q.type_of_operation,date1:Q.operation_date,are_you_taking_any_medications_describe:Q.are_you_taking_medications,blo_me_no:Q.blo_me_no}),li=yield fetch(`/api/resource/Card Blo Me Page2/${st.page2}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Ri)});if(!li.ok)throw He(`Failed to update Page2: ${li.statusText}`),new Error(`Failed to update Page2: ${li.statusText}`);console.log("bankData before update call:",Z),yield Ct(),yield Wt()}),Ct=()=>Ht(null,null,function*(){let Xt=localStorage.getItem("cardBloMeForm3");const lt={from2:st.page2,from1:st.page1,bank_details:Xt?JSON.parse(Xt).bankData:Z,emergency_first_name:Q.emergency_first_name,emergency_middle_name:Q.emergency_middle_name,emergency_last_name:Q.emergency_last_name,emergency_gender:Q.emergency_gender,emergency_date_of_birth:Q.emergency_date_of_birth,emergency_blood_group:Q.emergency_blood_group,emergency_number:Q.emergency_number,emergency_village:Q.emergency_village,emergency_district:Q.emergency_district,emergency_province:Q.emergency_province,emergency_country:Q.emergency_country,emergency_personal_country_code:Q.emergency_personal_country_code,emergency_phone_no:Q.emergency_phone_no,emergency_office_country_code:Q.emergency_office_country_code,emergency_phone_no1:Q.emergency_phone_no1,emergency_personal_email:Q.emergency_personal_email,emergency_office_email:Q.emergency_office_email,kin_firstname:Q.kin_firstname,kin_middlename:Q.kin_middlename,kin_lastname:Q.kin_lastname,kin_gender:Q.kin_gender,kin_date_of_birth:Q.kin_date_of_birth,kin_blood_group:Q.kin_blood_group,kin_number:Q.kin_number,kin_village:Q.kin_village,kin_district:Q.kin_district,kin_province:Q.kin_province,kin_country:Q.kin_country,kin_personal_country_code:Q.kin_personal_country_code,kin_phone_no:Q.kin_phone_no,kin_office_country_code:Q.kin_office_country_code,kin_office_phone_no:Q.kin_office_phone_no,kin_personal_email:Q.kin_personal_email,kin_office_email:Q.kin_office_email,declaration_name:Q.declaration_name,signature:Q.signature};console.log("form data..............",Z);const Ri=yield fetch(`/api/resource/Card Blo Me Page3/${st.page3}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(lt)});let li=yield Ri.json();if(console.log("Update Page3 response:",li),!Ri.ok)throw He(`Failed to update Page3: ${Ri.statusText}`),new Error(`Failed to update Page3: ${Ri.statusText}`)}),Wt=()=>Ht(null,null,function*(){const Xt={from3:st.page3,from1:st.page1,company:Q.company,department:Q.department,company_physical_address:Q.company_physical_address,po_box_address:Q.po_box_address,employee_type_emailwebsite:Q.employee_type_emailwebsite,supervisor_name:Q.supervisor_name,supervisor_position:Q.supervisor_position,supervisor_contact:Q.supervisor_contact,supervisor_email:Q.supervisor_email,hr_manager_contact:Q.hr_manager_contact,hr_manager_email_address:Q.hr_manager_email_address,nature_of_work:Q.nature_of_work,workplace_hazards:Q.workplace_hazards,work_risk_type:Q.work_risk_type,alcohol:Q.alcohol,frequency_of_taking_alcohol:Q.frequency_of_taking_alcohol,smoking:Q.smoking,frequency_of_smoking:Q.frequency_of_smoking,beteinut:Q.beteinut,frequency_of_beteinut:Q.frequency_of_beteinut},lt=yield fetch(`/api/resource/Card Blo Me Page 4/${st.page4}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Xt)});if(!lt.ok)throw He(`Failed to update Page4: ${lt.statusText}`),new Error(`Failed to update Page4: ${lt.statusText}`)}),Vt=()=>Ht(null,null,function*(){const Xt=localStorage.getItem("cardBloMeForm1"),lt=JSON.parse(Xt);console.warn("PArsed Data",lt);const Ri={naming_series:Q.naming_series,status:Q.status,inactive_date:Q.inactive_date,inactive_reason:Q.inactive_reason,title:Q.title,first_name:Q.first_name,middle_name:Q.middle_name,last_name:Q.last_name,gender:Q.gender,date_of_birth:Q.date_of_birth,blood_group:Q.blood_group,resident_status:Q.resident_status,portion_nolot_no:Q.portion_nolot_no,village:Q.village,town:Q.town,district:Q.district,province:Q.province,country:Q.country,po_box:Q.po_box,postal_code:Q.postal_code,portion_lot_no:Q.portion_lot_no,village_street:Q.village_street,town1:Q.town1,district1:Q.district1,province1:Q.province1,country1:Q.country1,po_box1:Q.po_box1,postal_code1:Q.postal_code1,personal_contact_no_country_code:parseInt(Q.personal_country_code.replace("+",""),10),phone_no:Q.phone_no,personal_email_address:Q.personal_email_address,office_contact_no_country_code:parseInt(Q.office_country_code.replace("+",""),10),mobile_no:Q.mobile_no,office_email:Q.office_email,place_of_birth:Q.place_of_birth,hospital_name:Q.hospital_name,village1:Q.village1,district2:Q.district2,province2:Q.province2,country2:Q.country2,location:Q.location,location1:Q.location1},li=is.get("user_id"),Wi=yield fetch("/api/resource/Card Blo Me Page1",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Ri)});if(!Wi.ok){const ti=yield Wi.text();throw He(`Step 1 failed: ${Wi.status} ${Wi.statusText} - ${ti}`),new Error(`Step 1 failed: ${Wi.status} ${Wi.statusText} - ${ti}`)}const us=yield Wi.json(),sn=us.data.name;console.log("Result from Step 1:",sn);const ei=Me(te({from1:sn,check_the_box_if_you_willing_to_provide_your_family_details:Q.check_the_box_if_you_willing_to_provide_your_family_details?1:0,mothers_full_name:Q.mothers_full_name,middle_name:Q.mother_middle_name,last_name:Q.mother_last_name,mother_origin_village:Q.mother_origin_village,district:Q.mother_district,province:Q.mother_province,country:Q.mother_country,mother_alive:Q.mother_alive,mothers_contact_no:Q.mothers_contact_no,mothers_email:Q.mothers_email,cause_of_death:Q.cause_of_death,fathers_full_name:Q.fathers_full_name,middle_name_1:Q.father_middle_name,last_name_1:Q.father_last_name,father_origin_village:Q.father_origin_village,district1:Q.father_district,province1:Q.father_province,country1:Q.father_country,father_alive:Q.father_alive,fathers_contact_no:Q.fathers_contact_no,fathers_email:Q.fathers_email,cause_ofdeath:Q.father_cause_of_death,marital_status:Q.marital_status},Q.marital_status==="Married"&&{table_31:$,table_32:W}),{date:Q.date,age:parseInt(Q.age)||0,height:Q.height,weight:Q.weight,bmi:Q.bmi,abdominal_circumference:Q.abdominal_circumference,hip_circumference:Q.hip_circumference,bp_systolic:Q.bp_systolic,diastolic:Q.diastolic,pulse_rate:Q.pulse_rate,blood_sugar:Q.blood_sugar,prevailing_medical_conditionsdiseases:Q.prevailing_medical_conditions,are_surgical_operation_done_in_the_past:Q.are_surgical_operation_done_in_the_past,type_of_operation:Q.type_of_operation,date1:Q.operation_date,are_you_taking_any_medications_describe:Q.are_you_taking_medications,blo_me_no:Q.blo_me_no}),On=yield fetch("/api/resource/Card Blo Me Page2",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(ei)});if(!On.ok){const ti=yield On.text();throw He(`Step 2 failed: ${On.status} ${On.statusText} - ${ti}`),new Error(`Step 2 failed: ${On.status} ${On.statusText} - ${ti}`)}const Ii=(yield On.json()).data.name,Yr={from2:Ii,from1:sn,emergency_first_name:Q.emergency_first_name,emergency_middle_name:Q.emergency_middle_name,emergency_last_name:Q.emergency_last_name,emergency_gender:Q.emergency_gender,emergency_date_of_birth:Q.emergency_date_of_birth,emergency_blood_group:Q.emergency_blood_group,emergency_number:Q.emergency_number,emergency_village:Q.emergency_village,emergency_district:Q.emergency_district,emergency_province:Q.emergency_province,emergency_country:Q.emergency_country,emergency_personal_country_code:Q.emergency_personal_country_code,emergency_phone_no:Q.emergency_phone_no,emergency_office_country_code:Q.emergency_office_country_code,emergency_phone_no1:Q.emergency_phone_no1,emergency_personal_email:Q.emergency_personal_email,emergency_office_email:Q.emergency_office_email,kin_firstname:Q.kin_firstname,kin_middlename:Q.kin_middlename,kin_lastname:Q.kin_lastname,kin_gender:Q.kin_gender,kin_date_of_birth:Q.kin_date_of_birth,kin_blood_group:Q.kin_blood_group,kin_number:Q.kin_number,kin_village:Q.kin_village,kin_district:Q.kin_district,kin_province:Q.kin_province,kin_country:Q.kin_country,kin_personal_country_code:Q.kin_personal_country_code,kin_phone_no:Q.kin_phone_no,kin_office_country_code:Q.kin_office_country_code,kin_office_phone_no:Q.kin_office_phone_no,kin_personal_email:Q.kin_personal_email,kin_office_email:Q.kin_office_email,bank_details:Z,declaration_name:Q.declaration_name,signature:Q.signature},Vn=yield fetch("/api/resource/Card Blo Me Page3",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Yr)});if(!Vn.ok){const ti=yield Vn.text();throw He(`Step 3 failed: ${Vn.status} ${Vn.statusText} - ${ti}`),new Error(`Step 3 failed: ${Vn.status} ${Vn.statusText} - ${ti}`)}const Pr=(yield Vn.json()).data.name,da={from3:Pr,from1:sn,company:Q.company,department:Q.department,company_physical_address:Q.company_physical_address,po_box_address:Q.po_box_address,employee_type_emailwebsite:Q.employee_type_emailwebsite,supervisor_name:Q.supervisor_name,supervisor_position:Q.supervisor_position,supervisor_contact:Q.supervisor_contact,supervisor_email:Q.supervisor_email,hr_manager_contact:Q.hr_manager_contact,hr_manager_email_address:Q.hr_manager_email_address,nature_of_work:Q.nature_of_work,workplace_hazards:Q.workplace_hazards,work_risk_type:Q.work_risk_type,alcohol:Q.alcohol,frequency_of_taking_alcohol:Q.frequency_of_taking_alcohol,smoking:Q.smoking,frequency_of_smoking:Q.frequency_of_smoking,beteinut:Q.beteinut,frequency_of_beteinut:Q.frequency_of_beteinut},ds=yield fetch("/api/resource/Card Blo Me Page 4",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(da)});if(!ds.ok){const ti=yield ds.text();throw He(`Step 4 failed: ${ds.status} ${ds.statusText} - ${ti}`),new Error(`Step 4 failed: ${ds.status} ${ds.statusText} - ${ti}`)}const Na=(yield ds.json()).data.name;Gn(lx(sn)),console.log("All submissions completed successfully!"),console.log("Document IDs created:",{page1:sn,page2:Ii,page3:Pr,page4:Na});const Di={card_blo_me_number:sn,card_blo_me_page_2:Ii,card_blo_me_page_3:Pr,card_blo_me_page_4:Na,is_submitted:1};console.log("Updating User with Card Blo Me Number:",Di);const es=yield fetch(`/api/resource/User/${li}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Di)});if(es.ok)console.log("User updated with Card Blo Me Number:",us.data.name);else{const ti=yield es.text();throw He(`Failed to update user: ${es.status} ${es.statusText} - ${ti}`),console.error(`Failed to update user: ${es.status} ${es.statusText} - ${ti}`),new Error(`Failed to update user: ${es.status} ${es.statusText} - ${ti}`)}}),vn=L.useCallback(()=>{const Xt=window.open("","_blank");new Date().toLocaleDateString();const lt=kJ(Q,$,W);Xt.document.write(lt),Xt.document.close(),Xt.onload=function(){Xt.print(),Xt.close()}},[Q]),Gi=L.useCallback(()=>{const Xt=window.open("","_blank"),lt=new Date().toLocaleDateString(),Ri=NJ(Q,[],[],[],lt,Ge,ae==null?void 0:ae.card_blo_me_number);Xt.document.write(Ri),Xt.document.close(),Xt.onload=function(){Xt.print(),Xt.close()}},[Q]),Jn=L.useMemo(()=>({formData:Q,handleChange:et,countries:Pt,formErrors:Lt,profilePicture:A,profileUrl:D,handleProfilePictureChange:At,uploadProfilePicture:Je,spouseData:$,setSpouseData:G,childrenData:W,setChildrenData:J,bankData:Z,setBankData:K}),[Q,et,Pt,Lt,A,D,$,W,Z,K]),ai=L.useCallback(()=>{switch(console.log("Rendering form:",e),e){case 1:return l.jsx(TE,te({},Jn));case 2:return l.jsx(wJ,Me(te({},Jn),{spouseData:$,setSpouseData:G,childrenData:W,setChildrenData:J}));case 3:return l.jsx(SJ,Me(te({},Jn),{bankData:Z,setBankData:K}));case 4:return l.jsx(jJ,te({},Jn));case 5:return l.jsx(CJ,te({},Jn));default:return l.jsx(TE,te({},Jn))}},[e,Jn]),Hn=Xt=>Ht(null,null,function*(){try{const lt=new Headers;lt.append("Authorization","token 508b6fa8bc5d7b1:2b6e1c5b9eedebe");const Ri={method:"GET",headers:lt,redirect:"follow"};fetch(`/api/resource/Card Blo Me Page1/${Xt}`,Ri).then(li=>li.json()).then(li=>{It(li==null?void 0:li.data),console.log("Fetched Card Blo Me data:",li==null?void 0:li.data)}).catch(li=>{throw He(li),new Error(li);console.error(li)})}catch(lt){throw He(`Error fetching Card Blo Me data: ${lt}`),console.error("Error fetching Card Blo Me data:",lt),new Error(`Error fetching Card Blo Me data: ${lt}`)}});L.useEffect(()=>{Ye!=null&&Ye.card_blo_me_number&&(console.log("card number",Ye.card_blo_me_number),Hn(Ye.card_blo_me_number))},[Ye]),L.useEffect(()=>{ft!=null&&ft.bankdetails&&!le&&(K(ft.bankdetails),_e(!0))},[ft,le]),console.log("bankData in parent:",Z);const Bn=()=>Ht(null,null,function*(){try{const Xt={is_submitted:0},lt=is.get("user_id");(yield fetch(`/api/resource/User/${lt}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"token 1a5cfcab01776e5:63628feef82aa59"},credentials:"omit",body:JSON.stringify(Xt)}))&&_(!1)}catch(Xt){throw console.log(Xt),He(Xt),new Error(Xt)}}),xi=ln||ve||qt||xt;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"main-container",children:[l.jsx("div",{className:"form-navigation",children:Tt.filter(Xt=>g?Xt.id===5:!0).map(Xt=>l.jsxs("button",{onClick:()=>{console.log("page id:",Xt.id)},className:`form-nav-btn ${e===Xt.id?"active":"inactive"}`,children:[l.jsx("span",{style:{fontSize:"1.1rem"},children:Xt.icon}),l.jsx("span",{children:Xt.name})]},Xt.id))}),l.jsxs("div",{className:"progress-container",children:[l.jsxs("div",{className:"progress-header",children:[l.jsx("span",{className:"progress-text",children:"Progress"}),l.jsxs("span",{className:"progress-text",children:[e,"/5"]})]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-fill",style:{width:`${e/5*100}%`}})})]}),xi&&l.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"20px"},children:l.jsx("div",{children:"Loading form data..."})}),l.jsxs("form",{onSubmit:e===5?Tn:Xt=>Xt.preventDefault(),children:[!xi&&ai(),l.jsxs("div",{className:"navigation-buttons",children:[!g&&l.jsx("button",{type:"button",onClick:()=>t(Xt=>Math.max(1,Xt-1)),disabled:e===1,className:"btn btn-previous",children:"← Previous"}),g&&l.jsx("button",{type:"button",className:"btn btn-edit",onClick:()=>{_(!1),t(1),Bn()},children:"✏️ Edit"}),e<5?l.jsxs("div",{className:"action-buttons",children:[l.jsx("button",{type:"button",onClick:bn,disabled:n||!Gt(e),className:"btn btn-save",children:n?"Saving...":"💾 Save Progress"}),l.jsx("button",{type:"button",onClick:()=>t(Xt=>Math.min(5,Xt+1)),disabled:!c[e],className:"btn btn-next",style:{opacity:c[e]?1:.5,cursor:c[e]?"pointer":"not-allowed"},children:"Next →"})]}):l.jsxs("div",{className:"action-buttons",children:[g&&l.jsx("button",{type:"button",onClick:vn,className:"btn btn-print",children:"🖨️ Print Application"}),g&&l.jsx("button",{type:"button",onClick:Gi,className:"btn btn-print",children:"🖨️ Print Card"}),!g&&l.jsx("button",{type:"submit",disabled:o,className:"btn btn-submit",children:o?"Submitting...":"🚀 Submit Application"})]})]}),e<5&&!c[e]&&l.jsx("p",{style:{color:"red",marginTop:"1rem"},children:"Please complete all required fields before saving."})]}),!1]}),l.jsx(TJ,{visible:fe,onClose:()=>Xe(!1),title:tt,message:ot.split(`
`).map((Xt,lt)=>l.jsxs(Rt.Fragment,{children:[Xt,l.jsx("br",{})]},lt)),type:ut})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function u_(e){return e+.5|0}const Lf=(e,t,n)=>Math.max(Math.min(e,n),t);function tx(e){return Lf(u_(e*2.55),0,255)}function Uf(e){return Lf(u_(e*255),0,255)}function gh(e){return Lf(u_(e/2.55)/100,0,1)}function NE(e){return Lf(u_(e*100),0,100)}const mc={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bj=[..."0123456789ABCDEF"],MJ=e=>bj[e&15],EJ=e=>bj[(e&240)>>4]+bj[e&15],Sb=e=>(e&240)>>4===(e&15),AJ=e=>Sb(e.r)&&Sb(e.g)&&Sb(e.b)&&Sb(e.a);function PJ(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&mc[e[1]]*17,g:255&mc[e[2]]*17,b:255&mc[e[3]]*17,a:t===5?mc[e[4]]*17:255}:(t===7||t===9)&&(n={r:mc[e[1]]<<4|mc[e[2]],g:mc[e[3]]<<4|mc[e[4]],b:mc[e[5]]<<4|mc[e[6]],a:t===9?mc[e[7]]<<4|mc[e[8]]:255})),n}const RJ=(e,t)=>e<255?t(e):"";function DJ(e){var t=AJ(e)?MJ:EJ;return e?"#"+t(e.r)+t(e.g)+t(e.b)+RJ(e.a,t):void 0}const zJ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function mD(e,t,n){const i=t*Math.min(n,1-n),o=(u,c=(u+e/30)%12)=>n-i*Math.max(Math.min(c-3,9-c,1),-1);return[o(0),o(8),o(4)]}function IJ(e,t,n){const i=(o,u=(o+e/60)%6)=>n-n*t*Math.max(Math.min(u,4-u,1),0);return[i(5),i(3),i(1)]}function OJ(e,t,n){const i=mD(e,1,.5);let o;for(t+n>1&&(o=1/(t+n),t*=o,n*=o),o=0;o<3;o++)i[o]*=1-t-n,i[o]+=t;return i}function LJ(e,t,n,i,o){return e===o?(t-n)/i+(t<n?6:0):t===o?(n-e)/i+2:(e-t)/i+4}function CT(e){const n=e.r/255,i=e.g/255,o=e.b/255,u=Math.max(n,i,o),c=Math.min(n,i,o),a=(u+c)/2;let g,_,S;return u!==c&&(S=u-c,_=a>.5?S/(2-u-c):S/(u+c),g=LJ(n,i,o,S,u),g=g*60+.5),[g|0,_||0,a]}function TT(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Uf)}function kT(e,t,n){return TT(mD,e,t,n)}function FJ(e,t,n){return TT(OJ,e,t,n)}function BJ(e,t,n){return TT(IJ,e,t,n)}function gD(e){return(e%360+360)%360}function VJ(e){const t=zJ.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?tx(+t[5]):Uf(+t[5]));const o=gD(+t[2]),u=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=FJ(o,u,c):t[1]==="hsv"?i=BJ(o,u,c):i=kT(o,u,c),{r:i[0],g:i[1],b:i[2],a:n}}function UJ(e,t){var n=CT(e);n[0]=gD(n[0]+t),n=kT(n),e.r=n[0],e.g=n[1],e.b=n[2]}function $J(e){if(!e)return;const t=CT(e),n=t[0],i=NE(t[1]),o=NE(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${o}%, ${gh(e.a)})`:`hsl(${n}, ${i}%, ${o}%)`}const ME={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},EE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function HJ(){const e={},t=Object.keys(EE),n=Object.keys(ME);let i,o,u,c,a;for(i=0;i<t.length;i++){for(c=a=t[i],o=0;o<n.length;o++)u=n[o],a=a.replace(u,ME[u]);u=parseInt(EE[c],16),e[a]=[u>>16&255,u>>8&255,u&255]}return e}let jb;function qJ(e){jb||(jb=HJ(),jb.transparent=[0,0,0,0]);const t=jb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const GJ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function WJ(e){const t=GJ.exec(e);let n=255,i,o,u;if(t){if(t[7]!==i){const c=+t[7];n=t[8]?tx(c):Lf(c*255,0,255)}return i=+t[1],o=+t[3],u=+t[5],i=255&(t[2]?tx(i):Lf(i,0,255)),o=255&(t[4]?tx(o):Lf(o,0,255)),u=255&(t[6]?tx(u):Lf(u,0,255)),{r:i,g:o,b:u,a:n}}}function ZJ(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${gh(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const z2=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Vg=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function YJ(e,t,n){const i=Vg(gh(e.r)),o=Vg(gh(e.g)),u=Vg(gh(e.b));return{r:Uf(z2(i+n*(Vg(gh(t.r))-i))),g:Uf(z2(o+n*(Vg(gh(t.g))-o))),b:Uf(z2(u+n*(Vg(gh(t.b))-u))),a:e.a+n*(t.a-e.a)}}function Cb(e,t,n){if(e){let i=CT(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=kT(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function yD(e,t){return e&&Object.assign(t||{},e)}function AE(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Uf(e[3]))):(t=yD(e,{r:0,g:0,b:0,a:1}),t.a=Uf(t.a)),t}function XJ(e){return e.charAt(0)==="r"?WJ(e):VJ(e)}class zx{constructor(t){if(t instanceof zx)return t;const n=typeof t;let i;n==="object"?i=AE(t):n==="string"&&(i=PJ(t)||qJ(t)||XJ(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=yD(this._rgb);return t&&(t.a=gh(t.a)),t}set rgb(t){this._rgb=AE(t)}rgbString(){return this._valid?ZJ(this._rgb):void 0}hexString(){return this._valid?DJ(this._rgb):void 0}hslString(){return this._valid?$J(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,o=t.rgb;let u;const c=n===u?.5:n,a=2*c-1,g=i.a-o.a,_=((a*g===-1?a:(a+g)/(1+a*g))+1)/2;u=1-_,i.r=255&_*i.r+u*o.r+.5,i.g=255&_*i.g+u*o.g+.5,i.b=255&_*i.b+u*o.b+.5,i.a=c*i.a+(1-c)*o.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=YJ(this._rgb,t._rgb,n)),this}clone(){return new zx(this.rgb)}alpha(t){return this._rgb.a=Uf(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=u_(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Cb(this._rgb,2,t),this}darken(t){return Cb(this._rgb,2,-t),this}saturate(t){return Cb(this._rgb,1,t),this}desaturate(t){return Cb(this._rgb,1,-t),this}rotate(t){return UJ(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function hh(){}const KJ=(()=>{let e=0;return()=>e++})();function Li(e){return e==null}function sr(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Vi(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function wr(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function zl(e,t){return wr(e)?e:t}function bi(e,t){return typeof e=="undefined"?t:e}const QJ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,xD=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ws(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function bs(e,t,n,i){let o,u,c;if(sr(e))for(u=e.length,o=0;o<u;o++)t.call(n,e[o],o);else if(Vi(e))for(c=Object.keys(e),u=c.length,o=0;o<u;o++)t.call(n,e[c[o]],c[o])}function i1(e,t){let n,i,o,u;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(o=e[n],u=t[n],o.datasetIndex!==u.datasetIndex||o.index!==u.index)return!1;return!0}function s1(e){if(sr(e))return e.map(s1);if(Vi(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let o=0;for(;o<i;++o)t[n[o]]=s1(e[n[o]]);return t}return e}function _D(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function JJ(e,t,n,i){if(!_D(e))return;const o=t[e],u=n[e];Vi(o)&&Vi(u)?Ix(o,u,i):t[e]=s1(u)}function Ix(e,t,n){const i=sr(t)?t:[t],o=i.length;if(!Vi(e))return e;n=n||{};const u=n.merger||JJ;let c;for(let a=0;a<o;++a){if(c=i[a],!Vi(c))continue;const g=Object.keys(c);for(let _=0,S=g.length;_<S;++_)u(g[_],e,c,n)}return e}function mx(e,t){return Ix(e,t,{merger:eee})}function eee(e,t,n){if(!_D(e))return;const i=t[e],o=n[e];Vi(i)&&Vi(o)?mx(i,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=s1(o))}const PE={"":e=>e,x:e=>e.x,y:e=>e.y};function tee(e){const t=e.split("."),n=[];let i="";for(const o of t)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function nee(e){const t=tee(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function Yf(e,t){return(PE[t]||(PE[t]=nee(t)))(e)}function NT(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ox=e=>typeof e!="undefined",Xf=e=>typeof e=="function",RE=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function iee(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ss=Math.PI,Js=2*ss,see=Js+ss,r1=Number.POSITIVE_INFINITY,ree=ss/180,Er=ss/2,Jp=ss/4,DE=ss*2/3,Ff=Math.log10,bd=Math.sign;function gx(e,t,n){return Math.abs(e-t)<n}function zE(e){const t=Math.round(e);e=gx(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Ff(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function aee(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((o,u)=>o-u).pop(),t}function oee(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function py(e){return!oee(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function lee(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function bD(e,t,n){let i,o,u;for(i=0,o=e.length;i<o;i++)u=e[i][n],isNaN(u)||(t.min=Math.min(t.min,u),t.max=Math.max(t.max,u))}function yu(e){return e*(ss/180)}function MT(e){return e*(180/ss)}function IE(e){if(!wr(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function vD(e,t){const n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);let u=Math.atan2(i,n);return u<-.5*ss&&(u+=Js),{angle:u,distance:o}}function vj(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function cee(e,t){return(e-t+see)%Js-ss}function mo(e){return(e%Js+Js)%Js}function Lx(e,t,n,i){const o=mo(e),u=mo(t),c=mo(n),a=mo(u-o),g=mo(c-o),_=mo(o-u),S=mo(o-c);return o===u||o===c||i&&u===c||a>g&&_<S}function Ta(e,t,n){return Math.max(t,Math.min(n,e))}function uee(e){return Ta(e,-32768,32767)}function xh(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function ET(e,t,n){n=n||(c=>e[c]<t);let i=e.length-1,o=0,u;for(;i-o>1;)u=o+i>>1,n(u)?o=u:i=u;return{lo:o,hi:i}}const _h=(e,t,n,i)=>ET(e,n,i?o=>{const u=e[o][t];return u<n||u===n&&e[o+1][t]===n}:o=>e[o][t]<n),dee=(e,t,n)=>ET(e,n,i=>e[i][t]>=n);function hee(e,t,n){let i=0,o=e.length;for(;i<o&&e[i]<t;)i++;for(;o>i&&e[o-1]>n;)o--;return i>0||o<e.length?e.slice(i,o):e}const wD=["push","pop","shift","splice","unshift"];function fee(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),wD.forEach(n=>{const i="_onData"+NT(n),o=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...u){const c=o.apply(this,u);return e._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...u)}),c}})})}function OE(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,o=i.indexOf(t);o!==-1&&i.splice(o,1),!(i.length>0)&&(wD.forEach(u=>{delete e[u]}),delete e._chartjs)}function SD(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const jD=function(){return typeof window=="undefined"?function(e){return e()}:window.requestAnimationFrame}();function CD(e,t){let n=[],i=!1;return function(...o){n=o,i||(i=!0,jD.call(window,()=>{i=!1,e.apply(t,n)}))}}function pee(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const AT=e=>e==="start"?"left":e==="end"?"right":"center",fo=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,mee=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function TD(e,t,n){const i=t.length;let o=0,u=i;if(e._sorted){const{iScale:c,vScale:a,_parsed:g}=e,_=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,S=c.axis,{min:N,max:A,minDefined:E,maxDefined:D}=c.getUserBounds();if(E){if(o=Math.min(_h(g,S,N).lo,n?i:_h(t,S,c.getPixelForValue(N)).lo),_){const B=g.slice(0,o+1).reverse().findIndex($=>!Li($[a.axis]));o-=Math.max(0,B)}o=Ta(o,0,i-1)}if(D){let B=Math.max(_h(g,c.axis,A,!0).hi+1,n?0:_h(t,S,c.getPixelForValue(A),!0).hi+1);if(_){const $=g.slice(B-1).findIndex(G=>!Li(G[a.axis]));B+=Math.max(0,$)}u=Ta(B,o,i)-o}else u=i-o}return{start:o,count:u}}function kD(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,o={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=o,!0;const u=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,o),u}const Tb=e=>e===0||e===1,LE=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Js/n)),FE=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Js/n)+1,yx={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Er)+1,easeOutSine:e=>Math.sin(e*Er),easeInOutSine:e=>-.5*(Math.cos(ss*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Tb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Tb(e)?e:LE(e,.075,.3),easeOutElastic:e=>Tb(e)?e:FE(e,.075,.3),easeInOutElastic(e){return Tb(e)?e:e<.5?.5*LE(e*2,.1125,.45):.5+.5*FE(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-yx.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?yx.easeInBounce(e*2)*.5:yx.easeOutBounce(e*2-1)*.5+.5};function PT(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function BE(e){return PT(e)?e:new zx(e)}function I2(e){return PT(e)?e:new zx(e).saturate(.5).darken(.1).hexString()}const gee=["x","y","borderWidth","radius","tension"],yee=["color","borderColor","backgroundColor"];function xee(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:yee},numbers:{type:"number",properties:gee}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function _ee(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const VE=new Map;function bee(e,t){t=t||{};const n=e+JSON.stringify(t);let i=VE.get(n);return i||(i=new Intl.NumberFormat(e,t),VE.set(n,i)),i}function d_(e,t,n){return bee(t,n).format(e)}const ND={values(e){return sr(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let o,u=e;if(n.length>1){const _=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(_<1e-4||_>1e15)&&(o="scientific"),u=vee(e,n)}const c=Ff(Math.abs(u)),a=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),g={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(g,this.options.ticks.format),d_(e,i,g)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Ff(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?ND.numeric.call(this,e,t,n):""}};function vee(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var G1={formatters:ND};function wee(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:G1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Am=Object.create(null),wj=Object.create(null);function xx(e,t){if(!t)return e;const n=t.split(".");for(let i=0,o=n.length;i<o;++i){const u=n[i];e=e[u]||(e[u]=Object.create(null))}return e}function O2(e,t,n){return typeof t=="string"?Ix(xx(e,t),n):Ix(xx(e,""),t)}class See{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,o)=>I2(o.backgroundColor),this.hoverBorderColor=(i,o)=>I2(o.borderColor),this.hoverColor=(i,o)=>I2(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return O2(this,t,n)}get(t){return xx(this,t)}describe(t,n){return O2(wj,t,n)}override(t,n){return O2(Am,t,n)}route(t,n,i,o){const u=xx(this,t),c=xx(this,i),a="_"+n;Object.defineProperties(u,{[a]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const g=this[a],_=c[o];return Vi(g)?Object.assign({},_,g):bi(g,_)},set(g){this[a]=g}}})}apply(t){t.forEach(n=>n(this))}}var ar=new See({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xee,_ee,wee]);function jee(e){return!e||Li(e.size)||Li(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function a1(e,t,n,i,o){let u=t[o];return u||(u=t[o]=e.measureText(o).width,n.push(o)),u>i&&(i=u),i}function Cee(e,t,n,i){i=i||{};let o=i.data=i.data||{},u=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(o=i.data={},u=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let c=0;const a=n.length;let g,_,S,N,A;for(g=0;g<a;g++)if(N=n[g],N!=null&&!sr(N))c=a1(e,o,u,c,N);else if(sr(N))for(_=0,S=N.length;_<S;_++)A=N[_],A!=null&&!sr(A)&&(c=a1(e,o,u,c,A));e.restore();const E=u.length/2;if(E>n.length){for(g=0;g<E;g++)delete o[u[g]];u.splice(0,E)}return c}function em(e,t,n){const i=e.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((t-o)*i)/i+o}function UE(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Sj(e,t,n,i){MD(e,t,n,i,null)}function MD(e,t,n,i,o){let u,c,a,g,_,S,N,A;const E=t.pointStyle,D=t.rotation,B=t.radius;let $=(D||0)*ree;if(E&&typeof E=="object"&&(u=E.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate($),e.drawImage(E,-E.width/2,-E.height/2,E.width,E.height),e.restore();return}if(!(isNaN(B)||B<=0)){switch(e.beginPath(),E){default:o?e.ellipse(n,i,o/2,B,0,0,Js):e.arc(n,i,B,0,Js),e.closePath();break;case"triangle":S=o?o/2:B,e.moveTo(n+Math.sin($)*S,i-Math.cos($)*B),$+=DE,e.lineTo(n+Math.sin($)*S,i-Math.cos($)*B),$+=DE,e.lineTo(n+Math.sin($)*S,i-Math.cos($)*B),e.closePath();break;case"rectRounded":_=B*.516,g=B-_,c=Math.cos($+Jp)*g,N=Math.cos($+Jp)*(o?o/2-_:g),a=Math.sin($+Jp)*g,A=Math.sin($+Jp)*(o?o/2-_:g),e.arc(n-N,i-a,_,$-ss,$-Er),e.arc(n+A,i-c,_,$-Er,$),e.arc(n+N,i+a,_,$,$+Er),e.arc(n-A,i+c,_,$+Er,$+ss),e.closePath();break;case"rect":if(!D){g=Math.SQRT1_2*B,S=o?o/2:g,e.rect(n-S,i-g,2*S,2*g);break}$+=Jp;case"rectRot":N=Math.cos($)*(o?o/2:B),c=Math.cos($)*B,a=Math.sin($)*B,A=Math.sin($)*(o?o/2:B),e.moveTo(n-N,i-a),e.lineTo(n+A,i-c),e.lineTo(n+N,i+a),e.lineTo(n-A,i+c),e.closePath();break;case"crossRot":$+=Jp;case"cross":N=Math.cos($)*(o?o/2:B),c=Math.cos($)*B,a=Math.sin($)*B,A=Math.sin($)*(o?o/2:B),e.moveTo(n-N,i-a),e.lineTo(n+N,i+a),e.moveTo(n+A,i-c),e.lineTo(n-A,i+c);break;case"star":N=Math.cos($)*(o?o/2:B),c=Math.cos($)*B,a=Math.sin($)*B,A=Math.sin($)*(o?o/2:B),e.moveTo(n-N,i-a),e.lineTo(n+N,i+a),e.moveTo(n+A,i-c),e.lineTo(n-A,i+c),$+=Jp,N=Math.cos($)*(o?o/2:B),c=Math.cos($)*B,a=Math.sin($)*B,A=Math.sin($)*(o?o/2:B),e.moveTo(n-N,i-a),e.lineTo(n+N,i+a),e.moveTo(n+A,i-c),e.lineTo(n-A,i+c);break;case"line":c=o?o/2:Math.cos($)*B,a=Math.sin($)*B,e.moveTo(n-c,i-a),e.lineTo(n+c,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos($)*(o?o/2:B),i+Math.sin($)*B);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function bh(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function W1(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Z1(e){e.restore()}function Tee(e,t,n,i,o){if(!t)return e.lineTo(n.x,n.y);if(o==="middle"){const u=(t.x+n.x)/2;e.lineTo(u,t.y),e.lineTo(u,n.y)}else o==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function kee(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Nee(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Li(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Mee(e,t,n,i,o){if(o.strikethrough||o.underline){const u=e.measureText(i),c=t-u.actualBoundingBoxLeft,a=t+u.actualBoundingBoxRight,g=n-u.actualBoundingBoxAscent,_=n+u.actualBoundingBoxDescent,S=o.strikethrough?(g+_)/2:_;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(c,S),e.lineTo(a,S),e.stroke()}}function Eee(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Pm(e,t,n,i,o,u={}){const c=sr(t)?t:[t],a=u.strokeWidth>0&&u.strokeColor!=="";let g,_;for(e.save(),e.font=o.string,Nee(e,u),g=0;g<c.length;++g)_=c[g],u.backdrop&&Eee(e,u.backdrop),a&&(u.strokeColor&&(e.strokeStyle=u.strokeColor),Li(u.strokeWidth)||(e.lineWidth=u.strokeWidth),e.strokeText(_,n,i,u.maxWidth)),e.fillText(_,n,i,u.maxWidth),Mee(e,n,i,_,u),i+=Number(o.lineHeight);e.restore()}function Fx(e,t){const{x:n,y:i,w:o,h:u,radius:c}=t;e.arc(n+c.topLeft,i+c.topLeft,c.topLeft,1.5*ss,ss,!0),e.lineTo(n,i+u-c.bottomLeft),e.arc(n+c.bottomLeft,i+u-c.bottomLeft,c.bottomLeft,ss,Er,!0),e.lineTo(n+o-c.bottomRight,i+u),e.arc(n+o-c.bottomRight,i+u-c.bottomRight,c.bottomRight,Er,0,!0),e.lineTo(n+o,i+c.topRight),e.arc(n+o-c.topRight,i+c.topRight,c.topRight,0,-Er,!0),e.lineTo(n+c.topLeft,i)}const Aee=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Pee=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ree(e,t){const n=(""+e).match(Aee);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Dee=e=>+e||0;function RT(e,t){const n={},i=Vi(t),o=i?Object.keys(t):t,u=Vi(e)?i?c=>bi(e[c],e[t[c]]):c=>e[c]:()=>e;for(const c of o)n[c]=Dee(u(c));return n}function ED(e){return RT(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ym(e){return RT(e,["topLeft","topRight","bottomLeft","bottomRight"])}function vo(e){const t=ED(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ca(e,t){e=e||{},t=t||ar.font;let n=bi(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=bi(e.style,t.style);i&&!(""+i).match(Pee)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:bi(e.family,t.family),lineHeight:Ree(bi(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:bi(e.weight,t.weight),string:""};return o.string=jee(o),o}function nx(e,t,n,i){let o,u,c;for(o=0,u=e.length;o<u;++o)if(c=e[o],c!==void 0&&c!==void 0)return c}function zee(e,t,n){const{min:i,max:o}=e,u=xD(t,(o-i)/2),c=(a,g)=>n&&a===0?0:a+g;return{min:c(i,-Math.abs(u)),max:c(o,u)}}function tp(e,t){return Object.assign(Object.create(e),t)}function DT(e,t=[""],n,i,o=()=>e[0]){const u=n||e;typeof i=="undefined"&&(i=DD("_fallback",e));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:u,_fallback:i,_getTarget:o,override:a=>DT([a,...e],t,u,i)};return new Proxy(c,{deleteProperty(a,g){return delete a[g],delete a._keys,delete e[0][g],!0},get(a,g){return PD(a,g,()=>$ee(g,t,e,a))},getOwnPropertyDescriptor(a,g){return Reflect.getOwnPropertyDescriptor(a._scopes[0],g)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,g){return HE(a).includes(g)},ownKeys(a){return HE(a)},set(a,g,_){const S=a._storage||(a._storage=o());return a[g]=S[g]=_,delete a._keys,!0}})}function my(e,t,n,i){const o={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:AD(e,i),setContext:u=>my(e,u,n,i),override:u=>my(e.override(u),t,n,i)};return new Proxy(o,{deleteProperty(u,c){return delete u[c],delete e[c],!0},get(u,c,a){return PD(u,c,()=>Oee(u,c,a))},getOwnPropertyDescriptor(u,c){return u._descriptors.allKeys?Reflect.has(e,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,c)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(u,c){return Reflect.has(e,c)},ownKeys(){return Reflect.ownKeys(e)},set(u,c,a){return e[c]=a,delete u[c],!0}})}function AD(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:n,indexable:i,isScriptable:Xf(n)?n:()=>n,isIndexable:Xf(i)?i:()=>i}}const Iee=(e,t)=>e?e+NT(t):t,zT=(e,t)=>Vi(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function PD(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function Oee(e,t,n){const{_proxy:i,_context:o,_subProxy:u,_descriptors:c}=e;let a=i[t];return Xf(a)&&c.isScriptable(t)&&(a=Lee(t,a,e,n)),sr(a)&&a.length&&(a=Fee(t,a,e,c.isIndexable)),zT(t,a)&&(a=my(a,o,u&&u[t],c)),a}function Lee(e,t,n,i){const{_proxy:o,_context:u,_subProxy:c,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let g=t(u,c||i);return a.delete(e),zT(e,g)&&(g=IT(o._scopes,o,e,g)),g}function Fee(e,t,n,i){const{_proxy:o,_context:u,_subProxy:c,_descriptors:a}=n;if(typeof u.index!="undefined"&&i(e))return t[u.index%t.length];if(Vi(t[0])){const g=t,_=o._scopes.filter(S=>S!==g);t=[];for(const S of g){const N=IT(_,o,e,S);t.push(my(N,u,c&&c[e],a))}}return t}function RD(e,t,n){return Xf(e)?e(t,n):e}const Bee=(e,t)=>e===!0?t:typeof e=="string"?Yf(t,e):void 0;function Vee(e,t,n,i,o){for(const u of t){const c=Bee(n,u);if(c){e.add(c);const a=RD(c._fallback,n,o);if(typeof a!="undefined"&&a!==n&&a!==i)return a}else if(c===!1&&typeof i!="undefined"&&n!==i)return null}return!1}function IT(e,t,n,i){const o=t._rootScopes,u=RD(t._fallback,n,i),c=[...e,...o],a=new Set;a.add(i);let g=$E(a,c,n,u||n,i);return g===null||typeof u!="undefined"&&u!==n&&(g=$E(a,c,u,g,i),g===null)?!1:DT(Array.from(a),[""],o,u,()=>Uee(t,n,i))}function $E(e,t,n,i,o){for(;n;)n=Vee(e,t,n,i,o);return n}function Uee(e,t,n){const i=e._getTarget();t in i||(i[t]={});const o=i[t];return sr(o)&&Vi(n)?n:o||{}}function $ee(e,t,n,i){let o;for(const u of t)if(o=DD(Iee(u,e),n),typeof o!="undefined")return zT(e,o)?IT(n,i,e,o):o}function DD(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i!="undefined")return i}}function HE(e){let t=e._keys;return t||(t=e._keys=Hee(e._scopes)),t}function Hee(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(o=>!o.startsWith("_")))t.add(i);return Array.from(t)}function zD(e,t,n,i){const{iScale:o}=e,{key:u="r"}=this._parsing,c=new Array(i);let a,g,_,S;for(a=0,g=i;a<g;++a)_=a+n,S=t[_],c[a]={r:o.parse(Yf(S,u),_)};return c}const qee=Number.EPSILON||1e-14,gy=(e,t)=>t<e.length&&!e[t].skip&&e[t],ID=e=>e==="x"?"y":"x";function Gee(e,t,n,i){const o=e.skip?t:e,u=t,c=n.skip?t:n,a=vj(u,o),g=vj(c,u);let _=a/(a+g),S=g/(a+g);_=isNaN(_)?0:_,S=isNaN(S)?0:S;const N=i*_,A=i*S;return{previous:{x:u.x-N*(c.x-o.x),y:u.y-N*(c.y-o.y)},next:{x:u.x+A*(c.x-o.x),y:u.y+A*(c.y-o.y)}}}function Wee(e,t,n){const i=e.length;let o,u,c,a,g,_=gy(e,0);for(let S=0;S<i-1;++S)if(g=_,_=gy(e,S+1),!(!g||!_)){if(gx(t[S],0,qee)){n[S]=n[S+1]=0;continue}o=n[S]/t[S],u=n[S+1]/t[S],a=Math.pow(o,2)+Math.pow(u,2),!(a<=9)&&(c=3/Math.sqrt(a),n[S]=o*c*t[S],n[S+1]=u*c*t[S])}}function Zee(e,t,n="x"){const i=ID(n),o=e.length;let u,c,a,g=gy(e,0);for(let _=0;_<o;++_){if(c=a,a=g,g=gy(e,_+1),!a)continue;const S=a[n],N=a[i];c&&(u=(S-c[n])/3,a[`cp1${n}`]=S-u,a[`cp1${i}`]=N-u*t[_]),g&&(u=(g[n]-S)/3,a[`cp2${n}`]=S+u,a[`cp2${i}`]=N+u*t[_])}}function Yee(e,t="x"){const n=ID(t),i=e.length,o=Array(i).fill(0),u=Array(i);let c,a,g,_=gy(e,0);for(c=0;c<i;++c)if(a=g,g=_,_=gy(e,c+1),!!g){if(_){const S=_[t]-g[t];o[c]=S!==0?(_[n]-g[n])/S:0}u[c]=a?_?bd(o[c-1])!==bd(o[c])?0:(o[c-1]+o[c])/2:o[c-1]:o[c]}Wee(e,o,u),Zee(e,u,t)}function kb(e,t,n){return Math.max(Math.min(e,n),t)}function Xee(e,t){let n,i,o,u,c,a=bh(e[0],t);for(n=0,i=e.length;n<i;++n)c=u,u=a,a=n<i-1&&bh(e[n+1],t),u&&(o=e[n],c&&(o.cp1x=kb(o.cp1x,t.left,t.right),o.cp1y=kb(o.cp1y,t.top,t.bottom)),a&&(o.cp2x=kb(o.cp2x,t.left,t.right),o.cp2y=kb(o.cp2y,t.top,t.bottom)))}function Kee(e,t,n,i,o){let u,c,a,g;if(t.spanGaps&&(e=e.filter(_=>!_.skip)),t.cubicInterpolationMode==="monotone")Yee(e,o);else{let _=i?e[e.length-1]:e[0];for(u=0,c=e.length;u<c;++u)a=e[u],g=Gee(_,a,e[Math.min(u+1,c-(i?0:1))%c],t.tension),a.cp1x=g.previous.x,a.cp1y=g.previous.y,a.cp2x=g.next.x,a.cp2y=g.next.y,_=a}t.capBezierPoints&&Xee(e,n)}function OT(){return typeof window!="undefined"&&typeof document!="undefined"}function LT(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function o1(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Y1=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Qee(e,t){return Y1(e).getPropertyValue(t)}const Jee=["top","right","bottom","left"];function xm(e,t,n){const i={};n=n?"-"+n:"";for(let o=0;o<4;o++){const u=Jee[o];i[u]=parseFloat(e[t+"-"+u+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const ete=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function tte(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:o,offsetY:u}=i;let c=!1,a,g;if(ete(o,u,e.target))a=o,g=u;else{const _=t.getBoundingClientRect();a=i.clientX-_.left,g=i.clientY-_.top,c=!0}return{x:a,y:g,box:c}}function rm(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,o=Y1(n),u=o.boxSizing==="border-box",c=xm(o,"padding"),a=xm(o,"border","width"),{x:g,y:_,box:S}=tte(e,n),N=c.left+(S&&a.left),A=c.top+(S&&a.top);let{width:E,height:D}=t;return u&&(E-=c.width+a.width,D-=c.height+a.height),{x:Math.round((g-N)/E*n.width/i),y:Math.round((_-A)/D*n.height/i)}}function nte(e,t,n){let i,o;if(t===void 0||n===void 0){const u=e&&LT(e);if(!u)t=e.clientWidth,n=e.clientHeight;else{const c=u.getBoundingClientRect(),a=Y1(u),g=xm(a,"border","width"),_=xm(a,"padding");t=c.width-_.width-g.width,n=c.height-_.height-g.height,i=o1(a.maxWidth,u,"clientWidth"),o=o1(a.maxHeight,u,"clientHeight")}}return{width:t,height:n,maxWidth:i||r1,maxHeight:o||r1}}const Nb=e=>Math.round(e*10)/10;function ite(e,t,n,i){const o=Y1(e),u=xm(o,"margin"),c=o1(o.maxWidth,e,"clientWidth")||r1,a=o1(o.maxHeight,e,"clientHeight")||r1,g=nte(e,t,n);let{width:_,height:S}=g;if(o.boxSizing==="content-box"){const A=xm(o,"border","width"),E=xm(o,"padding");_-=E.width+A.width,S-=E.height+A.height}return _=Math.max(0,_-u.width),S=Math.max(0,i?_/i:S-u.height),_=Nb(Math.min(_,c,g.maxWidth)),S=Nb(Math.min(S,a,g.maxHeight)),_&&!S&&(S=Nb(_/2)),(t!==void 0||n!==void 0)&&i&&g.height&&S>g.height&&(S=g.height,_=Nb(Math.floor(S*i))),{width:_,height:S}}function qE(e,t,n){const i=t||1,o=Math.floor(e.height*i),u=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const c=e.canvas;return c.style&&(n||!c.style.height&&!c.style.width)&&(c.style.height=`${e.height}px`,c.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||c.height!==o||c.width!==u?(e.currentDevicePixelRatio=i,c.height=o,c.width=u,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const ste=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};OT()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function GE(e,t){const n=Qee(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function am(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function rte(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function ate(e,t,n,i){const o={x:e.cp2x,y:e.cp2y},u={x:t.cp1x,y:t.cp1y},c=am(e,o,n),a=am(o,u,n),g=am(u,t,n),_=am(c,a,n),S=am(a,g,n);return am(_,S,n)}const ote=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},lte=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ay(e,t,n){return e?ote(t,n):lte()}function OD(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function LD(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function FD(e){return e==="angle"?{between:Lx,compare:cee,normalize:mo}:{between:xh,compare:(t,n)=>t-n,normalize:t=>t}}function WE({start:e,end:t,count:n,loop:i,style:o}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:o}}function cte(e,t,n){const{property:i,start:o,end:u}=n,{between:c,normalize:a}=FD(i),g=t.length;let{start:_,end:S,loop:N}=e,A,E;if(N){for(_+=g,S+=g,A=0,E=g;A<E&&c(a(t[_%g][i]),o,u);++A)_--,S--;_%=g,S%=g}return S<_&&(S+=g),{start:_,end:S,loop:N,style:e.style}}function BD(e,t,n){if(!n)return[e];const{property:i,start:o,end:u}=n,c=t.length,{compare:a,between:g,normalize:_}=FD(i),{start:S,end:N,loop:A,style:E}=cte(e,t,n),D=[];let B=!1,$=null,G,W,J;const Z=()=>g(o,J,G)&&a(o,J)!==0,K=()=>a(u,G)===0||g(u,J,G),le=()=>B||Z(),_e=()=>!B||K();for(let de=S,pe=S;de<=N;++de)W=t[de%c],!W.skip&&(G=_(W[i]),G!==J&&(B=g(G,o,u),$===null&&le()&&($=a(G,o)===0?de:pe),$!==null&&_e()&&(D.push(WE({start:$,end:de,loop:A,count:c,style:E})),$=null),pe=de,J=G));return $!==null&&D.push(WE({start:$,end:N,loop:A,count:c,style:E})),D}function VD(e,t){const n=[],i=e.segments;for(let o=0;o<i.length;o++){const u=BD(i[o],e.points,t);u.length&&n.push(...u)}return n}function ute(e,t,n,i){let o=0,u=t-1;if(n&&!i)for(;o<t&&!e[o].skip;)o++;for(;o<t&&e[o].skip;)o++;for(o%=t,n&&(u+=o);u>o&&e[u%t].skip;)u--;return u%=t,{start:o,end:u}}function dte(e,t,n,i){const o=e.length,u=[];let c=t,a=e[t],g;for(g=t+1;g<=n;++g){const _=e[g%o];_.skip||_.stop?a.skip||(i=!1,u.push({start:t%o,end:(g-1)%o,loop:i}),t=c=_.stop?g:null):(c=g,a.skip&&(t=g)),a=_}return c!==null&&u.push({start:t%o,end:c%o,loop:i}),u}function hte(e,t){const n=e.points,i=e.options.spanGaps,o=n.length;if(!o)return[];const u=!!e._loop,{start:c,end:a}=ute(n,o,u,i);if(i===!0)return ZE(e,[{start:c,end:a,loop:u}],n,t);const g=a<c?a+o:a,_=!!e._fullLoop&&c===0&&a===o-1;return ZE(e,dte(n,c,g,_),n,t)}function ZE(e,t,n,i){return!i||!i.setContext||!n?t:fte(e,t,n,i)}function fte(e,t,n,i){const o=e._chart.getContext(),u=YE(e.options),{_datasetIndex:c,options:{spanGaps:a}}=e,g=n.length,_=[];let S=u,N=t[0].start,A=N;function E(D,B,$,G){const W=a?-1:1;if(D!==B){for(D+=g;n[D%g].skip;)D-=W;for(;n[B%g].skip;)B+=W;D%g!==B%g&&(_.push({start:D%g,end:B%g,loop:$,style:G}),S=G,N=B%g)}}for(const D of t){N=a?N:D.start;let B=n[N%g],$;for(A=N+1;A<=D.end;A++){const G=n[A%g];$=YE(i.setContext(tp(o,{type:"segment",p0:B,p1:G,p0DataIndex:(A-1)%g,p1DataIndex:A%g,datasetIndex:c}))),pte($,S)&&E(N,A-1,D.loop,S),B=G,S=$}N<A-1&&E(N,A-1,D.loop,S)}return _}function YE(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function pte(e,t){if(!t)return!1;const n=[],i=function(o,u){return PT(u)?(n.includes(u)||n.push(u),n.indexOf(u)):u};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function Mb(e,t,n){return e.options.clip?e[n]:t[n]}function mte(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Mb(n,t,"left"),right:Mb(n,t,"right"),top:Mb(i,t,"top"),bottom:Mb(i,t,"bottom")}:t}function UD(e,t){const n=t._clip;if(n.disabled)return!1;const i=mte(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class gte{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,o){const u=n.listeners[o],c=n.duration;u.forEach(a=>a({chart:t,initial:n.initial,numSteps:c,currentStep:Math.min(i-n.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=jD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,o)=>{if(!i.running||!i.items.length)return;const u=i.items;let c=u.length-1,a=!1,g;for(;c>=0;--c)g=u[c],g._active?(g._total>i.duration&&(i.duration=g._total),g.tick(t),a=!0):(u[c]=u[u.length-1],u.pop());a&&(o.draw(),this._notify(o,i,t,"progress")),u.length||(i.running=!1,this._notify(o,i,t,"complete"),i.initial=!1),n+=u.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,o)=>Math.max(i,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let o=i.length-1;for(;o>=0;--o)i[o].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ph=new gte;const XE="transparent",yte={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=BE(e||XE),o=i.valid&&BE(t||XE);return o&&o.valid?o.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class xte{constructor(t,n,i,o){const u=n[i];o=nx([t.to,o,u,t.from]);const c=nx([t.from,u,o]);this._active=!0,this._fn=t.fn||yte[t.type||typeof c],this._easing=yx[t.easing]||yx.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=c,this._to=o,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const o=this._target[this._prop],u=i-this._start,c=this._duration-u;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=u,this._loop=!!t.loop,this._to=nx([t.to,n,o,t.from]),this._from=nx([t.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,o=this._prop,u=this._from,c=this._loop,a=this._to;let g;if(this._active=u!==a&&(c||n<i),!this._active){this._target[o]=a,this._notify(!0);return}if(n<0){this._target[o]=u;return}g=n/i%2,g=c&&g>1?2-g:g,g=this._easing(Math.min(1,Math.max(0,g))),this._target[o]=this._fn(u,a,g)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let o=0;o<i.length;o++)i[o][n]()}}class $D{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Vi(t))return;const n=Object.keys(ar.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{const u=t[o];if(!Vi(u))return;const c={};for(const a of n)c[a]=u[a];(sr(u.properties)&&u.properties||[o]).forEach(a=>{(a===o||!i.has(a))&&i.set(a,c)})})}_animateOptions(t,n){const i=n.options,o=bte(t,i);if(!o)return[];const u=this._createAnimations(o,i);return i.$shared&&_te(t.options.$animations,i).then(()=>{t.options=i},()=>{}),u}_createAnimations(t,n){const i=this._properties,o=[],u=t.$animations||(t.$animations={}),c=Object.keys(n),a=Date.now();let g;for(g=c.length-1;g>=0;--g){const _=c[g];if(_.charAt(0)==="$")continue;if(_==="options"){o.push(...this._animateOptions(t,n));continue}const S=n[_];let N=u[_];const A=i.get(_);if(N)if(A&&N.active()){N.update(A,S,a);continue}else N.cancel();if(!A||!A.duration){t[_]=S;continue}u[_]=N=new xte(A,t,_,S),o.push(N)}return o}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return ph.add(this._chart,i),!0}}function _te(e,t){const n=[],i=Object.keys(t);for(let o=0;o<i.length;o++){const u=e[i[o]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function bte(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function KE(e,t){const n=e&&e.options||{},i=n.reverse,o=n.min===void 0?t:0,u=n.max===void 0?t:0;return{start:i?u:o,end:i?o:u}}function vte(e,t,n){if(n===!1)return!1;const i=KE(e,n),o=KE(t,n);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function wte(e){let t,n,i,o;return Vi(e)?(t=e.top,n=e.right,i=e.bottom,o=e.left):t=n=i=o=e,{top:t,right:n,bottom:i,left:o,disabled:e===!1}}function HD(e,t){const n=[],i=e._getSortedDatasetMetas(t);let o,u;for(o=0,u=i.length;o<u;++o)n.push(i[o].index);return n}function QE(e,t,n,i={}){const o=e.keys,u=i.mode==="single";let c,a,g,_;if(t===null)return;let S=!1;for(c=0,a=o.length;c<a;++c){if(g=+o[c],g===n){if(S=!0,i.all)continue;break}_=e.values[g],wr(_)&&(u||t===0||bd(t)===bd(_))&&(t+=_)}return!S&&!i.all?0:t}function Ste(e,t){const{iScale:n,vScale:i}=t,o=n.axis==="x"?"x":"y",u=i.axis==="x"?"x":"y",c=Object.keys(e),a=new Array(c.length);let g,_,S;for(g=0,_=c.length;g<_;++g)S=c[g],a[g]={[o]:S,[u]:e[S]};return a}function L2(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function jte(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Cte(e){const{min:t,max:n,minDefined:i,maxDefined:o}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function Tte(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function JE(e,t,n,i){for(const o of t.getMatchingVisibleMetas(i).reverse()){const u=e[o.index];if(n&&u>0||!n&&u<0)return o.index}return null}function eA(e,t){const{chart:n,_cachedMeta:i}=e,o=n._stacks||(n._stacks={}),{iScale:u,vScale:c,index:a}=i,g=u.axis,_=c.axis,S=jte(u,c,i),N=t.length;let A;for(let E=0;E<N;++E){const D=t[E],{[g]:B,[_]:$}=D,G=D._stacks||(D._stacks={});A=G[_]=Tte(o,S,B),A[a]=$,A._top=JE(A,c,!0,i.type),A._bottom=JE(A,c,!1,i.type);const W=A._visualValues||(A._visualValues={});W[a]=$}}function F2(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function kte(e,t){return tp(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Nte(e,t,n){return tp(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function q0(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const o of t){const u=o._stacks;if(!u||u[i]===void 0||u[i][n]===void 0)return;delete u[i][n],u[i]._visualValues!==void 0&&u[i]._visualValues[n]!==void 0&&delete u[i]._visualValues[n]}}}const B2=e=>e==="reset"||e==="none",tA=(e,t)=>t?e:Object.assign({},e),Mte=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:HD(n,!0),values:null};class xu{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=L2(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&q0(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),o=(N,A,E,D)=>N==="x"?A:N==="r"?D:E,u=n.xAxisID=bi(i.xAxisID,F2(t,"x")),c=n.yAxisID=bi(i.yAxisID,F2(t,"y")),a=n.rAxisID=bi(i.rAxisID,F2(t,"r")),g=n.indexAxis,_=n.iAxisID=o(g,u,c,a),S=n.vAxisID=o(g,c,u,a);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(c),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(_),n.vScale=this.getScaleForId(S)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&OE(this._data,this),t._stacked&&q0(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Vi(n)){const o=this._cachedMeta;this._data=Ste(n,o)}else if(i!==n){if(i){OE(i,this);const o=this._cachedMeta;q0(o),o._parsed=[]}n&&Object.isExtensible(n)&&fee(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let o=!1;this._dataCheck();const u=n._stacked;n._stacked=L2(n.vScale,n),n.stack!==i.stack&&(o=!0,q0(n),n.stack=i.stack),this._resyncElements(t),(o||u!==n._stacked)&&(eA(this,n._parsed),n._stacked=L2(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:o}=this,{iScale:u,_stacked:c}=i,a=u.axis;let g=t===0&&n===o.length?!0:i._sorted,_=t>0&&i._parsed[t-1],S,N,A;if(this._parsing===!1)i._parsed=o,i._sorted=!0,A=o;else{sr(o[t])?A=this.parseArrayData(i,o,t,n):Vi(o[t])?A=this.parseObjectData(i,o,t,n):A=this.parsePrimitiveData(i,o,t,n);const E=()=>N[a]===null||_&&N[a]<_[a];for(S=0;S<n;++S)i._parsed[S+t]=N=A[S],g&&(E()&&(g=!1),_=N);i._sorted=g}c&&eA(this,A)}parsePrimitiveData(t,n,i,o){const{iScale:u,vScale:c}=t,a=u.axis,g=c.axis,_=u.getLabels(),S=u===c,N=new Array(o);let A,E,D;for(A=0,E=o;A<E;++A)D=A+i,N[A]={[a]:S||u.parse(_[D],D),[g]:c.parse(n[D],D)};return N}parseArrayData(t,n,i,o){const{xScale:u,yScale:c}=t,a=new Array(o);let g,_,S,N;for(g=0,_=o;g<_;++g)S=g+i,N=n[S],a[g]={x:u.parse(N[0],S),y:c.parse(N[1],S)};return a}parseObjectData(t,n,i,o){const{xScale:u,yScale:c}=t,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,_=new Array(o);let S,N,A,E;for(S=0,N=o;S<N;++S)A=S+i,E=n[A],_[S]={x:u.parse(Yf(E,a),A),y:c.parse(Yf(E,g),A)};return _}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const o=this.chart,u=this._cachedMeta,c=n[t.axis],a={keys:HD(o,!0),values:n._stacks[t.axis]._visualValues};return QE(a,c,u.index,{mode:i})}updateRangeFromParsed(t,n,i,o){const u=i[n.axis];let c=u===null?NaN:u;const a=o&&i._stacks[n.axis];o&&a&&(o.values=a,c=QE(o,u,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,n){const i=this._cachedMeta,o=i._parsed,u=i._sorted&&t===i.iScale,c=o.length,a=this._getOtherScale(t),g=Mte(n,i,this.chart),_={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:S,max:N}=Cte(a);let A,E;function D(){E=o[A];const B=E[a.axis];return!wr(E[t.axis])||S>B||N<B}for(A=0;A<c&&!(!D()&&(this.updateRangeFromParsed(_,t,E,g),u));++A);if(u){for(A=c-1;A>=0;--A)if(!D()){this.updateRangeFromParsed(_,t,E,g);break}}return _}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let o,u,c;for(o=0,u=n.length;o<u;++o)c=n[o][t.axis],wr(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,o=n.vScale,u=this.getParsed(t);return{label:i?""+i.getLabelForValue(u[i.axis]):"",value:o?""+o.getLabelForValue(u[o.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=wte(bi(this.options.clip,vte(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,o=i.data||[],u=n.chartArea,c=[],a=this._drawStart||0,g=this._drawCount||o.length-a,_=this.options.drawActiveElementsOnTop;let S;for(i.dataset&&i.dataset.draw(t,u,a,g),S=a;S<a+g;++S){const N=o[S];N.hidden||(N.active&&_?c.push(N):N.draw(t,u))}for(S=0;S<c.length;++S)c[S].draw(t,u)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const o=this.getDataset();let u;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];u=c.$context||(c.$context=Nte(this.getContext(),t,c)),u.parsed=this.getParsed(t),u.raw=o.data[t],u.index=u.dataIndex=t}else u=this.$context||(this.$context=kte(this.chart.getContext(),this.index)),u.dataset=o,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=i,u}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const o=n==="active",u=this._cachedDataOpts,c=t+"-"+n,a=u[c],g=this.enableOptionSharing&&Ox(i);if(a)return tA(a,g);const _=this.chart.config,S=_.datasetElementScopeKeys(this._type,t),N=o?[`${t}Hover`,"hover",t,""]:[t,""],A=_.getOptionScopes(this.getDataset(),S),E=Object.keys(ar.elements[t]),D=()=>this.getContext(i,o,n),B=_.resolveNamedOptions(A,E,D,N);return B.$shared&&(B.$shared=g,u[c]=Object.freeze(tA(B,g))),B}_resolveAnimations(t,n,i){const o=this.chart,u=this._cachedDataOpts,c=`animation-${n}`,a=u[c];if(a)return a;let g;if(o.options.animation!==!1){const S=this.chart.config,N=S.datasetAnimationScopeKeys(this._type,n),A=S.getOptionScopes(this.getDataset(),N);g=S.createResolver(A,this.getContext(t,i,n))}const _=new $D(o,g&&g.animations);return g&&g._cacheable&&(u[c]=Object.freeze(_)),_}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||B2(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),o=this._sharedOptions,u=this.getSharedOptions(i),c=this.includeOptions(n,u)||u!==o;return this.updateSharedOptions(u,n,i),{sharedOptions:u,includeOptions:c}}updateElement(t,n,i,o){B2(o)?Object.assign(t,i):this._resolveAnimations(n,o).update(t,i)}updateSharedOptions(t,n,i){t&&!B2(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,o){t.active=o;const u=this.getStyle(n,o);this._resolveAnimations(n,i,o).update(t,{options:!o&&this.getSharedOptions(u)||u})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[a,g,_]of this._syncList)this[a](g,_);this._syncList=[];const o=i.length,u=n.length,c=Math.min(u,o);c&&this.parse(0,c),u>o?this._insertElements(o,u-o,t):u<o&&this._removeElements(u,o-u)}_insertElements(t,n,i=!0){const o=this._cachedMeta,u=o.data,c=t+n;let a;const g=_=>{for(_.length+=n,a=_.length-1;a>=c;a--)_[a]=_[a-n]};for(g(u),a=t;a<c;++a)u[a]=new this.dataElementType;this._parsing&&g(o._parsed),this.parse(t,n),i&&this.updateElements(u,t,n,"reset")}updateElements(t,n,i,o){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const o=i._parsed.splice(t,n);i._stacked&&q0(i,o)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,o]=t;this[n](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}wn(xu,"defaults",{}),wn(xu,"datasetElementType",null),wn(xu,"dataElementType",null);function Ete(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let o=0,u=n.length;o<u;o++)i=i.concat(n[o].controller.getAllParsedValues(e));e._cache.$bar=SD(i.sort((o,u)=>o-u))}return e._cache.$bar}function Ate(e){const t=e.iScale,n=Ete(t,e.type);let i=t._length,o,u,c,a;const g=()=>{c===32767||c===-32768||(Ox(a)&&(i=Math.min(i,Math.abs(c-a)||i)),a=c)};for(o=0,u=n.length;o<u;++o)c=t.getPixelForValue(n[o]),g();for(a=void 0,o=0,u=t.ticks.length;o<u;++o)c=t.getPixelForTick(o),g();return i}function Pte(e,t,n,i){const o=n.barThickness;let u,c;return Li(o)?(u=t.min*n.categoryPercentage,c=n.barPercentage):(u=o*i,c=1),{chunk:u/i,ratio:c,start:t.pixels[e]-u/2}}function Rte(e,t,n,i){const o=t.pixels,u=o[e];let c=e>0?o[e-1]:null,a=e<o.length-1?o[e+1]:null;const g=n.categoryPercentage;c===null&&(c=u-(a===null?t.end-t.start:a-u)),a===null&&(a=u+u-c);const _=u-(u-Math.min(c,a))/2*g;return{chunk:Math.abs(a-c)/2*g/i,ratio:n.barPercentage,start:_}}function Dte(e,t,n,i){const o=n.parse(e[0],i),u=n.parse(e[1],i),c=Math.min(o,u),a=Math.max(o,u);let g=c,_=a;Math.abs(c)>Math.abs(a)&&(g=a,_=c),t[n.axis]=_,t._custom={barStart:g,barEnd:_,start:o,end:u,min:c,max:a}}function qD(e,t,n,i){return sr(e)?Dte(e,t,n,i):t[n.axis]=n.parse(e,i),t}function nA(e,t,n,i){const o=e.iScale,u=e.vScale,c=o.getLabels(),a=o===u,g=[];let _,S,N,A;for(_=n,S=n+i;_<S;++_)A=t[_],N={},N[o.axis]=a||o.parse(c[_],_),g.push(qD(A,N,u,_));return g}function V2(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function zte(e,t,n){return e!==0?bd(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Ite(e){let t,n,i,o,u;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(o="end",u="start"):(o="start",u="end"),{start:n,end:i,reverse:t,top:o,bottom:u}}function Ote(e,t,n,i){let o=t.borderSkipped;const u={};if(!o){e.borderSkipped=u;return}if(o===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:a,reverse:g,top:_,bottom:S}=Ite(e);o==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?o=_:(n._bottom||0)===i?o=S:(u[iA(S,c,a,g)]=!0,o=_)),u[iA(o,c,a,g)]=!0,e.borderSkipped=u}function iA(e,t,n,i){return i?(e=Lte(e,t,n),e=sA(e,n,t)):e=sA(e,t,n),e}function Lte(e,t,n){return e===t?n:e===n?t:e}function sA(e,t,n){return e==="start"?t:e==="end"?n:e}function Fte(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class _x extends xu{parsePrimitiveData(t,n,i,o){return nA(t,n,i,o)}parseArrayData(t,n,i,o){return nA(t,n,i,o)}parseObjectData(t,n,i,o){const{iScale:u,vScale:c}=t,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,_=u.axis==="x"?a:g,S=c.axis==="x"?a:g,N=[];let A,E,D,B;for(A=i,E=i+o;A<E;++A)B=n[A],D={},D[u.axis]=u.parse(Yf(B,_),A),N.push(qD(Yf(B,S),D,c,A));return N}updateRangeFromParsed(t,n,i,o){super.updateRangeFromParsed(t,n,i,o);const u=i._custom;u&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,u.min),t.max=Math.max(t.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:o}=n,u=this.getParsed(t),c=u._custom,a=V2(c)?"["+c.start+", "+c.end+"]":""+o.getLabelForValue(u[o.axis]);return{label:""+i.getLabelForValue(u[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,o){const u=o==="reset",{index:c,_cachedMeta:{vScale:a}}=this,g=a.getBasePixel(),_=a.isHorizontal(),S=this._getRuler(),{sharedOptions:N,includeOptions:A}=this._getSharedOptions(n,o);for(let E=n;E<n+i;E++){const D=this.getParsed(E),B=u||Li(D[a.axis])?{base:g,head:g}:this._calculateBarValuePixels(E),$=this._calculateBarIndexPixels(E,S),G=(D._stacks||{})[a.axis],W={horizontal:_,base:B.base,enableBorderRadius:!G||V2(D._custom)||c===G._top||c===G._bottom,x:_?B.head:$.center,y:_?$.center:B.head,height:_?$.size:Math.abs(B.size),width:_?Math.abs(B.size):$.size};A&&(W.options=N||this.resolveDataElementOptions(E,t[E].active?"active":o));const J=W.options||t[E].options;Ote(W,J,G,c),Fte(W,J,S.ratio),this.updateElement(t[E],E,W,o)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(S=>S.controller.options.grouped),u=i.options.stacked,c=[],a=this._cachedMeta.controller.getParsed(n),g=a&&a[i.axis],_=S=>{const N=S._parsed.find(E=>E[i.axis]===g),A=N&&N[S.vScale.axis];if(Li(A)||isNaN(A))return!0};for(const S of o)if(!(n!==void 0&&_(S))&&((u===!1||c.indexOf(S.stack)===-1||u===void 0&&S.stack===void 0)&&c.push(S.stack),S.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[bi(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,i){const o=this._getStacks(t,i),u=n!==void 0?o.indexOf(n):-1;return u===-1?o.length-1:u}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,o=[];let u,c;for(u=0,c=n.data.length;u<c;++u)o.push(i.getPixelForValue(this.getParsed(u)[i.axis],u));const a=t.barThickness;return{min:a||Ate(n),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:o},options:{base:u,minBarLength:c}}=this,a=u||0,g=this.getParsed(t),_=g._custom,S=V2(_);let N=g[n.axis],A=0,E=i?this.applyStack(n,g,i):N,D,B;E!==N&&(A=E-N,E=N),S&&(N=_.barStart,E=_.barEnd-_.barStart,N!==0&&bd(N)!==bd(_.barEnd)&&(A=0),A+=N);const $=!Li(u)&&!S?u:A;let G=n.getPixelForValue($);if(this.chart.getDataVisibility(t)?D=n.getPixelForValue(A+E):D=G,B=D-G,Math.abs(B)<c){B=zte(B,n,a)*c,N===a&&(G-=B/2);const W=n.getPixelForDecimal(0),J=n.getPixelForDecimal(1),Z=Math.min(W,J),K=Math.max(W,J);G=Math.max(Math.min(G,K),Z),D=G+B,i&&!S&&(g._stacks[n.axis]._visualValues[o]=n.getValueForPixel(D)-n.getValueForPixel(G))}if(G===n.getPixelForValue(a)){const W=bd(B)*n.getLineWidthForValue(a)/2;G+=W,B-=W}return{size:B,base:G,head:D,center:D+B/2}}_calculateBarIndexPixels(t,n){const i=n.scale,o=this.options,u=o.skipNull,c=bi(o.maxBarThickness,1/0);let a,g;const _=this._getAxisCount();if(n.grouped){const S=u?this._getStackCount(t):n.stackCount,N=o.barThickness==="flex"?Rte(t,n,o,S*_):Pte(t,n,o,S*_),A=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,E=this._getAxis().indexOf(bi(A,this.getFirstScaleIdForIndexAxis())),D=this._getStackIndex(this.index,this._cachedMeta.stack,u?t:void 0)+E;a=N.start+N.chunk*D+N.chunk/2,g=Math.min(c,N.chunk*N.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),g=Math.min(c,n.min*n.ratio);return{base:a-g/2,head:a+g/2,center:a,size:g}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,o=i.length;let u=0;for(;u<o;++u)this.getParsed(u)[n.axis]!==null&&!i[u].hidden&&i[u].draw(this._ctx)}}wn(_x,"id","bar"),wn(_x,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),wn(_x,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class hv extends xu{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,o){const u=super.parsePrimitiveData(t,n,i,o);for(let c=0;c<u.length;c++)u[c]._custom=this.resolveDataElementOptions(c+i).radius;return u}parseArrayData(t,n,i,o){const u=super.parseArrayData(t,n,i,o);for(let c=0;c<u.length;c++){const a=n[i+c];u[c]._custom=bi(a[2],this.resolveDataElementOptions(c+i).radius)}return u}parseObjectData(t,n,i,o){const u=super.parseObjectData(t,n,i,o);for(let c=0;c<u.length;c++){const a=n[i+c];u[c]._custom=bi(a&&a.r&&+a.r,this.resolveDataElementOptions(c+i).radius)}return u}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:u}=n,c=this.getParsed(t),a=o.getLabelForValue(c.x),g=u.getLabelForValue(c.y),_=c._custom;return{label:i[t]||"",value:"("+a+", "+g+(_?", "+_:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,o){const u=o==="reset",{iScale:c,vScale:a}=this._cachedMeta,{sharedOptions:g,includeOptions:_}=this._getSharedOptions(n,o),S=c.axis,N=a.axis;for(let A=n;A<n+i;A++){const E=t[A],D=!u&&this.getParsed(A),B={},$=B[S]=u?c.getPixelForDecimal(.5):c.getPixelForValue(D[S]),G=B[N]=u?a.getBasePixel():a.getPixelForValue(D[N]);B.skip=isNaN($)||isNaN(G),_&&(B.options=g||this.resolveDataElementOptions(A,E.active?"active":o),u&&(B.options.radius=0)),this.updateElement(E,A,B,o)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let o=super.resolveDataElementOptions(t,n);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const u=o.radius;return n!=="active"&&(o.radius=0),o.radius+=bi(i&&i._custom,u),o}}wn(hv,"id","bubble"),wn(hv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),wn(hv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Bte(e,t,n){let i=1,o=1,u=0,c=0;if(t<Js){const a=e,g=a+t,_=Math.cos(a),S=Math.sin(a),N=Math.cos(g),A=Math.sin(g),E=(J,Z,K)=>Lx(J,a,g,!0)?1:Math.max(Z,Z*n,K,K*n),D=(J,Z,K)=>Lx(J,a,g,!0)?-1:Math.min(Z,Z*n,K,K*n),B=E(0,_,N),$=E(Er,S,A),G=D(ss,_,N),W=D(ss+Er,S,A);i=(B-G)/2,o=($-W)/2,u=-(B+G)/2,c=-($+W)/2}return{ratioX:i,ratioY:o,offsetX:u,offsetY:c}}class dm extends xu{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let u=g=>+i[g];if(Vi(i[t])){const{key:g="value"}=this._parsing;u=_=>+Yf(i[_],g)}let c,a;for(c=t,a=t+n;c<a;++c)o._parsed[c]=u(c)}}_getRotation(){return yu(this.options.rotation-90)}_getCircumference(){return yu(this.options.circumference)}_getRotationExtents(){let t=Js,n=-Js;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const o=this.chart.getDatasetMeta(i).controller,u=o._getRotation(),c=o._getCircumference();t=Math.min(t,u),n=Math.max(n,u+c)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,o=this._cachedMeta,u=o.data,c=this.getMaxBorderWidth()+this.getMaxOffset(u)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-c)/2,0),g=Math.min(QJ(this.options.cutout,a),1),_=this._getRingWeight(this.index),{circumference:S,rotation:N}=this._getRotationExtents(),{ratioX:A,ratioY:E,offsetX:D,offsetY:B}=Bte(N,S,g),$=(i.width-c)/A,G=(i.height-c)/E,W=Math.max(Math.min($,G)/2,0),J=xD(this.options.radius,W),Z=Math.max(J*g,0),K=(J-Z)/this._getVisibleDatasetWeightTotal();this.offsetX=D*J,this.offsetY=B*J,o.total=this.calculateTotal(),this.outerRadius=J-K*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-K*_,0),this.updateElements(u,0,u.length,t)}_circumference(t,n){const i=this.options,o=this._cachedMeta,u=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*u/Js)}updateElements(t,n,i,o){const u=o==="reset",c=this.chart,a=c.chartArea,_=c.options.animation,S=(a.left+a.right)/2,N=(a.top+a.bottom)/2,A=u&&_.animateScale,E=A?0:this.innerRadius,D=A?0:this.outerRadius,{sharedOptions:B,includeOptions:$}=this._getSharedOptions(n,o);let G=this._getRotation(),W;for(W=0;W<n;++W)G+=this._circumference(W,u);for(W=n;W<n+i;++W){const J=this._circumference(W,u),Z=t[W],K={x:S+this.offsetX,y:N+this.offsetY,startAngle:G,endAngle:G+J,circumference:J,outerRadius:D,innerRadius:E};$&&(K.options=B||this.resolveDataElementOptions(W,Z.active?"active":o)),G+=J,this.updateElement(Z,W,K,o)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,o;for(o=0;o<n.length;o++){const u=t._parsed[o];u!==null&&!isNaN(u)&&this.chart.getDataVisibility(o)&&!n[o].hidden&&(i+=Math.abs(u))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Js*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,o=i.data.labels||[],u=d_(n._parsed[t],i.options.locale);return{label:o[t]||"",value:u}}getMaxBorderWidth(t){let n=0;const i=this.chart;let o,u,c,a,g;if(!t){for(o=0,u=i.data.datasets.length;o<u;++o)if(i.isDatasetVisible(o)){c=i.getDatasetMeta(o),t=c.data,a=c.controller;break}}if(!t)return 0;for(o=0,u=t.length;o<u;++o)g=a.resolveDataElementOptions(o),g.borderAlign!=="inner"&&(n=Math.max(n,g.borderWidth||0,g.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,o=t.length;i<o;++i){const u=this.resolveDataElementOptions(i);n=Math.max(n,u.offset||0,u.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(bi(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}wn(dm,"id","doughnut"),wn(dm,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),wn(dm,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),wn(dm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:o}}=t.legend.options;return n.labels.map((u,c)=>{const g=t.getDatasetMeta(0).controller.getStyle(c);return{text:u,fillStyle:g.backgroundColor,strokeStyle:g.borderColor,fontColor:o,lineWidth:g.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class fv extends xu{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:o=[],_dataset:u}=n,c=this.chart._animationsDisabled;let{start:a,count:g}=TD(n,o,c);this._drawStart=a,this._drawCount=g,kD(n)&&(a=0,g=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!u._decimated,i.points=o;const _=this.resolveDatasetElementOptions(t);this.options.showLine||(_.borderWidth=0),_.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:_},t),this.updateElements(o,a,g,t)}updateElements(t,n,i,o){const u=o==="reset",{iScale:c,vScale:a,_stacked:g,_dataset:_}=this._cachedMeta,{sharedOptions:S,includeOptions:N}=this._getSharedOptions(n,o),A=c.axis,E=a.axis,{spanGaps:D,segment:B}=this.options,$=py(D)?D:Number.POSITIVE_INFINITY,G=this.chart._animationsDisabled||u||o==="none",W=n+i,J=t.length;let Z=n>0&&this.getParsed(n-1);for(let K=0;K<J;++K){const le=t[K],_e=G?le:{};if(K<n||K>=W){_e.skip=!0;continue}const de=this.getParsed(K),pe=Li(de[E]),Oe=_e[A]=c.getPixelForValue(de[A],K),He=_e[E]=u||pe?a.getBasePixel():a.getPixelForValue(g?this.applyStack(a,de,g):de[E],K);_e.skip=isNaN(Oe)||isNaN(He)||pe,_e.stop=K>0&&Math.abs(de[A]-Z[A])>$,B&&(_e.parsed=de,_e.raw=_.data[K]),N&&(_e.options=S||this.resolveDataElementOptions(K,le.active?"active":o)),G||this.updateElement(le,K,_e,o),Z=de}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,o=t.data||[];if(!o.length)return i;const u=o[0].size(this.resolveDataElementOptions(0)),c=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,u,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}wn(fv,"id","line"),wn(fv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),wn(fv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class bx extends xu{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,o=i.data.labels||[],u=d_(n._parsed[t].r,i.options.locale);return{label:o[t]||"",value:u}}parseObjectData(t,n,i,o){return zD.bind(this)(t,n,i,o)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,o)=>{const u=this.getParsed(o).r;!isNaN(u)&&this.chart.getDataVisibility(o)&&(u<n.min&&(n.min=u),u>n.max&&(n.max=u))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,o=Math.min(n.right-n.left,n.bottom-n.top),u=Math.max(o/2,0),c=Math.max(i.cutoutPercentage?u/100*i.cutoutPercentage:1,0),a=(u-c)/t.getVisibleDatasetCount();this.outerRadius=u-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,i,o){const u=o==="reset",c=this.chart,g=c.options.animation,_=this._cachedMeta.rScale,S=_.xCenter,N=_.yCenter,A=_.getIndexAngle(0)-.5*ss;let E=A,D;const B=360/this.countVisibleElements();for(D=0;D<n;++D)E+=this._computeAngle(D,o,B);for(D=n;D<n+i;D++){const $=t[D];let G=E,W=E+this._computeAngle(D,o,B),J=c.getDataVisibility(D)?_.getDistanceFromCenterForValue(this.getParsed(D).r):0;E=W,u&&(g.animateScale&&(J=0),g.animateRotate&&(G=W=A));const Z={x:S,y:N,innerRadius:0,outerRadius:J,startAngle:G,endAngle:W,options:this.resolveDataElementOptions(D,$.active?"active":o)};this.updateElement($,D,Z,o)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?yu(this.resolveDataElementOptions(t,n).angle||i):0}}wn(bx,"id","polarArea"),wn(bx,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),wn(bx,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:o}}=t.legend.options;return n.labels.map((u,c)=>{const g=t.getDatasetMeta(0).controller.getStyle(c);return{text:u,fillStyle:g.backgroundColor,strokeStyle:g.borderColor,fontColor:o,lineWidth:g.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class jj extends dm{}wn(jj,"id","pie"),wn(jj,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class pv extends xu{getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,o){return zD.bind(this)(t,n,i,o)}update(t){const n=this._cachedMeta,i=n.dataset,o=n.data||[],u=n.iScale.getLabels();if(i.points=o,t!=="resize"){const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0);const a={_loop:!0,_fullLoop:u.length===o.length,options:c};this.updateElement(i,void 0,a,t)}this.updateElements(o,0,o.length,t)}updateElements(t,n,i,o){const u=this._cachedMeta.rScale,c=o==="reset";for(let a=n;a<n+i;a++){const g=t[a],_=this.resolveDataElementOptions(a,g.active?"active":o),S=u.getPointPositionForValue(a,this.getParsed(a).r),N=c?u.xCenter:S.x,A=c?u.yCenter:S.y,E={x:N,y:A,angle:S.angle,skip:isNaN(N)||isNaN(A),options:_};this.updateElement(g,a,E,o)}}}wn(pv,"id","radar"),wn(pv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),wn(pv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class mv extends xu{getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:u}=n,c=this.getParsed(t),a=o.getLabelForValue(c.x),g=u.getLabelForValue(c.y);return{label:i[t]||"",value:"("+a+", "+g+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,o=this.chart._animationsDisabled;let{start:u,count:c}=TD(n,i,o);if(this._drawStart=u,this._drawCount=c,kD(n)&&(u=0,c=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:g}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!g._decimated,a.points=i;const _=this.resolveDatasetElementOptions(t);_.segment=this.options.segment,this.updateElement(a,void 0,{animated:!o,options:_},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,u,c,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,o){const u=o==="reset",{iScale:c,vScale:a,_stacked:g,_dataset:_}=this._cachedMeta,S=this.resolveDataElementOptions(n,o),N=this.getSharedOptions(S),A=this.includeOptions(o,N),E=c.axis,D=a.axis,{spanGaps:B,segment:$}=this.options,G=py(B)?B:Number.POSITIVE_INFINITY,W=this.chart._animationsDisabled||u||o==="none";let J=n>0&&this.getParsed(n-1);for(let Z=n;Z<n+i;++Z){const K=t[Z],le=this.getParsed(Z),_e=W?K:{},de=Li(le[D]),pe=_e[E]=c.getPixelForValue(le[E],Z),Oe=_e[D]=u||de?a.getBasePixel():a.getPixelForValue(g?this.applyStack(a,le,g):le[D],Z);_e.skip=isNaN(pe)||isNaN(Oe)||de,_e.stop=Z>0&&Math.abs(le[E]-J[E])>G,$&&(_e.parsed=le,_e.raw=_.data[Z]),A&&(_e.options=N||this.resolveDataElementOptions(Z,K.active?"active":o)),W||this.updateElement(K,Z,_e,o),J=le}this.updateSharedOptions(N,o,S)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let a=0;for(let g=n.length-1;g>=0;--g)a=Math.max(a,n[g].size(this.resolveDataElementOptions(g))/2);return a>0&&a}const i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!n.length)return o;const u=n[0].size(this.resolveDataElementOptions(0)),c=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(o,u,c)/2}}wn(mv,"id","scatter"),wn(mv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),wn(mv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Vte=Object.freeze({__proto__:null,BarController:_x,BubbleController:hv,DoughnutController:dm,LineController:fv,PieController:jj,PolarAreaController:bx,RadarController:pv,ScatterController:mv});function tm(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class FT{constructor(t){wn(this,"options");this.options=t||{}}static override(t){Object.assign(FT.prototype,t)}init(){}formats(){return tm()}parse(){return tm()}format(){return tm()}add(){return tm()}diff(){return tm()}startOf(){return tm()}endOf(){return tm()}}var Ute={_date:FT};function $te(e,t,n,i){const{controller:o,data:u,_sorted:c}=e,a=o._cachedMeta.iScale,g=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&c&&u.length){const _=a._reversePixels?dee:_h;if(i){if(o._sharedOptions){const S=u[0],N=typeof S.getRange=="function"&&S.getRange(t);if(N){const A=_(u,t,n-N),E=_(u,t,n+N);return{lo:A.lo,hi:E.hi}}}}else{const S=_(u,t,n);if(g){const{vScale:N}=o._cachedMeta,{_parsed:A}=e,E=A.slice(0,S.lo+1).reverse().findIndex(B=>!Li(B[N.axis]));S.lo-=Math.max(0,E);const D=A.slice(S.hi).findIndex(B=>!Li(B[N.axis]));S.hi+=Math.max(0,D)}return S}}return{lo:0,hi:u.length-1}}function X1(e,t,n,i,o){const u=e.getSortedVisibleDatasetMetas(),c=n[t];for(let a=0,g=u.length;a<g;++a){const{index:_,data:S}=u[a],{lo:N,hi:A}=$te(u[a],t,c,o);for(let E=N;E<=A;++E){const D=S[E];D.skip||i(D,_,E)}}}function Hte(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,o){const u=t?Math.abs(i.x-o.x):0,c=n?Math.abs(i.y-o.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(c,2))}}function U2(e,t,n,i,o){const u=[];return!o&&!e.isPointInArea(t)||X1(e,n,t,function(a,g,_){!o&&!bh(a,e.chartArea,0)||a.inRange(t.x,t.y,i)&&u.push({element:a,datasetIndex:g,index:_})},!0),u}function qte(e,t,n,i){let o=[];function u(c,a,g){const{startAngle:_,endAngle:S}=c.getProps(["startAngle","endAngle"],i),{angle:N}=vD(c,{x:t.x,y:t.y});Lx(N,_,S)&&o.push({element:c,datasetIndex:a,index:g})}return X1(e,n,t,u),o}function Gte(e,t,n,i,o,u){let c=[];const a=Hte(n);let g=Number.POSITIVE_INFINITY;function _(S,N,A){const E=S.inRange(t.x,t.y,o);if(i&&!E)return;const D=S.getCenterPoint(o);if(!(!!u||e.isPointInArea(D))&&!E)return;const $=a(t,D);$<g?(c=[{element:S,datasetIndex:N,index:A}],g=$):$===g&&c.push({element:S,datasetIndex:N,index:A})}return X1(e,n,t,_),c}function $2(e,t,n,i,o,u){return!u&&!e.isPointInArea(t)?[]:n==="r"&&!i?qte(e,t,n,o):Gte(e,t,n,i,o,u)}function rA(e,t,n,i,o){const u=[],c=n==="x"?"inXRange":"inYRange";let a=!1;return X1(e,n,t,(g,_,S)=>{g[c]&&g[c](t[n],o)&&(u.push({element:g,datasetIndex:_,index:S}),a=a||g.inRange(t.x,t.y,o))}),i&&!a?[]:u}var Wte={modes:{index(e,t,n,i){const o=rm(t,e),u=n.axis||"x",c=n.includeInvisible||!1,a=n.intersect?U2(e,o,u,i,c):$2(e,o,u,!1,i,c),g=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(_=>{const S=a[0].index,N=_.data[S];N&&!N.skip&&g.push({element:N,datasetIndex:_.index,index:S})}),g):[]},dataset(e,t,n,i){const o=rm(t,e),u=n.axis||"xy",c=n.includeInvisible||!1;let a=n.intersect?U2(e,o,u,i,c):$2(e,o,u,!1,i,c);if(a.length>0){const g=a[0].datasetIndex,_=e.getDatasetMeta(g).data;a=[];for(let S=0;S<_.length;++S)a.push({element:_[S],datasetIndex:g,index:S})}return a},point(e,t,n,i){const o=rm(t,e),u=n.axis||"xy",c=n.includeInvisible||!1;return U2(e,o,u,i,c)},nearest(e,t,n,i){const o=rm(t,e),u=n.axis||"xy",c=n.includeInvisible||!1;return $2(e,o,u,n.intersect,i,c)},x(e,t,n,i){const o=rm(t,e);return rA(e,o,"x",n.intersect,i)},y(e,t,n,i){const o=rm(t,e);return rA(e,o,"y",n.intersect,i)}}};const GD=["left","top","right","bottom"];function G0(e,t){return e.filter(n=>n.pos===t)}function aA(e,t){return e.filter(n=>GD.indexOf(n.pos)===-1&&n.box.axis===t)}function W0(e,t){return e.sort((n,i)=>{const o=t?i:n,u=t?n:i;return o.weight===u.weight?o.index-u.index:o.weight-u.weight})}function Zte(e){const t=[];let n,i,o,u,c,a;for(n=0,i=(e||[]).length;n<i;++n)o=e[n],{position:u,options:{stack:c,stackWeight:a=1}}=o,t.push({index:n,box:o,pos:u,horizontal:o.isHorizontal(),weight:o.weight,stack:c&&u+c,stackWeight:a});return t}function Yte(e){const t={};for(const n of e){const{stack:i,pos:o,stackWeight:u}=n;if(!i||!GD.includes(o))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=u}return t}function Xte(e,t){const n=Yte(e),{vBoxMaxWidth:i,hBoxMaxHeight:o}=t;let u,c,a;for(u=0,c=e.length;u<c;++u){a=e[u];const{fullSize:g}=a.box,_=n[a.stack],S=_&&a.stackWeight/_.weight;a.horizontal?(a.width=S?S*i:g&&t.availableWidth,a.height=o):(a.width=i,a.height=S?S*o:g&&t.availableHeight)}return n}function Kte(e){const t=Zte(e),n=W0(t.filter(_=>_.box.fullSize),!0),i=W0(G0(t,"left"),!0),o=W0(G0(t,"right")),u=W0(G0(t,"top"),!0),c=W0(G0(t,"bottom")),a=aA(t,"x"),g=aA(t,"y");return{fullSize:n,leftAndTop:i.concat(u),rightAndBottom:o.concat(g).concat(c).concat(a),chartArea:G0(t,"chartArea"),vertical:i.concat(o).concat(g),horizontal:u.concat(c).concat(a)}}function oA(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function WD(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Qte(e,t,n,i){const{pos:o,box:u}=n,c=e.maxPadding;if(!Vi(o)){n.size&&(e[o]-=n.size);const N=i[n.stack]||{size:0,count:1};N.size=Math.max(N.size,n.horizontal?u.height:u.width),n.size=N.size/N.count,e[o]+=n.size}u.getPadding&&WD(c,u.getPadding());const a=Math.max(0,t.outerWidth-oA(c,e,"left","right")),g=Math.max(0,t.outerHeight-oA(c,e,"top","bottom")),_=a!==e.w,S=g!==e.h;return e.w=a,e.h=g,n.horizontal?{same:_,other:S}:{same:S,other:_}}function Jte(e){const t=e.maxPadding;function n(i){const o=Math.max(t[i]-e[i],0);return e[i]+=o,o}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function ene(e,t){const n=t.maxPadding;function i(o){const u={left:0,top:0,right:0,bottom:0};return o.forEach(c=>{u[c]=Math.max(t[c],n[c])}),u}return i(e?["left","right"]:["top","bottom"])}function ix(e,t,n,i){const o=[];let u,c,a,g,_,S;for(u=0,c=e.length,_=0;u<c;++u){a=e[u],g=a.box,g.update(a.width||t.w,a.height||t.h,ene(a.horizontal,t));const{same:N,other:A}=Qte(t,n,a,i);_|=N&&o.length,S=S||A,g.fullSize||o.push(a)}return _&&ix(o,t,n,i)||S}function Eb(e,t,n,i,o){e.top=n,e.left=t,e.right=t+i,e.bottom=n+o,e.width=i,e.height=o}function lA(e,t,n,i){const o=n.padding;let{x:u,y:c}=t;for(const a of e){const g=a.box,_=i[a.stack]||{placed:0,weight:1},S=a.stackWeight/_.weight||1;if(a.horizontal){const N=t.w*S,A=_.size||g.height;Ox(_.start)&&(c=_.start),g.fullSize?Eb(g,o.left,c,n.outerWidth-o.right-o.left,A):Eb(g,t.left+_.placed,c,N,A),_.start=c,_.placed+=N,c=g.bottom}else{const N=t.h*S,A=_.size||g.width;Ox(_.start)&&(u=_.start),g.fullSize?Eb(g,u,o.top,A,n.outerHeight-o.bottom-o.top):Eb(g,u,t.top+_.placed,A,N),_.start=u,_.placed+=N,u=g.right}}t.x=u,t.y=c}var _o={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const o=vo(e.options.layout.padding),u=Math.max(t-o.width,0),c=Math.max(n-o.height,0),a=Kte(e.boxes),g=a.vertical,_=a.horizontal;bs(e.boxes,B=>{typeof B.beforeLayout=="function"&&B.beforeLayout()});const S=g.reduce((B,$)=>$.box.options&&$.box.options.display===!1?B:B+1,0)||1,N=Object.freeze({outerWidth:t,outerHeight:n,padding:o,availableWidth:u,availableHeight:c,vBoxMaxWidth:u/2/S,hBoxMaxHeight:c/2}),A=Object.assign({},o);WD(A,vo(i));const E=Object.assign({maxPadding:A,w:u,h:c,x:o.left,y:o.top},o),D=Xte(g.concat(_),N);ix(a.fullSize,E,N,D),ix(g,E,N,D),ix(_,E,N,D)&&ix(g,E,N,D),Jte(E),lA(a.leftAndTop,E,N,D),E.x+=E.w,E.y+=E.h,lA(a.rightAndBottom,E,N,D),e.chartArea={left:E.left,top:E.top,right:E.left+E.w,bottom:E.top+E.h,height:E.h,width:E.w},bs(a.chartArea,B=>{const $=B.box;Object.assign($,e.chartArea),$.update(E.w,E.h,{left:0,top:0,right:0,bottom:0})})}};class ZD{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,o){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,o?Math.floor(n/o):i)}}isAttached(t){return!0}updateConfig(t){}}class tne extends ZD{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const gv="$chartjs",nne={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},cA=e=>e===null||e==="";function ine(e,t){const n=e.style,i=e.getAttribute("height"),o=e.getAttribute("width");if(e[gv]={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",cA(o)){const u=GE(e,"width");u!==void 0&&(e.width=u)}if(cA(i))if(e.style.height==="")e.height=e.width/(t||2);else{const u=GE(e,"height");u!==void 0&&(e.height=u)}return e}const YD=ste?{passive:!0}:!1;function sne(e,t,n){e&&e.addEventListener(t,n,YD)}function rne(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,YD)}function ane(e,t){const n=nne[e.type]||e.type,{x:i,y:o}=rm(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:o!==void 0?o:null}}function l1(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function one(e,t,n){const i=e.canvas,o=new MutationObserver(u=>{let c=!1;for(const a of u)c=c||l1(a.addedNodes,i),c=c&&!l1(a.removedNodes,i);c&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function lne(e,t,n){const i=e.canvas,o=new MutationObserver(u=>{let c=!1;for(const a of u)c=c||l1(a.removedNodes,i),c=c&&!l1(a.addedNodes,i);c&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const Bx=new Map;let uA=0;function XD(){const e=window.devicePixelRatio;e!==uA&&(uA=e,Bx.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function cne(e,t){Bx.size||window.addEventListener("resize",XD),Bx.set(e,t)}function une(e){Bx.delete(e),Bx.size||window.removeEventListener("resize",XD)}function dne(e,t,n){const i=e.canvas,o=i&&LT(i);if(!o)return;const u=CD((a,g)=>{const _=o.clientWidth;n(a,g),_<o.clientWidth&&n()},window),c=new ResizeObserver(a=>{const g=a[0],_=g.contentRect.width,S=g.contentRect.height;_===0&&S===0||u(_,S)});return c.observe(o),cne(e,u),c}function H2(e,t,n){n&&n.disconnect(),t==="resize"&&une(e)}function hne(e,t,n){const i=e.canvas,o=CD(u=>{e.ctx!==null&&n(ane(u,e))},e);return sne(i,t,o),o}class fne extends ZD{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(ine(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[gv])return!1;const i=n[gv].initial;["height","width"].forEach(u=>{const c=i[u];Li(c)?n.removeAttribute(u):n.setAttribute(u,c)});const o=i.style||{};return Object.keys(o).forEach(u=>{n.style[u]=o[u]}),n.width=n.width,delete n[gv],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const o=t.$proxies||(t.$proxies={}),c={attach:one,detach:lne,resize:dne}[n]||hne;o[n]=c(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),o=i[n];if(!o)return;({attach:H2,detach:H2,resize:H2}[n]||rne)(t,n,o),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,o){return ite(t,n,i,o)}isAttached(t){const n=t&&LT(t);return!!(n&&n.isConnected)}}function pne(e){return!OT()||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas?tne:fne}var Vb;let Dh=(Vb=class{constructor(){wn(this,"x");wn(this,"y");wn(this,"active",!1);wn(this,"options");wn(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return py(this.x)&&py(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const o={};return t.forEach(u=>{o[u]=i[u]&&i[u].active()?i[u]._to:this[u]}),o}},wn(Vb,"defaults",{}),wn(Vb,"defaultRoutes"),Vb);function mne(e,t){const n=e.options.ticks,i=gne(e),o=Math.min(n.maxTicksLimit||i,i),u=n.major.enabled?xne(t):[],c=u.length,a=u[0],g=u[c-1],_=[];if(c>o)return _ne(t,_,u,c/o),_;const S=yne(u,t,o);if(c>0){let N,A;const E=c>1?Math.round((g-a)/(c-1)):null;for(Ab(t,_,S,Li(E)?0:a-E,a),N=0,A=c-1;N<A;N++)Ab(t,_,S,u[N],u[N+1]);return Ab(t,_,S,g,Li(E)?t.length:g+E),_}return Ab(t,_,S),_}function gne(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),o=e._maxLength/n;return Math.floor(Math.min(i,o))}function yne(e,t,n){const i=bne(e),o=t.length/n;if(!i)return Math.max(o,1);const u=aee(i);for(let c=0,a=u.length-1;c<a;c++){const g=u[c];if(g>o)return g}return Math.max(o,1)}function xne(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function _ne(e,t,n,i){let o=0,u=n[0],c;for(i=Math.ceil(i),c=0;c<e.length;c++)c===u&&(t.push(e[c]),o++,u=n[o*i])}function Ab(e,t,n,i,o){const u=bi(i,0),c=Math.min(bi(o,e.length),e.length);let a=0,g,_,S;for(n=Math.ceil(n),o&&(g=o-i,n=g/Math.floor(g/n)),S=u;S<0;)a++,S=Math.round(u+a*n);for(_=Math.max(u,0);_<c;_++)_===S&&(t.push(e[_]),a++,S=Math.round(u+a*n))}function bne(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const vne=e=>e==="left"?"right":e==="right"?"left":e,dA=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,hA=(e,t)=>Math.min(t||e,e);function fA(e,t){const n=[],i=e.length/t,o=e.length;let u=0;for(;u<o;u+=i)n.push(e[Math.floor(u)]);return n}function wne(e,t,n){const i=e.ticks.length,o=Math.min(t,i-1),u=e._startPixel,c=e._endPixel,a=1e-6;let g=e.getPixelForTick(o),_;if(!(n&&(i===1?_=Math.max(g-u,c-g):t===0?_=(e.getPixelForTick(1)-g)/2:_=(g-e.getPixelForTick(o-1))/2,g+=o<t?_:-_,g<u-a||g>c+a)))return g}function Sne(e,t){bs(e,n=>{const i=n.gc,o=i.length/2;let u;if(o>t){for(u=0;u<o;++u)delete n.data[i[u]];i.splice(0,o)}})}function Z0(e){return e.drawTicks?e.tickLength:0}function pA(e,t){if(!e.display)return 0;const n=ca(e.font,t),i=vo(e.padding);return(sr(e.text)?e.text.length:1)*n.lineHeight+i.height}function jne(e,t){return tp(e,{scale:t,type:"scale"})}function Cne(e,t,n){return tp(e,{tick:n,index:t,type:"tick"})}function Tne(e,t,n){let i=AT(e);return(n&&t!=="right"||!n&&t==="right")&&(i=vne(i)),i}function kne(e,t,n,i){const{top:o,left:u,bottom:c,right:a,chart:g}=e,{chartArea:_,scales:S}=g;let N=0,A,E,D;const B=c-o,$=a-u;if(e.isHorizontal()){if(E=fo(i,u,a),Vi(n)){const G=Object.keys(n)[0],W=n[G];D=S[G].getPixelForValue(W)+B-t}else n==="center"?D=(_.bottom+_.top)/2+B-t:D=dA(e,n,t);A=a-u}else{if(Vi(n)){const G=Object.keys(n)[0],W=n[G];E=S[G].getPixelForValue(W)-$+t}else n==="center"?E=(_.left+_.right)/2-$+t:E=dA(e,n,t);D=fo(i,c,o),N=n==="left"?-Er:Er}return{titleX:E,titleY:D,maxWidth:A,rotation:N}}class zm extends Dh{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:o}=this;return t=zl(t,Number.POSITIVE_INFINITY),n=zl(n,Number.NEGATIVE_INFINITY),i=zl(i,Number.POSITIVE_INFINITY),o=zl(o,Number.NEGATIVE_INFINITY),{min:zl(t,i),max:zl(n,o),minDefined:wr(t),maxDefined:wr(n)}}getMinMax(t){let{min:n,max:i,minDefined:o,maxDefined:u}=this.getUserBounds(),c;if(o&&u)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let g=0,_=a.length;g<_;++g)c=a[g].controller.getMinMax(this,t),o||(n=Math.min(n,c.min)),u||(i=Math.max(i,c.max));return n=u&&n>i?i:n,i=o&&n>i?n:i,{min:zl(n,zl(i,n)),max:zl(i,zl(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ws(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:o,grace:u,ticks:c}=this.options,a=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=zee(this,u,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const g=a<this.ticks.length;this._convertTicksToLabels(g?fA(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=mne(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),g&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ws(this.options.afterUpdate,[this])}beforeSetDimensions(){Ws(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ws(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ws(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ws(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,o,u;for(i=0,o=t.length;i<o;i++)u=t[i],u.label=Ws(n.callback,[u.value,i,t],this)}afterTickToLabelConversion(){Ws(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ws(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=hA(this.ticks.length,t.ticks.maxTicksLimit),o=n.minRotation||0,u=n.maxRotation;let c=o,a,g,_;if(!this._isVisible()||!n.display||o>=u||i<=1||!this.isHorizontal()){this.labelRotation=o;return}const S=this._getLabelSizes(),N=S.widest.width,A=S.highest.height,E=Ta(this.chart.width-N,0,this.maxWidth);a=t.offset?this.maxWidth/i:E/(i-1),N+6>a&&(a=E/(i-(t.offset?.5:1)),g=this.maxHeight-Z0(t.grid)-n.padding-pA(t.title,this.chart.options.font),_=Math.sqrt(N*N+A*A),c=MT(Math.min(Math.asin(Ta((S.highest.height+6)/a,-1,1)),Math.asin(Ta(g/_,-1,1))-Math.asin(Ta(A/_,-1,1)))),c=Math.max(o,Math.min(u,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ws(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ws(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:o,grid:u}}=this,c=this._isVisible(),a=this.isHorizontal();if(c){const g=pA(o,n.options.font);if(a?(t.width=this.maxWidth,t.height=Z0(u)+g):(t.height=this.maxHeight,t.width=Z0(u)+g),i.display&&this.ticks.length){const{first:_,last:S,widest:N,highest:A}=this._getLabelSizes(),E=i.padding*2,D=yu(this.labelRotation),B=Math.cos(D),$=Math.sin(D);if(a){const G=i.mirror?0:$*N.width+B*A.height;t.height=Math.min(this.maxHeight,t.height+G+E)}else{const G=i.mirror?0:B*N.width+$*A.height;t.width=Math.min(this.maxWidth,t.width+G+E)}this._calculatePadding(_,S,$,B)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,o){const{ticks:{align:u,padding:c},position:a}=this.options,g=this.labelRotation!==0,_=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const S=this.getPixelForTick(0)-this.left,N=this.right-this.getPixelForTick(this.ticks.length-1);let A=0,E=0;g?_?(A=o*t.width,E=i*n.height):(A=i*t.height,E=o*n.width):u==="start"?E=n.width:u==="end"?A=t.width:u!=="inner"&&(A=t.width/2,E=n.width/2),this.paddingLeft=Math.max((A-S+c)*this.width/(this.width-S),0),this.paddingRight=Math.max((E-N+c)*this.width/(this.width-N),0)}else{let S=n.height/2,N=t.height/2;u==="start"?(S=0,N=t.height):u==="end"&&(S=n.height,N=0),this.paddingTop=S+c,this.paddingBottom=N+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ws(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Li(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=fA(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:o,_longestTextCache:u}=this,c=[],a=[],g=Math.floor(n/hA(n,i));let _=0,S=0,N,A,E,D,B,$,G,W,J,Z,K;for(N=0;N<n;N+=g){if(D=t[N].label,B=this._resolveTickFontOptions(N),o.font=$=B.string,G=u[$]=u[$]||{data:{},gc:[]},W=B.lineHeight,J=Z=0,!Li(D)&&!sr(D))J=a1(o,G.data,G.gc,J,D),Z=W;else if(sr(D))for(A=0,E=D.length;A<E;++A)K=D[A],!Li(K)&&!sr(K)&&(J=a1(o,G.data,G.gc,J,K),Z+=W);c.push(J),a.push(Z),_=Math.max(J,_),S=Math.max(Z,S)}Sne(u,n);const le=c.indexOf(_),_e=a.indexOf(S),de=pe=>({width:c[pe]||0,height:a[pe]||0});return{first:de(0),last:de(n-1),widest:de(le),highest:de(_e),widths:c,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return uee(this._alignToPixels?em(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=Cne(this.getContext(),t,i))}return this.$context||(this.$context=jne(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=yu(this.labelRotation),i=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),u=this._getLabelSizes(),c=t.autoSkipPadding||0,a=u?u.widest.width+c:0,g=u?u.highest.height+c:0;return this.isHorizontal()?g*i>a*o?a/i:g/o:g*o<a*i?g/i:a/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,o=this.options,{grid:u,position:c,border:a}=o,g=u.offset,_=this.isHorizontal(),N=this.ticks.length+(g?1:0),A=Z0(u),E=[],D=a.setContext(this.getContext()),B=D.display?D.width:0,$=B/2,G=function(ze){return em(i,ze,B)};let W,J,Z,K,le,_e,de,pe,Oe,He,We,st;if(c==="top")W=G(this.bottom),_e=this.bottom-A,pe=W-$,He=G(t.top)+$,st=t.bottom;else if(c==="bottom")W=G(this.top),He=t.top,st=G(t.bottom)-$,_e=W+$,pe=this.top+A;else if(c==="left")W=G(this.right),le=this.right-A,de=W-$,Oe=G(t.left)+$,We=t.right;else if(c==="right")W=G(this.left),Oe=t.left,We=G(t.right)-$,le=W+$,de=this.left+A;else if(n==="x"){if(c==="center")W=G((t.top+t.bottom)/2+.5);else if(Vi(c)){const ze=Object.keys(c)[0],Qe=c[ze];W=G(this.chart.scales[ze].getPixelForValue(Qe))}He=t.top,st=t.bottom,_e=W+$,pe=_e+A}else if(n==="y"){if(c==="center")W=G((t.left+t.right)/2);else if(Vi(c)){const ze=Object.keys(c)[0],Qe=c[ze];W=G(this.chart.scales[ze].getPixelForValue(Qe))}le=W-$,de=le-A,Oe=t.left,We=t.right}const At=bi(o.ticks.maxTicksLimit,N),vt=Math.max(1,Math.ceil(N/At));for(J=0;J<N;J+=vt){const ze=this.getContext(J),Qe=u.setContext(ze),Je=a.setContext(ze),Pt=Qe.lineWidth,fe=Qe.color,Xe=Je.dash||[],tt=Je.dashOffset,Ae=Qe.tickWidth,ot=Qe.tickColor,ct=Qe.tickBorderDash||[],ut=Qe.tickBorderDashOffset;Z=wne(this,J,g),Z!==void 0&&(K=em(i,Z,Pt),_?le=de=Oe=We=K:_e=pe=He=st=K,E.push({tx1:le,ty1:_e,tx2:de,ty2:pe,x1:Oe,y1:He,x2:We,y2:st,width:Pt,color:fe,borderDash:Xe,borderDashOffset:tt,tickWidth:Ae,tickColor:ot,tickBorderDash:ct,tickBorderDashOffset:ut}))}return this._ticksLength=N,this._borderValue=W,E}_computeLabelItems(t){const n=this.axis,i=this.options,{position:o,ticks:u}=i,c=this.isHorizontal(),a=this.ticks,{align:g,crossAlign:_,padding:S,mirror:N}=u,A=Z0(i.grid),E=A+S,D=N?-S:E,B=-yu(this.labelRotation),$=[];let G,W,J,Z,K,le,_e,de,pe,Oe,He,We,st="middle";if(o==="top")le=this.bottom-D,_e=this._getXAxisLabelAlignment();else if(o==="bottom")le=this.top+D,_e=this._getXAxisLabelAlignment();else if(o==="left"){const vt=this._getYAxisLabelAlignment(A);_e=vt.textAlign,K=vt.x}else if(o==="right"){const vt=this._getYAxisLabelAlignment(A);_e=vt.textAlign,K=vt.x}else if(n==="x"){if(o==="center")le=(t.top+t.bottom)/2+E;else if(Vi(o)){const vt=Object.keys(o)[0],ze=o[vt];le=this.chart.scales[vt].getPixelForValue(ze)+E}_e=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")K=(t.left+t.right)/2-E;else if(Vi(o)){const vt=Object.keys(o)[0],ze=o[vt];K=this.chart.scales[vt].getPixelForValue(ze)}_e=this._getYAxisLabelAlignment(A).textAlign}n==="y"&&(g==="start"?st="top":g==="end"&&(st="bottom"));const At=this._getLabelSizes();for(G=0,W=a.length;G<W;++G){J=a[G],Z=J.label;const vt=u.setContext(this.getContext(G));de=this.getPixelForTick(G)+u.labelOffset,pe=this._resolveTickFontOptions(G),Oe=pe.lineHeight,He=sr(Z)?Z.length:1;const ze=He/2,Qe=vt.color,Je=vt.textStrokeColor,Pt=vt.textStrokeWidth;let fe=_e;c?(K=de,_e==="inner"&&(G===W-1?fe=this.options.reverse?"left":"right":G===0?fe=this.options.reverse?"right":"left":fe="center"),o==="top"?_==="near"||B!==0?We=-He*Oe+Oe/2:_==="center"?We=-At.highest.height/2-ze*Oe+Oe:We=-At.highest.height+Oe/2:_==="near"||B!==0?We=Oe/2:_==="center"?We=At.highest.height/2-ze*Oe:We=At.highest.height-He*Oe,N&&(We*=-1),B!==0&&!vt.showLabelBackdrop&&(K+=Oe/2*Math.sin(B))):(le=de,We=(1-He)*Oe/2);let Xe;if(vt.showLabelBackdrop){const tt=vo(vt.backdropPadding),Ae=At.heights[G],ot=At.widths[G];let ct=We-tt.top,ut=0-tt.left;switch(st){case"middle":ct-=Ae/2;break;case"bottom":ct-=Ae;break}switch(_e){case"center":ut-=ot/2;break;case"right":ut-=ot;break;case"inner":G===W-1?ut-=ot:G>0&&(ut-=ot/2);break}Xe={left:ut,top:ct,width:ot+tt.width,height:Ae+tt.height,color:vt.backdropColor}}$.push({label:Z,font:pe,textOffset:We,options:{rotation:B,color:Qe,strokeColor:Je,strokeWidth:Pt,textAlign:fe,textBaseline:st,translation:[K,le],backdrop:Xe}})}return $}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-yu(this.labelRotation))return t==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"?o="right":n.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:o,padding:u}}=this.options,c=this._getLabelSizes(),a=t+u,g=c.widest.width;let _,S;return n==="left"?o?(S=this.right+u,i==="near"?_="left":i==="center"?(_="center",S+=g/2):(_="right",S+=g)):(S=this.right-a,i==="near"?_="right":i==="center"?(_="center",S-=g/2):(_="left",S=this.left)):n==="right"?o?(S=this.left+u,i==="near"?_="right":i==="center"?(_="center",S-=g/2):(_="left",S-=g)):(S=this.left+a,i==="near"?_="left":i==="center"?(_="center",S+=g/2):(_="right",S=this.right)):_="right",{textAlign:_,x:S}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:o,width:u,height:c}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,o,u,c),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(u=>u.value===t);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let u,c;const a=(g,_,S)=>{!S.width||!S.color||(i.save(),i.lineWidth=S.width,i.strokeStyle=S.color,i.setLineDash(S.borderDash||[]),i.lineDashOffset=S.borderDashOffset,i.beginPath(),i.moveTo(g.x,g.y),i.lineTo(_.x,_.y),i.stroke(),i.restore())};if(n.display)for(u=0,c=o.length;u<c;++u){const g=o[u];n.drawOnChartArea&&a({x:g.x1,y:g.y1},{x:g.x2,y:g.y2},g),n.drawTicks&&a({x:g.tx1,y:g.ty1},{x:g.tx2,y:g.ty2},{color:g.tickColor,width:g.tickWidth,borderDash:g.tickBorderDash,borderDashOffset:g.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:o}}=this,u=i.setContext(this.getContext()),c=i.display?u.width:0;if(!c)return;const a=o.setContext(this.getContext(0)).lineWidth,g=this._borderValue;let _,S,N,A;this.isHorizontal()?(_=em(t,this.left,c)-c/2,S=em(t,this.right,a)+a/2,N=A=g):(N=em(t,this.top,c)-c/2,A=em(t,this.bottom,a)+a/2,_=S=g),n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.beginPath(),n.moveTo(_,N),n.lineTo(S,A),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,o=this._computeLabelArea();o&&W1(i,o);const u=this.getLabelItems(t);for(const c of u){const a=c.options,g=c.font,_=c.label,S=c.textOffset;Pm(i,_,0,S,g,a)}o&&Z1(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:o}}=this;if(!i.display)return;const u=ca(i.font),c=vo(i.padding),a=i.align;let g=u.lineHeight/2;n==="bottom"||n==="center"||Vi(n)?(g+=c.bottom,sr(i.text)&&(g+=u.lineHeight*(i.text.length-1))):g+=c.top;const{titleX:_,titleY:S,maxWidth:N,rotation:A}=kne(this,g,n,a);Pm(t,i.text,0,0,u,{color:i.color,maxWidth:N,rotation:A,textAlign:Tne(a,n,o),textBaseline:"middle",translation:[_,S]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=bi(t.grid&&t.grid.z,-1),o=bi(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==zm.prototype.draw?[{z:n,draw:u=>{this.draw(u)}}]:[{z:i,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:n,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[];let u,c;for(u=0,c=n.length;u<c;++u){const a=n[u];a[i]===this.id&&(!t||a.type===t)&&o.push(a)}return o}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return ca(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Pb{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;Ene(n)&&(i=this.register(n));const o=this.items,u=t.id,c=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+t);return u in o||(o[u]=t,Nne(t,c,i),this.override&&ar.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,o=this.scope;i in n&&delete n[i],o&&i in ar[o]&&(delete ar[o][i],this.override&&delete Am[i])}}function Nne(e,t,n){const i=Ix(Object.create(null),[n?ar.get(n):{},ar.get(t),e.defaults]);ar.set(t,i),e.defaultRoutes&&Mne(t,e.defaultRoutes),e.descriptors&&ar.describe(t,e.descriptors)}function Mne(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),o=i.pop(),u=[e].concat(i).join("."),c=t[n].split("."),a=c.pop(),g=c.join(".");ar.route(u,o,g,a)})}function Ene(e){return"id"in e&&"defaults"in e}class Ane{constructor(){this.controllers=new Pb(xu,"datasets",!0),this.elements=new Pb(Dh,"elements"),this.plugins=new Pb(Object,"plugins"),this.scales=new Pb(zm,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(o=>{const u=i||this._getRegistryForType(o);i||u.isForType(o)||u===this.plugins&&o.id?this._exec(t,u,o):bs(o,c=>{const a=i||this._getRegistryForType(c);this._exec(t,a,c)})})}_exec(t,n,i){const o=NT(t);Ws(i["before"+o],[],i),n[t](i),Ws(i["after"+o],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const o=n.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return o}}var dd=new Ane;class Pne{constructor(){this._init=[]}notify(t,n,i,o){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const u=o?this._descriptors(t).filter(o):this._descriptors(t),c=this._notify(u,t,n,i);return n==="afterDestroy"&&(this._notify(u,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,n,i,o){o=o||{};for(const u of t){const c=u.plugin,a=c[i],g=[n,o,u.options];if(Ws(a,g,c)===!1&&o.cancelable)return!1}return!0}invalidate(){Li(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,o=bi(i.options&&i.options.plugins,{}),u=Rne(i);return o===!1&&!n?[]:zne(t,u,o,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,o=(u,c)=>u.filter(a=>!c.some(g=>a.plugin.id===g.plugin.id));this._notify(o(n,i),t,"stop"),this._notify(o(i,n),t,"start")}}function Rne(e){const t={},n=[],i=Object.keys(dd.plugins.items);for(let u=0;u<i.length;u++)n.push(dd.getPlugin(i[u]));const o=e.plugins||[];for(let u=0;u<o.length;u++){const c=o[u];n.indexOf(c)===-1&&(n.push(c),t[c.id]=!0)}return{plugins:n,localIds:t}}function Dne(e,t){return!t&&e===!1?null:e===!0?{}:e}function zne(e,{plugins:t,localIds:n},i,o){const u=[],c=e.getContext();for(const a of t){const g=a.id,_=Dne(i[g],o);_!==null&&u.push({plugin:a,options:Ine(e.config,{plugin:a,local:n[g]},_,c)})}return u}function Ine(e,{plugin:t,local:n},i,o){const u=e.pluginScopeKeys(t),c=e.getOptionScopes(i,u);return n&&t.defaults&&c.push(t.defaults),e.createResolver(c,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cj(e,t){const n=ar.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function One(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Lne(e,t){return e===t?"_index_":"_value_"}function mA(e){if(e==="x"||e==="y"||e==="r")return e}function Fne(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Tj(e,...t){if(mA(e))return e;for(const n of t){const i=n.axis||Fne(n.position)||e.length>1&&mA(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function gA(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Bne(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return gA(e,"x",n[0])||gA(e,"y",n[0])}return{}}function Vne(e,t){const n=Am[e.type]||{scales:{}},i=t.scales||{},o=Cj(e.type,t),u=Object.create(null);return Object.keys(i).forEach(c=>{const a=i[c];if(!Vi(a))return console.error(`Invalid scale configuration for scale: ${c}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const g=Tj(c,a,Bne(c,e),ar.scales[a.type]),_=Lne(g,o),S=n.scales||{};u[c]=mx(Object.create(null),[{axis:g},a,S[g],S[_]])}),e.data.datasets.forEach(c=>{const a=c.type||e.type,g=c.indexAxis||Cj(a,t),S=(Am[a]||{}).scales||{};Object.keys(S).forEach(N=>{const A=One(N,g),E=c[A+"AxisID"]||A;u[E]=u[E]||Object.create(null),mx(u[E],[{axis:A},i[E],S[N]])})}),Object.keys(u).forEach(c=>{const a=u[c];mx(a,[ar.scales[a.type],ar.scale])}),u}function KD(e){const t=e.options||(e.options={});t.plugins=bi(t.plugins,{}),t.scales=Vne(e,t)}function QD(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Une(e){return e=e||{},e.data=QD(e.data),KD(e),e}const yA=new Map,JD=new Set;function Rb(e,t){let n=yA.get(e);return n||(n=t(),yA.set(e,n),JD.add(n)),n}const Y0=(e,t,n)=>{const i=Yf(t,n);i!==void 0&&e.add(i)};class $ne{constructor(t){this._config=Une(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=QD(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),KD(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Rb(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Rb(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Rb(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return Rb(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let o=i.get(t);return(!o||n)&&(o=new Map,i.set(t,o)),o}getOptionScopes(t,n,i){const{options:o,type:u}=this,c=this._cachedScopes(t,i),a=c.get(n);if(a)return a;const g=new Set;n.forEach(S=>{t&&(g.add(t),S.forEach(N=>Y0(g,t,N))),S.forEach(N=>Y0(g,o,N)),S.forEach(N=>Y0(g,Am[u]||{},N)),S.forEach(N=>Y0(g,ar,N)),S.forEach(N=>Y0(g,wj,N))});const _=Array.from(g);return _.length===0&&_.push(Object.create(null)),JD.has(n)&&c.set(n,_),_}chartOptionScopes(){const{options:t,type:n}=this;return[t,Am[n]||{},ar.datasets[n]||{},{type:n},ar,wj]}resolveNamedOptions(t,n,i,o=[""]){const u={$shared:!0},{resolver:c,subPrefixes:a}=xA(this._resolverCache,t,o);let g=c;if(qne(c,n)){u.$shared=!1,i=Xf(i)?i():i;const _=this.createResolver(t,i,a);g=my(c,i,_)}for(const _ of n)u[_]=g[_];return u}createResolver(t,n,i=[""],o){const{resolver:u}=xA(this._resolverCache,t,i);return Vi(n)?my(u,n,void 0,o):u}}function xA(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const o=n.join();let u=i.get(o);return u||(u={resolver:DT(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(o,u)),u}const Hne=e=>Vi(e)&&Object.getOwnPropertyNames(e).some(t=>Xf(e[t]));function qne(e,t){const{isScriptable:n,isIndexable:i}=AD(e);for(const o of t){const u=n(o),c=i(o),a=(c||u)&&e[o];if(u&&(Xf(a)||Hne(a))||c&&sr(a))return!0}return!1}var Gne="4.5.0";const Wne=["top","bottom","left","right","chartArea"];function _A(e,t){return e==="top"||e==="bottom"||Wne.indexOf(e)===-1&&t==="x"}function bA(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function vA(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ws(n&&n.onComplete,[e],t)}function Zne(e){const t=e.chart,n=t.options.animation;Ws(n&&n.onProgress,[e],t)}function ez(e){return OT()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const yv={},wA=e=>{const t=ez(e);return Object.values(yv).filter(n=>n.canvas===t).pop()};function Yne(e,t,n){const i=Object.keys(e);for(const o of i){const u=+o;if(u>=t){const c=e[o];delete e[o],(n>0||u>t)&&(e[u+n]=c)}}}function Xne(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}var Pf;let K1=(Pf=class{static register(...t){dd.add(...t),SA()}static unregister(...t){dd.remove(...t),SA()}constructor(t,n){const i=this.config=new $ne(n),o=ez(t),u=wA(o);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||pne(o)),this.platform.updateConfig(i);const a=this.platform.acquireContext(o,c.aspectRatio),g=a&&a.canvas,_=g&&g.height,S=g&&g.width;if(this.id=KJ(),this.ctx=a,this.canvas=g,this.width=S,this.height=_,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Pne,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=pee(N=>this.update(N),c.resizeDelay||0),this._dataChanges=[],yv[this.id]=this,!a||!g){console.error("Failed to create chart: can't acquire context from the given item");return}ph.listen(this,"complete",vA),ph.listen(this,"progress",Zne),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:o,_aspectRatio:u}=this;return Li(t)?n&&u?u:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return dd}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return UE(this.canvas,this.ctx),this}stop(){return ph.stop(this),this}resize(t,n){ph.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,o=this.canvas,u=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(o,t,n,u),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),g=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,qE(this,a,!0)&&(this.notifyPlugins("resize",{size:c}),Ws(i.onResize,[this,c],this),this.attached&&this._doResize(g)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};bs(n,(i,o)=>{i.id=o})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,o=Object.keys(i).reduce((c,a)=>(c[a]=!1,c),{});let u=[];n&&(u=u.concat(Object.keys(n).map(c=>{const a=n[c],g=Tj(c,a),_=g==="r",S=g==="x";return{options:a,dposition:_?"chartArea":S?"bottom":"left",dtype:_?"radialLinear":S?"category":"linear"}}))),bs(u,c=>{const a=c.options,g=a.id,_=Tj(g,a),S=bi(a.type,c.dtype);(a.position===void 0||_A(a.position,_)!==_A(c.dposition))&&(a.position=c.dposition),o[g]=!0;let N=null;if(g in i&&i[g].type===S)N=i[g];else{const A=dd.getScale(S);N=new A({id:g,type:S,ctx:this.ctx,chart:this}),i[N.id]=N}N.init(a,t)}),bs(o,(c,a)=>{c||delete i[a]}),bs(i,c=>{_o.configure(this,c,c.options),_o.addBox(this,c)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((o,u)=>o.index-u.index),i>n){for(let o=n;o<i;++o)this._destroyDatasetMeta(o);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(bA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,o)=>{n.filter(u=>u===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,o;for(this._removeUnreferencedMetasets(),i=0,o=n.length;i<o;i++){const u=n[i];let c=this.getDatasetMeta(i);const a=u.type||this.config.type;if(c.type&&c.type!==a&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=a,c.indexAxis=u.indexAxis||Cj(a,this.options),c.order=u.order||0,c.index=i,c.label=""+u.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const g=dd.getController(a),{datasetElementType:_,dataElementType:S}=ar.datasets[a];Object.assign(g,{dataElementType:dd.getElement(S),datasetElementType:_&&dd.getElement(_)}),c.controller=new g(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){bs(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let _=0,S=this.data.datasets.length;_<S;_++){const{controller:N}=this.getDatasetMeta(_),A=!o&&u.indexOf(N)===-1;N.buildOrUpdateElements(A),c=Math.max(+N.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),o||bs(u,_=>{_.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(bA("z","_idx"));const{_active:a,_lastEvent:g}=this;g?this._eventHandler(g,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){bs(this.scales,t=>{_o.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!RE(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:o,count:u}of n){const c=i==="_removeElements"?-u:u;Yne(t,o,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=u=>new Set(t.filter(c=>c[0]===u).map((c,a)=>a+","+c.splice(1).join(","))),o=i(0);for(let u=1;u<n;u++)if(!RE(o,i(u)))return;return Array.from(o).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;_o.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],bs(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,u)=>{o._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Xf(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),o={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ph.has(this)?this.attached&&!ph.running(this)&&ph.start(this):(this.draw(),vA({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let o,u;for(o=0,u=n.length;o<u;++o){const c=n[o];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},o=UD(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&W1(n,o),t.controller.draw(),o&&Z1(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return bh(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,o){const u=Wte.modes[n];return typeof u=="function"?u(this,t,i,o):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let o=i.filter(u=>u&&u._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=tp(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const o=i?"show":"hide",u=this.getDatasetMeta(t),c=u.controller._resolveAnimations(void 0,o);Ox(n)?(u.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(u,{visible:i}),this.update(a=>a.datasetIndex===t?o:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ph.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),UE(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete yv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(u,c)=>{n.addEventListener(this,u,c),t[u]=c},o=(u,c,a)=>{u.offsetX=c,u.offsetY=a,this._eventHandler(u)};bs(this.options.events,u=>i(u,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(g,_)=>{n.addEventListener(this,g,_),t[g]=_},o=(g,_)=>{t[g]&&(n.removeEventListener(this,g,_),delete t[g])},u=(g,_)=>{this.canvas&&this.resize(g,_)};let c;const a=()=>{o("attach",a),this.attached=!0,this.resize(),i("resize",u),i("detach",c)};c=()=>{this.attached=!1,o("resize",u),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():c()}unbindEvents(){bs(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},bs(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const o=i?"set":"remove";let u,c,a,g;for(n==="dataset"&&(u=this.getDatasetMeta(t[0].datasetIndex),u.controller["_"+o+"DatasetHoverStyle"]()),a=0,g=t.length;a<g;++a){c=t[a];const _=c&&this.getDatasetMeta(c.datasetIndex).controller;_&&_[o+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:u,index:c})=>{const a=this.getDatasetMeta(u);if(!a)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:a.data[c],index:c}});!i1(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const o=this.options.hover,u=(g,_)=>g.filter(S=>!_.some(N=>S.datasetIndex===N.datasetIndex&&S.index===N.index)),c=u(n,t),a=i?t:u(t,n);c.length&&this.updateHoverStyle(c,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},o=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;const u=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(u||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:o=[],options:u}=this,c=n,a=this._getActiveElements(t,o,i,c),g=iee(t),_=Xne(t,this._lastEvent,i,g);i&&(this._lastEvent=null,Ws(u.onHover,[t,a,this],this),g&&Ws(u.onClick,[t,a,this],this));const S=!i1(a,o);return(S||n)&&(this._active=a,this._updateHoverStyles(a,o,n)),this._lastEvent=_,S}_getActiveElements(t,n,i,o){if(t.type==="mouseout")return[];if(!i)return n;const u=this.options.hover;return this.getElementsAtEventForMode(t,u.mode,u,o)}},wn(Pf,"defaults",ar),wn(Pf,"instances",yv),wn(Pf,"overrides",Am),wn(Pf,"registry",dd),wn(Pf,"version",Gne),wn(Pf,"getChart",wA),Pf);function SA(){return bs(K1.instances,e=>e._plugins.invalidate())}function Kne(e,t,n){const{startAngle:i,x:o,y:u,outerRadius:c,innerRadius:a,options:g}=t,{borderWidth:_,borderJoinStyle:S}=g,N=Math.min(_/c,mo(i-n));if(e.beginPath(),e.arc(o,u,c-_/2,i+N/2,n-N/2),a>0){const A=Math.min(_/a,mo(i-n));e.arc(o,u,a+_/2,n-A/2,i+A/2,!0)}else{const A=Math.min(_/2,c*mo(i-n));if(S==="round")e.arc(o,u,A,n-ss/2,i+ss/2,!0);else if(S==="bevel"){const E=2*A*A,D=-E*Math.cos(n+ss/2)+o,B=-E*Math.sin(n+ss/2)+u,$=E*Math.cos(i+ss/2)+o,G=E*Math.sin(i+ss/2)+u;e.lineTo(D,B),e.lineTo($,G)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Qne(e,t,n){const{startAngle:i,pixelMargin:o,x:u,y:c,outerRadius:a,innerRadius:g}=t;let _=o/a;e.beginPath(),e.arc(u,c,a,i-_,n+_),g>o?(_=o/g,e.arc(u,c,g,n+_,i-_,!0)):e.arc(u,c,o,n+Er,i-Er),e.closePath(),e.clip()}function Jne(e){return RT(e,["outerStart","outerEnd","innerStart","innerEnd"])}function eie(e,t,n,i){const o=Jne(e.options.borderRadius),u=(n-t)/2,c=Math.min(u,i*t/2),a=g=>{const _=(n-Math.min(u,g))*i/2;return Ta(g,0,Math.min(u,_))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:Ta(o.innerStart,0,c),innerEnd:Ta(o.innerEnd,0,c)}}function Ug(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function c1(e,t,n,i,o,u){const{x:c,y:a,startAngle:g,pixelMargin:_,innerRadius:S}=t,N=Math.max(t.outerRadius+i+n-_,0),A=S>0?S+i+n+_:0;let E=0;const D=o-g;if(i){const vt=S>0?S-i:0,ze=N>0?N-i:0,Qe=(vt+ze)/2,Je=Qe!==0?D*Qe/(Qe+i):D;E=(D-Je)/2}const B=Math.max(.001,D*N-n/ss)/N,$=(D-B)/2,G=g+$+E,W=o-$-E,{outerStart:J,outerEnd:Z,innerStart:K,innerEnd:le}=eie(t,A,N,W-G),_e=N-J,de=N-Z,pe=G+J/_e,Oe=W-Z/de,He=A+K,We=A+le,st=G+K/He,At=W-le/We;if(e.beginPath(),u){const vt=(pe+Oe)/2;if(e.arc(c,a,N,pe,vt),e.arc(c,a,N,vt,Oe),Z>0){const Pt=Ug(de,Oe,c,a);e.arc(Pt.x,Pt.y,Z,Oe,W+Er)}const ze=Ug(We,W,c,a);if(e.lineTo(ze.x,ze.y),le>0){const Pt=Ug(We,At,c,a);e.arc(Pt.x,Pt.y,le,W+Er,At+Math.PI)}const Qe=(W-le/A+(G+K/A))/2;if(e.arc(c,a,A,W-le/A,Qe,!0),e.arc(c,a,A,Qe,G+K/A,!0),K>0){const Pt=Ug(He,st,c,a);e.arc(Pt.x,Pt.y,K,st+Math.PI,G-Er)}const Je=Ug(_e,G,c,a);if(e.lineTo(Je.x,Je.y),J>0){const Pt=Ug(_e,pe,c,a);e.arc(Pt.x,Pt.y,J,G-Er,pe)}}else{e.moveTo(c,a);const vt=Math.cos(pe)*N+c,ze=Math.sin(pe)*N+a;e.lineTo(vt,ze);const Qe=Math.cos(Oe)*N+c,Je=Math.sin(Oe)*N+a;e.lineTo(Qe,Je)}e.closePath()}function tie(e,t,n,i,o){const{fullCircles:u,startAngle:c,circumference:a}=t;let g=t.endAngle;if(u){c1(e,t,n,i,g,o);for(let _=0;_<u;++_)e.fill();isNaN(a)||(g=c+(a%Js||Js))}return c1(e,t,n,i,g,o),e.fill(),g}function nie(e,t,n,i,o){const{fullCircles:u,startAngle:c,circumference:a,options:g}=t,{borderWidth:_,borderJoinStyle:S,borderDash:N,borderDashOffset:A,borderRadius:E}=g,D=g.borderAlign==="inner";if(!_)return;e.setLineDash(N||[]),e.lineDashOffset=A,D?(e.lineWidth=_*2,e.lineJoin=S||"round"):(e.lineWidth=_,e.lineJoin=S||"bevel");let B=t.endAngle;if(u){c1(e,t,n,i,B,o);for(let $=0;$<u;++$)e.stroke();isNaN(a)||(B=c+(a%Js||Js))}D&&Qne(e,t,B),g.selfJoin&&B-c>=ss&&E===0&&S!=="miter"&&Kne(e,t,B),u||(c1(e,t,n,i,B,o),e.stroke())}class sx extends Dh{constructor(n){super();wn(this,"circumference");wn(this,"endAngle");wn(this,"fullCircles");wn(this,"innerRadius");wn(this,"outerRadius");wn(this,"pixelMargin");wn(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,o){const u=this.getProps(["x","y"],o),{angle:c,distance:a}=vD(u,{x:n,y:i}),{startAngle:g,endAngle:_,innerRadius:S,outerRadius:N,circumference:A}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),E=(this.options.spacing+this.options.borderWidth)/2,D=bi(A,_-g),B=Lx(c,g,_)&&g!==_,$=D>=Js||B,G=xh(a,S+E,N+E);return $&&G}getCenterPoint(n){const{x:i,y:o,startAngle:u,endAngle:c,innerRadius:a,outerRadius:g}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:_,spacing:S}=this.options,N=(u+c)/2,A=(a+g+S+_)/2;return{x:i+Math.cos(N)*A,y:o+Math.sin(N)*A}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:o}=this,u=(i.offset||0)/4,c=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=o>Js?Math.floor(o/Js):0,o===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const g=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(g)*u,Math.sin(g)*u);const _=1-Math.sin(Math.min(ss,o||0)),S=u*_;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,tie(n,this,S,c,a),nie(n,this,S,c,a),n.restore()}}wn(sx,"id","arc"),wn(sx,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),wn(sx,"defaultRoutes",{backgroundColor:"backgroundColor"}),wn(sx,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function tz(e,t,n=t){e.lineCap=bi(n.borderCapStyle,t.borderCapStyle),e.setLineDash(bi(n.borderDash,t.borderDash)),e.lineDashOffset=bi(n.borderDashOffset,t.borderDashOffset),e.lineJoin=bi(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=bi(n.borderWidth,t.borderWidth),e.strokeStyle=bi(n.borderColor,t.borderColor)}function iie(e,t,n){e.lineTo(n.x,n.y)}function sie(e){return e.stepped?Tee:e.tension||e.cubicInterpolationMode==="monotone"?kee:iie}function nz(e,t,n={}){const i=e.length,{start:o=0,end:u=i-1}=n,{start:c,end:a}=t,g=Math.max(o,c),_=Math.min(u,a),S=o<c&&u<c||o>a&&u>a;return{count:i,start:g,loop:t.loop,ilen:_<g&&!S?i+_-g:_-g}}function rie(e,t,n,i){const{points:o,options:u}=t,{count:c,start:a,loop:g,ilen:_}=nz(o,n,i),S=sie(u);let{move:N=!0,reverse:A}=i||{},E,D,B;for(E=0;E<=_;++E)D=o[(a+(A?_-E:E))%c],!D.skip&&(N?(e.moveTo(D.x,D.y),N=!1):S(e,B,D,A,u.stepped),B=D);return g&&(D=o[(a+(A?_:0))%c],S(e,B,D,A,u.stepped)),!!g}function aie(e,t,n,i){const o=t.points,{count:u,start:c,ilen:a}=nz(o,n,i),{move:g=!0,reverse:_}=i||{};let S=0,N=0,A,E,D,B,$,G;const W=Z=>(c+(_?a-Z:Z))%u,J=()=>{B!==$&&(e.lineTo(S,$),e.lineTo(S,B),e.lineTo(S,G))};for(g&&(E=o[W(0)],e.moveTo(E.x,E.y)),A=0;A<=a;++A){if(E=o[W(A)],E.skip)continue;const Z=E.x,K=E.y,le=Z|0;le===D?(K<B?B=K:K>$&&($=K),S=(N*S+Z)/++N):(J(),e.lineTo(Z,K),D=le,N=0,B=$=K),G=K}J()}function kj(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?aie:rie}function oie(e){return e.stepped?rte:e.tension||e.cubicInterpolationMode==="monotone"?ate:am}function lie(e,t,n,i){let o=t._path;o||(o=t._path=new Path2D,t.path(o,n,i)&&o.closePath()),tz(e,t.options),e.stroke(o)}function cie(e,t,n,i){const{segments:o,options:u}=t,c=kj(t);for(const a of o)tz(e,u,a.style),e.beginPath(),c(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const uie=typeof Path2D=="function";function die(e,t,n,i){uie&&!t.options.segment?lie(e,t,n,i):cie(e,t,n,i)}class Bf extends Dh{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const o=i.spanGaps?this._loop:this._fullLoop;Kee(this._points,i,t,o,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hte(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,o=t[n],u=this.points,c=VD(this,{property:n,start:o,end:o});if(!c.length)return;const a=[],g=oie(i);let _,S;for(_=0,S=c.length;_<S;++_){const{start:N,end:A}=c[_],E=u[N],D=u[A];if(E===D){a.push(E);continue}const B=Math.abs((o-E[n])/(D[n]-E[n])),$=g(E,D,B,i.stepped);$[n]=t[n],a.push($)}return a.length===1?a[0]:a}pathSegment(t,n,i){return kj(this)(t,this,n,i)}path(t,n,i){const o=this.segments,u=kj(this);let c=this._loop;n=n||0,i=i||this.points.length-n;for(const a of o)c&=u(t,this,a,{start:n,end:n+i-1});return!!c}draw(t,n,i,o){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(t.save(),die(t,this,i,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}wn(Bf,"id","line"),wn(Bf,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),wn(Bf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),wn(Bf,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function jA(e,t,n,i){const o=e.options,{[n]:u}=e.getProps([n],i);return Math.abs(t-u)<o.radius+o.hitRadius}class xv extends Dh{constructor(n){super();wn(this,"parsed");wn(this,"skip");wn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,o){const u=this.options,{x:c,y:a}=this.getProps(["x","y"],o);return Math.pow(n-c,2)+Math.pow(i-a,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(n,i){return jA(this,n,"x",i)}inYRange(n,i){return jA(this,n,"y",i)}getCenterPoint(n){const{x:i,y:o}=this.getProps(["x","y"],n);return{x:i,y:o}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const o=i&&n.borderWidth||0;return(i+o)*2}draw(n,i){const o=this.options;this.skip||o.radius<.1||!bh(this,i,this.size(o)/2)||(n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.fillStyle=o.backgroundColor,Sj(n,o,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}wn(xv,"id","point"),wn(xv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),wn(xv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function iz(e,t){const{x:n,y:i,base:o,width:u,height:c}=e.getProps(["x","y","base","width","height"],t);let a,g,_,S,N;return e.horizontal?(N=c/2,a=Math.min(n,o),g=Math.max(n,o),_=i-N,S=i+N):(N=u/2,a=n-N,g=n+N,_=Math.min(i,o),S=Math.max(i,o)),{left:a,top:_,right:g,bottom:S}}function Vf(e,t,n,i){return e?0:Ta(t,n,i)}function hie(e,t,n){const i=e.options.borderWidth,o=e.borderSkipped,u=ED(i);return{t:Vf(o.top,u.top,0,n),r:Vf(o.right,u.right,0,t),b:Vf(o.bottom,u.bottom,0,n),l:Vf(o.left,u.left,0,t)}}function fie(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),o=e.options.borderRadius,u=ym(o),c=Math.min(t,n),a=e.borderSkipped,g=i||Vi(o);return{topLeft:Vf(!g||a.top||a.left,u.topLeft,0,c),topRight:Vf(!g||a.top||a.right,u.topRight,0,c),bottomLeft:Vf(!g||a.bottom||a.left,u.bottomLeft,0,c),bottomRight:Vf(!g||a.bottom||a.right,u.bottomRight,0,c)}}function pie(e){const t=iz(e),n=t.right-t.left,i=t.bottom-t.top,o=hie(e,n/2,i/2),u=fie(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:u},inner:{x:t.left+o.l,y:t.top+o.t,w:n-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,u.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,u.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,u.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,u.bottomRight-Math.max(o.b,o.r))}}}}function q2(e,t,n,i){const o=t===null,u=n===null,a=e&&!(o&&u)&&iz(e,i);return a&&(o||xh(t,a.left,a.right))&&(u||xh(n,a.top,a.bottom))}function mie(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function gie(e,t){e.rect(t.x,t.y,t.w,t.h)}function G2(e,t,n={}){const i=e.x!==n.x?-t:0,o=e.y!==n.y?-t:0,u=(e.x+e.w!==n.x+n.w?t:0)-i,c=(e.y+e.h!==n.y+n.h?t:0)-o;return{x:e.x+i,y:e.y+o,w:e.w+u,h:e.h+c,radius:e.radius}}class _v extends Dh{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:o}}=this,{inner:u,outer:c}=pie(this),a=mie(c.radius)?Fx:gie;t.save(),(c.w!==u.w||c.h!==u.h)&&(t.beginPath(),a(t,G2(c,n,u)),t.clip(),a(t,G2(u,-n,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,G2(u,n)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,n,i){return q2(this,t,n,i)}inXRange(t,n){return q2(this,t,null,n)}inYRange(t,n){return q2(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:o,horizontal:u}=this.getProps(["x","y","base","horizontal"],t);return{x:u?(n+o)/2:n,y:u?i:(i+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}wn(_v,"id","bar"),wn(_v,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),wn(_v,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var yie=Object.freeze({__proto__:null,ArcElement:sx,BarElement:_v,LineElement:Bf,PointElement:xv});const Nj=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],CA=Nj.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function sz(e){return Nj[e%Nj.length]}function rz(e){return CA[e%CA.length]}function xie(e,t){return e.borderColor=sz(t),e.backgroundColor=rz(t),++t}function _ie(e,t){return e.backgroundColor=e.data.map(()=>sz(t++)),t}function bie(e,t){return e.backgroundColor=e.data.map(()=>rz(t++)),t}function vie(e){let t=0;return(n,i)=>{const o=e.getDatasetMeta(i).controller;o instanceof dm?t=_ie(n,t):o instanceof bx?t=bie(n,t):o&&(t=xie(n,t))}}function TA(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function wie(e){return e&&(e.borderColor||e.backgroundColor)}function Sie(){return ar.borderColor!=="rgba(0,0,0,0.1)"||ar.backgroundColor!=="rgba(0,0,0,0.1)"}var jie={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:o}=e.config,{elements:u}=o,c=TA(i)||wie(o)||u&&TA(u)||Sie();if(!n.forceOverride&&c)return;const a=vie(e);i.forEach(a)}};function Cie(e,t,n,i,o){const u=o.samples||i;if(u>=n)return e.slice(t,t+n);const c=[],a=(n-2)/(u-2);let g=0;const _=t+n-1;let S=t,N,A,E,D,B;for(c[g++]=e[S],N=0;N<u-2;N++){let $=0,G=0,W;const J=Math.floor((N+1)*a)+1+t,Z=Math.min(Math.floor((N+2)*a)+1,n)+t,K=Z-J;for(W=J;W<Z;W++)$+=e[W].x,G+=e[W].y;$/=K,G/=K;const le=Math.floor(N*a)+1+t,_e=Math.min(Math.floor((N+1)*a)+1,n)+t,{x:de,y:pe}=e[S];for(E=D=-1,W=le;W<_e;W++)D=.5*Math.abs((de-$)*(e[W].y-pe)-(de-e[W].x)*(G-pe)),D>E&&(E=D,A=e[W],B=W);c[g++]=A,S=B}return c[g++]=e[_],c}function Tie(e,t,n,i){let o=0,u=0,c,a,g,_,S,N,A,E,D,B;const $=[],G=t+n-1,W=e[t].x,Z=e[G].x-W;for(c=t;c<t+n;++c){a=e[c],g=(a.x-W)/Z*i,_=a.y;const K=g|0;if(K===S)_<D?(D=_,N=c):_>B&&(B=_,A=c),o=(u*o+a.x)/++u;else{const le=c-1;if(!Li(N)&&!Li(A)){const _e=Math.min(N,A),de=Math.max(N,A);_e!==E&&_e!==le&&$.push(Me(te({},e[_e]),{x:o})),de!==E&&de!==le&&$.push(Me(te({},e[de]),{x:o}))}c>0&&le!==E&&$.push(e[le]),$.push(a),S=K,u=0,D=B=_,N=A=E=c}}return $}function az(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function kA(e){e.data.datasets.forEach(t=>{az(t)})}function kie(e,t){const n=t.length;let i=0,o;const{iScale:u}=e,{min:c,max:a,minDefined:g,maxDefined:_}=u.getUserBounds();return g&&(i=Ta(_h(t,u.axis,c).lo,0,n-1)),_?o=Ta(_h(t,u.axis,a).hi+1,i,n)-i:o=n-i,{start:i,count:o}}var Nie={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){kA(e);return}const i=e.width;e.data.datasets.forEach((o,u)=>{const{_data:c,indexAxis:a}=o,g=e.getDatasetMeta(u),_=c||o.data;if(nx([a,e.options.indexAxis])==="y"||!g.controller.supportsDecimation)return;const S=e.scales[g.xAxisID];if(S.type!=="linear"&&S.type!=="time"||e.options.parsing)return;let{start:N,count:A}=kie(g,_);const E=n.threshold||4*i;if(A<=E){az(o);return}Li(c)&&(o._data=_,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(B){this._data=B}}));let D;switch(n.algorithm){case"lttb":D=Cie(_,N,A,i,n);break;case"min-max":D=Tie(_,N,A,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}o._decimated=D})},destroy(e){kA(e)}};function Mie(e,t,n){const i=e.segments,o=e.points,u=t.points,c=[];for(const a of i){let{start:g,end:_}=a;_=Q1(g,_,o);const S=Mj(n,o[g],o[_],a.loop);if(!t.segments){c.push({source:a,target:S,start:o[g],end:o[_]});continue}const N=VD(t,S);for(const A of N){const E=Mj(n,u[A.start],u[A.end],A.loop),D=BD(a,o,E);for(const B of D)c.push({source:B,target:A,start:{[n]:NA(S,E,"start",Math.max)},end:{[n]:NA(S,E,"end",Math.min)}})}}return c}function Mj(e,t,n,i){if(i)return;let o=t[e],u=n[e];return e==="angle"&&(o=mo(o),u=mo(u)),{property:e,start:o,end:u}}function Eie(e,t){const{x:n=null,y:i=null}=e||{},o=t.points,u=[];return t.segments.forEach(({start:c,end:a})=>{a=Q1(c,a,o);const g=o[c],_=o[a];i!==null?(u.push({x:g.x,y:i}),u.push({x:_.x,y:i})):n!==null&&(u.push({x:n,y:g.y}),u.push({x:n,y:_.y}))}),u}function Q1(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function NA(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function oz(e,t){let n=[],i=!1;return sr(e)?(i=!0,n=e):n=Eie(e,t),n.length?new Bf({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function MA(e){return e&&e.fill!==!1}function Aie(e,t,n){let o=e[t].fill;const u=[t];let c;if(!n)return o;for(;o!==!1&&u.indexOf(o)===-1;){if(!wr(o))return o;if(c=e[o],!c)return!1;if(c.visible)return o;u.push(o),o=c.fill}return!1}function Pie(e,t,n){const i=Iie(e);if(Vi(i))return isNaN(i.value)?!1:i;let o=parseFloat(i);return wr(o)&&Math.floor(o)===o?Rie(i[0],t,o,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Rie(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function Die(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Vi(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function zie(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:Vi(e)?i=e.value:i=t.getBaseValue(),i}function Iie(e){const t=e.options,n=t.fill;let i=bi(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Oie(e){const{scale:t,index:n,line:i}=e,o=[],u=i.segments,c=i.points,a=Lie(t,n);a.push(oz({x:null,y:t.bottom},i));for(let g=0;g<u.length;g++){const _=u[g];for(let S=_.start;S<=_.end;S++)Fie(o,c[S],a)}return new Bf({points:o,options:{}})}function Lie(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let o=0;o<i.length;o++){const u=i[o];if(u.index===t)break;u.hidden||n.unshift(u.dataset)}return n}function Fie(e,t,n){const i=[];for(let o=0;o<n.length;o++){const u=n[o],{first:c,last:a,point:g}=Bie(u,t,"x");if(!(!g||c&&a)){if(c)i.unshift(g);else if(e.push(g),!a)break}}e.push(...i)}function Bie(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const o=i[n],u=e.segments,c=e.points;let a=!1,g=!1;for(let _=0;_<u.length;_++){const S=u[_],N=c[S.start][n],A=c[S.end][n];if(xh(o,N,A)){a=o===N,g=o===A;break}}return{first:a,last:g,point:i}}class lz{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:o,y:u,radius:c}=this;return n=n||{start:0,end:Js},t.arc(o,u,c,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:o}=this,u=t.angle;return{x:n+Math.cos(u)*o,y:i+Math.sin(u)*o,angle:u}}}function Vie(e){const{chart:t,fill:n,line:i}=e;if(wr(n))return Uie(t,n);if(n==="stack")return Oie(e);if(n==="shape")return!0;const o=$ie(e);return o instanceof lz?o:oz(o,i)}function Uie(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function $ie(e){return(e.scale||{}).getPointPositionForValue?qie(e):Hie(e)}function Hie(e){const{scale:t={},fill:n}=e,i=Die(n,t);if(wr(i)){const o=t.isHorizontal();return{x:o?i:null,y:o?null:i}}return null}function qie(e){const{scale:t,fill:n}=e,i=t.options,o=t.getLabels().length,u=i.reverse?t.max:t.min,c=zie(n,t,u),a=[];if(i.grid.circular){const g=t.getPointPositionForValue(0,u);return new lz({x:g.x,y:g.y,radius:t.getDistanceFromCenterForValue(c)})}for(let g=0;g<o;++g)a.push(t.getPointPositionForValue(g,c));return a}function W2(e,t,n){const i=Vie(t),{chart:o,index:u,line:c,scale:a,axis:g}=t,_=c.options,S=_.fill,N=_.backgroundColor,{above:A=N,below:E=N}=S||{},D=o.getDatasetMeta(u),B=UD(o,D);i&&c.points.length&&(W1(e,n),Gie(e,{line:c,target:i,above:A,below:E,area:n,scale:a,axis:g,clip:B}),Z1(e))}function Gie(e,t){const{line:n,target:i,above:o,below:u,area:c,scale:a,clip:g}=t,_=n._loop?"angle":t.axis;e.save();let S=u;u!==o&&(_==="x"?(EA(e,i,c.top),Z2(e,{line:n,target:i,color:o,scale:a,property:_,clip:g}),e.restore(),e.save(),EA(e,i,c.bottom)):_==="y"&&(AA(e,i,c.left),Z2(e,{line:n,target:i,color:u,scale:a,property:_,clip:g}),e.restore(),e.save(),AA(e,i,c.right),S=o)),Z2(e,{line:n,target:i,color:S,scale:a,property:_,clip:g}),e.restore()}function EA(e,t,n){const{segments:i,points:o}=t;let u=!0,c=!1;e.beginPath();for(const a of i){const{start:g,end:_}=a,S=o[g],N=o[Q1(g,_,o)];u?(e.moveTo(S.x,S.y),u=!1):(e.lineTo(S.x,n),e.lineTo(S.x,S.y)),c=!!t.pathSegment(e,a,{move:c}),c?e.closePath():e.lineTo(N.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function AA(e,t,n){const{segments:i,points:o}=t;let u=!0,c=!1;e.beginPath();for(const a of i){const{start:g,end:_}=a,S=o[g],N=o[Q1(g,_,o)];u?(e.moveTo(S.x,S.y),u=!1):(e.lineTo(n,S.y),e.lineTo(S.x,S.y)),c=!!t.pathSegment(e,a,{move:c}),c?e.closePath():e.lineTo(n,N.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function Z2(e,t){const{line:n,target:i,property:o,color:u,scale:c,clip:a}=t,g=Mie(n,i,o);for(const{source:_,target:S,start:N,end:A}of g){const{style:{backgroundColor:E=u}={}}=_,D=i!==!0;e.save(),e.fillStyle=E,Wie(e,c,a,D&&Mj(o,N,A)),e.beginPath();const B=!!n.pathSegment(e,_);let $;if(D){B?e.closePath():PA(e,i,A,o);const G=!!i.pathSegment(e,S,{move:B,reverse:!0});$=B&&G,$||PA(e,i,N,o)}e.closePath(),e.fill($?"evenodd":"nonzero"),e.restore()}}function Wie(e,t,n,i){const o=t.chart.chartArea,{property:u,start:c,end:a}=i||{};if(u==="x"||u==="y"){let g,_,S,N;u==="x"?(g=c,_=o.top,S=a,N=o.bottom):(g=o.left,_=c,S=o.right,N=a),e.beginPath(),n&&(g=Math.max(g,n.left),S=Math.min(S,n.right),_=Math.max(_,n.top),N=Math.min(N,n.bottom)),e.rect(g,_,S-g,N-_),e.clip()}}function PA(e,t,n,i){const o=t.interpolate(n,i);o&&e.lineTo(o.x,o.y)}var Zie={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,o=[];let u,c,a,g;for(c=0;c<i;++c)u=e.getDatasetMeta(c),a=u.dataset,g=null,a&&a.options&&a instanceof Bf&&(g={visible:e.isDatasetVisible(c),index:c,fill:Pie(a,c,i),chart:e,axis:u.controller.options.indexAxis,scale:u.vScale,line:a}),u.$filler=g,o.push(g);for(c=0;c<i;++c)g=o[c],!(!g||g.fill===!1)&&(g.fill=Aie(o,c,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",o=e.getSortedVisibleDatasetMetas(),u=e.chartArea;for(let c=o.length-1;c>=0;--c){const a=o[c].$filler;a&&(a.line.updateControlPoints(u,a.axis),i&&a.fill&&W2(e.ctx,a,u))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o){const u=i[o].$filler;MA(u)&&W2(e.ctx,u,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!MA(i)||n.drawTime!=="beforeDatasetDraw"||W2(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const RA=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},Yie=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class DA extends Dh{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Ws(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,o)=>t.sort(i,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,o=ca(i.font),u=o.size,c=this._computeTitleHeight(),{boxWidth:a,itemHeight:g}=RA(i,u);let _,S;n.font=o.string,this.isHorizontal()?(_=this.maxWidth,S=this._fitRows(c,u,a,g)+10):(S=this.maxHeight,_=this._fitCols(c,o,a,g)+10),this.width=Math.min(_,t.maxWidth||this.maxWidth),this.height=Math.min(S,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,o){const{ctx:u,maxWidth:c,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],_=this.lineWidths=[0],S=o+a;let N=t;u.textAlign="left",u.textBaseline="middle";let A=-1,E=-S;return this.legendItems.forEach((D,B)=>{const $=i+n/2+u.measureText(D.text).width;(B===0||_[_.length-1]+$+2*a>c)&&(N+=S,_[_.length-(B>0?0:1)]=0,E+=S,A++),g[B]={left:0,top:E,row:A,width:$,height:o},_[_.length-1]+=$+a}),N}_fitCols(t,n,i,o){const{ctx:u,maxHeight:c,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],_=this.columnSizes=[],S=c-t;let N=a,A=0,E=0,D=0,B=0;return this.legendItems.forEach(($,G)=>{const{itemWidth:W,itemHeight:J}=Xie(i,n,u,$,o);G>0&&E+J+2*a>S&&(N+=A+a,_.push({width:A,height:E}),D+=A+a,B++,A=E=0),g[G]={left:D,top:E,col:B,width:W,height:J},A=Math.max(A,W),E+=J+a}),N+=A,_.push({width:A,height:E}),N}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:o},rtl:u}}=this,c=ay(u,this.left,this.width);if(this.isHorizontal()){let a=0,g=fo(i,this.left+o,this.right-this.lineWidths[a]);for(const _ of n)a!==_.row&&(a=_.row,g=fo(i,this.left+o,this.right-this.lineWidths[a])),_.top+=this.top+t+o,_.left=c.leftForLtr(c.x(g),_.width),g+=_.width+o}else{let a=0,g=fo(i,this.top+t+o,this.bottom-this.columnSizes[a].height);for(const _ of n)_.col!==a&&(a=_.col,g=fo(i,this.top+t+o,this.bottom-this.columnSizes[a].height)),_.top=g,_.left+=this.left+o,_.left=c.leftForLtr(c.x(_.left),_.width),g+=_.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;W1(t,this),this._draw(),Z1(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:o}=this,{align:u,labels:c}=t,a=ar.color,g=ay(t.rtl,this.left,this.width),_=ca(c.font),{padding:S}=c,N=_.size,A=N/2;let E;this.drawTitle(),o.textAlign=g.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=_.string;const{boxWidth:D,boxHeight:B,itemHeight:$}=RA(c,N),G=function(le,_e,de){if(isNaN(D)||D<=0||isNaN(B)||B<0)return;o.save();const pe=bi(de.lineWidth,1);if(o.fillStyle=bi(de.fillStyle,a),o.lineCap=bi(de.lineCap,"butt"),o.lineDashOffset=bi(de.lineDashOffset,0),o.lineJoin=bi(de.lineJoin,"miter"),o.lineWidth=pe,o.strokeStyle=bi(de.strokeStyle,a),o.setLineDash(bi(de.lineDash,[])),c.usePointStyle){const Oe={radius:B*Math.SQRT2/2,pointStyle:de.pointStyle,rotation:de.rotation,borderWidth:pe},He=g.xPlus(le,D/2),We=_e+A;MD(o,Oe,He,We,c.pointStyleWidth&&D)}else{const Oe=_e+Math.max((N-B)/2,0),He=g.leftForLtr(le,D),We=ym(de.borderRadius);o.beginPath(),Object.values(We).some(st=>st!==0)?Fx(o,{x:He,y:Oe,w:D,h:B,radius:We}):o.rect(He,Oe,D,B),o.fill(),pe!==0&&o.stroke()}o.restore()},W=function(le,_e,de){Pm(o,de.text,le,_e+$/2,_,{strikethrough:de.hidden,textAlign:g.textAlign(de.textAlign)})},J=this.isHorizontal(),Z=this._computeTitleHeight();J?E={x:fo(u,this.left+S,this.right-i[0]),y:this.top+S+Z,line:0}:E={x:this.left+S,y:fo(u,this.top+Z+S,this.bottom-n[0].height),line:0},OD(this.ctx,t.textDirection);const K=$+S;this.legendItems.forEach((le,_e)=>{o.strokeStyle=le.fontColor,o.fillStyle=le.fontColor;const de=o.measureText(le.text).width,pe=g.textAlign(le.textAlign||(le.textAlign=c.textAlign)),Oe=D+A+de;let He=E.x,We=E.y;g.setWidth(this.width),J?_e>0&&He+Oe+S>this.right&&(We=E.y+=K,E.line++,He=E.x=fo(u,this.left+S,this.right-i[E.line])):_e>0&&We+K>this.bottom&&(He=E.x=He+n[E.line].width+S,E.line++,We=E.y=fo(u,this.top+Z+S,this.bottom-n[E.line].height));const st=g.x(He);if(G(st,We,le),He=mee(pe,He+D+A,J?He+Oe:this.right,t.rtl),W(g.x(He),We,le),J)E.x+=Oe+S;else if(typeof le.text!="string"){const At=_.lineHeight;E.y+=cz(le,At)+S}else E.y+=K}),LD(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=ca(n.font),o=vo(n.padding);if(!n.display)return;const u=ay(t.rtl,this.left,this.width),c=this.ctx,a=n.position,g=i.size/2,_=o.top+g;let S,N=this.left,A=this.width;if(this.isHorizontal())A=Math.max(...this.lineWidths),S=this.top+_,N=fo(t.align,N,this.right-A);else{const D=this.columnSizes.reduce((B,$)=>Math.max(B,$.height),0);S=_+fo(t.align,this.top,this.bottom-D-t.labels.padding-this._computeTitleHeight())}const E=fo(a,N,N+A);c.textAlign=u.textAlign(AT(a)),c.textBaseline="middle",c.strokeStyle=n.color,c.fillStyle=n.color,c.font=i.string,Pm(c,n.text,E,S,i)}_computeTitleHeight(){const t=this.options.title,n=ca(t.font),i=vo(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,o,u;if(xh(t,this.left,this.right)&&xh(n,this.top,this.bottom)){for(u=this.legendHitBoxes,i=0;i<u.length;++i)if(o=u[i],xh(t,o.left,o.left+o.width)&&xh(n,o.top,o.top+o.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!Jie(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const o=this._hoveredItem,u=Yie(o,i);o&&!u&&Ws(n.onLeave,[t,o,this],this),this._hoveredItem=i,i&&!u&&Ws(n.onHover,[t,i,this],this)}else i&&Ws(n.onClick,[t,i,this],this)}}function Xie(e,t,n,i,o){const u=Kie(i,e,t,n),c=Qie(o,i,t.lineHeight);return{itemWidth:u,itemHeight:c}}function Kie(e,t,n,i){let o=e.text;return o&&typeof o!="string"&&(o=o.reduce((u,c)=>u.length>c.length?u:c)),t+n.size/2+i.measureText(o).width}function Qie(e,t,n){let i=e;return typeof t.text!="string"&&(i=cz(t,n)),i}function cz(e,t){const n=e.text?e.text.length:0;return t*n}function Jie(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var ese={id:"legend",_element:DA,start(e,t,n){const i=e.legend=new DA({ctx:e.ctx,options:n,chart:e});_o.configure(e,i,n),_o.addBox(e,i)},stop(e){_o.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;_o.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,o=n.chart;o.isDatasetVisible(i)?(o.hide(i),t.hidden=!0):(o.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:o,color:u,useBorderRadius:c,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(g=>{const _=g.controller.getStyle(n?0:void 0),S=vo(_.borderWidth);return{text:t[g.index].label,fillStyle:_.backgroundColor,fontColor:u,hidden:!g.visible,lineCap:_.borderCapStyle,lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:(S.width+S.height)/4,strokeStyle:_.borderColor,pointStyle:i||_.pointStyle,rotation:_.rotation,textAlign:o||_.textAlign,borderRadius:c&&(a||_.borderRadius),datasetIndex:g.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class BT extends Dh{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const o=sr(i.text)?i.text.length:1;this._padding=vo(i.padding);const u=o*ca(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:o,right:u,options:c}=this,a=c.align;let g=0,_,S,N;return this.isHorizontal()?(S=fo(a,i,u),N=n+t,_=u-i):(c.position==="left"?(S=i+t,N=fo(a,o,n),g=ss*-.5):(S=u-t,N=fo(a,n,o),g=ss*.5),_=o-n),{titleX:S,titleY:N,maxWidth:_,rotation:g}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=ca(n.font),u=i.lineHeight/2+this._padding.top,{titleX:c,titleY:a,maxWidth:g,rotation:_}=this._drawArgs(u);Pm(t,n.text,0,0,i,{color:n.color,maxWidth:g,rotation:_,textAlign:AT(n.align),textBaseline:"middle",translation:[c,a]})}}function tse(e,t){const n=new BT({ctx:e.ctx,options:t,chart:e});_o.configure(e,n,t),_o.addBox(e,n),e.titleBlock=n}var nse={id:"title",_element:BT,start(e,t,n){tse(e,n)},stop(e){const t=e.titleBlock;_o.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;_o.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Db=new WeakMap;var ise={id:"subtitle",start(e,t,n){const i=new BT({ctx:e.ctx,options:n,chart:e});_o.configure(e,i,n),_o.addBox(e,i),Db.set(e,i)},stop(e){_o.removeBox(e,Db.get(e)),Db.delete(e)},beforeUpdate(e,t,n){const i=Db.get(e);_o.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rx={average(e){if(!e.length)return!1;let t,n,i=new Set,o=0,u=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const g=a.tooltipPosition();i.add(g.x),o+=g.y,++u}}return u===0||i.size===0?!1:{x:[...i].reduce((a,g)=>a+g)/i.size,y:o/u}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,o=Number.POSITIVE_INFINITY,u,c,a;for(u=0,c=e.length;u<c;++u){const g=e[u].element;if(g&&g.hasValue()){const _=g.getCenterPoint(),S=vj(t,_);S<o&&(o=S,a=g)}}if(a){const g=a.tooltipPosition();n=g.x,i=g.y}return{x:n,y:i}}};function ud(e,t){return t&&(sr(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function mh(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function sse(e,t){const{element:n,datasetIndex:i,index:o}=t,u=e.getDatasetMeta(i).controller,{label:c,value:a}=u.getLabelAndValue(o);return{chart:e,label:c,parsed:u.getParsed(o),raw:e.data.datasets[i].data[o],formattedValue:a,dataset:u.getDataset(),dataIndex:o,datasetIndex:i,element:n}}function zA(e,t){const n=e.chart.ctx,{body:i,footer:o,title:u}=e,{boxWidth:c,boxHeight:a}=t,g=ca(t.bodyFont),_=ca(t.titleFont),S=ca(t.footerFont),N=u.length,A=o.length,E=i.length,D=vo(t.padding);let B=D.height,$=0,G=i.reduce((Z,K)=>Z+K.before.length+K.lines.length+K.after.length,0);if(G+=e.beforeBody.length+e.afterBody.length,N&&(B+=N*_.lineHeight+(N-1)*t.titleSpacing+t.titleMarginBottom),G){const Z=t.displayColors?Math.max(a,g.lineHeight):g.lineHeight;B+=E*Z+(G-E)*g.lineHeight+(G-1)*t.bodySpacing}A&&(B+=t.footerMarginTop+A*S.lineHeight+(A-1)*t.footerSpacing);let W=0;const J=function(Z){$=Math.max($,n.measureText(Z).width+W)};return n.save(),n.font=_.string,bs(e.title,J),n.font=g.string,bs(e.beforeBody.concat(e.afterBody),J),W=t.displayColors?c+2+t.boxPadding:0,bs(i,Z=>{bs(Z.before,J),bs(Z.lines,J),bs(Z.after,J)}),W=0,n.font=S.string,bs(e.footer,J),n.restore(),$+=D.width,{width:$,height:B}}function rse(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function ase(e,t,n,i){const{x:o,width:u}=i,c=n.caretSize+n.caretPadding;if(e==="left"&&o+u+c>t.width||e==="right"&&o-u-c<0)return!0}function ose(e,t,n,i){const{x:o,width:u}=n,{width:c,chartArea:{left:a,right:g}}=e;let _="center";return i==="center"?_=o<=(a+g)/2?"left":"right":o<=u/2?_="left":o>=c-u/2&&(_="right"),ase(_,e,t,n)&&(_="center"),_}function IA(e,t,n){const i=n.yAlign||t.yAlign||rse(e,n);return{xAlign:n.xAlign||t.xAlign||ose(e,t,n,i),yAlign:i}}function lse(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function cse(e,t,n){let{y:i,height:o}=e;return t==="top"?i+=n:t==="bottom"?i-=o+n:i-=o/2,i}function OA(e,t,n,i){const{caretSize:o,caretPadding:u,cornerRadius:c}=e,{xAlign:a,yAlign:g}=n,_=o+u,{topLeft:S,topRight:N,bottomLeft:A,bottomRight:E}=ym(c);let D=lse(t,a);const B=cse(t,g,_);return g==="center"?a==="left"?D+=_:a==="right"&&(D-=_):a==="left"?D-=Math.max(S,A)+o:a==="right"&&(D+=Math.max(N,E)+o),{x:Ta(D,0,i.width-t.width),y:Ta(B,0,i.height-t.height)}}function zb(e,t,n){const i=vo(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function LA(e){return ud([],mh(e))}function use(e,t,n){return tp(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function FA(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const uz={beforeTitle:hh,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:hh,beforeBody:hh,beforeLabel:hh,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Li(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:hh,afterBody:hh,beforeFooter:hh,footer:hh,afterFooter:hh};function ol(e,t,n,i){const o=e[t].call(n,i);return typeof o=="undefined"?uz[t].call(n,i):o}class Ej extends Dh{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&n.options.animation&&i.animations,u=new $D(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=use(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,o=ol(i,"beforeTitle",this,t),u=ol(i,"title",this,t),c=ol(i,"afterTitle",this,t);let a=[];return a=ud(a,mh(o)),a=ud(a,mh(u)),a=ud(a,mh(c)),a}getBeforeBody(t,n){return LA(ol(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,o=[];return bs(t,u=>{const c={before:[],lines:[],after:[]},a=FA(i,u);ud(c.before,mh(ol(a,"beforeLabel",this,u))),ud(c.lines,ol(a,"label",this,u)),ud(c.after,mh(ol(a,"afterLabel",this,u))),o.push(c)}),o}getAfterBody(t,n){return LA(ol(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,o=ol(i,"beforeFooter",this,t),u=ol(i,"footer",this,t),c=ol(i,"afterFooter",this,t);let a=[];return a=ud(a,mh(o)),a=ud(a,mh(u)),a=ud(a,mh(c)),a}_createItems(t){const n=this._active,i=this.chart.data,o=[],u=[],c=[];let a=[],g,_;for(g=0,_=n.length;g<_;++g)a.push(sse(this.chart,n[g]));return t.filter&&(a=a.filter((S,N,A)=>t.filter(S,N,A,i))),t.itemSort&&(a=a.sort((S,N)=>t.itemSort(S,N,i))),bs(a,S=>{const N=FA(t.callbacks,S);o.push(ol(N,"labelColor",this,S)),u.push(ol(N,"labelPointStyle",this,S)),c.push(ol(N,"labelTextColor",this,S))}),this.labelColors=o,this.labelPointStyles=u,this.labelTextColors=c,this.dataPoints=a,a}update(t,n){const i=this.options.setContext(this.getContext()),o=this._active;let u,c=[];if(!o.length)this.opacity!==0&&(u={opacity:0});else{const a=rx[i.position].call(this,o,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const g=this._size=zA(this,i),_=Object.assign({},a,g),S=IA(this.chart,i,_),N=OA(i,_,S,this.chart);this.xAlign=S.xAlign,this.yAlign=S.yAlign,u={opacity:1,x:N.x,y:N.y,width:g.width,height:g.height,caretX:a.x,caretY:a.y}}this._tooltipItems=c,this.$context=void 0,u&&this._resolveAnimations().update(this,u),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,o){const u=this.getCaretPosition(t,i,o);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(t,n,i){const{xAlign:o,yAlign:u}=this,{caretSize:c,cornerRadius:a}=i,{topLeft:g,topRight:_,bottomLeft:S,bottomRight:N}=ym(a),{x:A,y:E}=t,{width:D,height:B}=n;let $,G,W,J,Z,K;return u==="center"?(Z=E+B/2,o==="left"?($=A,G=$-c,J=Z+c,K=Z-c):($=A+D,G=$+c,J=Z-c,K=Z+c),W=$):(o==="left"?G=A+Math.max(g,S)+c:o==="right"?G=A+D-Math.max(_,N)-c:G=this.caretX,u==="top"?(J=E,Z=J-c,$=G-c,W=G+c):(J=E+B,Z=J+c,$=G+c,W=G-c),K=J),{x1:$,x2:G,x3:W,y1:J,y2:Z,y3:K}}drawTitle(t,n,i){const o=this.title,u=o.length;let c,a,g;if(u){const _=ay(i.rtl,this.x,this.width);for(t.x=zb(this,i.titleAlign,i),n.textAlign=_.textAlign(i.titleAlign),n.textBaseline="middle",c=ca(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=c.string,g=0;g<u;++g)n.fillText(o[g],_.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+a,g+1===u&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,n,i,o,u){const c=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:g,boxWidth:_}=u,S=ca(u.bodyFont),N=zb(this,"left",u),A=o.x(N),E=g<S.lineHeight?(S.lineHeight-g)/2:0,D=n.y+E;if(u.usePointStyle){const B={radius:Math.min(_,g)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},$=o.leftForLtr(A,_)+_/2,G=D+g/2;t.strokeStyle=u.multiKeyBackground,t.fillStyle=u.multiKeyBackground,Sj(t,B,$,G),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,Sj(t,B,$,G)}else{t.lineWidth=Vi(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const B=o.leftForLtr(A,_),$=o.leftForLtr(o.xPlus(A,1),_-2),G=ym(c.borderRadius);Object.values(G).some(W=>W!==0)?(t.beginPath(),t.fillStyle=u.multiKeyBackground,Fx(t,{x:B,y:D,w:_,h:g,radius:G}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),Fx(t,{x:$,y:D+1,w:_-2,h:g-2,radius:G}),t.fill()):(t.fillStyle=u.multiKeyBackground,t.fillRect(B,D,_,g),t.strokeRect(B,D,_,g),t.fillStyle=c.backgroundColor,t.fillRect($,D+1,_-2,g-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:o}=this,{bodySpacing:u,bodyAlign:c,displayColors:a,boxHeight:g,boxWidth:_,boxPadding:S}=i,N=ca(i.bodyFont);let A=N.lineHeight,E=0;const D=ay(i.rtl,this.x,this.width),B=function(de){n.fillText(de,D.x(t.x+E),t.y+A/2),t.y+=A+u},$=D.textAlign(c);let G,W,J,Z,K,le,_e;for(n.textAlign=c,n.textBaseline="middle",n.font=N.string,t.x=zb(this,$,i),n.fillStyle=i.bodyColor,bs(this.beforeBody,B),E=a&&$!=="right"?c==="center"?_/2+S:_+2+S:0,Z=0,le=o.length;Z<le;++Z){for(G=o[Z],W=this.labelTextColors[Z],n.fillStyle=W,bs(G.before,B),J=G.lines,a&&J.length&&(this._drawColorBox(n,t,Z,D,i),A=Math.max(N.lineHeight,g)),K=0,_e=J.length;K<_e;++K)B(J[K]),A=N.lineHeight;bs(G.after,B)}E=0,A=N.lineHeight,bs(this.afterBody,B),t.y-=u}drawFooter(t,n,i){const o=this.footer,u=o.length;let c,a;if(u){const g=ay(i.rtl,this.x,this.width);for(t.x=zb(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=g.textAlign(i.footerAlign),n.textBaseline="middle",c=ca(i.footerFont),n.fillStyle=i.footerColor,n.font=c.string,a=0;a<u;++a)n.fillText(o[a],g.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,n,i,o){const{xAlign:u,yAlign:c}=this,{x:a,y:g}=t,{width:_,height:S}=i,{topLeft:N,topRight:A,bottomLeft:E,bottomRight:D}=ym(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(a+N,g),c==="top"&&this.drawCaret(t,n,i,o),n.lineTo(a+_-A,g),n.quadraticCurveTo(a+_,g,a+_,g+A),c==="center"&&u==="right"&&this.drawCaret(t,n,i,o),n.lineTo(a+_,g+S-D),n.quadraticCurveTo(a+_,g+S,a+_-D,g+S),c==="bottom"&&this.drawCaret(t,n,i,o),n.lineTo(a+E,g+S),n.quadraticCurveTo(a,g+S,a,g+S-E),c==="center"&&u==="left"&&this.drawCaret(t,n,i,o),n.lineTo(a,g+N),n.quadraticCurveTo(a,g,a+N,g),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,o=i&&i.x,u=i&&i.y;if(o||u){const c=rx[t.position].call(this,this._active,this._eventPosition);if(!c)return;const a=this._size=zA(this,t),g=Object.assign({},c,this._size),_=IA(n,t,g),S=OA(t,g,_,n);(o._to!==S.x||u._to!==S.y)&&(this.xAlign=_.xAlign,this.yAlign=_.yAlign,this.width=a.width,this.height=a.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,S))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},u={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=vo(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(u,t,o,n),OD(t,n.textDirection),u.y+=c.top,this.drawTitle(u,t,n),this.drawBody(u,t,n),this.drawFooter(u,t,n),LD(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,o=t.map(({datasetIndex:a,index:g})=>{const _=this.chart.getDatasetMeta(a);if(!_)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:_.data[g],index:g}}),u=!i1(i,o),c=this._positionChanged(o,n);(u||c)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,u=this._active||[],c=this._getActiveElements(t,u,n,i),a=this._positionChanged(c,t),g=n||!i1(c,u)||a;return g&&(this._active=c,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),g}_getActiveElements(t,n,i,o){const u=this.options;if(t.type==="mouseout")return[];if(!o)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,u.mode,u,i);return u.reverse&&c.reverse(),c}_positionChanged(t,n){const{caretX:i,caretY:o,options:u}=this,c=rx[u.position].call(this,t,n);return c!==!1&&(i!==c.x||o!==c.y)}}wn(Ej,"positioners",rx);var dse={id:"tooltip",_element:Ej,positioners:rx,afterInit(e,t,n){n&&(e.tooltip=new Ej({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",Me(te({},n),{cancelable:!0}))===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:uz},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},hse=Object.freeze({__proto__:null,Colors:jie,Decimation:Nie,Filler:Zie,Legend:ese,SubTitle:ise,Title:nse,Tooltip:dse});const fse=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function pse(e,t,n,i){const o=e.indexOf(t);if(o===-1)return fse(e,t,n,i);const u=e.lastIndexOf(t);return o!==u?n:o}const mse=(e,t)=>e===null?null:Ta(Math.round(e),0,t);function BA(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Aj extends zm{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:o,label:u}of n)i[o]===u&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Li(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:pse(i,t,bi(n,t),this._addedLabels),mse(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,o=[];let u=this.getLabels();u=t===0&&n===u.length-1?u:u.slice(t,n+1),this._valueRange=Math.max(u.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=n;c++)o.push({value:c});return o}getLabelForValue(t){return BA.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}wn(Aj,"id","category"),wn(Aj,"defaults",{ticks:{callback:BA}});function gse(e,t){const n=[],{bounds:o,step:u,min:c,max:a,precision:g,count:_,maxTicks:S,maxDigits:N,includeBounds:A}=e,E=u||1,D=S-1,{min:B,max:$}=t,G=!Li(c),W=!Li(a),J=!Li(_),Z=($-B)/(N+1);let K=zE(($-B)/D/E)*E,le,_e,de,pe;if(K<1e-14&&!G&&!W)return[{value:B},{value:$}];pe=Math.ceil($/K)-Math.floor(B/K),pe>D&&(K=zE(pe*K/D/E)*E),Li(g)||(le=Math.pow(10,g),K=Math.ceil(K*le)/le),o==="ticks"?(_e=Math.floor(B/K)*K,de=Math.ceil($/K)*K):(_e=B,de=$),G&&W&&u&&lee((a-c)/u,K/1e3)?(pe=Math.round(Math.min((a-c)/K,S)),K=(a-c)/pe,_e=c,de=a):J?(_e=G?c:_e,de=W?a:de,pe=_-1,K=(de-_e)/pe):(pe=(de-_e)/K,gx(pe,Math.round(pe),K/1e3)?pe=Math.round(pe):pe=Math.ceil(pe));const Oe=Math.max(IE(K),IE(_e));le=Math.pow(10,Li(g)?Oe:g),_e=Math.round(_e*le)/le,de=Math.round(de*le)/le;let He=0;for(G&&(A&&_e!==c?(n.push({value:c}),_e<c&&He++,gx(Math.round((_e+He*K)*le)/le,c,VA(c,Z,e))&&He++):_e<c&&He++);He<pe;++He){const We=Math.round((_e+He*K)*le)/le;if(W&&We>a)break;n.push({value:We})}return W&&A&&de!==a?n.length&&gx(n[n.length-1].value,a,VA(a,Z,e))?n[n.length-1].value=a:n.push({value:a}):(!W||de===a)&&n.push({value:de}),n}function VA(e,t,{horizontal:n,minRotation:i}){const o=yu(i),u=(n?Math.sin(o):Math.cos(o))||.001,c=.75*t*(""+e).length;return Math.min(t/u,c)}class u1 extends zm{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Li(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:o,max:u}=this;const c=g=>o=n?o:g,a=g=>u=i?u:g;if(t){const g=bd(o),_=bd(u);g<0&&_<0?a(0):g>0&&_>0&&c(0)}if(o===u){let g=u===0?1:Math.abs(u*.05);a(u+g),t||c(o-g)}this.min=o,this.max=u}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,o;return i?(o=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,c=gse(o,u);return t.bounds==="ticks"&&bD(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const o=(i-n)/Math.max(t.length-1,1)/2;n-=o,i+=o}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return d_(t,this.chart.options.locale,this.options.ticks.format)}}class Pj extends u1{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=wr(t)?t:0,this.max=wr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=yu(this.options.ticks.minRotation),o=(t?Math.sin(i):Math.cos(i))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}wn(Pj,"id","linear"),wn(Pj,"defaults",{ticks:{callback:G1.formatters.numeric}});const Vx=e=>Math.floor(Ff(e)),nm=(e,t)=>Math.pow(10,Vx(e)+t);function UA(e){return e/Math.pow(10,Vx(e))===1}function $A(e,t,n){const i=Math.pow(10,n),o=Math.floor(e/i);return Math.ceil(t/i)-o}function yse(e,t){const n=t-e;let i=Vx(n);for(;$A(e,t,i)>10;)i++;for(;$A(e,t,i)<10;)i--;return Math.min(i,Vx(e))}function xse(e,{min:t,max:n}){t=zl(e.min,t);const i=[],o=Vx(t);let u=yse(t,n),c=u<0?Math.pow(10,Math.abs(u)):1;const a=Math.pow(10,u),g=o>u?Math.pow(10,o):0,_=Math.round((t-g)*c)/c,S=Math.floor((t-g)/a/10)*a*10;let N=Math.floor((_-S)/Math.pow(10,u)),A=zl(e.min,Math.round((g+S+N*Math.pow(10,u))*c)/c);for(;A<n;)i.push({value:A,major:UA(A),significand:N}),N>=10?N=N<15?15:20:N++,N>=20&&(u++,N=2,c=u>=0?1:c),A=Math.round((g+S+N*Math.pow(10,u))*c)/c;const E=zl(e.max,A);return i.push({value:E,major:UA(E),significand:N}),i}class Rj extends zm{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=u1.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return wr(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=wr(t)?Math.max(0,t):null,this.max=wr(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!wr(this._userMin)&&(this.min=t===nm(this.min,0)?nm(this.min,-1):nm(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,o=this.max;const u=a=>i=t?i:a,c=a=>o=n?o:a;i===o&&(i<=0?(u(1),c(10)):(u(nm(i,-1)),c(nm(o,1)))),i<=0&&u(nm(o,-1)),o<=0&&c(nm(i,1)),this.min=i,this.max=o}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=xse(n,this);return t.bounds==="ticks"&&bD(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":d_(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ff(t),this._valueRange=Ff(this.max)-Ff(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ff(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}wn(Rj,"id","logarithmic"),wn(Rj,"defaults",{ticks:{callback:G1.formatters.logarithmic,major:{enabled:!0}}});function Dj(e){const t=e.ticks;if(t.display&&e.display){const n=vo(t.backdropPadding);return bi(t.font&&t.font.size,ar.font.size)+n.height}return 0}function _se(e,t,n){return n=sr(n)?n:[n],{w:Cee(e,t.string,n),h:n.length*t.lineHeight}}function HA(e,t,n,i,o){return e===i||e===o?{start:t-n/2,end:t+n/2}:e<i||e>o?{start:t-n,end:t}:{start:t,end:t+n}}function bse(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],o=[],u=e._pointLabels.length,c=e.options.pointLabels,a=c.centerPointLabels?ss/u:0;for(let g=0;g<u;g++){const _=c.setContext(e.getPointLabelContext(g));o[g]=_.padding;const S=e.getPointPosition(g,e.drawingArea+o[g],a),N=ca(_.font),A=_se(e.ctx,N,e._pointLabels[g]);i[g]=A;const E=mo(e.getIndexAngle(g)+a),D=Math.round(MT(E)),B=HA(D,S.x,A.w,0,180),$=HA(D,S.y,A.h,90,270);vse(n,t,E,B,$)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=jse(e,i,o)}function vse(e,t,n,i,o){const u=Math.abs(Math.sin(n)),c=Math.abs(Math.cos(n));let a=0,g=0;i.start<t.l?(a=(t.l-i.start)/u,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/u,e.r=Math.max(e.r,t.r+a)),o.start<t.t?(g=(t.t-o.start)/c,e.t=Math.min(e.t,t.t-g)):o.end>t.b&&(g=(o.end-t.b)/c,e.b=Math.max(e.b,t.b+g))}function wse(e,t,n){const i=e.drawingArea,{extra:o,additionalAngle:u,padding:c,size:a}=n,g=e.getPointPosition(t,i+o+c,u),_=Math.round(MT(mo(g.angle+Er))),S=kse(g.y,a.h,_),N=Cse(_),A=Tse(g.x,a.w,N);return{visible:!0,x:g.x,y:S,textAlign:N,left:A,top:S,right:A+a.w,bottom:S+a.h}}function Sse(e,t){if(!t)return!0;const{left:n,top:i,right:o,bottom:u}=e;return!(bh({x:n,y:i},t)||bh({x:n,y:u},t)||bh({x:o,y:i},t)||bh({x:o,y:u},t))}function jse(e,t,n){const i=[],o=e._pointLabels.length,u=e.options,{centerPointLabels:c,display:a}=u.pointLabels,g={extra:Dj(u)/2,additionalAngle:c?ss/o:0};let _;for(let S=0;S<o;S++){g.padding=n[S],g.size=t[S];const N=wse(e,S,g);i.push(N),a==="auto"&&(N.visible=Sse(N,_),N.visible&&(_=N))}return i}function Cse(e){return e===0||e===180?"center":e<180?"left":"right"}function Tse(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function kse(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function Nse(e,t,n){const{left:i,top:o,right:u,bottom:c}=n,{backdropColor:a}=t;if(!Li(a)){const g=ym(t.borderRadius),_=vo(t.backdropPadding);e.fillStyle=a;const S=i-_.left,N=o-_.top,A=u-i+_.width,E=c-o+_.height;Object.values(g).some(D=>D!==0)?(e.beginPath(),Fx(e,{x:S,y:N,w:A,h:E,radius:g}),e.fill()):e.fillRect(S,N,A,E)}}function Mse(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let o=t-1;o>=0;o--){const u=e._pointLabelItems[o];if(!u.visible)continue;const c=i.setContext(e.getPointLabelContext(o));Nse(n,c,u);const a=ca(c.font),{x:g,y:_,textAlign:S}=u;Pm(n,e._pointLabels[o],g,_+a.lineHeight/2,a,{color:c.color,textAlign:S,textBaseline:"middle"})}}function dz(e,t,n,i){const{ctx:o}=e;if(n)o.arc(e.xCenter,e.yCenter,t,0,Js);else{let u=e.getPointPosition(0,t);o.moveTo(u.x,u.y);for(let c=1;c<i;c++)u=e.getPointPosition(c,t),o.lineTo(u.x,u.y)}}function Ese(e,t,n,i,o){const u=e.ctx,c=t.circular,{color:a,lineWidth:g}=t;!c&&!i||!a||!g||n<0||(u.save(),u.strokeStyle=a,u.lineWidth=g,u.setLineDash(o.dash||[]),u.lineDashOffset=o.dashOffset,u.beginPath(),dz(e,n,c,i),u.closePath(),u.stroke(),u.restore())}function Ase(e,t,n){return tp(e,{label:n,index:t,type:"pointLabel"})}class ax extends u1{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=vo(Dj(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=wr(t)&&!isNaN(t)?t:0,this.max=wr(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Dj(this.options))}generateTickLabels(t){u1.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const o=Ws(this.options.pointLabels.callback,[n,i],this);return o||o===0?o:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?bse(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,o){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,o))}getIndexAngle(t){const n=Js/(this._pointLabels.length||1),i=this.options.startAngle||0;return mo(t*n+yu(i))}getDistanceFromCenterForValue(t){if(Li(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(Li(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return Ase(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const o=this.getIndexAngle(t)-Er+i;return{x:Math.cos(o)*n+this.xCenter,y:Math.sin(o)*n+this.yCenter,angle:o}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:o,bottom:u}=this._pointLabelItems[t];return{left:n,top:i,right:o,bottom:u}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),dz(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:o,border:u}=n,c=this._pointLabels.length;let a,g,_;if(n.pointLabels.display&&Mse(this,c),o.display&&this.ticks.forEach((S,N)=>{if(N!==0||N===0&&this.min<0){g=this.getDistanceFromCenterForValue(S.value);const A=this.getContext(N),E=o.setContext(A),D=u.setContext(A);Ese(this,E,g,c,D)}}),i.display){for(t.save(),a=c-1;a>=0;a--){const S=i.setContext(this.getPointLabelContext(a)),{color:N,lineWidth:A}=S;!A||!N||(t.lineWidth=A,t.strokeStyle=N,t.setLineDash(S.borderDash),t.lineDashOffset=S.borderDashOffset,g=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),_=this.getPointPosition(a,g),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(_.x,_.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const o=this.getIndexAngle(0);let u,c;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,g)=>{if(g===0&&this.min>=0&&!n.reverse)return;const _=i.setContext(this.getContext(g)),S=ca(_.font);if(u=this.getDistanceFromCenterForValue(this.ticks[g].value),_.showLabelBackdrop){t.font=S.string,c=t.measureText(a.label).width,t.fillStyle=_.backdropColor;const N=vo(_.backdropPadding);t.fillRect(-c/2-N.left,-u-S.size/2-N.top,c+N.width,S.size+N.height)}Pm(t,a.label,0,-u,S,{color:_.color,strokeColor:_.textStrokeColor,strokeWidth:_.textStrokeWidth})}),t.restore()}drawTitle(){}}wn(ax,"id","radialLinear"),wn(ax,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:G1.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),wn(ax,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),wn(ax,"descriptors",{angleLines:{_fallback:"grid"}});const J1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},cl=Object.keys(J1);function qA(e,t){return e-t}function GA(e,t){if(Li(t))return null;const n=e._adapter,{parser:i,round:o,isoWeekday:u}=e._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),wr(c)||(c=typeof i=="string"?n.parse(c,i):n.parse(c)),c===null?null:(o&&(c=o==="week"&&(py(u)||u===!0)?n.startOf(c,"isoWeek",u):n.startOf(c,o)),+c)}function WA(e,t,n,i){const o=cl.length;for(let u=cl.indexOf(e);u<o-1;++u){const c=J1[cl[u]],a=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((n-t)/(a*c.size))<=i)return cl[u]}return cl[o-1]}function Pse(e,t,n,i,o){for(let u=cl.length-1;u>=cl.indexOf(n);u--){const c=cl[u];if(J1[c].common&&e._adapter.diff(o,i,c)>=t-1)return c}return cl[n?cl.indexOf(n):0]}function Rse(e){for(let t=cl.indexOf(e)+1,n=cl.length;t<n;++t)if(J1[cl[t]].common)return cl[t]}function ZA(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:o}=ET(n,t),u=n[i]>=t?n[i]:n[o];e[u]=!0}}function Dse(e,t,n,i){const o=e._adapter,u=+o.startOf(t[0].value,i),c=t[t.length-1].value;let a,g;for(a=u;a<=c;a=+o.add(a,1,i))g=n[a],g>=0&&(t[g].major=!0);return t}function YA(e,t,n){const i=[],o={},u=t.length;let c,a;for(c=0;c<u;++c)a=t[c],o[a]=c,i.push({value:a,major:!1});return u===0||!n?i:Dse(e,i,o,n)}class Ux extends zm{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),o=this._adapter=new Ute._date(t.adapters.date);o.init(n),mx(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:GA(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:o,max:u,minDefined:c,maxDefined:a}=this.getUserBounds();function g(_){!c&&!isNaN(_.min)&&(o=Math.min(o,_.min)),!a&&!isNaN(_.max)&&(u=Math.max(u,_.max))}(!c||!a)&&(g(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&g(this.getMinMax(!1))),o=wr(o)&&!isNaN(o)?o:+n.startOf(Date.now(),i),u=wr(u)&&!isNaN(u)?u:+n.endOf(Date.now(),i)+1,this.min=Math.min(o,u-1),this.max=Math.max(o+1,u)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const u=this.min,c=this.max,a=hee(o,u,c);return this._unit=n.unit||(i.autoSkip?WA(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):Pse(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Rse(this._unit),this.initOffsets(o),t.reverse&&a.reverse(),YA(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,o,u;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?n=1-o:n=(this.getDecimalForValue(t[1])-o)/2,u=this.getDecimalForValue(t[t.length-1]),t.length===1?i=u:i=(u-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;n=Ta(n,0,c),i=Ta(i,0,c),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,o=this.options,u=o.time,c=u.unit||WA(u.minUnit,n,i,this._getLabelCapacity(n)),a=bi(o.ticks.stepSize,1),g=c==="week"?u.isoWeekday:!1,_=py(g)||g===!0,S={};let N=n,A,E;if(_&&(N=+t.startOf(N,"isoWeek",g)),N=+t.startOf(N,_?"day":c),t.diff(i,n,c)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+c);const D=o.ticks.source==="data"&&this.getDataTimestamps();for(A=N,E=0;A<i;A=+t.add(A,a,c),E++)ZA(S,A,D);return(A===i||o.bounds==="ticks"||E===1)&&ZA(S,A,D),Object.keys(S).sort(qA).map(B=>+B)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const o=this.options.time.displayFormats,u=this._unit,c=n||o[u];return this._adapter.format(t,c)}_tickFormatFunction(t,n,i,o){const u=this.options,c=u.ticks.callback;if(c)return Ws(c,[t,n,i],this);const a=u.time.displayFormats,g=this._unit,_=this._majorUnit,S=g&&a[g],N=_&&a[_],A=i[n],E=_&&N&&A&&A.major;return this._adapter.format(t,o||(E?N:S))}generateTickLabels(t){let n,i,o;for(n=0,i=t.length;n<i;++n)o=t[n],o.label=this._tickFormatFunction(o.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,o=yu(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(o),c=Math.sin(o),a=this._resolveTickFontOptions(0).size;return{w:i*u+a*c,h:i*c+a*u}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,o=i[n.unit]||i.millisecond,u=this._tickFormatFunction(t,0,YA(this,[t],this._majorUnit),o),c=this._getLabelSize(u),a=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,i=o.length;n<i;++n)t=t.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const o=this.getLabels();for(n=0,i=o.length;n<i;++n)t.push(GA(this,o[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return SD(t.sort(qA))}}wn(Ux,"id","time"),wn(Ux,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ib(e,t,n){let i=0,o=e.length-1,u,c,a,g;n?(t>=e[i].pos&&t<=e[o].pos&&({lo:i,hi:o}=_h(e,"pos",t)),{pos:u,time:a}=e[i],{pos:c,time:g}=e[o]):(t>=e[i].time&&t<=e[o].time&&({lo:i,hi:o}=_h(e,"time",t)),{time:u,pos:a}=e[i],{time:c,pos:g}=e[o]);const _=c-u;return _?a+(g-a)*(t-u)/_:a}class zj extends Ux{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ib(n,this.min),this._tableRange=Ib(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,o=[],u=[];let c,a,g,_,S;for(c=0,a=t.length;c<a;++c)_=t[c],_>=n&&_<=i&&o.push(_);if(o.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(c=0,a=o.length;c<a;++c)S=o[c+1],g=o[c-1],_=o[c],Math.round((S+g)/2)!==_&&u.push({time:_,pos:c/(a-1)});return u}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((o,u)=>o-u)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Ib(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return Ib(this._table,i*this._tableRange+this._minPos,!0)}}wn(zj,"id","timeseries"),wn(zj,"defaults",Ux.defaults);var zse=Object.freeze({__proto__:null,CategoryScale:Aj,LinearScale:Pj,LogarithmicScale:Rj,RadialLinearScale:ax,TimeScale:Ux,TimeSeriesScale:zj});const Ise=[Vte,yie,hse,zse],hz="label";function XA(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Ose(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function fz(e,t){e.labels=t}function pz(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hz;const i=[];e.datasets=t.map(o=>{const u=e.datasets.find(c=>c[n]===o[n]);return!u||!o.data||i.includes(u)?te({},o):(i.push(u),Object.assign(u,o),u)})}function Lse(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hz;const n={labels:[],datasets:[]};return fz(n,e.labels),pz(n,e.datasets,t),n}function Fse(e,t){const G=e,{height:n=150,width:i=300,redraw:o=!1,datasetIdKey:u,type:c,data:a,options:g,plugins:_=[],fallbackContent:S,updateMode:N}=G,A=en(G,["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"]),E=L.useRef(null),D=L.useRef(null),B=()=>{E.current&&(D.current=new K1(E.current,{type:c,data:Lse(a,u),options:g&&te({},g),plugins:_}),XA(t,D.current))},$=()=>{XA(t,null),D.current&&(D.current.destroy(),D.current=null)};return L.useEffect(()=>{!o&&D.current&&g&&Ose(D.current,g)},[o,g]),L.useEffect(()=>{!o&&D.current&&fz(D.current.config.data,a.labels)},[o,a.labels]),L.useEffect(()=>{!o&&D.current&&a.datasets&&pz(D.current.config.data,a.datasets,u)},[o,a.datasets]),L.useEffect(()=>{D.current&&(o?($(),setTimeout(B)):D.current.update(N))},[o,g,a.labels,a.datasets,N]),L.useEffect(()=>{D.current&&($(),setTimeout(B))},[c]),L.useEffect(()=>(B(),()=>$()),[]),Rt.createElement("canvas",te({ref:E,role:"img",height:n,width:i},A),S)}const Bse=L.forwardRef(Fse);function Vse(e,t){return K1.register(t),L.forwardRef((n,i)=>Rt.createElement(Bse,Me(te({},n),{ref:i,type:e})))}const Use=Vse("bar",_x);K1.register(...Ise);const Y2=(e,t)=>{const n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");switch(t){case"yyyy-MM-dd":return`${n}-${i}-${o}`;case"yyyy-MM":return`${n}-${i}`;case"yyyy":return`${n}`;default:return`${n}-${i}-${o}`}},mz=e=>{const t=new Date(e),n=t.getDay(),i=t.getDate()-n;return new Date(t.setDate(i))},$se=e=>{const t=mz(e);return new Date(t.setDate(t.getDate()+6))},Hse=e=>new Date(e.getFullYear(),e.getMonth(),1),qse=e=>new Date(e.getFullYear(),e.getMonth()+1,0),Gse=e=>new Date(e.getFullYear(),0,1),Wse=e=>new Date(e.getFullYear(),11,31),Zse=(e,t)=>e>=t.start&&e<=t.end,Yse=(e,t,n)=>{if(t==="all"||!n)return e;const i=new Date(n);let o=null;switch(t){case"day":o={start:i,end:i};break;case"week":o={start:mz(i),end:$se(i)};break;case"month":o={start:Hse(i),end:qse(i)};break;case"year":o={start:Gse(i),end:Wse(i)};break;default:return e}return e.filter(u=>Zse(new Date(u.posting_date),o))},Xse=(e,t)=>{const n={};e.forEach(u=>{let c="";const a=new Date(u.posting_date);u.posting_date&&(t==="day"?c=Y2(a,"yyyy-MM-dd"):t==="month"?c=Y2(a,"yyyy-MM"):t==="year"&&(c=Y2(a,"yyyy")),n[c]||(n[c]=0),n[c]+=u.loyalty_points||0)});const i=Object.keys(n).sort(),o=i.map(u=>n[u]);return{labels:i,dataPoints:o}},Kse=()=>{const{currentUser:e,loading:t,error:n}=hd($=>$.user),[i,o]=L.useState([]),[u,c]=L.useState("all"),[a,g]=L.useState(""),_=()=>Ht(null,null,function*(){if(e!=null&&e.full_name)try{const $=new Headers;$.append("Authorization","token e0723ce34466cea:79dca2f515d4e2c"),$.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const G={method:"GET",headers:$,redirect:"follow"},W=`https://lblerp.anantdv.com/api/resource/Loyalty Point Entry?fields=["*"]&filters=[["customer", "=", "${e.full_name}"]]`;fetch(W,G).then(J=>J.json()).then(J=>{o(J.data||[])}).catch(J=>console.error("Error fetching loyalty data:",J))}catch($){console.error("Error in getLoyaltyPointsEntryFromLbl:",$)}});console.log("loyalty data....",i),console.log("current user....",e),L.useEffect(()=>{!t&&(e!=null&&e.full_name)&&_()},[e,t]),L.useMemo(()=>[...new Set(i.map($=>$.customer))],[i]);const S=L.useMemo(()=>Yse(i,u,a),[i,u,a]),N=L.useMemo(()=>{const $=S.reduce((J,Z)=>J+(Z.loyalty_points||0),0),G=S.reduce((J,Z)=>J+(Z.purchase_amount||0),0),W=[...new Set(S.map(J=>J.loyalty_program))].length;return{totalPoints:$,totalPurchase:G,uniquePrograms:W,totalEntries:S.length}},[S]),{labels:A,dataPoints:E}=L.useMemo(()=>Xse(S,u==="all"?"day":u),[S,u]),D={labels:A,datasets:[{label:"Loyalty Points",data:E,backgroundColor:"rgba(99, 102, 241, 0.7)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:1}]},B={responsive:!0,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Points"}},x:{title:{display:!0,text:"Date"}}}};return t?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading user data..."})]})}):n?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-red-600 mb-2",children:"Error loading user data"}),l.jsx("p",{className:"text-gray-600",children:n})]})}):!e||!e.full_name?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-600 mb-2",children:"Please log in to view your loyalty dashboard"})})}):l.jsx("div",{className:"min-h-screen bg-gray-50 py-6 px-4",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Loyalty Dashboard"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Company: LOTIC BIGE LTD"}),e&&l.jsxs("p",{className:"text-lg font-medium text-blue-600 mt-2",children:["Welcome, ",e.full_name]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{value:u,onChange:$=>c($.target.value),className:"border rounded px-3 py-2 text-gray-800 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"all",children:"All Dates (Day-wise chart)"}),l.jsx("option",{value:"day",children:"Day"}),l.jsx("option",{value:"week",children:"Week (date filter only)"}),l.jsx("option",{value:"month",children:"Month"}),l.jsx("option",{value:"year",children:"Year"})]}),u!=="all"&&l.jsx("input",{type:"date",value:a,onChange:$=>g($.target.value),className:"border rounded px-3 py-2 text-gray-800 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-lg p-6 shadow hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Wk,{className:"w-8 h-8 text-purple-500 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Total Points"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N.totalPoints.toLocaleString()})]})}),l.jsx("div",{className:"bg-white rounded-lg p-6 shadow hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(lC,{className:"w-8 h-8 text-blue-500 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Total Purchases"}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["₹",N.totalPurchase.toLocaleString()]})]})}),l.jsx("div",{className:"bg-white rounded-lg p-6 shadow hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(eF,{className:"w-8 h-8 text-green-500 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Programs"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N.uniquePrograms})]})}),l.jsx("div",{className:"bg-white rounded-lg p-6 shadow hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(xc,{className:"w-8 h-8 text-orange-500 mb-2"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Total Entries"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N.totalEntries})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 shadow mb-8",children:[l.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800",children:"Loyalty Points Trend"}),E.length>0?l.jsx(Use,{data:D,options:B}):l.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:l.jsxs("div",{className:"text-center",children:[l.jsx(xc,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),l.jsx("p",{children:"No data available for the selected filters"})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"My Loyalty Entries"}),l.jsxs("span",{className:"text-sm text-gray-500",children:[S.length," ",S.length===1?"entry":"entries"]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purchase Amount"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.length>0?S.map(($,G)=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$.posting_date?new Date($.posting_date).toLocaleDateString():"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:$.loyalty_program||"N/A"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["+",$.loyalty_points||0]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$.invoice||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$.purchase_amount?`₹${$.purchase_amount.toLocaleString()}`:"-"})]},$.name||G)):l.jsx("tr",{children:l.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center",children:l.jsxs("div",{className:"text-gray-500",children:[l.jsx(Wk,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-lg font-medium mb-2",children:"No loyalty entries found"}),l.jsx("p",{className:"text-sm",children:u!=="all"?"Try adjusting your filter criteria to see more results.":"You haven't earned any loyalty points yet."})]})})})})]})})]})]})})},$g=({user:e,children:t})=>{const n=pl();return console.log("ProtectedRoute user:",n),!e||e==="null"||e==="Guest"?l.jsx(bL,{to:"/login",state:{from:n.pathname},replace:!0}):t};function $x(e){return pi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function KA(e){return pi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}function Qse(e){return pi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"},child:[]}]})(e)}function Jse(e){return pi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function Ij(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function ere(e){return pi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function QA(e){return pi({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(e)}function tre(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function gz(e){return pi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function JA(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function nre(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function oy(e){return pi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function ire(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(e)}function yz(e){return pi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function X2(e){return pi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 256H96v64h192v-64zm89-151L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm256 304c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-200v96c0 8.84-7.16 16-16 16H80c-8.84 0-16-7.16-16-16v-96c0-8.84 7.16-16 16-16h224c8.84 0 16 7.16 16 16z"},child:[]}]})(e)}function sre(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 208c0-17.67-14.33-32-32-32h-16c-35.35 0-64 28.65-64 64v48c0 35.35 28.65 64 64 64h16c17.67 0 32-14.33 32-32V208zm176 144c35.35 0 64-28.65 64-64v-48c0-35.35-28.65-64-64-64h-16c-17.67 0-32 14.33-32 32v112c0 17.67 14.33 32 32 32h16zM256 0C113.18 0 4.58 118.83 0 256v16c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-16c0-114.69 93.31-208 208-208s208 93.31 208 208h-.12c.08 2.43.12 165.72.12 165.72 0 23.35-18.93 42.28-42.28 42.28H320c0-26.51-21.49-48-48-48h-32c-26.51 0-48 21.49-48 48s21.49 48 48 48h181.72c49.86 0 90.28-40.42 90.28-90.28V256C507.42 118.83 398.82 0 256 0z"},child:[]}]})(e)}function vd(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(e)}function rre(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M320.2 243.8l-49.7 99.4c-6 12.1-23.4 11.7-28.9-.6l-56.9-126.3-30 71.7H60.6l182.5 186.5c7.1 7.3 18.6 7.3 25.7 0L451.4 288H342.3l-22.1-44.2zM473.7 73.9l-2.4-2.5c-51.5-52.6-135.8-52.6-187.4 0L256 100l-27.9-28.5c-51.5-52.7-135.9-52.7-187.4 0l-2.4 2.4C-10.4 123.7-12.5 203 31 256h102.4l35.9-86.2c5.4-12.9 23.6-13.2 29.4-.4l58.2 129.3 49-97.9c5.9-11.8 22.7-11.8 28.6 0l27.6 55.2H481c43.5-53 41.4-132.3-7.3-182.1z"},child:[]}]})(e)}function are(e){return pi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function xz(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(e)}function ore(e){return pi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function lre(e){return pi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function cre(e){return pi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function ure(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function dre(e){return pi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function hre(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function fre(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"},child:[]}]})(e)}function pre(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(e)}function mre(e){return pi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H112C85.5 0 64 21.5 64 48v48H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h272c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H40c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H64v128c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(e)}function Oj(e){return pi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(e)}function Ph(e){return pi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function ka(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(e)}function VT(e){return pi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function _z(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 32h192c13.255 0 24 10.745 24 24v160c0 13.255-10.745 24-24 24H296c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24zm-80 0H24C10.745 32 0 42.745 0 56v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zM0 296v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm296 184h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H296c-13.255 0-24 10.745-24 24v160c0 13.255 10.745 24 24 24z"},child:[]}]})(e)}function gre(e){return pi({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function yre(e){return pi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function xre(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(e)}function _re(e){return pi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function bre(e){return pi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function vre(e){return pi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(e)}function wre(e){return pi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"},child:[]}]})(e)}const Sre="https://your-erpnext-site.com",e4=[{name:"wireless-earbuds-pro",item_name:"Premium Wireless Earbuds Pro",description:"Premium wireless earbuds with active noise cancellation, 30-hour battery life, and crystal-clear sound quality. Perfect for music lovers and professionals.",image:"https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=400&h=400&fit=crop",standard_rate:2999,item_group:"Electronics",stock_qty:50,brand:"SoundMax",weight:"50g",warranty:"1 Year"},{name:"nike-running-shoes",item_name:"Nike Air Max Running Shoes",description:"Lightweight and comfortable running shoes with advanced cushioning technology. Designed for performance and style with breathable mesh upper.",image:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400&h=400&fit=crop",standard_rate:4999,item_group:"Fashion",stock_qty:25,brand:"Nike",size:"US 8-12",material:"Mesh & Synthetic"},{name:"apple-watch-series",item_name:"Apple Watch Series 9",description:"Advanced smartwatch with health monitoring, GPS tracking, and seamless connectivity. Features include heart rate monitoring, sleep tracking, and 18-hour battery life.",image:"https://images.unsplash.com/photo-1434493789847-2f02dc6ca35d?w=400&h=400&fit=crop",standard_rate:39999,item_group:"Electronics",stock_qty:15,brand:"Apple",display:"45mm Retina",battery:"18 hours"},{name:"gaming-laptop-asus",item_name:"ASUS ROG Gaming Laptop",description:"High-performance gaming laptop with Intel i7 processor, 16GB RAM, RTX 4060 graphics card, and 1TB SSD. Perfect for gaming and professional work.",image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400&h=400&fit=crop",standard_rate:89999,item_group:"Electronics",stock_qty:10,brand:"ASUS",processor:"Intel i7",ram:"16GB DDR4"}],jre=[{name:"Electronics",item_group_name:"Electronics",image:"https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=200&h=200&fit=crop"},{name:"Fashion",item_group_name:"Fashion",image:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=200&h=200&fit=crop"},{name:"Home",item_group_name:"Home & Living",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=200&h=200&fit=crop"},{name:"Books",item_group_name:"Books",image:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=200&h=200&fit=crop"}],Cre=Os.create({baseURL:Sre,timeout:1e4,headers:{"Content-Type":"application/json"}});Cre.interceptors.request.use(e=>Ht(null,null,function*(){const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e}));const Lj={login:(e,t)=>Ht(null,null,function*(){return{message:{api_key:"mock-token-123"}}}),getItems:(...t)=>Ht(null,[...t],function*(e={}){{let n=[...e4];return e.item_group&&(n=n.filter(i=>i.item_group.toLowerCase()===e.item_group.toLowerCase())),n}}),getItemDetails:e=>Ht(null,null,function*(){{const t=e4.find(n=>n.name===e);if(!t)throw new Error("Product not found");return t}}),getCategories:()=>Ht(null,null,function*(){return jre}),createSalesOrder:e=>Ht(null,null,function*(){return{name:`TBM-${Date.now()}`,status:"Draft",customer:e.customer,total_amount:e.total_amount}})},In={primary:"#837e70ff",primaryLight:"#3A3A3C",primaryDark:"#454441ff",secondary:"#be9d42ff",secondaryLight:"#AD974F",white:"#FFFFFF",lightGray:"#EAEAEA",textPrimary:"#231F20",textSecondary:"#3A3A3C",success:"#6B8E23",error:"#C62828"},Ob=e=>{e.totalItems=e.items.reduce((t,n)=>t+n.quantity,0),e.totalAmount=e.items.reduce((t,n)=>t+n.standard_rate*n.quantity,0)},bz=Cy({name:"cart",initialState:{items:[],wishlist:[],totalAmount:0,totalItems:0,wishlistCount:0},reducers:{addToCart:(e,t)=>{const n=e.items.find(i=>i.item_code===t.payload.item_code);n?n.quantity+=1:e.items.push(Me(te({},t.payload),{quantity:1})),Ob(e)},removeFromCart:(e,t)=>{e.items=e.items.filter(n=>n.item_code!==t.payload),Ob(e)},updateQuantity:(e,t)=>{const{item_code:n,quantity:i}=t.payload,o=e.items.find(u=>u.item_code===n);o&&(o.quantity=i,i<=0&&(e.items=e.items.filter(u=>u.item_code!==n))),Ob(e)},addToWishlist:(e,t)=>{e.wishlist.find(i=>i.item_code===t.payload.item_code)||e.wishlist.push(t.payload)},removeFromWishlist:(e,t)=>{e.wishlist=e.wishlist.filter(n=>n.item_code!==t.payload)},toggleWishlist:(e,t)=>{const n=t.payload;e.wishlist.find(o=>o.item_code===n.item_code)?e.wishlist=e.wishlist.filter(o=>o.item_code!==n.item_code):e.wishlist.push(n)},clearCart:e=>{e.items=[],Ob(e)},clearAll:e=>{e.items=[],e.wishlist=[],e.totalAmount=0,e.totalItems=0},setWishlistCountRedux:(e,t)=>{e.wishlistCount=t.payload}}}),{addToCart:Tre,removeFromCart:ioe,updateQuantity:soe,addToWishlist:kre,removeFromWishlist:Nre,toggleWishlist:roe,clearCart:Mre,clearAll:aoe,setWishlistCountRedux:t4}=bz.actions,Ere=bz.reducer,Are=({product:e,wishlistedItems:t,wishlistLoading:n,cartLoading:i,onWishlistToggle:o,onAddToCart:u})=>{if(Rh(),console.log("In stock.....",e),!e)return null;const c=(t==null?void 0:t.has(e.item_code))||!1,a=(n==null?void 0:n[e.item_code])||!1,g=(i==null?void 0:i[e.item_code])||!1;return l.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 relative group",children:[e.badge&&l.jsx("div",{className:`absolute top-2 left-2 z-10 text-white text-xs font-semibold px-2 py-1 rounded ${e.badge==="BESTSELLER"?"bg-yellow-500":e.badge==="WISHLIST"?"bg-pink-600":e.badge==="IN CART"?"bg-green-500":e.badge==="VARIANTS"?"bg-blue-500":"bg-blue-600"}`,children:e.badge}),l.jsx("button",{onClick:_=>{_.preventDefault(),_.stopPropagation(),o&&o(e,_)},disabled:a,className:`absolute top-2 right-2 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all duration-200 ${a?"bg-gray-200":"bg-white hover:bg-gray-50"} shadow-md opacity-0 group-hover:opacity-100`,children:a?l.jsx(ka,{size:14,className:"text-gray-400 animate-spin"}):l.jsx(vd,{size:14,className:`transition-colors duration-200 ${c?"text-red-500":"text-gray-300 hover:text-red-400"}`})}),l.jsx(Qs,{to:`/product/${e.route||e.id||e.name}`,children:l.jsx("div",{className:"relative overflow-hidden bg-gray-100",children:l.jsx("img",{src:e.image||"https://via.placeholder.com/300x300?text=No+Image",alt:e.item_name||e.web_item_name||"Product",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300",onError:_=>{const S=e.item_name||e.web_item_name||"Product";_.target.src=`https://via.placeholder.com/300x300?text=${encodeURIComponent(S.substring(0,10))}`}})})}),l.jsxs("div",{className:"p-4",children:[l.jsx(Qs,{to:`/product/${e.route||e.id||e.name}`,className:"no-underline",children:l.jsx("h3",{className:"font-medium text-gray-900 text-sm mb-2 line-clamp-2 hover:text-blue-600 transition-colors",children:e.item_name||e.web_item_name||"Product Name"})}),e.brand&&e.brand!=="Generic"&&l.jsx("div",{className:"text-xs text-blue-600 mb-2 font-medium",children:e.brand}),e.rating&&l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("div",{className:"flex items-center bg-green-600 text-white px-2 py-1 rounded text-xs font-semibold",children:[l.jsx("span",{children:e.rating}),l.jsx(VT,{size:8,className:"ml-1"})]}),e.reviews&&l.jsxs("span",{className:"text-xs text-gray-500",children:["(",e.reviews,")"]})]}),l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-lg font-bold text-gray-900",children:e.formatted_price||`₹${(e.standard_rate||0).toLocaleString("en-IN")}`}),e.originalPrice&&e.originalPrice>(e.standard_rate||0)&&l.jsx("span",{className:"text-sm text-gray-500 line-through",children:e.formatted_mrp||`₹${e.originalPrice.toLocaleString("en-IN")}`})]}),e.discount&&e.discount>0&&l.jsxs("div",{className:"text-sm text-green-600 font-medium",children:[e.discount,"% off"]})]}),l.jsx("div",{className:`text-sm font-medium mb-3 ${e.inStock?"text-green-600":"text-red-600"}`,children:e.inStock?"✓ In Stock":"✗ Out of Stock"}),l.jsxs("button",{onClick:_=>{_.preventDefault(),_.stopPropagation(),u&&u(e,_)},disabled:g||!e.inStock,className:`w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 ${e.inStock?g?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-yellow-400 hover:bg-yellow-500 text-black border border-yellow-400 hover:border-yellow-500":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[g?l.jsx(ka,{size:14,className:"animate-spin"}):l.jsx(Ph,{size:14}),l.jsx("span",{children:g?"Adding...":e.inStock?"Add to Cart":"Out of Stock"})]})]})]})},Pre=()=>{pl();const[e,t]=sP(),n=e.get("category"),i=e.get("search")||"",[o,u]=L.useState([]),[c,a]=L.useState([]),[g,_]=L.useState(!0),[S,N]=L.useState(n||""),[A,E]=L.useState("grid"),[D,B]=L.useState("name"),[$,G]=L.useState(!0),[W,J]=L.useState(50),[Z,K]=L.useState(!1),[le,_e]=L.useState([]),[de,pe]=L.useState(0),[Oe,He]=L.useState(!1),[We,st]=L.useState(""),[At,vt]=L.useState(""),[ze,Qe]=L.useState([]),[Je,Pt]=L.useState(new Set),[fe,Xe]=L.useState({}),[tt,Ae]=L.useState({}),[ot,ct]=L.useState(null),ut=Rh(),tn=L.useCallback((ge,ve="success")=>{ct({message:ge,type:ve}),setTimeout(()=>ct(null),3e3)},[]),Ge=L.useCallback(()=>Ht(null,null,function*(){try{const ge=is.get("user_id");if(!ge)return;const ve=yield fetch(`/api/resource/Wishlist/${ge}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(ve.ok){const ht=yield ve.json();if(ht.data&&ht.data.items){const ft=new Set(ht.data.items.map(qt=>qt.item_code));Pt(ft)}}}catch(ge){console.error("❌ Error fetching wishlist status:",ge)}}),[]),Ye=L.useCallback((ge,ve)=>Ht(null,null,function*(){ve&&(ve.preventDefault(),ve.stopPropagation());const ht=Je.has(ge.item_code),ft=ht?"remove":"add";try{Xe(Qt=>Me(te({},Qt),{[ge.item_code]:!0}));const cn=yield fetch(ht?"/api/method/webshop.webshop.doctype.wishlist.wishlist.remove_from_wishlist":"/api/method/webshop.webshop.doctype.wishlist.wishlist.add_to_wishlist",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:ge.item_code})});if(!cn.ok)throw new Error(`HTTP error! status: ${cn.status}`);Pt(Qt=>{const xt=new Set(Qt);return ht?xt.delete(ge.item_code):xt.add(ge.item_code),xt}),u(Qt=>Qt.map(xt=>xt.item_code===ge.item_code?Me(te({},xt),{wished:!ht}):xt)),ut(ht?Nre(ge.item_code):kre(ge)),tn(`💖 ${ge.item_name} ${ht?"removed from":"added to"} wishlist!`,"success")}catch(qt){console.error(`❌ Error ${ft}ing to/from wishlist:`,qt),tn(`❌ Failed to ${ft} item. Please try again.`,"error")}finally{Xe(qt=>Me(te({},qt),{[ge.item_code]:!1}))}}),[Je,tn,ut]),zt=L.useCallback((ge,ve)=>Ht(null,null,function*(){ve&&(ve.preventDefault(),ve.stopPropagation());try{Ae(qt=>Me(te({},qt),{[ge.item_code]:!0})),console.log(`🛒 Adding ${ge.item_name} to ERPNext cart...`);const ht=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:ge.item_code,qty:1})});if(!ht.ok)throw new Error(`HTTP error! status: ${ht.status}`);const ft=yield ht.json();if(console.log("🛒 Add to Cart Response:",ft),ft.message)return tn(`✅ ${ge.item_name} added to cart!`,"success"),u(qt=>qt.map(cn=>cn.item_code===ge.item_code?Me(te({},cn),{in_cart:!0}):cn)),!0;throw new Error("Failed to add to cart")}catch(ht){return console.error("❌ Error adding to cart:",ht),tn("❌ Failed to add to cart. Please try again.","error"),!1}finally{Ae(ht=>Me(te({},ht),{[ge.item_code]:!1}))}}),[tn]),Bt=()=>Ht(null,null,function*(){const ge=new Headers;ge.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");let ve=[],ht=0;const ft=50;let qt=!0,cn=1;try{for(_(!0),console.log("🔥 Starting to fetch ALL website items from ERPNext...");qt;){const Qt=new FormData,xt={field_filters:{},attribute_filters:{},item_group:S||null,start:ht,page_length:ft,from_filters:!1};Qt.append("query_args",JSON.stringify(xt));const ae=yield(yield fetch("/api/method/webshop.webshop.api.get_product_filter_data",{method:"POST",headers:ge,body:Qt,redirect:"follow"})).json();ae.message&&ae.message.items&&ae.message.items.length>0?(ve=ve.concat(ae.message.items),ae.message.items.length<ft?qt=!1:(ht+=ft,cn++,yield new Promise(ie=>setTimeout(ie,100)))):qt=!1,cn>200&&(qt=!1)}if(ve.length>0){const Qt=ve.map(ie=>({id:ie.name||ie.item_code,item_name:ie.item_name||ie.web_item_name,web_item_name:ie.web_item_name,item_code:ie.item_code,image:ie.website_image?`${window.location.origin}${ie.website_image}`:"https://via.placeholder.com/300x300?text=No+Image",standard_rate:ie.price_list_rate||0,originalPrice:ie.formatted_mrp?parseFloat(ie.formatted_mrp.replace(/[^\d.]/g,"")):null,discount:ie.formatted_mrp&&ie.price_list_rate?Math.round((parseFloat(ie.formatted_mrp.replace(/[^\d.]/g,""))-ie.price_list_rate)/parseFloat(ie.formatted_mrp.replace(/[^\d.]/g,""))*100):0,formatted_price:ie.formatted_price,formatted_mrp:ie.formatted_mrp,rating:null,reviews:null,category:ie.item_group||"General",subcategory:ie.item_group||"General",brand:ie.brand||"Generic",inStock:ie.in_stock,in_cart:ie.in_cart,on_backorder:ie.on_backorder,description:ie.short_description||ie.web_long_description||`Premium ${ie.item_name||ie.web_item_name} from ${ie.item_group} category`,route:ie.route,has_variants:ie.has_variants,variant_of:ie.variant_of,website_warehouse:ie.website_warehouse,wished:ie.wished,ranking:ie.ranking,original_erpnext_data:ie,badge:ie.wished?"WISHLIST":ie.ranking>0?"BESTSELLER":ie.has_variants?"VARIANTS":ie.in_cart?"IN CART":"AVAILABLE"}));u(Qt);const je=[...new Set(Qt.map(ie=>ie.category).filter(Boolean))].map(ie=>{const be=Qt.find(ke=>ke.category===ie);return{name:ie,image:be?be.image:"https://via.placeholder.com/150x150?text="+encodeURIComponent(ie.substring(0,2)),subcategories:[{name:ie,image:be?be.image:"https://via.placeholder.com/150x150?text="+encodeURIComponent(ie.substring(0,2))}]}});a(je);const ae=[...new Set(Qt.map(ie=>ie.brand).filter(Boolean))].sort();Qe(ae)}else u([]),a([]),Qe([])}catch(Qt){console.error("❌ Error fetching ERPNext website items:",Qt),u([]),a([]),Qe([])}finally{_(!1)}});L.useEffect(()=>{Bt()},[S]),L.useEffect(()=>{o.length>0&&Ge()},[o.length,Ge]);const It=ge=>{N(ge),vt(ge),G(!1),K(!1),ge?t({category:ge}):(t({}),G(!0))},Lt=ge=>{_e(ve=>ve.includes(ge)?ve.filter(ht=>ht!==ge):[...ve,ge])},nn=(ge="")=>(ge?o.filter(ht=>ht.category===ge):o).filter(ht=>{const ft=i===""||ht.item_name&&ht.item_name.toLowerCase().includes(i.toLowerCase())||ht.web_item_name&&ht.web_item_name.toLowerCase().includes(i.toLowerCase())||ht.item_code&&ht.item_code.toLowerCase().includes(i.toLowerCase())||ht.description&&ht.description.toLowerCase().includes(i.toLowerCase()),qt=le.length===0||le.some(je=>ht.brand&&ht.brand.toLowerCase().includes(je.toLowerCase())),cn=de===0||ht.rating&&parseFloat(ht.rating)>=de,Qt=!Oe||ht.badge==="NEW LAUNCH";let xt=!0;if(We){const je=ht.standard_rate||0;switch(We){case"Under ₹1,000":xt=je<1e3;break;case"₹1,000 - ₹5,000":xt=je>=1e3&&je<=5e3;break;case"₹5,000 - ₹10,000":xt=je>=5e3&&je<=1e4;break;case"₹10,000 - ₹25,000":xt=je>=1e4&&je<=25e3;break;case"Over ₹25,000":xt=je>25e3;break;default:xt=!0}}return ft&&qt&&cn&&Qt&&xt}),_n=ge=>{const ve=[],ht=parseFloat(ge)||0;for(let ft=1;ft<=5;ft++)ft<=ht?ve.push(l.jsx(VT,{className:"text-yellow-500 text-sm"},ft)):ve.push(l.jsx(wre,{className:"text-yellow-500 text-sm"},ft));return ve},Xn=({isHomepage:ge=!1})=>l.jsxs("div",{className:`${Z?"fixed inset-y-0 left-0 z-50 w-80 lg:sticky lg:top-5 lg:w-60 lg:z-auto":"hidden lg:block lg:sticky lg:top-5 lg:w-60"} 
      bg-white text-black p-4 text-sm leading-5 flex-shrink-0 overflow-y-auto
      lg:border-r lg:border-gray-200 lg:rounded-lg lg:shadow-lg font-sans lg:max-h-[calc(100vh-2.5rem)]`,children:[l.jsxs("div",{className:"lg:hidden flex justify-between items-center mb-4 pb-4 border-b border-gray-200",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Filters"}),l.jsx("button",{onClick:()=>K(!1),className:"p-2 text-gray-600 hover:text-gray-900",children:l.jsx(gre,{size:16})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("h4",{className:"text-base font-bold text-gray-900 mb-2 leading-6",children:["Category (",c.length," total)"]}),l.jsx("div",{className:"mb-2",children:l.jsxs("span",{className:"flex items-center text-blue-600 text-sm font-bold",children:[l.jsx(QA,{className:"text-xs mr-2"}),ge?"Shop by Category":"All Products"]})}),l.jsxs("div",{className:"pl-4",children:[l.jsxs("div",{className:`py-1 text-xs cursor-pointer leading-4 ${!S&&!ge||ge&&!At?"text-blue-600 font-semibold":"text-gray-600 font-normal"}`,onClick:()=>{ge?vt(""):(It(""),G(!0))},children:["All Products (",o.length,")"]}),c.slice(0,12).map(ve=>{const ht=o.filter(ft=>ft.category===ve.name).length;return l.jsxs("div",{className:`py-1 text-xs cursor-pointer leading-4 ${ge&&At===ve.name||!ge&&S===ve.name?"text-blue-600 font-semibold":"text-gray-600 font-normal"}`,onClick:()=>{ge?vt(ve.name):It(ve.name)},children:[ve.name," (",ht,")"]},ve.name)})]})]}),ze.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("h4",{className:"text-base font-bold text-gray-900 mb-2 leading-6",children:["Brands (",ze.length," total)"]}),l.jsx("div",{className:"mb-2",children:l.jsxs("span",{className:"flex items-center text-blue-600 text-sm font-bold",children:[l.jsx(QA,{className:"text-xs mr-2"}),"ERPNext Brands"]})}),l.jsx("div",{className:"pl-4",children:ze.slice(0,10).map(ve=>{const ht=o.filter(ft=>ft.brand===ve).length;return l.jsxs("label",{className:"flex items-center cursor-pointer mb-1 leading-5",children:[l.jsx("input",{type:"checkbox",className:"mr-2 scale-110 accent-yellow-500",checked:le.includes(ve),onChange:()=>Lt(ve)}),l.jsxs("span",{className:`text-sm ${le.includes(ve)?"text-blue-600 font-semibold":"text-gray-900 font-normal"}`,children:[ve," (",ht,")"]})]},ve)})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-base font-bold text-gray-900 mb-2 leading-6",children:"Customer Reviews"}),[4,3,2,1].map(ve=>l.jsx("div",{className:"flex items-center cursor-pointer mb-1 p-1 leading-5",onClick:()=>pe(de===ve?0:ve),children:l.jsxs("div",{className:"flex items-center",children:[_n(ve),l.jsx("span",{className:`ml-2 text-sm no-underline ${de===ve?"text-yellow-500 font-semibold":"text-blue-600 font-normal"}`,children:"& Up"})]})},ve))]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-base font-bold text-gray-900 mb-2 leading-6",children:"Price"}),["Under ₹1,000","₹1,000 - ₹5,000","₹5,000 - ₹10,000","₹10,000 - ₹25,000","Over ₹25,000"].map(ve=>l.jsx("div",{className:`cursor-pointer py-1 text-sm leading-5 ${We===ve?"text-blue-600 font-semibold":"text-gray-900 font-normal"}`,onClick:()=>st(We===ve?"":ve),children:ve},ve))]})]}),Gn=({product:ge})=>{if(!ge)return null;const ve=Je.has(ge.item_code),ht=fe[ge.item_code];return l.jsx(Qs,{to:`/product/${ge.route||ge.id||ge.name}`,className:"no-underline",children:l.jsxs("div",{className:"bg-white rounded-lg p-2 shadow-lg cursor-pointer transition-all duration-200 relative h-56 flex flex-col hover:transform hover:-translate-y-1 hover:shadow-xl",children:[l.jsx("button",{onClick:ft=>Ye(ge,ft),disabled:ht,className:`absolute top-1 right-1 z-20 p-1 rounded-full transition-all duration-200 ${ht?"bg-gray-200":"bg-white hover:bg-gray-50"} shadow-md`,style:{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:ht?l.jsx(ka,{size:12,className:"text-gray-400 animate-spin"}):l.jsx(vd,{size:14,className:`transition-colors duration-200 ${ve?"text-red-500":"text-gray-300 hover:text-red-300"}`})}),l.jsx("div",{className:"w-full h-24 mb-2 overflow-hidden rounded",children:l.jsx("img",{src:ge.image||"https://via.placeholder.com/300x300?text=No+Image",alt:ge.item_name||ge.web_item_name||"Product",className:"w-full h-full object-cover",onError:ft=>{const qt=ge.item_name||ge.web_item_name||"Product";ft.target.src=`https://via.placeholder.com/300x300?text=${encodeURIComponent(qt.substring(0,10))}`}})}),l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1 leading-tight overflow-hidden text-ellipsis whitespace-nowrap",children:ge.item_name||ge.web_item_name||"Product Name"}),ge.brand&&ge.brand!=="Generic"&&l.jsx("div",{className:"text-xs text-blue-600 mb-1 font-medium",children:ge.brand}),ge.rating&&l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsxs("span",{className:"bg-green-600 text-white text-xs font-semibold px-1 py-0.5 rounded",children:[ge.rating," ★"]}),ge.reviews&&l.jsxs("span",{className:"text-xs text-gray-600",children:["(",ge.reviews,")"]})]}),l.jsxs("div",{className:"mt-auto",children:[l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsx("span",{className:"text-xs font-semibold text-gray-900",children:ge.formatted_price||`₹${ge.standard_rate?ge.standard_rate.toLocaleString():"0"}`}),ge.originalPrice&&ge.originalPrice>(ge.standard_rate||0)&&l.jsx("span",{className:"text-xs text-gray-600 line-through",children:ge.formatted_mrp||`₹${ge.originalPrice.toLocaleString()}`})]}),ge.discount&&ge.discount>0&&l.jsxs("div",{className:"text-xs text-green-600 font-medium",children:[ge.discount,"% off"]})]})]})]})})},gn=({product:ge})=>{const ve=Je.has(ge.item_code),ht=fe[ge.item_code],ft=tt[ge.item_code];return l.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-all duration-200",children:l.jsxs("div",{className:"flex items-start gap-6",children:[l.jsxs(Qs,{to:`/product/${ge.route||ge.id||ge.name}`,className:"flex-shrink-0",children:[l.jsx("div",{className:"w-40 h-32 bg-gray-100 rounded-lg overflow-hidden",children:l.jsx("img",{src:ge.image||"https://via.placeholder.com/300x300?text=No+Image",alt:ge.item_name||ge.web_item_name||"Product",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",onError:qt=>{const cn=ge.item_name||ge.web_item_name||"Product";qt.target.src=`https://via.placeholder.com/300x300?text=${encodeURIComponent(cn.substring(0,10))}`}})}),ge.badge&&l.jsx("div",{className:`inline-block mt-2 text-white text-xs font-semibold px-2 py-1 rounded ${ge.badge==="BESTSELLER"?"bg-yellow-500":ge.badge==="WISHLIST"?"bg-pink-600":ge.badge==="IN CART"?"bg-green-500":ge.badge==="VARIANTS"?"bg-blue-500":"bg-blue-600"}`,children:ge.badge})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx(Qs,{to:`/product/${ge.route||ge.id||ge.name}`,className:"no-underline",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 hover:text-blue-600 transition-colors",children:ge.item_name||ge.web_item_name||"Product Name"})}),ge.brand&&ge.brand!=="Generic"&&l.jsxs("div",{className:"text-sm text-blue-600 mb-2 font-medium",children:["Brand: ",ge.brand]}),l.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:["Item Code: ",ge.item_code]}),ge.rating&&l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsxs("div",{className:"flex items-center bg-green-600 text-white px-2 py-1 rounded text-sm font-semibold",children:[ge.rating," ★"]}),ge.reviews&&l.jsxs("span",{className:"text-sm text-gray-600",children:["(",ge.reviews.toLocaleString()," reviews)"]})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:ge.description}),l.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:["Category: ",ge.category]}),l.jsxs("div",{className:`text-sm font-medium mb-3 ${ge.inStock?"text-green-600":"text-red-600"}`,children:[ge.inStock?"✓ In Stock":"✗ Out of Stock",ge.on_backorder&&" (On Backorder)"]})]}),l.jsxs("div",{className:"flex-shrink-0 text-right",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:ge.formatted_price||`₹${(ge.standard_rate||0).toLocaleString("en-IN")}`}),ge.originalPrice&&ge.originalPrice>(ge.standard_rate||0)&&l.jsxs("div",{className:"flex items-center gap-2 justify-end mb-1",children:[l.jsx("span",{className:"text-sm text-gray-500 line-through",children:ge.formatted_mrp||`₹${ge.originalPrice.toLocaleString("en-IN")}`}),l.jsxs("span",{className:"text-sm text-green-600 font-semibold",children:[ge.discount,"% off"]})]}),ge.discount>0&&l.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["Save ₹",((ge.originalPrice||0)-(ge.standard_rate||0)).toLocaleString("en-IN")]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("button",{onClick:qt=>Ye(ge,qt),disabled:ht,className:`w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg border-2 transition-all duration-200 ${ve?"bg-red-50 border-red-500 text-red-600 hover:bg-red-100":"bg-white border-gray-300 text-gray-600 hover:border-red-300 hover:text-red-500"} ${ht?"opacity-50 cursor-not-allowed":""}`,children:[ht?l.jsx(ka,{size:14,className:"animate-spin"}):l.jsx(vd,{size:14,className:ve?"text-red-500":""}),l.jsx("span",{className:"text-sm font-medium",children:ht?"Processing...":ve?"In Wishlist":"Add to Wishlist"})]}),l.jsxs("button",{onClick:qt=>zt(ge,qt),disabled:ft||!ge.inStock,className:`w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 ${ge.inStock?"bg-yellow-400 hover:bg-yellow-500 text-black border-2 border-yellow-400 hover:border-yellow-500":"bg-gray-300 text-gray-500 cursor-not-allowed border-2 border-gray-300"} ${ft?"opacity-50":""}`,children:[ft?l.jsx(ka,{size:14,className:"animate-spin"}):l.jsx(Ph,{size:14}),l.jsx("span",{className:"text-sm font-bold",children:ft?"Adding...":ge.inStock?"Add to Cart":"Out of Stock"})]})]})]})]})})},ln=()=>{if(!ot)return null;const ge=()=>{switch(ot.type){case"success":return"#00A652";case"error":return"#B12704";case"warning":return"#FF9900";default:return"#007185"}};return l.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:ge(),color:"white",padding:"12px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxWidth:"400px"},children:ot.message})};if(g)return l.jsx("div",{className:"flex justify-center items-center min-h-screen bg-white",children:l.jsx("div",{className:"text-lg text-gray-600",children:"Loading ALL ERPNext website items..."})});if($){const ge=nn(At).slice(0,W);return l.jsxs(l.Fragment,{children:[l.jsx(ln,{}),l.jsxs("div",{className:"bg-white min-h-screen",children:[l.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-40",children:l.jsx("button",{onClick:()=>K(!0),className:"bg-gray-900 text-white p-3 rounded-lg shadow-lg hover:bg-gray-800 transition-colors",children:l.jsx(KA,{size:16})})}),Z&&l.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>K(!1)}),l.jsx("div",{className:"w-full",children:l.jsxs("div",{className:"flex gap-6 p-5 items-start h-[40rem] overflow-scroll",children:[l.jsx(Xn,{isHomepage:!0}),l.jsxs("div",{className:"flex-1 min-w-0 lg:pl-0 pl-16 overflow-auto",children:[c.length>0&&l.jsxs("div",{className:"mb-10",children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-5",children:"Shop by category"}),l.jsx("div",{className:"flex overflow-x-auto gap-5 pb-3 scrollbar-hide",children:c.slice(0,8).map((ve,ht)=>l.jsxs("div",{onClick:()=>vt(ve.name),className:"flex flex-col items-center min-w-max cursor-pointer text-center transition-transform duration-200 hover:scale-105",children:[l.jsx("div",{className:"w-16 h-16 md:w-18 md:h-18 rounded-full overflow-hidden mb-2 shadow-lg",children:l.jsx("img",{src:ve.image,alt:ve.name,className:"w-full h-full object-cover",onError:ft=>{ft.target.src=`https://via.placeholder.com/150x150?text=${encodeURIComponent(ve.name.substring(0,2))}`}})}),l.jsx("span",{className:"text-xs text-gray-600 font-normal leading-tight max-w-20 break-words",children:ve.name})]},ht))})]}),c.length>0&&l.jsxs("div",{className:"flex gap-3 mb-8 overflow-x-auto pb-2",children:[l.jsxs("button",{onClick:()=>vt(""),className:`px-5 py-3 border-none rounded-full text-sm font-semibold cursor-pointer transition-all duration-300 whitespace-nowrap ${At===""?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["All Products (",o.length,")"]}),c.map(ve=>{const ht=o.filter(ft=>ft.category===ve.name).length;return l.jsxs("button",{onClick:()=>vt(ve.name),className:`px-5 py-3 border-none rounded-full text-sm font-semibold cursor-pointer transition-all duration-300 whitespace-nowrap ${At===ve.name?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[ve.name," (",ht,")"]},ve.name)})]}),l.jsxs("div",{className:"mb-10",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-5 gap-4",children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 m-0",children:At?`${At} Products (${ge.length})`:`All Website Items (${ge.length})`}),l.jsx("button",{onClick:()=>G(!1),className:"text-gray-900 no-underline text-sm font-semibold bg-transparent border-none cursor-pointer hover:text-blue-600",children:"View Detailed List →"})]}),l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 p-4 bg-gray-100 rounded gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm text-gray-900 font-semibold",children:"Sort by:"}),l.jsxs("select",{value:D,onChange:ve=>B(ve.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm bg-white text-gray-900 font-inherit",children:[l.jsx("option",{value:"name",children:"Featured"}),l.jsx("option",{value:"price_low",children:"Price: Low to High"}),l.jsx("option",{value:"price_high",children:"Price: High to Low"}),l.jsx("option",{value:"rating",children:"Customer Rating"}),l.jsx("option",{value:"newest",children:"Newest Arrivals"})]})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",ge.length," of ",o.length," products",(le.length>0||de>0||Oe||We)&&" (filtered)"]})]}),ge.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3",children:ge.map(ve=>l.jsx(Gn,{product:ve},ve.id))}):l.jsxs("div",{className:"text-center py-15 px-5 bg-gray-100 rounded-lg",children:[l.jsx("h3",{className:"text-gray-900 mb-3 text-xl",children:"No website items found"}),l.jsx("p",{className:"text-gray-600 text-sm mb-3",children:At?`No items found in ${At} category. Try selecting "All Products" or adjust your filters.`:"Make sure you have website items configured in ERPNext with the webshop module enabled."}),l.jsx("button",{onClick:()=>{_e([]),pe(0),He(!1),st(""),vt("")},className:"px-4 py-2 bg-gray-900 text-white border-none rounded cursor-pointer mt-3",children:"Show All Products"})]})]}),ge.length<o.length&&l.jsxs("div",{className:"text-center mt-10",children:[l.jsx("button",{onClick:()=>J(ve=>ve+50),className:"px-6 py-3 bg-yellow-500 text-white border-none rounded-md text-sm font-semibold cursor-pointer mr-3",children:"Load More Products"}),l.jsx("button",{onClick:()=>G(!1),className:"px-6 py-3 bg-gray-900 text-white border-none rounded-md text-sm font-semibold cursor-pointer",children:"View Detailed List"})]})]})]})})]})]})}const Ue=nn().sort((ge,ve)=>{switch(D){case"price_low":return(ge.standard_rate||0)-(ve.standard_rate||0);case"price_high":return(ve.standard_rate||0)-(ge.standard_rate||0);case"rating":return parseFloat(ve.rating||0)-parseFloat(ge.rating||0);case"newest":return new Date(ve.creation||0)-new Date(ge.creation||0);case"name":default:return(ge.item_name||"").localeCompare(ve.item_name||"")}});return l.jsxs(l.Fragment,{children:[l.jsx(ln,{}),l.jsxs("div",{className:"bg-white min-h-screen",children:[l.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-40",children:l.jsx("button",{onClick:()=>K(!0),className:"bg-gray-900 text-white p-3 rounded-lg shadow-lg hover:bg-gray-800 transition-colors",children:l.jsx(KA,{size:16})})}),Z&&l.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>K(!1)}),l.jsx("div",{className:"w-full",children:l.jsxs("div",{className:"flex gap-6 p-5 items-start h-[40rem] overflow-scroll",children:[l.jsx(Xn,{isHomepage:!1}),l.jsxs("div",{className:"flex-1 min-w-0 lg:pl-0 pl-16 overflow-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-3xl font-normal text-gray-900 mb-2",children:S||"All Products"}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Ue.length," items",i&&` for "${i}"`,(le.length>0||de>0||Oe||We)&&" (filtered)"]})]}),l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 p-4 bg-gray-100 rounded gap-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[l.jsx("span",{className:"text-sm text-gray-900 font-semibold",children:"Sort by:"}),l.jsxs("select",{value:D,onChange:ge=>B(ge.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm bg-white text-gray-900 font-inherit",children:[l.jsx("option",{value:"name",children:"Featured"}),l.jsx("option",{value:"price_low",children:"Price: Low to High"}),l.jsx("option",{value:"price_high",children:"Price: High to Low"}),l.jsx("option",{value:"newest",children:"Newest Arrivals"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>E("grid"),className:`p-2 border border-gray-300 rounded cursor-pointer ${A==="grid"?"bg-yellow-500 text-white":"bg-white text-gray-900"}`,children:l.jsx(_z,{size:12})}),l.jsx("button",{onClick:()=>E("list"),className:`p-2 border border-gray-300 rounded cursor-pointer ${A==="list"?"bg-yellow-500 text-white":"bg-white text-gray-900"}`,children:l.jsx(xz,{size:12})})]})]}),Ue.length===0?l.jsxs("div",{className:"text-center py-15 px-5 bg-white rounded border border-gray-300",children:[l.jsx("h3",{className:"text-2xl text-gray-900 mb-4",children:"No website items found"}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Make sure you have website items configured in ERPNext or try adjusting your filters"}),l.jsx("button",{onClick:()=>{_e([]),pe(0),He(!1),st("")},className:"px-6 py-3 bg-gray-900 text-white border-none rounded-md cursor-pointer",children:"Clear All Filters"})]}):l.jsx("div",{className:`${A==="list"?"space-y-4":"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}`,children:Ue.map(ge=>A==="list"?l.jsx(gn,{product:ge},ge.id):l.jsx(Are,{product:ge,wishlistedItems:Je,wishlistLoading:fe,cartLoading:tt,onWishlistToggle:Ye,onAddToCart:zt},ge.id))})]})]})})]})]})},Rre=({product:e})=>{console.log("Products......",e),Rh();const{wishlist:t}=hd(u=>u.cart),n=t.some(u=>u.name===e.name),i=()=>Ht(null,null,function*(){try{console.log(`🛒 Adding 1 x ${e.item_name} to ERPNext cart...`);const u=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:e.item_code,qty:1})});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const c=yield u.json();if(console.log("🛒 Add to Cart Response:",c),c.message)alert(`✅ Added 1 x ${e.item_name} to cart!`);else throw new Error("Failed to add to cart")}catch(u){console.error("❌ Error adding to cart:",u),alert("❌ Error adding item to cart. Please try again.")}finally{}}),o=u=>Ht(null,null,function*(){u.preventDefault();const c=yield fetch("/api/method/webshop.webshop.doctype.wishlist.wishlist.add_to_wishlist",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:e.item_code||e.id})});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const a=yield c.json();console.log("💖 Add to Wishlist API Response:",a)});return l.jsx("div",{style:{textDecoration:"none",color:"inherit"},children:l.jsxs("div",{style:{backgroundColor:In.white,borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",overflow:"hidden",transition:"all 0.3s ease",cursor:"pointer",position:"relative",height:"400px",display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{position:"relative",height:"220px",overflow:"hidden"},children:[l.jsx("img",{src:e.image||"https://via.placeholder.com/300x220",alt:e.item_name,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onMouseOver:u=>u.target.style.transform="scale(1.05)",onMouseOut:u=>u.target.style.transform="scale(1)"}),l.jsx("button",{onClick:o,style:{position:"absolute",top:"12px",right:"12px",backgroundColor:In.white,border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"all 0.3s ease"},children:n?l.jsx(vd,{color:In.error,size:18}):l.jsx(vre,{color:In.gray,size:18})})]}),l.jsxs("div",{style:{padding:"16px",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"600",color:In.textPrimary,lineHeight:"1.4",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.item_name}),l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:In.success,padding:"2px 6px",borderRadius:"4px",marginRight:"8px"},children:[l.jsx(VT,{color:In.white,size:12}),l.jsx("span",{style:{color:In.white,fontSize:"12px",fontWeight:"bold",marginLeft:"4px"},children:"4.2"})]}),l.jsx("span",{style:{color:In.gray,fontSize:"12px"},children:"(150 reviews)"})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",flexWrap:"wrap",gap:"8px"},children:l.jsxs("span",{style:{fontSize:"20px",fontWeight:"bold",color:In.textPrimary},children:["₹",e.standard_rate]})})]}),l.jsx("button",{onClick:i,style:{width:"100%",backgroundColor:In.primary,color:In.white,border:"none",borderRadius:"8px",padding:"12px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.3s ease"},onMouseOver:u=>u.target.style.backgroundColor=In.primaryDark,onMouseOut:u=>u.target.style.backgroundColor=In.primary,children:"Add to Cart"})]})]})})},Dre=()=>{pl();const[e,t]=sP(),n=e.get("category"),i=e.get("search")||"",o=Rh(),[u,c]=L.useState([]),[a,g]=L.useState([]),[_,S]=L.useState(!0),[N,A]=L.useState(n||""),[E,D]=L.useState("list"),[B,$]=L.useState("name"),[G,W]=L.useState({}),[J,Z]=L.useState({}),[K,le]=L.useState(null),_e=L.useCallback((Ye,zt="success")=>{le({message:Ye,type:zt}),setTimeout(()=>le(null),3e3)},[]),[de,pe]=L.useState([]),[Oe,He]=L.useState(!1),[We,st]=L.useState(!1),[At,vt]=L.useState(0),[ze,Qe]=L.useState(!1),[Je,Pt]=L.useState(""),fe=L.useCallback((Ye,zt)=>Ht(null,null,function*(){zt&&(zt.preventDefault(),zt.stopPropagation());try{W(Lt=>Me(te({},Lt),{[Ye.id]:!0})),console.log(`🛒 Adding ${Ye.item_name} to ERPNext cart...`);const Bt=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:Ye.item_code||Ye.id,qty:1})});if(!Bt.ok)throw new Error(`HTTP error! status: ${Bt.status}`);const It=yield Bt.json();if(console.log("🛒 Add to Cart API Response:",It),It.message)return o(Tre(Me(te({},Ye),{quantity:1}))),_e(`✅ ${Ye.item_name} added to cart!`,"success"),!0;throw new Error("Failed to add to cart")}catch(Bt){return console.error("❌ Error adding to cart:",Bt),_e("❌ Failed to add to cart. Please try again.","error"),!1}finally{W(Bt=>Me(te({},Bt),{[Ye.id]:!1}))}}),[o,_e]),Xe=L.useCallback((Ye,zt)=>Ht(null,null,function*(){zt&&(zt.preventDefault(),zt.stopPropagation());try{Z(Lt=>Me(te({},Lt),{[Ye.id]:!0})),console.log(`💖 Adding ${Ye.item_name} to ERPNext wishlist...`);const Bt=yield fetch("/api/method/webshop.webshop.doctype.wishlist.wishlist.add_to_wishlist",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:Ye.item_code||Ye.id})});if(!Bt.ok)throw new Error(`HTTP error! status: ${Bt.status}`);const It=yield Bt.json();return console.log("💖 Add to Wishlist API Response:",It),_e(`💖 ${Ye.item_name} added to wishlist!`,"success"),c(Lt=>Lt.map(nn=>nn.id===Ye.id?Me(te({},nn),{wished:!0}):nn)),!0}catch(Bt){return console.error("❌ Error adding to wishlist:",Bt),_e("❌ Failed to add to wishlist. Please try again.","error"),!1}finally{Z(Bt=>Me(te({},Bt),{[Ye.id]:!1}))}}),[_e]),tt=()=>{const Ye=[{name:"Electronics",subcategories:[{name:"Laptops",image:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=500&h=500&fit=crop&crop=center"},{name:"Headphones",image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&h=500&fit=crop&crop=center"},{name:"Tablets",image:"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=500&h=500&fit=crop&crop=center"},{name:"Smartwatches",image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&h=500&fit=crop&crop=center"},{name:"Monitors",image:"https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=500&h=500&fit=crop&crop=center"},{name:"Desktops",image:"https://images.unsplash.com/photo-1587831990711-23ca6441447b?w=500&h=500&fit=crop&crop=center"},{name:"Gaming Laptops",image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&h=500&fit=crop&crop=center"},{name:"Cameras",image:"https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=500&h=500&fit=crop&crop=center"}]},{name:"Fashion",subcategories:[{name:"Men's Clothing",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500&h=500&fit=crop&crop=center"},{name:"Women's Clothing",image:"https://images.unsplash.com/photo-1494790108755-2616c4f5d81c?w=500&h=500&fit=crop&crop=center"},{name:"Kids Fashion",image:"https://images.unsplash.com/photo-1519238263530-99bdd11df2ea?w=500&h=500&fit=crop&crop=center"},{name:"Footwear",image:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=500&h=500&fit=crop&crop=center"}]},{name:"Home & Living",subcategories:[{name:"Furniture",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=500&h=500&fit=crop&crop=center"},{name:"Kitchen Appliances",image:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=500&h=500&fit=crop&crop=center"},{name:"Home Decor",image:"https://images.unsplash.com/photo-1513694203232-719a280e022f?w=500&h=500&fit=crop&crop=center"},{name:"Bedding",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=500&h=500&fit=crop&crop=center"}]},{name:"Books",subcategories:[{name:"Fiction",image:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=500&h=500&fit=crop&crop=center"},{name:"Non-Fiction",image:"https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=500&h=500&fit=crop&crop=center"},{name:"Academic",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500&h=500&fit=crop&crop=center"},{name:"Comics & Manga",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=500&h=500&fit=crop&crop=center"}]},{name:"Sports",subcategories:[{name:"Fitness Equipment",image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=500&h=500&fit=crop&crop=center"},{name:"Cricket",image:"https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?w=500&h=500&fit=crop&crop=center"},{name:"Football",image:"https://images.unsplash.com/photo-1431324155629-1a6deb1dec8d?w=500&h=500&fit=crop&crop=center"},{name:"Tennis",image:"https://images.unsplash.com/photo-1622279457486-62dcc4a431d6?w=500&h=500&fit=crop&crop=center"}]}],zt=[];let Bt=1;return Ye.forEach(It=>{It.subcategories.forEach(Lt=>{for(let nn=1;nn<=5;nn++)zt.push({id:Bt++,name:`${Lt.name.replace(/\s+/g,"-")}-${Bt}`,item_name:`${Lt.name} Product ${nn}`,item_code:`ITEM-${Bt}`,image:Lt.image,standard_rate:Math.floor(Math.random()*5e4)+1e3,originalPrice:Math.floor(Math.random()*6e4)+55e3,discount:Math.floor(Math.random()*50)+10,rating:(Math.random()*2+3).toFixed(1),reviews:Math.floor(Math.random()*1e3)+100,category:It.name,subcategory:Lt.name,description:`Premium ${Lt.name} product with advanced features and high-quality materials.`,features:["High-quality materials and construction","Advanced technology and features","Professional grade performance","2-year comprehensive warranty","Fast and reliable delivery"],brand:["Samsung","Apple","Sony","LG","HP","Dell","Xiaomi","OnePlus"][Math.floor(Math.random()*8)],inStock:Math.random()>.1,wished:!1,in_cart:!1})})}),zt};L.useEffect(()=>{Ht(null,null,function*(){try{S(!0);const zt=tt(),Bt=[{name:"Electronics",item_group_name:"Electronics"},{name:"Fashion",item_group_name:"Fashion"},{name:"Home & Living",item_group_name:"Home & Living"},{name:"Books",item_group_name:"Books"},{name:"Sports",item_group_name:"Sports"}];try{const[It,Lt]=yield Promise.all([Lj.getItems(N?{item_group:N}:{}),Lj.getCategories()]);if(It&&It.length>0){const nn=It.map((_n,Xn)=>Me(te({},_n),{id:_n.id||_n.item_code||Xn+1,name:_n.name||`product-${Xn+1}`,item_code:_n.item_code||`ITEM-${Xn+1}`,wished:!1,in_cart:!1}));c(nn)}else c(zt);Lt&&Lt.length>0?g(Lt):g(Bt)}catch(It){console.log("API failed, using sample data:",It),c(zt),g(Bt)}}catch(zt){console.error("Error:",zt),c(tt()),g([{name:"Electronics",item_group_name:"Electronics"},{name:"Fashion",item_group_name:"Fashion"},{name:"Home & Living",item_group_name:"Home & Living"},{name:"Books",item_group_name:"Books"},{name:"Sports",item_group_name:"Sports"}])}finally{S(!1)}})},[N]);const Ae=Ye=>{A(Ye),t(Ye?{category:Ye}:{})},ot=Ye=>{pe(zt=>zt.includes(Ye)?zt.filter(Bt=>Bt!==Ye):[...zt,Ye])},ut=u.filter(Ye=>{var Lt;const zt=i===""||Ye.item_name.toLowerCase().includes(i.toLowerCase())||((Lt=Ye.description)==null?void 0:Lt.toLowerCase().includes(i.toLowerCase())),Bt=de.length===0||de.some(nn=>{var _n;return(_n=Ye.brand)==null?void 0:_n.toLowerCase().includes(nn.toLowerCase())}),It=!N||Ye.category===N;return zt&&Bt&&It}).sort((Ye,zt)=>{switch(B){case"price_low":return Ye.standard_rate-zt.standard_rate;case"price_high":return zt.standard_rate-Ye.standard_rate;case"name":default:return Ye.item_name.localeCompare(zt.item_name)}}),tn=({product:Ye})=>{var It,Lt;const zt=G[Ye.id],Bt=J[Ye.id];return l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"16px",borderBottom:"1px solid #E5E7EB",backgroundColor:"#FFFFFF",transition:"background-color 0.2s ease"},onMouseOver:nn=>nn.currentTarget.style.backgroundColor="#F9FAFB",onMouseOut:nn=>nn.currentTarget.style.backgroundColor="#FFFFFF",children:[l.jsx("div",{style:{marginRight:"12px"},children:l.jsx("button",{onClick:nn=>Xe(Ye,nn),disabled:Bt||Ye.wished,style:{background:"none",border:"none",cursor:Bt||Ye.wished?"not-allowed":"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:Bt?l.jsx(ka,{size:18,style:{animation:"spin 1s linear infinite",color:"#FF9900"}}):l.jsx(vd,{size:18,style:{color:Ye.wished?"#FF4444":"#DDD",transition:"color 0.2s ease"}})})}),l.jsx(Qs,{to:`/product/${Ye.id}`,style:{textDecoration:"none",flexShrink:0},children:l.jsx("div",{style:{width:"140px",height:"120px",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},children:l.jsx("img",{src:Ye.image||"https://via.placeholder.com/140x120",alt:Ye.item_name,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onMouseOver:nn=>nn.target.style.transform="scale(1.05)",onMouseOut:nn=>nn.target.style.transform="scale(1)"})})}),l.jsxs("div",{style:{flex:1,paddingLeft:"20px",paddingRight:"20px"},children:[l.jsx(Qs,{to:`/product/${Ye.id}`,style:{textDecoration:"none",color:"inherit"},children:l.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#0F1111",margin:"0 0 6px 0",lineHeight:"1.3",cursor:"pointer"},children:Ye.item_name})}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#00A652",color:"white",padding:"2px 6px",borderRadius:"3px",fontSize:"12px",fontWeight:"600"},children:[Ye.rating," ★"]}),l.jsxs("span",{style:{fontSize:"13px",color:"#878787"},children:[((It=Ye.reviews)==null?void 0:It.toLocaleString())||"0"," Ratings & Reviews"]})]}),l.jsx("div",{style:{fontSize:"13px",color:"#212121",lineHeight:"1.4"},children:((Lt=Ye.features)==null?void 0:Lt.slice(0,4).map((nn,_n)=>l.jsxs("div",{children:["• ",nn]},_n)))||l.jsxs(l.Fragment,{children:[l.jsx("div",{children:"• High-quality materials and construction"}),l.jsx("div",{children:"• Advanced technology and features"}),l.jsx("div",{children:"• Professional grade performance"}),l.jsx("div",{children:"• 2-year comprehensive warranty"})]})})]}),l.jsxs("div",{style:{width:"220px",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px",flexShrink:0},children:[l.jsxs("div",{style:{textAlign:"right"},children:[l.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#212121",marginBottom:"4px"},children:["₹",(Ye.standard_rate||29990).toLocaleString()]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"flex-end",marginBottom:"4px"},children:[l.jsxs("span",{style:{fontSize:"14px",color:"#878787",textDecoration:"line-through"},children:["₹",(Ye.originalPrice||49990).toLocaleString()]}),l.jsxs("span",{style:{fontSize:"14px",color:"#388E3C",fontWeight:"600"},children:[Ye.discount||40,"% off"]})]})]}),l.jsx("div",{style:{fontSize:"13px",color:"#388E3C",fontWeight:"500",textAlign:"right",marginBottom:"8px"},children:"Upto ₹2,420 Off on Exchange"}),l.jsx("div",{style:{backgroundColor:"#E8F5E8",color:"#2E7D32",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",marginBottom:"12px"},children:"Bank Offer"}),l.jsxs("button",{onClick:nn=>fe(Ye,nn),disabled:zt||!Ye.inStock,style:{width:"100%",padding:"8px 12px",backgroundColor:zt?"#F0F0F0":Ye.inStock?"#FFD814":"#CCCCCC",border:`1px solid ${zt?"#D0D0D0":Ye.inStock?"#FCD200":"#AAAAAA"}`,borderRadius:"20px",fontSize:"13px",fontWeight:"600",cursor:zt||!Ye.inStock?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",marginBottom:"8px",transition:"all 0.3s ease",opacity:zt||!Ye.inStock?.7:1,color:Ye.inStock?"#000000":"#666666"},onMouseOver:nn=>{!zt&&Ye.inStock&&(nn.target.style.backgroundColor="#F7CA00")},onMouseOut:nn=>{!zt&&Ye.inStock&&(nn.target.style.backgroundColor="#FFD814")},children:[zt?l.jsx(ka,{style:{animation:"spin 1s linear infinite"},size:12}):l.jsx(Ph,{size:12}),zt?"Adding...":Ye.inStock?"Add to Cart":"Out of Stock"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#2874F0",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",style:{marginRight:"4px"}}),"Add to Compare"]})]})]})},Ge=()=>{if(!K)return null;const Ye=()=>{switch(K.type){case"success":return"#00A652";case"error":return"#B12704";case"warning":return"#FF9900";default:return"#007185"}};return l.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:Ye(),color:"white",padding:"12px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxWidth:"400px"},children:K.message})};return _?l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",fontSize:"18px",color:"#666666",backgroundColor:"#FFFFFF"},children:[l.jsx(ka,{size:40,color:"#FF9900",style:{animation:"spin 1s linear infinite",marginRight:"16px"}}),"Loading products..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Ge,{}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh"},children:[l.jsxs("div",{style:{display:"flex",maxWidth:"1400px",margin:"0 auto",gap:"24px",padding:"20px"},children:[l.jsxs("div",{style:{position:"sticky",top:"20px",alignSelf:"flex-start",width:"240px",height:"fit-content",maxHeight:"calc(100vh - 40px)",backgroundColor:"#FFFFFF",color:"#000000",padding:"16px 0 16px 16px",fontSize:"14px",lineHeight:"20px",flexShrink:0,overflowY:"auto",borderRight:"1px solid #E7E7E7",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",fontFamily:'"Amazon Ember", Arial, sans-serif'},children:[l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h4",{style:{fontSize:"16px",fontWeight:"700",color:"#0F1111",margin:"0 0 8px 0",lineHeight:"24px"},children:"Categories"}),l.jsxs("div",{style:{paddingLeft:"16px"},children:[l.jsxs("div",{style:{padding:"4px 0",fontSize:"13px",color:N?"#565959":"#007185",cursor:"pointer",lineHeight:"16px",fontWeight:N?"400":"600"},onClick:()=>Ae(""),children:["All Products (",u.length,")"]}),a.map(Ye=>{const zt=u.filter(Bt=>Bt.category===Ye.name).length;return l.jsxs("div",{style:{padding:"4px 0",fontSize:"13px",color:N===Ye.name?"#007185":"#565959",cursor:"pointer",lineHeight:"16px",fontWeight:N===Ye.name?"600":"400"},onClick:()=>Ae(Ye.name),children:[Ye.item_group_name||Ye.name," (",zt,")"]},Ye.name)})]})]}),l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h4",{style:{fontSize:"16px",fontWeight:"700",color:"#0F1111",margin:"0 0 8px 0",lineHeight:"24px"},children:"Brands"}),["Samsung","Apple","Sony","LG","HP","Dell","Xiaomi","OnePlus"].map(Ye=>l.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"4px",lineHeight:"20px"},children:[l.jsx("input",{type:"checkbox",style:{marginRight:"8px",transform:"scale(1.1)",accentColor:"#FF9900"},checked:de.includes(Ye),onChange:()=>ot(Ye)}),l.jsx("span",{style:{color:"#0F1111",fontSize:"14px"},children:Ye})]},Ye))]}),l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h4",{style:{fontSize:"16px",fontWeight:"700",color:"#0F1111",margin:"0 0 8px 0",lineHeight:"24px"},children:"Price"}),["Under ₹1,000","₹1,000 - ₹5,000","₹5,000 - ₹10,000","₹10,000 - ₹25,000","Over ₹25,000"].map(Ye=>l.jsx("div",{style:{cursor:"pointer",padding:"4px 0",fontSize:"14px",color:Je===Ye?"#007185":"#0F1111",lineHeight:"20px",fontWeight:Je===Ye?"600":"400"},onClick:()=>Pt(Je===Ye?"":Ye),children:Ye},Ye))]})]}),l.jsxs("div",{style:{flex:1,minHeight:"0"},children:[l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h1",{style:{fontSize:"28px",fontWeight:"400",color:"#0F1111",margin:"0 0 8px 0"},children:N?`${N}`:"All Products"}),l.jsxs("div",{style:{fontSize:"14px",color:"#565959"},children:["Showing ",ut.length," products",i&&` for "${i}"`]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",padding:"12px 16px",backgroundColor:"#F7F8F8",borderRadius:"4px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[l.jsx("span",{style:{fontSize:"14px",color:"#0F1111",fontWeight:"600"},children:"Sort by:"}),l.jsxs("select",{value:B,onChange:Ye=>$(Ye.target.value),style:{padding:"6px 8px",border:"1px solid #D5D9D9",borderRadius:"4px",fontSize:"14px",backgroundColor:"#FFFFFF",color:"#0F1111",fontFamily:"inherit"},children:[l.jsx("option",{value:"name",children:"Popularity"}),l.jsx("option",{value:"price_low",children:"Price -- Low to High"}),l.jsx("option",{value:"price_high",children:"Price -- High to Low"}),l.jsx("option",{value:"rating",children:"Newest First"}),l.jsx("option",{value:"newest",children:"Discount"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("button",{onClick:()=>D("grid"),style:{padding:"6px 8px",border:"1px solid #D5D9D9",backgroundColor:E==="grid"?"#FF9900":"#FFFFFF",color:E==="grid"?"#FFFFFF":"#0F1111",borderRadius:"4px",cursor:"pointer"},children:l.jsx(_z,{size:12})}),l.jsx("button",{onClick:()=>D("list"),style:{padding:"6px 8px",border:"1px solid #D5D9D9",backgroundColor:E==="list"?"#FF9900":"#FFFFFF",color:E==="list"?"#FFFFFF":"#0F1111",borderRadius:"4px",cursor:"pointer"},children:l.jsx(xz,{size:12})})]})]}),ut.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",backgroundColor:"#FFFFFF",borderRadius:"4px",border:"1px solid #D5D9D9"},children:[l.jsx("h3",{style:{fontSize:"24px",color:"#0F1111",marginBottom:"16px"},children:"No products found"}),l.jsx("p",{style:{color:"#565959",fontSize:"14px"},children:"Try adjusting your filters or search terms"})]}):E==="list"?l.jsx("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"8px",border:"1px solid #E5E7EB",overflow:"hidden"},children:ut.map(Ye=>l.jsx(tn,{product:Ye},Ye.id))}):l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"16px"},children:ut.map(Ye=>l.jsx(Rre,{product:Ye},Ye.id))})]})]}),l.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})]})},zre=()=>{var $,G;const{id:e}=tC(),t=ua(),[n,i]=L.useState(null),[o,u]=L.useState(!0),[c,a]=L.useState(1),[g,_]=L.useState(!1),[S,N]=L.useState(!1),A=()=>Ht(null,null,function*(){try{console.log("🔥 Fetching product details for ID:",e),u(!0);let W=yield fetch(`/api/resource/Website Item/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(W.ok){const Z=yield W.json();if(Z.data){console.log("✅ Found product via Website Item:",Z.data),i(E(Z.data));return}}if(W=yield fetch(`/api/resource/Item/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}),W.ok){const Z=yield W.json();if(Z.data){console.log("✅ Found product via Item:",Z.data),i(E(Z.data));return}}const J=yield fetch("/api/method/webshop.webshop.api.get_product_filter_data",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query_args:{field_filters:{},attribute_filters:{},item_group:null,start:null,from_filters:!1}})});if(J.ok){const Z=yield J.json();if(Z.message&&Z.message.items){const K=Z.message.items.find(le=>le.item_code===e||le.name===e||le.route===e||le.web_item_name===e||le.item_name===e);if(K){console.log("✅ Found product via search:",K),i(E(K));return}}}console.log("❌ Product not found for ID:",e),i(null)}catch(W){console.error("❌ Error fetching product details:",W),i(null)}finally{u(!1)}}),E=W=>({id:W.name||W.item_code,item_name:W.item_name||W.web_item_name,web_item_name:W.web_item_name,item_code:W.item_code,image:W.website_image?`${window.location.origin}${W.website_image}`:W.image?`${window.location.origin}${W.image}`:"https://via.placeholder.com/500x500?text=No+Image",standard_rate:W.price_list_rate||W.standard_rate||0,originalPrice:W.formatted_mrp?parseFloat(W.formatted_mrp.replace(/[^\d.]/g,"")):null,discount:W.formatted_mrp&&(W.price_list_rate||W.standard_rate)?Math.round((parseFloat(W.formatted_mrp.replace(/[^\d.]/g,""))-(W.price_list_rate||W.standard_rate))/parseFloat(W.formatted_mrp.replace(/[^\d.]/g,""))*100):0,formatted_price:W.formatted_price,formatted_mrp:W.formatted_mrp,category:W.item_group||"General",brand:W.brand||"Generic",inStock:W.in_stock!==!1,in_cart:W.in_cart,on_backorder:W.on_backorder,description:W.short_description||W.web_long_description||W.description||`Premium ${W.item_name||W.web_item_name} from ${W.item_group||"our"} collection. High-quality product with excellent features and reliable performance.`,route:W.route,has_variants:W.has_variants,variant_of:W.variant_of,website_warehouse:W.website_warehouse,wished:W.wished,ranking:W.ranking,specifications:{"Item Code":W.item_code,Brand:W.brand||"Generic",Category:W.item_group||"General","Stock Status":W.in_stock!==!1?"In Stock":"Limited Stock",Variants:W.has_variants?"Available":"Single Product",Warehouse:W.website_warehouse||"Default"}}),D=()=>Ht(null,null,function*(){try{_(!0),console.log(`🛒 Adding ${c} x ${n.item_name} to ERPNext cart...`);const W=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:n.item_code,qty:c})});if(!W.ok)throw new Error(`HTTP error! status: ${W.status}`);const J=yield W.json();if(console.log("🛒 Add to Cart Response:",J),J.message)alert(`✅ Added ${c} x ${n.item_name} to cart!`),i(Z=>Me(te({},Z),{in_cart:!0}));else throw new Error("Failed to add to cart")}catch(W){console.error("❌ Error adding to cart:",W),alert("❌ Error adding item to cart. Please try again.")}finally{_(!1)}}),B=()=>Ht(null,null,function*(){try{N(!0),console.log(`💖 Adding ${n.item_name} to ERPNext wishlist...`);const W=yield fetch("/api/method/webshop.webshop.doctype.wishlist.wishlist.add_to_wishlist",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:n.item_code})});if(!W.ok)throw new Error(`HTTP error! status: ${W.status}`);const J=yield W.json();console.log("💖 Add to Wishlist Response:",J),alert(`💖 Added ${n.item_name} to wishlist!`),i(Z=>Me(te({},Z),{wished:!0}))}catch(W){console.error("❌ Error adding to wishlist:",W),alert("❌ Error adding to wishlist. Please try again.")}finally{N(!1)}});return L.useEffect(()=>{e&&A()},[e]),o?l.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",fontSize:"18px",color:"#666666"},children:[l.jsx(ka,{size:40,color:"#FF9900",style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),"Loading product details from ERPNext..."]}):n?l.jsxs("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"20px"},children:[l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[l.jsxs("button",{onClick:()=>t(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"transparent",border:"1px solid #D5D9D9",borderRadius:"4px",cursor:"pointer",marginBottom:"20px",color:"#0F1111"},children:[l.jsx($x,{size:14}),"Back"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth>768?"1fr 1fr":"1fr",gap:"40px",alignItems:"start"},children:[l.jsx("div",{style:{backgroundColor:"#F7F8F8",borderRadius:"8px",padding:"20px",textAlign:"center"},children:l.jsx("img",{src:n.image,alt:n.item_name,style:{width:"100%",maxWidth:"500px",height:"auto",borderRadius:"8px"},onError:W=>{W.target.src=`https://via.placeholder.com/500x500?text=${encodeURIComponent(n.item_name.substring(0,10))}`}})}),l.jsxs("div",{children:[l.jsx("h1",{style:{fontSize:"28px",fontWeight:"400",color:"#0F1111",margin:"0 0 16px 0",lineHeight:"1.3"},children:n.item_name}),l.jsxs("div",{style:{fontSize:"16px",color:"#007185",marginBottom:"12px",fontWeight:"600"},children:["Brand: ",n.brand]}),l.jsxs("div",{style:{fontSize:"14px",color:"#565959",marginBottom:"16px"},children:["Item Code: ",n.item_code]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"4px"},children:[l.jsx("span",{style:{fontSize:"28px",fontWeight:"400",color:"#B12704"},children:n.formatted_price||`₹${(($=n.standard_rate)==null?void 0:$.toLocaleString("en-IN"))||"0"}`}),n.originalPrice&&n.originalPrice>n.standard_rate&&l.jsx("span",{style:{fontSize:"14px",color:"#565959",textDecoration:"line-through"},children:n.formatted_mrp||`₹${(G=n.originalPrice)==null?void 0:G.toLocaleString("en-IN")}`})]}),n.discount>0&&l.jsxs("div",{style:{fontSize:"14px",color:"#00A652",fontWeight:"600"},children:["Save ",n.discount,"% ",n.originalPrice&&`(₹${(n.originalPrice-n.standard_rate).toLocaleString("en-IN")})`]})]}),l.jsx("div",{style:{fontSize:"18px",color:n.inStock?"#00A652":"#B12704",fontWeight:"600",marginBottom:"20px"},children:n.inStock?"In Stock":n.on_backorder?"On Backorder":"Out of Stock"}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#0F1111",marginBottom:"8px"},children:"About this item"}),l.jsx("p",{style:{color:"#565959",lineHeight:"1.5",marginBottom:"12px"},children:n.description})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#0F1111",marginBottom:"8px"},children:"Specifications"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",backgroundColor:"#F7F8F8",padding:"12px",borderRadius:"6px"},children:Object.entries(n.specifications).map(([W,J])=>l.jsxs(Rt.Fragment,{children:[l.jsxs("div",{style:{fontWeight:"600",color:"#0F1111",fontSize:"14px"},children:[W,":"]}),l.jsx("div",{style:{color:"#565959",fontSize:"14px"},children:J})]},W))})]}),n.inStock?l.jsxs("div",{style:{border:"1px solid #D5D9D9",borderRadius:"8px",padding:"20px",backgroundColor:"#F7F8F8"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[l.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:"#0F1111"},children:"Quantity:"}),l.jsx("select",{value:c,onChange:W=>a(parseInt(W.target.value)),style:{padding:"8px",border:"1px solid #D5D9D9",borderRadius:"4px",backgroundColor:"#FFFFFF"},children:[...Array(10)].map((W,J)=>l.jsx("option",{value:J+1,children:J+1},J+1))})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[l.jsxs("button",{onClick:B,disabled:S||n.wished,style:{padding:"12px",backgroundColor:n.wished?"#E91E63":"#FFFFFF",border:`2px solid ${n.wished?"#E91E63":"#D5D9D9"}`,borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:n.wished?"#FFFFFF":"#0F1111",cursor:S||n.wished?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:S?.7:1},onMouseOver:W=>{!n.wished&&!S&&(W.target.style.backgroundColor="#FEF2F2",W.target.style.borderColor="#E91E63")},onMouseOut:W=>{!n.wished&&!S&&(W.target.style.backgroundColor="#FFFFFF",W.target.style.borderColor="#D5D9D9")},children:[S?l.jsx(ka,{style:{animation:"spin 1s linear infinite"},size:16}):l.jsx(vd,{size:16}),n.wished?"In Wishlist":"Add to Wishlist"]}),l.jsxs("button",{onClick:D,disabled:g,style:{padding:"12px",backgroundColor:g?"#F0F0F0":"#FFD814",border:`1px solid ${g?"#D0D0D0":"#FCD200"}`,borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:g?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:g?.7:1},onMouseOver:W=>{g||(W.target.style.backgroundColor="#F7CA00")},onMouseOut:W=>{g||(W.target.style.backgroundColor="#FFD814")},children:[g?l.jsx(ka,{style:{animation:"spin 1s linear infinite"},size:16}):l.jsx(Ph,{size:16}),g?"Adding...":"Add to Cart"]})]}),l.jsxs("button",{onClick:()=>{navigator.share?navigator.share({title:n.item_name,text:n.description,url:window.location.href}):navigator.clipboard.writeText(window.location.href).then(()=>{alert("Product link copied to clipboard!")})},style:{width:"100%",marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px",backgroundColor:"transparent",border:"none",color:"#007185",cursor:"pointer",fontSize:"14px"},children:[l.jsx(fre,{size:14}),"Share Product"]})]}):l.jsxs("div",{style:{border:"1px solid #D5D9D9",borderRadius:"8px",padding:"20px",backgroundColor:"#F7F8F8",textAlign:"center"},children:[l.jsx("h3",{style:{color:"#B12704",marginBottom:"8px"},children:"Currently Unavailable"}),l.jsx("p",{style:{color:"#565959",fontSize:"14px"},children:"This item is currently out of stock. Please check back later or contact us for availability."})]})]})]})]}),l.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):l.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",fontSize:"18px",color:"#666666"},children:[l.jsx("h2",{children:"Product not found"}),l.jsx("p",{children:"The product you're looking for doesn't exist or may have been removed."}),l.jsx("button",{onClick:()=>t("/trade"),style:{padding:"12px 24px",backgroundColor:"#0F1111",color:"#FFFFFF",border:"none",borderRadius:"6px",cursor:"pointer",marginTop:"16px"},children:"Back to Products"})]})},Ire=()=>{var vt,ze,Qe,Je,Pt;const e=ua(),[t,n]=L.useState([]),[i,o]=L.useState(!0),[u,c]=L.useState(null),[a,g]=L.useState({total_items:0,total_amount:0,net_total:0,grand_total:0,taxes:0,shipping_charges:0,discount:0}),[_,S]=L.useState({}),[N,A]=L.useState(null),[E,D]=L.useState([]),[B,$]=L.useState(!1),[G,W]=L.useState(new Set),J=L.useCallback((fe,Xe="info")=>{A({message:fe,type:Xe}),setTimeout(()=>A(null),3e3)},[]),Z=L.useCallback(()=>Ht(null,null,function*(){try{$(!0);const fe=is.get("user_id")||"Guest",Xe=is.get("full_name");console.log("📋 Fetching quotations for user:",fe);const tt=yield fetch(`/api/resource/Quotation?fields=["name","quotation_to","party_name","transaction_date","grand_total","status","currency","items","modified"]&filters=[["docstatus","!=",2], ["customer_name", "=", "${Xe}"]]&limit_page_length=50&order_by=creation desc`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(tt.ok){const Ae=yield tt.json();if(console.log("📋 Quotations API Response:",Ae),Ae.data&&Array.isArray(Ae.data)){const ot=Ae.data.map(ct=>{const ut=ct.items&&ct.items.length>0?ct.items[0].item_name||ct.items[0].item_code||"Product":"Quotation Items";return{id:ct.name,orderNumber:ct.name,type:"Quotation",date:ct.transaction_date,customerName:ct.party_name,amount:ct.grand_total,currency:ct.currency||"K",status:ct.status,items:ct.items||[],mainProductName:ut,formattedAmount:`${ct.currency||"K"} ${parseFloat(ct.grand_total||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,formattedDate:new Date(ct.transaction_date).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),shortDate:new Date(ct.transaction_date).toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})}});ot.sort((ct,ut)=>new Date(ut.date)-new Date(ct.date)),D(ot),console.log("✅ Fetched quotations:",ot.length)}else D([])}else D([])}catch(fe){console.error("❌ Error fetching quotations:",fe),D([])}finally{$(!1)}}),[]),K=fe=>{W(Xe=>{const tt=new Set(Xe);return tt.has(fe)?tt.delete(fe):tt.add(fe),tt})},le=fe=>{const Xe=`/app/quotation/${fe}`;window.open(Xe,"_blank")},_e=fe=>{const Xe=`/api/method/frappe.utils.print_format.download_pdf?doctype=Quotation&name=${fe}&format=Standard&no_letterhead=0`;window.open(Xe,"_blank")},de=L.useCallback(()=>Ht(null,null,function*(){try{o(!0),c(null),console.log("🛒 Fetching current cart from ERPNext...");const fe=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.get_cart_quotation",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",redirect:"follow"});if(!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);const Xe=yield fe.json();if(console.log("🛒 ERPNext Cart API Response:",Xe),Xe.message&&Xe.message.doc){const tt=Xe.message.doc,Ae=tt.items||[];console.log("✅ Cart items found:",Ae);const ot=Ae.map(ct=>({item_code:ct.item_code,item_name:ct.item_name||ct.web_item_name,qty:ct.qty,rate:ct.rate,amount:ct.amount,image:ct.thumbnail||ct.website_image||ct.image||"/placeholder.jpg",description:ct.description||`Premium ${ct.item_name} from ERPNext`,brand:ct.brand||"Generic",item_group:ct.item_group||"General",warehouse:ct.warehouse||"",additional_notes:ct.additional_notes||"",id:ct.item_code,quantity:ct.qty,standard_rate:ct.rate,total_price:ct.amount,in_stock:!0,original_erpnext_data:ct}));n(ot),g({total_items:tt.total_qty||Ae.reduce((ct,ut)=>ct+ut.qty,0),total_amount:tt.total||0,net_total:tt.net_total||0,grand_total:tt.grand_total||tt.net_total||0,taxes:tt.total_taxes_and_charges||(tt.grand_total||0)-(tt.net_total||0),shipping_charges:tt.shipping_charges||0,discount:tt.discount_amount||0}),console.log("✅ Cart loaded with",ot.length,"items")}else console.log("ℹ️ Cart is empty or no cart found"),n([]),g({total_items:0,total_amount:0,net_total:0,grand_total:0,taxes:0,shipping_charges:0,discount:0})}catch(fe){console.error("❌ Error fetching ERPNext cart:",fe),c(`Failed to load cart: ${fe.message}`),J("Failed to load cart. Please refresh the page.","error"),n([])}finally{o(!1)}}),[J]),pe=(fe,Xe,tt=null)=>Ht(null,null,function*(){try{S(ct=>Me(te({},ct),{[fe]:!0})),console.log(`🛒 Updating ${fe} quantity to ${Xe}...`);const Ae=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:fe,qty:Xe,additional_notes:tt}),redirect:"follow"});if(!Ae.ok)throw new Error(`HTTP error! status: ${Ae.status}`);const ot=yield Ae.json();if(console.log("🛒 Update Cart API Response:",ot),ot.message)return console.log("✅ Successfully updated cart quantity"),J(Xe===0?"Item removed from cart":"Cart updated successfully","success"),yield de(),!0;throw new Error("Failed to update cart")}catch(Ae){return console.error("❌ Error updating cart:",Ae),J("Failed to update cart. Please try again.","error"),!1}finally{S(Ae=>Me(te({},Ae),{[fe]:!1}))}}),Oe=(fe,Xe)=>Ht(null,null,function*(){if(window.confirm(`Are you sure you want to remove "${Xe}" from cart?`))try{S(Ae=>Me(te({},Ae),{[fe]:!0})),n(Ae=>{const ot=Ae.filter(ct=>ct.item_code!==fe);return console.log("🗑️ Immediately removed item from UI, remaining items:",ot.length),ot}),g(Ae=>{const ot=t.find(ct=>ct.item_code===fe);return ot?Me(te({},Ae),{total_items:Math.max(0,Ae.total_items-ot.qty),total_amount:Math.max(0,Ae.total_amount-ot.amount),net_total:Math.max(0,Ae.net_total-ot.amount),grand_total:Math.max(0,Ae.grand_total-ot.amount)}):Ae});const tt=yield pe(fe,0);return tt&&J(`"${Xe}" removed from cart`,"success"),tt}finally{S(tt=>Me(te({},tt),{[fe]:!1}))}}),He=(fe,Xe,tt)=>Ht(null,null,function*(){const Ae=Math.max(0,Xe+tt);if(Ae===0){const ot=t.find(ct=>ct.item_code===fe);yield Oe(fe,(ot==null?void 0:ot.item_name)||fe)}else yield pe(fe,Ae)}),We=()=>Ht(null,null,function*(){if(t.length===0){J("Your cart is empty. Please add items before requesting a quotation.","warning");return}try{o(!0);const fe=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.request_for_quotation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);const Xe=yield fe.json();if(Xe.message)J(`Quotation requested successfully! Reference: ${Xe.message}`,"success"),setTimeout(()=>Z(),1e3);else throw new Error("Failed to request quotation")}catch(fe){console.error("Error requesting quotation:",fe),J("Failed to request quotation. Please try again.","error")}finally{o(!1)}});L.useEffect(()=>{console.log("Loading cart data..."),de(),Z()},[de,Z]),L.useEffect(()=>{const fe=setInterval(()=>{!i&&!Object.keys(_).some(Xe=>_[Xe])&&de()},3e4);return()=>clearInterval(fe)},[de,i,_]);const st=()=>{if(!N)return null;const fe=()=>{switch(N.type){case"success":return l.jsx(Ij,{});case"error":return l.jsx(oy,{});case"warning":return l.jsx(oy,{});default:return l.jsx(Ph,{})}},Xe=()=>{switch(N.type){case"success":return"#00A652";case"error":return"#B12704";case"warning":return"#FF9900";default:return"#007185"}};return l.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:Xe(),color:"white",padding:"12px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxWidth:"400px"},children:[fe(),l.jsx("span",{children:N.message})]})},At=()=>l.jsxs("div",{style:{backgroundColor:"#FFFFFF",padding:"30px",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"1px solid #E5E7EB",marginTop:"30px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"25px"},children:[l.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#0F1111",margin:0,display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx(X2,{size:22}),"Previous Orders",E.length>0&&l.jsx("span",{style:{backgroundColor:"#007185",color:"white",fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"12px"},children:E.length})]}),B&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#565959"},children:[l.jsx(ka,{style:{animation:"spin 1s linear infinite"}}),"Loading quotations..."]})]}),E.length>0?l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:E.map(fe=>{const Xe=G.has(fe.id);return l.jsxs("div",{style:{border:"1px solid #E5E7EB",borderRadius:"10px",overflow:"hidden",transition:"all 0.2s ease",backgroundColor:Xe?"#F8F9FA":"#FFFFFF"},children:[l.jsxs("div",{onClick:()=>K(fe.id),style:{padding:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:Xe?"1px solid #E5E7EB":"none"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",flex:1},children:[l.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"8px",backgroundColor:"#E0F7FA",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(X2,{size:22,color:"#006064"})}),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px",flexWrap:"wrap"},children:[l.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#0F1111"},children:fe.orderNumber}),l.jsx("span",{style:{backgroundColor:fe.status==="Draft"?"#FEF3CD":fe.status==="Open"?"#E3F2FD":fe.status==="Submitted"?"#E8F5E8":"#F3E5F5",color:fe.status==="Draft"?"#B45309":fe.status==="Open"?"#1565C0":fe.status==="Submitted"?"#2E7D32":"#7B1FA2",fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"12px"},children:fe.status})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px",color:"#565959",flexWrap:"wrap"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx(Jse,{size:12}),fe.shortDate]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx(Qse,{size:12}),fe.items.length," item",fe.items.length!==1?"s":""]}),l.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#B12704"},children:fe.formattedAmount})]}),l.jsxs("div",{style:{marginTop:"8px",fontSize:"13px",color:"#007185",fontWeight:"500"},children:[fe.mainProductName,fe.items.length>1&&` +${fe.items.length-1} more`]})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginLeft:"20px"},children:[l.jsxs("button",{onClick:tt=>{tt.stopPropagation(),_e(fe.orderNumber)},style:{padding:"6px 12px",backgroundColor:"#FF9900",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease"},onMouseOver:tt=>tt.target.style.backgroundColor="#E88B00",onMouseOut:tt=>tt.target.style.backgroundColor="#FF9900",children:[l.jsx(JA,{size:10}),"PDF"]}),l.jsx(ere,{size:16,style:{color:"#565959",transform:Xe?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease",marginLeft:"8px"}})]})]}),Xe&&l.jsxs("div",{style:{padding:"20px",backgroundColor:"#F8F9FA",borderTop:"1px solid #E5E7EB"},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"20px",padding:"15px",backgroundColor:"#FFFFFF",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Order Date"}),l.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:fe.formattedDate})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Customer"}),l.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:fe.customerName})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Total Amount"}),l.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"#B12704"},children:fe.formattedAmount})]}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Status"}),l.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:l.jsx("span",{style:{backgroundColor:fe.status==="Draft"?"#FEF3CD":fe.status==="Open"?"#E3F2FD":fe.status==="Submitted"?"#E8F5E8":"#F3E5F5",color:fe.status==="Draft"?"#B45309":fe.status==="Open"?"#1565C0":fe.status==="Submitted"?"#2E7D32":"#7B1FA2",padding:"4px 8px",borderRadius:"12px",fontSize:"12px"},children:fe.status})})]})]}),l.jsxs("div",{style:{marginBottom:"15px"},children:[l.jsxs("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#0F1111",marginBottom:"12px"},children:["Order Items (",fe.items.length,")"]}),l.jsx("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"8px",border:"1px solid #E5E7EB",overflow:"hidden"},children:fe.items.map((tt,Ae)=>l.jsxs("div",{style:{padding:"12px 16px",borderBottom:Ae<fe.items.length-1?"1px solid #F0F0F0":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#0F1111",marginBottom:"4px"},children:tt.item_name||tt.item_code}),l.jsxs("div",{style:{fontSize:"12px",color:"#666",display:"flex",gap:"12px"},children:[l.jsxs("span",{children:["Code: ",tt.item_code]}),l.jsxs("span",{children:["Qty: ",tt.qty]}),l.jsxs("span",{children:["Rate: ",tt.currency||"K"," ",parseFloat(tt.rate||0).toLocaleString("en-IN")]})]})]}),l.jsxs("div",{style:{fontSize:"14px",fontWeight:"700",color:"#B12704"},children:[tt.currency||"K"," ",parseFloat(tt.amount||0).toLocaleString("en-IN")]})]},Ae))})]}),l.jsxs("div",{style:{display:"flex",gap:"10px",paddingTop:"15px",borderTop:"1px solid #E5E7EB"},children:[l.jsxs("button",{onClick:()=>le(fe.orderNumber),style:{padding:"10px 16px",backgroundColor:"#007185",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},onMouseOver:tt=>tt.target.style.backgroundColor="#005F73",onMouseOut:tt=>tt.target.style.backgroundColor="#007185",children:[l.jsx(yz,{size:14}),"View in ERPNext"]}),l.jsxs("button",{onClick:()=>_e(fe.orderNumber),style:{padding:"10px 16px",backgroundColor:"#FF9900",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},onMouseOver:tt=>tt.target.style.backgroundColor="#E88B00",onMouseOut:tt=>tt.target.style.backgroundColor="#FF9900",children:[l.jsx(JA,{size:14}),"Download PDF"]})]})]})]},fe.id)})}):l.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#565959"},children:B?l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[l.jsx(ka,{style:{animation:"spin 1s linear infinite"}}),"Loading your quotations..."]}):l.jsxs(l.Fragment,{children:[l.jsx(X2,{size:48,color:"#CCCCCC",style:{marginBottom:"16px"}}),l.jsx("h3",{style:{color:"#0F1111",marginBottom:"8px"},children:"No Previous Orders"}),l.jsx("p",{children:"You haven't placed any orders yet. Start shopping to see your order history here."})]})})]});return i&&t.length===0?l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(ka,{size:40,color:"#FF9900",style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),l.jsx("p",{style:{color:"#565959",fontSize:"16px"},children:"Loading your cart..."})]})}):u&&t.length===0?l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsxs("div",{style:{textAlign:"center",maxWidth:"600px"},children:[l.jsx(oy,{size:60,color:"#B12704",style:{marginBottom:"20px"}}),l.jsx("h2",{style:{color:"#B12704",marginBottom:"16px"},children:"Failed to Load Cart"}),l.jsx("p",{style:{color:"#565959",marginBottom:"20px"},children:u}),l.jsx("button",{onClick:de,style:{backgroundColor:"#FF9900",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:"Try Again"})]})}):!t||t.length===0?l.jsxs(l.Fragment,{children:[l.jsx(st,{}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px"},children:[l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[l.jsx("div",{style:{marginBottom:"40px",textAlign:"left"},children:l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",backgroundColor:"transparent",border:"2px solid #D5D9D9",borderRadius:"6px",cursor:"pointer",color:"#0F1111",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease"},onMouseOver:fe=>{fe.target.style.borderColor="#007185",fe.target.style.color="#007185"},onMouseOut:fe=>{fe.target.style.borderColor="#D5D9D9",fe.target.style.color="#0F1111"},children:[l.jsx($x,{size:14}),"Back to Products"]})}),l.jsx(Oj,{size:100,color:"#CCCCCC",style:{marginBottom:"32px"}}),l.jsx("h2",{style:{fontSize:"36px",fontWeight:"600",color:"#0F1111",margin:"0 0 20px 0"},children:"Cart is Empty"}),l.jsxs("p",{style:{fontSize:"18px",color:"#565959",marginBottom:"32px",lineHeight:"1.5"},children:["Looks like you haven't added anything to your cart yet.",l.jsx("br",{}),"Browse our products and find something you love!"]}),l.jsxs(Qs,{to:"/trade",style:{display:"inline-flex",alignItems:"center",gap:"12px",backgroundColor:"#FF9900",color:"#FFFFFF",padding:"18px 36px",fontSize:"18px",fontWeight:"600",textDecoration:"none",borderRadius:"8px",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onMouseOver:fe=>{fe.target.style.backgroundColor="#E88B00",fe.target.style.transform="translateY(-2px)"},onMouseOut:fe=>{fe.target.style.backgroundColor="#FF9900",fe.target.style.transform="translateY(0)"},children:[l.jsx(Oj,{size:18})," Start Shopping"]})]}),l.jsx("div",{style:{maxWidth:"1400px",margin:"60px auto 0"},children:l.jsx(At,{})})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(st,{}),l.jsxs("div",{style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"20px"},children:[l.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"30px",backgroundColor:"#FFFFFF",padding:"20px 30px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:[l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",backgroundColor:"transparent",border:"2px solid #D5D9D9",borderRadius:"6px",cursor:"pointer",color:"#0F1111",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease"},onMouseOver:fe=>{fe.target.style.borderColor="#007185",fe.target.style.color="#007185"},onMouseOut:fe=>{fe.target.style.borderColor="#D5D9D9",fe.target.style.color="#0F1111"},children:[l.jsx($x,{size:14}),"Back"]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0F1111",margin:"0 0 8px 0"},children:"Shopping Cart"}),l.jsxs("p",{style:{color:"#565959",fontSize:"16px",margin:0},children:[a.total_items," ",a.total_items===1?"item":"items"]})]}),l.jsx("div",{style:{display:"flex",gap:"10px"},children:l.jsx("button",{onClick:We,disabled:i||t.length===0,style:{padding:"10px 18px",backgroundColor:"#007185",color:"#FFFFFF",border:"none",borderRadius:"6px",cursor:i||t.length===0?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600",opacity:i||t.length===0?.6:1,transition:"all 0.2s ease"},onMouseOver:fe=>{!i&&t.length>0&&(fe.target.style.backgroundColor="#005F73")},onMouseOut:fe=>{!i&&t.length>0&&(fe.target.style.backgroundColor="#007185")},children:"Request Quote"})})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth>1024?"2fr 1fr":"1fr",gap:"30px"},children:[l.jsx("div",{children:t.map((fe,Xe)=>{var Ae,ot,ct;const tt=_[fe.item_code]||!1;return l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"25px",backgroundColor:"#FFFFFF",marginBottom:"15px",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"1px solid #E5E7EB",opacity:tt?.7:1,position:"relative",transition:"all 0.2s ease",flexDirection:window.innerWidth<768?"column":"row",textAlign:window.innerWidth<768?"center":"left"},children:[tt&&l.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.9)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"12px",zIndex:10},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#FF9900",fontSize:"16px",fontWeight:"600"},children:[l.jsx(ka,{size:20,color:"#FF9900",style:{animation:"spin 1s linear infinite"}}),"Updating..."]})}),l.jsx(Qs,{to:`/product/${fe.item_code}`,style:{flexShrink:0,marginRight:window.innerWidth<768?"0":"25px",marginBottom:window.innerWidth<768?"15px":"0",display:"block",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:l.jsx("img",{src:fe.image,alt:fe.item_name,style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"8px",transition:"transform 0.2s ease"},onMouseOver:ut=>{ut.target.style.transform="scale(1.05)"},onMouseOut:ut=>{ut.target.style.transform="scale(1)"},onError:ut=>{ut.target.src=`https://via.placeholder.com/120x120?text=${encodeURIComponent(fe.item_name.substring(0,5))}`}})}),l.jsxs("div",{style:{flex:1,marginBottom:window.innerWidth<768?"15px":"0"},children:[l.jsx(Qs,{to:`/product/${fe.item_code}`,style:{textDecoration:"none",color:"inherit"},children:l.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#0F1111",margin:"0 0 10px 0",lineHeight:"1.3",transition:"color 0.2s ease"},onMouseOver:ut=>{ut.target.style.color="#007185"},onMouseOut:ut=>{ut.target.style.color="#0F1111"},children:fe.item_name})}),l.jsxs("div",{style:{fontSize:"14px",color:"#565959",marginBottom:"10px",display:"flex",flexWrap:"wrap",gap:"15px",justifyContent:window.innerWidth<768?"center":"flex-start"},children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Code:"})," ",fe.item_code]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Brand:"})," ",fe.brand]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Category:"})," ",fe.item_group]}),fe.warehouse&&l.jsxs("span",{children:[l.jsx("strong",{children:"Warehouse:"})," ",fe.warehouse]})]}),l.jsx("p",{style:{color:"#666666",fontSize:"14px",marginBottom:"12px",lineHeight:"1.5",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:fe.description||"No description available"}),l.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",color:"#B12704",marginBottom:"12px"},children:["₹",((Ae=fe.rate)==null?void 0:Ae.toLocaleString("en-IN"))||"0"," per unit"]}),l.jsxs("div",{style:{fontSize:"13px",color:"#007185",backgroundColor:"#F0F8FF",padding:"6px 10px",borderRadius:"6px",display:"inline-block",border:"1px solid #E0F2FE"},children:["Qty: ",fe.qty," • Line Total: ₹",(ot=fe.amount)==null?void 0:ot.toLocaleString("en-IN")]}),fe.additional_notes&&l.jsxs("div",{style:{marginTop:"8px",fontSize:"13px",color:"#666",fontStyle:"italic",backgroundColor:"#FFFBF0",padding:"4px 8px",borderRadius:"4px",border:"1px solid #FEF3CD"},children:["Note: ",fe.additional_notes]})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginRight:window.innerWidth<768?"0":"25px",marginBottom:window.innerWidth<768?"15px":"0"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#F8F9FA",borderRadius:"8px",border:"2px solid #E5E7EB",overflow:"hidden"},children:[l.jsx("button",{onClick:()=>He(fe.item_code,fe.qty,-1),disabled:tt,style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:tt?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:tt?.5:1,transition:"all 0.2s ease"},onMouseOver:ut=>{tt||(ut.target.style.backgroundColor="#E5E7EB")},onMouseOut:ut=>{tt||(ut.target.style.backgroundColor="transparent")},children:l.jsx(lre,{size:14})}),l.jsx("span",{style:{fontSize:"18px",fontWeight:"600",minWidth:"50px",textAlign:"center",backgroundColor:"#FFFFFF",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderLeft:"1px solid #E5E7EB",borderRight:"1px solid #E5E7EB"},children:fe.qty}),l.jsx("button",{onClick:()=>He(fe.item_code,fe.qty,1),disabled:tt,style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:tt?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:tt?.5:1,transition:"all 0.2s ease"},onMouseOver:ut=>{tt||(ut.target.style.backgroundColor="#E5E7EB")},onMouseOut:ut=>{tt||(ut.target.style.backgroundColor="transparent")},children:l.jsx(dre,{size:14})})]})}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:window.innerWidth<768?"center":"flex-end",gap:"15px"},children:[l.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0F1111"},children:["₹",((ct=fe.amount)==null?void 0:ct.toLocaleString("en-IN"))||"0"]}),l.jsxs("button",{onClick:()=>Oe(fe.item_code,fe.item_name),disabled:tt,style:{padding:"8px 12px",backgroundColor:"transparent",border:"2px solid #B12704",borderRadius:"6px",color:"#B12704",cursor:tt?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",opacity:tt?.5:1,transition:"all 0.2s ease"},onMouseOver:ut=>{tt||(ut.target.style.backgroundColor="#B12704",ut.target.style.color="#FFFFFF")},onMouseOut:ut=>{tt||(ut.target.style.backgroundColor="transparent",ut.target.style.color="#B12704")},children:[l.jsx(yre,{size:12}),"Remove"]})]})]},fe.item_code||Xe)})}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",padding:"25px",borderRadius:"12px",height:"fit-content",position:"sticky",top:"20px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"1px solid #E5E7EB"},children:[l.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#0F1111",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[l.jsx(Ph,{size:20}),"Order Summary"]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"16px"},children:[l.jsxs("span",{children:["Subtotal (",a.total_items," items):"]}),l.jsxs("span",{style:{fontWeight:"600"},children:["₹",(vt=a.net_total)==null?void 0:vt.toLocaleString("en-IN")]})]}),a.discount>0&&l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"16px",color:"#00A652"},children:[l.jsx("span",{children:"Discount:"}),l.jsxs("span",{style:{fontWeight:"600"},children:["-₹",(ze=a.discount)==null?void 0:ze.toLocaleString("en-IN")]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"16px"},children:[l.jsx("span",{children:"Shipping:"}),l.jsx("span",{style:{color:"#00A652",fontWeight:"600"},children:a.shipping_charges>0?`₹${(Qe=a.shipping_charges)==null?void 0:Qe.toLocaleString("en-IN")}`:"FREE"})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"16px"},children:[l.jsx("span",{children:"Tax:"}),l.jsxs("span",{style:{fontWeight:"600"},children:["₹",(Je=a.taxes)==null?void 0:Je.toLocaleString("en-IN")]})]})]}),l.jsx("hr",{style:{margin:"20px 0",border:"none",borderTop:"2px solid #E5E7EB"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"25px",fontSize:"20px",fontWeight:"700"},children:[l.jsx("span",{children:"Grand Total:"}),l.jsxs("span",{style:{color:"#B12704"},children:["₹",(Pt=a.grand_total)==null?void 0:Pt.toLocaleString("en-IN")]})]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.jsx(Qs,{to:"/trade",style:{display:"block",textAlign:"center",padding:"14px",color:"#007185",textDecoration:"none",fontSize:"16px",fontWeight:"600",border:"2px solid #007185",borderRadius:"8px",transition:"all 0.2s ease"},onMouseOver:fe=>{fe.target.style.backgroundColor="#007185",fe.target.style.color="#FFFFFF"},onMouseOut:fe=>{fe.target.style.backgroundColor="transparent",fe.target.style.color="#007185"},children:"Continue Shopping"})}),l.jsx("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:"#F0F8FF",borderRadius:"8px",border:"1px solid #E0F2FE",textAlign:"center"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:"#007185",fontSize:"14px",fontWeight:"600"},children:[l.jsx(Ij,{size:16}),"Cart Synced"]})})]})]}),l.jsx(At,{})]}),l.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})]})},Ore=()=>{const e=ua(),[t,n]=L.useState([]),[i,o]=L.useState(!0),[u,c]=L.useState(null),[a,g]=L.useState({}),[_,S]=L.useState(null),[N,A]=L.useState({}),E=L.useCallback((Z,K="info")=>{S({message:Z,type:K}),setTimeout(()=>S(null),3e3)},[]),D=Z=>Ht(null,null,function*(){try{A(de=>Me(te({},de),{[Z]:!0})),console.log(`💰 Fetching price for ${Z}...`);const K=yield fetch(`/api/resource/Item Price?filters=[["item_code","=","${Z}"],["selling","=",1]]&fields=["price_list_rate","currency"]&limit=1`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(K.ok){const de=yield K.json();if(de.data&&de.data.length>0)return console.log(`✅ Price found for ${Z}:`,de.data[0].price_list_rate),{standard_rate:de.data[0].price_list_rate,currency:de.data[0].currency||"INR"}}const le=yield fetch(`/api/resource/Item/${Z}?fields=["standard_rate","currency"]`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(le.ok){const de=yield le.json();if(de.data&&de.data.standard_rate)return console.log(`✅ Standard rate found for ${Z}:`,de.data.standard_rate),{standard_rate:de.data.standard_rate,currency:de.data.currency||"INR"}}const _e=yield fetch(`/api/resource/Website Item?filters=[["item_code","=","${Z}"]]&fields=["price_list_rate"]&limit=1`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(_e.ok){const de=yield _e.json();if(de.data&&de.data.length>0&&de.data[0].price_list_rate)return console.log(`✅ Website item price found for ${Z}:`,de.data[0].price_list_rate),{standard_rate:de.data[0].price_list_rate,currency:"INR"}}return console.log(`⚠️ No price found for ${Z}, using default`),{standard_rate:2990,currency:"INR"}}catch(K){return console.error(`❌ Error fetching price for ${Z}:`,K),{standard_rate:2990,currency:"INR"}}finally{A(K=>Me(te({},K),{[Z]:!1}))}}),B=L.useCallback(()=>Ht(null,null,function*(){try{o(!0),c(null),console.log("💖 Fetching wishlist from ERPNext...");const Z=is.get("user_id"),K=yield fetch(`/api/resource/Wishlist/${Z}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!K.ok){if(K.status===404){console.log("ℹ️ No wishlist found for user"),n([]);return}throw new Error(`HTTP error! status: ${K.status}`)}const le=yield K.json();if(console.log("💖 ERPNext Wishlist API Response:",le),le.data&&le.data.items){const _e=le.data.items.map(pe=>({item_code:pe.item_code,item_name:pe.item_name,web_item_name:pe.web_item_name,item_group:pe.item_group,website_item:pe.website_item,image:pe.image||pe.website_image||"/placeholder.jpg",route:pe.route,warehouse:pe.warehouse,id:pe.item_code,name:pe.item_code,description:`Premium ${pe.item_name||pe.web_item_name} from our collection`,standard_rate:null,currency:"INR",original_erpnext_data:pe}));n(_e),console.log("✅ Basic wishlist loaded with",_e.length,"items");const de=yield Promise.all(_e.map(pe=>Ht(null,null,function*(){const Oe=yield D(pe.item_code);return Me(te({},pe),{standard_rate:Oe.standard_rate,currency:Oe.currency})})));n(de),console.log("✅ Wishlist updated with prices for",de.length,"items")}else console.log("ℹ️ Wishlist is empty"),n([])}catch(Z){console.error("❌ Error fetching ERPNext wishlist:",Z),c(`Failed to load wishlist: ${Z.message}`),E("Failed to load wishlist. Please refresh the page.","error"),n([])}finally{o(!1)}}),[E]),$=(Z,K)=>Ht(null,null,function*(){if(window.confirm(`Are you sure you want to remove "${K}" from your wishlist?`))try{g(de=>Me(te({},de),{[Z]:!0})),console.log(`💔 Removing ${Z} from ERPNext wishlist...`);const le=yield fetch("/api/method/webshop.webshop.doctype.wishlist.wishlist.remove_from_wishlist",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:Z})});if(!le.ok)throw new Error(`HTTP error! status: ${le.status}`);const _e=yield le.json();return console.log("💔 Remove from Wishlist API Response:",_e),console.log("✅ Successfully removed from wishlist"),E("Item removed from wishlist","success"),yield B(),!0}catch(le){return console.error("❌ Error removing from wishlist:",le),E("Failed to remove from wishlist. Please try again.","error"),!1}finally{g(le=>Me(te({},le),{[Z]:!1}))}}),G=Z=>Ht(null,null,function*(){try{console.log(`🛒 Adding ${Z.item_code} to cart...`);const K=yield fetch("/api/method/webshop.webshop.shopping_cart.cart.update_cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({item_code:Z.item_code,qty:1})});if(!K.ok)throw new Error(`HTTP error! status: ${K.status}`);const le=yield K.json();if(console.log("🛒 Add to Cart API Response:",le),le.message)return E(`${Z.item_name} added to cart!`,"success"),!0;throw new Error("Failed to add to cart")}catch(K){return console.error("❌ Error adding to cart:",K),E("Failed to add to cart. Please try again.","error"),!1}}),W=Z=>{e(`/product/${Z}`)};L.useEffect(()=>{console.log("Loading ERPNext wishlist data..."),B()},[B]);const J=()=>{if(!_)return null;const Z=()=>{switch(_.type){case"success":return l.jsx(Ij,{});case"error":return l.jsx(oy,{});case"warning":return l.jsx(oy,{});default:return l.jsx(vd,{})}},K=()=>{switch(_.type){case"success":return"#00A652";case"error":return"#B12704";case"warning":return"#FF9900";default:return"#007185"}};return l.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:K(),color:"white",padding:"12px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxWidth:"400px"},children:[Z(),l.jsx("span",{children:_.message})]})};return i?l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(ka,{size:40,color:"#FF9900",style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),l.jsx("p",{style:{color:"#565959",fontSize:"16px"},children:"Loading your ERPNext wishlist..."})]})}):u&&t.length===0?l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},children:l.jsxs("div",{style:{textAlign:"center",maxWidth:"600px"},children:[l.jsx(oy,{size:60,color:"#B12704",style:{marginBottom:"20px"}}),l.jsx("h2",{style:{color:"#B12704",marginBottom:"16px"},children:"Failed to Load Wishlist"}),l.jsx("p",{style:{color:"#565959",marginBottom:"20px"},children:u}),l.jsx("button",{onClick:B,style:{backgroundColor:"#FF9900",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:"Try Again"})]})}):!t||t.length===0?l.jsxs(l.Fragment,{children:[l.jsx(J,{}),l.jsx("div",{style:{backgroundColor:"#FFFFFF",minHeight:"100vh",padding:"40px 20px"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[l.jsx("div",{style:{marginBottom:"40px",textAlign:"left"},children:l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",backgroundColor:"transparent",border:"2px solid #D5D9D9",borderRadius:"6px",cursor:"pointer",color:"#0F1111",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease"},onMouseOver:Z=>{Z.target.style.borderColor="#007185",Z.target.style.color="#007185"},onMouseOut:Z=>{Z.target.style.borderColor="#D5D9D9",Z.target.style.color="#0F1111"},children:[l.jsx($x,{size:14}),"Back to Products"]})}),l.jsx(vd,{size:100,color:"#CCCCCC",style:{marginBottom:"32px"}}),l.jsx("h1",{style:{fontSize:"36px",fontWeight:"600",color:"#0F1111",margin:"0 0 20px 0"},children:"Your ERPNext Wishlist is Empty"}),l.jsxs("p",{style:{fontSize:"18px",color:"#565959",marginBottom:"32px",lineHeight:"1.5"},children:["Save items you love to your wishlist. Review them anytime and easily move them to your cart.",l.jsx("br",{}),"Start exploring our amazing collection!"]}),l.jsxs(Qs,{to:"/products",style:{display:"inline-flex",alignItems:"center",gap:"12px",backgroundColor:"#FF9900",color:"#FFFFFF",padding:"18px 36px",fontSize:"18px",fontWeight:"600",textDecoration:"none",borderRadius:"8px",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onMouseOver:Z=>{Z.target.style.backgroundColor="#E88B00",Z.target.style.transform="translateY(-2px)"},onMouseOut:Z=>{Z.target.style.backgroundColor="#FF9900",Z.target.style.transform="translateY(0)"},children:[l.jsx(Oj,{size:18}),"Continue Shopping"]})]})})]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{}),l.jsxs("div",{style:{backgroundColor:"#F8F9FA",minHeight:"100vh",padding:"20px"},children:[l.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"30px",backgroundColor:"#FFFFFF",padding:"20px 30px",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.08)",flexWrap:"wrap",gap:"16px"},children:[l.jsxs("button",{onClick:()=>e(-1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",backgroundColor:"transparent",border:"2px solid #D5D9D9",borderRadius:"6px",cursor:"pointer",color:"#0F1111",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease"},onMouseOver:Z=>{Z.target.style.borderColor="#007185",Z.target.style.color="#007185"},onMouseOut:Z=>{Z.target.style.borderColor="#D5D9D9",Z.target.style.color="#0F1111"},children:[l.jsx($x,{size:14}),"Back"]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0F1111",margin:"0 0 8px 0"},children:"My Wishlist"}),l.jsxs("p",{style:{color:"#565959",fontSize:"16px",margin:0},children:[t.length," ",t.length===1?"item":"items"," • ERPNext Integration Active"]})]}),l.jsx(Qs,{to:"/trade",style:{color:"#007185",fontSize:"16px",fontWeight:"600",textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",border:"2px solid #007185",borderRadius:"6px",transition:"all 0.2s ease"},onMouseOver:Z=>{Z.target.style.backgroundColor="#007185",Z.target.style.color="#FFFFFF"},onMouseOut:Z=>{Z.target.style.backgroundColor="transparent",Z.target.style.color="#007185"},children:"Add More Items"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"24px",marginBottom:"40px"},children:t.map(Z=>{var _e;const K=a[Z.item_code]||!1,le=N[Z.item_code]||!1;return l.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",overflow:"hidden",transition:"all 0.3s ease",position:"relative",border:"1px solid #E5E7EB",opacity:K?.7:1},onMouseOver:de=>{K||(de.currentTarget.style.transform="translateY(-4px)",de.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.15)")},onMouseOut:de=>{K||(de.currentTarget.style.transform="translateY(0)",de.currentTarget.style.boxShadow="0 2px 12px rgba(0,0,0,0.08)")},children:[K&&l.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.9)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"12px",zIndex:10},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#FF9900",fontSize:"16px",fontWeight:"600"},children:[l.jsx(ka,{size:20,color:"#FF9900",style:{animation:"spin 1s linear infinite"}}),"Updating..."]})}),l.jsxs("div",{style:{position:"relative",height:"220px",overflow:"hidden",cursor:"pointer"},onClick:()=>W(Z.item_code),children:[l.jsx("img",{src:Z.image,alt:Z.item_name,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onMouseOver:de=>{K||(de.target.style.transform="scale(1.05)")},onMouseOut:de=>{K||(de.target.style.transform="scale(1)")},onError:de=>{de.target.src=`https://via.placeholder.com/320x220?text=${encodeURIComponent(Z.item_name.substring(0,5))}`}}),l.jsx("button",{onClick:de=>{de.stopPropagation(),$(Z.item_code,Z.item_name)},disabled:K,style:{position:"absolute",top:"12px",right:"12px",backgroundColor:"#FFFFFF",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:K?"not-allowed":"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"all 0.3s ease",opacity:K?.6:1},onMouseOver:de=>{K||(de.target.style.backgroundColor="#FEE2E2")},onMouseOut:de=>{K||(de.target.style.backgroundColor="#FFFFFF")},children:l.jsx(vd,{color:"#B12704",size:18})}),l.jsx("button",{onClick:de=>{de.stopPropagation(),W(Z.item_code)},style:{position:"absolute",top:"12px",left:"12px",backgroundColor:"#FFFFFF",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"all 0.3s ease"},onMouseOver:de=>de.target.style.backgroundColor="#F0F8FF",onMouseOut:de=>de.target.style.backgroundColor="#FFFFFF",children:l.jsx(yz,{color:"#007185",size:18})}),l.jsx("div",{style:{position:"absolute",bottom:"12px",left:"12px",backgroundColor:"#007185",color:"#FFFFFF",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600"},children:"ERPNext Item"})]}),l.jsxs("div",{style:{padding:"20px"},children:[l.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#0F1111",marginBottom:"8px",lineHeight:"1.4",cursor:"pointer",transition:"color 0.2s ease"},onClick:()=>W(Z.item_code),onMouseOver:de=>de.target.style.color="#007185",onMouseOut:de=>de.target.style.color="#0F1111",children:Z.item_name||Z.web_item_name}),l.jsxs("div",{style:{fontSize:"14px",color:"#565959",marginBottom:"8px"},children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Code:"})," ",Z.item_code]}),Z.item_group&&l.jsxs("span",{style:{marginLeft:"12px"},children:[l.jsx("strong",{children:"Category:"})," ",Z.item_group]})]}),l.jsx("p",{style:{color:"#666666",fontSize:"14px",lineHeight:"1.5",marginBottom:"16px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Z.description||"High-quality product with excellent features and great value for money."}),l.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"8px"},children:le?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#FF9900",fontSize:"14px"},children:[l.jsx(ka,{size:14,color:"#FF9900",style:{animation:"spin 1s linear infinite"}}),"Loading price..."]}):Z.standard_rate?l.jsxs(l.Fragment,{children:[l.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold",color:"#B12704"},children:["₹",Math.round(Z.standard_rate*1).toLocaleString("en-IN")]}),l.jsxs("span",{style:{fontSize:"18px",color:"#666666",textDecoration:"line-through"},children:["₹",(_e=Z.standard_rate)==null?void 0:_e.toLocaleString("en-IN")]}),l.jsx("div",{style:{fontSize:"12px",color:"#007185",backgroundColor:"#F0F8FF",padding:"2px 6px",borderRadius:"4px",border:"1px solid #E0F2FE"}})]}):l.jsx("span",{style:{fontSize:"16px",color:"#666666"},children:"Price not available"})}),l.jsx("div",{style:{display:"flex",gap:"8px"},children:l.jsxs("button",{onClick:()=>G(Z),disabled:K,style:{flex:1,backgroundColor:K?"#F0F0F0":"#4f4b45ff",color:K?"#999999":"#FFFFFF",border:"none",borderRadius:"6px",padding:"12px 16px",fontSize:"14px",fontWeight:"600",cursor:K?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"background-color 0.3s ease",opacity:K?.6:1},onMouseOver:de=>{K||(de.target.style.backgroundColor="#005F73")},onMouseOut:de=>{K||(de.target.style.backgroundColor="#4f4b45ff")},children:[l.jsx(Ph,{size:14}),"Add to Cart"]})})]})]},Z.item_code)})}),l.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",padding:"30px",textAlign:"center",border:"1px solid #E5E7EB"},children:[l.jsx("h3",{style:{fontSize:"24px",fontWeight:"600",color:"#0F1111",marginBottom:"12px"},children:"Looking for something else?"}),l.jsx("p",{style:{color:"#565959",marginBottom:"24px",fontSize:"16px"},children:"Explore our wide range of products and find exactly what you need"}),l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"16px",flexWrap:"wrap"},children:l.jsxs(Qs,{to:"/cart",style:{backgroundColor:"transparent",color:"#007185",padding:"14px 28px",fontSize:"16px",fontWeight:"600",textDecoration:"none",borderRadius:"8px",border:"2px solid #007185",transition:"all 0.3s ease",display:"inline-flex",alignItems:"center",gap:"8px"},onMouseOver:Z=>{Z.target.style.backgroundColor="#007185",Z.target.style.color="#FFFFFF"},onMouseOut:Z=>{Z.target.style.backgroundColor="transparent",Z.target.style.color="#007185"},children:[l.jsx(Ph,{size:16}),"View Cart"]})})]})]}),l.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})]})},Lre=()=>{const e=Rh(),t=ua(),{items:n,totalAmount:i}=hd(N=>N.cart),[o,u]=L.useState({name:"",address:"",city:"",state:"",pincode:"",phone:""}),[c,a]=L.useState("cod"),[g,_]=L.useState(!1),S=N=>Ht(null,null,function*(){N.preventDefault();try{_(!0);const A={customer:"Guest Customer",delivery_date:new Date().toISOString().split("T")[0],items:n.map(D=>({item_code:D.name,qty:D.quantity,rate:D.standard_rate})),shipping_address:o,payment_method:c,total_amount:i},E=yield Lj.createSalesOrder(A);E&&(e(Mre()),alert(`Order placed successfully! Your order ID is ${E.name}. Thank you for shopping with Trade Blo Me!`),t("/"))}catch(A){console.error("Error placing order:",A),alert("Failed to place order. Please try again.")}finally{_(!1)}});return l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"40px 20px"},children:[l.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:In.textPrimary,marginBottom:"32px"},children:"Checkout"}),l.jsx("form",{onSubmit:S,children:l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"40px","@media (max-width: 768px)":{gridTemplateColumns:"1fr"}},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{backgroundColor:In.white,borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[l.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:In.textPrimary,marginBottom:"20px"},children:"Shipping Address"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[l.jsx("input",{type:"text",placeholder:"Full Name",value:o.name,onChange:N=>u(Me(te({},o),{name:N.target.value})),required:!0,style:{gridColumn:"1 / -1",border:`1px solid ${In.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none",transition:"border-color 0.3s ease"}}),l.jsx("input",{type:"text",placeholder:"Address",value:o.address,onChange:N=>u(Me(te({},o),{address:N.target.value})),required:!0,style:{gridColumn:"1 / -1",border:`1px solid ${In.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}}),l.jsx("input",{type:"text",placeholder:"City",value:o.city,onChange:N=>u(Me(te({},o),{city:N.target.value})),required:!0,style:{border:`1px solid ${In.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}}),l.jsx("input",{type:"text",placeholder:"State",value:o.state,onChange:N=>u(Me(te({},o),{state:N.target.value})),required:!0,style:{border:`1px solid ${In.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}}),l.jsx("input",{type:"text",placeholder:"Pincode",value:o.pincode,onChange:N=>u(Me(te({},o),{pincode:N.target.value})),required:!0,style:{border:`1px solid ${In.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}}),l.jsx("input",{type:"tel",placeholder:"Phone Number",value:o.phone,onChange:N=>u(Me(te({},o),{phone:N.target.value})),required:!0,style:{border:`1px solid ${In.lightGray}`,borderRadius:"8px",padding:"12px 16px",fontSize:"16px",outline:"none"}})]})]}),l.jsxs("div",{style:{backgroundColor:In.white,borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[l.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:In.textPrimary,marginBottom:"20px"},children:"Payment Method"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"16px",borderRadius:"8px",border:`2px solid ${c==="cod"?In.primary:In.lightGray}`,backgroundColor:c==="cod"?In.primaryLight+"10":In.white,cursor:"pointer"},children:[l.jsx("input",{type:"radio",value:"cod",checked:c==="cod",onChange:N=>a(N.target.value),style:{marginRight:"12px"}}),l.jsx(cre,{size:24,color:In.primary,style:{marginRight:"12px"}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Cash on Delivery"}),l.jsx("div",{style:{fontSize:"14px",color:In.textSecondary},children:"Pay when your order arrives"})]})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"16px",borderRadius:"8px",border:`2px solid ${c==="online"?In.primary:In.lightGray}`,backgroundColor:c==="online"?In.primaryLight+"10":In.white,cursor:"pointer"},children:[l.jsx("input",{type:"radio",value:"online",checked:c==="online",onChange:N=>a(N.target.value),style:{marginRight:"12px"}}),l.jsx(gz,{size:24,color:In.primary,style:{marginRight:"12px"}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Online Payment"}),l.jsx("div",{style:{fontSize:"14px",color:In.textSecondary},children:"Credit/Debit Card, UPI, Net Banking"})]})]})]})]})]}),l.jsxs("div",{style:{backgroundColor:In.white,borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",height:"fit-content"},children:[l.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:In.textPrimary,marginBottom:"20px"},children:"Order Summary"}),l.jsx("div",{style:{marginBottom:"20px"},children:n.map((N,A)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px",marginBottom:"12px",borderBottom:`1px solid ${In.lightGray}`},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:In.textPrimary,marginBottom:"4px"},children:N.item_name}),l.jsxs("div",{style:{fontSize:"12px",color:In.textSecondary},children:["Qty: ",N.quantity]})]}),l.jsxs("div",{style:{fontWeight:"bold",color:In.textPrimary},children:["₹",(N.quantity*N.standard_rate).toFixed(2)]})]},A))}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[l.jsx("span",{children:"Subtotal"}),l.jsxs("span",{children:["₹",i.toFixed(2)]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[l.jsx("span",{children:"Shipping"}),l.jsx("span",{style:{color:In.success},children:"FREE"})]}),l.jsx("hr",{style:{border:"none",borderTop:`2px solid ${In.primary}`,margin:"16px 0"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"24px",fontSize:"20px",fontWeight:"bold"},children:[l.jsx("span",{children:"Total"}),l.jsxs("span",{style:{color:In.primary},children:["₹",i.toFixed(2)]})]}),l.jsx("button",{type:"submit",disabled:g,style:{width:"100%",backgroundColor:g?In.gray:In.primary,color:In.white,border:"none",borderRadius:"8px",padding:"16px",fontSize:"18px",fontWeight:"bold",cursor:g?"not-allowed":"pointer",transition:"background-color 0.3s ease"},children:g?"Placing Order...":"Place Order"})]})]})})]})},Fre=()=>l.jsxs("footer",{style:{backgroundColor:"#3A3A3C",color:"#FFFFFF",padding:"60px 0 0 0",marginTop:"60px"},children:[l.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px"},children:l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"40px",marginBottom:"40px"},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{fontSize:"28px",fontWeight:"bold",color:"#FFFFFF",marginBottom:"20px",fontFamily:'"Segoe UI", Tahoma, Geneva, Verdana, sans-serif'},children:"Trade Blo Me"}),l.jsx("p",{style:{fontSize:"16px",color:"#CCCCCC",lineHeight:"1.6",marginBottom:"30px",maxWidth:"300px"},children:"Your trusted e-commerce platform for quality products at amazing prices. Shop with confidence and enjoy our premium service."}),l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#FFD814",marginBottom:"15px"},children:"Explore Other Apps"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[{name:"Health Card",url:"http://192.168.101.182:8002/mycard/health",icon:rre,color:"#FF6B6B"},{name:"My Card",url:"http://192.168.101.182:8002/mycard/",icon:gz,color:"#4ECDC4"},{name:"Social Card",url:"http://192.168.101.182:8002/mycard/social",icon:bre,color:"#45B7D1"},{name:"Home Card",url:"http://192.168.101.182:8002/mycard",icon:are,color:"#96CEB4"},{name:"Bank Card",url:"http://192.168.101.182:8002/mycard/bank",icon:xre,color:"#FECA57"}].map((e,t)=>l.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",backgroundColor:"#4A4A4C",borderRadius:"6px",textDecoration:"none",color:"#FFFFFF",fontSize:"14px",fontWeight:"500",transition:"all 0.3s ease",border:`1px solid ${e.color}20`},onMouseOver:n=>{n.currentTarget.style.backgroundColor=e.color+"20",n.currentTarget.style.borderColor=e.color,n.currentTarget.style.transform="translateX(5px)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="#4A4A4C",n.currentTarget.style.borderColor=e.color+"20",n.currentTarget.style.transform="translateX(0)"},children:[l.jsx(e.icon,{size:16,style:{color:e.color}}),l.jsx("span",{children:e.name}),l.jsx(ire,{size:12,style:{marginLeft:"auto",color:"#CCCCCC"}})]},t))})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:"20px",fontWeight:"600",color:"#FFFFFF",marginBottom:"20px"},children:"Quick Links"}),l.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:[{name:"About Us",link:"/about"},{name:"Contact Us",link:"/contact"},{name:"Privacy Policy",link:"/privacy"},{name:"Terms & Conditions",link:"/terms"},{name:"FAQ",link:"/faq"}].map((e,t)=>l.jsx("li",{style:{marginBottom:"12px"},children:l.jsx(Qs,{to:e.link,style:{color:"#CCCCCC",textDecoration:"none",fontSize:"16px",transition:"color 0.3s ease"},onMouseOver:n=>n.target.style.color="#FFD814",onMouseOut:n=>n.target.style.color="#CCCCCC",children:e.name})},t))})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:"20px",fontWeight:"600",color:"#FFFFFF",marginBottom:"20px"},children:"Categories"}),l.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:[{name:"Electronics",link:"/products?category=Electronics"},{name:"Fashion",link:"/products?category=Fashion"},{name:"Home & Living",link:"/products?category=Home & Living"},{name:"Books",link:"/products?category=Books"},{name:"Sports",link:"/products?category=Sports"}].map((e,t)=>l.jsx("li",{style:{marginBottom:"12px"},children:l.jsx(Qs,{to:e.link,style:{color:"#CCCCCC",textDecoration:"none",fontSize:"16px",transition:"color 0.3s ease"},onMouseOver:n=>n.target.style.color="#FFD814",onMouseOut:n=>n.target.style.color="#CCCCCC",children:e.name})},t))})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{fontSize:"20px",fontWeight:"600",color:"#FFFFFF",marginBottom:"20px"},children:"Contact Info"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[{icon:ore,text:"123 Trade Street, Business District, City 400001",color:"#FFD814"},{icon:ure,text:"+91 1800-123-4567",color:"#FFD814"},{icon:nre,text:"support@tradblome.com",color:"#FFD814"},{icon:tre,text:"Mon - Sat: 9:00 AM - 8:00 PM",color:"#FFD814"}].map((e,t)=>l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[l.jsx(e.icon,{size:18,style:{color:e.color,marginTop:"2px",flexShrink:0}}),l.jsx("span",{style:{color:"#CCCCCC",fontSize:"16px",lineHeight:"1.5"},children:e.text})]},t))})]})]})}),l.jsx("div",{style:{borderTop:"1px solid #555555",paddingTop:"30px",paddingBottom:"30px"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"20px"},children:[l.jsx("div",{style:{color:"#CCCCCC",fontSize:"16px"},children:"© 2025 Trade Blo Me. All rights reserved."}),l.jsx("div",{style:{display:"flex",gap:"30px",alignItems:"center"},children:[{icon:pre,text:"Secure Payment",color:"#00A652"},{icon:mre,text:"Free Shipping",color:"#FFD814"},{icon:sre,text:"24/7 Support",color:"#FF9900"}].map((e,t)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(e.icon,{size:20,style:{color:e.color}}),l.jsx("span",{style:{color:"#CCCCCC",fontSize:"14px",fontWeight:"600"},children:e.text})]},t))})]})})]}),Bre=()=>{const e=ua(),t=Rh(),{totalItems:n,wishlist:i,wishlistCount:o}=hd($=>$.cart),[u,c]=L.useState(""),[a,g]=L.useState(""),[_,S]=L.useState(n),N=()=>Ht(null,null,function*(){var $,G,W;try{const K=(W=(G=($=(yield(yield fetch("/api/method/webshop.webshop.shopping_cart.cart.get_cart_quotation",{credentials:"include"})).json()).message)==null?void 0:$.doc)==null?void 0:G.total_qty)!=null?W:n;S(K)}catch(J){S(n)}}),A=()=>Ht(null,null,function*(){var $,G,W;try{const J=is.get("user_id")||"Guest",Z=yield fetch(`/api/resource/Wishlist/${J}`,{credentials:"include"});if(Z.status===404){t(t4(0));return}const le=(W=(G=($=(yield Z.json()).data)==null?void 0:$.items)==null?void 0:G.length)!=null?W:i.length;t(t4(le))}catch(J){}});L.useEffect(()=>{N(),A()},[]);const E=()=>{let $=[];u.trim()&&$.push(`search=${encodeURIComponent(u.trim())}`),a&&$.push(`category=${encodeURIComponent(a)}`);const G=$.length>0?`?${$.join("&")}`:"";e(`/trade${G}`)},D=$=>{$.key==="Enter"&&E()},B=$=>{c($.target.value)};return l.jsxs("header",{style:{backgroundColor:In.primary,color:In.white,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx(Qs,{to:"/trade",style:{fontSize:"28px",fontWeight:"bold",color:In.white,textDecoration:"none"},children:"Trade Blo Me"}),l.jsx("div",{style:{flex:1,maxWidth:"600px",margin:"0 40px",position:"relative"},children:l.jsxs("div",{style:{display:"flex",backgroundColor:In.white,borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[l.jsx("input",{type:"text",value:u,onChange:B,onKeyPress:D,placeholder:"Search for products, brands and more...",style:{flex:1,border:"none",padding:"12px 16px",fontSize:"16px",outline:"none",color:In.textPrimary}}),l.jsx("button",{onClick:E,style:{backgroundColor:In.secondary,border:"none",padding:"12px 20px",cursor:"pointer",color:In.white,transition:"background-color 0.3s ease"},onMouseOver:$=>$.target.style.backgroundColor=In.secondaryLight,onMouseOut:$=>$.target.style.backgroundColor=In.secondary,children:l.jsx(hre,{size:18})})]})}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"8px"},children:[l.jsx(_re,{size:20}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",opacity:.8},children:"Hello, Sign in"}),l.jsx("div",{style:{fontWeight:"bold",fontSize:"14px"},children:"Account & Lists"})]})]}),l.jsxs(Qs,{to:"/wishlist",style:{color:In.white,textDecoration:"none",position:"relative",padding:"8px"},children:[l.jsx(vd,{size:24}),o>0&&l.jsx("span",{style:{position:"absolute",top:"-4px",right:"-4px",backgroundColor:In.secondary,color:In.white,borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:o})]}),l.jsxs(Qs,{to:"/cart",style:{color:In.white,textDecoration:"none",position:"relative",display:"flex",alignItems:"center",gap:"8px",padding:"8px"},children:[l.jsx(Ph,{size:24}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",opacity:.8},children:"Cart"}),l.jsxs("div",{style:{fontWeight:"bold",fontSize:"14px"},children:[_," items"]})]}),_>0&&l.jsx("span",{style:{position:"absolute",top:"-4px",right:"-4px",backgroundColor:In.secondary,color:In.white,borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:_})]})]})]}),l.jsx("nav",{style:{backgroundColor:In.primaryDark,borderTop:`1px solid ${In.primaryLight}`},children:l.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"12px 20px",display:"flex",alignItems:"center",gap:"32px"},children:l.jsx(Qs,{to:"/trade",style:{color:In.white,textDecoration:"none",fontSize:"16px",fontWeight:"500"},children:"All Products"})})})]})};function Lb(){const[e,t]=L.useState({days:0,hours:0,minutes:0,seconds:0}),[n,i]=L.useState(""),[o,u]=L.useState(!1),[c,a]=L.useState({x:0,y:0}),g=new Date("2025-03-15T09:00:00");L.useEffect(()=>{const N=setInterval(()=>{const A=new Date().getTime(),E=g.getTime()-A;E>0&&t({days:Math.floor(E/864e5),hours:Math.floor(E%864e5/36e5),minutes:Math.floor(E%36e5/6e4),seconds:Math.floor(E%6e4/1e3)})},1e3);return()=>clearInterval(N)},[]),L.useEffect(()=>{const N=A=>{a({x:A.clientX,y:A.clientY})};return window.addEventListener("mousemove",N),()=>window.removeEventListener("mousemove",N)},[]);const _=()=>{n&&n.includes("@")&&(u(!0),i(""),setTimeout(()=>u(!1),4e3))},S=N=>{N.key==="Enter"&&_()};return l.jsxs("div",{className:"min-h-screen bg-slate-50 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:`radial-gradient(circle at ${c.x*.1}px ${c.y*.1}px, rgba(79, 70, 229, 0.1) 0%, transparent 50%)`}}),l.jsx("div",{className:"absolute top-20 right-20 w-4 h-4 bg-orange-300 rounded-full opacity-60",style:{transform:`translate(${c.x*.02}px, ${c.y*.01}px)`}}),l.jsx("div",{className:"absolute bottom-32 left-16 w-6 h-6 bg-blue-200 rounded-full opacity-40",style:{transform:`translate(${c.x*-.01}px, ${c.y*.02}px)`}}),l.jsx("div",{className:"absolute top-1/2 left-10 w-3 h-3 bg-green-300 rounded-full opacity-50",style:{transform:`translate(${c.x*.015}px, ${c.y*-.01}px)`}}),l.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-6 py-16",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 bg-white rounded-full px-4 py-2 shadow-sm border mb-8",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Currently in development"})]}),l.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 mb-6 leading-tight",children:["Something great is",l.jsx("span",{className:"text-indigo-600 block mt-2",children:"coming soon"})]}),l.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"We're putting the finishing touches on our new platform. It's going to change how you think about productivity forever."})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-16 max-w-2xl mx-auto",children:[{label:"Days",value:e.days,color:"bg-red-500"},{label:"Hours",value:e.hours,color:"bg-blue-500"},{label:"Minutes",value:e.minutes,color:"bg-green-500"},{label:"Seconds",value:e.seconds,color:"bg-orange-500"}].map(N=>l.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:`w-4 h-1 ${N.color} rounded-full mb-4`}),l.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:N.value.toString().padStart(2,"0")}),l.jsx("div",{className:"text-sm text-gray-500 uppercase tracking-wide font-medium",children:N.label})]},N.label))}),l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Want early access?"}),l.jsx("p",{className:"text-gray-600 mb-8",children:"Join 2,847 others who'll get first dibs when we launch"}),l.jsxs("div",{className:"max-w-md mx-auto",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(jP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"email",value:n,onChange:N=>i(N.target.value),onKeyPress:S,placeholder:"your@email.com",className:"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 text-gray-900"})]}),l.jsxs("button",{onClick:_,className:"px-6 py-4 bg-indigo-600 text-white font-medium rounded-xl hover:bg-indigo-700 transition-colors duration-200 flex items-center gap-2 group",children:["Get notified",l.jsx(Q8,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),o&&l.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-xl text-green-800",children:"Perfect! You're on the list. We'll email you as soon as we're ready."})]})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:l.jsx(KB,{className:"w-6 h-6 text-blue-600"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Lightning Fast"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Built from the ground up for speed. No more waiting around."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:l.jsx(qB,{className:"w-6 h-6 text-green-600"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Team First"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Designed for teams who actually want to work together."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:l.jsx(PF,{className:"w-6 h-6 text-orange-600"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Simple & Clean"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"No clutter. No confusion. Just the tools you need."})]})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100 mb-16",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Development Progress"}),l.jsx("span",{className:"text-sm text-gray-500",children:"85% Complete"})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-blue-600 h-3 rounded-full transition-all duration-1000 ease-out",style:{width:"85%"}})}),l.jsx("p",{className:"text-sm text-gray-600 mt-3",children:"Currently working on final testing and polish. Almost there! 🚀"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Have questions? Drop us a line at ",l.jsx("a",{href:"mailto:hello@yourapp.com",className:"text-indigo-600 hover:underline",children:"hello@yourapp.com"})]}),l.jsx("p",{className:"text-gray-400 text-xs",children:"© 2025 YourApp Inc. Made with care in San Francisco."})]})]})]})}const Vre=()=>{const e=ua();return l.jsx("div",{class:"bg-gray-50 min-h-screen",children:l.jsxs("div",{class:"max-w-4xl mx-auto px-4 py-16",children:[l.jsxs("button",{className:"cursor-pointer flex gap-2 items-center justify-center",onClick:()=>e("/signup"),children:[l.jsx(Nv,{}),"Back"]}),l.jsxs("div",{class:"bg-white rounded-2xl shadow-xl p-8",children:[l.jsx("h1",{class:"text-3xl font-bold text-gray-900 mb-8",children:"Terms of Service"}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"1. Acceptance of Terms"}),l.jsx("div",{class:"prose text-gray-600",children:l.jsx("p",{children:"By accessing and using this website, you accept and agree to be bound by the terms and provision of this agreement."})})]}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"2. Use License"}),l.jsx("div",{class:"bg-gray-50 rounded-lg p-6",children:l.jsxs("ul",{class:"space-y-4 text-gray-600",children:[l.jsxs("li",{class:"flex gap-3",children:[l.jsx("svg",{class:"h-6 w-6 text-blue-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})}),l.jsx("span",{children:"Permission is granted to temporarily download one copy of the materials for personal, non-commercial transitory viewing only."})]}),l.jsxs("li",{class:"flex gap-3",children:[l.jsx("svg",{class:"h-6 w-6 text-blue-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})}),l.jsx("span",{children:"This is the grant of a license, not a transfer of title."})]})]})})]}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"3. Disclaimer"}),l.jsx("div",{class:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:l.jsxs("div",{class:"flex",children:[l.jsx("div",{class:"flex-shrink-0",children:l.jsx("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})})}),l.jsx("div",{class:"ml-3",children:l.jsx("p",{class:"text-sm text-yellow-700",children:"The materials on this website are provided on an 'as is' basis. We make no warranties, expressed or implied, and hereby disclaim and negate all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."})})]})})]}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"4. Limitations"}),l.jsxs("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{class:"bg-gray-50 p-6 rounded-lg",children:[l.jsx("h3",{class:"font-medium text-gray-900 mb-2",children:"Time Limitations"}),l.jsx("p",{class:"text-gray-600",children:"Claims must be filed within 30 days of incident."})]}),l.jsxs("div",{class:"bg-gray-50 p-6 rounded-lg",children:[l.jsx("h3",{class:"font-medium text-gray-900 mb-2",children:"Liability"}),l.jsx("p",{class:"text-gray-600",children:"We shall not be held liable for any damages."})]})]})]}),l.jsxs("section",{class:"mb-8",children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"5. Revisions"}),l.jsx("div",{class:"prose text-gray-600",children:l.jsx("p",{children:"We may revise these terms of service at any time without notice. By using this website you are agreeing to be bound by the current version of these terms of service."})})]}),l.jsxs("section",{children:[l.jsx("h2",{class:"text-xl font-semibold text-gray-800 mb-4",children:"6. Contact"}),l.jsxs("div",{class:"bg-gray-50 rounded-lg p-6 flex items-center justify-between",children:[l.jsx("p",{class:"text-gray-600",children:"Questions about the Terms of Service?"}),l.jsxs("a",{href:"mailto:legal@example.com",class:"inline-flex items-center text-blue-600 hover:text-blue-500",children:[l.jsx("svg",{class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Contact Us"]})]})]})]})]})})},Ure=()=>{const e=pl(),t=is.get("user_id"),n=()=>e.pathname.startsWith("/product/")?!0:["/trade","/products","/cart","/wishlist","/checkout"].includes(e.pathname);return l.jsxs("div",{className:"flex-1 overflow-hidden",children:[n()?l.jsx(Bre,{}):l.jsx(QV,{}),l.jsxs(Q4,{children:[l.jsx(Is,{path:"/",element:l.jsx($g,{user:t,children:l.jsx(kE,{})})}),l.jsx(Is,{path:"/social_media",element:l.jsx($g,{user:t,children:l.jsx(jW,{})})}),l.jsx(Is,{path:"/patient-not-found",element:l.jsx(JB,{})}),l.jsx(Is,{path:"/profile/:id",element:l.jsx(nJ,{})}),l.jsx(Is,{path:"/comments/:id",element:l.jsx(xQ,{})}),l.jsx(Is,{path:"/edit-profile",element:l.jsx(QQ,{})}),l.jsx(Is,{path:"/chat",element:l.jsx(tJ,{})}),l.jsx(Is,{path:"/create-channel",element:l.jsx(S6,{})}),l.jsx(Is,{path:"/profile",element:l.jsx($g,{user:t,children:l.jsx(kE,{})})}),l.jsx(Is,{path:"/loyalty",element:l.jsx($g,{user:t,children:l.jsx(Kse,{})})}),l.jsx(Is,{path:"/health",element:l.jsx($g,{user:t,children:l.jsx(vJ,{})})}),l.jsx(Is,{path:"/academy",element:l.jsx(Lb,{})}),l.jsx(Is,{path:"/legal",element:l.jsx(Lb,{})}),l.jsx(Is,{path:"/career",element:l.jsx(Lb,{})}),l.jsx(Is,{path:"/bank",element:l.jsx(Lb,{})}),l.jsx(Is,{path:"/trade",element:l.jsx($g,{user:t,children:l.jsx(Pre,{})})}),l.jsx(Is,{path:"/products",element:l.jsx(Dre,{})}),l.jsx(Is,{path:"/product/:id",element:l.jsx(zre,{})}),l.jsx(Is,{path:"/cart",element:l.jsx(Ire,{})}),l.jsx(Is,{path:"/wishlist",element:l.jsx(Ore,{})}),l.jsx(Is,{path:"/checkout",element:l.jsx(Lre,{})}),l.jsx(Is,{path:"/get_medicine",element:l.jsx(xJ,{})})]}),n()&&l.jsx(Fre,{})]})};function $re(){return l.jsx(CO,{socketPort:"9001",children:l.jsxs(GL,{basename:"/mycard",children:[l.jsx(CN,{richColors:!0}),l.jsxs(Q4,{children:[l.jsx(Is,{path:"/login",element:l.jsx(yQ,{})}),l.jsx(Is,{path:"/signup",element:l.jsx(mQ,{})}),l.jsx(Is,{path:"/terms_and_condition",element:l.jsx(Vre,{})}),l.jsx(Is,{path:"/*",element:l.jsxs("div",{className:"min-h-screen w-screen bg-gray-50 flex p-3",children:[l.jsx(iJ,{}),l.jsx(Ure,{})]})})]}),l.jsx(CN,{richColors:!0})]})})}var UT="persist:",vz="persist/FLUSH",$T="persist/REHYDRATE",wz="persist/PAUSE",Sz="persist/PERSIST",jz="persist/PURGE",Cz="persist/REGISTER",Hre=-1;function bv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bv=function(n){return typeof n}:bv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bv(e)}function n4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function qre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n4(n,!0).forEach(function(i){Gre(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n4(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Gre(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wre(e,t,n,i){i.debug;var o=qre({},n);return e&&bv(e)==="object"&&Object.keys(e).forEach(function(u){u!=="_persist"&&t[u]===n[u]&&(o[u]=e[u])}),o}function Zre(e){var t=e.blacklist||null,n=e.whitelist||null,i=e.transforms||[],o=e.throttle||0,u="".concat(e.keyPrefix!==void 0?e.keyPrefix:UT).concat(e.key),c=e.storage,a;e.serialize===!1?a=function(K){return K}:typeof e.serialize=="function"?a=e.serialize:a=Yre;var g=e.writeFailHandler||null,_={},S={},N=[],A=null,E=null,D=function(K){Object.keys(K).forEach(function(le){G(le)&&_[le]!==K[le]&&N.indexOf(le)===-1&&N.push(le)}),Object.keys(_).forEach(function(le){K[le]===void 0&&G(le)&&N.indexOf(le)===-1&&_[le]!==void 0&&N.push(le)}),A===null&&(A=setInterval(B,o)),_=K};function B(){if(N.length===0){A&&clearInterval(A),A=null;return}var Z=N.shift(),K=i.reduce(function(le,_e){return _e.in(le,Z,_)},_[Z]);if(K!==void 0)try{S[Z]=a(K)}catch(le){console.error("redux-persist/createPersistoid: error serializing state",le)}else delete S[Z];N.length===0&&$()}function $(){Object.keys(S).forEach(function(Z){_[Z]===void 0&&delete S[Z]}),E=c.setItem(u,a(S)).catch(W)}function G(Z){return!(n&&n.indexOf(Z)===-1&&Z!=="_persist"||t&&t.indexOf(Z)!==-1)}function W(Z){g&&g(Z)}var J=function(){for(;N.length!==0;)B();return E||Promise.resolve()};return{update:D,flush:J}}function Yre(e){return JSON.stringify(e)}function Xre(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:UT).concat(e.key),i=e.storage;e.debug;var o;return e.deserialize===!1?o=function(c){return c}:typeof e.deserialize=="function"?o=e.deserialize:o=Kre,i.getItem(n).then(function(u){if(u)try{var c={},a=o(u);return Object.keys(a).forEach(function(g){c[g]=t.reduceRight(function(_,S){return S.out(_,g,a)},o(a[g]))}),c}catch(g){throw g}else return})}function Kre(e){return JSON.parse(e)}function Qre(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:UT).concat(e.key);return t.removeItem(n,Jre)}function Jre(e){}function i4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function fh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i4(n,!0).forEach(function(i){eae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i4(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function eae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tae(e,t){if(e==null)return{};var n=nae(e,t),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)i=u[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function nae(e,t){if(e==null)return{};var n={},i=Object.keys(e),o,u;for(u=0;u<i.length;u++)o=i[u],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var iae=5e3;function sae(e,t){var n=e.version!==void 0?e.version:Hre;e.debug;var i=e.stateReconciler===void 0?Wre:e.stateReconciler,o=e.getStoredState||Xre,u=e.timeout!==void 0?e.timeout:iae,c=null,a=!1,g=!0,_=function(N){return N._persist.rehydrated&&c&&!g&&c.update(N),N};return function(S,N){var A=S||{},E=A._persist,D=tae(A,["_persist"]),B=D;if(N.type===Sz){var $=!1,G=function(de,pe){$||(N.rehydrate(e.key,de,pe),$=!0)};if(u&&setTimeout(function(){!$&&G(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},u),g=!1,c||(c=Zre(e)),E)return fh({},t(B,N),{_persist:E});if(typeof N.rehydrate!="function"||typeof N.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return N.register(e.key),o(e).then(function(_e){var de=e.migrate||function(pe,Oe){return Promise.resolve(pe)};de(_e,n).then(function(pe){G(pe)},function(pe){G(void 0,pe)})},function(_e){G(void 0,_e)}),fh({},t(B,N),{_persist:{version:n,rehydrated:!1}})}else{if(N.type===jz)return a=!0,N.result(Qre(e)),fh({},t(B,N),{_persist:E});if(N.type===vz)return N.result(c&&c.flush()),fh({},t(B,N),{_persist:E});if(N.type===wz)g=!0;else if(N.type===$T){if(a)return fh({},B,{_persist:fh({},E,{rehydrated:!0})});if(N.key===e.key){var W=t(B,N),J=N.payload,Z=i!==!1&&J!==void 0?i(J,S,W,e):W,K=fh({},Z,{_persist:fh({},E,{rehydrated:!0})});return _(K)}}}if(!E)return t(S,N);var le=t(B,N);return le===B?S:_(fh({},le,{_persist:E}))}}function s4(e){return oae(e)||aae(e)||rae()}function rae(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function aae(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function oae(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function r4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function Fj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r4(n,!0).forEach(function(i){lae(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r4(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function lae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tz={registry:[],bootstrapped:!1},cae=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tz,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Cz:return Fj({},t,{registry:[].concat(s4(t.registry),[n.key])});case $T:var i=t.registry.indexOf(n.key),o=s4(t.registry);return o.splice(i,1),Fj({},t,{registry:o,bootstrapped:o.length===0});default:return t}};function uae(e,t,n){var i=gC(cae,Tz,void 0),o=function(g){i.dispatch({type:Cz,key:g})},u=function(g,_,S){var N={type:$T,payload:_,err:S,key:g};e.dispatch(N),i.dispatch(N)},c=Fj({},i,{purge:function(){var g=[];return e.dispatch({type:jz,result:function(S){g.push(S)}}),Promise.all(g)},flush:function(){var g=[];return e.dispatch({type:vz,result:function(S){g.push(S)}}),Promise.all(g)},pause:function(){e.dispatch({type:wz})},persist:function(){e.dispatch({type:Sz,register:o,rehydrate:u})}});return c.persist(),c}var X0={},Fb={},Bb={},a4;function dae(){if(a4)return Bb;a4=1,Bb.__esModule=!0,Bb.default=o;function e(u){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(a){return typeof a}:e=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e(u)}function t(){}var n={getItem:t,setItem:t,removeItem:t};function i(u){if((typeof self=="undefined"?"undefined":e(self))!=="object"||!(u in self))return!1;try{var c=self[u],a="redux-persist ".concat(u," test");c.setItem(a,"test"),c.getItem(a),c.removeItem(a)}catch(g){return!1}return!0}function o(u){var c="".concat(u,"Storage");return i(c)?self[c]:n}return Bb}var o4;function hae(){if(o4)return Fb;o4=1,Fb.__esModule=!0,Fb.default=n;var e=t(dae());function t(i){return i&&i.__esModule?i:{default:i}}function n(i){var o=(0,e.default)(i);return{getItem:function(c){return new Promise(function(a,g){a(o.getItem(c))})},setItem:function(c,a){return new Promise(function(g,_){g(o.setItem(c,a))})},removeItem:function(c){return new Promise(function(a,g){a(o.removeItem(c))})}}}return Fb}var l4;function fae(){if(l4)return X0;l4=1,X0.__esModule=!0,X0.default=void 0;var e=t(hae());function t(i){return i&&i.__esModule?i:{default:i}}var n=(0,e.default)("local");return X0.default=n,X0}var pae=fae();const mae=Hx(pae),gae={key:"user",storage:mae,whitelist:["currentUser"]},yae=sae(gae,gQ),xae=PP({user:yae,cart:Ere,cardBloMePage1:UV,cardBloMePage2:qV,cardBloMePage3:ZV,cardBloMePage4:KV}),kz=H7({reducer:xae,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE","persist/PAUSE","persist/PURGE","persist/REGISTER"]}})}),_ae=uae(kz);function vv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vv=function(n){return typeof n}:vv=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vv(e)}function bae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vae(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wae(e,t,n){return t&&vae(e.prototype,t),e}function Sae(e,t){return t&&(vv(t)==="object"||typeof t=="function")?t:wv(e)}function Bj(e){return Bj=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Bj(e)}function wv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vj(e,t)}function Vj(e,t){return Vj=Object.setPrototypeOf||function(i,o){return i.__proto__=o,i},Vj(e,t)}function Sv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nz=function(e){jae(t,e);function t(){var n,i;bae(this,t);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return i=Sae(this,(n=Bj(t)).call.apply(n,[this].concat(u))),Sv(wv(i),"state",{bootstrapped:!1}),Sv(wv(i),"_unsubscribe",void 0),Sv(wv(i),"handlePersistorState",function(){var a=i.props.persistor,g=a.getState(),_=g.bootstrapped;_&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).finally(function(){return i.setState({bootstrapped:!0})}):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())}),i}return wae(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(L.PureComponent);Sv(Nz,"defaultProps",{children:null,loading:null});Jz.createRoot(document.getElementById("root")).render(l.jsx(L.StrictMode,{children:l.jsx(m7,{store:kz,children:l.jsx(Nz,{loading:l.jsx("div",{children:"Loading..."}),persistor:_ae,children:l.jsx($re,{})})})}))});export default Cae();
